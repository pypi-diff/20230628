# Comparing `tmp/odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1-py3-none-any.whl.zip` & `tmp/odoo12_addon_l10n_es_ticketbai-12.0.2.7.8-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,61 +1,61 @@
-Zip file size: 88044 bytes, number of entries: 59
--rw-r--r--  2.0 unx     4642 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/README.rst
--rw-r--r--  2.0 unx       76 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/__init__.py
--rw-r--r--  2.0 unx     1835 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/__manifest__.py
--rw-r--r--  2.0 unx     3565 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/hooks.py
--rw-r--r--  2.0 unx    10137 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/data/account_fiscal_position_template.xml
--rw-r--r--  2.0 unx     5049 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/data/tax_map_data.xml
--rw-r--r--  2.0 unx     1682 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/data/vat_exemption_key_data.xml
--rw-r--r--  2.0 unx     4493 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/data/vat_regime_key_data.xml
--rw-r--r--  2.0 unx    36255 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/i18n/es.po
--rw-r--r--  2.0 unx    35843 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/i18n/eu.po
--rw-r--r--  2.0 unx    31271 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/i18n/l10n_es_ticketbai.pot
--rw-r--r--  2.0 unx      522 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/migrations/12.0.1.0.2/post-migration.py
--rw-r--r--  2.0 unx     1292 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/migrations/12.0.2.3.0/post-migrate.py
--rw-r--r--  2.0 unx      415 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/__init__.py
--rw-r--r--  2.0 unx     1507 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/account_fiscal_position.py
--rw-r--r--  2.0 unx    26603 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/account_invoice.py
--rw-r--r--  2.0 unx     6896 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/account_invoice_tax.py
--rw-r--r--  2.0 unx     1487 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/account_journal.py
--rw-r--r--  2.0 unx      803 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/account_tax.py
--rw-r--r--  2.0 unx     1645 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/aeat_certificate.py
--rw-r--r--  2.0 unx     2920 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/chart_template.py
--rw-r--r--  2.0 unx      307 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/ir_sequence.py
--rw-r--r--  2.0 unx     4360 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/res_company.py
--rw-r--r--  2.0 unx     5491 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/ticketbai_invoice.py
--rw-r--r--  2.0 unx      455 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/ticketbai_tax_map.py
--rw-r--r--  2.0 unx      607 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/ticketbai_vat_exemption_key.py
--rw-r--r--  2.0 unx     2457 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/models/ticketbai_vat_regime_key.py
--rw-r--r--  2.0 unx     3058 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9485 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/static/description/icon.png
--rw-r--r--  2.0 unx      134 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/__init__.py
--rw-r--r--  2.0 unx    12459 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/common.py
--rw-r--r--  2.0 unx     2281 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_cancellation.py
--rw-r--r--  2.0 unx    25947 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_invoice.py
--rw-r--r--  2.0 unx     4988 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/certs/ciudadano_act.p12
--rw-r--r--  2.0 unx        6 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/certs/ciudadano_act_p12_password.txt
--rw-r--r--  2.0 unx     1704 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/certs/private_up_8mgwq.pem
--rw-r--r--  2.0 unx     3166 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/tests/certs/public_362gar7l.crt
--rw-r--r--  2.0 unx     4808 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/account_fiscal_position_template_views.xml
--rw-r--r--  2.0 unx     3008 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/account_fiscal_position_views.xml
--rw-r--r--  2.0 unx     8767 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/account_invoice_views.xml
--rw-r--r--  2.0 unx     1036 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/account_journal_views.xml
--rw-r--r--  2.0 unx      732 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/ir_sequence_views.xml
--rw-r--r--  2.0 unx     1477 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/l10n_es_ticketbai_views.xml
--rw-r--r--  2.0 unx     1043 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/report_invoice.xml
--rw-r--r--  2.0 unx     2212 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/res_company_views.xml
--rw-r--r--  2.0 unx      986 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/res_partner_views.xml
--rw-r--r--  2.0 unx     1773 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/tax_map_views.xml
--rw-r--r--  2.0 unx     4196 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/ticketbai_invoice_views.xml
--rw-r--r--  2.0 unx     1709 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/vat_exemption_key_views.xml
--rw-r--r--  2.0 unx     1685 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/views/vat_regime_key_views.xml
--rw-r--r--  2.0 unx      106 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/wizard/__init__.py
--rw-r--r--  2.0 unx      797 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/wizard/account_invoice_refund.py
--rw-r--r--  2.0 unx      755 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/wizard/aeat_certificate_password.py
--rw-r--r--  2.0 unx     2151 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info.py
--rw-r--r--  2.0 unx     1916 b- defN 23-Jun-21 03:58 odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info_views.xml
--rw-r--r--  2.0 unx     5456 b- defN 23-Jun-21 03:58 odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-21 03:58 odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jun-21 03:58 odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     6739 b- defN 23-Jun-21 03:58 odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/RECORD
-59 files, 307292 bytes uncompressed, 76648 bytes compressed:  75.1%
+Zip file size: 88097 bytes, number of entries: 59
+-rw-r--r--  2.0 unx     4642 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/README.rst
+-rw-r--r--  2.0 unx       76 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/__init__.py
+-rw-r--r--  2.0 unx     1835 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/__manifest__.py
+-rw-r--r--  2.0 unx     3565 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/hooks.py
+-rw-r--r--  2.0 unx    10137 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/data/account_fiscal_position_template.xml
+-rw-r--r--  2.0 unx     5049 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/data/tax_map_data.xml
+-rw-r--r--  2.0 unx     1682 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/data/vat_exemption_key_data.xml
+-rw-r--r--  2.0 unx     4493 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/data/vat_regime_key_data.xml
+-rw-r--r--  2.0 unx    36255 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/i18n/es.po
+-rw-r--r--  2.0 unx    35843 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/i18n/eu.po
+-rw-r--r--  2.0 unx    31271 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/i18n/l10n_es_ticketbai.pot
+-rw-r--r--  2.0 unx      522 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/migrations/12.0.1.0.2/post-migration.py
+-rw-r--r--  2.0 unx     1292 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/migrations/12.0.2.3.0/post-migrate.py
+-rw-r--r--  2.0 unx      415 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/__init__.py
+-rw-r--r--  2.0 unx     1507 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/account_fiscal_position.py
+-rw-r--r--  2.0 unx    27339 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/account_invoice.py
+-rw-r--r--  2.0 unx     6896 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/account_invoice_tax.py
+-rw-r--r--  2.0 unx     1487 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/account_journal.py
+-rw-r--r--  2.0 unx      803 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/account_tax.py
+-rw-r--r--  2.0 unx     1645 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/aeat_certificate.py
+-rw-r--r--  2.0 unx     2920 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/chart_template.py
+-rw-r--r--  2.0 unx      307 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/ir_sequence.py
+-rw-r--r--  2.0 unx     4360 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/res_company.py
+-rw-r--r--  2.0 unx     5491 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/ticketbai_invoice.py
+-rw-r--r--  2.0 unx      455 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/ticketbai_tax_map.py
+-rw-r--r--  2.0 unx      607 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/ticketbai_vat_exemption_key.py
+-rw-r--r--  2.0 unx     2457 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/models/ticketbai_vat_regime_key.py
+-rw-r--r--  2.0 unx     3058 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9485 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/static/description/icon.png
+-rw-r--r--  2.0 unx      134 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/__init__.py
+-rw-r--r--  2.0 unx    12459 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/common.py
+-rw-r--r--  2.0 unx     2281 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_cancellation.py
+-rw-r--r--  2.0 unx    26005 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_invoice.py
+-rw-r--r--  2.0 unx     4988 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/certs/ciudadano_act.p12
+-rw-r--r--  2.0 unx        6 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/certs/ciudadano_act_p12_password.txt
+-rw-r--r--  2.0 unx     1704 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/certs/private_up_8mgwq.pem
+-rw-r--r--  2.0 unx     3166 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/tests/certs/public_362gar7l.crt
+-rw-r--r--  2.0 unx     4808 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/account_fiscal_position_template_views.xml
+-rw-r--r--  2.0 unx     3008 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/account_fiscal_position_views.xml
+-rw-r--r--  2.0 unx     8767 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/account_invoice_views.xml
+-rw-r--r--  2.0 unx     1036 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/account_journal_views.xml
+-rw-r--r--  2.0 unx      732 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/ir_sequence_views.xml
+-rw-r--r--  2.0 unx     1477 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/l10n_es_ticketbai_views.xml
+-rw-r--r--  2.0 unx     1043 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/report_invoice.xml
+-rw-r--r--  2.0 unx     2212 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/res_company_views.xml
+-rw-r--r--  2.0 unx      986 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/res_partner_views.xml
+-rw-r--r--  2.0 unx     1773 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/tax_map_views.xml
+-rw-r--r--  2.0 unx     4196 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/ticketbai_invoice_views.xml
+-rw-r--r--  2.0 unx     1709 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/vat_exemption_key_views.xml
+-rw-r--r--  2.0 unx     1685 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/views/vat_regime_key_views.xml
+-rw-r--r--  2.0 unx      106 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/wizard/__init__.py
+-rw-r--r--  2.0 unx      797 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/wizard/account_invoice_refund.py
+-rw-r--r--  2.0 unx      755 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/wizard/aeat_certificate_password.py
+-rw-r--r--  2.0 unx     2151 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info.py
+-rw-r--r--  2.0 unx     1916 b- defN 23-Jun-27 16:37 odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info_views.xml
+-rw-r--r--  2.0 unx     5448 b- defN 23-Jun-27 16:37 odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-27 16:37 odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-27 16:37 odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     6707 b- defN 23-Jun-27 16:37 odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/RECORD
+59 files, 308046 bytes uncompressed, 76765 bytes compressed:  75.1%
```

## zipnote {}

```diff
@@ -159,20 +159,20 @@
 
 Filename: odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info.py
 Comment: 
 
 Filename: odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info_views.xml
 Comment: 
 
-Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/METADATA
+Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/METADATA
 Comment: 
 
-Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/WHEEL
+Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/WHEEL
 Comment: 
 
-Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/top_level.txt
+Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/RECORD
+Filename: odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_es_ticketbai/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Copyright 2021 Binovo IT Human Project SL
 # Copyright 2021 Landoo Sistemas de Informacion SL
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "TicketBAI - "
             "declaración de todas las operaciones de venta realizadas por las personas "
             "y entidades que desarrollan actividades económicas",
-    "version": "12.0.2.7.7",
+    "version": "12.0.2.7.8",
     "category": "Accounting & Finance",
     "website": "https://github.com/OCA/l10n-spain",
     "author": "Binovo,"
               "Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "application": False,
     "installable": True,
```

## odoo/addons/l10n_es_ticketbai/i18n/l10n_es_ticketbai.pot

```diff
@@ -71,15 +71,15 @@
 
 #. module: l10n_es_ticketbai
 #: model_terms:ir.ui.view,arch_db:l10n_es_ticketbai.tbai_invoice_form
 msgid "Cancel and recreate"
 msgstr ""
 
 #. module: l10n_es_ticketbai
-#: code:addons/l10n_es_ticketbai/models/account_invoice.py:319
+#: code:addons/l10n_es_ticketbai/models/account_invoice.py:313
 #, python-format
 msgid "Cancellation"
 msgstr ""
 
 #. module: l10n_es_ticketbai
 #: model:ir.model.fields,field_description:l10n_es_ticketbai.field_tbai_invoice__cancelled_invoice_id
 msgid "Cancelled Invoice"
@@ -385,15 +385,15 @@
 
 #. module: l10n_es_ticketbai
 #: model_terms:ir.ui.view,arch_db:l10n_es_ticketbai.invoice_form_inherit
 msgid "Origin Invoices Data"
 msgstr ""
 
 #. module: l10n_es_ticketbai
-#: code:addons/l10n_es_ticketbai/models/account_invoice.py:364
+#: code:addons/l10n_es_ticketbai/models/account_invoice.py:358
 #, python-format
 msgid "Please, specify data for the original invoices that are going to be refunded"
 msgstr ""
 
 #. module: l10n_es_ticketbai
 #: model:ir.model.fields,field_description:l10n_es_ticketbai.field_res_company__tbai_protected_data
 msgid "Protected Data"
@@ -406,15 +406,15 @@
 
 #. module: l10n_es_ticketbai
 #: model_terms:ir.ui.view,arch_db:l10n_es_ticketbai.invoice_form_inherit
 msgid "Refund"
 msgstr ""
 
 #. module: l10n_es_ticketbai
-#: code:addons/l10n_es_ticketbai/models/account_invoice.py:342
+#: code:addons/l10n_es_ticketbai/models/account_invoice.py:336
 #, python-format
 msgid "Refund invoices must be cancelled in order to cancel the original invoice."
 msgstr ""
 
 #. module: l10n_es_ticketbai
 #: code:addons/l10n_es_ticketbai/models/ticketbai_invoice.py:95
 #, python-format
@@ -458,21 +458,21 @@
 
 #. module: l10n_es_ticketbai
 #: model:ir.model.fields,field_description:l10n_es_ticketbai.field_tbai_info__software
 msgid "Software"
 msgstr ""
 
 #. module: l10n_es_ticketbai
-#: code:addons/l10n_es_ticketbai/models/account_invoice.py:378
+#: code:addons/l10n_es_ticketbai/models/account_invoice.py:372
 #, python-format
 msgid "Some of the original invoices have related tbai cancelled invoices"
 msgstr ""
 
 #. module: l10n_es_ticketbai
-#: code:addons/l10n_es_ticketbai/models/account_invoice.py:373
+#: code:addons/l10n_es_ticketbai/models/account_invoice.py:367
 #, python-format
 msgid "Some of the original invoices have related tbai invoices in inconsistent state please fix them beforehand."
 msgstr ""
 
 #. module: l10n_es_ticketbai
 #: model:ir.model.fields,help:l10n_es_ticketbai.field_account_bank_statement_import_journal_creation__tbai_active_date
 #: model:ir.model.fields,help:l10n_es_ticketbai.field_account_journal__tbai_active_date
```

## odoo/addons/l10n_es_ticketbai/models/account_invoice.py

```diff
@@ -168,21 +168,15 @@
         self.ensure_one()
         lines = []
         for line in self.invoice_line_ids:
             description_line = line.name[:250]
             if self.company_id.tbai_protected_data \
                     and self.company_id.tbai_protected_data_txt:
                 description_line = self.company_id.tbai_protected_data_txt[:250]
-            price_unit = line.price_unit
-            for tax in line.invoice_line_tax_ids:
-                if tax.price_include:
-                    price_unit = (
-                        price_unit -
-                        (line.price_unit * tax.amount / (100 + tax.amount))
-                    )
+            price_unit = line.tbai_get_price_unit()
             lines.append((0, 0, {
                 'description': description_line,
                 'quantity': line.tbai_get_value_cantidad(),
                 'price_unit': "%.8f" % price_unit,
                 'discount_amount': line.tbai_get_value_descuento(price_unit),
                 'amount_total': line.tbai_get_value_importe_total()
             }))
@@ -551,14 +545,29 @@
                     description += " - ".join(filter(None, names))
             invoice.tbai_description_operation = (description or "")[:250] or "/"
 
 
 class AccountInvoiceLine(models.Model):
     _inherit = 'account.invoice.line'
 
+    def tbai_get_price_unit(self):
+        price_unit = self.price_unit
+        for tax in self.invoice_line_tax_ids:
+            if tax.price_include:
+                price_unit = (
+                    price_unit -
+                    (self.price_unit * tax.amount / (100 + tax.amount))
+                )
+        if (self.currency_id and self.company_id and
+                self.currency_id != self.company_id.currency_id):
+            rate_date = self.invoice_id._get_currency_rate_date() or fields.Date.today()
+            price_unit = self.currency_id._convert(
+                price_unit, self.company_id.currency_id, self.company_id, rate_date)
+        return price_unit
+
     def tbai_get_value_cantidad(self):
         if RefundType.differences.value == self.invoice_id.tbai_refund_type:
             sign = -1
         else:
             sign = 1
         return "%.2f" % (sign * self.quantity)
 
@@ -581,12 +590,16 @@
         )
         currency = self.invoice_id and self.invoice_id.currency_id or None
         price = self.price_unit * (1 - (self.discount or 0.0) / 100.0)
         taxes = (self.invoice_line_tax_ids - irpf_taxes).compute_all(
             price, currency, self.quantity, product=self.product_id,
             partner=self.invoice_id.partner_id)
         price_total = taxes['total_included'] if taxes else self.price_subtotal
+        if currency and self.company_id and currency != self.company_id.currency_id:
+            rate_date = self.invoice_id._get_currency_rate_date() or fields.Date.today()
+            price_total = currency._convert(
+                price_total, self.company_id.currency_id, self.company_id, rate_date)
         if RefundType.differences.value == self.invoice_id.tbai_refund_type:
             sign = -1
         else:
             sign = 1
         return "%.2f" % (sign * price_total)
```

## odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_invoice.py

```diff
@@ -140,14 +140,15 @@
         res = XMLSchema.xml_is_valid(self.test_xml_invoice_schema_doc, root)
         self.assertTrue(res)
 
     def test_invoice_foreign_customer_extracommunity(self):
         invoice = self.create_draft_invoice(
             self.account_billing.id, self.fiscal_position_e)
         invoice.partner_id = self.partner_extracommunity.id
+        invoice.currency_id = self.env.ref("base.USD").id
         invoice.onchange_fiscal_position_id_tbai_vat_regime_key()
         invoice.compute_taxes()
         # Artículo 21.- Exenciones en las exportaciones de bienes
         self.assertEqual(invoice.tax_line_ids.filtered(
             lambda tax: tax.tax_id.id == self.tax_iva0_e.id
         ).tbai_vat_exemption_key, self.vat_exemption_E2)
         # Otros
```

## Comparing `odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/METADATA` & `odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo12-addon-l10n-es-ticketbai
-Version: 12.0.2.7.7.99.dev1
+Version: 12.0.2.7.8
 Summary: TicketBAI - declaración de todas las operaciones de venta realizadas por las personas y entidades que desarrollan actividades económicas
 Home-page: https://github.com/OCA/l10n-spain
 Author: Binovo,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/RECORD` & `odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 odoo/addons/l10n_es_ticketbai/README.rst,sha256=VXCyeZz6WVSBnSWORygm0CR45XAgWbmEQdQYL-Uhku4,4642
 odoo/addons/l10n_es_ticketbai/__init__.py,sha256=T9WsCe2SjjgwNdkxdBuWvGTYJa4FZdmkDWyb-ODJcMc,76
-odoo/addons/l10n_es_ticketbai/__manifest__.py,sha256=kazxiw4Hxqpiyw6neUIAXXlZBx4GqJkMzSpvOvYS7Wg,1835
+odoo/addons/l10n_es_ticketbai/__manifest__.py,sha256=sn5-9M6HF1OrJpr0FnjqmTrETLs-fFelhZ4Qmv2r3DI,1835
 odoo/addons/l10n_es_ticketbai/hooks.py,sha256=JVX5ITFm0ijhibiWPpdNSWLdixh0szRh6J87EDVvibs,3565
 odoo/addons/l10n_es_ticketbai/data/account_fiscal_position_template.xml,sha256=w3bJJjtFMZdf4ww19tRHZG43z3ZqphHzxexbPPlAkYM,10137
 odoo/addons/l10n_es_ticketbai/data/tax_map_data.xml,sha256=iVTv-RycQLdDfPMGAuEct83qshs5-zi5UUxmt23d1cc,5049
 odoo/addons/l10n_es_ticketbai/data/vat_exemption_key_data.xml,sha256=OO3KXMwpmmQd-23FP4xPfF8r8_tg2rwBs4GPX4yugh0,1682
 odoo/addons/l10n_es_ticketbai/data/vat_regime_key_data.xml,sha256=NjsF0kD3gZsOHO_1hQXrZsLUhe5oMKWRT760zWpdn5o,4493
 odoo/addons/l10n_es_ticketbai/i18n/es.po,sha256=Lr2k4ql8qXKVfT3Il7ZEjYhSSsYSrBpil2QgehiiL6A,36255
 odoo/addons/l10n_es_ticketbai/i18n/eu.po,sha256=ShZvP5Q2yf5BIUDbbSm4GQIVYwGZnUXhEZjineCJeik,35843
-odoo/addons/l10n_es_ticketbai/i18n/l10n_es_ticketbai.pot,sha256=h_33PC2_7sJW9QIYPwr7AQFWvmFERy3RiFZvk461x8I,31271
+odoo/addons/l10n_es_ticketbai/i18n/l10n_es_ticketbai.pot,sha256=SRke6Pvie8BYNSJeSzMHcoif_V6fcgWQWua7H2P6_rc,31271
 odoo/addons/l10n_es_ticketbai/migrations/12.0.1.0.2/post-migration.py,sha256=dZoD59yBYm_MlPRUF7Ogl4dOXSzP1gT2Gdija1SkEEA,522
 odoo/addons/l10n_es_ticketbai/migrations/12.0.2.3.0/post-migrate.py,sha256=J6IseaAWBEkNLIfNPYlMCTD5sfvYEZ1ATDKRlhmZ9j4,1292
 odoo/addons/l10n_es_ticketbai/models/__init__.py,sha256=LbCbEiEPj38pFh1JVCZYR9FmdWuwvrLX9v6zCrAvzAk,415
 odoo/addons/l10n_es_ticketbai/models/account_fiscal_position.py,sha256=QMg9c-CdsCE981lJ2FxPiHftyUI-kgQ7hvqKW99xKTY,1507
-odoo/addons/l10n_es_ticketbai/models/account_invoice.py,sha256=7q8YeajX4s_mYkRTSRowHws4hhVwH-RrzICynq70L7U,26603
+odoo/addons/l10n_es_ticketbai/models/account_invoice.py,sha256=5FiPjTus9llFNbuDe3llHQ7Ir7Pr-kpGIOo_2IGfyf4,27339
 odoo/addons/l10n_es_ticketbai/models/account_invoice_tax.py,sha256=PdAs2-jURnBKBfF0cjost2ZKhsqAzvCYdRZc3qhvmUY,6896
 odoo/addons/l10n_es_ticketbai/models/account_journal.py,sha256=lP1W0xHHEYfCMwAPnV4VmbckX9fM8SPXEn_jEAkhJQw,1487
 odoo/addons/l10n_es_ticketbai/models/account_tax.py,sha256=FeuOd0NUkpTO3mPsSI18lxfGQL25uYRzMqQFOOTqvAY,803
 odoo/addons/l10n_es_ticketbai/models/aeat_certificate.py,sha256=_XbAOII6MFj_ep0UaekSw6G0vtWcapWcG-bx6IXkXDk,1645
 odoo/addons/l10n_es_ticketbai/models/chart_template.py,sha256=Y4I4jh5ccDQW0C0_iJRvwKhRWrV9wT74UeOKFRyF4fk,2920
 odoo/addons/l10n_es_ticketbai/models/ir_sequence.py,sha256=nVaZmv7dlYWhnyR4rwJPUyBbbxXhfaLGveTg5Vz6pa4,307
 odoo/addons/l10n_es_ticketbai/models/res_company.py,sha256=E6NpD9lKHAnqqy9wbbzbuJXOl2O_CGQDmWCdZRbjn2c,4360
@@ -26,15 +26,15 @@
 odoo/addons/l10n_es_ticketbai/models/ticketbai_vat_exemption_key.py,sha256=MpbU0g_UefwAL7Vd8KbJ0o1j8FL--MUN0fu45cuYf64,607
 odoo/addons/l10n_es_ticketbai/models/ticketbai_vat_regime_key.py,sha256=Pr4wmhoiSBgurtRG3jmqX-hgQpKsrHm4gX6nGkNiy7M,2457
 odoo/addons/l10n_es_ticketbai/security/ir.model.access.csv,sha256=fGHESQ_b6h1eB196di-y7J45qD0VXugnezIZYup35Pk,3058
 odoo/addons/l10n_es_ticketbai/static/description/icon.png,sha256=S4uJP20_QN9TNhnWgNh-9CPV2WGX-86uCn31lUwv1Pk,9485
 odoo/addons/l10n_es_ticketbai/tests/__init__.py,sha256=LDL9d6oEBtwtOn57c7rbnrVFlWbgF5UNPZjT4HDNqYs,134
 odoo/addons/l10n_es_ticketbai/tests/common.py,sha256=TojzKfsZNSDdJB4mZRDO32S9ozFHrfhSC_pI4o3mTxQ,12459
 odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_cancellation.py,sha256=FgvA1U1EYnI7esPgWdXHi01zYRi2g_yC3bJ6Xs0Shxk,2281
-odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_invoice.py,sha256=QePSJaDqbYDiA4X5HQ_2i2c6zdE38nTe2LV_UuWbmuU,25947
+odoo/addons/l10n_es_ticketbai/tests/test_l10n_es_ticketbai_customer_invoice.py,sha256=EZoR7S46Fj_lNYDOPyJGbNpHZAEFnz2oP6MpZnxBW4s,26005
 odoo/addons/l10n_es_ticketbai/tests/certs/ciudadano_act.p12,sha256=G2Ec3CPHo8MSQcx0dR-nO5gQ3NboTRc9RB6haTPS1Pc,4988
 odoo/addons/l10n_es_ticketbai/tests/certs/ciudadano_act_p12_password.txt,sha256=hIFda5diQsWIYhQ71eWskD7vd2zn4IO4Inw10sUf4kM,6
 odoo/addons/l10n_es_ticketbai/tests/certs/private_up_8mgwq.pem,sha256=FR-dg-MDHkirj4pJPiRoTCtgkMmFZ3oxES2Cdvn3LOc,1704
 odoo/addons/l10n_es_ticketbai/tests/certs/public_362gar7l.crt,sha256=Ab0_Fu-OR5xNPRACDIPm2Y9Kmk9bhF19q1F1cnBkpq4,3166
 odoo/addons/l10n_es_ticketbai/views/account_fiscal_position_template_views.xml,sha256=VWxDxQbzsSSHjGButCrefI6qGy-cq7pvMOu_buXI-Tk,4808
 odoo/addons/l10n_es_ticketbai/views/account_fiscal_position_views.xml,sha256=it6y9hiR-HQmzBrGiT9pnpXFpE1XrxwMUEDhjdyrOx8,3008
 odoo/addons/l10n_es_ticketbai/views/account_invoice_views.xml,sha256=luyx5_s1vhlkgWHysdGsYg1YzLvtRygWtOG11N4e82U,8767
@@ -49,11 +49,11 @@
 odoo/addons/l10n_es_ticketbai/views/vat_exemption_key_views.xml,sha256=ROX9nje7NdM_iz0uiIIEliU1IUJxIcUiUd6zMswQNHc,1709
 odoo/addons/l10n_es_ticketbai/views/vat_regime_key_views.xml,sha256=u0lTJK3CO68SG9OdkDUNGDaOd-xw7tbePDW8ykgAwAM,1685
 odoo/addons/l10n_es_ticketbai/wizard/__init__.py,sha256=klcNsZc-jJvSu1qOo3wIHh3X3t5B8vmHQGtb8hK4Ss8,106
 odoo/addons/l10n_es_ticketbai/wizard/account_invoice_refund.py,sha256=rsDqnNRLWaMZYaK_Dt3r8TITj3eDI-bKwbW3De8uBFo,797
 odoo/addons/l10n_es_ticketbai/wizard/aeat_certificate_password.py,sha256=9DC3oUam8cSqx0IUm2-x4BZrtU9cEDrR1mxrnYOyDGc,755
 odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info.py,sha256=Qg74_HSqOiZRBX1lJYtxyMfOy7kCZnjVjY2b4gS1UC4,2151
 odoo/addons/l10n_es_ticketbai/wizard/ticketbai_info_views.xml,sha256=jEjp4MTLaUh6f_9WnusCd2sxuFGgOHcQfZYWKjmcEhM,1916
-odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/METADATA,sha256=IQu0KRIGnA4zr8gOlRLNEaKj-guPc19VlT26THwqjvI,5456
-odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo12_addon_l10n_es_ticketbai-12.0.2.7.7.99.dev1.dist-info/RECORD,,
+odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/METADATA,sha256=0Pw93MYuxJld0UNW6K45-eDgaPNjbdVihL2QC637DTs,5448
+odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo12_addon_l10n_es_ticketbai-12.0.2.7.8.dist-info/RECORD,,
```

