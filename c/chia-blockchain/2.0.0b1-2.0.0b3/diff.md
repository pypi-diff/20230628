# Comparing `tmp/chia-blockchain-2.0.0b1.tar.gz` & `tmp/chia-blockchain-2.0.0b3.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "chia-blockchain-2.0.0b1.tar", last modified: Tue May  9 02:17:12 2023, max compression
+gzip compressed data, was "chia-blockchain-2.0.0b3.tar", last modified: Wed Jun 21 23:51:23 2023, max compression
```

## Comparing `chia-blockchain-2.0.0b1.tar` & `chia-blockchain-2.0.0b3.tar`

### file list

```diff
@@ -1,1070 +1,1129 @@
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.986339 chia-blockchain-2.0.0b1/
--rw-r--r--   0 runner    (1001) docker     (123)      252 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.coveragerc
--rw-r--r--   0 runner    (1001) docker     (123)      293 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.flake8
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.842338 chia-blockchain-2.0.0b1/.github/
--rw-r--r--   0 runner    (1001) docker     (123)      104 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/CODEOWNERS
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.842338 chia-blockchain-2.0.0b1/.github/ISSUE_TEMPLATE/
--rw-r--r--   0 runner    (1001) docker     (123)     1406 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/ISSUE_TEMPLATE/bug_report.yaml
--rw-r--r--   0 runner    (1001) docker     (123)      514 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/ISSUE_TEMPLATE/config.yml
--rw-r--r--   0 runner    (1001) docker     (123)      673 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/PULL_REQUEST_TEMPLATE.md
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.834338 chia-blockchain-2.0.0b1/.github/actions/
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.842338 chia-blockchain-2.0.0b1/.github/actions/install/
--rw-r--r--   0 runner    (1001) docker     (123)     1391 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/actions/install/action.yml
--rw-r--r--   0 runner    (1001) docker     (123)     1006 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/dependabot.yml
--rw-r--r--   0 runner    (1001) docker     (123)      435 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/release.yml
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.846338 chia-blockchain-2.0.0b1/.github/workflows/
--rw-r--r--   0 runner    (1001) docker     (123)     2213 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/benchmarks.yml
--rw-r--r--   0 runner    (1001) docker     (123)    12246 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/build-linux-arm64-installer.yml
--rw-r--r--   0 runner    (1001) docker     (123)    12139 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/build-linux-installer-deb.yml
--rw-r--r--   0 runner    (1001) docker     (123)    12226 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/build-linux-installer-rpm.yml
--rw-r--r--   0 runner    (1001) docker     (123)    13442 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/build-macos-installers.yml
--rw-r--r--   0 runner    (1001) docker     (123)    13299 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/build-windows-installer.yml
--rw-r--r--   0 runner    (1001) docker     (123)      776 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/check-commit-signing.yml
--rw-r--r--   0 runner    (1001) docker     (123)     2093 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/check_wheel_availability.yaml
--rw-r--r--   0 runner    (1001) docker     (123)     2758 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/codeql-analysis.yml
--rw-r--r--   0 runner    (1001) docker     (123)     1036 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/conflict-check.yml
--rw-r--r--   0 runner    (1001) docker     (123)      335 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/daily-matrix.yml
--rw-r--r--   0 runner    (1001) docker     (123)      890 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/dependency-review.yml
--rw-r--r--   0 runner    (1001) docker     (123)     1338 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/mozilla-ca-cert.yml
--rw-r--r--   0 runner    (1001) docker     (123)     2065 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/pre-commit.yml
--rw-r--r--   0 runner    (1001) docker     (123)      699 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/require-labels.yml
--rw-r--r--   0 runner    (1001) docker     (123)     2226 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/snyk-python-scan.yml
--rw-r--r--   0 runner    (1001) docker     (123)     1434 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/stale-issue.yml
--rw-r--r--   0 runner    (1001) docker     (123)      890 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/start-release.yml
--rw-r--r--   0 runner    (1001) docker     (123)      899 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/start-sync-test.yml
--rw-r--r--   0 runner    (1001) docker     (123)     2383 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/super-linter.yml
--rw-r--r--   0 runner    (1001) docker     (123)     6612 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/test-install-scripts.yml
--rw-r--r--   0 runner    (1001) docker     (123)     8783 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/test-single.yml
--rw-r--r--   0 runner    (1001) docker     (123)     5757 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/test.yml
--rw-r--r--   0 runner    (1001) docker     (123)     1529 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/trigger-docker-dev.yml
--rw-r--r--   0 runner    (1001) docker     (123)     1023 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/trigger-docker-main.yml
--rw-r--r--   0 runner    (1001) docker     (123)     5659 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.github/workflows/upload-pypi-source.yml
--rw-r--r--   0 runner    (1001) docker     (123)     5420 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.gitignore
--rw-r--r--   0 runner    (1001) docker     (123)      260 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.gitmodules
--rw-r--r--   0 runner    (1001) docker     (123)      110 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.isort.cfg
--rw-r--r--   0 runner    (1001) docker     (123)     1009 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.markdown-lint.yml
--rw-r--r--   0 runner    (1001) docker     (123)     2100 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/.pre-commit-config.yaml
--rw-r--r--   0 runner    (1001) docker     (123)     1377 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/BUILD_TIMELORD.md
--rw-r--r--   0 runner    (1001) docker     (123)   209772 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/CHANGELOG.md
--rw-r--r--   0 runner    (1001) docker     (123)     3477 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/CODE_OF_CONDUCT.md
--rw-r--r--   0 runner    (1001) docker     (123)     8356 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/CONTRIBUTING.md
--rw-r--r--   0 runner    (1001) docker     (123)      393 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/INSTALL.md
--rw-r--r--   0 runner    (1001) docker     (123)     1179 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/Install-gui.ps1
--rw-r--r--   0 runner    (1001) docker     (123)     5155 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/Install-plotter.ps1
--rw-r--r--   0 runner    (1001) docker     (123)     3770 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/Install.ps1
--rw-r--r--   0 runner    (1001) docker     (123)    11342 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/LICENSE
--rw-r--r--   0 runner    (1001) docker     (123)     4952 2023-05-09 02:17:12.982339 chia-blockchain-2.0.0b1/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (123)    33099 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/PRETTY_GOOD_PRACTICES.md
--rw-r--r--   0 runner    (1001) docker     (123)     4358 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/README.md
--rw-r--r--   0 runner    (1001) docker     (123)      701 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/SECURITY.md
--rw-r--r--   0 runner    (1001) docker     (123)      286 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/activated.ps1
--rwxr-xr-x   0 runner    (1001) docker     (123)      630 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/activated.py
--rwxr-xr-x   0 runner    (1001) docker     (123)      155 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/activated.sh
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.846338 chia-blockchain-2.0.0b1/benchmarks/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     3186 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/block_ref.py
--rw-r--r--   0 runner    (1001) docker     (123)    14354 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/block_store.py
--rw-r--r--   0 runner    (1001) docker     (123)   121543 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/clvm_generator.bin
--rw-r--r--   0 runner    (1001) docker     (123)     9537 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/coin_store.py
--rw-r--r--   0 runner    (1001) docker     (123)      514 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/jsonify.py
--rw-r--r--   0 runner    (1001) docker     (123)     5062 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/mempool-long-lived.py
--rw-r--r--   0 runner    (1001) docker     (123)    11229 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/mempool.py
--rw-r--r--   0 runner    (1001) docker     (123)    11782 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/streamable.py
--rw-r--r--   0 runner    (1001) docker     (123)   439288 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/transaction_height_delta
--rw-r--r--   0 runner    (1001) docker     (123)     6327 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/benchmarks/utils.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.846338 chia-blockchain-2.0.0b1/build_scripts/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/assets/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/assets/deb/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/deb/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      277 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/deb/control.j2
--rw-r--r--   0 runner    (1001) docker     (123)      290 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/deb/postinst.sh
--rw-r--r--   0 runner    (1001) docker     (123)      178 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/deb/prerm.sh
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/assets/dmg/
--rw-r--r--   0 runner    (1001) docker     (123)      315 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/dmg/README
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/dmg/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)   507222 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/dmg/background.tiff
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/assets/rpm/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/rpm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      290 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/rpm/postinst.sh
--rw-r--r--   0 runner    (1001) docker     (123)      178 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/assets/rpm/prerm.sh
--rw-r--r--   0 runner    (1001) docker     (123)     1328 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_linux_deb-1-gui.sh
--rw-r--r--   0 runner    (1001) docker     (123)     4684 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_linux_deb-2-installer.sh
--rw-r--r--   0 runner    (1001) docker     (123)     1327 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_linux_rpm-1-gui.sh
--rw-r--r--   0 runner    (1001) docker     (123)     3818 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_linux_rpm-2-installer.sh
--rw-r--r--   0 runner    (1001) docker     (123)     1350 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_macos-1-gui.sh
--rw-r--r--   0 runner    (1001) docker     (123)     3416 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_macos-2-installer.sh
--rw-r--r--   0 runner    (1001) docker     (123)     1913 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_windows-1-gui.ps1
--rw-r--r--   0 runner    (1001) docker     (123)     2984 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/build_windows-2-installer.ps1
--rw-r--r--   0 runner    (1001) docker     (123)     2218 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/check_dependency_artifacts.py
--rw-r--r--   0 runner    (1001) docker     (123)      907 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/clean-runner.sh
--rw-r--r--   0 runner    (1001) docker     (123)     2531 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/installer-version.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/npm_global/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_global/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      342 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_global/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (123)      267 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_global/package.json
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/npm_linux/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_linux/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)   539731 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_linux/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (123)      305 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_linux/package.json
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.850338 chia-blockchain-2.0.0b1/build_scripts/npm_macos/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_macos/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)   572329 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_macos/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (123)      379 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_macos/package.json
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.854338 chia-blockchain-2.0.0b1/build_scripts/npm_windows/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_windows/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)   553007 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_windows/package-lock.json
--rw-r--r--   0 runner    (1001) docker     (123)      307 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/build_scripts/npm_windows/package.json
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.854338 chia-blockchain-2.0.0b1/chia/
--rw-r--r--   0 runner    (1001) docker     (123)      347 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       76 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/__main__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.854338 chia-blockchain-2.0.0b1/chia/clvm/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/clvm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      325 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/clvm/singleton.py
--rw-r--r--   0 runner    (1001) docker     (123)    18471 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/clvm/spend_sim.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.858338 chia-blockchain-2.0.0b1/chia/cmds/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     7240 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/beta.py
--rw-r--r--   0 runner    (1001) docker     (123)     4705 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/beta_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)    16346 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/check_wallet_db.py
--rw-r--r--   0 runner    (1001) docker     (123)     4564 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/chia.py
--rw-r--r--   0 runner    (1001) docker     (123)     9461 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/cmds_util.py
--rw-r--r--   0 runner    (1001) docker     (123)    10675 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/coin_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     6716 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/coins.py
--rw-r--r--   0 runner    (1001) docker     (123)     1387 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/completion.py
--rw-r--r--   0 runner    (1001) docker     (123)    13235 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/configure.py
--rw-r--r--   0 runner    (1001) docker     (123)    11323 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/data.py
--rw-r--r--   0 runner    (1001) docker     (123)     8267 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/data_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     2937 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/db.py
--rw-r--r--   0 runner    (1001) docker     (123)     3341 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/db_backup_func.py
--rw-r--r--   0 runner    (1001) docker     (123)    17725 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/db_upgrade_func.py
--rw-r--r--   0 runner    (1001) docker     (123)     7802 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/db_validate_func.py
--rw-r--r--   0 runner    (1001) docker     (123)      244 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/dev.py
--rw-r--r--   0 runner    (1001) docker     (123)     2168 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/farm.py
--rw-r--r--   0 runner    (1001) docker     (123)     8240 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/farm_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     2079 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/init.py
--rw-r--r--   0 runner    (1001) docker     (123)    16283 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/init_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)    14964 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/keys.py
--rw-r--r--   0 runner    (1001) docker     (123)    26855 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/keys_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     1291 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/netspace.py
--rw-r--r--   0 runner    (1001) docker     (123)     2737 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/netspace_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     4784 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/passphrase.py
--rw-r--r--   0 runner    (1001) docker     (123)    12569 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/passphrase_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     1398 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/peer.py
--rw-r--r--   0 runner    (1001) docker     (123)     5306 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/peer_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     8138 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/plotnft.py
--rw-r--r--   0 runner    (1001) docker     (123)    17241 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/plotnft_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     7200 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/plots.py
--rw-r--r--   0 runner    (1001) docker     (123)      399 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/plotters.py
--rw-r--r--   0 runner    (1001) docker     (123)     4730 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)     2413 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/show.py
--rw-r--r--   0 runner    (1001) docker     (123)     9793 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/show_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     7797 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/sim.py
--rw-r--r--   0 runner    (1001) docker     (123)    22264 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/sim_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)      782 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/start.py
--rw-r--r--   0 runner    (1001) docker     (123)     3452 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/start_funcs.py
--rw-r--r--   0 runner    (1001) docker     (123)     2025 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/stop.py
--rw-r--r--   0 runner    (1001) docker     (123)      325 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/units.py
--rw-r--r--   0 runner    (1001) docker     (123)    45984 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)    53117 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/cmds/wallet_funcs.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.862338 chia-blockchain-2.0.0b1/chia/consensus/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    22930 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/block_body_validation.py
--rw-r--r--   0 runner    (1001) docker     (123)    21437 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/block_creation.py
--rw-r--r--   0 runner    (1001) docker     (123)    51189 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/block_header_validation.py
--rw-r--r--   0 runner    (1001) docker     (123)     4805 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/block_record.py
--rw-r--r--   0 runner    (1001) docker     (123)     2246 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/block_rewards.py
--rw-r--r--   0 runner    (1001) docker     (123)     1602 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/block_root_validation.py
--rw-r--r--   0 runner    (1001) docker     (123)    42752 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/blockchain.py
--rw-r--r--   0 runner    (1001) docker     (123)     3725 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/blockchain_interface.py
--rw-r--r--   0 runner    (1001) docker     (123)     1201 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/coinbase.py
--rw-r--r--   0 runner    (1001) docker     (123)      228 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/condition_costs.py
--rw-r--r--   0 runner    (1001) docker     (123)     4446 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/constants.py
--rw-r--r--   0 runner    (1001) docker     (123)      517 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/cost_calculator.py
--rw-r--r--   0 runner    (1001) docker     (123)     3699 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/default_constants.py
--rw-r--r--   0 runner    (1001) docker     (123)     2183 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/deficit.py
--rw-r--r--   0 runner    (1001) docker     (123)    18266 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/difficulty_adjustment.py
--rw-r--r--   0 runner    (1001) docker     (123)     1253 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/find_fork_point.py
--rw-r--r--   0 runner    (1001) docker     (123)     6609 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/full_block_to_block_record.py
--rw-r--r--   0 runner    (1001) docker     (123)     4823 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/get_block_challenge.py
--rw-r--r--   0 runner    (1001) docker     (123)     7852 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/make_sub_epoch_summary.py
--rw-r--r--   0 runner    (1001) docker     (123)    18835 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/multiprocess_validation.py
--rw-r--r--   0 runner    (1001) docker     (123)      788 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/pos_quality.py
--rw-r--r--   0 runner    (1001) docker     (123)     2829 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/pot_iterations.py
--rw-r--r--   0 runner    (1001) docker     (123)     6971 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/consensus/vdf_info_computation.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.862338 chia-blockchain-2.0.0b1/chia/daemon/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/daemon/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     7977 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/daemon/client.py
--rw-r--r--   0 runner    (1001) docker     (123)    18190 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/daemon/keychain_proxy.py
--rw-r--r--   0 runner    (1001) docker     (123)    11125 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/daemon/keychain_server.py
--rw-r--r--   0 runner    (1001) docker     (123)    55454 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/daemon/server.py
--rw-r--r--   0 runner    (1001) docker     (123)     2069 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/daemon/windows_signal.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.862338 chia-blockchain-2.0.0b1/chia/data_layer/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    40675 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_layer.py
--rw-r--r--   0 runner    (1001) docker     (123)      696 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_layer_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     1143 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_layer_errors.py
--rw-r--r--   0 runner    (1001) docker     (123)     4996 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_layer_server.py
--rw-r--r--   0 runner    (1001) docker     (123)    18391 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_layer_util.py
--rw-r--r--   0 runner    (1001) docker     (123)    61922 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_layer_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)    62999 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/data_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    13650 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/dl_wallet_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     8556 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/download_data.py
--rw-r--r--   0 runner    (1001) docker     (123)     1136 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/s3_plugin_config.yml
--rw-r--r--   0 runner    (1001) docker     (123)    16377 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/s3_plugin_service.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.862338 chia-blockchain-2.0.0b1/chia/data_layer/util/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     4716 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/data_layer/util/benchmark.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.862338 chia-blockchain-2.0.0b1/chia/farmer/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/farmer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    36468 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/farmer/farmer.py
--rw-r--r--   0 runner    (1001) docker     (123)    28233 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/farmer/farmer_api.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.866338 chia-blockchain-2.0.0b1/chia/full_node/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     3595 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/bitcoin_fee_estimator.py
--rw-r--r--   0 runner    (1001) docker     (123)     9689 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/block_height_map.py
--rw-r--r--   0 runner    (1001) docker     (123)    32512 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/block_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     6305 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/bundle_tools.py
--rw-r--r--   0 runner    (1001) docker     (123)    24796 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/coin_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     1796 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimate.py
--rw-r--r--   0 runner    (1001) docker     (123)      526 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimate_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2922 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimation.py
--rw-r--r--   0 runner    (1001) docker     (123)     3958 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimator.py
--rw-r--r--   0 runner    (1001) docker     (123)     1235 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimator_constants.py
--rw-r--r--   0 runner    (1001) docker     (123)     1955 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimator_example.py
--rw-r--r--   0 runner    (1001) docker     (123)     1606 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_estimator_interface.py
--rw-r--r--   0 runner    (1001) docker     (123)      610 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_history.py
--rw-r--r--   0 runner    (1001) docker     (123)    22559 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/fee_tracker.py
--rw-r--r--   0 runner    (1001) docker     (123)   130083 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/full_node.py
--rw-r--r--   0 runner    (1001) docker     (123)    79298 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/full_node_api.py
--rw-r--r--   0 runner    (1001) docker     (123)    36689 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/full_node_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2446 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/generator.py
--rw-r--r--   0 runner    (1001) docker     (123)     2731 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/hint_management.py
--rw-r--r--   0 runner    (1001) docker     (123)     2524 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/hint_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2854 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/lock_queue.py
--rw-r--r--   0 runner    (1001) docker     (123)    18041 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/mempool.py
--rw-r--r--   0 runner    (1001) docker     (123)     6167 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/mempool_check_conditions.py
--rw-r--r--   0 runner    (1001) docker     (123)    33511 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/mempool_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     3670 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/pending_tx_cache.py
--rw-r--r--   0 runner    (1001) docker     (123)      414 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/signage_point.py
--rw-r--r--   0 runner    (1001) docker     (123)     5619 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/subscriptions.py
--rw-r--r--   0 runner    (1001) docker     (123)     4803 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/sync_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     3335 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/tx_processing_queue.py
--rw-r--r--   0 runner    (1001) docker     (123)    72530 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/full_node/weight_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.866338 chia-blockchain-2.0.0b1/chia/harvester/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/harvester/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     7862 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/harvester/harvester.py
--rw-r--r--   0 runner    (1001) docker     (123)    15433 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/harvester/harvester_api.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.866338 chia-blockchain-2.0.0b1/chia/introducer/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/introducer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     4173 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/introducer/introducer.py
--rw-r--r--   0 runner    (1001) docker     (123)     2009 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/introducer/introducer_api.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.866338 chia-blockchain-2.0.0b1/chia/plot_sync/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plot_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1848 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plot_sync/delta.py
--rw-r--r--   0 runner    (1001) docker     (123)     2306 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plot_sync/exceptions.py
--rw-r--r--   0 runner    (1001) docker     (123)    14237 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plot_sync/receiver.py
--rw-r--r--   0 runner    (1001) docker     (123)    13867 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plot_sync/sender.py
--rw-r--r--   0 runner    (1001) docker     (123)      825 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plot_sync/util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.870338 chia-blockchain-2.0.0b1/chia/plotters/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotters/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    11146 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotters/bladebit.py
--rw-r--r--   0 runner    (1001) docker     (123)     1893 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotters/chiapos.py
--rw-r--r--   0 runner    (1001) docker     (123)     7591 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotters/madmax.py
--rw-r--r--   0 runner    (1001) docker     (123)    16640 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotters/plotters.py
--rw-r--r--   0 runner    (1001) docker     (123)     4050 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotters/plotters_util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.870338 chia-blockchain-2.0.0b1/chia/plotting/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotting/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     7803 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotting/cache.py
--rw-r--r--   0 runner    (1001) docker     (123)     9712 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotting/check_plots.py
--rw-r--r--   0 runner    (1001) docker     (123)    10542 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotting/create_plots.py
--rw-r--r--   0 runner    (1001) docker     (123)    16154 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotting/manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     9139 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/plotting/util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.870338 chia-blockchain-2.0.0b1/chia/pools/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/pools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     3893 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/pools/pool_config.py
--rw-r--r--   0 runner    (1001) docker     (123)    17113 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/pools/pool_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)    44558 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/pools/pool_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     4535 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/pools/pool_wallet_info.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.870338 chia-blockchain-2.0.0b1/chia/protocols/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1841 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/farmer_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     4276 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/full_node_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     4283 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/harvester_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)      600 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/introducer_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     4059 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/pool_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     3186 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/protocol_message_types.py
--rw-r--r--   0 runner    (1001) docker     (123)     3594 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/protocol_state_machine.py
--rw-r--r--   0 runner    (1001) docker     (123)      235 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/protocol_timing.py
--rw-r--r--   0 runner    (1001) docker     (123)     1738 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/shared_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     3111 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/timelord_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     5768 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/protocols/wallet_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/py.typed
--rw-r--r--   0 runner    (1001) docker     (123)     5617 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/pyinstaller.spec
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.874338 chia-blockchain-2.0.0b1/chia/rpc/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     2640 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/crawler_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)    18476 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/data_layer_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     5321 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/data_layer_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (123)     2003 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/data_layer_rpc_util.py
--rw-r--r--   0 runner    (1001) docker     (123)    13582 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/farmer_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     3989 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/farmer_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (123)    41325 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/full_node_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)    12300 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/full_node_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (123)     3084 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/harvester_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     1334 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/harvester_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (123)     3396 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (123)    17016 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/rpc_server.py
--rw-r--r--   0 runner    (1001) docker     (123)      863 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/timelord_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)      934 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/util.py
--rw-r--r--   0 runner    (1001) docker     (123)   161377 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/wallet_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)    46122 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/rpc/wallet_rpc_client.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.874338 chia-blockchain-2.0.0b1/chia/seeder/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    14746 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/crawl_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    17272 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/crawler.py
--rw-r--r--   0 runner    (1001) docker     (123)     3913 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/crawler_api.py
--rw-r--r--   0 runner    (1001) docker     (123)    10354 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/dns_server.py
--rw-r--r--   0 runner    (1001) docker     (123)     5420 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/peer_record.py
--rw-r--r--   0 runner    (1001) docker     (123)     2676 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/seeder/start_crawler.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.878338 chia-blockchain-2.0.0b1/chia/server/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    27079 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/address_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     4943 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/address_manager_sqlite_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     9764 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/address_manager_store.py
--rw-r--r--   0 runner    (1001) docker     (123)      720 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/capabilities.py
--rw-r--r--   0 runner    (1001) docker     (123)    14558 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/chia_policy.py
--rw-r--r--   0 runner    (1001) docker     (123)     2430 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/introducer_peers.py
--rw-r--r--   0 runner    (1001) docker     (123)    33078 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/node_discovery.py
--rw-r--r--   0 runner    (1001) docker     (123)      820 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/outbound_message.py
--rw-r--r--   0 runner    (1001) docker     (123)     3471 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/peer_store_resolver.py
--rw-r--r--   0 runner    (1001) docker     (123)    12583 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/rate_limit_numbers.py
--rw-r--r--   0 runner    (1001) docker     (123)     5013 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/rate_limits.py
--rw-r--r--   0 runner    (1001) docker     (123)    30966 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/server.py
--rw-r--r--   0 runner    (1001) docker     (123)      867 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/ssl_context.py
--rw-r--r--   0 runner    (1001) docker     (123)     3979 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_data_layer.py
--rw-r--r--   0 runner    (1001) docker     (123)     2978 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_farmer.py
--rw-r--r--   0 runner    (1001) docker     (123)     3949 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_full_node.py
--rw-r--r--   0 runner    (1001) docker     (123)     2770 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_harvester.py
--rw-r--r--   0 runner    (1001) docker     (123)     2017 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_introducer.py
--rw-r--r--   0 runner    (1001) docker     (123)    12376 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_service.py
--rw-r--r--   0 runner    (1001) docker     (123)     2722 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_timelord.py
--rw-r--r--   0 runner    (1001) docker     (123)     3704 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/start_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     3392 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/upnp.py
--rw-r--r--   0 runner    (1001) docker     (123)    30397 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/server/ws_connection.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.878338 chia-blockchain-2.0.0b1/chia/simulator/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    96083 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/block_tools.py
--rw-r--r--   0 runner    (1001) docker     (123)    28763 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/full_node_simulator.py
--rw-r--r--   0 runner    (1001) docker     (123)     5689 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/keyring.py
--rw-r--r--   0 runner    (1001) docker     (123)    17193 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/setup_nodes.py
--rw-r--r--   0 runner    (1001) docker     (123)    15080 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/setup_services.py
--rw-r--r--   0 runner    (1001) docker     (123)      534 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/simulator_constants.py
--rw-r--r--   0 runner    (1001) docker     (123)     5390 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/simulator_full_node_rpc_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     3062 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/simulator_full_node_rpc_client.py
--rw-r--r--   0 runner    (1001) docker     (123)      628 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/simulator_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     6462 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/simulator_test_tools.py
--rw-r--r--   0 runner    (1001) docker     (123)      610 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/socket.py
--rw-r--r--   0 runner    (1001) docker     (123)     4904 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs.py
--rw-r--r--   0 runner    (1001) docker     (123)    39483 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_1.py
--rw-r--r--   0 runner    (1001) docker     (123)    39473 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_10.py
--rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_2.py
--rw-r--r--   0 runner    (1001) docker     (123)    39471 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_3.py
--rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_4.py
--rw-r--r--   0 runner    (1001) docker     (123)    39483 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_5.py
--rw-r--r--   0 runner    (1001) docker     (123)    39483 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_6.py
--rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_7.py
--rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_8.py
--rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_9.py
--rw-r--r--   0 runner    (1001) docker     (123)     4413 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/start_simulator.py
--rw-r--r--   0 runner    (1001) docker     (123)     2956 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/time_out_assert.py
--rw-r--r--   0 runner    (1001) docker     (123)    10290 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/simulator/wallet_tools.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.878338 chia-blockchain-2.0.0b1/chia/ssl/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/ssl/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1155 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/ssl/chia_ca.crt
--rw-r--r--   0 runner    (1001) docker     (123)     1675 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/ssl/chia_ca.key
--rw-r--r--   0 runner    (1001) docker     (123)     8874 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/ssl/create_ssl.py
--rw-r--r--   0 runner    (1001) docker     (123)     1200 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/ssl/dst_root_ca.pem
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.882338 chia-blockchain-2.0.0b1/chia/timelord/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1693 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/iters_from_block.py
--rw-r--r--   0 runner    (1001) docker     (123)    58402 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/timelord.py
--rw-r--r--   0 runner    (1001) docker     (123)     4611 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/timelord_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     4102 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/timelord_launcher.py
--rw-r--r--   0 runner    (1001) docker     (123)    12052 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/timelord_state.py
--rw-r--r--   0 runner    (1001) docker     (123)      354 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/timelord/types.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.882338 chia-blockchain-2.0.0b1/chia/types/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      718 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/announcement.py
--rw-r--r--   0 runner    (1001) docker     (123)      571 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/block_protocol.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.886338 chia-blockchain-2.0.0b1/chia/types/blockchain_format/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1153 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/classgroup.py
--rw-r--r--   0 runner    (1001) docker     (123)      695 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/coin.py
--rw-r--r--   0 runner    (1001) docker     (123)     2353 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/foliage.py
--rw-r--r--   0 runner    (1001) docker     (123)      385 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/pool_target.py
--rw-r--r--   0 runner    (1001) docker     (123)     7612 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/program.py
--rw-r--r--   0 runner    (1001) docker     (123)     4358 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/proof_of_space.py
--rw-r--r--   0 runner    (1001) docker     (123)     1962 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/reward_chain_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     4646 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/serialized_program.py
--rw-r--r--   0 runner    (1001) docker     (123)      388 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/sized_bytes.py
--rw-r--r--   0 runner    (1001) docker     (123)     1848 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/slots.py
--rw-r--r--   0 runner    (1001) docker     (123)      678 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/sub_epoch_summary.py
--rw-r--r--   0 runner    (1001) docker     (123)     2006 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/tree_hash.py
--rw-r--r--   0 runner    (1001) docker     (123)     2830 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/blockchain_format/vdf.py
--rw-r--r--   0 runner    (1001) docker     (123)      332 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/clvm_cost.py
--rw-r--r--   0 runner    (1001) docker     (123)     1284 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/coin_record.py
--rw-r--r--   0 runner    (1001) docker     (123)      186 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/coin_solution.py
--rw-r--r--   0 runner    (1001) docker     (123)     2582 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/coin_spend.py
--rw-r--r--   0 runner    (1001) docker     (123)     1941 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/condition_opcodes.py
--rw-r--r--   0 runner    (1001) docker     (123)      493 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/condition_with_args.py
--rw-r--r--   0 runner    (1001) docker     (123)      560 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/end_of_slot_bundle.py
--rw-r--r--   0 runner    (1001) docker     (123)      854 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/fee_rate.py
--rw-r--r--   0 runner    (1001) docker     (123)     3585 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/full_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     1053 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/generator_types.py
--rw-r--r--   0 runner    (1001) docker     (123)     2475 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/header_block.py
--rw-r--r--   0 runner    (1001) docker     (123)      260 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/mempool_inclusion_status.py
--rw-r--r--   0 runner    (1001) docker     (123)     2109 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/mempool_item.py
--rw-r--r--   0 runner    (1001) docker     (123)     1055 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/mempool_submission_status.py
--rw-r--r--   0 runner    (1001) docker     (123)      132 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/mojos.py
--rw-r--r--   0 runner    (1001) docker     (123)     1828 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/peer_info.py
--rw-r--r--   0 runner    (1001) docker     (123)      889 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/signing_mode.py
--rw-r--r--   0 runner    (1001) docker     (123)     4738 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/spend_bundle.py
--rw-r--r--   0 runner    (1001) docker     (123)      173 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/spend_bundle_conditions.py
--rw-r--r--   0 runner    (1001) docker     (123)     1017 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/transaction_queue_entry.py
--rw-r--r--   0 runner    (1001) docker     (123)     1972 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/unfinished_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     1527 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/unfinished_header_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     3217 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/types/weight_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.890338 chia-blockchain-2.0.0b1/chia/util/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     3046 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/api_decorators.py
--rw-r--r--   0 runner    (1001) docker     (123)     4572 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/bech32m.py
--rw-r--r--   0 runner    (1001) docker     (123)     4249 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/beta_metrics.py
--rw-r--r--   0 runner    (1001) docker     (123)     3864 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/block_cache.py
--rw-r--r--   0 runner    (1001) docker     (123)     2190 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/byte_types.py
--rw-r--r--   0 runner    (1001) docker     (123)     2899 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/cached_bls.py
--rw-r--r--   0 runner    (1001) docker     (123)     1408 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/check_fork_next_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     4862 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/chia_logging.py
--rw-r--r--   0 runner    (1001) docker     (123)      264 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/chunks.py
--rw-r--r--   0 runner    (1001) docker     (123)      323 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/collection.py
--rw-r--r--   0 runner    (1001) docker     (123)     4990 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/condition_tools.py
--rw-r--r--   0 runner    (1001) docker     (123)    11508 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     3642 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/create_alert_file.py
--rw-r--r--   0 runner    (1001) docker     (123)      575 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/db_synchronous.py
--rw-r--r--   0 runner    (1001) docker     (123)      936 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/db_version.py
--rw-r--r--   0 runner    (1001) docker     (123)    10201 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/db_wrapper.py
--rw-r--r--   0 runner    (1001) docker     (123)      415 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/default_root.py
--rwxr-xr-x   0 runner    (1001) docker     (123)     2866 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/dump_keyring.py
--rw-r--r--   0 runner    (1001) docker     (123)    13116 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/english.txt
--rw-r--r--   0 runner    (1001) docker     (123)     8871 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/errors.py
--rw-r--r--   0 runner    (1001) docker     (123)    17393 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/file_keyring.py
--rw-r--r--   0 runner    (1001) docker     (123)     3251 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/files.py
--rw-r--r--   0 runner    (1001) docker     (123)    12119 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/full_block_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)     2911 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/generator_tools.py
--rw-r--r--   0 runner    (1001) docker     (123)      384 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/hash.py
--rw-r--r--   0 runner    (1001) docker     (123)    24263 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/initial-config.yaml
--rw-r--r--   0 runner    (1001) docker     (123)      646 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/inline_executor.py
--rw-r--r--   0 runner    (1001) docker     (123)     1063 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/ints.py
--rw-r--r--   0 runner    (1001) docker     (123)     1109 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/json_util.py
--rw-r--r--   0 runner    (1001) docker     (123)    22225 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/keychain.py
--rw-r--r--   0 runner    (1001) docker     (123)    10459 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/keyring_wrapper.py
--rw-r--r--   0 runner    (1001) docker     (123)     1013 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/limited_semaphore.py
--rw-r--r--   0 runner    (1001) docker     (123)     1326 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/lock.py
--rw-r--r--   0 runner    (1001) docker     (123)      722 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/log_exceptions.py
--rw-r--r--   0 runner    (1001) docker     (123)      918 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/logging.py
--rw-r--r--   0 runner    (1001) docker     (123)      770 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/lru_cache.py
--rw-r--r--   0 runner    (1001) docker     (123)      326 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/make_test_constants.py
--rw-r--r--   0 runner    (1001) docker     (123)      463 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/math.py
--rw-r--r--   0 runner    (1001) docker     (123)    10292 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/merkle_set.py
--rw-r--r--   0 runner    (1001) docker     (123)     3933 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/misc.py
--rw-r--r--   0 runner    (1001) docker     (123)     5899 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/network.py
--rw-r--r--   0 runner    (1001) docker     (123)     1593 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/paginator.py
--rw-r--r--   0 runner    (1001) docker     (123)      622 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/partial_func.py
--rw-r--r--   0 runner    (1001) docker     (123)      702 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/path.py
--rw-r--r--   0 runner    (1001) docker     (123)      493 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/permissions.py
--rw-r--r--   0 runner    (1001) docker     (123)      884 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/pprint.py
--rw-r--r--   0 runner    (1001) docker     (123)      712 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/prev_transaction_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     6713 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/profiler.py
--rw-r--r--   0 runner    (1001) docker     (123)      467 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/recursive_replace.py
--rw-r--r--   0 runner    (1001) docker     (123)      381 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/safe_cancel_task.py
--rw-r--r--   0 runner    (1001) docker     (123)     1501 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/service_groups.py
--rw-r--r--   0 runner    (1001) docker     (123)      399 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/setproctitle.py
--rw-r--r--   0 runner    (1001) docker     (123)      991 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/significant_bits.py
--rw-r--r--   0 runner    (1001) docker     (123)     8071 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/ssl_check.py
--rw-r--r--   0 runner    (1001) docker     (123)    23962 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/streamable.py
--rw-r--r--   0 runner    (1001) docker     (123)     3409 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/struct_stream.py
--rw-r--r--   0 runner    (1001) docker     (123)    10459 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/task_timing.py
--rw-r--r--   0 runner    (1001) docker     (123)     1775 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/validate_alert.py
--rw-r--r--   0 runner    (1001) docker     (123)     1042 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/vdf_prover.py
--rw-r--r--   0 runner    (1001) docker     (123)     1739 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/util/ws_message.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.894338 chia-blockchain-2.0.0b1/chia/wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      996 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/block_record.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.894338 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      838 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_constants.py
--rw-r--r--   0 runner    (1001) docker     (123)      946 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_info.py
--rw-r--r--   0 runner    (1001) docker     (123)     5270 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     5496 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)    42795 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     2829 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/lineage_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2038 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/chialisp.py
--rw-r--r--   0 runner    (1001) docker     (123)     8624 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/coin_selection.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.898338 chia-blockchain-2.0.0b1/chia/wallet/dao_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/dao_wallet/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.898338 chia-blockchain-2.0.0b1/chia/wallet/db_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/db_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     4398 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/db_wallet/db_wallet_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)      604 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/derivation_record.py
--rw-r--r--   0 runner    (1001) docker     (123)     4834 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/derive_keys.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.898338 chia-blockchain-2.0.0b1/chia/wallet/did_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/did_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1028 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/did_wallet/did_info.py
--rw-r--r--   0 runner    (1001) docker     (123)    61765 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/did_wallet/did_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     6587 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/did_wallet/did_wallet_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)     1003 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/driver_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)     1779 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/key_val_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     1026 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/lineage_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.898338 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     4406 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/metadata_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     3190 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/nft_info.py
--rw-r--r--   0 runner    (1001) docker     (123)    12066 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/nft_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)    82710 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/nft_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     4556 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/ownership_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     4478 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/singleton_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     3349 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/transfer_program_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     7681 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/uncurry_nft.py
--rw-r--r--   0 runner    (1001) docker     (123)     4720 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/notification_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     6194 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/notification_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     4012 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/outer_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)     1125 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/payment.py
--rw-r--r--   0 runner    (1001) docker     (123)     3646 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzle_drivers.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.910338 chia-blockchain-2.0.0b1/chia/wallet/puzzles/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      649 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/block_program_zero.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      340 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/block_program_zero.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      123 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/calculate_synthetic_public_key.clsp
--rw-r--r--   0 runner    (1001) docker     (123)       34 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/calculate_synthetic_public_key.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      229 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_loader.py
--rw-r--r--   0 runner    (1001) docker     (123)     1198 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_truths.clib
--rw-r--r--   0 runner    (1001) docker     (123)    16823 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_v2.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     3344 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_v2.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     2425 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/chialisp_deserialisation.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      942 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/chialisp_deserialisation.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     1785 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/condition_codes.clib
--rw-r--r--   0 runner    (1001) docker     (123)      553 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/create-lock-puzzlehash.clib
--rw-r--r--   0 runner    (1001) docker     (123)      190 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/create_nft_launcher_from_did.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      130 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/create_nft_launcher_from_did.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     4002 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/curry-and-treehash.clib
--rw-r--r--   0 runner    (1001) docker     (123)     5264 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/curry.clib
--rw-r--r--   0 runner    (1001) docker     (123)      253 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/decompress_coin_spend_entry.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      110 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/decompress_coin_spend_entry.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      262 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/decompress_coin_spend_entry_with_prefix.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      108 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/decompress_coin_spend_entry_with_prefix.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      114 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/decompress_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (123)       42 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/decompress_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      632 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/delegated_tail.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      360 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/delegated_tail.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     4142 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/deployed_puzzle_hashes.json
--rw-r--r--   0 runner    (1001) docker     (123)     6442 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/did_innerpuz.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     2024 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/did_innerpuz.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      318 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/everything_with_signature.clsp
--rw-r--r--   0 runner    (1001) docker     (123)       82 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/everything_with_signature.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      527 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/genesis_by_coin_id.clsp
--rw-r--r--   0 runner    (1001) docker     (123)       90 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/genesis_by_coin_id.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      587 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/genesis_by_puzzle_hash.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      114 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/genesis_by_puzzle_hash.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     3109 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/graftroot_dl_offers.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     1844 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/graftroot_dl_offers.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      830 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/json.clib
--rw-r--r--   0 runner    (1001) docker     (123)     5981 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/load_clvm.py
--rw-r--r--   0 runner    (1001) docker     (123)      547 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/merkle_utils.clib
--rw-r--r--   0 runner    (1001) docker     (123)      190 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_intermediate_launcher.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      130 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_intermediate_launcher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      886 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_metadata_updater_default.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      482 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_metadata_updater_default.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      991 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_metadata_updater_updateable.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      406 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_metadata_updater_updateable.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     3796 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     2452 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     2783 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     1374 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     2976 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_state_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     1654 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_state_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      144 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/notification.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      118 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/notification.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)       56 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_conditions.clsp
--rw-r--r--   0 runner    (1001) docker     (123)       18 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_conditions.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      757 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_conditions.py
--rw-r--r--   0 runner    (1001) docker     (123)      400 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_conditions.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      274 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_conditions.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      538 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_conditions.py
--rw-r--r--   0 runner    (1001) docker     (123)      478 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      286 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     1166 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     3237 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      454 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     6979 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)     3421 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      906 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      645 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py
--rw-r--r--   0 runner    (1001) docker     (123)      384 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_parent.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      484 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_parent.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      434 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_puzzle_hash.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      286 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_puzzle_hash.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      853 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_puzzle_hash.py
--rw-r--r--   0 runner    (1001) docker     (123)     1540 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      806 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     2463 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      992 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     2727 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_member_innerpuz.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      752 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_member_innerpuz.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     2758 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      824 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp.hex
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.910338 chia-blockchain-2.0.0b1/chia/wallet/puzzles/prefarm/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/prefarm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     2266 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/prefarm/make_prefarm_ph.py
--rw-r--r--   0 runner    (1001) docker     (123)     3687 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/prefarm/spend_prefarm.py
--rw-r--r--   0 runner    (1001) docker     (123)     1919 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/puzzle_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)     1747 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     1474 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      386 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator.py
--rw-r--r--   0 runner    (1001) docker     (123)     1116 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator2.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      534 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator2.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)       65 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator2.clsp.hex.sha256tree
--rw-r--r--   0 runner    (1001) docker     (123)     1694 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      586 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     1551 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments_old.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      534 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments_old.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      262 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/sha256tree.clib
--rw-r--r--   0 runner    (1001) docker     (123)      307 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/sha256tree_module.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      222 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/sha256tree_module.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      476 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_launcher.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      350 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_launcher.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)     7453 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     2336 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)    13022 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer.py
--rw-r--r--   0 runner    (1001) docker     (123)     5022 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp
--rw-r--r--   0 runner    (1001) docker     (123)     1934 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)    12723 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer_v1_1.py
--rw-r--r--   0 runner    (1001) docker     (123)     1371 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_truths.clib
--rw-r--r--   0 runner    (1001) docker     (123)     8074 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/tails.py
--rw-r--r--   0 runner    (1001) docker     (123)       89 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/test_generator_deserialize.clsp
--rw-r--r--   0 runner    (1001) docker     (123)       26 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/test_generator_deserialize.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      794 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp
--rw-r--r--   0 runner    (1001) docker     (123)      464 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp.hex
--rw-r--r--   0 runner    (1001) docker     (123)      430 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/puzzles/utility_macros.clib
--rw-r--r--   0 runner    (1001) docker     (123)      595 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/secret_key_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2883 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/sign_coin_spends.py
--rw-r--r--   0 runner    (1001) docker     (123)     2493 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/singleton.py
--rw-r--r--   0 runner    (1001) docker     (123)    43782 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/trade_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     2010 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/trade_record.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.910338 chia-blockchain-2.0.0b1/chia/wallet/trading/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/trading/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    32734 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/trading/offer.py
--rw-r--r--   0 runner    (1001) docker     (123)      206 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/trading/trade_status.py
--rw-r--r--   0 runner    (1001) docker     (123)    20392 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/trading/trade_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     5029 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/transaction_record.py
--rw-r--r--   0 runner    (1001) docker     (123)      415 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/transaction_sorting.py
--rw-r--r--   0 runner    (1001) docker     (123)      316 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/uncurried_puzzle.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.910338 chia-blockchain-2.0.0b1/chia/wallet/util/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     2003 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/address_type.py
--rw-r--r--   0 runner    (1001) docker     (123)      821 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/compute_hints.py
--rw-r--r--   0 runner    (1001) docker     (123)     2023 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/compute_memos.py
--rw-r--r--   0 runner    (1001) docker     (123)     2066 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/curry_and_treehash.py
--rw-r--r--   0 runner    (1001) docker     (123)     7886 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/debug_spend_bundle.py
--rw-r--r--   0 runner    (1001) docker     (123)      582 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/json_clvm_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)     3673 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/merkle_tree.py
--rw-r--r--   0 runner    (1001) docker     (123)     3478 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/merkle_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)     3484 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/new_peak_queue.py
--rw-r--r--   0 runner    (1001) docker     (123)      447 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/notifications.py
--rw-r--r--   0 runner    (1001) docker     (123)     7257 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/peer_request_cache.py
--rw-r--r--   0 runner    (1001) docker     (123)     6163 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/puzzle_compression.py
--rw-r--r--   0 runner    (1001) docker     (123)      224 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/transaction_type.py
--rw-r--r--   0 runner    (1001) docker     (123)    17158 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/wallet_sync_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)     1058 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/util/wallet_types.py
--rw-r--r--   0 runner    (1001) docker     (123)    26906 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     1255 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_action.py
--rw-r--r--   0 runner    (1001) docker     (123)    10829 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_blockchain.py
--rw-r--r--   0 runner    (1001) docker     (123)     2826 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_coin_record.py
--rw-r--r--   0 runner    (1001) docker     (123)    16488 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_coin_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     1095 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_info.py
--rw-r--r--   0 runner    (1001) docker     (123)     4972 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_interested_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    12463 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_nft_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    79568 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_node.py
--rw-r--r--   0 runner    (1001) docker     (123)     8172 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_node_api.py
--rw-r--r--   0 runner    (1001) docker     (123)     4346 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_pool_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2239 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)    13735 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_puzzle_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2048 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_retry_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    86445 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_state_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)    15012 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_transaction_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     4146 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_user_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     4932 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/chia/wallet/wallet_weight_proof_handler.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.914338 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/
--rw-r--r--   0 runner    (1001) docker     (123)     4952 2023-05-09 02:17:12.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (123)    32457 2023-05-09 02:17:12.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (123)        1 2023-05-09 02:17:12.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (123)      771 2023-05-09 02:17:12.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/entry_points.txt
--rw-r--r--   0 runner    (1001) docker     (123)        1 2023-05-09 02:15:21.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/not-zip-safe
--rw-r--r--   0 runner    (1001) docker     (123)      935 2023-05-09 02:17:12.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/requires.txt
--rw-r--r--   0 runner    (1001) docker     (123)       30 2023-05-09 02:17:12.000000 chia-blockchain-2.0.0b1/chia_blockchain.egg-info/top_level.txt
--rwxr-xr-x   0 runner    (1001) docker     (123)     6676 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/install-gui.sh
--rwxr-xr-x   0 runner    (1001) docker     (123)     4910 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/install-plotter.sh
--rw-r--r--   0 runner    (1001) docker     (123)     5058 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/install-timelord.sh
--rwxr-xr-x   0 runner    (1001) docker     (123)    12532 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/install.sh
--rw-r--r--   0 runner    (1001) docker     (123)     2033 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/installhelper.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.914338 chia-blockchain-2.0.0b1/mozilla-ca/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:56.000000 chia-blockchain-2.0.0b1/mozilla-ca/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)   216583 2023-05-09 02:14:56.000000 chia-blockchain-2.0.0b1/mozilla-ca/cacert.pem
--rw-r--r--   0 runner    (1001) docker     (123)     7464 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/mypy.ini
--rw-r--r--   0 runner    (1001) docker     (123)    14885 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/pylintrc
--rw-r--r--   0 runner    (1001) docker     (123)      432 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/pyproject.toml
--rw-r--r--   0 runner    (1001) docker     (123)     1739 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/pytest.ini
--rwxr-xr-x   0 runner    (1001) docker     (123)      157 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/run-py-tests.sh
--rw-r--r--   0 runner    (1001) docker     (123)       38 2023-05-09 02:17:12.986339 chia-blockchain-2.0.0b1/setup.cfg
--rw-r--r--   0 runner    (1001) docker     (123)     5844 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/setup.py
--rwxr-xr-x   0 runner    (1001) docker     (123)     1303 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/start-gui.sh
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.914338 chia-blockchain-2.0.0b1/tests/
--rw-r--r--   0 runner    (1001) docker     (123)     2318 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/README.md
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.914338 chia-blockchain-2.0.0b1/tests/blockchain/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/blockchain/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     6553 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/blockchain/blockchain_test_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)      102 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/blockchain/config.py
--rw-r--r--   0 runner    (1001) docker     (123)   167932 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/blockchain/test_blockchain.py
--rw-r--r--   0 runner    (1001) docker     (123)    39815 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/blockchain/test_blockchain_transactions.py
--rwxr-xr-x   0 runner    (1001) docker     (123)     2786 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/build-init-files.py
--rw-r--r--   0 runner    (1001) docker     (123)     4227 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/build-job-matrix.py
--rwxr-xr-x   0 runner    (1001) docker     (123)      924 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/check_pytest_monitor_output.py
--rwxr-xr-x   0 runner    (1001) docker     (123)     2398 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/check_sql_statements.py
--rwxr-xr-x   0 runner    (1001) docker     (123)     1750 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/chia-start-sim
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.914338 chia-blockchain-2.0.0b1/tests/clvm/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      824 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/benchmark_costs.py
--rw-r--r--   0 runner    (1001) docker     (123)     5060 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/coin_store.py
--rw-r--r--   0 runner    (1001) docker     (123)       86 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     4523 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_chialisp_deserialization.py
--rw-r--r--   0 runner    (1001) docker     (123)     1357 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_clvm_step.py
--rw-r--r--   0 runner    (1001) docker     (123)     1049 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_curry_and_treehash.py
--rw-r--r--   0 runner    (1001) docker     (123)     3588 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_program.py
--rw-r--r--   0 runner    (1001) docker     (123)     5128 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_puzzle_compression.py
--rw-r--r--   0 runner    (1001) docker     (123)     1386 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_puzzle_drivers.py
--rw-r--r--   0 runner    (1001) docker     (123)     9713 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)     1109 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_serialized_program.py
--rw-r--r--   0 runner    (1001) docker     (123)    21532 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_singletons.py
--rw-r--r--   0 runner    (1001) docker     (123)     5315 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/clvm/test_spend_sim.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.918338 chia-blockchain-2.0.0b1/tests/cmds/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/cmds/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     5570 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/cmds/test_sim.py
--rw-r--r--   0 runner    (1001) docker     (123)     3424 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/cmds/test_wallet_check.py
--rw-r--r--   0 runner    (1001) docker     (123)    28635 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/conftest.py
--rw-r--r--   0 runner    (1001) docker     (123)     3817 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/connection_utils.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.918338 chia-blockchain-2.0.0b1/tests/core/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.918338 chia-blockchain-2.0.0b1/tests/core/cmds/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/cmds/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       52 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/cmds/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    13587 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/cmds/test_beta.py
--rw-r--r--   0 runner    (1001) docker     (123)    38994 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/cmds/test_keys.py
--rw-r--r--   0 runner    (1001) docker     (123)     4196 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/cmds/test_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)       85 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/config.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.918338 chia-blockchain-2.0.0b1/tests/core/consensus/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/consensus/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       52 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/consensus/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     5061 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/consensus/test_pot_iterations.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.918338 chia-blockchain-2.0.0b1/tests/core/custom_types/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/custom_types/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       52 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/custom_types/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     3543 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/custom_types/test_coin.py
--rw-r--r--   0 runner    (1001) docker     (123)      869 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/custom_types/test_proof_of_space.py
--rw-r--r--   0 runner    (1001) docker     (123)     4135 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/custom_types/test_spend_bundle.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.922339 chia-blockchain-2.0.0b1/tests/core/daemon/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/daemon/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       93 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/daemon/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    28618 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/daemon/test_daemon.py
--rw-r--r--   0 runner    (1001) docker     (123)     4037 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/daemon/test_daemon_register.py
--rw-r--r--   0 runner    (1001) docker     (123)     2550 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/daemon/test_keychain_proxy.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.922339 chia-blockchain-2.0.0b1/tests/core/data_layer/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       99 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     3865 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/conftest.py
--rw-r--r--   0 runner    (1001) docker     (123)     2353 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_cli.py
--rw-r--r--   0 runner    (1001) docker     (123)     3028 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_layer_util.py
--rw-r--r--   0 runner    (1001) docker     (123)   245364 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)    47306 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    14921 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_store_schema.py
--rw-r--r--   0 runner    (1001) docker     (123)     6746 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/data_layer/util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.922339 chia-blockchain-2.0.0b1/tests/core/full_node/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      173 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/config.py
--rw-r--r--   0 runner    (1001) docker     (123)      591 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/conftest.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.922339 chia-blockchain-2.0.0b1/tests/core/full_node/dos/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/dos/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/dos/config.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.922339 chia-blockchain-2.0.0b1/tests/core/full_node/full_sync/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/full_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      102 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/full_sync/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    19025 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/full_sync/test_full_sync.py
--rw-r--r--   0 runner    (1001) docker     (123)      855 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/ram_db.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.926339 chia-blockchain-2.0.0b1/tests/core/full_node/stores/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      151 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    13967 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_block_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    21322 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_coin_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    34130 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_full_node_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     6877 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_hint_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2495 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_sync_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    23835 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_address_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)    16506 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_block_height_map.py
--rw-r--r--   0 runner    (1001) docker     (123)    13828 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_conditions.py
--rw-r--r--   0 runner    (1001) docker     (123)    87563 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_full_node.py
--rw-r--r--   0 runner    (1001) docker     (123)     1811 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_generator_tools.py
--rw-r--r--   0 runner    (1001) docker     (123)     5513 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_hint_management.py
--rw-r--r--   0 runner    (1001) docker     (123)     1369 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_node_load.py
--rw-r--r--   0 runner    (1001) docker     (123)    10377 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_peer_store_resolver.py
--rw-r--r--   0 runner    (1001) docker     (123)     7767 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_performance.py
--rw-r--r--   0 runner    (1001) docker     (123)    11698 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_subscriptions.py
--rw-r--r--   0 runner    (1001) docker     (123)     7644 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_transactions.py
--rw-r--r--   0 runner    (1001) docker     (123)     5618 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/full_node/test_tx_processing_queue.py
--rw-r--r--   0 runner    (1001) docker     (123)   187863 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/large_block.py
--rw-r--r--   0 runner    (1001) docker     (123)     2596 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/make_block_generator.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.926339 chia-blockchain-2.0.0b1/tests/core/mempool/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      103 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/config.py
--rw-r--r--   0 runner    (1001) docker     (123)   125253 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool.py
--rw-r--r--   0 runner    (1001) docker     (123)     3626 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_fee_estimator.py
--rw-r--r--   0 runner    (1001) docker     (123)     2148 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_fee_protocol.py
--rw-r--r--   0 runner    (1001) docker     (123)    51535 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     2942 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_performance.py
--rw-r--r--   0 runner    (1001) docker     (123)      594 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/node_height.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.926339 chia-blockchain-2.0.0b1/tests/core/server/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/config.py
--rw-r--r--   0 runner    (1001) docker     (123)      934 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/flood.py
--rw-r--r--   0 runner    (1001) docker     (123)     2227 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/serve.py
--rw-r--r--   0 runner    (1001) docker     (123)     1983 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_capabilities.py
--rw-r--r--   0 runner    (1001) docker     (123)    11389 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_dos.py
--rw-r--r--   0 runner    (1001) docker     (123)     5612 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_event_loop.py
--rw-r--r--   0 runner    (1001) docker     (123)     9162 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_loop.py
--rw-r--r--   0 runner    (1001) docker     (123)    14687 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_rate_limits.py
--rw-r--r--   0 runner    (1001) docker     (123)     2251 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_server.py
--rw-r--r--   0 runner    (1001) docker     (123)      186 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/server/test_upnp.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.926339 chia-blockchain-2.0.0b1/tests/core/ssl/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/ssl/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       85 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/ssl/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     9973 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/ssl/test_ssl.py
--rw-r--r--   0 runner    (1001) docker     (123)      890 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_coins.py
--rw-r--r--   0 runner    (1001) docker     (123)    11935 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_cost_calculation.py
--rw-r--r--   0 runner    (1001) docker     (123)     2392 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_crawler_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)      711 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_daemon_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)     5904 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_db_conversion.py
--rw-r--r--   0 runner    (1001) docker     (123)     5858 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_db_validation.py
--rw-r--r--   0 runner    (1001) docker     (123)    23550 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_farmer_harvester_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)     1191 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_filter.py
--rw-r--r--   0 runner    (1001) docker     (123)    19621 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_full_node_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)     9905 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_merkle_set.py
--rw-r--r--   0 runner    (1001) docker     (123)     6312 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_services.py
--rw-r--r--   0 runner    (1001) docker     (123)      311 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/test_setproctitle.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.930338 chia-blockchain-2.0.0b1/tests/core/util/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       85 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     2302 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_cached_bls.py
--rw-r--r--   0 runner    (1001) docker     (123)    13727 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_config.py
--rw-r--r--   0 runner    (1001) docker     (123)     4453 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_file_keyring_synchronization.py
--rw-r--r--   0 runner    (1001) docker     (123)    14641 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_files.py
--rw-r--r--   0 runner    (1001) docker     (123)     3545 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_jsonify.py
--rw-r--r--   0 runner    (1001) docker     (123)    20681 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_keychain.py
--rw-r--r--   0 runner    (1001) docker     (123)    22952 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_keyring_wrapper.py
--rw-r--r--   0 runner    (1001) docker     (123)    14519 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_lockfile.py
--rw-r--r--   0 runner    (1001) docker     (123)     6370 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_log_exceptions.py
--rw-r--r--   0 runner    (1001) docker     (123)     1682 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_lru_cache.py
--rw-r--r--   0 runner    (1001) docker     (123)     1442 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_significant_bits.py
--rw-r--r--   0 runner    (1001) docker     (123)    29429 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/core/util/test_streamable.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.930338 chia-blockchain-2.0.0b1/tests/db/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/db/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)    15542 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/db/test_db_wrapper.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.930338 chia-blockchain-2.0.0b1/tests/farmer_harvester/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/farmer_harvester/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/farmer_harvester/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     4299 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/farmer_harvester/test_farmer_harvester.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.934339 chia-blockchain-2.0.0b1/tests/fee_estimation/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/fee_estimation/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      977 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/fee_estimation/cmdline_test.py
--rw-r--r--   0 runner    (1001) docker     (123)    10631 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/fee_estimation/test_fee_estimation_integration.py
--rw-r--r--   0 runner    (1001) docker     (123)    11499 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/fee_estimation/test_fee_estimation_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)     5145 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/fee_estimation/test_fee_estimation_unit_tests.py
--rw-r--r--   0 runner    (1001) docker     (123)     5873 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/fee_estimation/test_mempoolitem_height_added.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.938339 chia-blockchain-2.0.0b1/tests/generator/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       52 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    14614 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/test_compression.py
--rw-r--r--   0 runner    (1001) docker     (123)     4207 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/test_generator_types.py
--rw-r--r--   0 runner    (1001) docker     (123)     1060 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/test_list_to_batches.py
--rw-r--r--   0 runner    (1001) docker     (123)     6763 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/test_rom.py
--rw-r--r--   0 runner    (1001) docker     (123)     4142 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/generator/test_scan.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.938339 chia-blockchain-2.0.0b1/tests/plot_sync/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       85 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     3216 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/test_delta.py
--rw-r--r--   0 runner    (1001) docker     (123)    29365 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/test_plot_sync.py
--rw-r--r--   0 runner    (1001) docker     (123)    17905 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/test_receiver.py
--rw-r--r--   0 runner    (1001) docker     (123)     4917 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/test_sender.py
--rw-r--r--   0 runner    (1001) docker     (123)    18095 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/test_sync_simulated.py
--rw-r--r--   0 runner    (1001) docker     (123)     2395 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plot_sync/util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.942339 chia-blockchain-2.0.0b1/tests/plotting/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plotting/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      110 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plotting/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    32802 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plotting/test_plot_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)      316 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/plotting/util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.942339 chia-blockchain-2.0.0b1/tests/pools/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       99 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     1154 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/test_pool_cmdline.py
--rw-r--r--   0 runner    (1001) docker     (123)     1786 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/test_pool_config.py
--rw-r--r--   0 runner    (1001) docker     (123)    14572 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/test_pool_puzzles_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (123)    47252 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/test_pool_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)     7062 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/test_pool_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     4421 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/pools/test_wallet_pool_store.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.946339 chia-blockchain-2.0.0b1/tests/simulation/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/simulation/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      110 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/simulation/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    21623 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/simulation/test_simulation.py
--rw-r--r--   0 runner    (1001) docker     (123)    10038 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/simulation/test_simulator.py
--rw-r--r--   0 runner    (1001) docker     (123)     5129 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/simulation/test_start_simulator.py
--rw-r--r--   0 runner    (1001) docker     (123)      433 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/testconfig.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.950339 chia-blockchain-2.0.0b1/tests/tools/
--rw-r--r--   0 runner    (1001) docker     (123)    20462 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/1315537.json
--rw-r--r--   0 runner    (1001) docker     (123)    20277 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/1315544.json
--rw-r--r--   0 runner    (1001) docker     (123)    19672 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/1315630.json
--rw-r--r--   0 runner    (1001) docker     (123)    10501 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/300000.json
--rw-r--r--   0 runner    (1001) docker     (123)    17387 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/442734.json
--rw-r--r--   0 runner    (1001) docker     (123)   233251 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/466212.json
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      114 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/config.py
--rw-r--r--   0 runner    (1001) docker     (123)   405504 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/test-blockchain-db.sqlite
--rw-r--r--   0 runner    (1001) docker     (123)      700 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/test_full_sync.py
--rw-r--r--   0 runner    (1001) docker     (123)     3277 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/test_legacy_keyring.py
--rw-r--r--   0 runner    (1001) docker     (123)     4257 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/tools/test_run_block.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.958339 chia-blockchain-2.0.0b1/tests/util/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     2145 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/alert_server.py
--rw-r--r--   0 runner    (1001) docker     (123)     7104 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/benchmark_cost.py
--rw-r--r--   0 runner    (1001) docker     (123)     8592 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/bip39_test_vectors.json
--rw-r--r--   0 runner    (1001) docker     (123)     4346 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/blockchain.py
--rw-r--r--   0 runner    (1001) docker     (123)     9871 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/build_network_protocol_files.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/config.py
--rw-r--r--   0 runner    (1001) docker     (123)      691 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/db_connection.py
--rw-r--r--   0 runner    (1001) docker     (123)     4328 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/gen_ssl_certs.py
--rw-r--r--   0 runner    (1001) docker     (123)     1326 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/generator_tools_testing.py
--rw-r--r--   0 runner    (1001) docker     (123)     1603 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/key_tool.py
--rw-r--r--   0 runner    (1001) docker     (123)     9155 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/misc.py
--rw-r--r--   0 runner    (1001) docker     (123)    31159 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/network_protocol_data.py
--rw-r--r--   0 runner    (1001) docker     (123)    46740 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/protocol_messages_bytes-v1.0
--rw-r--r--   0 runner    (1001) docker     (123)   170660 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/protocol_messages_json.py
--rw-r--r--   0 runner    (1001) docker     (123)      692 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)      297 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/temp_file.py
--rw-r--r--   0 runner    (1001) docker     (123)      791 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_chunks.py
--rw-r--r--   0 runner    (1001) docker     (123)      353 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_collection.py
--rw-r--r--   0 runner    (1001) docker     (123)    11204 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_full_block_utils.py
--rw-r--r--   0 runner    (1001) docker     (123)     1995 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_limited_semaphore.py
--rw-r--r--   0 runner    (1001) docker     (123)     2112 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_lock_queue.py
--rw-r--r--   0 runner    (1001) docker     (123)     1262 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_logging_filter.py
--rw-r--r--   0 runner    (1001) docker     (123)     3182 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_misc.py
--rw-r--r--   0 runner    (1001) docker     (123)     2993 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_network.py
--rw-r--r--   0 runner    (1001) docker     (123)    22379 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_network_protocol_files.py
--rw-r--r--   0 runner    (1001) docker     (123)    17774 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_network_protocol_json.py
--rw-r--r--   0 runner    (1001) docker     (123)     6824 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_network_protocol_test.py
--rw-r--r--   0 runner    (1001) docker     (123)     2346 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_paginator.py
--rw-r--r--   0 runner    (1001) docker     (123)      653 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_pprint.py
--rw-r--r--   0 runner    (1001) docker     (123)     9817 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_struct_stream.py
--rw-r--r--   0 runner    (1001) docker     (123)     1884 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/util/test_trusted_peer.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.966339 chia-blockchain-2.0.0b1/tests/wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.970339 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      107 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    25164 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_cat_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (123)     2894 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_cat_outer_puzzle.py
--rw-r--r--   0 runner    (1001) docker     (123)    47568 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_cat_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)    14345 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_offer_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (123)   162923 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_trades.py
--rw-r--r--   0 runner    (1001) docker     (123)      123 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/config.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.970339 chia-blockchain-2.0.0b1/tests/wallet/dao_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/dao_wallet/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.970339 chia-blockchain-2.0.0b1/tests/wallet/db_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/db_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/db_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (123)     6363 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/db_wallet/test_db_graftroot.py
--rw-r--r--   0 runner    (1001) docker     (123)   135852 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/db_wallet/test_dl_offers.py
--rw-r--r--   0 runner    (1001) docker     (123)    26485 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/db_wallet/test_dl_wallet.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.974339 chia-blockchain-2.0.0b1/tests/wallet/did_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/did_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      107 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/did_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    66004 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/did_wallet/test_did.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.974339 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       86 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/config.py
--rw-r--r--   0 runner    (1001) docker     (123)   374078 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_1_offers.py
--rw-r--r--   0 runner    (1001) docker     (123)    43345 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_bulk_mint.py
--rw-r--r--   0 runner    (1001) docker     (123)    15360 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (123)    66774 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_offers.py
--rw-r--r--   0 runner    (1001) docker     (123)     7544 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_puzzles.py
--rw-r--r--   0 runner    (1001) docker     (123)    76327 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     3289 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_ownership_outer_puzzle.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.978339 chia-blockchain-2.0.0b1/tests/wallet/rpc/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/rpc/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/rpc/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    10128 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/rpc/test_dl_wallet_rpc.py
--rw-r--r--   0 runner    (1001) docker     (123)    74646 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/rpc/test_wallet_rpc.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.978339 chia-blockchain-2.0.0b1/tests/wallet/simple_sync/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/simple_sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       69 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/simple_sync/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    32900 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/simple_sync/test_simple_sync_protocol.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.978339 chia-blockchain-2.0.0b1/tests/wallet/sync/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/sync/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       86 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/sync/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    65362 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/sync/test_wallet_sync.py
--rw-r--r--   0 runner    (1001) docker     (123)     7270 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_address_type.py
--rw-r--r--   0 runner    (1001) docker     (123)     1373 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_bech32m.py
--rw-r--r--   0 runner    (1001) docker     (123)     2148 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_chialisp.py
--rw-r--r--   0 runner    (1001) docker     (123)    22800 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_coin_selection.py
--rw-r--r--   0 runner    (1001) docker     (123)     8513 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_nft_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     8130 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_notifications.py
--rw-r--r--   0 runner    (1001) docker     (123)    13782 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_offer_parsing_performance.py
--rw-r--r--   0 runner    (1001) docker     (123)     2989 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_puzzle_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     4993 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_singleton.py
--rw-r--r--   0 runner    (1001) docker     (123)     6038 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_singleton_lifecycle.py
--rw-r--r--   0 runner    (1001) docker     (123)    30445 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_singleton_lifecycle_fast.py
--rw-r--r--   0 runner    (1001) docker     (123)      796 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_taproot.py
--rw-r--r--   0 runner    (1001) docker     (123)    28752 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_transaction_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    43681 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet.py
--rw-r--r--   0 runner    (1001) docker     (123)     4257 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_blockchain.py
--rw-r--r--   0 runner    (1001) docker     (123)    40542 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_coin_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     2090 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_interested_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     1617 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_key_val_store.py
--rw-r--r--   0 runner    (1001) docker     (123)    17353 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_node.py
--rw-r--r--   0 runner    (1001) docker     (123)     4253 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_retry.py
--rw-r--r--   0 runner    (1001) docker     (123)     1871 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_state_manager.py
--rw-r--r--   0 runner    (1001) docker     (123)     4398 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_trade_store.py
--rw-r--r--   0 runner    (1001) docker     (123)     1175 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/wallet/test_wallet_user_store.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.982339 chia-blockchain-2.0.0b1/tests/weight_proof/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/weight_proof/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)       85 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/weight_proof/config.py
--rw-r--r--   0 runner    (1001) docker     (123)    22920 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tests/weight_proof/test_weight_proof.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-05-09 02:17:12.982339 chia-blockchain-2.0.0b1/tools/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/__init__.py
--rwxr-xr-x   0 runner    (1001) docker     (123)     5772 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/analyze-chain.py
--rw-r--r--   0 runner    (1001) docker     (123)     6897 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/analyze_memory_profile.py
--rw-r--r--   0 runner    (1001) docker     (123)     3575 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/cpu_utilization.py
--rw-r--r--   0 runner    (1001) docker     (123)     8959 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/generate_chain.py
--rw-r--r--   0 runner    (1001) docker     (123)     4707 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/legacy_keyring.py
--rw-r--r--   0 runner    (1001) docker     (123)    13848 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/manage_clvm.py
--rw-r--r--   0 runner    (1001) docker     (123)     1024 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/plot-log.gnuplot
--rwxr-xr-x   0 runner    (1001) docker     (123)      791 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/run_benchmark.sh
--rw-r--r--   0 runner    (1001) docker     (123)     8880 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/run_block.py
--rw-r--r--   0 runner    (1001) docker     (123)      776 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/test_constants.py
--rwxr-xr-x   0 runner    (1001) docker     (123)    13714 2023-05-09 02:14:48.000000 chia-blockchain-2.0.0b1/tools/test_full_sync.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.315455 chia-blockchain-2.0.0b3/
+-rw-r--r--   0 runner    (1001) docker     (123)      307 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.coveragerc
+-rw-r--r--   0 runner    (1001) docker     (123)      293 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.flake8
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.159442 chia-blockchain-2.0.0b3/.github/
+-rw-r--r--   0 runner    (1001) docker     (123)      104 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/CODEOWNERS
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.159442 chia-blockchain-2.0.0b3/.github/ISSUE_TEMPLATE/
+-rw-r--r--   0 runner    (1001) docker     (123)     1406 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/ISSUE_TEMPLATE/bug_report.yaml
+-rw-r--r--   0 runner    (1001) docker     (123)      514 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/ISSUE_TEMPLATE/config.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      673 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/PULL_REQUEST_TEMPLATE.md
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.147441 chia-blockchain-2.0.0b3/.github/actions/
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.159442 chia-blockchain-2.0.0b3/.github/actions/install/
+-rw-r--r--   0 runner    (1001) docker     (123)     1391 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/actions/install/action.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1006 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/dependabot.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      435 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/release.yml
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.163442 chia-blockchain-2.0.0b3/.github/workflows/
+-rw-r--r--   0 runner    (1001) docker     (123)     2213 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/benchmarks.yml
+-rw-r--r--   0 runner    (1001) docker     (123)    12246 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/build-linux-arm64-installer.yml
+-rw-r--r--   0 runner    (1001) docker     (123)    12139 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/build-linux-installer-deb.yml
+-rw-r--r--   0 runner    (1001) docker     (123)    12226 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/build-linux-installer-rpm.yml
+-rw-r--r--   0 runner    (1001) docker     (123)    13442 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/build-macos-installers.yml
+-rw-r--r--   0 runner    (1001) docker     (123)    13299 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/build-windows-installer.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      776 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/check-commit-signing.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     2093 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/check_wheel_availability.yaml
+-rw-r--r--   0 runner    (1001) docker     (123)     2758 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/codeql-analysis.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1036 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/conflict-check.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      335 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/daily-matrix.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      890 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/dependency-review.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1338 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/mozilla-ca-cert.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     2115 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/pre-commit.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      699 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/require-labels.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     2226 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/snyk-python-scan.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1434 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/stale-issue.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      890 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/start-release.yml
+-rw-r--r--   0 runner    (1001) docker     (123)      899 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/start-sync-test.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     2383 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/super-linter.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     6612 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/test-install-scripts.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     8850 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/test-single.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     5853 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/test.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1529 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/trigger-docker-dev.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1023 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/trigger-docker-main.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     6170 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.github/workflows/upload-pypi-source.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     5429 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.gitignore
+-rw-r--r--   0 runner    (1001) docker     (123)      260 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.gitmodules
+-rw-r--r--   0 runner    (1001) docker     (123)      110 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.isort.cfg
+-rw-r--r--   0 runner    (1001) docker     (123)     1009 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.markdown-lint.yml
+-rw-r--r--   0 runner    (1001) docker     (123)     1892 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/.pre-commit-config.yaml
+-rw-r--r--   0 runner    (1001) docker     (123)     1377 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/BUILD_TIMELORD.md
+-rw-r--r--   0 runner    (1001) docker     (123)   210418 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/CHANGELOG.md
+-rw-r--r--   0 runner    (1001) docker     (123)     3477 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/CODE_OF_CONDUCT.md
+-rw-r--r--   0 runner    (1001) docker     (123)     8869 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/CONTRIBUTING.md
+-rw-r--r--   0 runner    (1001) docker     (123)      393 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/INSTALL.md
+-rw-r--r--   0 runner    (1001) docker     (123)     1179 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/Install-gui.ps1
+-rw-r--r--   0 runner    (1001) docker     (123)     5155 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/Install-plotter.ps1
+-rw-r--r--   0 runner    (1001) docker     (123)     3770 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/Install.ps1
+-rw-r--r--   0 runner    (1001) docker     (123)    11342 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (123)     4952 2023-06-21 23:51:23.315455 chia-blockchain-2.0.0b3/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (123)    33099 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/PRETTY_GOOD_PRACTICES.md
+-rw-r--r--   0 runner    (1001) docker     (123)     4358 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/README.md
+-rw-r--r--   0 runner    (1001) docker     (123)      701 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/SECURITY.md
+-rw-r--r--   0 runner    (1001) docker     (123)      286 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/activated.ps1
+-rwxr-xr-x   0 runner    (1001) docker     (123)      630 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/activated.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)      155 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/activated.sh
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.167442 chia-blockchain-2.0.0b3/benchmarks/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3186 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/block_ref.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14354 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/block_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)   121543 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/clvm_generator.bin
+-rw-r--r--   0 runner    (1001) docker     (123)     9537 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)      514 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/jsonify.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5062 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/mempool-long-lived.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11251 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/mempool.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11782 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/streamable.py
+-rw-r--r--   0 runner    (1001) docker     (123)   439288 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/transaction_height_delta
+-rw-r--r--   0 runner    (1001) docker     (123)     6327 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/benchmarks/utils.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.167442 chia-blockchain-2.0.0b3/build_scripts/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.167442 chia-blockchain-2.0.0b3/build_scripts/assets/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.167442 chia-blockchain-2.0.0b3/build_scripts/assets/deb/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/deb/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      277 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/deb/control.j2
+-rw-r--r--   0 runner    (1001) docker     (123)      290 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/deb/postinst.sh
+-rw-r--r--   0 runner    (1001) docker     (123)      178 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/deb/prerm.sh
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.171443 chia-blockchain-2.0.0b3/build_scripts/assets/dmg/
+-rw-r--r--   0 runner    (1001) docker     (123)      315 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/dmg/README
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/dmg/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)   507222 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/dmg/background.tiff
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.171443 chia-blockchain-2.0.0b3/build_scripts/assets/rpm/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/rpm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      290 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/rpm/postinst.sh
+-rw-r--r--   0 runner    (1001) docker     (123)      178 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/assets/rpm/prerm.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     1393 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_license_directory.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     1328 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_linux_deb-1-gui.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     4805 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_linux_deb-2-installer.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     1327 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_linux_rpm-1-gui.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     3936 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_linux_rpm-2-installer.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     1350 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_macos-1-gui.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     3608 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_macos-2-installer.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     1360 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_win_license_dir.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     1913 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_windows-1-gui.ps1
+-rw-r--r--   0 runner    (1001) docker     (123)     3135 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/build_windows-2-installer.ps1
+-rw-r--r--   0 runner    (1001) docker     (123)     2218 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/check_dependency_artifacts.py
+-rw-r--r--   0 runner    (1001) docker     (123)      907 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/clean-runner.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     2531 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/installer-version.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.171443 chia-blockchain-2.0.0b3/build_scripts/npm_global/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_global/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      342 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_global/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (123)      267 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_global/package.json
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.171443 chia-blockchain-2.0.0b3/build_scripts/npm_linux/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_linux/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)   565063 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_linux/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (123)      305 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_linux/package.json
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.171443 chia-blockchain-2.0.0b3/build_scripts/npm_macos/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_macos/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)   594824 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_macos/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (123)      379 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_macos/package.json
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.175443 chia-blockchain-2.0.0b3/build_scripts/npm_windows/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_windows/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)   581487 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_windows/package-lock.json
+-rw-r--r--   0 runner    (1001) docker     (123)      307 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/build_scripts/npm_windows/package.json
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.175443 chia-blockchain-2.0.0b3/chia/
+-rw-r--r--   0 runner    (1001) docker     (123)      347 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       76 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/__main__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.175443 chia-blockchain-2.0.0b3/chia/clvm/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/clvm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      325 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/clvm/singleton.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18332 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/clvm/spend_sim.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.179443 chia-blockchain-2.0.0b3/chia/cmds/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7240 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/beta.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4705 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/beta_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16346 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/check_wallet_db.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4564 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/chia.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9461 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/cmds_util.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10675 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/coin_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6716 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/coins.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1387 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/completion.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13235 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/configure.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11323 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/data.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8267 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/data_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2937 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/db.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3341 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/db_backup_func.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17725 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/db_upgrade_func.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7802 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/db_validate_func.py
+-rw-r--r--   0 runner    (1001) docker     (123)      244 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/dev.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2168 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/farm.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8240 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/farm_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2079 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/init.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16283 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/init_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14964 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/keys.py
+-rw-r--r--   0 runner    (1001) docker     (123)    26855 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/keys_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1291 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/netspace.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2737 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/netspace_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4784 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/passphrase.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12569 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/passphrase_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1398 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/peer.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5306 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/peer_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8138 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/plotnft.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17241 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/plotnft_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7200 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/plots.py
+-rw-r--r--   0 runner    (1001) docker     (123)      399 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/plotters.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4730 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2443 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/show.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9793 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/show_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7797 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/sim.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22264 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/sim_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)      782 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/start.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3452 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/start_funcs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2025 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/stop.py
+-rw-r--r--   0 runner    (1001) docker     (123)      325 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/units.py
+-rw-r--r--   0 runner    (1001) docker     (123)    55471 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)    60943 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/cmds/wallet_funcs.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.183444 chia-blockchain-2.0.0b3/chia/consensus/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22860 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/block_body_validation.py
+-rw-r--r--   0 runner    (1001) docker     (123)    21437 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/block_creation.py
+-rw-r--r--   0 runner    (1001) docker     (123)    51189 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/block_header_validation.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4805 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/block_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2246 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/block_rewards.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1602 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/block_root_validation.py
+-rw-r--r--   0 runner    (1001) docker     (123)    43217 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3725 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/blockchain_interface.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1201 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/coinbase.py
+-rw-r--r--   0 runner    (1001) docker     (123)      228 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/condition_costs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4732 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/constants.py
+-rw-r--r--   0 runner    (1001) docker     (123)      517 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/cost_calculator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3938 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/default_constants.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2183 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/deficit.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18266 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/difficulty_adjustment.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1253 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/find_fork_point.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6609 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/full_block_to_block_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4823 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/get_block_challenge.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7852 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/make_sub_epoch_summary.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17934 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/multiprocess_validation.py
+-rw-r--r--   0 runner    (1001) docker     (123)      788 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/pos_quality.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2829 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/pot_iterations.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6971 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/consensus/vdf_info_computation.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.183444 chia-blockchain-2.0.0b3/chia/daemon/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/daemon/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7977 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/daemon/client.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18190 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/daemon/keychain_proxy.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11125 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/daemon/keychain_server.py
+-rw-r--r--   0 runner    (1001) docker     (123)    55518 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/daemon/server.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2069 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/daemon/windows_signal.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.187444 chia-blockchain-2.0.0b3/chia/data_layer/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    40675 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_layer.py
+-rw-r--r--   0 runner    (1001) docker     (123)      662 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_layer_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1198 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_layer_errors.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4996 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_layer_server.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18391 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_layer_util.py
+-rw-r--r--   0 runner    (1001) docker     (123)    62160 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_layer_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)    62999 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/data_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13650 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/dl_wallet_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8556 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/download_data.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1136 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/s3_plugin_config.yml
+-rw-r--r--   0 runner    (1001) docker     (123)    16377 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/s3_plugin_service.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.187444 chia-blockchain-2.0.0b3/chia/data_layer/util/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4716 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/data_layer/util/benchmark.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.187444 chia-blockchain-2.0.0b3/chia/farmer/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/farmer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    36468 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/farmer/farmer.py
+-rw-r--r--   0 runner    (1001) docker     (123)    28703 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/farmer/farmer_api.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.191444 chia-blockchain-2.0.0b3/chia/full_node/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3595 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/bitcoin_fee_estimator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9689 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/block_height_map.py
+-rw-r--r--   0 runner    (1001) docker     (123)    32512 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/block_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6305 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/bundle_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)    25118 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1796 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimate.py
+-rw-r--r--   0 runner    (1001) docker     (123)      526 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimate_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2922 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimation.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3958 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1235 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimator_constants.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1955 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimator_example.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1606 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_estimator_interface.py
+-rw-r--r--   0 runner    (1001) docker     (123)      610 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_history.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22559 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/fee_tracker.py
+-rw-r--r--   0 runner    (1001) docker     (123)   129262 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/full_node.py
+-rw-r--r--   0 runner    (1001) docker     (123)    80140 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/full_node_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)    36689 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/full_node_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2446 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/generator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2731 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/hint_management.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2524 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/hint_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18564 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/mempool.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6084 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/mempool_check_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (123)    34525 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/mempool_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3670 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/pending_tx_cache.py
+-rw-r--r--   0 runner    (1001) docker     (123)      414 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/signage_point.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5617 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/subscriptions.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4803 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/sync_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3335 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/tx_processing_queue.py
+-rw-r--r--   0 runner    (1001) docker     (123)    71289 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/full_node/weight_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.191444 chia-blockchain-2.0.0b3/chia/harvester/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/harvester/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7862 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/harvester/harvester.py
+-rw-r--r--   0 runner    (1001) docker     (123)    15569 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/harvester/harvester_api.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.191444 chia-blockchain-2.0.0b3/chia/introducer/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/introducer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4173 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/introducer/introducer.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2145 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/introducer/introducer_api.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.195445 chia-blockchain-2.0.0b3/chia/plot_sync/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plot_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1848 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plot_sync/delta.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2306 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plot_sync/exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14237 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plot_sync/receiver.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13847 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plot_sync/sender.py
+-rw-r--r--   0 runner    (1001) docker     (123)      825 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plot_sync/util.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.195445 chia-blockchain-2.0.0b3/chia/plotters/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotters/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11146 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotters/bladebit.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1949 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotters/chiapos.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7591 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotters/madmax.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16640 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotters/plotters.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4050 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotters/plotters_util.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.195445 chia-blockchain-2.0.0b3/chia/plotting/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotting/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7803 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotting/cache.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9712 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotting/check_plots.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10542 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotting/create_plots.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16142 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotting/manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9139 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/plotting/util.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.195445 chia-blockchain-2.0.0b3/chia/pools/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/pools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3893 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/pools/pool_config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17113 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/pools/pool_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)    44177 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/pools/pool_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4535 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/pools/pool_wallet_info.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.195445 chia-blockchain-2.0.0b3/chia/protocols/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1841 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/farmer_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4276 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/full_node_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4283 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/harvester_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)      600 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/introducer_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4059 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/pool_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3186 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/protocol_message_types.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3594 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/protocol_state_machine.py
+-rw-r--r--   0 runner    (1001) docker     (123)      235 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/protocol_timing.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1738 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/shared_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3111 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/timelord_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5768 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/protocols/wallet_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/py.typed
+-rw-r--r--   0 runner    (1001) docker     (123)     5541 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/pyinstaller.spec
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.199445 chia-blockchain-2.0.0b3/chia/rpc/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2640 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/crawler_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18476 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/data_layer_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5321 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/data_layer_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2003 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/data_layer_rpc_util.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13605 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/farmer_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3986 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/farmer_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (123)    41288 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/full_node_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12300 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/full_node_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3146 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/harvester_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1865 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/harvester_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3396 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17016 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/rpc_server.py
+-rw-r--r--   0 runner    (1001) docker     (123)      863 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/timelord_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)      934 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/util.py
+-rw-r--r--   0 runner    (1001) docker     (123)   177390 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/wallet_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)    50901 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/rpc/wallet_rpc_client.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.199445 chia-blockchain-2.0.0b3/chia/seeder/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14746 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/crawl_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17357 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/crawler.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3943 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/crawler_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10354 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/dns_server.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5420 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/peer_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2688 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/seeder/start_crawler.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.203446 chia-blockchain-2.0.0b3/chia/server/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    27079 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/address_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4943 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/address_manager_sqlite_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9764 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/address_manager_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)      192 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/api_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)      720 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/capabilities.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14558 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/chia_policy.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2430 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/introducer_peers.py
+-rw-r--r--   0 runner    (1001) docker     (123)    33375 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/node_discovery.py
+-rw-r--r--   0 runner    (1001) docker     (123)      820 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/outbound_message.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3471 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/peer_store_resolver.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12583 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/rate_limit_numbers.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5013 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/rate_limits.py
+-rw-r--r--   0 runner    (1001) docker     (123)    30945 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/server.py
+-rw-r--r--   0 runner    (1001) docker     (123)      867 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/ssl_context.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4062 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_data_layer.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2989 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_farmer.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4472 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_full_node.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2784 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_harvester.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2032 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_introducer.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12514 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_service.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2735 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_timelord.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3719 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/start_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3392 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/upnp.py
+-rw-r--r--   0 runner    (1001) docker     (123)    30626 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/server/ws_connection.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.207446 chia-blockchain-2.0.0b3/chia/simulator/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    96341 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/block_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)    28951 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/full_node_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5689 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/keyring.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17948 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/setup_nodes.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16480 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/setup_services.py
+-rw-r--r--   0 runner    (1001) docker     (123)      534 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/simulator_constants.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5560 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/simulator_full_node_rpc_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3062 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/simulator_full_node_rpc_client.py
+-rw-r--r--   0 runner    (1001) docker     (123)      628 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/simulator_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6462 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/simulator_test_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)      610 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/socket.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4904 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39483 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_1.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39473 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_10.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_2.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39471 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_3.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_4.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39483 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_5.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39483 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_6.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_7.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_8.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39479 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_9.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4479 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/start_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2956 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/time_out_assert.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10290 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/simulator/wallet_tools.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.207446 chia-blockchain-2.0.0b3/chia/ssl/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/ssl/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1155 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/ssl/chia_ca.crt
+-rw-r--r--   0 runner    (1001) docker     (123)     1675 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/ssl/chia_ca.key
+-rw-r--r--   0 runner    (1001) docker     (123)     8874 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/ssl/create_ssl.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1200 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/ssl/dst_root_ca.pem
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.211446 chia-blockchain-2.0.0b3/chia/timelord/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1769 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/iters_from_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)    58929 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/timelord.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4805 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/timelord_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4102 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/timelord_launcher.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12060 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/timelord_state.py
+-rw-r--r--   0 runner    (1001) docker     (123)      354 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/timelord/types.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.215447 chia-blockchain-2.0.0b3/chia/types/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      718 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/announcement.py
+-rw-r--r--   0 runner    (1001) docker     (123)      571 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/block_protocol.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.215447 chia-blockchain-2.0.0b3/chia/types/blockchain_format/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1153 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/classgroup.py
+-rw-r--r--   0 runner    (1001) docker     (123)      695 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/coin.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2353 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/foliage.py
+-rw-r--r--   0 runner    (1001) docker     (123)      385 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/pool_target.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7612 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/program.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4587 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/proof_of_space.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1962 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/reward_chain_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4646 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/serialized_program.py
+-rw-r--r--   0 runner    (1001) docker     (123)      388 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/sized_bytes.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1848 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/slots.py
+-rw-r--r--   0 runner    (1001) docker     (123)      678 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/sub_epoch_summary.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2006 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/tree_hash.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2830 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/blockchain_format/vdf.py
+-rw-r--r--   0 runner    (1001) docker     (123)      332 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/clvm_cost.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1284 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/coin_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)      186 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/coin_solution.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2711 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/coin_spend.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1941 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/condition_opcodes.py
+-rw-r--r--   0 runner    (1001) docker     (123)      493 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/condition_with_args.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5489 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/eligible_coin_spends.py
+-rw-r--r--   0 runner    (1001) docker     (123)      560 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/end_of_slot_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (123)      854 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/fee_rate.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3585 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/full_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1053 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/generator_types.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2475 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/header_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)      620 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/internal_mempool_item.py
+-rw-r--r--   0 runner    (1001) docker     (123)      260 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/mempool_inclusion_status.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2536 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/mempool_item.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1055 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/mempool_submission_status.py
+-rw-r--r--   0 runner    (1001) docker     (123)      132 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/mojos.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1828 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/peer_info.py
+-rw-r--r--   0 runner    (1001) docker     (123)      889 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/signing_mode.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4738 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/spend_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (123)      173 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/spend_bundle_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1017 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/transaction_queue_entry.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1972 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/unfinished_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1527 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/unfinished_header_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3217 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/types/weight_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.223447 chia-blockchain-2.0.0b3/chia/util/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3046 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/api_decorators.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4572 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/bech32m.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4249 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/beta_metrics.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3864 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/block_cache.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2190 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/byte_types.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2899 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/cached_bls.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1408 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/check_fork_next_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4862 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/chia_logging.py
+-rw-r--r--   0 runner    (1001) docker     (123)      323 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/collection.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4950 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/condition_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11508 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)      575 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/db_synchronous.py
+-rw-r--r--   0 runner    (1001) docker     (123)      936 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/db_version.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10201 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/db_wrapper.py
+-rw-r--r--   0 runner    (1001) docker     (123)      389 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/default_root.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     3071 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/dump_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13116 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/english.txt
+-rw-r--r--   0 runner    (1001) docker     (123)     8871 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/errors.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17393 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/file_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3251 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/files.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12119 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/full_block_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2413 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/generator_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)      384 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/hash.py
+-rw-r--r--   0 runner    (1001) docker     (123)    25149 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/initial-config.yaml
+-rw-r--r--   0 runner    (1001) docker     (123)      646 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/inline_executor.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1655 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/ints.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1109 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/json_util.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22225 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/keychain.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10459 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/keyring_wrapper.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1013 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/limited_semaphore.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1326 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/lock.py
+-rw-r--r--   0 runner    (1001) docker     (123)      750 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/log_exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (123)      918 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/logging.py
+-rw-r--r--   0 runner    (1001) docker     (123)      770 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/lru_cache.py
+-rw-r--r--   0 runner    (1001) docker     (123)      326 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/make_test_constants.py
+-rw-r--r--   0 runner    (1001) docker     (123)      463 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/math.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10292 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/merkle_set.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5110 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/misc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5899 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/network.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1593 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/paginator.py
+-rw-r--r--   0 runner    (1001) docker     (123)      622 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/partial_func.py
+-rw-r--r--   0 runner    (1001) docker     (123)      702 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/path.py
+-rw-r--r--   0 runner    (1001) docker     (123)      493 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/permissions.py
+-rw-r--r--   0 runner    (1001) docker     (123)      884 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/pprint.py
+-rw-r--r--   0 runner    (1001) docker     (123)      712 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/prev_transaction_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2725 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/priority_mutex.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6713 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/profiler.py
+-rw-r--r--   0 runner    (1001) docker     (123)      467 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/recursive_replace.py
+-rw-r--r--   0 runner    (1001) docker     (123)      395 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/safe_cancel_task.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1501 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/service_groups.py
+-rw-r--r--   0 runner    (1001) docker     (123)      399 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/setproctitle.py
+-rw-r--r--   0 runner    (1001) docker     (123)      991 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/significant_bits.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8083 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/ssl_check.py
+-rw-r--r--   0 runner    (1001) docker     (123)    23962 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/streamable.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3633 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/struct_stream.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10459 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/task_timing.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1042 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/vdf_prover.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1739 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/util/ws_message.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.227448 chia-blockchain-2.0.0b3/chia/wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      996 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/block_record.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.231448 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      838 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_constants.py
+-rw-r--r--   0 runner    (1001) docker     (123)      946 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_info.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5232 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5649 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)    43379 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2829 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/lineage_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2038 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/chialisp.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8624 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/coin_selection.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.231448 chia-blockchain-2.0.0b3/chia/wallet/dao_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/dao_wallet/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.231448 chia-blockchain-2.0.0b3/chia/wallet/db_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/db_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4398 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/db_wallet/db_wallet_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)      604 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/derivation_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4834 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/derive_keys.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.231448 chia-blockchain-2.0.0b3/chia/wallet/did_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/did_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1028 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/did_wallet/did_info.py
+-rw-r--r--   0 runner    (1001) docker     (123)    61954 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/did_wallet/did_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6587 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/did_wallet/did_wallet_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1003 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/driver_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1779 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/key_val_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1026 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/lineage_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.231448 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4406 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/metadata_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3190 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/nft_info.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12066 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/nft_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)    82963 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/nft_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4556 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/ownership_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4478 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/singleton_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3349 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/transfer_program_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7681 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/uncurry_nft.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4720 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/notification_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6194 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/notification_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4012 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/outer_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1125 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/payment.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3646 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzle_drivers.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.247449 chia-blockchain-2.0.0b3/chia/wallet/puzzles/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      126 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/augmented_condition.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       27 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/augmented_condition.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      642 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/block_program_zero.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      341 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/block_program_zero.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      123 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/calculate_synthetic_public_key.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       35 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/calculate_synthetic_public_key.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     1198 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/cat_truths.clib
+-rw-r--r--   0 runner    (1001) docker     (123)    15726 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/cat_v2.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     3345 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/cat_v2.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2457 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/chialisp_deserialisation.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      943 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/chialisp_deserialisation.clsp.hex
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.251449 chia-blockchain-2.0.0b3/chia/wallet/puzzles/clawback/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/clawback/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8011 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/clawback/drivers.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1128 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/clawback/metadata.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2757 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/clawback/puzzle_decorator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1705 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/condition_codes.clib
+-rw-r--r--   0 runner    (1001) docker     (123)      450 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/create-lock-puzzlehash.clib
+-rw-r--r--   0 runner    (1001) docker     (123)      189 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/create_nft_launcher_from_did.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      131 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/create_nft_launcher_from_did.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     3869 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/curry-and-treehash.clib
+-rw-r--r--   0 runner    (1001) docker     (123)     5226 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/curry.clib
+-rw-r--r--   0 runner    (1001) docker     (123)      253 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/decompress_coin_spend_entry.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      111 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/decompress_coin_spend_entry.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      262 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/decompress_coin_spend_entry_with_prefix.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      109 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/decompress_coin_spend_entry_with_prefix.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      114 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/decompress_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       43 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/decompress_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      576 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/delegated_tail.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      361 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/delegated_tail.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     5408 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/deployed_puzzle_hashes.json
+-rw-r--r--   0 runner    (1001) docker     (123)     6558 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/did_innerpuz.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     2025 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/did_innerpuz.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      299 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/everything_with_signature.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       83 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/everything_with_signature.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      499 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/genesis_by_coin_id.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       91 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/genesis_by_coin_id.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      553 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/genesis_by_puzzle_hash.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      115 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/genesis_by_puzzle_hash.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2838 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/graftroot_dl_offers.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1845 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/graftroot_dl_offers.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      888 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/json.clib
+-rw-r--r--   0 runner    (1001) docker     (123)     6056 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/load_clvm.py
+-rw-r--r--   0 runner    (1001) docker     (123)      502 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/merkle_utils.clib
+-rw-r--r--   0 runner    (1001) docker     (123)      189 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_intermediate_launcher.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      131 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_intermediate_launcher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      881 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_metadata_updater_default.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      483 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_metadata_updater_default.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     1005 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_metadata_updater_updateable.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      407 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_metadata_updater_updateable.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     3716 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     2453 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2693 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1375 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2882 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_state_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1655 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_state_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      145 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/notification.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      119 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/notification.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      470 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_1_of_n.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      561 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_1_of_n.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)       54 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_conditions.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       19 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_conditions.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      757 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (123)      375 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_conditions.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      275 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_conditions.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      538 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (123)      451 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      287 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     1166 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3072 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      455 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     6979 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3119 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      907 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      645 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py
+-rw-r--r--   0 runner    (1001) docker     (123)      385 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_parent.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      485 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_parent.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      414 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_puzzle_hash.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      287 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_puzzle_hash.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      853 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_puzzle_hash.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1466 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      807 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2389 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      993 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2627 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_member_innerpuz.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      753 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_member_innerpuz.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2648 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      825 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp.hex
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.251449 chia-blockchain-2.0.0b3/chia/wallet/puzzles/prefarm/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/prefarm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2266 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/prefarm/make_prefarm_ph.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3687 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/prefarm/spend_prefarm.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1148 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/puzzle_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1633 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1475 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      386 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1036 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator2.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      535 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator2.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)       65 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator2.clsp.hex.sha256tree
+-rw-r--r--   0 runner    (1001) docker     (123)     1681 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      587 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     1538 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments_old.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      535 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments_old.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      235 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/sha256tree.clib
+-rw-r--r--   0 runner    (1001) docker     (123)      276 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/sha256tree_module.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      223 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/sha256tree_module.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      462 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_launcher.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      351 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_launcher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     7314 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     2337 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)    13022 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4978 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1935 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)    12723 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer_v1_1.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1372 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_truths.clib
+-rw-r--r--   0 runner    (1001) docker     (123)     8107 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/tails.py
+-rw-r--r--   0 runner    (1001) docker     (123)       89 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/test_generator_deserialize.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)       27 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/test_generator_deserialize.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      791 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      465 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      726 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/puzzles/utility_macros.clib
+-rw-r--r--   0 runner    (1001) docker     (123)      611 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/secret_key_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2883 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/sign_coin_spends.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2493 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/singleton.py
+-rw-r--r--   0 runner    (1001) docker     (123)    44392 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/trade_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2010 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/trade_record.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.251449 chia-blockchain-2.0.0b3/chia/wallet/trading/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/trading/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    32734 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/trading/offer.py
+-rw-r--r--   0 runner    (1001) docker     (123)      206 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/trading/trade_status.py
+-rw-r--r--   0 runner    (1001) docker     (123)    20392 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/trading/trade_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5029 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/transaction_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)      415 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/transaction_sorting.py
+-rw-r--r--   0 runner    (1001) docker     (123)      316 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/uncurried_puzzle.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.255450 chia-blockchain-2.0.0b3/chia/wallet/util/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2008 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/address_type.py
+-rw-r--r--   0 runner    (1001) docker     (123)      821 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/compute_hints.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2023 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/compute_memos.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2066 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/curry_and_treehash.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7886 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/debug_spend_bundle.py
+-rw-r--r--   0 runner    (1001) docker     (123)      582 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/json_clvm_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3673 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/merkle_tree.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3478 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/merkle_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3484 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/new_peak_queue.py
+-rw-r--r--   0 runner    (1001) docker     (123)      447 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/notifications.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7257 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/peer_request_cache.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6165 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/puzzle_compression.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3896 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/puzzle_decorator.py
+-rw-r--r--   0 runner    (1001) docker     (123)      110 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/puzzle_decorator_type.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1681 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/query_filter.py
+-rw-r--r--   0 runner    (1001) docker     (123)      453 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/transaction_type.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17530 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/wallet_sync_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1151 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/util/wallet_types.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.255450 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    23456 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_cat_drivers.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.255450 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_puzzles/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9401 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     3297 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     1599 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      799 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)    32641 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_drivers.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.259450 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1117 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      221 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2042 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1179 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      954 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      209 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2597 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1105 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     5059 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1777 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      560 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      275 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     2700 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1305 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)      544 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)      855 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     1939 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp
+-rw-r--r--   0 runner    (1001) docker     (123)     1307 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp.hex
+-rw-r--r--   0 runner    (1001) docker     (123)     9697 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    21242 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/vc_wallet/vc_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)    28282 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10829 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2911 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_coin_record.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16069 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1095 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_info.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8190 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_interested_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12463 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_nft_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    80814 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_node.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8197 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_node_api.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4623 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_pool_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3410 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14929 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_puzzle_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2497 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_retry_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)   100805 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_state_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16318 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_transaction_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4146 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_user_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4932 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/chia/wallet/wallet_weight_proof_handler.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.259450 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (123)     4952 2023-06-21 23:51:22.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (123)    35122 2023-06-21 23:51:23.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (123)        1 2023-06-21 23:51:22.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (123)      771 2023-06-21 23:51:22.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/entry_points.txt
+-rw-r--r--   0 runner    (1001) docker     (123)        1 2023-06-21 23:50:16.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/not-zip-safe
+-rw-r--r--   0 runner    (1001) docker     (123)      934 2023-06-21 23:51:22.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/requires.txt
+-rw-r--r--   0 runner    (1001) docker     (123)       30 2023-06-21 23:51:22.000000 chia-blockchain-2.0.0b3/chia_blockchain.egg-info/top_level.txt
+-rwxr-xr-x   0 runner    (1001) docker     (123)     6676 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/install-gui.sh
+-rwxr-xr-x   0 runner    (1001) docker     (123)     4910 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/install-plotter.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     5058 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/install-timelord.sh
+-rwxr-xr-x   0 runner    (1001) docker     (123)    12532 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/install.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     2033 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/installhelper.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     3908 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/manage-mypy.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.259450 chia-blockchain-2.0.0b3/mozilla-ca/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:53.000000 chia-blockchain-2.0.0b3/mozilla-ca/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)   215902 2023-06-21 23:49:53.000000 chia-blockchain-2.0.0b3/mozilla-ca/cacert.pem
+-rw-r--r--   0 runner    (1001) docker     (123)     5162 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/mypy-exclusions.txt
+-rw-r--r--   0 runner    (1001) docker     (123)      914 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/mypy.ini.template
+-rw-r--r--   0 runner    (1001) docker     (123)    14885 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/pylintrc
+-rw-r--r--   0 runner    (1001) docker     (123)      432 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/pyproject.toml
+-rw-r--r--   0 runner    (1001) docker     (123)     1935 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/pytest.ini
+-rw-r--r--   0 runner    (1001) docker     (123)       38 2023-06-21 23:51:23.315455 chia-blockchain-2.0.0b3/setup.cfg
+-rw-r--r--   0 runner    (1001) docker     (123)     6043 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/setup.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     1303 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/start-gui.sh
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.263450 chia-blockchain-2.0.0b3/tests/
+-rw-r--r--   0 runner    (1001) docker     (123)     2318 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/README.md
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.263450 chia-blockchain-2.0.0b3/tests/blockchain/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/blockchain/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6589 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/blockchain/blockchain_test_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)      102 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/blockchain/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)   168170 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/blockchain/test_blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (123)    39815 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/blockchain/test_blockchain_transactions.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     2786 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/build-init-files.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4227 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/build-job-matrix.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)      924 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/check_pytest_monitor_output.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     2398 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/check_sql_statements.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     1750 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/chia-start-sim
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.267451 chia-blockchain-2.0.0b3/tests/clvm/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      824 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/benchmark_costs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5060 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)       86 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4523 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_chialisp_deserialization.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1357 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_clvm_step.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1049 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_curry_and_treehash.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3588 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_program.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5086 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_puzzle_compression.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1386 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_puzzle_drivers.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9755 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1109 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_serialized_program.py
+-rw-r--r--   0 runner    (1001) docker     (123)    21532 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_singletons.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5334 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/clvm/test_spend_sim.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.267451 chia-blockchain-2.0.0b3/tests/cmds/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/cmds/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6245 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/cmds/test_sim.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3424 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/cmds/test_wallet_check.py
+-rw-r--r--   0 runner    (1001) docker     (123)    31083 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/conftest.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3794 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/connection_utils.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.271451 chia-blockchain-2.0.0b3/tests/core/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.271451 chia-blockchain-2.0.0b3/tests/core/cmds/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/cmds/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       52 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/cmds/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13587 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/cmds/test_beta.py
+-rw-r--r--   0 runner    (1001) docker     (123)    38994 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/cmds/test_keys.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4196 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/cmds/test_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)       85 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/config.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.271451 chia-blockchain-2.0.0b3/tests/core/consensus/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/consensus/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       52 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/consensus/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5061 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/consensus/test_pot_iterations.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.271451 chia-blockchain-2.0.0b3/tests/core/custom_types/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/custom_types/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       52 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/custom_types/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3543 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/custom_types/test_coin.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4661 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/custom_types/test_proof_of_space.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4135 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/custom_types/test_spend_bundle.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.271451 chia-blockchain-2.0.0b3/tests/core/daemon/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/daemon/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       93 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/daemon/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    48856 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/daemon/test_daemon.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4037 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/daemon/test_daemon_register.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2550 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/daemon/test_keychain_proxy.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.275452 chia-blockchain-2.0.0b3/tests/core/data_layer/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       99 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3865 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/conftest.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2353 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_cli.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3028 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_layer_util.py
+-rw-r--r--   0 runner    (1001) docker     (123)   245446 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)    47306 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14921 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_store_schema.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6746 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/data_layer/util.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.275452 chia-blockchain-2.0.0b3/tests/core/full_node/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      173 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)      591 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/conftest.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.275452 chia-blockchain-2.0.0b3/tests/core/full_node/dos/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/dos/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       69 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/dos/config.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.275452 chia-blockchain-2.0.0b3/tests/core/full_node/full_sync/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/full_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      102 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/full_sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18933 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/full_sync/test_full_sync.py
+-rw-r--r--   0 runner    (1001) docker     (123)      855 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/ram_db.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.279452 chia-blockchain-2.0.0b3/tests/core/full_node/stores/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      151 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14538 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_block_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    23988 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    37043 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_full_node_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6877 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_hint_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2495 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_sync_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    23835 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_address_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16506 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_block_height_map.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13828 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_conditions.py
+-rw-r--r--   0 runner    (1001) docker     (123)    91433 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_full_node.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1811 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_generator_tools.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5513 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_hint_management.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1369 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_node_load.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10377 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_peer_store_resolver.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7767 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_performance.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11704 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_subscriptions.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7644 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_transactions.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5618 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/full_node/test_tx_processing_queue.py
+-rw-r--r--   0 runner    (1001) docker     (123)   187863 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/large_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2596 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/make_block_generator.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.279452 chia-blockchain-2.0.0b3/tests/core/mempool/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      103 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)   128596 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3626 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_fee_estimator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2148 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_fee_protocol.py
+-rw-r--r--   0 runner    (1001) docker     (123)    74765 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2942 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_performance.py
+-rw-r--r--   0 runner    (1001) docker     (123)      912 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/node_height.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.279452 chia-blockchain-2.0.0b3/tests/core/server/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       69 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)      934 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/flood.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2227 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/serve.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1983 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_capabilities.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11389 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_dos.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5612 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_event_loop.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9162 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_loop.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3473 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_node_discovery.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14606 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_rate_limits.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4725 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_server.py
+-rw-r--r--   0 runner    (1001) docker     (123)      186 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/server/test_upnp.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.279452 chia-blockchain-2.0.0b3/tests/core/ssl/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/ssl/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       85 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/ssl/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9946 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/ssl/test_ssl.py
+-rw-r--r--   0 runner    (1001) docker     (123)      890 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_coins.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11884 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_cost_calculation.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2670 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_crawler.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2392 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_crawler_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)      711 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_daemon_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5904 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_db_conversion.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5858 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_db_validation.py
+-rw-r--r--   0 runner    (1001) docker     (123)    24033 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_farmer_harvester_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1191 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_filter.py
+-rw-r--r--   0 runner    (1001) docker     (123)    19599 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_full_node_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9905 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_merkle_set.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6312 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_services.py
+-rw-r--r--   0 runner    (1001) docker     (123)      319 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/test_setproctitle.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.283452 chia-blockchain-2.0.0b3/tests/core/util/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       85 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2302 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_cached_bls.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13727 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4453 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_file_keyring_synchronization.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14641 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_files.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3545 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_jsonify.py
+-rw-r--r--   0 runner    (1001) docker     (123)    20681 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_keychain.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22952 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_keyring_wrapper.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14519 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_lockfile.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6370 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_log_exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1682 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_lru_cache.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1442 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_significant_bits.py
+-rw-r--r--   0 runner    (1001) docker     (123)    29429 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/core/util/test_streamable.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.283452 chia-blockchain-2.0.0b3/tests/db/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/db/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    15542 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/db/test_db_wrapper.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.283452 chia-blockchain-2.0.0b3/tests/farmer_harvester/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/farmer_harvester/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       69 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/farmer_harvester/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4916 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/farmer_harvester/test_farmer_harvester.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.283452 chia-blockchain-2.0.0b3/tests/fee_estimation/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/fee_estimation/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      977 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/fee_estimation/cmdline_test.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10631 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/fee_estimation/test_fee_estimation_integration.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11738 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/fee_estimation/test_fee_estimation_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5145 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/fee_estimation/test_fee_estimation_unit_tests.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5873 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/fee_estimation/test_mempoolitem_height_added.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.283452 chia-blockchain-2.0.0b3/tests/generator/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/generator/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       52 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/generator/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14261 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/generator/test_compression.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4207 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/generator/test_generator_types.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6212 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/generator/test_rom.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4142 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/generator/test_scan.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.287453 chia-blockchain-2.0.0b3/tests/plot_sync/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       85 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3216 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/test_delta.py
+-rw-r--r--   0 runner    (1001) docker     (123)    29554 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/test_plot_sync.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17905 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/test_receiver.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4917 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/test_sender.py
+-rw-r--r--   0 runner    (1001) docker     (123)    18314 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/test_sync_simulated.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2525 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plot_sync/util.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.287453 chia-blockchain-2.0.0b3/tests/plotting/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plotting/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      110 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plotting/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    32802 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plotting/test_plot_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)      316 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/plotting/util.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.287453 chia-blockchain-2.0.0b3/tests/pools/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       99 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1154 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/test_pool_cmdline.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1786 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/test_pool_config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14572 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/test_pool_puzzles_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)    47354 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/test_pool_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7062 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/test_pool_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6369 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/pools/test_wallet_pool_store.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.287453 chia-blockchain-2.0.0b3/tests/simulation/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/simulation/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      110 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/simulation/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    21437 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/simulation/test_simulation.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10038 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/simulation/test_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (123)     5129 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/simulation/test_start_simulator.py
+-rw-r--r--   0 runner    (1001) docker     (123)      433 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/testconfig.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.291453 chia-blockchain-2.0.0b3/tests/tools/
+-rw-r--r--   0 runner    (1001) docker     (123)    20462 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/1315537.json
+-rw-r--r--   0 runner    (1001) docker     (123)    20277 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/1315544.json
+-rw-r--r--   0 runner    (1001) docker     (123)    19672 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/1315630.json
+-rw-r--r--   0 runner    (1001) docker     (123)    10501 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/300000.json
+-rw-r--r--   0 runner    (1001) docker     (123)    17387 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/442734.json
+-rw-r--r--   0 runner    (1001) docker     (123)   233251 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/466212.json
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      114 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)   405504 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/test-blockchain-db.sqlite
+-rw-r--r--   0 runner    (1001) docker     (123)      708 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/test_full_sync.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3277 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/test_legacy_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4257 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/tools/test_run_block.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.299454 chia-blockchain-2.0.0b3/tests/util/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7104 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/benchmark_cost.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8592 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/bip39_test_vectors.json
+-rw-r--r--   0 runner    (1001) docker     (123)     4346 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10111 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/build_network_protocol_files.py
+-rw-r--r--   0 runner    (1001) docker     (123)       69 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)      602 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/db_connection.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4328 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/gen_ssl_certs.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1326 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/generator_tools_testing.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1603 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/key_tool.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9945 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/misc.py
+-rw-r--r--   0 runner    (1001) docker     (123)    31159 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/network_protocol_data.py
+-rw-r--r--   0 runner    (1001) docker     (123)    46740 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/protocol_messages_bytes-v1.0
+-rw-r--r--   0 runner    (1001) docker     (123)   170660 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/protocol_messages_json.py
+-rw-r--r--   0 runner    (1001) docker     (123)      692 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)      297 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/temp_file.py
+-rw-r--r--   0 runner    (1001) docker     (123)      155 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_build_network_protocol_files.py
+-rw-r--r--   0 runner    (1001) docker     (123)      353 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_collection.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1565 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_dump_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (123)    11204 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_full_block_utils.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1995 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_limited_semaphore.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1262 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_logging_filter.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4706 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_misc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2993 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_network.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22381 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_network_protocol_files.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17774 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_network_protocol_json.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6824 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_network_protocol_test.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2346 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_paginator.py
+-rw-r--r--   0 runner    (1001) docker     (123)      653 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_pprint.py
+-rw-r--r--   0 runner    (1001) docker     (123)    16128 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_priority_mutex.py
+-rw-r--r--   0 runner    (1001) docker     (123)     9757 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_struct_stream.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1241 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_testnet_overrides.py
+-rw-r--r--   0 runner    (1001) docker     (123)      885 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_tests_misc.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1884 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/util/test_trusted_peer.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.303454 chia-blockchain-2.0.0b3/tests/wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.303454 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      107 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    25126 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_cat_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2852 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_cat_outer_puzzle.py
+-rw-r--r--   0 runner    (1001) docker     (123)    49762 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_cat_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)    14307 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_offer_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)   164166 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_trades.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.303454 chia-blockchain-2.0.0b3/tests/wallet/clawback/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/clawback/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3453 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/clawback/test_clawback_decorator.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12601 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/clawback/test_clawback_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2099 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/clawback/test_clawback_metadata.py
+-rw-r--r--   0 runner    (1001) docker     (123)      123 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/config.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.303454 chia-blockchain-2.0.0b3/tests/wallet/dao_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/dao_wallet/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.307454 chia-blockchain-2.0.0b3/tests/wallet/db_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/db_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       69 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/db_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6363 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/db_wallet/test_db_graftroot.py
+-rw-r--r--   0 runner    (1001) docker     (123)   135852 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/db_wallet/test_dl_offers.py
+-rw-r--r--   0 runner    (1001) docker     (123)    26749 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/db_wallet/test_dl_wallet.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.307454 chia-blockchain-2.0.0b3/tests/wallet/did_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/did_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)      107 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/did_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    58705 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/did_wallet/test_did.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.307454 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       86 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)   374253 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_1_offers.py
+-rw-r--r--   0 runner    (1001) docker     (123)    43345 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_bulk_mint.py
+-rw-r--r--   0 runner    (1001) docker     (123)    15360 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)    66774 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_offers.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7544 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_puzzles.py
+-rw-r--r--   0 runner    (1001) docker     (123)    76327 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3289 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_ownership_outer_puzzle.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.307454 chia-blockchain-2.0.0b3/tests/wallet/rpc/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/rpc/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       86 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/rpc/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    10298 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/rpc/test_dl_wallet_rpc.py
+-rw-r--r--   0 runner    (1001) docker     (123)    98411 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/rpc/test_wallet_rpc.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.311455 chia-blockchain-2.0.0b3/tests/wallet/simple_sync/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/simple_sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       69 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/simple_sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    34798 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/simple_sync/test_simple_sync_protocol.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.311455 chia-blockchain-2.0.0b3/tests/wallet/sync/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/sync/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       86 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/sync/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    65528 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/sync/test_wallet_sync.py
+-rw-r--r--   0 runner    (1001) docker     (123)     7270 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_address_type.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1373 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_bech32m.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2148 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_chialisp.py
+-rw-r--r--   0 runner    (1001) docker     (123)    22802 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_coin_selection.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8513 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_nft_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8130 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_notifications.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13782 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_offer_parsing_performance.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6053 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_puzzle_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4993 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_singleton.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6038 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_singleton_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)    30445 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_singleton_lifecycle_fast.py
+-rw-r--r--   0 runner    (1001) docker     (123)      796 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_taproot.py
+-rw-r--r--   0 runner    (1001) docker     (123)    31101 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_transaction_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    67213 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4201 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_blockchain.py
+-rw-r--r--   0 runner    (1001) docker     (123)    42582 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_coin_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     2236 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_interested_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1617 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_key_val_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)    17353 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_node.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4253 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_retry.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3514 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_state_manager.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4398 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_trade_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1175 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_user_store.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1914 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/test_wallet_utils.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.311455 chia-blockchain-2.0.0b3/tests/wallet/vc_wallet/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/vc_wallet/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)    34737 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/vc_wallet/test_vc_lifecycle.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6993 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/wallet/vc_wallet/test_vc_wallet.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.311455 chia-blockchain-2.0.0b3/tests/weight_proof/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/weight_proof/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (123)       85 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/weight_proof/config.py
+-rw-r--r--   0 runner    (1001) docker     (123)    23388 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tests/weight_proof/test_weight_proof.py
+drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-06-21 23:51:23.315455 chia-blockchain-2.0.0b3/tools/
+-rw-r--r--   0 runner    (1001) docker     (123)        0 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/__init__.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)     5755 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/analyze-chain.py
+-rw-r--r--   0 runner    (1001) docker     (123)     6897 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/analyze_memory_profile.py
+-rw-r--r--   0 runner    (1001) docker     (123)    12172 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/chialispp.py
+-rw-r--r--   0 runner    (1001) docker     (123)     3575 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/cpu_utilization.py
+-rw-r--r--   0 runner    (1001) docker     (123)     8959 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/generate_chain.py
+-rw-r--r--   0 runner    (1001) docker     (123)     4707 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/legacy_keyring.py
+-rw-r--r--   0 runner    (1001) docker     (123)    13848 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/manage_clvm.py
+-rw-r--r--   0 runner    (1001) docker     (123)     1024 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/plot-log.gnuplot
+-rwxr-xr-x   0 runner    (1001) docker     (123)      791 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/run_benchmark.sh
+-rw-r--r--   0 runner    (1001) docker     (123)     8880 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/run_block.py
+-rw-r--r--   0 runner    (1001) docker     (123)      776 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/test_constants.py
+-rwxr-xr-x   0 runner    (1001) docker     (123)    13714 2023-06-21 23:49:33.000000 chia-blockchain-2.0.0b3/tools/test_full_sync.py
```

### Comparing `chia-blockchain-2.0.0b1/.github/ISSUE_TEMPLATE/bug_report.yaml` & `chia-blockchain-2.0.0b3/.github/ISSUE_TEMPLATE/bug_report.yaml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/ISSUE_TEMPLATE/config.yml` & `chia-blockchain-2.0.0b3/.github/ISSUE_TEMPLATE/config.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/PULL_REQUEST_TEMPLATE.md` & `chia-blockchain-2.0.0b3/.github/PULL_REQUEST_TEMPLATE.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/actions/install/action.yml` & `chia-blockchain-2.0.0b3/.github/actions/install/action.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/dependabot.yml` & `chia-blockchain-2.0.0b3/.github/dependabot.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/benchmarks.yml` & `chia-blockchain-2.0.0b3/.github/workflows/benchmarks.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/build-linux-arm64-installer.yml` & `chia-blockchain-2.0.0b3/.github/workflows/build-linux-arm64-installer.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/build-linux-installer-deb.yml` & `chia-blockchain-2.0.0b3/.github/workflows/build-linux-installer-deb.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/build-linux-installer-rpm.yml` & `chia-blockchain-2.0.0b3/.github/workflows/build-linux-installer-rpm.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/build-macos-installers.yml` & `chia-blockchain-2.0.0b3/.github/workflows/build-macos-installers.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/build-windows-installer.yml` & `chia-blockchain-2.0.0b3/.github/workflows/build-windows-installer.yml`

 * *Files 0% similar despite different names*

```diff
@@ -22,15 +22,15 @@
   group: ${{ github.ref }}-${{ github.workflow }}-${{ github.event_name }}-${{ (github.ref == 'refs/heads/main' || startsWith(github.ref, 'refs/heads/release/') || startsWith(github.ref, 'refs/heads/long_lived/')) && github.sha || '' }}
   cancel-in-progress: true
 
 jobs:
   build:
     name: Windows 10 Installer
     runs-on: [windows-2019]
-    timeout-minutes: 50
+    timeout-minutes: 65
     strategy:
       fail-fast: false
       matrix:
         python-version: [3.9]
 
     steps:
     - name: Checkout Code
```

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/check-commit-signing.yml` & `chia-blockchain-2.0.0b3/.github/workflows/check-commit-signing.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/check_wheel_availability.yaml` & `chia-blockchain-2.0.0b3/.github/workflows/check_wheel_availability.yaml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/codeql-analysis.yml` & `chia-blockchain-2.0.0b3/.github/workflows/codeql-analysis.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/conflict-check.yml` & `chia-blockchain-2.0.0b3/.github/workflows/conflict-check.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/dependency-review.yml` & `chia-blockchain-2.0.0b3/.github/workflows/dependency-review.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/mozilla-ca-cert.yml` & `chia-blockchain-2.0.0b3/.github/workflows/mozilla-ca-cert.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/pre-commit.yml` & `chia-blockchain-2.0.0b3/.github/workflows/pre-commit.yml`

 * *Files 4% similar despite different names*

```diff
@@ -70,8 +70,9 @@
         python-version: ${{ matrix.python.major_dot_minor }}
         development: true
 
     - uses: chia-network/actions/activate-venv@main
 
     - env:
         CHIA_MANAGE_CLVM_CHECK_USE_CACHE: "false"
+        CHIA_MANAGE_MYPY_CHECK_EXCLUSIONS: "true"
       run: pre-commit run --all-files --verbose
```

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/require-labels.yml` & `chia-blockchain-2.0.0b3/.github/workflows/require-labels.yml`

 * *Files 2% similar despite different names*

```diff
@@ -9,15 +9,15 @@
       checks: write
       pull-requests: read
       statuses: write
     outputs:
       status: ${{ steps.check-labels.outputs.status }}
     steps:
       - id: check-labels
-        uses: mheap/github-action-required-labels@v4
+        uses: mheap/github-action-required-labels@v5
         with:
           mode: exactly
           count: 1
           labels: "Added, Changed, Fixed"
           exit_type: success
       - run: echo SUCCESS
         if: steps.check-labels.outputs.status == 'success'
```

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/snyk-python-scan.yml` & `chia-blockchain-2.0.0b3/.github/workflows/snyk-python-scan.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/stale-issue.yml` & `chia-blockchain-2.0.0b3/.github/workflows/stale-issue.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/start-release.yml` & `chia-blockchain-2.0.0b3/.github/workflows/start-release.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/start-sync-test.yml` & `chia-blockchain-2.0.0b3/.github/workflows/start-sync-test.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/super-linter.yml` & `chia-blockchain-2.0.0b3/.github/workflows/super-linter.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/test-install-scripts.yml` & `chia-blockchain-2.0.0b3/.github/workflows/test-install-scripts.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/test-single.yml` & `chia-blockchain-2.0.0b3/.github/workflows/test-single.yml`

 * *Files 1% similar despite different names*

```diff
@@ -116,14 +116,15 @@
               name: core.full_node
           - python:
               exclude_from:
                 ${{ inputs.matrix_mode }}: True
 
     env:
       CHIA_ROOT: ${{ github.workspace }}/.chia/mainnet
+      CHIA_SIMULATOR_ROOT: ${{ github.workspace }}/.chia/simulator
       JOB_FILE_NAME: tests_${{ matrix.os.file_name }}_python-${{ matrix.python.file_name }}_${{ matrix.configuration.name }}
       BLOCKS_AND_PLOTS_VERSION: 0.29.0
 
     steps:
       - name: Configure git
         run: |
           git config --global core.autocrlf false
```

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/test.yml` & `chia-blockchain-2.0.0b3/.github/workflows/test.yml`

 * *Files 4% similar despite different names*

```diff
@@ -155,14 +155,18 @@
       - name: Coverage report (diff)
         if: always()
         env:
           compare-branch: ${{ github.base_ref == '' && github.event.before || format('origin/{0}', github.base_ref) }}
         run: |
           set -o pipefail
           diff-cover --compare-branch=${{ env.compare-branch }} --fail-under=100 --html-report=coverage-reports/diff-cover.html --markdown-report=coverage-reports/diff-cover.md coverage-reports/coverage.xml | tee coverage-reports/diff-cover-stdout
+
+      - name: Add diff coverage report to workflow summary
+        if: always()
+        run: |
           cat coverage-reports/diff-cover.md >> $GITHUB_STEP_SUMMARY
 
       - name: Publish coverage reports
         if: always()
         uses: actions/upload-artifact@v3
         with:
           name: coverage-reports
```

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/trigger-docker-dev.yml` & `chia-blockchain-2.0.0b3/.github/workflows/trigger-docker-dev.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/trigger-docker-main.yml` & `chia-blockchain-2.0.0b3/.github/workflows/trigger-docker-main.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/.github/workflows/upload-pypi-source.yml` & `chia-blockchain-2.0.0b3/.github/workflows/upload-pypi-source.yml`

 * *Files 14% similar despite different names*

```diff
@@ -58,14 +58,15 @@
           - major_dot_minor: '3.9'
           - major_dot_minor: '3.10'
           - major_dot_minor: '3.11'
         check:
           - name: mypy
             command: |
               echo "MYPY VERSION IS: $(mypy --version)"
+              python manage-mypy.py build-mypy-ini
               mypy
         exclude:
           - os:
               matrix: macos
             python:
               major_dot_minor: '3.7'
           - os:
@@ -78,14 +79,17 @@
               matrix: windows
             arch:
               matrix: arm
 
     steps:
     - uses: chia-network/actions/clean-workspace@main
 
+    - name: Add safe git directory
+      uses: chia-network/actions/git-mark-workspace-safe@main
+
     - uses: actions/checkout@v3
       with:
         fetch-depth: 0
         submodules: recursive
 
     - uses: chia-network/actions/setup-python@main
       with:
@@ -124,18 +128,25 @@
         check:
           - name: black
             command: black --check --diff .
           - name: flake8
             command: flake8 benchmarks build_scripts chia tests tools *.py
           - name: pylint
             command: pylint benchmarks build_scripts chia tests tools *.py
+          - name: generated protocol tests
+            command: |
+              python3 -m tests.util.build_network_protocol_files
+              git diff --exit-code
 
     steps:
     - uses: chia-network/actions/clean-workspace@main
 
+    - name: Add safe git directory
+      uses: chia-network/actions/git-mark-workspace-safe@main
+
     - uses: actions/checkout@v3
       with:
         fetch-depth: 0
         submodules: recursive
 
     - uses: chia-network/actions/setup-python@main
       with:
@@ -156,14 +167,17 @@
     name: Lint and Upload source distribution
     runs-on: [ubuntu-latest]
     timeout-minutes: 30
     needs:
       - mypy
       - check
     steps:
+    - name: Add safe git directory
+      uses: chia-network/actions/git-mark-workspace-safe@main
+
     - name: Checkout Code
       uses: actions/checkout@v3
       with:
         fetch-depth: 0
         submodules: recursive
 
     - uses: Chia-Network/actions/setup-python@main
```

### Comparing `chia-blockchain-2.0.0b1/.gitignore` & `chia-blockchain-2.0.0b3/.gitignore`

 * *Files 1% similar despite different names*

```diff
@@ -257,14 +257,15 @@
 # mkdocs documentation
 /site
 
 # mypy
 .mypy_cache/
 .dmypy.json
 dmypy.json
+mypy.ini
 
 # Pyre type checker
 .pyre/
 
 # pytype static type analyzer
 .pytype/
```

### Comparing `chia-blockchain-2.0.0b1/.markdown-lint.yml` & `chia-blockchain-2.0.0b3/.markdown-lint.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/BUILD_TIMELORD.md` & `chia-blockchain-2.0.0b3/BUILD_TIMELORD.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/CHANGELOG.md` & `chia-blockchain-2.0.0b3/CHANGELOG.md`

 * *Files 0% similar despite different names*

```diff
@@ -2,14 +2,26 @@
 
 All notable changes to this project will be documented in this file.
 
 The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
 and this project does not yet adhere to [Semantic Versioning](https://semver.org/spec/v2.0.0.html)
 for setuptools_scm/PEP 440 reasons.
 
+## 1.8.1 Chia blockchain 2023-05-17
+
+### Changed
+- Updated testnet softfork height so softfork rules take effect on testnet immediately
+- Move to Discord in docs and install scripts (#15193)
+- Optimize compact proofs
+
+### Fixed
+- Issue where CLI only listed first 50 NFTs by hardcoding `num` param when listing NFTs from CLI
+- Issue where wallet might display `RuntimeError: dictionary changed size during iteration` by avoiding dict changes while iterating in `handle_nft`
+- Issue where node had trouble keeping peers with `assert self.peak is not None` error by not adding transactions to the mempool before it has a valid peak (fixes #15217)
+
 ## 1.8.0 Chia blockchain 2023-05-03
 
 ### Added
 - Added `chia completion` command
 - Added wallet_removed to `state_changes` messages to support wallet removal in GUI
 - Add support to `cat_spend` RPC for running TAIL
 - Expose NFT coin info's latest_height to RPCs requesting NFT info
```

### Comparing `chia-blockchain-2.0.0b1/CODE_OF_CONDUCT.md` & `chia-blockchain-2.0.0b3/CODE_OF_CONDUCT.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/CONTRIBUTING.md` & `chia-blockchain-2.0.0b3/CONTRIBUTING.md`

 * *Files 18% similar despite different names*

```diff
@@ -10,27 +10,31 @@
 If you want to learn more about this project, read the [wiki](https://github.com/Chia-Network/chia-blockchain/wiki), or check out the [green paper](https://www.chia.net/assets/ChiaGreenPaper.pdf).
 
 ## Contributions
 
 Please review this [diagram](https://drive.google.com/file/d/1r7AXTrj7gtD0Xy-9BtTZR6yv7WXMPgeM/view?usp=sharing), to better understand the git workflow.
 
 We would be pleased to accept code contributions to this project.
-As we have now released, the main priority is improving the mainnet blockchain.
-You can visit our [Trello project board](https://trello.com/b/ZuNx7sET) to get a sense of what is in the backlog.
-Generally, things to the left are in progress or done. Some things go through "Coming up soon", but some will come directly out of other columns.
-Usually, the things closer to the top of each column are the ones that will be worked on soonest.
+As we have now released, the main priority is improving the mainnet blockchain. You can view our [Product Roadmap](https://roadmap.chia.net) to see what we are working on.
+
 If you are interested in cryptography, math, or just like hacking in python, there are many interesting problems to work on.
-Contact any of the team members on [Discord](https://discord.gg/chia), which we use as the main communication method. You can also comment on any Trello card.
+Contact any of the team members on [Discord](https://discord.gg/chia), which we use as the main communication method.
 
 We ask that external contributors create a fork of the `main` branch for any feature work they wish to take on.
 
 Members of the Chia organization may create feature branches from the `main` branch.
 
 In the event an emergency fix is required for the release version of Chia, members of the Chia organization will create a feature branch from the current release branch `latest`.
 
+## Creating Signed Commits
+
+Our branch protection rules require that all commits be signed. If you haven't signed your commits before, you can read about commit signing here: https://docs.github.com/en/authentication/managing-commit-signature-verification
+
+There are detailed, per-OS steps for setting up commit signing with either [GPG keys](https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key#telling-git-about-your-gpg-key), [SSH keys](https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key#telling-git-about-your-ssh-key), or [X.509 keys](https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key#telling-git-about-your-x509-key).
+
 ## Branching Strategy
 
 [Branching Strategy Diagram](https://drive.google.com/file/d/1mYmTi-aFgcyCc39pHyBaaBjV-vjvllBT/view?usp=sharing)
 
 1. All changes go into the main branch.
 2. Main is stable at all times, all tests pass.
 3. Features (with tests) are developed and fully tested on feature branches, and reviewed before landing in main.
```

### Comparing `chia-blockchain-2.0.0b1/Install-gui.ps1` & `chia-blockchain-2.0.0b3/Install-gui.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/Install-plotter.ps1` & `chia-blockchain-2.0.0b3/Install-plotter.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/Install.ps1` & `chia-blockchain-2.0.0b3/Install.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/LICENSE` & `chia-blockchain-2.0.0b3/LICENSE`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/PKG-INFO` & `chia-blockchain-2.0.0b3/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: chia-blockchain
-Version: 2.0.0b1
+Version: 2.0.0b3
 Summary: Chia blockchain full node, farmer, timelord, and wallet.
 Home-page: https://chia.net/
 Author: Mariano Sorgente
 Author-email: mariano@chia.net
 License: Apache License
 Project-URL: Source, https://github.com/Chia-Network/chia-blockchain/
 Project-URL: Changelog, https://github.com/Chia-Network/chia-blockchain/blob/main/CHANGELOG.md
```

### Comparing `chia-blockchain-2.0.0b1/PRETTY_GOOD_PRACTICES.md` & `chia-blockchain-2.0.0b3/PRETTY_GOOD_PRACTICES.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/README.md` & `chia-blockchain-2.0.0b3/README.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/SECURITY.md` & `chia-blockchain-2.0.0b3/SECURITY.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/activated.py` & `chia-blockchain-2.0.0b3/activated.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/block_ref.py` & `chia-blockchain-2.0.0b3/benchmarks/block_ref.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/block_store.py` & `chia-blockchain-2.0.0b3/benchmarks/block_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/clvm_generator.bin` & `chia-blockchain-2.0.0b3/benchmarks/clvm_generator.bin`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/coin_store.py` & `chia-blockchain-2.0.0b3/benchmarks/coin_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/jsonify.py` & `chia-blockchain-2.0.0b3/benchmarks/jsonify.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/mempool-long-lived.py` & `chia-blockchain-2.0.0b3/benchmarks/mempool-long-lived.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/mempool.py` & `chia-blockchain-2.0.0b3/benchmarks/mempool.py`

 * *Files 2% similar despite different names*

```diff
@@ -16,16 +16,16 @@
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.types.spend_bundle import SpendBundle
 from chia.types.spend_bundle_conditions import Spend, SpendBundleConditions
-from chia.util.chunks import chunks
 from chia.util.ints import uint32, uint64
+from chia.util.misc import to_batches
 
 NUM_ITERS = 200
 NUM_PEERS = 5
 
 
 @contextmanager
 def enable_profiler(profile: bool, name: str) -> Iterator[None]:
@@ -140,20 +140,20 @@
                 uint64(coin.amount // 2), wt.get_new_puzzlehash(), coin, fee=peer + idx + 10000000
             )
             bundles.append(tx)
         replacement_spend_bundles.append(bundles)
 
         bundles = []
         print("     large spend bundles")
-        for coins in chunks(unspent, 200):
-            print(f"{len(coins)} coins")
+        for batch in to_batches(unspent, 200):
+            print(f"{len(batch.entries)} coins")
             tx = SpendBundle.aggregate(
                 [
                     wt.generate_signed_transaction(uint64(c.amount // 2), wt.get_new_puzzlehash(), c, fee=peer + idx)
-                    for c in coins
+                    for c in batch.entries
                 ]
             )
             bundles.append(tx)
         large_spend_bundles.append(bundles)
 
     start_height = height
     for single_threaded in [False, True]:
```

### Comparing `chia-blockchain-2.0.0b1/benchmarks/streamable.py` & `chia-blockchain-2.0.0b3/benchmarks/streamable.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/transaction_height_delta` & `chia-blockchain-2.0.0b3/benchmarks/transaction_height_delta`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/benchmarks/utils.py` & `chia-blockchain-2.0.0b3/benchmarks/utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/assets/dmg/background.tiff` & `chia-blockchain-2.0.0b3/build_scripts/assets/dmg/background.tiff`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_linux_deb-1-gui.sh` & `chia-blockchain-2.0.0b3/build_scripts/build_linux_deb-1-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_linux_deb-2-installer.sh` & `chia-blockchain-2.0.0b3/build_scripts/build_linux_deb-2-installer.sh`

 * *Files 6% similar despite different names*

```diff
@@ -40,23 +40,30 @@
 pyinstaller --log-level=INFO "$SPEC_FILE"
 LAST_EXIT_CODE=$?
 if [ "$LAST_EXIT_CODE" -ne 0 ]; then
 	echo >&2 "pyinstaller failed!"
 	exit $LAST_EXIT_CODE
 fi
 
+# Creates a directory of licenses
+echo "Building pip and NPM license directory"
+pwd
+bash ./build_license_directory.sh
+
+
 # Builds CLI only .deb
 # need j2 for templating the control file
 pip install j2cli
 CLI_DEB_BASE="chia-blockchain-cli_$CHIA_INSTALLER_VERSION-1_$PLATFORM"
 mkdir -p "dist/$CLI_DEB_BASE/opt/chia"
 mkdir -p "dist/$CLI_DEB_BASE/usr/bin"
 mkdir -p "dist/$CLI_DEB_BASE/DEBIAN"
 j2 -o "dist/$CLI_DEB_BASE/DEBIAN/control" assets/deb/control.j2
 cp -r dist/daemon/* "dist/$CLI_DEB_BASE/opt/chia/"
+
 ln -s ../../opt/chia/chia "dist/$CLI_DEB_BASE/usr/bin/chia"
 dpkg-deb --build --root-owner-group "dist/$CLI_DEB_BASE"
 # CLI only .deb done
 
 cp -r dist/daemon ../chia-blockchain-gui/packages/gui
 
 # Change to the gui package
```

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_linux_rpm-1-gui.sh` & `chia-blockchain-2.0.0b3/build_scripts/build_linux_rpm-1-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_linux_rpm-2-installer.sh` & `chia-blockchain-2.0.0b3/build_scripts/build_linux_rpm-2-installer.sh`

 * *Files 8% similar despite different names*

```diff
@@ -38,19 +38,25 @@
 pyinstaller --log-level=INFO "$SPEC_FILE"
 LAST_EXIT_CODE=$?
 if [ "$LAST_EXIT_CODE" -ne 0 ]; then
 	echo >&2 "pyinstaller failed!"
 	exit $LAST_EXIT_CODE
 fi
 
+# Creates a directory of licenses
+echo "Building pip and NPM license directory"
+pwd
+bash ./build_license_directory.sh
+
 # Builds CLI only rpm
 CLI_RPM_BASE="chia-blockchain-cli-$CHIA_INSTALLER_VERSION-1.$REDHAT_PLATFORM"
 mkdir -p "dist/$CLI_RPM_BASE/opt/chia"
 mkdir -p "dist/$CLI_RPM_BASE/usr/bin"
 cp -r dist/daemon/* "dist/$CLI_RPM_BASE/opt/chia/"
+
 ln -s ../../opt/chia/chia "dist/$CLI_RPM_BASE/usr/bin/chia"
 # This is built into the base build image
 # shellcheck disable=SC1091
 . /etc/profile.d/rvm.sh
 rvm use ruby-3
 # /usr/lib64/libcrypt.so.1 is marked as a dependency specifically because newer versions of fedora bundle
 # libcrypt.so.2 by default, and the libxcrypt-compat package needs to be installed for the other version
@@ -62,17 +68,15 @@
   --license Apache-2.0 \
   --version "$CHIA_INSTALLER_VERSION" \
   --architecture "$REDHAT_PLATFORM" \
   --description "Chia is a modern cryptocurrency built from scratch, designed to be efficient, decentralized, and secure." \
   --depends /usr/lib64/libcrypt.so.1 \
   .
 # CLI only rpm done
-
 cp -r dist/daemon ../chia-blockchain-gui/packages/gui
-
 # Change to the gui package
 cd ../chia-blockchain-gui/packages/gui || exit 1
 
 # sets the version for chia-blockchain in package.json
 cp package.json package.json.orig
 jq --arg VER "$CHIA_INSTALLER_VERSION" '.version=$VER' package.json > temp.json && mv temp.json package.json
```

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_macos-1-gui.sh` & `chia-blockchain-2.0.0b3/build_scripts/build_macos-1-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_macos-2-installer.sh` & `chia-blockchain-2.0.0b3/build_scripts/build_macos-2-installer.sh`

 * *Files 15% similar despite different names*

```diff
@@ -28,16 +28,22 @@
 SPEC_FILE=$(python -c 'import chia; print(chia.PYINSTALLER_SPEC_PATH)')
 pyinstaller --log-level=INFO "$SPEC_FILE"
 LAST_EXIT_CODE=$?
 if [ "$LAST_EXIT_CODE" -ne 0 ]; then
 	echo >&2 "pyinstaller failed!"
 	exit $LAST_EXIT_CODE
 fi
-cp -r dist/daemon ../chia-blockchain-gui/packages/gui
 
+
+# Creates a directory of licenses
+echo "Building pip and NPM license directory"
+pwd
+bash ./build_license_directory.sh
+
+cp -r dist/daemon ../chia-blockchain-gui/packages/gui
 # Change to the gui package
 cd ../chia-blockchain-gui/packages/gui || exit 1
 
 # sets the version for chia-blockchain in package.json
 brew install jq
 cp package.json package.json.orig
 jq --arg VER "$CHIA_INSTALLER_VERSION" '.version=$VER' package.json > temp.json && mv temp.json package.json
@@ -48,14 +54,16 @@
   OPT_ARCH="--arm64"
 fi
 PRODUCT_NAME="Chia"
 if [ "$NOTARIZE" == true ]; then
 	echo "Setting credentials for signing"
 	export CSC_LINK=$APPLE_DEV_ID_APP
 	export CSC_KEY_PASSWORD=$APPLE_DEV_ID_APP_PASS
+	export PUBLISH_FOR_PULL_REQUEST=true
+	export CSC_FOR_PULL_REQUEST=true
 else
 	echo "Not on ci or no secrets so not signing"
 	export CSC_IDENTITY_AUTO_DISCOVERY=false
 fi
 echo electron-builder build --mac "${OPT_ARCH}" --config.productName="$PRODUCT_NAME"
 electron-builder build --mac "${OPT_ARCH}" --config.productName="$PRODUCT_NAME"
 LAST_EXIT_CODE=$?
```

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_windows-1-gui.ps1` & `chia-blockchain-2.0.0b3/build_scripts/build_windows-1-gui.ps1`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/build_windows-2-installer.ps1` & `chia-blockchain-2.0.0b3/build_scripts/build_windows-2-installer.ps1`

 * *Files 4% similar despite different names*

```diff
@@ -17,14 +17,19 @@
 Write-Output "   ---"
 Write-Output "Use pyinstaller to create chia .exe's"
 Write-Output "   ---"
 $SPEC_FILE = (python -c 'import chia; print(chia.PYINSTALLER_SPEC_PATH)') -join "`n"
 pyinstaller --log-level INFO $SPEC_FILE
 
 Write-Output "   ---"
+Write-Output "Creating a directory of licenses from pip and npm packages"
+Write-Output "   ---"
+bash ./build_win_license_dir.sh
+
+Write-Output "   ---"
 Write-Output "Copy chia executables to chia-blockchain-gui\"
 Write-Output "   ---"
 Copy-Item "dist\daemon" -Destination "..\chia-blockchain-gui\packages\gui\" -Recurse
 
 Write-Output "   ---"
 Write-Output "Setup npm packager"
 Write-Output "   ---"
```

### Comparing `chia-blockchain-2.0.0b1/build_scripts/check_dependency_artifacts.py` & `chia-blockchain-2.0.0b3/build_scripts/check_dependency_artifacts.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/clean-runner.sh` & `chia-blockchain-2.0.0b3/build_scripts/clean-runner.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/installer-version.py` & `chia-blockchain-2.0.0b3/build_scripts/installer-version.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/build_scripts/npm_linux/package-lock.json` & `chia-blockchain-2.0.0b3/build_scripts/npm_linux/package-lock.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9865572563733201%*

 * *Differences: {"'dependencies'": "{'@electron/universal': {'version': '1.3.4', 'resolved': "*

 * *                   "'https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz', "*

 * *                   "'integrity': "*

 * *                   "'sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==', "*

 * *                   "'requires': {'dir-compare': '^3.0.0', '@electron/asar': '^3.2.1', delete: "*

 * *                   "['asar']}, 'dependencies': OrderedDict([('@malept/cross-spawn-promi []*

```diff
@@ -79,27 +79,148 @@
             "requires": {
                 "ajv": "^6.12.0",
                 "ajv-keywords": "^3.4.1"
             },
             "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
             "version": "2.6.5"
         },
+        "@electron/asar": {
+            "integrity": "sha512-lykfY3TJRRWFeTxccEKdf1I6BLl2Plw81H0bbp4Fc5iEc67foDCa5pjJQULVgo0wF+Dli75f3xVcdb/67FFZ/g==",
+            "requires": {
+                "chromium-pickle-js": "^0.2.0",
+                "commander": "^5.0.0",
+                "glob": "^7.1.6",
+                "minimatch": "^3.0.4"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/asar/-/asar-3.2.4.tgz",
+            "version": "3.2.4"
+        },
+        "@electron/notarize": {
+            "integrity": "sha512-9oRzT56rKh5bspk3KpAVF8lPKHYQrBnRwcgiOeR0hdilVEQmszDaAu0IPCPrwwzJN0ugNs0rRboTreHMt/6mBQ==",
+            "requires": {
+                "debug": "^4.1.1",
+                "fs-extra": "^9.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/notarize/-/notarize-1.2.3.tgz",
+            "version": "1.2.3"
+        },
+        "@electron/osx-sign": {
+            "dependencies": {
+                "fs-extra": {
+                    "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+                    "requires": {
+                        "graceful-fs": "^4.2.0",
+                        "jsonfile": "^6.0.1",
+                        "universalify": "^2.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+                    "version": "10.1.0"
+                },
+                "isbinaryfile": {
+                    "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
+                    "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
+                    "version": "4.0.10"
+                }
+            },
+            "integrity": "sha512-xfhdEcIOfAZg7scZ9RQPya1G1lWo8/zMCwUXAulq0SfY7ONIW+b9qGyKdMyuMctNYwllrIS+vmxfijSfjeh97g==",
+            "requires": {
+                "compare-version": "^0.1.2",
+                "debug": "^4.3.4",
+                "fs-extra": "^10.0.0",
+                "isbinaryfile": "^4.0.8",
+                "minimist": "^1.2.6",
+                "plist": "^3.0.5"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/osx-sign/-/osx-sign-1.0.4.tgz",
+            "version": "1.0.4"
+        },
+        "@electron/rebuild": {
+            "dependencies": {
+                "cliui": {
+                    "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+                    "requires": {
+                        "string-width": "^4.2.0",
+                        "strip-ansi": "^6.0.1",
+                        "wrap-ansi": "^7.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+                    "version": "8.0.1"
+                },
+                "fs-extra": {
+                    "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+                    "requires": {
+                        "graceful-fs": "^4.2.0",
+                        "jsonfile": "^6.0.1",
+                        "universalify": "^2.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+                    "version": "10.1.0"
+                },
+                "yargs": {
+                    "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
+                    "requires": {
+                        "cliui": "^8.0.1",
+                        "escalade": "^3.1.1",
+                        "get-caller-file": "^2.0.5",
+                        "require-directory": "^2.1.1",
+                        "string-width": "^4.2.3",
+                        "y18n": "^5.0.5",
+                        "yargs-parser": "^21.1.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
+                    "version": "17.7.2"
+                },
+                "yargs-parser": {
+                    "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
+                    "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
+                    "version": "21.1.1"
+                }
+            },
+            "integrity": "sha512-DH9Ol4JCnHDYVOD0fKWq+Qqbn/0WU1O6QR0mIpMXEVU4YFM4PlaqNC9K36mGShNBxxGFotZCMDrB1wl/iHM12g==",
+            "requires": {
+                "@malept/cross-spawn-promise": "^2.0.0",
+                "chalk": "^4.0.0",
+                "debug": "^4.1.1",
+                "detect-libc": "^2.0.1",
+                "fs-extra": "^10.0.0",
+                "got": "^11.7.0",
+                "node-abi": "^3.0.0",
+                "node-api-version": "^0.1.4",
+                "node-gyp": "^9.0.0",
+                "ora": "^5.1.0",
+                "semver": "^7.3.5",
+                "tar": "^6.0.5",
+                "yargs": "^17.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/rebuild/-/rebuild-3.2.13.tgz",
+            "version": "3.2.13"
+        },
         "@electron/universal": {
-            "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
+            "dependencies": {
+                "@malept/cross-spawn-promise": {
+                    "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+                    "requires": {
+                        "cross-spawn": "^7.0.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
+                    "version": "1.1.1"
+                }
+            },
+            "integrity": "sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==",
             "requires": {
+                "@electron/asar": "^3.2.1",
                 "@malept/cross-spawn-promise": "^1.1.0",
-                "asar": "^3.1.0",
                 "debug": "^4.3.1",
-                "dir-compare": "^2.4.0",
+                "dir-compare": "^3.0.0",
                 "fs-extra": "^9.0.1",
                 "minimatch": "^3.0.4",
                 "plist": "^3.0.4"
             },
-            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
-            "version": "1.2.1"
+            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz",
+            "version": "1.3.4"
         },
         "@gar/promisify": {
             "integrity": "sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==",
             "resolved": "https://registry.npmjs.org/@gar/promisify/-/promisify-1.1.3.tgz",
             "version": "1.1.3"
         },
         "@hutson/parse-repository-url": {
@@ -851,20 +972,20 @@
                 "npmlog": "^6.0.2",
                 "write-file-atomic": "^4.0.1"
             },
             "resolved": "https://registry.npmjs.org/@lerna/write-log-file/-/write-log-file-5.5.2.tgz",
             "version": "5.5.2"
         },
         "@malept/cross-spawn-promise": {
-            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+            "integrity": "sha512-1DpKU0Z5ThltBwjNySMC14g0CkbyhCaz9FkhxqNsZI6uAPJXFS8cMXlBKo26FJ8ZuW6S9GCMcR9IO5k2X5/9Fg==",
             "requires": {
                 "cross-spawn": "^7.0.1"
             },
-            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
-            "version": "1.1.1"
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-2.0.0.tgz",
+            "version": "2.0.0"
         },
         "@malept/flatpak-bundler": {
             "integrity": "sha512-9QOtNffcOF/c1seMCDnjckb3R9WHcG34tky+FHpNKKCW0wc/scYLwMtO+ptyGUfMW0/b/n4qRiALlaFHc9Oj7Q==",
             "requires": {
                 "debug": "^4.1.1",
                 "fs-extra": "^9.0.0",
                 "lodash": "^4.17.15",
@@ -1241,19 +1362,43 @@
             "requires": {
                 "node-addon-api": "^3.2.1",
                 "node-gyp-build": "^4.3.0"
             },
             "resolved": "https://registry.npmjs.org/@parcel/watcher/-/watcher-2.0.4.tgz",
             "version": "2.0.4"
         },
+        "@sindresorhus/is": {
+            "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
+            "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
+            "version": "4.6.0"
+        },
+        "@szmarczak/http-timer": {
+            "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
+            "requires": {
+                "defer-to-connect": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
+            "version": "4.0.6"
+        },
         "@tootallnate/once": {
             "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
             "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
             "version": "2.0.0"
         },
+        "@types/cacheable-request": {
+            "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
+            "requires": {
+                "@types/http-cache-semantics": "*",
+                "@types/keyv": "^3.1.4",
+                "@types/node": "*",
+                "@types/responselike": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
+            "version": "6.0.3"
+        },
         "@types/debug": {
             "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
             "requires": {
                 "@types/ms": "*"
             },
             "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
             "version": "4.1.7"
@@ -1262,29 +1407,32 @@
             "integrity": "sha512-nEnwB++1u5lVDM2UI4c1+5R+FYaKfaAzS4OococimjVm3nQw3TuzH5UNsocrcTBbhnerblyHj4A49qXbIiZdpA==",
             "requires": {
                 "@types/node": "*"
             },
             "resolved": "https://registry.npmjs.org/@types/fs-extra/-/fs-extra-9.0.13.tgz",
             "version": "9.0.13"
         },
-        "@types/glob": {
-            "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
-            "optional": true,
-            "requires": {
-                "@types/minimatch": "*",
-                "@types/node": "*"
-            },
-            "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
-            "version": "7.2.0"
+        "@types/http-cache-semantics": {
+            "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
+            "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
+            "version": "4.0.1"
         },
         "@types/json5": {
             "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
             "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
             "version": "0.0.29"
         },
+        "@types/keyv": {
+            "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
+            "requires": {
+                "@types/node": "*"
+            },
+            "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
+            "version": "3.1.4"
+        },
         "@types/minimatch": {
             "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
             "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
             "version": "3.0.5"
         },
         "@types/minimist": {
             "integrity": "sha512-jhuKLIRrhvCPLqwPcx6INqmKeiA5EWrsCOPhrlFSrbrmU4ZMPjj5Ul/oLCMDO98XRUIwVm78xICz4EPCektzeQ==",
@@ -1293,17 +1441,17 @@
         },
         "@types/ms": {
             "integrity": "sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==",
             "resolved": "https://registry.npmjs.org/@types/ms/-/ms-0.7.31.tgz",
             "version": "0.7.31"
         },
         "@types/node": {
-            "integrity": "sha512-0os9vz6BpGwxGe9LOhgP/ncvYN5Tx1fNcd2TM3rD/aCGBkysb+ZWpXEocG24h6ZzOi13+VB8HndAQFezsSOw1w==",
-            "resolved": "https://registry.npmjs.org/@types/node/-/node-18.8.3.tgz",
-            "version": "18.8.3"
+            "integrity": "sha512-WCuw/o4GSwDGMoonES8rcvwsig77dGCMbZDrZr2x4ZZiNW4P/gcoZXe/0twgtobcTkmg9TuKflxYL/DuwDyJzg==",
+            "resolved": "https://registry.npmjs.org/@types/node/-/node-20.1.7.tgz",
+            "version": "20.1.7"
         },
         "@types/normalize-package-data": {
             "integrity": "sha512-Gj7cI7z+98M282Tqmp2K5EIsoouUEzbBJhQQzDE3jSIRk6r9gsz0oUokqIUR4u1R3dMHo0pDHM7sNOHyhulypw==",
             "resolved": "https://registry.npmjs.org/@types/normalize-package-data/-/normalize-package-data-2.4.1.tgz",
             "version": "2.4.1"
         },
         "@types/parse-json": {
@@ -1317,33 +1465,28 @@
             "requires": {
                 "@types/node": "*",
                 "xmlbuilder": ">=11.0.1"
             },
             "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
             "version": "3.0.2"
         },
+        "@types/responselike": {
+            "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
+            "requires": {
+                "@types/node": "*"
+            },
+            "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
+            "version": "1.0.0"
+        },
         "@types/verror": {
             "integrity": "sha512-NNm+gdePAX1VGvPcGZCDKQZKYSiAWigKhKaz5KF94hG6f2s8de9Ow5+7AbXoeKxL8gavZfk4UquSAygOF2duEQ==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.6.tgz",
             "version": "1.10.6"
         },
-        "@types/yargs": {
-            "integrity": "sha512-aB4y9UDUXTSMxmM4MH+YnuR0g5Cph3FLQBoWoMB21DSvFVAxRVEHEMx3TLh+zUZYMCQtKiqazz0Q4Rre31f/OA==",
-            "requires": {
-                "@types/yargs-parser": "*"
-            },
-            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.11.tgz",
-            "version": "17.0.11"
-        },
-        "@types/yargs-parser": {
-            "integrity": "sha512-iO9ZQHkZxHn4mSakYV0vFHAVDyEOIJQrV2uZ06HxEPcx+mt8swXoZHIbaaJ2crJYFfErySgktuTZ3BeLz+XmFA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.0.tgz",
-            "version": "21.0.0"
-        },
         "JSONStream": {
             "integrity": "sha512-E+iruNOY8VV9s4JEbe1aNEm6MiszPRr/UfcHMz0TQh1BXSxHK+ASV1R6W4HpjBhSeS+54PIsAMCBmwD06LLsqQ==",
             "requires": {
                 "jsonparse": "^1.2.0",
                 "through": ">=2.2.7 <3"
             },
             "resolved": "https://registry.npmjs.org/JSONStream/-/JSONStream-1.3.5.tgz",
@@ -1441,18 +1584,26 @@
         "app-builder-bin": {
             "integrity": "sha512-xwdG0FJPQMe0M0UA4Tz0zEB8rBJTRA5a476ZawAqiBkMv16GRK5xpXThOjMaEOFnZ6zabejjG4J3da0SXG63KA==",
             "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
             "version": "4.0.0"
         },
         "app-builder-lib": {
             "dependencies": {
+                "brace-expansion": {
+                    "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
+                    "requires": {
+                        "balanced-match": "^1.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
+                    "version": "2.0.1"
+                },
                 "ci-info": {
-                    "integrity": "sha512-yH4RezKOGlOhxkmhbeNuC4eYZKAUsEaGtBuBzDDP1eFUKiccDWzBABxBfOx31IDwDIXMTxWuwAxUGModvkbuVw==",
-                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.5.0.tgz",
-                    "version": "3.5.0"
+                    "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+                    "version": "3.8.0"
                 },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
@@ -1463,47 +1614,66 @@
                 "is-ci": {
                     "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
                     "requires": {
                         "ci-info": "^3.2.0"
                     },
                     "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
                     "version": "3.0.1"
+                },
+                "minimatch": {
+                    "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+                    "requires": {
+                        "brace-expansion": "^2.0.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+                    "version": "5.1.6"
+                },
+                "semver": {
+                    "integrity": "sha512-Wvss5ivl8TMRZXXESstBA4uR5iXgEN/VC5/sOcuXdVLzcdkz4HWetIoRfG5gb5X+ij/G9rw9YoGn3QoQ8OCSpw==",
+                    "requires": {
+                        "lru-cache": "^6.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/semver/-/semver-7.5.1.tgz",
+                    "version": "7.5.1"
                 }
             },
-            "integrity": "sha512-Pf5HLmrRaeativDNhB+BxUdnSWIsz8H1eABkn/wvZ3WLNzbvIRvLRrsO9e9jTU10oDebxU/8FZ8InalmJxYCuA==",
+            "integrity": "sha512-EcdqtWvg1LAApKCfyRBukcVkmsa94s2e1VKHjZLpvA9/D14QEt8rHhffYeaA+cH/pVeoNVn2ob735KnfJKEEow==",
             "requires": {
                 "7zip-bin": "~5.1.1",
                 "@develar/schema-utils": "~2.6.5",
-                "@electron/universal": "1.2.1",
+                "@electron/notarize": "^1.2.3",
+                "@electron/osx-sign": "^1.0.4",
+                "@electron/rebuild": "^3.2.13",
+                "@electron/universal": "1.3.4",
                 "@malept/flatpak-bundler": "^0.4.0",
+                "@types/fs-extra": "9.0.13",
                 "async-exit-hook": "^2.0.1",
                 "bluebird-lst": "^1.0.9",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
                 "chromium-pickle-js": "^0.2.0",
                 "debug": "^4.3.4",
-                "ejs": "^3.1.7",
-                "electron-osx-sign": "^0.6.0",
-                "electron-publish": "23.5.0",
+                "ejs": "^3.1.8",
+                "electron-publish": "24.4.0",
                 "form-data": "^4.0.0",
                 "fs-extra": "^10.1.0",
                 "hosted-git-info": "^4.1.0",
                 "is-ci": "^3.0.0",
-                "isbinaryfile": "^4.0.10",
+                "isbinaryfile": "^5.0.0",
                 "js-yaml": "^4.1.0",
                 "lazy-val": "^1.0.5",
-                "minimatch": "^3.1.2",
-                "read-config-file": "6.2.0",
+                "minimatch": "^5.1.1",
+                "read-config-file": "6.3.2",
                 "sanitize-filename": "^1.6.3",
-                "semver": "^7.3.7",
-                "tar": "^6.1.11",
+                "semver": "^7.3.8",
+                "tar": "^6.1.12",
                 "temp-file": "^3.4.0"
             },
-            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "aproba": {
             "integrity": "sha512-lYe4Gx7QT+MKGbDsA+Z+he/Wtef0BiwDOlK/XkBrdfsh9J/jPPXbX0tE9x9cl27Tmu5gg3QUbUrQYa/y+KOHPQ==",
             "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.0.0.tgz",
             "version": "2.0.0"
         },
         "are-we-there-yet": {
@@ -1541,26 +1711,14 @@
             "version": "1.0.1"
         },
         "asap": {
             "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
             "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
             "version": "2.0.6"
         },
-        "asar": {
-            "integrity": "sha512-COdw2ZQvKdFGFxXwX3oYh2/sOsJWJegrdJCGxnN4MZ7IULgRBp9P6665aqj9z1v9VwP4oP1hRBojRDQ//IGgAg==",
-            "requires": {
-                "@types/glob": "^7.1.1",
-                "chromium-pickle-js": "^0.2.0",
-                "commander": "^5.0.0",
-                "glob": "^7.1.6",
-                "minimatch": "^3.0.4"
-            },
-            "resolved": "https://registry.npmjs.org/asar/-/asar-3.2.0.tgz",
-            "version": "3.2.0"
-        },
         "assert-plus": {
             "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
             "version": "1.0.0"
         },
         "astral-regex": {
@@ -1674,49 +1832,30 @@
             "requires": {
                 "base64-js": "^1.3.1",
                 "ieee754": "^1.1.13"
             },
             "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
             "version": "5.7.1"
         },
-        "buffer-alloc": {
-            "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
-            "requires": {
-                "buffer-alloc-unsafe": "^1.1.0",
-                "buffer-fill": "^1.0.0"
-            },
-            "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
-            "version": "1.2.0"
-        },
-        "buffer-alloc-unsafe": {
-            "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
-            "version": "1.1.0"
-        },
         "buffer-equal": {
-            "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
-            "version": "1.0.0"
-        },
-        "buffer-fill": {
-            "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
-            "version": "1.0.0"
+            "integrity": "sha512-QoV3ptgEaQpvVwbXdSO39iqPQTCxSF7A5U99AxbHYqUdCizL/lH2Z0A2y6nbZucxMEOtNyZfG2s6gsVugGpKkg==",
+            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.1.tgz",
+            "version": "1.0.1"
         },
         "buffer-from": {
             "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
             "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
             "version": "1.1.2"
         },
         "builder-util": {
             "dependencies": {
                 "ci-info": {
-                    "integrity": "sha512-yH4RezKOGlOhxkmhbeNuC4eYZKAUsEaGtBuBzDDP1eFUKiccDWzBABxBfOx31IDwDIXMTxWuwAxUGModvkbuVw==",
-                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.5.0.tgz",
-                    "version": "3.5.0"
+                    "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+                    "version": "3.8.0"
                 },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
@@ -1729,45 +1868,44 @@
                     "requires": {
                         "ci-info": "^3.2.0"
                     },
                     "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
                     "version": "3.0.1"
                 }
             },
-            "integrity": "sha512-TYz3sj2NMoG1/524/Je0p0RtEAKKjmTL6z2WQnzU6yM+WU/jHnA2OqX9Q/jys+rKuMy+7MCMdc+G+HrbpKWYSg==",
+            "integrity": "sha512-tONb/GIK1MKa1BcOPHE1naId3o5nj6gdka5kP7yUJh2DOfF+jMq3laiu+UOZH6A7ZtkMtnGNMYFKFTIv408n/A==",
             "requires": {
                 "7zip-bin": "~5.1.1",
                 "@types/debug": "^4.1.6",
-                "@types/fs-extra": "^9.0.11",
                 "app-builder-bin": "4.0.0",
                 "bluebird-lst": "^1.0.9",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
                 "cross-spawn": "^7.0.3",
                 "debug": "^4.3.4",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "http-proxy-agent": "^5.0.0",
-                "https-proxy-agent": "^5.0.0",
+                "https-proxy-agent": "^5.0.1",
                 "is-ci": "^3.0.0",
                 "js-yaml": "^4.1.0",
                 "source-map-support": "^0.5.19",
                 "stat-mode": "^1.0.0",
                 "temp-file": "^3.4.0"
             },
-            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.5.0.tgz",
-            "version": "23.5.0"
+            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "builder-util-runtime": {
-            "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
+            "integrity": "sha512-2rLv/uQD2x+dJ0J3xtsmI12AlRyk7p45TEbE/6o/fbb633e/S3pPgm+ct+JHsoY7r39dKHnGEFk/AASRFdnXmA==",
             "requires": {
                 "debug": "^4.3.4",
                 "sax": "^1.2.4"
             },
-            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
-            "version": "9.1.1"
+            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.2.1.tgz",
+            "version": "9.2.1"
         },
         "builtins": {
             "integrity": "sha512-qwVpFEHNfhYJIzNRBvd2C1kyo6jz3ZSMPyyuR47OPdiKWlbYnZNyDWuyR175qDnAJLiCo5fBBqPb3RiXgWlkOQ==",
             "requires": {
                 "semver": "^7.0.0"
             },
             "resolved": "https://registry.npmjs.org/builtins/-/builtins-5.0.1.tgz",
@@ -1834,14 +1972,43 @@
                 "ssri": "^9.0.0",
                 "tar": "^6.1.11",
                 "unique-filename": "^2.0.0"
             },
             "resolved": "https://registry.npmjs.org/cacache/-/cacache-16.1.3.tgz",
             "version": "16.1.3"
         },
+        "cacheable-lookup": {
+            "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
+            "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
+            "version": "5.0.4"
+        },
+        "cacheable-request": {
+            "dependencies": {
+                "get-stream": {
+                    "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
+                    "requires": {
+                        "pump": "^3.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
+                    "version": "5.2.0"
+                }
+            },
+            "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
+            "requires": {
+                "clone-response": "^1.0.2",
+                "get-stream": "^5.1.0",
+                "http-cache-semantics": "^4.0.0",
+                "keyv": "^4.0.0",
+                "lowercase-keys": "^2.0.0",
+                "normalize-url": "^6.0.1",
+                "responselike": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
+            "version": "7.0.2"
+        },
         "callsites": {
             "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
             "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
             "version": "3.1.0"
         },
         "camelcase": {
             "integrity": "sha512-L28STB170nwWS63UjtlEOE3dldQApaJXZkOI1uMFfzf3rRuPegHaHesyee+YxQ+W6SvRDQV6UrdOdRiR153wJg==",
@@ -1966,14 +2133,22 @@
                 "is-plain-object": "^2.0.4",
                 "kind-of": "^6.0.2",
                 "shallow-clone": "^3.0.0"
             },
             "resolved": "https://registry.npmjs.org/clone-deep/-/clone-deep-4.0.1.tgz",
             "version": "4.0.1"
         },
+        "clone-response": {
+            "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
+            "requires": {
+                "mimic-response": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "cmd-shim": {
             "integrity": "sha512-qkCtZ59BidfEwHltnJwkyVZn+XQojdAySM1D1gSeh11Z4pW1Kpolkyo53L5noc0nrxmIvyFwTmJRo4xs7FFLPw==",
             "requires": {
                 "mkdirp-infer-owner": "^2.0.0"
             },
             "resolved": "https://registry.npmjs.org/cmd-shim/-/cmd-shim-5.0.0.tgz",
             "version": "5.0.0"
@@ -1992,19 +2167,14 @@
             "version": "1.1.4"
         },
         "color-support": {
             "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
             "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
             "version": "1.1.3"
         },
-        "colors": {
-            "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
-            "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
-            "version": "1.0.3"
-        },
         "columnify": {
             "integrity": "sha512-lomjuFZKfM6MSAnV9aCZC9sc0qGbmZdfygNv+nCpqVkSKdCxCklLtd16O0EILGkImHw9ZpHkAnHaB+8Zxq5W6Q==",
             "requires": {
                 "strip-ansi": "^6.0.1",
                 "wcwidth": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/columnify/-/columnify-1.6.0.tgz",
@@ -2073,14 +2243,23 @@
             "requires": {
                 "ini": "^1.3.4",
                 "proto-list": "~1.2.1"
             },
             "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
             "version": "1.1.13"
         },
+        "config-file-ts": {
+            "integrity": "sha512-cKSW0BfrSaAUnxpgvpXPLaaW/umg4bqg4k3GO1JqlRfpx+d5W0GDXznCMkWotJQek5Mmz1MJVChQnz3IVaeMZQ==",
+            "requires": {
+                "glob": "^7.1.6",
+                "typescript": "^4.0.2"
+            },
+            "resolved": "https://registry.npmjs.org/config-file-ts/-/config-file-ts-0.2.4.tgz",
+            "version": "0.2.4"
+        },
         "console-control-strings": {
             "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ==",
             "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
             "version": "1.1.0"
         },
         "conventional-changelog-angular": {
             "integrity": "sha512-i/gipMxs7s8L/QeuavPF2hLnJgH6pEZAttySB6aiQLWcX3puWDL3ACVmvBhJGxnAy52Qc15ua26BufY6KpmrVA==",
@@ -2253,27 +2432,47 @@
             "requires": {
                 "decamelize": "^1.1.0",
                 "map-obj": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/decamelize-keys/-/decamelize-keys-1.1.0.tgz",
             "version": "1.1.0"
         },
+        "decompress-response": {
+            "dependencies": {
+                "mimic-response": {
+                    "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
+                    "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
+                    "version": "3.1.0"
+                }
+            },
+            "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
+            "requires": {
+                "mimic-response": "^3.1.0"
+            },
+            "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
+            "version": "6.0.0"
+        },
         "dedent": {
             "integrity": "sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==",
             "resolved": "https://registry.npmjs.org/dedent/-/dedent-0.7.0.tgz",
             "version": "0.7.0"
         },
         "defaults": {
             "integrity": "sha512-s82itHOnYrN0Ib8r+z7laQz3sdE+4FP3d9Q7VLO7U+KRT+CR0GsWuyHxzdAY82I7cXv0G/twrqomTJLOssO5HA==",
             "requires": {
                 "clone": "^1.0.2"
             },
             "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.3.tgz",
             "version": "1.0.3"
         },
+        "defer-to-connect": {
+            "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
+            "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "define-lazy-prop": {
             "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
             "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
             "version": "2.0.0"
         },
         "delayed-stream": {
             "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
@@ -2296,51 +2495,36 @@
             "version": "2.3.1"
         },
         "detect-indent": {
             "integrity": "sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==",
             "resolved": "https://registry.npmjs.org/detect-indent/-/detect-indent-6.1.0.tgz",
             "version": "6.1.0"
         },
+        "detect-libc": {
+            "integrity": "sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==",
+            "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "dezalgo": {
             "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
             "requires": {
                 "asap": "^2.0.0",
                 "wrappy": "1"
             },
             "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
             "version": "1.0.4"
         },
         "dir-compare": {
-            "dependencies": {
-                "commander": {
-                    "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
-                    "requires": {
-                        "graceful-readlink": ">= 1.0.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
-                    "version": "2.9.0"
-                },
-                "minimatch": {
-                    "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
-                    "requires": {
-                        "brace-expansion": "^1.1.7"
-                    },
-                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
-                    "version": "3.0.4"
-                }
-            },
-            "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
+            "integrity": "sha512-J7/et3WlGUCxjdnD3HAAzQ6nsnc0WL6DD7WcwJb7c39iH1+AWfg+9OqzJNaI6PkBwBvm1mhZNL9iY/nRiZXlPg==",
             "requires": {
-                "buffer-equal": "1.0.0",
-                "colors": "1.0.3",
-                "commander": "2.9.0",
-                "minimatch": "3.0.4"
+                "buffer-equal": "^1.0.0",
+                "minimatch": "^3.0.4"
             },
-            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
-            "version": "2.4.0"
+            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-3.3.0.tgz",
+            "version": "3.3.0"
         },
         "dir-glob": {
             "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
             "requires": {
                 "path-type": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
@@ -2363,26 +2547,26 @@
                     "requires": {
                         "safer-buffer": ">= 2.1.2 < 3.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
                     "version": "0.6.3"
                 }
             },
-            "integrity": "sha512-TqIV0rdliw7FZ0DqY88FyPBH+q/Bp+yCPIhdYVraQxYMcaCNu7G3ZizApfEpCvoobtE6MY06/u91I9M7+gGYkw==",
+            "integrity": "sha512-p5z9Cx539GSBYb+b09Z+hMhuBTh/BrI71VRg4rgF6f2xtIRK/YlTGVS/O08k5OojoyhZcpS7JXxDVSmQoWgiiQ==",
             "requires": {
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
                 "dmg-license": "^1.0.11",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "iconv-lite": "^0.6.2",
                 "js-yaml": "^4.1.0"
             },
-            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "dmg-license": {
             "integrity": "sha512-ZdzmqwKmECOWJpqefloC5OJy1+WZBBse5+MR88z9g9Zn4VY+WYUkAyojmhzJckH5YbbZGcYIuGAkY5/Ys5OM2Q==",
             "optional": true,
             "requires": {
                 "@types/plist": "^3.0.1",
                 "@types/verror": "^1.10.3",
@@ -2416,28 +2600,38 @@
         },
         "duplexer": {
             "integrity": "sha512-jtD6YG370ZCIi/9GTaJKQxWTZD045+4R4hTk/x1UyoqadyJ9x9CgSi1RlVDQF8U2sxLLSnFkCaMihqljHIWgMg==",
             "resolved": "https://registry.npmjs.org/duplexer/-/duplexer-0.1.2.tgz",
             "version": "0.1.2"
         },
         "ejs": {
-            "integrity": "sha512-/sXZeMlhS0ArkfX2Aw780gJzXSMPnKjtspYZv+f3NiKLlubezAHDU5+9xz6gd3/NhG3txQCo6xlglmTS+oTGEQ==",
+            "integrity": "sha512-rC+QVNMJWv+MtPgkt0y+0rVEIdbtxVADApW9JXrUVlzHetgcyczP/E7DJmWJ4fJCZF2cPcBk0laWO9ZHMG3DmQ==",
             "requires": {
                 "jake": "^10.8.5"
             },
-            "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.8.tgz",
-            "version": "3.1.8"
+            "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.9.tgz",
+            "version": "3.1.9"
         },
         "electron-builder": {
             "dependencies": {
                 "ci-info": {
                     "integrity": "sha512-xmDt/QIAdeZ9+nfdPsaBCpMvHNLFiLdjj59qjqn+6iPe6YmHGQ35sBnQ8uslRBXFmXkiZQOJRjvQeoGppoTjjg==",
                     "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.3.2.tgz",
                     "version": "3.3.2"
                 },
+                "cliui": {
+                    "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+                    "requires": {
+                        "string-width": "^4.2.0",
+                        "strip-ansi": "^6.0.1",
+                        "wrap-ansi": "^7.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+                    "version": "8.0.1"
+                },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
@@ -2449,112 +2643,75 @@
                     "requires": {
                         "ci-info": "^3.2.0"
                     },
                     "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
                     "version": "3.0.1"
                 },
                 "yargs": {
-                    "integrity": "sha512-t6YAJcxDkNX7NFYiVtKvWUz8l+PaKTLiL63mJYWR2GnHq2gjEWISzsLp9wg3aY36dY1j+gfIEL3pIF+XlJJfbA==",
+                    "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
                     "requires": {
-                        "cliui": "^7.0.2",
+                        "cliui": "^8.0.1",
                         "escalade": "^3.1.1",
                         "get-caller-file": "^2.0.5",
                         "require-directory": "^2.1.1",
                         "string-width": "^4.2.3",
                         "y18n": "^5.0.5",
-                        "yargs-parser": "^21.0.0"
+                        "yargs-parser": "^21.1.1"
                     },
-                    "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.5.1.tgz",
-                    "version": "17.5.1"
+                    "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
+                    "version": "17.7.2"
                 },
                 "yargs-parser": {
                     "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
                     "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
                     "version": "21.1.1"
                 }
             },
-            "integrity": "sha512-SWTlf9jqbSa/UFDy1xcaMLIAL39TMd1PPYIgDN8bnfzJntMKEd16qguKsAxfW/kEKcPHLCVh69JyS1GbQ4sROQ==",
+            "integrity": "sha512-D5INxodxaUIJgEX6p/fqBd8wQNS8XRAToNIJ9SQC+taNS5D73ZsjLuXiRraFGCB0cVk9KeKhEkdEOH5AaVya4g==",
             "requires": {
-                "@types/yargs": "^17.0.1",
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "dmg-builder": "23.5.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "dmg-builder": "24.4.0",
+                "fs-extra": "^10.1.0",
                 "is-ci": "^3.0.0",
                 "lazy-val": "^1.0.5",
-                "read-config-file": "6.2.0",
-                "simple-update-notifier": "^1.0.7",
-                "yargs": "^17.5.1"
+                "read-config-file": "6.3.2",
+                "simple-update-notifier": "^1.1.0",
+                "yargs": "^17.6.2"
             },
-            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.5.1.tgz",
-            "version": "23.5.1"
-        },
-        "electron-osx-sign": {
-            "dependencies": {
-                "debug": {
-                    "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-                    "requires": {
-                        "ms": "2.0.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-                    "version": "2.6.9"
-                },
-                "isbinaryfile": {
-                    "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
-                    "requires": {
-                        "buffer-alloc": "^1.2.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
-                    "version": "3.0.3"
-                },
-                "ms": {
-                    "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
-                    "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-                    "version": "2.0.0"
-                }
-            },
-            "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
-            "requires": {
-                "bluebird": "^3.5.0",
-                "compare-version": "^0.1.2",
-                "debug": "^2.6.8",
-                "isbinaryfile": "^3.0.2",
-                "minimist": "^1.2.0",
-                "plist": "^3.0.1"
-            },
-            "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
-            "version": "0.6.0"
+            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "electron-publish": {
             "dependencies": {
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
                     "version": "10.1.0"
                 }
             },
-            "integrity": "sha512-dY/bAN5tIjEPX1AV5FK9TXKKoGGalGb53SgGbhiII3o+WLzK+4vew6rrmChBTwELP/q8r4a89X+slTDG/iPdww==",
+            "integrity": "sha512-U3mnVSxIfNrLW7ZnwiedFhcLf6ExPFXgAsx89WpfQFsV4gFAt/LG+H74p0m9NSvsLXiZuF82yXoxi7Ou8GHq4Q==",
             "requires": {
                 "@types/fs-extra": "^9.0.11",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "fs-extra": "^10.0.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "fs-extra": "^10.1.0",
                 "lazy-val": "^1.0.5",
                 "mime": "^2.5.2"
             },
-            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.5.0.tgz",
-            "version": "23.5.0"
+            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "emoji-regex": {
             "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
             "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
             "version": "8.0.0"
         },
         "encoding": {
@@ -2708,20 +2865,20 @@
                     "requires": {
                         "balanced-match": "^1.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
                     "version": "2.0.1"
                 },
                 "minimatch": {
-                    "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
+                    "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
                     "requires": {
                         "brace-expansion": "^2.0.1"
                     },
-                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
-                    "version": "5.1.0"
+                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+                    "version": "5.1.6"
                 }
             },
             "integrity": "sha512-w1cEuf3S+DrLCQL7ET6kz+gmlJdbq9J7yXCSjK/OZCPA+qEN1WyF4ZAf0YYJa4/shHJra2t/d/r8SV4Ji+x+8Q==",
             "requires": {
                 "minimatch": "^5.0.1"
             },
             "resolved": "https://registry.npmjs.org/filelist/-/filelist-1.0.4.tgz",
@@ -2977,24 +3134,37 @@
                 "ignore": "^5.2.0",
                 "merge2": "^1.4.1",
                 "slash": "^3.0.0"
             },
             "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
             "version": "11.1.0"
         },
+        "got": {
+            "integrity": "sha512-6tfZ91bOr7bOXnK7PRDCGBLa1H4U080YHNaAQ2KsMGlLEzRbk44nsZF2E1IeRc3vtJHPVbKCYgdFbaGO2ljd8g==",
+            "requires": {
+                "@sindresorhus/is": "^4.0.0",
+                "@szmarczak/http-timer": "^4.0.5",
+                "@types/cacheable-request": "^6.0.1",
+                "@types/responselike": "^1.0.0",
+                "cacheable-lookup": "^5.0.3",
+                "cacheable-request": "^7.0.2",
+                "decompress-response": "^6.0.0",
+                "http2-wrapper": "^1.0.0-beta.5.2",
+                "lowercase-keys": "^2.0.0",
+                "p-cancelable": "^2.0.0",
+                "responselike": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/got/-/got-11.8.6.tgz",
+            "version": "11.8.6"
+        },
         "graceful-fs": {
             "integrity": "sha512-NtNxqUcXgpW2iMrfqSfR73Glt39K+BLwWsPs94yR63v45T0Wbej7eRmL5cWfwEgqXnmjQp3zaJTshdRW/qC2ZQ==",
             "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.9.tgz",
             "version": "4.2.9"
         },
-        "graceful-readlink": {
-            "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
-            "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
-            "version": "1.0.1"
-        },
         "handlebars": {
             "integrity": "sha512-aAcXm5OAfE/8IXkcZvCepKU3VzW1/39Fb5ZuqMtgI/hT8X2YgoMvBY5dLhq/cpOvw7Lk1nK/UF71aLG/ZnVYRA==",
             "requires": {
                 "minimist": "^1.2.5",
                 "neo-async": "^2.6.0",
                 "source-map": "^0.6.1",
                 "uglify-js": "^3.1.4",
@@ -3031,36 +3201,52 @@
             "requires": {
                 "lru-cache": "^6.0.0"
             },
             "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
             "version": "4.1.0"
         },
         "http-cache-semantics": {
-            "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
-            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
-            "version": "4.1.0"
+            "integrity": "sha512-er295DKPVsV82j5kw1Gjt+ADA/XYHsajl82cGNQG2eyoPkvgUhX+nDIyelzhIWbbsXP39EHcI6l5tYs2FYqYXQ==",
+            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.1.tgz",
+            "version": "4.1.1"
         },
         "http-proxy-agent": {
             "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
             "requires": {
                 "@tootallnate/once": "2",
                 "agent-base": "6",
                 "debug": "4"
             },
             "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "http2-wrapper": {
+            "dependencies": {
+                "quick-lru": {
+                    "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
+                    "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
+                    "version": "5.1.1"
+                }
+            },
+            "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
+            "requires": {
+                "quick-lru": "^5.1.1",
+                "resolve-alpn": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "https-proxy-agent": {
-            "integrity": "sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==",
+            "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
             "requires": {
                 "agent-base": "6",
                 "debug": "4"
             },
-            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz",
-            "version": "5.0.0"
+            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
+            "version": "5.0.1"
         },
         "human-signals": {
             "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
             "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
             "version": "2.1.0"
         },
         "humanize-ms": {
@@ -3382,52 +3568,57 @@
         },
         "isarray": {
             "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
             "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
             "version": "1.0.0"
         },
         "isbinaryfile": {
-            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
-            "version": "4.0.10"
+            "integrity": "sha512-UDdnyGvMajJUWCkib7Cei/dvyJrrvo4FIrsvSFWdPpXSUorzXrDJ0S+X5Q4ZlasfPjca4yqCNNsjbCeiy8FFeg==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-5.0.0.tgz",
+            "version": "5.0.0"
         },
         "isexe": {
             "integrity": "sha1-6PvzdNxVb/iUehDcsFctYz8s+hA=",
             "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
             "version": "2.0.0"
         },
         "isobject": {
             "integrity": "sha512-WhB9zCku7EGTj/HQQRz5aUQEUeoQZH2bWcltRErOpymJ4boYE6wL9Tbr23krRPSZ+C5zqNSrSw+Cc7sZZ4b7vg==",
             "resolved": "https://registry.npmjs.org/isobject/-/isobject-3.0.1.tgz",
             "version": "3.0.1"
         },
         "jake": {
-            "integrity": "sha512-sVpxYeuAhWt0OTWITwT98oyV0GsXyMlXCF+3L1SuafBVUIr/uILGRB+NqwkzhgXKvoJpDIpQvqkUALgdmQsQxw==",
+            "integrity": "sha512-G43Ub9IYEFfu72sua6rzooi8V8Gz2lkfk48rW20vEWCGizeaEPlKB1Kh8JIA84yQbiAEfqlPmSpGgCKKxH3rDA==",
             "requires": {
                 "async": "^3.2.3",
                 "chalk": "^4.0.2",
-                "filelist": "^1.0.1",
-                "minimatch": "^3.0.4"
+                "filelist": "^1.0.4",
+                "minimatch": "^3.1.2"
             },
-            "resolved": "https://registry.npmjs.org/jake/-/jake-10.8.5.tgz",
-            "version": "10.8.5"
+            "resolved": "https://registry.npmjs.org/jake/-/jake-10.8.6.tgz",
+            "version": "10.8.6"
         },
         "js-tokens": {
             "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
             "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
             "version": "4.0.0"
         },
         "js-yaml": {
             "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
             "requires": {
                 "argparse": "^2.0.1"
             },
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "json-buffer": {
+            "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
+            "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
+            "version": "3.0.1"
+        },
         "json-parse-better-errors": {
             "integrity": "sha512-mrqyZKfX5EhL7hvqcV6WG1yYjnjeuYDzDhhcAAUrq8Po85NBQBJP+ZDUT75qZQ98IkUoBqdkExkukOU7Ts2wrw==",
             "resolved": "https://registry.npmjs.org/json-parse-better-errors/-/json-parse-better-errors-1.0.2.tgz",
             "version": "1.0.2"
         },
         "json-parse-even-better-errors": {
             "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
@@ -3446,17 +3637,17 @@
         },
         "json-stringify-safe": {
             "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
             "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
             "version": "5.0.1"
         },
         "json5": {
-            "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
-            "version": "2.2.1"
+            "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+            "version": "2.2.3"
         },
         "jsonc-parser": {
             "integrity": "sha512-fQzRfAbIBnR0IQvftw9FJveWiHp72Fg20giDrHz6TdfB12UH/uue0D3hm57UB5KgAVuniLMCaS8P1IMj9NR7cA==",
             "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.0.0.tgz",
             "version": "3.0.0"
         },
         "jsonfile": {
@@ -3479,14 +3670,22 @@
             "version": "5.1.1"
         },
         "just-diff-apply": {
             "integrity": "sha512-AAV5Jw7tsniWwih8Ly3fXxEZ06y+6p5TwQMsw0dzZ/wPKilzyDgdAnL0Ug4NNIquPUOh1vfFWEHbmXUqM5+o8g==",
             "resolved": "https://registry.npmjs.org/just-diff-apply/-/just-diff-apply-5.4.1.tgz",
             "version": "5.4.1"
         },
+        "keyv": {
+            "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
+            "requires": {
+                "json-buffer": "3.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
+            "version": "4.5.2"
+        },
         "kind-of": {
             "integrity": "sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==",
             "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-6.0.3.tgz",
             "version": "6.0.3"
         },
         "lazy-val": {
             "integrity": "sha512-0/BnGCCfyUMkBpeDgWihanIAF9JmZhHBgUhEqzvf+adhNGLoP6TaiI5oF8oyb3I45P+PcnrqihSf01M0l0G5+Q==",
@@ -3652,14 +3851,19 @@
             "requires": {
                 "chalk": "^4.1.0",
                 "is-unicode-supported": "^0.1.0"
             },
             "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "lowercase-keys": {
+            "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
+            "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
+            "version": "2.0.0"
+        },
         "lru-cache": {
             "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
             "requires": {
                 "yallist": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
             "version": "6.0.0"
@@ -3833,14 +4037,19 @@
             "version": "2.1.35"
         },
         "mimic-fn": {
             "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
             "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
             "version": "2.1.0"
         },
+        "mimic-response": {
+            "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
+            "version": "1.0.1"
+        },
         "min-indent": {
             "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
             "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
             "version": "1.0.1"
         },
         "minimatch": {
             "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
@@ -3989,19 +4198,35 @@
             "version": "0.6.3"
         },
         "neo-async": {
             "integrity": "sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==",
             "resolved": "https://registry.npmjs.org/neo-async/-/neo-async-2.6.2.tgz",
             "version": "2.6.2"
         },
+        "node-abi": {
+            "integrity": "sha512-zNy02qivjjRosswoYmPi8hIKJRr8MpQyeKT6qlcq/OnOgA3Rhoae+IYOqsM9V5+JnHWmxKnWOT2GxvtqdtOCXA==",
+            "requires": {
+                "semver": "^7.3.5"
+            },
+            "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.40.0.tgz",
+            "version": "3.40.0"
+        },
         "node-addon-api": {
             "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-3.2.1.tgz",
             "version": "3.2.1"
         },
+        "node-api-version": {
+            "integrity": "sha512-KGXihXdUChwJAOHO53bv9/vXcLmdUsZ6jIptbvYvkpKfth+r7jw44JkVxQFA3kX5nQjzjmGu1uAu/xNNLNlI5g==",
+            "requires": {
+                "semver": "^7.3.5"
+            },
+            "resolved": "https://registry.npmjs.org/node-api-version/-/node-api-version-0.1.4.tgz",
+            "version": "0.1.4"
+        },
         "node-fetch": {
             "integrity": "sha512-ZjMPFEfVx5j+y2yF35Kzx5sF7kDzxuDj6ziH4FFbOp87zKDZNx8yExJIb05OGF4Nlt9IHFIMBkRl41VdvcNdbQ==",
             "requires": {
                 "whatwg-url": "^5.0.0"
             },
             "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.7.tgz",
             "version": "2.6.7"
@@ -4048,14 +4273,19 @@
             "version": "3.0.3"
         },
         "normalize-path": {
             "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
             "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
             "version": "3.0.0"
         },
+        "normalize-url": {
+            "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
+            "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
+            "version": "6.1.0"
+        },
         "npm-bundled": {
             "integrity": "sha512-x5DHup0SuyQcmL3s7Rx/YQ8sbw/Hzg0rj48eN0dV7hf5cmQq5PXIeioroH3raV1QC1yh3uTYuMThvEQF3iKgGQ==",
             "requires": {
                 "npm-normalize-package-bin": "^1.0.1"
             },
             "resolved": "https://registry.npmjs.org/npm-bundled/-/npm-bundled-1.1.2.tgz",
             "version": "1.1.2"
@@ -4435,14 +4665,19 @@
             "version": "5.4.1"
         },
         "os-tmpdir": {
             "integrity": "sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==",
             "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
             "version": "1.0.2"
         },
+        "p-cancelable": {
+            "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
+            "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
+            "version": "2.1.1"
+        },
         "p-finally": {
             "integrity": "sha512-LICb2p9CB7FS+0eR1oqWnHhp0FljGLZCWBE9aix0Uye9W8LTQPwMTYVGWQWIw9RdQiDg4+epXQODwIYJtSJaow==",
             "resolved": "https://registry.npmjs.org/p-finally/-/p-finally-1.0.0.tgz",
             "version": "1.0.0"
         },
         "p-limit": {
             "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
@@ -4712,18 +4947,27 @@
             "version": "1.2.4"
         },
         "protocols": {
             "integrity": "sha512-/XJ368cyBJ7fzLMwLKv1e4vLxOju2MNAIokcr7meSaNcVbWz/CPcW22cP04mwxOErdA5mwjA8Q6w/cdAQxVn7Q==",
             "resolved": "https://registry.npmjs.org/protocols/-/protocols-2.0.1.tgz",
             "version": "2.0.1"
         },
+        "pump": {
+            "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
+            "requires": {
+                "end-of-stream": "^1.1.0",
+                "once": "^1.3.1"
+            },
+            "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
+            "version": "3.0.0"
+        },
         "punycode": {
-            "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
-            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
-            "version": "2.1.1"
+            "integrity": "sha512-rRV+zQD8tVFys26lAGR9WUuS4iUAngJScM+ZRSKtvl5tKeZ2t5bvdNFdNHBW9FWR4guGHlgmsZ1G7BSm2wTbuA==",
+            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.0.tgz",
+            "version": "2.3.0"
         },
         "q": {
             "integrity": "sha512-kV/CThkXo6xyFEZUugw/+pIOywXcDbFYgSct5cT3gqlbkBE1SJdwy6UQoZvodiWF/ckQLZyDE/Bu1M6gVu5lVw==",
             "resolved": "https://registry.npmjs.org/q/-/q-1.5.1.tgz",
             "version": "1.5.1"
         },
         "queue-microtask": {
@@ -4746,24 +4990,25 @@
         },
         "read-cmd-shim": {
             "integrity": "sha512-kEmDUoYf/CDy8yZbLTmhB1X9kkjf9Q80PCNsDMb7ufrGd6zZSQA1+UyjrO+pZm5K/S4OXCWJeiIt1JA8kAsa6g==",
             "resolved": "https://registry.npmjs.org/read-cmd-shim/-/read-cmd-shim-3.0.1.tgz",
             "version": "3.0.1"
         },
         "read-config-file": {
-            "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
+            "integrity": "sha512-M80lpCjnE6Wt6zb98DoW8WHR09nzMSpu8XHtPkiTHrJ5Az9CybfeQhTJ8D7saeBHpGhLPIVyA8lcL6ZmdKwY6Q==",
             "requires": {
+                "config-file-ts": "^0.2.4",
                 "dotenv": "^9.0.2",
                 "dotenv-expand": "^5.1.0",
                 "js-yaml": "^4.1.0",
                 "json5": "^2.2.0",
                 "lazy-val": "^1.0.4"
             },
-            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
-            "version": "6.2.0"
+            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.3.2.tgz",
+            "version": "6.3.2"
         },
         "read-package-json": {
             "dependencies": {
                 "brace-expansion": {
                     "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
                     "requires": {
                         "balanced-match": "^1.0.0"
@@ -5014,27 +5259,40 @@
                 "is-core-module": "^2.9.0",
                 "path-parse": "^1.0.7",
                 "supports-preserve-symlinks-flag": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
             "version": "1.22.1"
         },
+        "resolve-alpn": {
+            "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
+            "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
+            "version": "1.2.1"
+        },
         "resolve-cwd": {
             "integrity": "sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==",
             "requires": {
                 "resolve-from": "^5.0.0"
             },
             "resolved": "https://registry.npmjs.org/resolve-cwd/-/resolve-cwd-3.0.0.tgz",
             "version": "3.0.0"
         },
         "resolve-from": {
             "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
             "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "responselike": {
+            "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
+            "requires": {
+                "lowercase-keys": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "restore-cursor": {
             "integrity": "sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==",
             "requires": {
                 "onetime": "^5.1.0",
                 "signal-exit": "^3.0.2"
             },
             "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-3.1.0.tgz",
@@ -5145,20 +5403,20 @@
             "dependencies": {
                 "semver": {
                     "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
                     "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
                     "version": "7.0.0"
                 }
             },
-            "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
+            "integrity": "sha512-VpsrsJSUcJEseSbMHkrsrAVSdvVS5I96Qo1QAQ4FxQ9wXFcB+pjj7FB7/us9+GcgfW4ziHtYMc1J0PLczb55mg==",
             "requires": {
                 "semver": "~7.0.0"
             },
-            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
-            "version": "1.0.7"
+            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.1.0.tgz",
+            "version": "1.1.0"
         },
         "slash": {
             "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
             "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
             "version": "3.0.0"
         },
         "slice-ansi": {
@@ -5346,25 +5604,32 @@
         },
         "supports-preserve-symlinks-flag": {
             "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
             "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
             "version": "1.0.0"
         },
         "tar": {
-            "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
+            "dependencies": {
+                "minipass": {
+                    "integrity": "sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==",
+                    "resolved": "https://registry.npmjs.org/minipass/-/minipass-5.0.0.tgz",
+                    "version": "5.0.0"
+                }
+            },
+            "integrity": "sha512-/zKt9UyngnxIT/EAGYuxaMYgOIJiP81ab9ZfkILq4oNLPFX50qyYmu7jRj9qeXoxmJHjGlbH0+cm2uy1WCs10A==",
             "requires": {
                 "chownr": "^2.0.0",
                 "fs-minipass": "^2.0.0",
-                "minipass": "^3.0.0",
+                "minipass": "^5.0.0",
                 "minizlib": "^2.1.1",
                 "mkdirp": "^1.0.3",
                 "yallist": "^4.0.0"
             },
-            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
-            "version": "6.1.11"
+            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.15.tgz",
+            "version": "6.1.15"
         },
         "tar-stream": {
             "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
             "requires": {
                 "bl": "^4.0.3",
                 "end-of-stream": "^1.4.1",
                 "fs-constants": "^1.0.0",
@@ -5474,20 +5739,20 @@
             },
             "resolved": "https://registry.npmjs.org/truncate-utf8-bytes/-/truncate-utf8-bytes-1.0.2.tgz",
             "version": "1.0.2"
         },
         "tsconfig-paths": {
             "dependencies": {
                 "json5": {
-                    "integrity": "sha512-aKS4WQjPenRxiQsC93MNfjx+nbF4PAdYzmd/1JIj8HYzqfbu86beTuNgXDzPknWk0n0uARlyewZo4s++ES36Ow==",
+                    "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
                     "requires": {
                         "minimist": "^1.2.0"
                     },
-                    "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.1.tgz",
-                    "version": "1.0.1"
+                    "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
+                    "version": "1.0.2"
                 },
                 "strip-bom": {
                     "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
                     "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
                     "version": "3.0.0"
                 }
             },
@@ -5851,15 +6116,15 @@
         }
     },
     "lockfileVersion": 2,
     "name": "npm_linux",
     "packages": {
         "": {
             "dependencies": {
-                "electron-builder": "^23.5.1",
+                "electron-builder": "^24.4.0",
                 "lerna": "^5.5.2"
             },
             "license": "ISC",
             "name": "npm_linux",
             "version": "1.0.0"
         },
         "node_modules/7zip-bin": {
@@ -5967,30 +6232,201 @@
                 "type": "opencollective",
                 "url": "https://opencollective.com/webpack"
             },
             "integrity": "sha512-0cp4PsWQ/9avqTVMCtZ+GirikIA36ikvjtHweU4/j8yLtgObI0+JUPhYFScgwlteveGB1rt3Cm8UhN04XayDig==",
             "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
             "version": "2.6.5"
         },
+        "node_modules/@electron/asar": {
+            "bin": {
+                "asar": "bin/asar.js"
+            },
+            "dependencies": {
+                "chromium-pickle-js": "^0.2.0",
+                "commander": "^5.0.0",
+                "glob": "^7.1.6",
+                "minimatch": "^3.0.4"
+            },
+            "engines": {
+                "node": ">=10.12.0"
+            },
+            "integrity": "sha512-lykfY3TJRRWFeTxccEKdf1I6BLl2Plw81H0bbp4Fc5iEc67foDCa5pjJQULVgo0wF+Dli75f3xVcdb/67FFZ/g==",
+            "resolved": "https://registry.npmjs.org/@electron/asar/-/asar-3.2.4.tgz",
+            "version": "3.2.4"
+        },
+        "node_modules/@electron/notarize": {
+            "dependencies": {
+                "debug": "^4.1.1",
+                "fs-extra": "^9.0.1"
+            },
+            "engines": {
+                "node": ">= 10.0.0"
+            },
+            "integrity": "sha512-9oRzT56rKh5bspk3KpAVF8lPKHYQrBnRwcgiOeR0hdilVEQmszDaAu0IPCPrwwzJN0ugNs0rRboTreHMt/6mBQ==",
+            "resolved": "https://registry.npmjs.org/@electron/notarize/-/notarize-1.2.3.tgz",
+            "version": "1.2.3"
+        },
+        "node_modules/@electron/osx-sign": {
+            "bin": {
+                "electron-osx-flat": "bin/electron-osx-flat.js",
+                "electron-osx-sign": "bin/electron-osx-sign.js"
+            },
+            "dependencies": {
+                "compare-version": "^0.1.2",
+                "debug": "^4.3.4",
+                "fs-extra": "^10.0.0",
+                "isbinaryfile": "^4.0.8",
+                "minimist": "^1.2.6",
+                "plist": "^3.0.5"
+            },
+            "engines": {
+                "node": ">=12.0.0"
+            },
+            "integrity": "sha512-xfhdEcIOfAZg7scZ9RQPya1G1lWo8/zMCwUXAulq0SfY7ONIW+b9qGyKdMyuMctNYwllrIS+vmxfijSfjeh97g==",
+            "resolved": "https://registry.npmjs.org/@electron/osx-sign/-/osx-sign-1.0.4.tgz",
+            "version": "1.0.4"
+        },
+        "node_modules/@electron/osx-sign/node_modules/fs-extra": {
+            "dependencies": {
+                "graceful-fs": "^4.2.0",
+                "jsonfile": "^6.0.1",
+                "universalify": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+            "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+            "version": "10.1.0"
+        },
+        "node_modules/@electron/osx-sign/node_modules/isbinaryfile": {
+            "engines": {
+                "node": ">= 8.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/gjtorikian/"
+            },
+            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
+            "version": "4.0.10"
+        },
+        "node_modules/@electron/rebuild": {
+            "bin": {
+                "electron-rebuild": "lib/cli.js"
+            },
+            "dependencies": {
+                "@malept/cross-spawn-promise": "^2.0.0",
+                "chalk": "^4.0.0",
+                "debug": "^4.1.1",
+                "detect-libc": "^2.0.1",
+                "fs-extra": "^10.0.0",
+                "got": "^11.7.0",
+                "node-abi": "^3.0.0",
+                "node-api-version": "^0.1.4",
+                "node-gyp": "^9.0.0",
+                "ora": "^5.1.0",
+                "semver": "^7.3.5",
+                "tar": "^6.0.5",
+                "yargs": "^17.0.1"
+            },
+            "engines": {
+                "node": ">=12.13.0"
+            },
+            "integrity": "sha512-DH9Ol4JCnHDYVOD0fKWq+Qqbn/0WU1O6QR0mIpMXEVU4YFM4PlaqNC9K36mGShNBxxGFotZCMDrB1wl/iHM12g==",
+            "resolved": "https://registry.npmjs.org/@electron/rebuild/-/rebuild-3.2.13.tgz",
+            "version": "3.2.13"
+        },
+        "node_modules/@electron/rebuild/node_modules/cliui": {
+            "dependencies": {
+                "string-width": "^4.2.0",
+                "strip-ansi": "^6.0.1",
+                "wrap-ansi": "^7.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+            "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+            "version": "8.0.1"
+        },
+        "node_modules/@electron/rebuild/node_modules/fs-extra": {
+            "dependencies": {
+                "graceful-fs": "^4.2.0",
+                "jsonfile": "^6.0.1",
+                "universalify": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+            "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+            "version": "10.1.0"
+        },
+        "node_modules/@electron/rebuild/node_modules/yargs": {
+            "dependencies": {
+                "cliui": "^8.0.1",
+                "escalade": "^3.1.1",
+                "get-caller-file": "^2.0.5",
+                "require-directory": "^2.1.1",
+                "string-width": "^4.2.3",
+                "y18n": "^5.0.5",
+                "yargs-parser": "^21.1.1"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
+            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
+            "version": "17.7.2"
+        },
+        "node_modules/@electron/rebuild/node_modules/yargs-parser": {
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
+            "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
+            "version": "21.1.1"
+        },
         "node_modules/@electron/universal": {
             "dependencies": {
+                "@electron/asar": "^3.2.1",
                 "@malept/cross-spawn-promise": "^1.1.0",
-                "asar": "^3.1.0",
                 "debug": "^4.3.1",
-                "dir-compare": "^2.4.0",
+                "dir-compare": "^3.0.0",
                 "fs-extra": "^9.0.1",
                 "minimatch": "^3.0.4",
                 "plist": "^3.0.4"
             },
             "engines": {
                 "node": ">=8.6"
             },
-            "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
-            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
-            "version": "1.2.1"
+            "integrity": "sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==",
+            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz",
+            "version": "1.3.4"
+        },
+        "node_modules/@electron/universal/node_modules/@malept/cross-spawn-promise": {
+            "dependencies": {
+                "cross-spawn": "^7.0.1"
+            },
+            "engines": {
+                "node": ">= 10"
+            },
+            "funding": [
+                {
+                    "type": "individual",
+                    "url": "https://github.com/sponsors/malept"
+                },
+                {
+                    "type": "tidelift",
+                    "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
+                }
+            ],
+            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
+            "version": "1.1.1"
         },
         "node_modules/@gar/promisify": {
             "integrity": "sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==",
             "resolved": "https://registry.npmjs.org/@gar/promisify/-/promisify-1.1.3.tgz",
             "version": "1.1.3"
         },
         "node_modules/@hutson/parse-repository-url": {
@@ -6926,29 +7362,29 @@
             "version": "5.5.2"
         },
         "node_modules/@malept/cross-spawn-promise": {
             "dependencies": {
                 "cross-spawn": "^7.0.1"
             },
             "engines": {
-                "node": ">= 10"
+                "node": ">= 12.13.0"
             },
             "funding": [
                 {
                     "type": "individual",
                     "url": "https://github.com/sponsors/malept"
                 },
                 {
                     "type": "tidelift",
                     "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
                 }
             ],
-            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
-            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
-            "version": "1.1.1"
+            "integrity": "sha512-1DpKU0Z5ThltBwjNySMC14g0CkbyhCaz9FkhxqNsZI6uAPJXFS8cMXlBKo26FJ8ZuW6S9GCMcR9IO5k2X5/9Fg==",
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-2.0.0.tgz",
+            "version": "2.0.0"
         },
         "node_modules/@malept/flatpak-bundler": {
             "dependencies": {
                 "debug": "^4.1.1",
                 "fs-extra": "^9.0.0",
                 "lodash": "^4.17.15",
                 "tmp-promise": "^3.0.2"
@@ -7437,22 +7873,55 @@
                 "url": "https://opencollective.com/parcel"
             },
             "hasInstallScript": true,
             "integrity": "sha512-cTDi+FUDBIUOBKEtj+nhiJ71AZVlkAsQFuGQTun5tV9mwQBQgZvhCzG+URPQc8myeN32yRVZEfVAPCs1RW+Jvg==",
             "resolved": "https://registry.npmjs.org/@parcel/watcher/-/watcher-2.0.4.tgz",
             "version": "2.0.4"
         },
+        "node_modules/@sindresorhus/is": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sindresorhus/is?sponsor=1"
+            },
+            "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
+            "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
+            "version": "4.6.0"
+        },
+        "node_modules/@szmarczak/http-timer": {
+            "dependencies": {
+                "defer-to-connect": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
+            "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
+            "version": "4.0.6"
+        },
         "node_modules/@tootallnate/once": {
             "engines": {
                 "node": ">= 10"
             },
             "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
             "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
             "version": "2.0.0"
         },
+        "node_modules/@types/cacheable-request": {
+            "dependencies": {
+                "@types/http-cache-semantics": "*",
+                "@types/keyv": "^3.1.4",
+                "@types/node": "*",
+                "@types/responselike": "^1.0.0"
+            },
+            "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
+            "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
+            "version": "6.0.3"
+        },
         "node_modules/@types/debug": {
             "dependencies": {
                 "@types/ms": "*"
             },
             "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
             "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
             "version": "4.1.7"
@@ -7461,29 +7930,32 @@
             "dependencies": {
                 "@types/node": "*"
             },
             "integrity": "sha512-nEnwB++1u5lVDM2UI4c1+5R+FYaKfaAzS4OococimjVm3nQw3TuzH5UNsocrcTBbhnerblyHj4A49qXbIiZdpA==",
             "resolved": "https://registry.npmjs.org/@types/fs-extra/-/fs-extra-9.0.13.tgz",
             "version": "9.0.13"
         },
-        "node_modules/@types/glob": {
-            "dependencies": {
-                "@types/minimatch": "*",
-                "@types/node": "*"
-            },
-            "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
-            "optional": true,
-            "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
-            "version": "7.2.0"
+        "node_modules/@types/http-cache-semantics": {
+            "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
+            "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
+            "version": "4.0.1"
         },
         "node_modules/@types/json5": {
             "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
             "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
             "version": "0.0.29"
         },
+        "node_modules/@types/keyv": {
+            "dependencies": {
+                "@types/node": "*"
+            },
+            "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
+            "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
+            "version": "3.1.4"
+        },
         "node_modules/@types/minimatch": {
             "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
             "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
             "version": "3.0.5"
         },
         "node_modules/@types/minimist": {
             "integrity": "sha512-jhuKLIRrhvCPLqwPcx6INqmKeiA5EWrsCOPhrlFSrbrmU4ZMPjj5Ul/oLCMDO98XRUIwVm78xICz4EPCektzeQ==",
@@ -7492,17 +7964,17 @@
         },
         "node_modules/@types/ms": {
             "integrity": "sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==",
             "resolved": "https://registry.npmjs.org/@types/ms/-/ms-0.7.31.tgz",
             "version": "0.7.31"
         },
         "node_modules/@types/node": {
-            "integrity": "sha512-0os9vz6BpGwxGe9LOhgP/ncvYN5Tx1fNcd2TM3rD/aCGBkysb+ZWpXEocG24h6ZzOi13+VB8HndAQFezsSOw1w==",
-            "resolved": "https://registry.npmjs.org/@types/node/-/node-18.8.3.tgz",
-            "version": "18.8.3"
+            "integrity": "sha512-WCuw/o4GSwDGMoonES8rcvwsig77dGCMbZDrZr2x4ZZiNW4P/gcoZXe/0twgtobcTkmg9TuKflxYL/DuwDyJzg==",
+            "resolved": "https://registry.npmjs.org/@types/node/-/node-20.1.7.tgz",
+            "version": "20.1.7"
         },
         "node_modules/@types/normalize-package-data": {
             "integrity": "sha512-Gj7cI7z+98M282Tqmp2K5EIsoouUEzbBJhQQzDE3jSIRk6r9gsz0oUokqIUR4u1R3dMHo0pDHM7sNOHyhulypw==",
             "resolved": "https://registry.npmjs.org/@types/normalize-package-data/-/normalize-package-data-2.4.1.tgz",
             "version": "2.4.1"
         },
         "node_modules/@types/parse-json": {
@@ -7516,33 +7988,28 @@
                 "xmlbuilder": ">=11.0.1"
             },
             "integrity": "sha512-ULqvZNGMv0zRFvqn8/4LSPtnmN4MfhlPNtJCTpKuIIxGVGZ2rYWzFXrvEBoh9CVyqSE7D6YFRJ1hydLHI6kbWw==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
             "version": "3.0.2"
         },
+        "node_modules/@types/responselike": {
+            "dependencies": {
+                "@types/node": "*"
+            },
+            "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
+            "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
+            "version": "1.0.0"
+        },
         "node_modules/@types/verror": {
             "integrity": "sha512-NNm+gdePAX1VGvPcGZCDKQZKYSiAWigKhKaz5KF94hG6f2s8de9Ow5+7AbXoeKxL8gavZfk4UquSAygOF2duEQ==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.6.tgz",
             "version": "1.10.6"
         },
-        "node_modules/@types/yargs": {
-            "dependencies": {
-                "@types/yargs-parser": "*"
-            },
-            "integrity": "sha512-aB4y9UDUXTSMxmM4MH+YnuR0g5Cph3FLQBoWoMB21DSvFVAxRVEHEMx3TLh+zUZYMCQtKiqazz0Q4Rre31f/OA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.11.tgz",
-            "version": "17.0.11"
-        },
-        "node_modules/@types/yargs-parser": {
-            "integrity": "sha512-iO9ZQHkZxHn4mSakYV0vFHAVDyEOIJQrV2uZ06HxEPcx+mt8swXoZHIbaaJ2crJYFfErySgktuTZ3BeLz+XmFA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.0.tgz",
-            "version": "21.0.0"
-        },
         "node_modules/JSONStream": {
             "bin": {
                 "JSONStream": "bin.js"
             },
             "dependencies": {
                 "jsonparse": "^1.2.0",
                 "through": ">=2.2.7 <3"
@@ -7684,50 +8151,70 @@
             "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
             "version": "4.0.0"
         },
         "node_modules/app-builder-lib": {
             "dependencies": {
                 "7zip-bin": "~5.1.1",
                 "@develar/schema-utils": "~2.6.5",
-                "@electron/universal": "1.2.1",
+                "@electron/notarize": "^1.2.3",
+                "@electron/osx-sign": "^1.0.4",
+                "@electron/rebuild": "^3.2.13",
+                "@electron/universal": "1.3.4",
                 "@malept/flatpak-bundler": "^0.4.0",
+                "@types/fs-extra": "9.0.13",
                 "async-exit-hook": "^2.0.1",
                 "bluebird-lst": "^1.0.9",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
                 "chromium-pickle-js": "^0.2.0",
                 "debug": "^4.3.4",
-                "ejs": "^3.1.7",
-                "electron-osx-sign": "^0.6.0",
-                "electron-publish": "23.5.0",
+                "ejs": "^3.1.8",
+                "electron-publish": "24.4.0",
                 "form-data": "^4.0.0",
                 "fs-extra": "^10.1.0",
                 "hosted-git-info": "^4.1.0",
                 "is-ci": "^3.0.0",
-                "isbinaryfile": "^4.0.10",
+                "isbinaryfile": "^5.0.0",
                 "js-yaml": "^4.1.0",
                 "lazy-val": "^1.0.5",
-                "minimatch": "^3.1.2",
-                "read-config-file": "6.2.0",
+                "minimatch": "^5.1.1",
+                "read-config-file": "6.3.2",
                 "sanitize-filename": "^1.6.3",
-                "semver": "^7.3.7",
-                "tar": "^6.1.11",
+                "semver": "^7.3.8",
+                "tar": "^6.1.12",
                 "temp-file": "^3.4.0"
             },
             "engines": {
                 "node": ">=14.0.0"
             },
-            "integrity": "sha512-Pf5HLmrRaeativDNhB+BxUdnSWIsz8H1eABkn/wvZ3WLNzbvIRvLRrsO9e9jTU10oDebxU/8FZ8InalmJxYCuA==",
-            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.5.1.tgz",
-            "version": "23.5.1"
+            "integrity": "sha512-EcdqtWvg1LAApKCfyRBukcVkmsa94s2e1VKHjZLpvA9/D14QEt8rHhffYeaA+cH/pVeoNVn2ob735KnfJKEEow==",
+            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-24.4.0.tgz",
+            "version": "24.4.0"
+        },
+        "node_modules/app-builder-lib/node_modules/brace-expansion": {
+            "dependencies": {
+                "balanced-match": "^1.0.0"
+            },
+            "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
+            "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
+            "version": "2.0.1"
         },
         "node_modules/app-builder-lib/node_modules/ci-info": {
-            "integrity": "sha512-yH4RezKOGlOhxkmhbeNuC4eYZKAUsEaGtBuBzDDP1eFUKiccDWzBABxBfOx31IDwDIXMTxWuwAxUGModvkbuVw==",
-            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.5.0.tgz",
-            "version": "3.5.0"
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": [
+                {
+                    "type": "github",
+                    "url": "https://github.com/sponsors/sibiraj-s"
+                }
+            ],
+            "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+            "version": "3.8.0"
         },
         "node_modules/app-builder-lib/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -7745,14 +8232,39 @@
             "dependencies": {
                 "ci-info": "^3.2.0"
             },
             "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
             "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
             "version": "3.0.1"
         },
+        "node_modules/app-builder-lib/node_modules/minimatch": {
+            "dependencies": {
+                "brace-expansion": "^2.0.1"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+            "version": "5.1.6"
+        },
+        "node_modules/app-builder-lib/node_modules/semver": {
+            "bin": {
+                "semver": "bin/semver.js"
+            },
+            "dependencies": {
+                "lru-cache": "^6.0.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-Wvss5ivl8TMRZXXESstBA4uR5iXgEN/VC5/sOcuXdVLzcdkz4HWetIoRfG5gb5X+ij/G9rw9YoGn3QoQ8OCSpw==",
+            "resolved": "https://registry.npmjs.org/semver/-/semver-7.5.1.tgz",
+            "version": "7.5.1"
+        },
         "node_modules/aproba": {
             "integrity": "sha512-lYe4Gx7QT+MKGbDsA+Z+he/Wtef0BiwDOlK/XkBrdfsh9J/jPPXbX0tE9x9cl27Tmu5gg3QUbUrQYa/y+KOHPQ==",
             "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/are-we-there-yet": {
             "dependencies": {
@@ -7801,34 +8313,14 @@
             "version": "1.0.1"
         },
         "node_modules/asap": {
             "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
             "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
             "version": "2.0.6"
         },
-        "node_modules/asar": {
-            "bin": {
-                "asar": "bin/asar.js"
-            },
-            "dependencies": {
-                "chromium-pickle-js": "^0.2.0",
-                "commander": "^5.0.0",
-                "glob": "^7.1.6",
-                "minimatch": "^3.0.4"
-            },
-            "engines": {
-                "node": ">=10.12.0"
-            },
-            "integrity": "sha512-COdw2ZQvKdFGFxXwX3oYh2/sOsJWJegrdJCGxnN4MZ7IULgRBp9P6665aqj9z1v9VwP4oP1hRBojRDQ//IGgAg==",
-            "optionalDependencies": {
-                "@types/glob": "^7.1.1"
-            },
-            "resolved": "https://registry.npmjs.org/asar/-/asar-3.2.0.tgz",
-            "version": "3.2.0"
-        },
         "node_modules/assert-plus": {
             "engines": {
                 "node": ">=0.8"
             },
             "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
@@ -7992,86 +8484,78 @@
                     "url": "https://feross.org/support"
                 }
             ],
             "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
             "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
             "version": "5.7.1"
         },
-        "node_modules/buffer-alloc": {
-            "dependencies": {
-                "buffer-alloc-unsafe": "^1.1.0",
-                "buffer-fill": "^1.0.0"
-            },
-            "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
-            "version": "1.2.0"
-        },
-        "node_modules/buffer-alloc-unsafe": {
-            "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
-            "version": "1.1.0"
-        },
         "node_modules/buffer-equal": {
             "engines": {
-                "node": ">=0.4.0"
+                "node": ">=0.4"
             },
-            "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
-            "version": "1.0.0"
-        },
-        "node_modules/buffer-fill": {
-            "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
-            "version": "1.0.0"
+            "funding": {
+                "url": "https://github.com/sponsors/ljharb"
+            },
+            "integrity": "sha512-QoV3ptgEaQpvVwbXdSO39iqPQTCxSF7A5U99AxbHYqUdCizL/lH2Z0A2y6nbZucxMEOtNyZfG2s6gsVugGpKkg==",
+            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.1.tgz",
+            "version": "1.0.1"
         },
         "node_modules/buffer-from": {
             "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
             "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
             "version": "1.1.2"
         },
         "node_modules/builder-util": {
             "dependencies": {
                 "7zip-bin": "~5.1.1",
                 "@types/debug": "^4.1.6",
-                "@types/fs-extra": "^9.0.11",
                 "app-builder-bin": "4.0.0",
                 "bluebird-lst": "^1.0.9",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
                 "cross-spawn": "^7.0.3",
                 "debug": "^4.3.4",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "http-proxy-agent": "^5.0.0",
-                "https-proxy-agent": "^5.0.0",
+                "https-proxy-agent": "^5.0.1",
                 "is-ci": "^3.0.0",
                 "js-yaml": "^4.1.0",
                 "source-map-support": "^0.5.19",
                 "stat-mode": "^1.0.0",
                 "temp-file": "^3.4.0"
             },
-            "integrity": "sha512-TYz3sj2NMoG1/524/Je0p0RtEAKKjmTL6z2WQnzU6yM+WU/jHnA2OqX9Q/jys+rKuMy+7MCMdc+G+HrbpKWYSg==",
-            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.5.0.tgz",
-            "version": "23.5.0"
+            "integrity": "sha512-tONb/GIK1MKa1BcOPHE1naId3o5nj6gdka5kP7yUJh2DOfF+jMq3laiu+UOZH6A7ZtkMtnGNMYFKFTIv408n/A==",
+            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/builder-util-runtime": {
             "dependencies": {
                 "debug": "^4.3.4",
                 "sax": "^1.2.4"
             },
             "engines": {
                 "node": ">=12.0.0"
             },
-            "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
-            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
-            "version": "9.1.1"
+            "integrity": "sha512-2rLv/uQD2x+dJ0J3xtsmI12AlRyk7p45TEbE/6o/fbb633e/S3pPgm+ct+JHsoY7r39dKHnGEFk/AASRFdnXmA==",
+            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.2.1.tgz",
+            "version": "9.2.1"
         },
         "node_modules/builder-util/node_modules/ci-info": {
-            "integrity": "sha512-yH4RezKOGlOhxkmhbeNuC4eYZKAUsEaGtBuBzDDP1eFUKiccDWzBABxBfOx31IDwDIXMTxWuwAxUGModvkbuVw==",
-            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.5.0.tgz",
-            "version": "3.5.0"
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": [
+                {
+                    "type": "github",
+                    "url": "https://github.com/sponsors/sibiraj-s"
+                }
+            ],
+            "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+            "version": "3.8.0"
         },
         "node_modules/builder-util/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -8178,14 +8662,53 @@
             "engines": {
                 "node": ">=10"
             },
             "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
             "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
             "version": "5.1.0"
         },
+        "node_modules/cacheable-lookup": {
+            "engines": {
+                "node": ">=10.6.0"
+            },
+            "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
+            "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
+            "version": "5.0.4"
+        },
+        "node_modules/cacheable-request": {
+            "dependencies": {
+                "clone-response": "^1.0.2",
+                "get-stream": "^5.1.0",
+                "http-cache-semantics": "^4.0.0",
+                "keyv": "^4.0.0",
+                "lowercase-keys": "^2.0.0",
+                "normalize-url": "^6.0.1",
+                "responselike": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
+            "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
+            "version": "7.0.2"
+        },
+        "node_modules/cacheable-request/node_modules/get-stream": {
+            "dependencies": {
+                "pump": "^3.0.0"
+            },
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
+            "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
+            "version": "5.2.0"
+        },
         "node_modules/callsites": {
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
             "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
             "version": "3.1.0"
@@ -8370,14 +8893,25 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-h5PpgXkWitc38BBMYawTYMWJHFZJVnBquFE57xFpjB8pJFiF6gZ+bU+WyI/yqXiFR5mdLsgYNaPe8uao6Uv9Og==",
             "resolved": "https://registry.npmjs.org/is-plain-object/-/is-plain-object-2.0.4.tgz",
             "version": "2.0.4"
         },
+        "node_modules/clone-response": {
+            "dependencies": {
+                "mimic-response": "^1.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
+            "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "node_modules/cmd-shim": {
             "dependencies": {
                 "mkdirp-infer-owner": "^2.0.0"
             },
             "engines": {
                 "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
             },
@@ -8405,22 +8939,14 @@
             "bin": {
                 "color-support": "bin.js"
             },
             "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
             "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
             "version": "1.1.3"
         },
-        "node_modules/colors": {
-            "engines": {
-                "node": ">=0.1.90"
-            },
-            "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
-            "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
-            "version": "1.0.3"
-        },
         "node_modules/columnify": {
             "dependencies": {
                 "strip-ansi": "^6.0.1",
                 "wcwidth": "^1.0.0"
             },
             "engines": {
                 "node": ">=8.0.0"
@@ -8505,14 +9031,23 @@
                 "ini": "^1.3.4",
                 "proto-list": "~1.2.1"
             },
             "integrity": "sha512-qj+f8APARXHrM0hraqXYb2/bOVSV4PvJQlNZ/DVj0QrmNM2q2euizkeuVckQ57J+W0mRH6Hvi+k50M4Jul2VRQ==",
             "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
             "version": "1.1.13"
         },
+        "node_modules/config-file-ts": {
+            "dependencies": {
+                "glob": "^7.1.6",
+                "typescript": "^4.0.2"
+            },
+            "integrity": "sha512-cKSW0BfrSaAUnxpgvpXPLaaW/umg4bqg4k3GO1JqlRfpx+d5W0GDXznCMkWotJQek5Mmz1MJVChQnz3IVaeMZQ==",
+            "resolved": "https://registry.npmjs.org/config-file-ts/-/config-file-ts-0.2.4.tgz",
+            "version": "0.2.4"
+        },
         "node_modules/console-control-strings": {
             "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ==",
             "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
             "version": "1.1.0"
         },
         "node_modules/conventional-changelog-angular": {
             "dependencies": {
@@ -8746,27 +9281,60 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-7N/q3lyZ+LVCp7PzuxrJr4KMbBE2hW7BT7YNia330OFxIf4d3r5zVpicP2650l7CPN6RM9zOJRl3NGpqSiw3Eg==",
             "resolved": "https://registry.npmjs.org/map-obj/-/map-obj-1.0.1.tgz",
             "version": "1.0.1"
         },
+        "node_modules/decompress-response": {
+            "dependencies": {
+                "mimic-response": "^3.1.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
+            "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
+            "version": "6.0.0"
+        },
+        "node_modules/decompress-response/node_modules/mimic-response": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
+            "version": "3.1.0"
+        },
         "node_modules/dedent": {
             "integrity": "sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==",
             "resolved": "https://registry.npmjs.org/dedent/-/dedent-0.7.0.tgz",
             "version": "0.7.0"
         },
         "node_modules/defaults": {
             "dependencies": {
                 "clone": "^1.0.2"
             },
             "integrity": "sha512-s82itHOnYrN0Ib8r+z7laQz3sdE+4FP3d9Q7VLO7U+KRT+CR0GsWuyHxzdAY82I7cXv0G/twrqomTJLOssO5HA==",
             "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.3.tgz",
             "version": "1.0.3"
         },
+        "node_modules/defer-to-connect": {
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
+            "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/define-lazy-prop": {
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
             "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
             "version": "2.0.0"
@@ -8801,85 +9369,66 @@
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==",
             "resolved": "https://registry.npmjs.org/detect-indent/-/detect-indent-6.1.0.tgz",
             "version": "6.1.0"
         },
+        "node_modules/detect-libc": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==",
+            "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/dezalgo": {
             "dependencies": {
                 "asap": "^2.0.0",
                 "wrappy": "1"
             },
             "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
             "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
             "version": "1.0.4"
         },
         "node_modules/dir-compare": {
-            "bin": {
-                "dircompare": "src/cli/dircompare.js"
-            },
-            "dependencies": {
-                "buffer-equal": "1.0.0",
-                "colors": "1.0.3",
-                "commander": "2.9.0",
-                "minimatch": "3.0.4"
-            },
-            "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
-            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
-            "version": "2.4.0"
-        },
-        "node_modules/dir-compare/node_modules/commander": {
             "dependencies": {
-                "graceful-readlink": ">= 1.0.0"
-            },
-            "engines": {
-                "node": ">= 0.6.x"
-            },
-            "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
-            "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
-            "version": "2.9.0"
-        },
-        "node_modules/dir-compare/node_modules/minimatch": {
-            "dependencies": {
-                "brace-expansion": "^1.1.7"
-            },
-            "engines": {
-                "node": "*"
+                "buffer-equal": "^1.0.0",
+                "minimatch": "^3.0.4"
             },
-            "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
-            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
-            "version": "3.0.4"
+            "integrity": "sha512-J7/et3WlGUCxjdnD3HAAzQ6nsnc0WL6DD7WcwJb7c39iH1+AWfg+9OqzJNaI6PkBwBvm1mhZNL9iY/nRiZXlPg==",
+            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-3.3.0.tgz",
+            "version": "3.3.0"
         },
         "node_modules/dir-glob": {
             "dependencies": {
                 "path-type": "^4.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
             "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/dmg-builder": {
             "dependencies": {
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "fs-extra": "^10.1.0",
                 "iconv-lite": "^0.6.2",
                 "js-yaml": "^4.1.0"
             },
-            "integrity": "sha512-TqIV0rdliw7FZ0DqY88FyPBH+q/Bp+yCPIhdYVraQxYMcaCNu7G3ZizApfEpCvoobtE6MY06/u91I9M7+gGYkw==",
+            "integrity": "sha512-p5z9Cx539GSBYb+b09Z+hMhuBTh/BrI71VRg4rgF6f2xtIRK/YlTGVS/O08k5OojoyhZcpS7JXxDVSmQoWgiiQ==",
             "optionalDependencies": {
                 "dmg-license": "^1.0.11"
             },
-            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/dmg-builder/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -8964,49 +9513,61 @@
             },
             "dependencies": {
                 "jake": "^10.8.5"
             },
             "engines": {
                 "node": ">=0.10.0"
             },
-            "integrity": "sha512-/sXZeMlhS0ArkfX2Aw780gJzXSMPnKjtspYZv+f3NiKLlubezAHDU5+9xz6gd3/NhG3txQCo6xlglmTS+oTGEQ==",
-            "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.8.tgz",
-            "version": "3.1.8"
+            "integrity": "sha512-rC+QVNMJWv+MtPgkt0y+0rVEIdbtxVADApW9JXrUVlzHetgcyczP/E7DJmWJ4fJCZF2cPcBk0laWO9ZHMG3DmQ==",
+            "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.9.tgz",
+            "version": "3.1.9"
         },
         "node_modules/electron-builder": {
             "bin": {
                 "electron-builder": "cli.js",
                 "install-app-deps": "install-app-deps.js"
             },
             "dependencies": {
-                "@types/yargs": "^17.0.1",
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "dmg-builder": "23.5.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "dmg-builder": "24.4.0",
+                "fs-extra": "^10.1.0",
                 "is-ci": "^3.0.0",
                 "lazy-val": "^1.0.5",
-                "read-config-file": "6.2.0",
-                "simple-update-notifier": "^1.0.7",
-                "yargs": "^17.5.1"
+                "read-config-file": "6.3.2",
+                "simple-update-notifier": "^1.1.0",
+                "yargs": "^17.6.2"
             },
             "engines": {
                 "node": ">=14.0.0"
             },
-            "integrity": "sha512-SWTlf9jqbSa/UFDy1xcaMLIAL39TMd1PPYIgDN8bnfzJntMKEd16qguKsAxfW/kEKcPHLCVh69JyS1GbQ4sROQ==",
-            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "integrity": "sha512-D5INxodxaUIJgEX6p/fqBd8wQNS8XRAToNIJ9SQC+taNS5D73ZsjLuXiRraFGCB0cVk9KeKhEkdEOH5AaVya4g==",
+            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/electron-builder/node_modules/ci-info": {
             "integrity": "sha512-xmDt/QIAdeZ9+nfdPsaBCpMvHNLFiLdjj59qjqn+6iPe6YmHGQ35sBnQ8uslRBXFmXkiZQOJRjvQeoGppoTjjg==",
             "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.3.2.tgz",
             "version": "3.3.2"
         },
+        "node_modules/electron-builder/node_modules/cliui": {
+            "dependencies": {
+                "string-width": "^4.2.0",
+                "strip-ansi": "^6.0.1",
+                "wrap-ansi": "^7.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+            "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+            "version": "8.0.1"
+        },
         "node_modules/electron-builder/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
             "engines": {
@@ -9025,95 +9586,50 @@
             },
             "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
             "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/electron-builder/node_modules/yargs": {
             "dependencies": {
-                "cliui": "^7.0.2",
+                "cliui": "^8.0.1",
                 "escalade": "^3.1.1",
                 "get-caller-file": "^2.0.5",
                 "require-directory": "^2.1.1",
                 "string-width": "^4.2.3",
                 "y18n": "^5.0.5",
-                "yargs-parser": "^21.0.0"
+                "yargs-parser": "^21.1.1"
             },
             "engines": {
                 "node": ">=12"
             },
-            "integrity": "sha512-t6YAJcxDkNX7NFYiVtKvWUz8l+PaKTLiL63mJYWR2GnHq2gjEWISzsLp9wg3aY36dY1j+gfIEL3pIF+XlJJfbA==",
-            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.5.1.tgz",
-            "version": "17.5.1"
+            "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
+            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
+            "version": "17.7.2"
         },
         "node_modules/electron-builder/node_modules/yargs-parser": {
             "engines": {
                 "node": ">=12"
             },
             "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
             "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
             "version": "21.1.1"
         },
-        "node_modules/electron-osx-sign": {
-            "bin": {
-                "electron-osx-flat": "bin/electron-osx-flat.js",
-                "electron-osx-sign": "bin/electron-osx-sign.js"
-            },
-            "dependencies": {
-                "bluebird": "^3.5.0",
-                "compare-version": "^0.1.2",
-                "debug": "^2.6.8",
-                "isbinaryfile": "^3.0.2",
-                "minimist": "^1.2.0",
-                "plist": "^3.0.1"
-            },
-            "deprecated": "Please use @electron/osx-sign moving forward. Be aware the API is slightly different",
-            "engines": {
-                "node": ">=4.0.0"
-            },
-            "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
-            "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
-            "version": "0.6.0"
-        },
-        "node_modules/electron-osx-sign/node_modules/debug": {
-            "dependencies": {
-                "ms": "2.0.0"
-            },
-            "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-            "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-            "version": "2.6.9"
-        },
-        "node_modules/electron-osx-sign/node_modules/isbinaryfile": {
-            "dependencies": {
-                "buffer-alloc": "^1.2.0"
-            },
-            "engines": {
-                "node": ">=0.6.0"
-            },
-            "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
-            "version": "3.0.3"
-        },
-        "node_modules/electron-osx-sign/node_modules/ms": {
-            "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
-            "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-            "version": "2.0.0"
-        },
         "node_modules/electron-publish": {
             "dependencies": {
                 "@types/fs-extra": "^9.0.11",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "fs-extra": "^10.0.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "fs-extra": "^10.1.0",
                 "lazy-val": "^1.0.5",
                 "mime": "^2.5.2"
             },
-            "integrity": "sha512-dY/bAN5tIjEPX1AV5FK9TXKKoGGalGb53SgGbhiII3o+WLzK+4vew6rrmChBTwELP/q8r4a89X+slTDG/iPdww==",
-            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.5.0.tgz",
-            "version": "23.5.0"
+            "integrity": "sha512-U3mnVSxIfNrLW7ZnwiedFhcLf6ExPFXgAsx89WpfQFsV4gFAt/LG+H74p0m9NSvsLXiZuF82yXoxi7Ou8GHq4Q==",
+            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/electron-publish/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -9332,17 +9848,17 @@
         "node_modules/filelist/node_modules/minimatch": {
             "dependencies": {
                 "brace-expansion": "^2.0.1"
             },
             "engines": {
                 "node": ">=10"
             },
-            "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
-            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
-            "version": "5.1.0"
+            "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+            "version": "5.1.6"
         },
         "node_modules/fill-range": {
             "dependencies": {
                 "to-regex-range": "^5.0.1"
             },
             "engines": {
                 "node": ">=8"
@@ -9669,24 +10185,43 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
             "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
             "version": "11.1.0"
         },
+        "node_modules/got": {
+            "dependencies": {
+                "@sindresorhus/is": "^4.0.0",
+                "@szmarczak/http-timer": "^4.0.5",
+                "@types/cacheable-request": "^6.0.1",
+                "@types/responselike": "^1.0.0",
+                "cacheable-lookup": "^5.0.3",
+                "cacheable-request": "^7.0.2",
+                "decompress-response": "^6.0.0",
+                "http2-wrapper": "^1.0.0-beta.5.2",
+                "lowercase-keys": "^2.0.0",
+                "p-cancelable": "^2.0.0",
+                "responselike": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=10.19.0"
+            },
+            "funding": {
+                "url": "https://github.com/sindresorhus/got?sponsor=1"
+            },
+            "integrity": "sha512-6tfZ91bOr7bOXnK7PRDCGBLa1H4U080YHNaAQ2KsMGlLEzRbk44nsZF2E1IeRc3vtJHPVbKCYgdFbaGO2ljd8g==",
+            "resolved": "https://registry.npmjs.org/got/-/got-11.8.6.tgz",
+            "version": "11.8.6"
+        },
         "node_modules/graceful-fs": {
             "integrity": "sha512-NtNxqUcXgpW2iMrfqSfR73Glt39K+BLwWsPs94yR63v45T0Wbej7eRmL5cWfwEgqXnmjQp3zaJTshdRW/qC2ZQ==",
             "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.9.tgz",
             "version": "4.2.9"
         },
-        "node_modules/graceful-readlink": {
-            "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
-            "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
-            "version": "1.0.1"
-        },
         "node_modules/handlebars": {
             "bin": {
                 "handlebars": "bin/handlebars"
             },
             "dependencies": {
                 "minimist": "^1.2.5",
                 "neo-async": "^2.6.0",
@@ -9743,42 +10278,65 @@
                 "node": ">=10"
             },
             "integrity": "sha512-kyCuEOWjJqZuDbRHzL8V93NzQhwIB71oFWSyzVo+KPZI+pnQPPxucdkrOZvkLRnrf5URsQM+IJ09Dw29cRALIA==",
             "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
             "version": "4.1.0"
         },
         "node_modules/http-cache-semantics": {
-            "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
-            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
-            "version": "4.1.0"
+            "integrity": "sha512-er295DKPVsV82j5kw1Gjt+ADA/XYHsajl82cGNQG2eyoPkvgUhX+nDIyelzhIWbbsXP39EHcI6l5tYs2FYqYXQ==",
+            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.1.tgz",
+            "version": "4.1.1"
         },
         "node_modules/http-proxy-agent": {
             "dependencies": {
                 "@tootallnate/once": "2",
                 "agent-base": "6",
                 "debug": "4"
             },
             "engines": {
                 "node": ">= 6"
             },
             "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
             "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "node_modules/http2-wrapper": {
+            "dependencies": {
+                "quick-lru": "^5.1.1",
+                "resolve-alpn": "^1.0.0"
+            },
+            "engines": {
+                "node": ">=10.19.0"
+            },
+            "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
+            "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
+            "version": "1.0.3"
+        },
+        "node_modules/http2-wrapper/node_modules/quick-lru": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
+            "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
+            "version": "5.1.1"
+        },
         "node_modules/https-proxy-agent": {
             "dependencies": {
                 "agent-base": "6",
                 "debug": "4"
             },
             "engines": {
                 "node": ">= 6"
             },
-            "integrity": "sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==",
-            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz",
-            "version": "5.0.0"
+            "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
+            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
+            "version": "5.0.1"
         },
         "node_modules/human-signals": {
             "engines": {
                 "node": ">=10.17.0"
             },
             "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
             "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
@@ -10227,22 +10785,22 @@
         "node_modules/isarray": {
             "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
             "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
             "version": "1.0.0"
         },
         "node_modules/isbinaryfile": {
             "engines": {
-                "node": ">= 8.0.0"
+                "node": ">= 14.0.0"
             },
             "funding": {
                 "url": "https://github.com/sponsors/gjtorikian/"
             },
-            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
-            "version": "4.0.10"
+            "integrity": "sha512-UDdnyGvMajJUWCkib7Cei/dvyJrrvo4FIrsvSFWdPpXSUorzXrDJ0S+X5Q4ZlasfPjca4yqCNNsjbCeiy8FFeg==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-5.0.0.tgz",
+            "version": "5.0.0"
         },
         "node_modules/isexe": {
             "integrity": "sha1-6PvzdNxVb/iUehDcsFctYz8s+hA=",
             "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/isobject": {
@@ -10256,23 +10814,23 @@
         "node_modules/jake": {
             "bin": {
                 "jake": "bin/cli.js"
             },
             "dependencies": {
                 "async": "^3.2.3",
                 "chalk": "^4.0.2",
-                "filelist": "^1.0.1",
-                "minimatch": "^3.0.4"
+                "filelist": "^1.0.4",
+                "minimatch": "^3.1.2"
             },
             "engines": {
                 "node": ">=10"
             },
-            "integrity": "sha512-sVpxYeuAhWt0OTWITwT98oyV0GsXyMlXCF+3L1SuafBVUIr/uILGRB+NqwkzhgXKvoJpDIpQvqkUALgdmQsQxw==",
-            "resolved": "https://registry.npmjs.org/jake/-/jake-10.8.5.tgz",
-            "version": "10.8.5"
+            "integrity": "sha512-G43Ub9IYEFfu72sua6rzooi8V8Gz2lkfk48rW20vEWCGizeaEPlKB1Kh8JIA84yQbiAEfqlPmSpGgCKKxH3rDA==",
+            "resolved": "https://registry.npmjs.org/jake/-/jake-10.8.6.tgz",
+            "version": "10.8.6"
         },
         "node_modules/js-tokens": {
             "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
             "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
             "version": "4.0.0"
         },
         "node_modules/js-yaml": {
@@ -10282,14 +10840,19 @@
             "dependencies": {
                 "argparse": "^2.0.1"
             },
             "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "node_modules/json-buffer": {
+            "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
+            "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
+            "version": "3.0.1"
+        },
         "node_modules/json-parse-better-errors": {
             "integrity": "sha512-mrqyZKfX5EhL7hvqcV6WG1yYjnjeuYDzDhhcAAUrq8Po85NBQBJP+ZDUT75qZQ98IkUoBqdkExkukOU7Ts2wrw==",
             "resolved": "https://registry.npmjs.org/json-parse-better-errors/-/json-parse-better-errors-1.0.2.tgz",
             "version": "1.0.2"
         },
         "node_modules/json-parse-even-better-errors": {
             "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
@@ -10317,17 +10880,17 @@
         "node_modules/json5": {
             "bin": {
                 "json5": "lib/cli.js"
             },
             "engines": {
                 "node": ">=6"
             },
-            "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
-            "version": "2.2.1"
+            "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+            "version": "2.2.3"
         },
         "node_modules/jsonc-parser": {
             "integrity": "sha512-fQzRfAbIBnR0IQvftw9FJveWiHp72Fg20giDrHz6TdfB12UH/uue0D3hm57UB5KgAVuniLMCaS8P1IMj9NR7cA==",
             "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.0.0.tgz",
             "version": "3.0.0"
         },
         "node_modules/jsonfile": {
@@ -10355,14 +10918,22 @@
             "version": "5.1.1"
         },
         "node_modules/just-diff-apply": {
             "integrity": "sha512-AAV5Jw7tsniWwih8Ly3fXxEZ06y+6p5TwQMsw0dzZ/wPKilzyDgdAnL0Ug4NNIquPUOh1vfFWEHbmXUqM5+o8g==",
             "resolved": "https://registry.npmjs.org/just-diff-apply/-/just-diff-apply-5.4.1.tgz",
             "version": "5.4.1"
         },
+        "node_modules/keyv": {
+            "dependencies": {
+                "json-buffer": "3.0.1"
+            },
+            "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
+            "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
+            "version": "4.5.2"
+        },
         "node_modules/kind-of": {
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==",
             "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-6.0.3.tgz",
             "version": "6.0.3"
@@ -10573,14 +11144,22 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-8XPvpAA8uyhfteu8pIvQxpJZ7SYYdpUivZpGy6sFsBuKRY/7rQGavedeB8aK+Zkyq6upMFVL/9AW6vOYzfRyLg==",
             "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "node_modules/lowercase-keys": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
+            "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
+            "version": "2.0.0"
+        },
         "node_modules/lru-cache": {
             "dependencies": {
                 "yallist": "^4.0.0"
             },
             "engines": {
                 "node": ">=10"
             },
@@ -10819,14 +11398,22 @@
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
             "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
             "version": "2.1.0"
         },
+        "node_modules/mimic-response": {
+            "engines": {
+                "node": ">=4"
+            },
+            "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
+            "version": "1.0.1"
+        },
         "node_modules/min-indent": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
             "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
             "version": "1.0.1"
@@ -11029,19 +11616,38 @@
             "version": "0.6.3"
         },
         "node_modules/neo-async": {
             "integrity": "sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==",
             "resolved": "https://registry.npmjs.org/neo-async/-/neo-async-2.6.2.tgz",
             "version": "2.6.2"
         },
+        "node_modules/node-abi": {
+            "dependencies": {
+                "semver": "^7.3.5"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-zNy02qivjjRosswoYmPi8hIKJRr8MpQyeKT6qlcq/OnOgA3Rhoae+IYOqsM9V5+JnHWmxKnWOT2GxvtqdtOCXA==",
+            "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.40.0.tgz",
+            "version": "3.40.0"
+        },
         "node_modules/node-addon-api": {
             "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-3.2.1.tgz",
             "version": "3.2.1"
         },
+        "node_modules/node-api-version": {
+            "dependencies": {
+                "semver": "^7.3.5"
+            },
+            "integrity": "sha512-KGXihXdUChwJAOHO53bv9/vXcLmdUsZ6jIptbvYvkpKfth+r7jw44JkVxQFA3kX5nQjzjmGu1uAu/xNNLNlI5g==",
+            "resolved": "https://registry.npmjs.org/node-api-version/-/node-api-version-0.1.4.tgz",
+            "version": "0.1.4"
+        },
         "node_modules/node-fetch": {
             "dependencies": {
                 "whatwg-url": "^5.0.0"
             },
             "engines": {
                 "node": "4.x || >=6.0.0"
             },
@@ -11122,14 +11728,25 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
             "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
             "version": "3.0.0"
         },
+        "node_modules/normalize-url": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
+            "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
+            "version": "6.1.0"
+        },
         "node_modules/npm-bundled": {
             "dependencies": {
                 "npm-normalize-package-bin": "^1.0.1"
             },
             "integrity": "sha512-x5DHup0SuyQcmL3s7Rx/YQ8sbw/Hzg0rj48eN0dV7hf5cmQq5PXIeioroH3raV1QC1yh3uTYuMThvEQF3iKgGQ==",
             "resolved": "https://registry.npmjs.org/npm-bundled/-/npm-bundled-1.1.2.tgz",
             "version": "1.1.2"
@@ -11635,14 +12252,22 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==",
             "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
             "version": "1.0.2"
         },
+        "node_modules/p-cancelable": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
+            "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
+            "version": "2.1.1"
+        },
         "node_modules/p-finally": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-LICb2p9CB7FS+0eR1oqWnHhp0FljGLZCWBE9aix0Uye9W8LTQPwMTYVGWQWIw9RdQiDg4+epXQODwIYJtSJaow==",
             "resolved": "https://registry.npmjs.org/p-finally/-/p-finally-1.0.0.tgz",
             "version": "1.0.0"
@@ -12027,21 +12652,30 @@
             "version": "1.2.4"
         },
         "node_modules/protocols": {
             "integrity": "sha512-/XJ368cyBJ7fzLMwLKv1e4vLxOju2MNAIokcr7meSaNcVbWz/CPcW22cP04mwxOErdA5mwjA8Q6w/cdAQxVn7Q==",
             "resolved": "https://registry.npmjs.org/protocols/-/protocols-2.0.1.tgz",
             "version": "2.0.1"
         },
+        "node_modules/pump": {
+            "dependencies": {
+                "end-of-stream": "^1.1.0",
+                "once": "^1.3.1"
+            },
+            "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
+            "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
+            "version": "3.0.0"
+        },
         "node_modules/punycode": {
             "engines": {
                 "node": ">=6"
             },
-            "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
-            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
-            "version": "2.1.1"
+            "integrity": "sha512-rRV+zQD8tVFys26lAGR9WUuS4iUAngJScM+ZRSKtvl5tKeZ2t5bvdNFdNHBW9FWR4guGHlgmsZ1G7BSm2wTbuA==",
+            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.0.tgz",
+            "version": "2.3.0"
         },
         "node_modules/q": {
             "engines": {
                 "node": ">=0.6.0",
                 "teleport": ">=0.2.0"
             },
             "integrity": "sha512-kV/CThkXo6xyFEZUugw/+pIOywXcDbFYgSct5cT3gqlbkBE1SJdwy6UQoZvodiWF/ckQLZyDE/Bu1M6gVu5lVw==",
@@ -12092,26 +12726,27 @@
             },
             "integrity": "sha512-kEmDUoYf/CDy8yZbLTmhB1X9kkjf9Q80PCNsDMb7ufrGd6zZSQA1+UyjrO+pZm5K/S4OXCWJeiIt1JA8kAsa6g==",
             "resolved": "https://registry.npmjs.org/read-cmd-shim/-/read-cmd-shim-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/read-config-file": {
             "dependencies": {
+                "config-file-ts": "^0.2.4",
                 "dotenv": "^9.0.2",
                 "dotenv-expand": "^5.1.0",
                 "js-yaml": "^4.1.0",
                 "json5": "^2.2.0",
                 "lazy-val": "^1.0.4"
             },
             "engines": {
                 "node": ">=12.0.0"
             },
-            "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
-            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
-            "version": "6.2.0"
+            "integrity": "sha512-M80lpCjnE6Wt6zb98DoW8WHR09nzMSpu8XHtPkiTHrJ5Az9CybfeQhTJ8D7saeBHpGhLPIVyA8lcL6ZmdKwY6Q==",
+            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.3.2.tgz",
+            "version": "6.3.2"
         },
         "node_modules/read-package-json": {
             "dependencies": {
                 "glob": "^8.0.1",
                 "json-parse-even-better-errors": "^2.3.1",
                 "normalize-package-data": "^4.0.0",
                 "npm-normalize-package-bin": "^2.0.0"
@@ -12443,14 +13078,19 @@
             "funding": {
                 "url": "https://github.com/sponsors/ljharb"
             },
             "integrity": "sha512-nBpuuYuY5jFsli/JIs1oldw6fOQCBioohqWZg/2hiaOybXOft4lonv85uDOKXdf8rhyK159cxU5cDcK/NKk8zw==",
             "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
             "version": "1.22.1"
         },
+        "node_modules/resolve-alpn": {
+            "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
+            "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
+            "version": "1.2.1"
+        },
         "node_modules/resolve-cwd": {
             "dependencies": {
                 "resolve-from": "^5.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
@@ -12462,14 +13102,25 @@
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
             "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "node_modules/responselike": {
+            "dependencies": {
+                "lowercase-keys": "^2.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
+            "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/restore-cursor": {
             "dependencies": {
                 "onetime": "^5.1.0",
                 "signal-exit": "^3.0.2"
             },
             "engines": {
                 "node": ">=8"
@@ -12641,17 +13292,17 @@
         "node_modules/simple-update-notifier": {
             "dependencies": {
                 "semver": "~7.0.0"
             },
             "engines": {
                 "node": ">=8.10.0"
             },
-            "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
-            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
-            "version": "1.0.7"
+            "integrity": "sha512-VpsrsJSUcJEseSbMHkrsrAVSdvVS5I96Qo1QAQ4FxQ9wXFcB+pjj7FB7/us9+GcgfW4ziHtYMc1J0PLczb55mg==",
+            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.1.0.tgz",
+            "version": "1.1.0"
         },
         "node_modules/simple-update-notifier/node_modules/semver": {
             "bin": {
                 "semver": "bin/semver.js"
             },
             "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
             "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
@@ -12916,25 +13567,25 @@
             "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
             "version": "1.0.0"
         },
         "node_modules/tar": {
             "dependencies": {
                 "chownr": "^2.0.0",
                 "fs-minipass": "^2.0.0",
-                "minipass": "^3.0.0",
+                "minipass": "^5.0.0",
                 "minizlib": "^2.1.1",
                 "mkdirp": "^1.0.3",
                 "yallist": "^4.0.0"
             },
             "engines": {
-                "node": ">= 10"
+                "node": ">=10"
             },
-            "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
-            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
-            "version": "6.1.11"
+            "integrity": "sha512-/zKt9UyngnxIT/EAGYuxaMYgOIJiP81ab9ZfkILq4oNLPFX50qyYmu7jRj9qeXoxmJHjGlbH0+cm2uy1WCs10A==",
+            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.15.tgz",
+            "version": "6.1.15"
         },
         "node_modules/tar-stream": {
             "dependencies": {
                 "bl": "^4.0.3",
                 "end-of-stream": "^1.4.1",
                 "fs-constants": "^1.0.0",
                 "inherits": "^2.0.3",
@@ -12943,14 +13594,22 @@
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
             "resolved": "https://registry.npmjs.org/tar-stream/-/tar-stream-2.2.0.tgz",
             "version": "2.2.0"
         },
+        "node_modules/tar/node_modules/minipass": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==",
+            "resolved": "https://registry.npmjs.org/minipass/-/minipass-5.0.0.tgz",
+            "version": "5.0.0"
+        },
         "node_modules/temp-dir": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-xZFXEGbG7SNC3itwBzI3RYjq/cEhBkx2hJuKGIUOcEULmkQExXiHat2z/qkISYsuR+IKumhEfKKbV5qXmhICFQ==",
             "resolved": "https://registry.npmjs.org/temp-dir/-/temp-dir-1.0.0.tgz",
             "version": "1.0.0"
@@ -13082,17 +13741,17 @@
         "node_modules/tsconfig-paths/node_modules/json5": {
             "bin": {
                 "json5": "lib/cli.js"
             },
             "dependencies": {
                 "minimist": "^1.2.0"
             },
-            "integrity": "sha512-aKS4WQjPenRxiQsC93MNfjx+nbF4PAdYzmd/1JIj8HYzqfbu86beTuNgXDzPknWk0n0uARlyewZo4s++ES36Ow==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.1.tgz",
-            "version": "1.0.1"
+            "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
+            "version": "1.0.2"
         },
         "node_modules/tsconfig-paths/node_modules/strip-bom": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
             "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
```

### Comparing `chia-blockchain-2.0.0b1/build_scripts/npm_macos/package-lock.json` & `chia-blockchain-2.0.0b3/build_scripts/npm_macos/package-lock.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9877057960727061%*

 * *Differences: {"'dependencies'": "{'@electron/universal': {'version': '1.3.4', 'resolved': "*

 * *                   "'https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz', "*

 * *                   "'integrity': "*

 * *                   "'sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==', "*

 * *                   "'requires': {'dir-compare': '^3.0.0', '@electron/asar': '^3.2.1', delete: "*

 * *                   "['asar']}, 'dependencies': OrderedDict([('@malept/cross-spawn-promi []*

```diff
@@ -94,27 +94,119 @@
             "requires": {
                 "ajv": "^6.12.0",
                 "ajv-keywords": "^3.4.1"
             },
             "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
             "version": "2.6.5"
         },
+        "@electron/asar": {
+            "integrity": "sha512-lykfY3TJRRWFeTxccEKdf1I6BLl2Plw81H0bbp4Fc5iEc67foDCa5pjJQULVgo0wF+Dli75f3xVcdb/67FFZ/g==",
+            "requires": {
+                "chromium-pickle-js": "^0.2.0",
+                "commander": "^5.0.0",
+                "glob": "^7.1.6",
+                "minimatch": "^3.0.4"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/asar/-/asar-3.2.4.tgz",
+            "version": "3.2.4"
+        },
+        "@electron/notarize": {
+            "integrity": "sha512-9oRzT56rKh5bspk3KpAVF8lPKHYQrBnRwcgiOeR0hdilVEQmszDaAu0IPCPrwwzJN0ugNs0rRboTreHMt/6mBQ==",
+            "requires": {
+                "debug": "^4.1.1",
+                "fs-extra": "^9.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/notarize/-/notarize-1.2.3.tgz",
+            "version": "1.2.3"
+        },
+        "@electron/osx-sign": {
+            "dependencies": {
+                "fs-extra": {
+                    "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+                    "requires": {
+                        "graceful-fs": "^4.2.0",
+                        "jsonfile": "^6.0.1",
+                        "universalify": "^2.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+                    "version": "10.1.0"
+                },
+                "isbinaryfile": {
+                    "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
+                    "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
+                    "version": "4.0.10"
+                }
+            },
+            "integrity": "sha512-xfhdEcIOfAZg7scZ9RQPya1G1lWo8/zMCwUXAulq0SfY7ONIW+b9qGyKdMyuMctNYwllrIS+vmxfijSfjeh97g==",
+            "requires": {
+                "compare-version": "^0.1.2",
+                "debug": "^4.3.4",
+                "fs-extra": "^10.0.0",
+                "isbinaryfile": "^4.0.8",
+                "minimist": "^1.2.6",
+                "plist": "^3.0.5"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/osx-sign/-/osx-sign-1.0.4.tgz",
+            "version": "1.0.4"
+        },
+        "@electron/rebuild": {
+            "dependencies": {
+                "fs-extra": {
+                    "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+                    "requires": {
+                        "graceful-fs": "^4.2.0",
+                        "jsonfile": "^6.0.1",
+                        "universalify": "^2.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+                    "version": "10.1.0"
+                }
+            },
+            "integrity": "sha512-DH9Ol4JCnHDYVOD0fKWq+Qqbn/0WU1O6QR0mIpMXEVU4YFM4PlaqNC9K36mGShNBxxGFotZCMDrB1wl/iHM12g==",
+            "requires": {
+                "@malept/cross-spawn-promise": "^2.0.0",
+                "chalk": "^4.0.0",
+                "debug": "^4.1.1",
+                "detect-libc": "^2.0.1",
+                "fs-extra": "^10.0.0",
+                "got": "^11.7.0",
+                "node-abi": "^3.0.0",
+                "node-api-version": "^0.1.4",
+                "node-gyp": "^9.0.0",
+                "ora": "^5.1.0",
+                "semver": "^7.3.5",
+                "tar": "^6.0.5",
+                "yargs": "^17.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/rebuild/-/rebuild-3.2.13.tgz",
+            "version": "3.2.13"
+        },
         "@electron/universal": {
-            "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
+            "dependencies": {
+                "@malept/cross-spawn-promise": {
+                    "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+                    "requires": {
+                        "cross-spawn": "^7.0.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
+                    "version": "1.1.1"
+                }
+            },
+            "integrity": "sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==",
             "requires": {
+                "@electron/asar": "^3.2.1",
                 "@malept/cross-spawn-promise": "^1.1.0",
-                "asar": "^3.1.0",
                 "debug": "^4.3.1",
-                "dir-compare": "^2.4.0",
+                "dir-compare": "^3.0.0",
                 "fs-extra": "^9.0.1",
                 "minimatch": "^3.0.4",
                 "plist": "^3.0.4"
             },
-            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
-            "version": "1.2.1"
+            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz",
+            "version": "1.3.4"
         },
         "@gar/promisify": {
             "integrity": "sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==",
             "resolved": "https://registry.npmjs.org/@gar/promisify/-/promisify-1.1.3.tgz",
             "version": "1.1.3"
         },
         "@hutson/parse-repository-url": {
@@ -912,20 +1004,20 @@
                 "npmlog": "^6.0.2",
                 "write-file-atomic": "^4.0.1"
             },
             "resolved": "https://registry.npmjs.org/@lerna/write-log-file/-/write-log-file-5.5.2.tgz",
             "version": "5.5.2"
         },
         "@malept/cross-spawn-promise": {
-            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+            "integrity": "sha512-1DpKU0Z5ThltBwjNySMC14g0CkbyhCaz9FkhxqNsZI6uAPJXFS8cMXlBKo26FJ8ZuW6S9GCMcR9IO5k2X5/9Fg==",
             "requires": {
                 "cross-spawn": "^7.0.1"
             },
-            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
-            "version": "1.1.1"
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-2.0.0.tgz",
+            "version": "2.0.0"
         },
         "@malept/flatpak-bundler": {
             "integrity": "sha512-9QOtNffcOF/c1seMCDnjckb3R9WHcG34tky+FHpNKKCW0wc/scYLwMtO+ptyGUfMW0/b/n4qRiALlaFHc9Oj7Q==",
             "requires": {
                 "debug": "^4.1.1",
                 "fs-extra": "^9.0.0",
                 "lodash": "^4.17.15",
@@ -1362,19 +1454,43 @@
             "requires": {
                 "node-addon-api": "^3.2.1",
                 "node-gyp-build": "^4.3.0"
             },
             "resolved": "https://registry.npmjs.org/@parcel/watcher/-/watcher-2.0.4.tgz",
             "version": "2.0.4"
         },
+        "@sindresorhus/is": {
+            "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
+            "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
+            "version": "4.6.0"
+        },
+        "@szmarczak/http-timer": {
+            "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
+            "requires": {
+                "defer-to-connect": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
+            "version": "4.0.6"
+        },
         "@tootallnate/once": {
             "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
             "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
             "version": "2.0.0"
         },
+        "@types/cacheable-request": {
+            "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
+            "requires": {
+                "@types/http-cache-semantics": "*",
+                "@types/keyv": "^3.1.4",
+                "@types/node": "*",
+                "@types/responselike": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
+            "version": "6.0.3"
+        },
         "@types/debug": {
             "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
             "requires": {
                 "@types/ms": "*"
             },
             "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
             "version": "4.1.7"
@@ -1383,29 +1499,32 @@
             "integrity": "sha512-nEnwB++1u5lVDM2UI4c1+5R+FYaKfaAzS4OococimjVm3nQw3TuzH5UNsocrcTBbhnerblyHj4A49qXbIiZdpA==",
             "requires": {
                 "@types/node": "*"
             },
             "resolved": "https://registry.npmjs.org/@types/fs-extra/-/fs-extra-9.0.13.tgz",
             "version": "9.0.13"
         },
-        "@types/glob": {
-            "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
-            "optional": true,
-            "requires": {
-                "@types/minimatch": "*",
-                "@types/node": "*"
-            },
-            "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
-            "version": "7.2.0"
+        "@types/http-cache-semantics": {
+            "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
+            "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
+            "version": "4.0.1"
         },
         "@types/json5": {
             "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
             "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
             "version": "0.0.29"
         },
+        "@types/keyv": {
+            "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
+            "requires": {
+                "@types/node": "*"
+            },
+            "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
+            "version": "3.1.4"
+        },
         "@types/minimatch": {
             "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
             "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
             "version": "3.0.5"
         },
         "@types/minimist": {
             "integrity": "sha512-jhuKLIRrhvCPLqwPcx6INqmKeiA5EWrsCOPhrlFSrbrmU4ZMPjj5Ul/oLCMDO98XRUIwVm78xICz4EPCektzeQ==",
@@ -1437,32 +1556,27 @@
             "requires": {
                 "@types/node": "*",
                 "xmlbuilder": ">=11.0.1"
             },
             "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
             "version": "3.0.2"
         },
+        "@types/responselike": {
+            "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
+            "requires": {
+                "@types/node": "*"
+            },
+            "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
+            "version": "1.0.0"
+        },
         "@types/verror": {
             "integrity": "sha512-NNm+gdePAX1VGvPcGZCDKQZKYSiAWigKhKaz5KF94hG6f2s8de9Ow5+7AbXoeKxL8gavZfk4UquSAygOF2duEQ==",
             "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.6.tgz",
             "version": "1.10.6"
         },
-        "@types/yargs": {
-            "integrity": "sha512-aB4y9UDUXTSMxmM4MH+YnuR0g5Cph3FLQBoWoMB21DSvFVAxRVEHEMx3TLh+zUZYMCQtKiqazz0Q4Rre31f/OA==",
-            "requires": {
-                "@types/yargs-parser": "*"
-            },
-            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.11.tgz",
-            "version": "17.0.11"
-        },
-        "@types/yargs-parser": {
-            "integrity": "sha512-iO9ZQHkZxHn4mSakYV0vFHAVDyEOIJQrV2uZ06HxEPcx+mt8swXoZHIbaaJ2crJYFfErySgktuTZ3BeLz+XmFA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.0.tgz",
-            "version": "21.0.0"
-        },
         "@yarnpkg/lockfile": {
             "integrity": "sha512-GpSwvyXOcOOlV70vbnzjj4fW5xW/FdUF6nQEt1ENy7m4ZCczi1+/buVUPAqmGfqznsORNFzUMjctTIp8a9tuCQ==",
             "resolved": "https://registry.npmjs.org/@yarnpkg/lockfile/-/lockfile-1.1.0.tgz",
             "version": "1.1.0"
         },
         "@yarnpkg/parsers": {
             "integrity": "sha512-ZzW6i9dspJsMzA0SxOTa/HABWWHYDIM4qSGE/ndX8wgae1qg+1+iqLQVVxKli674f386mo3RAKAmXia0q5nCOg==",
@@ -1606,14 +1720,22 @@
         "app-builder-lib": {
             "dependencies": {
                 "argparse": {
                     "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
                     "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
                     "version": "2.0.1"
                 },
+                "brace-expansion": {
+                    "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
+                    "requires": {
+                        "balanced-match": "^1.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
+                    "version": "2.0.1"
+                },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
@@ -1623,47 +1745,66 @@
                 "js-yaml": {
                     "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
                     "requires": {
                         "argparse": "^2.0.1"
                     },
                     "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
                     "version": "4.1.0"
+                },
+                "minimatch": {
+                    "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+                    "requires": {
+                        "brace-expansion": "^2.0.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+                    "version": "5.1.6"
+                },
+                "semver": {
+                    "integrity": "sha512-Wvss5ivl8TMRZXXESstBA4uR5iXgEN/VC5/sOcuXdVLzcdkz4HWetIoRfG5gb5X+ij/G9rw9YoGn3QoQ8OCSpw==",
+                    "requires": {
+                        "lru-cache": "^6.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/semver/-/semver-7.5.1.tgz",
+                    "version": "7.5.1"
                 }
             },
-            "integrity": "sha512-Pf5HLmrRaeativDNhB+BxUdnSWIsz8H1eABkn/wvZ3WLNzbvIRvLRrsO9e9jTU10oDebxU/8FZ8InalmJxYCuA==",
+            "integrity": "sha512-EcdqtWvg1LAApKCfyRBukcVkmsa94s2e1VKHjZLpvA9/D14QEt8rHhffYeaA+cH/pVeoNVn2ob735KnfJKEEow==",
             "requires": {
                 "7zip-bin": "~5.1.1",
                 "@develar/schema-utils": "~2.6.5",
-                "@electron/universal": "1.2.1",
+                "@electron/notarize": "^1.2.3",
+                "@electron/osx-sign": "^1.0.4",
+                "@electron/rebuild": "^3.2.13",
+                "@electron/universal": "1.3.4",
                 "@malept/flatpak-bundler": "^0.4.0",
+                "@types/fs-extra": "9.0.13",
                 "async-exit-hook": "^2.0.1",
                 "bluebird-lst": "^1.0.9",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
                 "chromium-pickle-js": "^0.2.0",
                 "debug": "^4.3.4",
-                "ejs": "^3.1.7",
-                "electron-osx-sign": "^0.6.0",
-                "electron-publish": "23.5.0",
+                "ejs": "^3.1.8",
+                "electron-publish": "24.4.0",
                 "form-data": "^4.0.0",
                 "fs-extra": "^10.1.0",
                 "hosted-git-info": "^4.1.0",
                 "is-ci": "^3.0.0",
-                "isbinaryfile": "^4.0.10",
+                "isbinaryfile": "^5.0.0",
                 "js-yaml": "^4.1.0",
                 "lazy-val": "^1.0.5",
-                "minimatch": "^3.1.2",
-                "read-config-file": "6.2.0",
+                "minimatch": "^5.1.1",
+                "read-config-file": "6.3.2",
                 "sanitize-filename": "^1.6.3",
-                "semver": "^7.3.7",
-                "tar": "^6.1.11",
+                "semver": "^7.3.8",
+                "tar": "^6.1.12",
                 "temp-file": "^3.4.0"
             },
-            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "aproba": {
             "integrity": "sha512-lYe4Gx7QT+MKGbDsA+Z+he/Wtef0BiwDOlK/XkBrdfsh9J/jPPXbX0tE9x9cl27Tmu5gg3QUbUrQYa/y+KOHPQ==",
             "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.0.0.tgz",
             "version": "2.0.0"
         },
         "are-we-there-yet": {
@@ -1704,26 +1845,14 @@
             "version": "1.0.1"
         },
         "asap": {
             "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
             "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
             "version": "2.0.6"
         },
-        "asar": {
-            "integrity": "sha512-COdw2ZQvKdFGFxXwX3oYh2/sOsJWJegrdJCGxnN4MZ7IULgRBp9P6665aqj9z1v9VwP4oP1hRBojRDQ//IGgAg==",
-            "requires": {
-                "@types/glob": "^7.1.1",
-                "chromium-pickle-js": "^0.2.0",
-                "commander": "^5.0.0",
-                "glob": "^7.1.6",
-                "minimatch": "^3.0.4"
-            },
-            "resolved": "https://registry.npmjs.org/asar/-/asar-3.2.0.tgz",
-            "version": "3.2.0"
-        },
         "assert-plus": {
             "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
             "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
             "version": "1.0.0"
         },
         "astral-regex": {
             "integrity": "sha512-Z7tMw1ytTXt5jqMcOP+OQteU1VuNK9Y02uuJtKQ1Sv69jXQKKg5cibLwGJow8yzZP+eAc18EmLGPal0bp36rvQ==",
@@ -1835,37 +1964,18 @@
             "requires": {
                 "base64-js": "^1.3.1",
                 "ieee754": "^1.1.13"
             },
             "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
             "version": "5.7.1"
         },
-        "buffer-alloc": {
-            "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
-            "requires": {
-                "buffer-alloc-unsafe": "^1.1.0",
-                "buffer-fill": "^1.0.0"
-            },
-            "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
-            "version": "1.2.0"
-        },
-        "buffer-alloc-unsafe": {
-            "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
-            "version": "1.1.0"
-        },
         "buffer-equal": {
-            "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
-            "version": "1.0.0"
-        },
-        "buffer-fill": {
-            "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
-            "version": "1.0.0"
+            "integrity": "sha512-QoV3ptgEaQpvVwbXdSO39iqPQTCxSF7A5U99AxbHYqUdCizL/lH2Z0A2y6nbZucxMEOtNyZfG2s6gsVugGpKkg==",
+            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.1.tgz",
+            "version": "1.0.1"
         },
         "buffer-from": {
             "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
             "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
             "version": "1.1.2"
         },
         "builder-util": {
@@ -1890,45 +2000,44 @@
                     "requires": {
                         "argparse": "^2.0.1"
                     },
                     "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
                     "version": "4.1.0"
                 }
             },
-            "integrity": "sha512-TYz3sj2NMoG1/524/Je0p0RtEAKKjmTL6z2WQnzU6yM+WU/jHnA2OqX9Q/jys+rKuMy+7MCMdc+G+HrbpKWYSg==",
+            "integrity": "sha512-tONb/GIK1MKa1BcOPHE1naId3o5nj6gdka5kP7yUJh2DOfF+jMq3laiu+UOZH6A7ZtkMtnGNMYFKFTIv408n/A==",
             "requires": {
                 "7zip-bin": "~5.1.1",
                 "@types/debug": "^4.1.6",
-                "@types/fs-extra": "^9.0.11",
                 "app-builder-bin": "4.0.0",
                 "bluebird-lst": "^1.0.9",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
                 "cross-spawn": "^7.0.3",
                 "debug": "^4.3.4",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "http-proxy-agent": "^5.0.0",
-                "https-proxy-agent": "^5.0.0",
+                "https-proxy-agent": "^5.0.1",
                 "is-ci": "^3.0.0",
                 "js-yaml": "^4.1.0",
                 "source-map-support": "^0.5.19",
                 "stat-mode": "^1.0.0",
                 "temp-file": "^3.4.0"
             },
-            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.5.0.tgz",
-            "version": "23.5.0"
+            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "builder-util-runtime": {
-            "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
+            "integrity": "sha512-2rLv/uQD2x+dJ0J3xtsmI12AlRyk7p45TEbE/6o/fbb633e/S3pPgm+ct+JHsoY7r39dKHnGEFk/AASRFdnXmA==",
             "requires": {
                 "debug": "^4.3.4",
                 "sax": "^1.2.4"
             },
-            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
-            "version": "9.1.1"
+            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.2.1.tgz",
+            "version": "9.2.1"
         },
         "builtins": {
             "integrity": "sha512-qwVpFEHNfhYJIzNRBvd2C1kyo6jz3ZSMPyyuR47OPdiKWlbYnZNyDWuyR175qDnAJLiCo5fBBqPb3RiXgWlkOQ==",
             "requires": {
                 "semver": "^7.0.0"
             },
             "resolved": "https://registry.npmjs.org/builtins/-/builtins-5.0.1.tgz",
@@ -1995,14 +2104,43 @@
                 "ssri": "^9.0.0",
                 "tar": "^6.1.11",
                 "unique-filename": "^2.0.0"
             },
             "resolved": "https://registry.npmjs.org/cacache/-/cacache-16.1.3.tgz",
             "version": "16.1.3"
         },
+        "cacheable-lookup": {
+            "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
+            "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
+            "version": "5.0.4"
+        },
+        "cacheable-request": {
+            "dependencies": {
+                "get-stream": {
+                    "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
+                    "requires": {
+                        "pump": "^3.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
+                    "version": "5.2.0"
+                }
+            },
+            "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
+            "requires": {
+                "clone-response": "^1.0.2",
+                "get-stream": "^5.1.0",
+                "http-cache-semantics": "^4.0.0",
+                "keyv": "^4.0.0",
+                "lowercase-keys": "^2.0.0",
+                "normalize-url": "^6.0.1",
+                "responselike": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
+            "version": "7.0.2"
+        },
         "callsites": {
             "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
             "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
             "version": "3.1.0"
         },
         "camelcase": {
             "integrity": "sha512-L28STB170nwWS63UjtlEOE3dldQApaJXZkOI1uMFfzf3rRuPegHaHesyee+YxQ+W6SvRDQV6UrdOdRiR153wJg==",
@@ -2074,17 +2212,17 @@
         },
         "chromium-pickle-js": {
             "integrity": "sha512-1R5Fho+jBq0DDydt+/vHWj5KJNJCKdARKOCwZUen84I5BreWoLqRLANH1U87eJy1tiASPtMnGqJJq0ZsLoRPOw==",
             "resolved": "https://registry.npmjs.org/chromium-pickle-js/-/chromium-pickle-js-0.2.0.tgz",
             "version": "0.2.0"
         },
         "ci-info": {
-            "integrity": "sha512-t5QdPT5jq3o262DOQ8zA6E1tlH2upmUc4Hlvrbx1pGYJuiiHl7O7rvVNI+l8HTVhd/q3Qc9vqimkNk5yiXsAug==",
-            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.4.0.tgz",
-            "version": "3.4.0"
+            "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+            "version": "3.8.0"
         },
         "clean-stack": {
             "integrity": "sha512-lR9wNiMRcVQjSB3a7xXGLuz4cr4wJuuXlaAEbRutGowQTmlp7R72/DOgN21e8jdwblMWl9UOJMJXarX94pzKdg==",
             "requires": {
                 "escape-string-regexp": "4.0.0"
             },
             "resolved": "https://registry.npmjs.org/clean-stack/-/clean-stack-3.0.1.tgz",
@@ -2156,14 +2294,22 @@
                 "is-plain-object": "^2.0.4",
                 "kind-of": "^6.0.2",
                 "shallow-clone": "^3.0.0"
             },
             "resolved": "https://registry.npmjs.org/clone-deep/-/clone-deep-4.0.1.tgz",
             "version": "4.0.1"
         },
+        "clone-response": {
+            "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
+            "requires": {
+                "mimic-response": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "cmd-shim": {
             "integrity": "sha512-qkCtZ59BidfEwHltnJwkyVZn+XQojdAySM1D1gSeh11Z4pW1Kpolkyo53L5noc0nrxmIvyFwTmJRo4xs7FFLPw==",
             "requires": {
                 "mkdirp-infer-owner": "^2.0.0"
             },
             "resolved": "https://registry.npmjs.org/cmd-shim/-/cmd-shim-5.0.0.tgz",
             "version": "5.0.0"
@@ -2182,19 +2328,14 @@
             "version": "1.1.4"
         },
         "color-support": {
             "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
             "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
             "version": "1.1.3"
         },
-        "colors": {
-            "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
-            "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
-            "version": "1.0.3"
-        },
         "columnify": {
             "integrity": "sha512-lomjuFZKfM6MSAnV9aCZC9sc0qGbmZdfygNv+nCpqVkSKdCxCklLtd16O0EILGkImHw9ZpHkAnHaB+8Zxq5W6Q==",
             "requires": {
                 "strip-ansi": "^6.0.1",
                 "wcwidth": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/columnify/-/columnify-1.6.0.tgz",
@@ -2263,14 +2404,23 @@
             "requires": {
                 "ini": "^1.3.4",
                 "proto-list": "~1.2.1"
             },
             "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
             "version": "1.1.13"
         },
+        "config-file-ts": {
+            "integrity": "sha512-cKSW0BfrSaAUnxpgvpXPLaaW/umg4bqg4k3GO1JqlRfpx+d5W0GDXznCMkWotJQek5Mmz1MJVChQnz3IVaeMZQ==",
+            "requires": {
+                "glob": "^7.1.6",
+                "typescript": "^4.0.2"
+            },
+            "resolved": "https://registry.npmjs.org/config-file-ts/-/config-file-ts-0.2.4.tgz",
+            "version": "0.2.4"
+        },
         "console-control-strings": {
             "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ==",
             "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
             "version": "1.1.0"
         },
         "conventional-changelog-angular": {
             "integrity": "sha512-i/gipMxs7s8L/QeuavPF2hLnJgH6pEZAttySB6aiQLWcX3puWDL3ACVmvBhJGxnAy52Qc15ua26BufY6KpmrVA==",
@@ -2442,27 +2592,47 @@
             "requires": {
                 "decamelize": "^1.1.0",
                 "map-obj": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/decamelize-keys/-/decamelize-keys-1.1.0.tgz",
             "version": "1.1.0"
         },
+        "decompress-response": {
+            "dependencies": {
+                "mimic-response": {
+                    "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
+                    "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
+                    "version": "3.1.0"
+                }
+            },
+            "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
+            "requires": {
+                "mimic-response": "^3.1.0"
+            },
+            "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
+            "version": "6.0.0"
+        },
         "dedent": {
             "integrity": "sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==",
             "resolved": "https://registry.npmjs.org/dedent/-/dedent-0.7.0.tgz",
             "version": "0.7.0"
         },
         "defaults": {
             "integrity": "sha512-s82itHOnYrN0Ib8r+z7laQz3sdE+4FP3d9Q7VLO7U+KRT+CR0GsWuyHxzdAY82I7cXv0G/twrqomTJLOssO5HA==",
             "requires": {
                 "clone": "^1.0.2"
             },
             "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.3.tgz",
             "version": "1.0.3"
         },
+        "defer-to-connect": {
+            "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
+            "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "define-lazy-prop": {
             "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
             "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
             "version": "2.0.0"
         },
         "delayed-stream": {
             "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
@@ -2485,51 +2655,36 @@
             "version": "2.3.1"
         },
         "detect-indent": {
             "integrity": "sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==",
             "resolved": "https://registry.npmjs.org/detect-indent/-/detect-indent-6.1.0.tgz",
             "version": "6.1.0"
         },
+        "detect-libc": {
+            "integrity": "sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==",
+            "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "dezalgo": {
             "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
             "requires": {
                 "asap": "^2.0.0",
                 "wrappy": "1"
             },
             "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
             "version": "1.0.4"
         },
         "dir-compare": {
-            "dependencies": {
-                "commander": {
-                    "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
-                    "requires": {
-                        "graceful-readlink": ">= 1.0.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
-                    "version": "2.9.0"
-                },
-                "minimatch": {
-                    "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
-                    "requires": {
-                        "brace-expansion": "^1.1.7"
-                    },
-                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
-                    "version": "3.0.4"
-                }
-            },
-            "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
+            "integrity": "sha512-J7/et3WlGUCxjdnD3HAAzQ6nsnc0WL6DD7WcwJb7c39iH1+AWfg+9OqzJNaI6PkBwBvm1mhZNL9iY/nRiZXlPg==",
             "requires": {
-                "buffer-equal": "1.0.0",
-                "colors": "1.0.3",
-                "commander": "2.9.0",
-                "minimatch": "3.0.4"
+                "buffer-equal": "^1.0.0",
+                "minimatch": "^3.0.4"
             },
-            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
-            "version": "2.4.0"
+            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-3.3.0.tgz",
+            "version": "3.3.0"
         },
         "dir-glob": {
             "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
             "requires": {
                 "path-type": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
@@ -2557,26 +2712,26 @@
                     "requires": {
                         "argparse": "^2.0.1"
                     },
                     "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
                     "version": "4.1.0"
                 }
             },
-            "integrity": "sha512-TqIV0rdliw7FZ0DqY88FyPBH+q/Bp+yCPIhdYVraQxYMcaCNu7G3ZizApfEpCvoobtE6MY06/u91I9M7+gGYkw==",
+            "integrity": "sha512-p5z9Cx539GSBYb+b09Z+hMhuBTh/BrI71VRg4rgF6f2xtIRK/YlTGVS/O08k5OojoyhZcpS7JXxDVSmQoWgiiQ==",
             "requires": {
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
                 "dmg-license": "^1.0.11",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "iconv-lite": "^0.6.2",
                 "js-yaml": "^4.1.0"
             },
-            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "dmg-license": {
             "integrity": "sha512-ZdzmqwKmECOWJpqefloC5OJy1+WZBBse5+MR88z9g9Zn4VY+WYUkAyojmhzJckH5YbbZGcYIuGAkY5/Ys5OM2Q==",
             "requires": {
                 "@types/plist": "^3.0.1",
                 "@types/verror": "^1.10.3",
                 "ajv": "^6.10.0",
@@ -2629,93 +2784,56 @@
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
                     "version": "10.1.0"
                 }
             },
-            "integrity": "sha512-SWTlf9jqbSa/UFDy1xcaMLIAL39TMd1PPYIgDN8bnfzJntMKEd16qguKsAxfW/kEKcPHLCVh69JyS1GbQ4sROQ==",
+            "integrity": "sha512-D5INxodxaUIJgEX6p/fqBd8wQNS8XRAToNIJ9SQC+taNS5D73ZsjLuXiRraFGCB0cVk9KeKhEkdEOH5AaVya4g==",
             "requires": {
-                "@types/yargs": "^17.0.1",
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "dmg-builder": "23.5.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "dmg-builder": "24.4.0",
+                "fs-extra": "^10.1.0",
                 "is-ci": "^3.0.0",
                 "lazy-val": "^1.0.5",
-                "read-config-file": "6.2.0",
-                "simple-update-notifier": "^1.0.7",
-                "yargs": "^17.5.1"
-            },
-            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.5.1.tgz",
-            "version": "23.5.1"
-        },
-        "electron-osx-sign": {
-            "dependencies": {
-                "debug": {
-                    "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-                    "requires": {
-                        "ms": "2.0.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-                    "version": "2.6.9"
-                },
-                "isbinaryfile": {
-                    "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
-                    "requires": {
-                        "buffer-alloc": "^1.2.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
-                    "version": "3.0.3"
-                },
-                "ms": {
-                    "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
-                    "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-                    "version": "2.0.0"
-                }
-            },
-            "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
-            "requires": {
-                "bluebird": "^3.5.0",
-                "compare-version": "^0.1.2",
-                "debug": "^2.6.8",
-                "isbinaryfile": "^3.0.2",
-                "minimist": "^1.2.0",
-                "plist": "^3.0.1"
+                "read-config-file": "6.3.2",
+                "simple-update-notifier": "^1.1.0",
+                "yargs": "^17.6.2"
             },
-            "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
-            "version": "0.6.0"
+            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "electron-publish": {
             "dependencies": {
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
                     "version": "10.1.0"
                 }
             },
-            "integrity": "sha512-dY/bAN5tIjEPX1AV5FK9TXKKoGGalGb53SgGbhiII3o+WLzK+4vew6rrmChBTwELP/q8r4a89X+slTDG/iPdww==",
+            "integrity": "sha512-U3mnVSxIfNrLW7ZnwiedFhcLf6ExPFXgAsx89WpfQFsV4gFAt/LG+H74p0m9NSvsLXiZuF82yXoxi7Ou8GHq4Q==",
             "requires": {
                 "@types/fs-extra": "^9.0.11",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "fs-extra": "^10.0.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "fs-extra": "^10.1.0",
                 "lazy-val": "^1.0.5",
                 "mime": "^2.5.2"
             },
-            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.5.0.tgz",
-            "version": "23.5.0"
+            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "emoji-regex": {
             "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
             "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
             "version": "8.0.0"
         },
         "encoding": {
@@ -3167,24 +3285,37 @@
                 "ignore": "^5.2.0",
                 "merge2": "^1.4.1",
                 "slash": "^3.0.0"
             },
             "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
             "version": "11.1.0"
         },
+        "got": {
+            "integrity": "sha512-6tfZ91bOr7bOXnK7PRDCGBLa1H4U080YHNaAQ2KsMGlLEzRbk44nsZF2E1IeRc3vtJHPVbKCYgdFbaGO2ljd8g==",
+            "requires": {
+                "@sindresorhus/is": "^4.0.0",
+                "@szmarczak/http-timer": "^4.0.5",
+                "@types/cacheable-request": "^6.0.1",
+                "@types/responselike": "^1.0.0",
+                "cacheable-lookup": "^5.0.3",
+                "cacheable-request": "^7.0.2",
+                "decompress-response": "^6.0.0",
+                "http2-wrapper": "^1.0.0-beta.5.2",
+                "lowercase-keys": "^2.0.0",
+                "p-cancelable": "^2.0.0",
+                "responselike": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/got/-/got-11.8.6.tgz",
+            "version": "11.8.6"
+        },
         "graceful-fs": {
             "integrity": "sha512-9ByhssR2fPVsNZj478qUUbKfmL0+t5BDVyjShtyZZLiK7ZDAArFFfopyOTj0M05wE2tJPisA4iTnnXl2YoPvOA==",
             "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.10.tgz",
             "version": "4.2.10"
         },
-        "graceful-readlink": {
-            "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
-            "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
-            "version": "1.0.1"
-        },
         "handlebars": {
             "integrity": "sha512-aAcXm5OAfE/8IXkcZvCepKU3VzW1/39Fb5ZuqMtgI/hT8X2YgoMvBY5dLhq/cpOvw7Lk1nK/UF71aLG/ZnVYRA==",
             "requires": {
                 "minimist": "^1.2.5",
                 "neo-async": "^2.6.0",
                 "source-map": "^0.6.1",
                 "uglify-js": "^3.1.4",
@@ -3221,28 +3352,44 @@
             "requires": {
                 "lru-cache": "^6.0.0"
             },
             "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
             "version": "4.1.0"
         },
         "http-cache-semantics": {
-            "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
-            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
-            "version": "4.1.0"
+            "integrity": "sha512-er295DKPVsV82j5kw1Gjt+ADA/XYHsajl82cGNQG2eyoPkvgUhX+nDIyelzhIWbbsXP39EHcI6l5tYs2FYqYXQ==",
+            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.1.tgz",
+            "version": "4.1.1"
         },
         "http-proxy-agent": {
             "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
             "requires": {
                 "@tootallnate/once": "2",
                 "agent-base": "6",
                 "debug": "4"
             },
             "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "http2-wrapper": {
+            "dependencies": {
+                "quick-lru": {
+                    "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
+                    "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
+                    "version": "5.1.1"
+                }
+            },
+            "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
+            "requires": {
+                "quick-lru": "^5.1.1",
+                "resolve-alpn": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "https-proxy-agent": {
             "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
             "requires": {
                 "agent-base": "6",
                 "debug": "4"
             },
             "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
@@ -3568,17 +3715,17 @@
         },
         "isarray": {
             "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
             "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
             "version": "1.0.0"
         },
         "isbinaryfile": {
-            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
-            "version": "4.0.10"
+            "integrity": "sha512-UDdnyGvMajJUWCkib7Cei/dvyJrrvo4FIrsvSFWdPpXSUorzXrDJ0S+X5Q4ZlasfPjca4yqCNNsjbCeiy8FFeg==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-5.0.0.tgz",
+            "version": "5.0.0"
         },
         "isexe": {
             "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
             "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
             "version": "2.0.0"
         },
         "isobject": {
@@ -3607,14 +3754,19 @@
             "requires": {
                 "argparse": "^1.0.7",
                 "esprima": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-3.14.1.tgz",
             "version": "3.14.1"
         },
+        "json-buffer": {
+            "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
+            "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
+            "version": "3.0.1"
+        },
         "json-parse-better-errors": {
             "integrity": "sha512-mrqyZKfX5EhL7hvqcV6WG1yYjnjeuYDzDhhcAAUrq8Po85NBQBJP+ZDUT75qZQ98IkUoBqdkExkukOU7Ts2wrw==",
             "resolved": "https://registry.npmjs.org/json-parse-better-errors/-/json-parse-better-errors-1.0.2.tgz",
             "version": "1.0.2"
         },
         "json-parse-even-better-errors": {
             "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
@@ -3633,17 +3785,17 @@
         },
         "json-stringify-safe": {
             "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
             "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
             "version": "5.0.1"
         },
         "json5": {
-            "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
-            "version": "2.2.1"
+            "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+            "version": "2.2.3"
         },
         "jsonc-parser": {
             "integrity": "sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==",
             "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz",
             "version": "3.2.0"
         },
         "jsonfile": {
@@ -3666,14 +3818,22 @@
             "version": "5.1.1"
         },
         "just-diff-apply": {
             "integrity": "sha512-AAV5Jw7tsniWwih8Ly3fXxEZ06y+6p5TwQMsw0dzZ/wPKilzyDgdAnL0Ug4NNIquPUOh1vfFWEHbmXUqM5+o8g==",
             "resolved": "https://registry.npmjs.org/just-diff-apply/-/just-diff-apply-5.4.1.tgz",
             "version": "5.4.1"
         },
+        "keyv": {
+            "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
+            "requires": {
+                "json-buffer": "3.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
+            "version": "4.5.2"
+        },
         "kind-of": {
             "integrity": "sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==",
             "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-6.0.3.tgz",
             "version": "6.0.3"
         },
         "lazy-val": {
             "integrity": "sha512-0/BnGCCfyUMkBpeDgWihanIAF9JmZhHBgUhEqzvf+adhNGLoP6TaiI5oF8oyb3I45P+PcnrqihSf01M0l0G5+Q==",
@@ -3839,14 +3999,19 @@
             "requires": {
                 "chalk": "^4.1.0",
                 "is-unicode-supported": "^0.1.0"
             },
             "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "lowercase-keys": {
+            "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
+            "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
+            "version": "2.0.0"
+        },
         "lru-cache": {
             "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
             "requires": {
                 "yallist": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
             "version": "6.0.0"
@@ -4020,14 +4185,19 @@
             "version": "2.1.35"
         },
         "mimic-fn": {
             "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
             "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
             "version": "2.1.0"
         },
+        "mimic-response": {
+            "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
+            "version": "1.0.1"
+        },
         "min-indent": {
             "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
             "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
             "version": "1.0.1"
         },
         "minimatch": {
             "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
@@ -4186,19 +4356,35 @@
             "version": "2.6.2"
         },
         "nice-try": {
             "integrity": "sha512-1nh45deeb5olNY7eX82BkPO7SSxR5SSYJiPTrTdFUVYwAl8CKMA5N9PjTYkHiRjisVcxcQ1HXdLhx2qxxJzLNQ==",
             "resolved": "https://registry.npmjs.org/nice-try/-/nice-try-1.0.5.tgz",
             "version": "1.0.5"
         },
+        "node-abi": {
+            "integrity": "sha512-zNy02qivjjRosswoYmPi8hIKJRr8MpQyeKT6qlcq/OnOgA3Rhoae+IYOqsM9V5+JnHWmxKnWOT2GxvtqdtOCXA==",
+            "requires": {
+                "semver": "^7.3.5"
+            },
+            "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.40.0.tgz",
+            "version": "3.40.0"
+        },
         "node-addon-api": {
             "integrity": "sha512-ibPK3iA+vaY1eEjESkQkM0BbCqFOaZMiXRTtdB0u7b4djtY6JnsjvPdUHVMg6xQt3B8fpTTWHI9A+ADjM9frzg==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-1.7.2.tgz",
             "version": "1.7.2"
         },
+        "node-api-version": {
+            "integrity": "sha512-KGXihXdUChwJAOHO53bv9/vXcLmdUsZ6jIptbvYvkpKfth+r7jw44JkVxQFA3kX5nQjzjmGu1uAu/xNNLNlI5g==",
+            "requires": {
+                "semver": "^7.3.5"
+            },
+            "resolved": "https://registry.npmjs.org/node-api-version/-/node-api-version-0.1.4.tgz",
+            "version": "0.1.4"
+        },
         "node-fetch": {
             "integrity": "sha512-ZjMPFEfVx5j+y2yF35Kzx5sF7kDzxuDj6ziH4FFbOp87zKDZNx8yExJIb05OGF4Nlt9IHFIMBkRl41VdvcNdbQ==",
             "requires": {
                 "whatwg-url": "^5.0.0"
             },
             "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.7.tgz",
             "version": "2.6.7"
@@ -4245,14 +4431,19 @@
             "version": "3.0.3"
         },
         "normalize-path": {
             "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
             "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
             "version": "3.0.0"
         },
+        "normalize-url": {
+            "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
+            "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
+            "version": "6.1.0"
+        },
         "npm-bundled": {
             "integrity": "sha512-x5DHup0SuyQcmL3s7Rx/YQ8sbw/Hzg0rj48eN0dV7hf5cmQq5PXIeioroH3raV1QC1yh3uTYuMThvEQF3iKgGQ==",
             "requires": {
                 "npm-normalize-package-bin": "^1.0.1"
             },
             "resolved": "https://registry.npmjs.org/npm-bundled/-/npm-bundled-1.1.2.tgz",
             "version": "1.1.2"
@@ -4643,14 +4834,19 @@
             "version": "5.4.1"
         },
         "os-tmpdir": {
             "integrity": "sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==",
             "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
             "version": "1.0.2"
         },
+        "p-cancelable": {
+            "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
+            "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
+            "version": "2.1.1"
+        },
         "p-finally": {
             "integrity": "sha512-LICb2p9CB7FS+0eR1oqWnHhp0FljGLZCWBE9aix0Uye9W8LTQPwMTYVGWQWIw9RdQiDg4+epXQODwIYJtSJaow==",
             "resolved": "https://registry.npmjs.org/p-finally/-/p-finally-1.0.0.tgz",
             "version": "1.0.0"
         },
         "p-limit": {
             "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
@@ -4979,14 +5175,23 @@
             "version": "1.2.4"
         },
         "protocols": {
             "integrity": "sha512-/XJ368cyBJ7fzLMwLKv1e4vLxOju2MNAIokcr7meSaNcVbWz/CPcW22cP04mwxOErdA5mwjA8Q6w/cdAQxVn7Q==",
             "resolved": "https://registry.npmjs.org/protocols/-/protocols-2.0.1.tgz",
             "version": "2.0.1"
         },
+        "pump": {
+            "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
+            "requires": {
+                "end-of-stream": "^1.1.0",
+                "once": "^1.3.1"
+            },
+            "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
+            "version": "3.0.0"
+        },
         "punycode": {
             "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
             "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
             "version": "2.1.1"
         },
         "q": {
             "integrity": "sha512-kV/CThkXo6xyFEZUugw/+pIOywXcDbFYgSct5cT3gqlbkBE1SJdwy6UQoZvodiWF/ckQLZyDE/Bu1M6gVu5lVw==",
@@ -5033,24 +5238,25 @@
                     "requires": {
                         "argparse": "^2.0.1"
                     },
                     "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
                     "version": "4.1.0"
                 }
             },
-            "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
+            "integrity": "sha512-M80lpCjnE6Wt6zb98DoW8WHR09nzMSpu8XHtPkiTHrJ5Az9CybfeQhTJ8D7saeBHpGhLPIVyA8lcL6ZmdKwY6Q==",
             "requires": {
+                "config-file-ts": "^0.2.4",
                 "dotenv": "^9.0.2",
                 "dotenv-expand": "^5.1.0",
                 "js-yaml": "^4.1.0",
                 "json5": "^2.2.0",
                 "lazy-val": "^1.0.4"
             },
-            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
-            "version": "6.2.0"
+            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.3.2.tgz",
+            "version": "6.3.2"
         },
         "read-package-json": {
             "dependencies": {
                 "brace-expansion": {
                     "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
                     "requires": {
                         "balanced-match": "^1.0.0"
@@ -5309,27 +5515,40 @@
                 "is-core-module": "^2.9.0",
                 "path-parse": "^1.0.7",
                 "supports-preserve-symlinks-flag": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
             "version": "1.22.1"
         },
+        "resolve-alpn": {
+            "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
+            "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
+            "version": "1.2.1"
+        },
         "resolve-cwd": {
             "integrity": "sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==",
             "requires": {
                 "resolve-from": "^5.0.0"
             },
             "resolved": "https://registry.npmjs.org/resolve-cwd/-/resolve-cwd-3.0.0.tgz",
             "version": "3.0.0"
         },
         "resolve-from": {
             "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
             "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "responselike": {
+            "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
+            "requires": {
+                "lowercase-keys": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "restore-cursor": {
             "integrity": "sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==",
             "requires": {
                 "onetime": "^5.1.0",
                 "signal-exit": "^3.0.2"
             },
             "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-3.1.0.tgz",
@@ -5440,20 +5659,20 @@
             "dependencies": {
                 "semver": {
                     "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
                     "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
                     "version": "7.0.0"
                 }
             },
-            "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
+            "integrity": "sha512-VpsrsJSUcJEseSbMHkrsrAVSdvVS5I96Qo1QAQ4FxQ9wXFcB+pjj7FB7/us9+GcgfW4ziHtYMc1J0PLczb55mg==",
             "requires": {
                 "semver": "~7.0.0"
             },
-            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
-            "version": "1.0.7"
+            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.1.0.tgz",
+            "version": "1.1.0"
         },
         "slash": {
             "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
             "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
             "version": "3.0.0"
         },
         "slice-ansi": {
@@ -5664,25 +5883,32 @@
         },
         "supports-preserve-symlinks-flag": {
             "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
             "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
             "version": "1.0.0"
         },
         "tar": {
-            "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
+            "dependencies": {
+                "minipass": {
+                    "integrity": "sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==",
+                    "resolved": "https://registry.npmjs.org/minipass/-/minipass-5.0.0.tgz",
+                    "version": "5.0.0"
+                }
+            },
+            "integrity": "sha512-/zKt9UyngnxIT/EAGYuxaMYgOIJiP81ab9ZfkILq4oNLPFX50qyYmu7jRj9qeXoxmJHjGlbH0+cm2uy1WCs10A==",
             "requires": {
                 "chownr": "^2.0.0",
                 "fs-minipass": "^2.0.0",
-                "minipass": "^3.0.0",
+                "minipass": "^5.0.0",
                 "minizlib": "^2.1.1",
                 "mkdirp": "^1.0.3",
                 "yallist": "^4.0.0"
             },
-            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
-            "version": "6.1.11"
+            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.15.tgz",
+            "version": "6.1.15"
         },
         "tar-stream": {
             "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
             "requires": {
                 "bl": "^4.0.3",
                 "end-of-stream": "^1.4.1",
                 "fs-constants": "^1.0.0",
@@ -5792,20 +6018,20 @@
             },
             "resolved": "https://registry.npmjs.org/truncate-utf8-bytes/-/truncate-utf8-bytes-1.0.2.tgz",
             "version": "1.0.2"
         },
         "tsconfig-paths": {
             "dependencies": {
                 "json5": {
-                    "integrity": "sha512-aKS4WQjPenRxiQsC93MNfjx+nbF4PAdYzmd/1JIj8HYzqfbu86beTuNgXDzPknWk0n0uARlyewZo4s++ES36Ow==",
+                    "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
                     "requires": {
                         "minimist": "^1.2.0"
                     },
-                    "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.1.tgz",
-                    "version": "1.0.1"
+                    "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
+                    "version": "1.0.2"
                 },
                 "strip-bom": {
                     "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
                     "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
                     "version": "3.0.0"
                 }
             },
@@ -6145,47 +6371,57 @@
         "yaml": {
             "integrity": "sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==",
             "resolved": "https://registry.npmjs.org/yaml/-/yaml-1.10.2.tgz",
             "version": "1.10.2"
         },
         "yargs": {
             "dependencies": {
+                "cliui": {
+                    "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+                    "requires": {
+                        "string-width": "^4.2.0",
+                        "strip-ansi": "^6.0.1",
+                        "wrap-ansi": "^7.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+                    "version": "8.0.1"
+                },
                 "yargs-parser": {
                     "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
                     "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
                     "version": "21.1.1"
                 }
             },
-            "integrity": "sha512-t6YAJcxDkNX7NFYiVtKvWUz8l+PaKTLiL63mJYWR2GnHq2gjEWISzsLp9wg3aY36dY1j+gfIEL3pIF+XlJJfbA==",
+            "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
             "requires": {
-                "cliui": "^7.0.2",
+                "cliui": "^8.0.1",
                 "escalade": "^3.1.1",
                 "get-caller-file": "^2.0.5",
                 "require-directory": "^2.1.1",
                 "string-width": "^4.2.3",
                 "y18n": "^5.0.5",
-                "yargs-parser": "^21.0.0"
+                "yargs-parser": "^21.1.1"
             },
-            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.5.1.tgz",
-            "version": "17.5.1"
+            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
+            "version": "17.7.2"
         },
         "yargs-parser": {
             "integrity": "sha512-WOkpgNhPTlE73h4VFAFsOnomJVaovO8VqLDzy5saChRBFQFBoMYirowyW+Q9HB4HFF4Z7VZTiG3iSzJJA29yRA==",
             "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-20.2.4.tgz",
             "version": "20.2.4"
         }
     },
     "lockfileVersion": 2,
     "name": "npm_macos",
     "packages": {
         "": {
             "dependencies": {
                 "@chia-network/notarize-cli": "^0.2.2",
                 "dmg-license": "^1.0.11",
-                "electron-builder": "^23.5.1",
+                "electron-builder": "^24.4.0",
                 "lerna": "^5.5.2"
             },
             "license": "ISC",
             "name": "npm_macos",
             "version": "1.0.0"
         },
         "node_modules/7zip-bin": {
@@ -6317,30 +6553,163 @@
                 "type": "opencollective",
                 "url": "https://opencollective.com/webpack"
             },
             "integrity": "sha512-0cp4PsWQ/9avqTVMCtZ+GirikIA36ikvjtHweU4/j8yLtgObI0+JUPhYFScgwlteveGB1rt3Cm8UhN04XayDig==",
             "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
             "version": "2.6.5"
         },
+        "node_modules/@electron/asar": {
+            "bin": {
+                "asar": "bin/asar.js"
+            },
+            "dependencies": {
+                "chromium-pickle-js": "^0.2.0",
+                "commander": "^5.0.0",
+                "glob": "^7.1.6",
+                "minimatch": "^3.0.4"
+            },
+            "engines": {
+                "node": ">=10.12.0"
+            },
+            "integrity": "sha512-lykfY3TJRRWFeTxccEKdf1I6BLl2Plw81H0bbp4Fc5iEc67foDCa5pjJQULVgo0wF+Dli75f3xVcdb/67FFZ/g==",
+            "resolved": "https://registry.npmjs.org/@electron/asar/-/asar-3.2.4.tgz",
+            "version": "3.2.4"
+        },
+        "node_modules/@electron/notarize": {
+            "dependencies": {
+                "debug": "^4.1.1",
+                "fs-extra": "^9.0.1"
+            },
+            "engines": {
+                "node": ">= 10.0.0"
+            },
+            "integrity": "sha512-9oRzT56rKh5bspk3KpAVF8lPKHYQrBnRwcgiOeR0hdilVEQmszDaAu0IPCPrwwzJN0ugNs0rRboTreHMt/6mBQ==",
+            "resolved": "https://registry.npmjs.org/@electron/notarize/-/notarize-1.2.3.tgz",
+            "version": "1.2.3"
+        },
+        "node_modules/@electron/osx-sign": {
+            "bin": {
+                "electron-osx-flat": "bin/electron-osx-flat.js",
+                "electron-osx-sign": "bin/electron-osx-sign.js"
+            },
+            "dependencies": {
+                "compare-version": "^0.1.2",
+                "debug": "^4.3.4",
+                "fs-extra": "^10.0.0",
+                "isbinaryfile": "^4.0.8",
+                "minimist": "^1.2.6",
+                "plist": "^3.0.5"
+            },
+            "engines": {
+                "node": ">=12.0.0"
+            },
+            "integrity": "sha512-xfhdEcIOfAZg7scZ9RQPya1G1lWo8/zMCwUXAulq0SfY7ONIW+b9qGyKdMyuMctNYwllrIS+vmxfijSfjeh97g==",
+            "resolved": "https://registry.npmjs.org/@electron/osx-sign/-/osx-sign-1.0.4.tgz",
+            "version": "1.0.4"
+        },
+        "node_modules/@electron/osx-sign/node_modules/fs-extra": {
+            "dependencies": {
+                "graceful-fs": "^4.2.0",
+                "jsonfile": "^6.0.1",
+                "universalify": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+            "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+            "version": "10.1.0"
+        },
+        "node_modules/@electron/osx-sign/node_modules/isbinaryfile": {
+            "engines": {
+                "node": ">= 8.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/gjtorikian/"
+            },
+            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
+            "version": "4.0.10"
+        },
+        "node_modules/@electron/rebuild": {
+            "bin": {
+                "electron-rebuild": "lib/cli.js"
+            },
+            "dependencies": {
+                "@malept/cross-spawn-promise": "^2.0.0",
+                "chalk": "^4.0.0",
+                "debug": "^4.1.1",
+                "detect-libc": "^2.0.1",
+                "fs-extra": "^10.0.0",
+                "got": "^11.7.0",
+                "node-abi": "^3.0.0",
+                "node-api-version": "^0.1.4",
+                "node-gyp": "^9.0.0",
+                "ora": "^5.1.0",
+                "semver": "^7.3.5",
+                "tar": "^6.0.5",
+                "yargs": "^17.0.1"
+            },
+            "engines": {
+                "node": ">=12.13.0"
+            },
+            "integrity": "sha512-DH9Ol4JCnHDYVOD0fKWq+Qqbn/0WU1O6QR0mIpMXEVU4YFM4PlaqNC9K36mGShNBxxGFotZCMDrB1wl/iHM12g==",
+            "resolved": "https://registry.npmjs.org/@electron/rebuild/-/rebuild-3.2.13.tgz",
+            "version": "3.2.13"
+        },
+        "node_modules/@electron/rebuild/node_modules/fs-extra": {
+            "dependencies": {
+                "graceful-fs": "^4.2.0",
+                "jsonfile": "^6.0.1",
+                "universalify": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+            "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+            "version": "10.1.0"
+        },
         "node_modules/@electron/universal": {
             "dependencies": {
+                "@electron/asar": "^3.2.1",
                 "@malept/cross-spawn-promise": "^1.1.0",
-                "asar": "^3.1.0",
                 "debug": "^4.3.1",
-                "dir-compare": "^2.4.0",
+                "dir-compare": "^3.0.0",
                 "fs-extra": "^9.0.1",
                 "minimatch": "^3.0.4",
                 "plist": "^3.0.4"
             },
             "engines": {
                 "node": ">=8.6"
             },
-            "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
-            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
-            "version": "1.2.1"
+            "integrity": "sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==",
+            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz",
+            "version": "1.3.4"
+        },
+        "node_modules/@electron/universal/node_modules/@malept/cross-spawn-promise": {
+            "dependencies": {
+                "cross-spawn": "^7.0.1"
+            },
+            "engines": {
+                "node": ">= 10"
+            },
+            "funding": [
+                {
+                    "type": "individual",
+                    "url": "https://github.com/sponsors/malept"
+                },
+                {
+                    "type": "tidelift",
+                    "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
+                }
+            ],
+            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
+            "version": "1.1.1"
         },
         "node_modules/@gar/promisify": {
             "integrity": "sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==",
             "resolved": "https://registry.npmjs.org/@gar/promisify/-/promisify-1.1.3.tgz",
             "version": "1.1.3"
         },
         "node_modules/@hutson/parse-repository-url": {
@@ -7325,29 +7694,29 @@
             "version": "5.5.2"
         },
         "node_modules/@malept/cross-spawn-promise": {
             "dependencies": {
                 "cross-spawn": "^7.0.1"
             },
             "engines": {
-                "node": ">= 10"
+                "node": ">= 12.13.0"
             },
             "funding": [
                 {
                     "type": "individual",
                     "url": "https://github.com/sponsors/malept"
                 },
                 {
                     "type": "tidelift",
                     "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
                 }
             ],
-            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
-            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
-            "version": "1.1.1"
+            "integrity": "sha512-1DpKU0Z5ThltBwjNySMC14g0CkbyhCaz9FkhxqNsZI6uAPJXFS8cMXlBKo26FJ8ZuW6S9GCMcR9IO5k2X5/9Fg==",
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-2.0.0.tgz",
+            "version": "2.0.0"
         },
         "node_modules/@malept/flatpak-bundler": {
             "dependencies": {
                 "debug": "^4.1.1",
                 "fs-extra": "^9.0.0",
                 "lodash": "^4.17.15",
                 "tmp-promise": "^3.0.2"
@@ -7903,22 +8272,55 @@
             "version": "2.0.4"
         },
         "node_modules/@parcel/watcher/node_modules/node-addon-api": {
             "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-3.2.1.tgz",
             "version": "3.2.1"
         },
+        "node_modules/@sindresorhus/is": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sindresorhus/is?sponsor=1"
+            },
+            "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
+            "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
+            "version": "4.6.0"
+        },
+        "node_modules/@szmarczak/http-timer": {
+            "dependencies": {
+                "defer-to-connect": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
+            "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
+            "version": "4.0.6"
+        },
         "node_modules/@tootallnate/once": {
             "engines": {
                 "node": ">= 10"
             },
             "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
             "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
             "version": "2.0.0"
         },
+        "node_modules/@types/cacheable-request": {
+            "dependencies": {
+                "@types/http-cache-semantics": "*",
+                "@types/keyv": "^3.1.4",
+                "@types/node": "*",
+                "@types/responselike": "^1.0.0"
+            },
+            "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
+            "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
+            "version": "6.0.3"
+        },
         "node_modules/@types/debug": {
             "dependencies": {
                 "@types/ms": "*"
             },
             "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
             "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
             "version": "4.1.7"
@@ -7927,29 +8329,32 @@
             "dependencies": {
                 "@types/node": "*"
             },
             "integrity": "sha512-nEnwB++1u5lVDM2UI4c1+5R+FYaKfaAzS4OococimjVm3nQw3TuzH5UNsocrcTBbhnerblyHj4A49qXbIiZdpA==",
             "resolved": "https://registry.npmjs.org/@types/fs-extra/-/fs-extra-9.0.13.tgz",
             "version": "9.0.13"
         },
-        "node_modules/@types/glob": {
-            "dependencies": {
-                "@types/minimatch": "*",
-                "@types/node": "*"
-            },
-            "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
-            "optional": true,
-            "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
-            "version": "7.2.0"
+        "node_modules/@types/http-cache-semantics": {
+            "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
+            "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
+            "version": "4.0.1"
         },
         "node_modules/@types/json5": {
             "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
             "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
             "version": "0.0.29"
         },
+        "node_modules/@types/keyv": {
+            "dependencies": {
+                "@types/node": "*"
+            },
+            "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
+            "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
+            "version": "3.1.4"
+        },
         "node_modules/@types/minimatch": {
             "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
             "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
             "version": "3.0.5"
         },
         "node_modules/@types/minimist": {
             "integrity": "sha512-jhuKLIRrhvCPLqwPcx6INqmKeiA5EWrsCOPhrlFSrbrmU4ZMPjj5Ul/oLCMDO98XRUIwVm78xICz4EPCektzeQ==",
@@ -7981,32 +8386,27 @@
                 "@types/node": "*",
                 "xmlbuilder": ">=11.0.1"
             },
             "integrity": "sha512-ULqvZNGMv0zRFvqn8/4LSPtnmN4MfhlPNtJCTpKuIIxGVGZ2rYWzFXrvEBoh9CVyqSE7D6YFRJ1hydLHI6kbWw==",
             "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
             "version": "3.0.2"
         },
+        "node_modules/@types/responselike": {
+            "dependencies": {
+                "@types/node": "*"
+            },
+            "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
+            "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
+            "version": "1.0.0"
+        },
         "node_modules/@types/verror": {
             "integrity": "sha512-NNm+gdePAX1VGvPcGZCDKQZKYSiAWigKhKaz5KF94hG6f2s8de9Ow5+7AbXoeKxL8gavZfk4UquSAygOF2duEQ==",
             "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.6.tgz",
             "version": "1.10.6"
         },
-        "node_modules/@types/yargs": {
-            "dependencies": {
-                "@types/yargs-parser": "*"
-            },
-            "integrity": "sha512-aB4y9UDUXTSMxmM4MH+YnuR0g5Cph3FLQBoWoMB21DSvFVAxRVEHEMx3TLh+zUZYMCQtKiqazz0Q4Rre31f/OA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.11.tgz",
-            "version": "17.0.11"
-        },
-        "node_modules/@types/yargs-parser": {
-            "integrity": "sha512-iO9ZQHkZxHn4mSakYV0vFHAVDyEOIJQrV2uZ06HxEPcx+mt8swXoZHIbaaJ2crJYFfErySgktuTZ3BeLz+XmFA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.0.tgz",
-            "version": "21.0.0"
-        },
         "node_modules/@yarnpkg/lockfile": {
             "integrity": "sha512-GpSwvyXOcOOlV70vbnzjj4fW5xW/FdUF6nQEt1ENy7m4ZCczi1+/buVUPAqmGfqznsORNFzUMjctTIp8a9tuCQ==",
             "resolved": "https://registry.npmjs.org/@yarnpkg/lockfile/-/lockfile-1.1.0.tgz",
             "version": "1.1.0"
         },
         "node_modules/@yarnpkg/parsers": {
             "dependencies": {
@@ -8194,51 +8594,62 @@
             "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
             "version": "4.0.0"
         },
         "node_modules/app-builder-lib": {
             "dependencies": {
                 "7zip-bin": "~5.1.1",
                 "@develar/schema-utils": "~2.6.5",
-                "@electron/universal": "1.2.1",
+                "@electron/notarize": "^1.2.3",
+                "@electron/osx-sign": "^1.0.4",
+                "@electron/rebuild": "^3.2.13",
+                "@electron/universal": "1.3.4",
                 "@malept/flatpak-bundler": "^0.4.0",
+                "@types/fs-extra": "9.0.13",
                 "async-exit-hook": "^2.0.1",
                 "bluebird-lst": "^1.0.9",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
                 "chromium-pickle-js": "^0.2.0",
                 "debug": "^4.3.4",
-                "ejs": "^3.1.7",
-                "electron-osx-sign": "^0.6.0",
-                "electron-publish": "23.5.0",
+                "ejs": "^3.1.8",
+                "electron-publish": "24.4.0",
                 "form-data": "^4.0.0",
                 "fs-extra": "^10.1.0",
                 "hosted-git-info": "^4.1.0",
                 "is-ci": "^3.0.0",
-                "isbinaryfile": "^4.0.10",
+                "isbinaryfile": "^5.0.0",
                 "js-yaml": "^4.1.0",
                 "lazy-val": "^1.0.5",
-                "minimatch": "^3.1.2",
-                "read-config-file": "6.2.0",
+                "minimatch": "^5.1.1",
+                "read-config-file": "6.3.2",
                 "sanitize-filename": "^1.6.3",
-                "semver": "^7.3.7",
-                "tar": "^6.1.11",
+                "semver": "^7.3.8",
+                "tar": "^6.1.12",
                 "temp-file": "^3.4.0"
             },
             "engines": {
                 "node": ">=14.0.0"
             },
-            "integrity": "sha512-Pf5HLmrRaeativDNhB+BxUdnSWIsz8H1eABkn/wvZ3WLNzbvIRvLRrsO9e9jTU10oDebxU/8FZ8InalmJxYCuA==",
-            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.5.1.tgz",
-            "version": "23.5.1"
+            "integrity": "sha512-EcdqtWvg1LAApKCfyRBukcVkmsa94s2e1VKHjZLpvA9/D14QEt8rHhffYeaA+cH/pVeoNVn2ob735KnfJKEEow==",
+            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/app-builder-lib/node_modules/argparse": {
             "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
             "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
             "version": "2.0.1"
         },
+        "node_modules/app-builder-lib/node_modules/brace-expansion": {
+            "dependencies": {
+                "balanced-match": "^1.0.0"
+            },
+            "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
+            "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/app-builder-lib/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
             "engines": {
@@ -8255,14 +8666,39 @@
             "dependencies": {
                 "argparse": "^2.0.1"
             },
             "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "node_modules/app-builder-lib/node_modules/minimatch": {
+            "dependencies": {
+                "brace-expansion": "^2.0.1"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+            "version": "5.1.6"
+        },
+        "node_modules/app-builder-lib/node_modules/semver": {
+            "bin": {
+                "semver": "bin/semver.js"
+            },
+            "dependencies": {
+                "lru-cache": "^6.0.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-Wvss5ivl8TMRZXXESstBA4uR5iXgEN/VC5/sOcuXdVLzcdkz4HWetIoRfG5gb5X+ij/G9rw9YoGn3QoQ8OCSpw==",
+            "resolved": "https://registry.npmjs.org/semver/-/semver-7.5.1.tgz",
+            "version": "7.5.1"
+        },
         "node_modules/aproba": {
             "integrity": "sha512-lYe4Gx7QT+MKGbDsA+Z+he/Wtef0BiwDOlK/XkBrdfsh9J/jPPXbX0tE9x9cl27Tmu5gg3QUbUrQYa/y+KOHPQ==",
             "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/are-we-there-yet": {
             "dependencies": {
@@ -8314,34 +8750,14 @@
             "version": "1.0.1"
         },
         "node_modules/asap": {
             "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
             "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
             "version": "2.0.6"
         },
-        "node_modules/asar": {
-            "bin": {
-                "asar": "bin/asar.js"
-            },
-            "dependencies": {
-                "chromium-pickle-js": "^0.2.0",
-                "commander": "^5.0.0",
-                "glob": "^7.1.6",
-                "minimatch": "^3.0.4"
-            },
-            "engines": {
-                "node": ">=10.12.0"
-            },
-            "integrity": "sha512-COdw2ZQvKdFGFxXwX3oYh2/sOsJWJegrdJCGxnN4MZ7IULgRBp9P6665aqj9z1v9VwP4oP1hRBojRDQ//IGgAg==",
-            "optionalDependencies": {
-                "@types/glob": "^7.1.1"
-            },
-            "resolved": "https://registry.npmjs.org/asar/-/asar-3.2.0.tgz",
-            "version": "3.2.0"
-        },
         "node_modules/assert-plus": {
             "engines": {
                 "node": ">=0.8"
             },
             "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
             "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
             "version": "1.0.0"
@@ -8503,81 +8919,64 @@
                     "url": "https://feross.org/support"
                 }
             ],
             "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
             "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
             "version": "5.7.1"
         },
-        "node_modules/buffer-alloc": {
-            "dependencies": {
-                "buffer-alloc-unsafe": "^1.1.0",
-                "buffer-fill": "^1.0.0"
-            },
-            "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
-            "version": "1.2.0"
-        },
-        "node_modules/buffer-alloc-unsafe": {
-            "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
-            "version": "1.1.0"
-        },
         "node_modules/buffer-equal": {
             "engines": {
-                "node": ">=0.4.0"
+                "node": ">=0.4"
             },
-            "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
-            "version": "1.0.0"
-        },
-        "node_modules/buffer-fill": {
-            "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
-            "version": "1.0.0"
+            "funding": {
+                "url": "https://github.com/sponsors/ljharb"
+            },
+            "integrity": "sha512-QoV3ptgEaQpvVwbXdSO39iqPQTCxSF7A5U99AxbHYqUdCizL/lH2Z0A2y6nbZucxMEOtNyZfG2s6gsVugGpKkg==",
+            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.1.tgz",
+            "version": "1.0.1"
         },
         "node_modules/buffer-from": {
             "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
             "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
             "version": "1.1.2"
         },
         "node_modules/builder-util": {
             "dependencies": {
                 "7zip-bin": "~5.1.1",
                 "@types/debug": "^4.1.6",
-                "@types/fs-extra": "^9.0.11",
                 "app-builder-bin": "4.0.0",
                 "bluebird-lst": "^1.0.9",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
                 "cross-spawn": "^7.0.3",
                 "debug": "^4.3.4",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "http-proxy-agent": "^5.0.0",
-                "https-proxy-agent": "^5.0.0",
+                "https-proxy-agent": "^5.0.1",
                 "is-ci": "^3.0.0",
                 "js-yaml": "^4.1.0",
                 "source-map-support": "^0.5.19",
                 "stat-mode": "^1.0.0",
                 "temp-file": "^3.4.0"
             },
-            "integrity": "sha512-TYz3sj2NMoG1/524/Je0p0RtEAKKjmTL6z2WQnzU6yM+WU/jHnA2OqX9Q/jys+rKuMy+7MCMdc+G+HrbpKWYSg==",
-            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.5.0.tgz",
-            "version": "23.5.0"
+            "integrity": "sha512-tONb/GIK1MKa1BcOPHE1naId3o5nj6gdka5kP7yUJh2DOfF+jMq3laiu+UOZH6A7ZtkMtnGNMYFKFTIv408n/A==",
+            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/builder-util-runtime": {
             "dependencies": {
                 "debug": "^4.3.4",
                 "sax": "^1.2.4"
             },
             "engines": {
                 "node": ">=12.0.0"
             },
-            "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
-            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
-            "version": "9.1.1"
+            "integrity": "sha512-2rLv/uQD2x+dJ0J3xtsmI12AlRyk7p45TEbE/6o/fbb633e/S3pPgm+ct+JHsoY7r39dKHnGEFk/AASRFdnXmA==",
+            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.2.1.tgz",
+            "version": "9.2.1"
         },
         "node_modules/builder-util/node_modules/argparse": {
             "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
             "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
             "version": "2.0.1"
         },
         "node_modules/builder-util/node_modules/fs-extra": {
@@ -8689,14 +9088,53 @@
             "engines": {
                 "node": ">=10"
             },
             "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
             "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
             "version": "5.1.0"
         },
+        "node_modules/cacheable-lookup": {
+            "engines": {
+                "node": ">=10.6.0"
+            },
+            "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
+            "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
+            "version": "5.0.4"
+        },
+        "node_modules/cacheable-request": {
+            "dependencies": {
+                "clone-response": "^1.0.2",
+                "get-stream": "^5.1.0",
+                "http-cache-semantics": "^4.0.0",
+                "keyv": "^4.0.0",
+                "lowercase-keys": "^2.0.0",
+                "normalize-url": "^6.0.1",
+                "responselike": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
+            "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
+            "version": "7.0.2"
+        },
+        "node_modules/cacheable-request/node_modules/get-stream": {
+            "dependencies": {
+                "pump": "^3.0.0"
+            },
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
+            "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
+            "version": "5.2.0"
+        },
         "node_modules/callsites": {
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
             "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
             "version": "3.1.0"
@@ -8804,17 +9242,26 @@
         },
         "node_modules/chromium-pickle-js": {
             "integrity": "sha512-1R5Fho+jBq0DDydt+/vHWj5KJNJCKdARKOCwZUen84I5BreWoLqRLANH1U87eJy1tiASPtMnGqJJq0ZsLoRPOw==",
             "resolved": "https://registry.npmjs.org/chromium-pickle-js/-/chromium-pickle-js-0.2.0.tgz",
             "version": "0.2.0"
         },
         "node_modules/ci-info": {
-            "integrity": "sha512-t5QdPT5jq3o262DOQ8zA6E1tlH2upmUc4Hlvrbx1pGYJuiiHl7O7rvVNI+l8HTVhd/q3Qc9vqimkNk5yiXsAug==",
-            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.4.0.tgz",
-            "version": "3.4.0"
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": [
+                {
+                    "type": "github",
+                    "url": "https://github.com/sponsors/sibiraj-s"
+                }
+            ],
+            "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+            "version": "3.8.0"
         },
         "node_modules/clean-stack": {
             "dependencies": {
                 "escape-string-regexp": "4.0.0"
             },
             "engines": {
                 "node": ">=10"
@@ -8920,14 +9367,25 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-h5PpgXkWitc38BBMYawTYMWJHFZJVnBquFE57xFpjB8pJFiF6gZ+bU+WyI/yqXiFR5mdLsgYNaPe8uao6Uv9Og==",
             "resolved": "https://registry.npmjs.org/is-plain-object/-/is-plain-object-2.0.4.tgz",
             "version": "2.0.4"
         },
+        "node_modules/clone-response": {
+            "dependencies": {
+                "mimic-response": "^1.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
+            "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "node_modules/cmd-shim": {
             "dependencies": {
                 "mkdirp-infer-owner": "^2.0.0"
             },
             "engines": {
                 "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
             },
@@ -8955,22 +9413,14 @@
             "bin": {
                 "color-support": "bin.js"
             },
             "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
             "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
             "version": "1.1.3"
         },
-        "node_modules/colors": {
-            "engines": {
-                "node": ">=0.1.90"
-            },
-            "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
-            "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
-            "version": "1.0.3"
-        },
         "node_modules/columnify": {
             "dependencies": {
                 "strip-ansi": "^6.0.1",
                 "wcwidth": "^1.0.0"
             },
             "engines": {
                 "node": ">=8.0.0"
@@ -9055,14 +9505,23 @@
                 "ini": "^1.3.4",
                 "proto-list": "~1.2.1"
             },
             "integrity": "sha512-qj+f8APARXHrM0hraqXYb2/bOVSV4PvJQlNZ/DVj0QrmNM2q2euizkeuVckQ57J+W0mRH6Hvi+k50M4Jul2VRQ==",
             "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
             "version": "1.1.13"
         },
+        "node_modules/config-file-ts": {
+            "dependencies": {
+                "glob": "^7.1.6",
+                "typescript": "^4.0.2"
+            },
+            "integrity": "sha512-cKSW0BfrSaAUnxpgvpXPLaaW/umg4bqg4k3GO1JqlRfpx+d5W0GDXznCMkWotJQek5Mmz1MJVChQnz3IVaeMZQ==",
+            "resolved": "https://registry.npmjs.org/config-file-ts/-/config-file-ts-0.2.4.tgz",
+            "version": "0.2.4"
+        },
         "node_modules/console-control-strings": {
             "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ==",
             "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
             "version": "1.1.0"
         },
         "node_modules/conventional-changelog-angular": {
             "dependencies": {
@@ -9295,27 +9754,60 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-7N/q3lyZ+LVCp7PzuxrJr4KMbBE2hW7BT7YNia330OFxIf4d3r5zVpicP2650l7CPN6RM9zOJRl3NGpqSiw3Eg==",
             "resolved": "https://registry.npmjs.org/map-obj/-/map-obj-1.0.1.tgz",
             "version": "1.0.1"
         },
+        "node_modules/decompress-response": {
+            "dependencies": {
+                "mimic-response": "^3.1.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
+            "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
+            "version": "6.0.0"
+        },
+        "node_modules/decompress-response/node_modules/mimic-response": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
+            "version": "3.1.0"
+        },
         "node_modules/dedent": {
             "integrity": "sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==",
             "resolved": "https://registry.npmjs.org/dedent/-/dedent-0.7.0.tgz",
             "version": "0.7.0"
         },
         "node_modules/defaults": {
             "dependencies": {
                 "clone": "^1.0.2"
             },
             "integrity": "sha512-s82itHOnYrN0Ib8r+z7laQz3sdE+4FP3d9Q7VLO7U+KRT+CR0GsWuyHxzdAY82I7cXv0G/twrqomTJLOssO5HA==",
             "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.3.tgz",
             "version": "1.0.3"
         },
+        "node_modules/defer-to-connect": {
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
+            "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/define-lazy-prop": {
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
             "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
             "version": "2.0.0"
@@ -9350,85 +9842,66 @@
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==",
             "resolved": "https://registry.npmjs.org/detect-indent/-/detect-indent-6.1.0.tgz",
             "version": "6.1.0"
         },
+        "node_modules/detect-libc": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==",
+            "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/dezalgo": {
             "dependencies": {
                 "asap": "^2.0.0",
                 "wrappy": "1"
             },
             "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
             "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
             "version": "1.0.4"
         },
         "node_modules/dir-compare": {
-            "bin": {
-                "dircompare": "src/cli/dircompare.js"
-            },
-            "dependencies": {
-                "buffer-equal": "1.0.0",
-                "colors": "1.0.3",
-                "commander": "2.9.0",
-                "minimatch": "3.0.4"
-            },
-            "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
-            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
-            "version": "2.4.0"
-        },
-        "node_modules/dir-compare/node_modules/commander": {
-            "dependencies": {
-                "graceful-readlink": ">= 1.0.0"
-            },
-            "engines": {
-                "node": ">= 0.6.x"
-            },
-            "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
-            "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
-            "version": "2.9.0"
-        },
-        "node_modules/dir-compare/node_modules/minimatch": {
             "dependencies": {
-                "brace-expansion": "^1.1.7"
-            },
-            "engines": {
-                "node": "*"
+                "buffer-equal": "^1.0.0",
+                "minimatch": "^3.0.4"
             },
-            "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
-            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
-            "version": "3.0.4"
+            "integrity": "sha512-J7/et3WlGUCxjdnD3HAAzQ6nsnc0WL6DD7WcwJb7c39iH1+AWfg+9OqzJNaI6PkBwBvm1mhZNL9iY/nRiZXlPg==",
+            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-3.3.0.tgz",
+            "version": "3.3.0"
         },
         "node_modules/dir-glob": {
             "dependencies": {
                 "path-type": "^4.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
             "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/dmg-builder": {
             "dependencies": {
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "fs-extra": "^10.1.0",
                 "iconv-lite": "^0.6.2",
                 "js-yaml": "^4.1.0"
             },
-            "integrity": "sha512-TqIV0rdliw7FZ0DqY88FyPBH+q/Bp+yCPIhdYVraQxYMcaCNu7G3ZizApfEpCvoobtE6MY06/u91I9M7+gGYkw==",
+            "integrity": "sha512-p5z9Cx539GSBYb+b09Z+hMhuBTh/BrI71VRg4rgF6f2xtIRK/YlTGVS/O08k5OojoyhZcpS7JXxDVSmQoWgiiQ==",
             "optionalDependencies": {
                 "dmg-license": "^1.0.11"
             },
-            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/dmg-builder/node_modules/argparse": {
             "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
             "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
             "version": "2.0.1"
         },
         "node_modules/dmg-builder/node_modules/fs-extra": {
@@ -9527,92 +10000,46 @@
         },
         "node_modules/electron-builder": {
             "bin": {
                 "electron-builder": "cli.js",
                 "install-app-deps": "install-app-deps.js"
             },
             "dependencies": {
-                "@types/yargs": "^17.0.1",
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "dmg-builder": "23.5.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.4.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "dmg-builder": "24.4.0",
+                "fs-extra": "^10.1.0",
                 "is-ci": "^3.0.0",
                 "lazy-val": "^1.0.5",
-                "read-config-file": "6.2.0",
-                "simple-update-notifier": "^1.0.7",
-                "yargs": "^17.5.1"
+                "read-config-file": "6.3.2",
+                "simple-update-notifier": "^1.1.0",
+                "yargs": "^17.6.2"
             },
             "engines": {
                 "node": ">=14.0.0"
             },
-            "integrity": "sha512-SWTlf9jqbSa/UFDy1xcaMLIAL39TMd1PPYIgDN8bnfzJntMKEd16qguKsAxfW/kEKcPHLCVh69JyS1GbQ4sROQ==",
-            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "integrity": "sha512-D5INxodxaUIJgEX6p/fqBd8wQNS8XRAToNIJ9SQC+taNS5D73ZsjLuXiRraFGCB0cVk9KeKhEkdEOH5AaVya4g==",
+            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/electron-builder/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
             "engines": {
                 "node": ">=12"
             },
             "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
             "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
             "version": "10.1.0"
         },
-        "node_modules/electron-osx-sign": {
-            "bin": {
-                "electron-osx-flat": "bin/electron-osx-flat.js",
-                "electron-osx-sign": "bin/electron-osx-sign.js"
-            },
-            "dependencies": {
-                "bluebird": "^3.5.0",
-                "compare-version": "^0.1.2",
-                "debug": "^2.6.8",
-                "isbinaryfile": "^3.0.2",
-                "minimist": "^1.2.0",
-                "plist": "^3.0.1"
-            },
-            "deprecated": "Please use @electron/osx-sign moving forward. Be aware the API is slightly different",
-            "engines": {
-                "node": ">=4.0.0"
-            },
-            "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
-            "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
-            "version": "0.6.0"
-        },
-        "node_modules/electron-osx-sign/node_modules/debug": {
-            "dependencies": {
-                "ms": "2.0.0"
-            },
-            "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-            "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-            "version": "2.6.9"
-        },
-        "node_modules/electron-osx-sign/node_modules/isbinaryfile": {
-            "dependencies": {
-                "buffer-alloc": "^1.2.0"
-            },
-            "engines": {
-                "node": ">=0.6.0"
-            },
-            "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
-            "version": "3.0.3"
-        },
-        "node_modules/electron-osx-sign/node_modules/ms": {
-            "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
-            "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-            "version": "2.0.0"
-        },
         "node_modules/electron-packager/node_modules/electron-osx-sign": {
             "bin": {
                 "electron-osx-flat": "bin/electron-osx-flat.js",
                 "electron-osx-sign": "bin/electron-osx-sign.js"
             },
             "dependencies": {
                 "bluebird": "^3.5.0",
@@ -9635,24 +10062,24 @@
             "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
             "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/electron-publish": {
             "dependencies": {
                 "@types/fs-extra": "^9.0.11",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "fs-extra": "^10.0.0",
+                "builder-util": "24.4.0",
+                "builder-util-runtime": "9.2.1",
+                "chalk": "^4.1.2",
+                "fs-extra": "^10.1.0",
                 "lazy-val": "^1.0.5",
                 "mime": "^2.5.2"
             },
-            "integrity": "sha512-dY/bAN5tIjEPX1AV5FK9TXKKoGGalGb53SgGbhiII3o+WLzK+4vew6rrmChBTwELP/q8r4a89X+slTDG/iPdww==",
-            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.5.0.tgz",
-            "version": "23.5.0"
+            "integrity": "sha512-U3mnVSxIfNrLW7ZnwiedFhcLf6ExPFXgAsx89WpfQFsV4gFAt/LG+H74p0m9NSvsLXiZuF82yXoxi7Ou8GHq4Q==",
+            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-24.4.0.tgz",
+            "version": "24.4.0"
         },
         "node_modules/electron-publish/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -10254,24 +10681,43 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
             "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
             "version": "11.1.0"
         },
+        "node_modules/got": {
+            "dependencies": {
+                "@sindresorhus/is": "^4.0.0",
+                "@szmarczak/http-timer": "^4.0.5",
+                "@types/cacheable-request": "^6.0.1",
+                "@types/responselike": "^1.0.0",
+                "cacheable-lookup": "^5.0.3",
+                "cacheable-request": "^7.0.2",
+                "decompress-response": "^6.0.0",
+                "http2-wrapper": "^1.0.0-beta.5.2",
+                "lowercase-keys": "^2.0.0",
+                "p-cancelable": "^2.0.0",
+                "responselike": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=10.19.0"
+            },
+            "funding": {
+                "url": "https://github.com/sindresorhus/got?sponsor=1"
+            },
+            "integrity": "sha512-6tfZ91bOr7bOXnK7PRDCGBLa1H4U080YHNaAQ2KsMGlLEzRbk44nsZF2E1IeRc3vtJHPVbKCYgdFbaGO2ljd8g==",
+            "resolved": "https://registry.npmjs.org/got/-/got-11.8.6.tgz",
+            "version": "11.8.6"
+        },
         "node_modules/graceful-fs": {
             "integrity": "sha512-9ByhssR2fPVsNZj478qUUbKfmL0+t5BDVyjShtyZZLiK7ZDAArFFfopyOTj0M05wE2tJPisA4iTnnXl2YoPvOA==",
             "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.10.tgz",
             "version": "4.2.10"
         },
-        "node_modules/graceful-readlink": {
-            "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
-            "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
-            "version": "1.0.1"
-        },
         "node_modules/handlebars": {
             "bin": {
                 "handlebars": "bin/handlebars"
             },
             "dependencies": {
                 "minimist": "^1.2.5",
                 "neo-async": "^2.6.0",
@@ -10328,31 +10774,54 @@
                 "node": ">=10"
             },
             "integrity": "sha512-kyCuEOWjJqZuDbRHzL8V93NzQhwIB71oFWSyzVo+KPZI+pnQPPxucdkrOZvkLRnrf5URsQM+IJ09Dw29cRALIA==",
             "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
             "version": "4.1.0"
         },
         "node_modules/http-cache-semantics": {
-            "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
-            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
-            "version": "4.1.0"
+            "integrity": "sha512-er295DKPVsV82j5kw1Gjt+ADA/XYHsajl82cGNQG2eyoPkvgUhX+nDIyelzhIWbbsXP39EHcI6l5tYs2FYqYXQ==",
+            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.1.tgz",
+            "version": "4.1.1"
         },
         "node_modules/http-proxy-agent": {
             "dependencies": {
                 "@tootallnate/once": "2",
                 "agent-base": "6",
                 "debug": "4"
             },
             "engines": {
                 "node": ">= 6"
             },
             "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
             "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "node_modules/http2-wrapper": {
+            "dependencies": {
+                "quick-lru": "^5.1.1",
+                "resolve-alpn": "^1.0.0"
+            },
+            "engines": {
+                "node": ">=10.19.0"
+            },
+            "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
+            "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
+            "version": "1.0.3"
+        },
+        "node_modules/http2-wrapper/node_modules/quick-lru": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
+            "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
+            "version": "5.1.1"
+        },
         "node_modules/https-proxy-agent": {
             "dependencies": {
                 "agent-base": "6",
                 "debug": "4"
             },
             "engines": {
                 "node": ">= 6"
@@ -10813,22 +11282,22 @@
         "node_modules/isarray": {
             "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
             "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
             "version": "1.0.0"
         },
         "node_modules/isbinaryfile": {
             "engines": {
-                "node": ">= 8.0.0"
+                "node": ">= 14.0.0"
             },
             "funding": {
                 "url": "https://github.com/sponsors/gjtorikian/"
             },
-            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
-            "version": "4.0.10"
+            "integrity": "sha512-UDdnyGvMajJUWCkib7Cei/dvyJrrvo4FIrsvSFWdPpXSUorzXrDJ0S+X5Q4ZlasfPjca4yqCNNsjbCeiy8FFeg==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-5.0.0.tgz",
+            "version": "5.0.0"
         },
         "node_modules/isexe": {
             "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
             "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/isobject": {
@@ -10869,14 +11338,19 @@
                 "argparse": "^1.0.7",
                 "esprima": "^4.0.0"
             },
             "integrity": "sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==",
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-3.14.1.tgz",
             "version": "3.14.1"
         },
+        "node_modules/json-buffer": {
+            "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
+            "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
+            "version": "3.0.1"
+        },
         "node_modules/json-parse-better-errors": {
             "integrity": "sha512-mrqyZKfX5EhL7hvqcV6WG1yYjnjeuYDzDhhcAAUrq8Po85NBQBJP+ZDUT75qZQ98IkUoBqdkExkukOU7Ts2wrw==",
             "resolved": "https://registry.npmjs.org/json-parse-better-errors/-/json-parse-better-errors-1.0.2.tgz",
             "version": "1.0.2"
         },
         "node_modules/json-parse-even-better-errors": {
             "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
@@ -10904,17 +11378,17 @@
         "node_modules/json5": {
             "bin": {
                 "json5": "lib/cli.js"
             },
             "engines": {
                 "node": ">=6"
             },
-            "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
-            "version": "2.2.1"
+            "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+            "version": "2.2.3"
         },
         "node_modules/jsonc-parser": {
             "integrity": "sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==",
             "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz",
             "version": "3.2.0"
         },
         "node_modules/jsonfile": {
@@ -10942,14 +11416,22 @@
             "version": "5.1.1"
         },
         "node_modules/just-diff-apply": {
             "integrity": "sha512-AAV5Jw7tsniWwih8Ly3fXxEZ06y+6p5TwQMsw0dzZ/wPKilzyDgdAnL0Ug4NNIquPUOh1vfFWEHbmXUqM5+o8g==",
             "resolved": "https://registry.npmjs.org/just-diff-apply/-/just-diff-apply-5.4.1.tgz",
             "version": "5.4.1"
         },
+        "node_modules/keyv": {
+            "dependencies": {
+                "json-buffer": "3.0.1"
+            },
+            "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
+            "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
+            "version": "4.5.2"
+        },
         "node_modules/kind-of": {
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==",
             "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-6.0.3.tgz",
             "version": "6.0.3"
@@ -11160,14 +11642,22 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-8XPvpAA8uyhfteu8pIvQxpJZ7SYYdpUivZpGy6sFsBuKRY/7rQGavedeB8aK+Zkyq6upMFVL/9AW6vOYzfRyLg==",
             "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "node_modules/lowercase-keys": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
+            "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
+            "version": "2.0.0"
+        },
         "node_modules/lru-cache": {
             "dependencies": {
                 "yallist": "^4.0.0"
             },
             "engines": {
                 "node": ">=10"
             },
@@ -11406,14 +11896,22 @@
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
             "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
             "version": "2.1.0"
         },
+        "node_modules/mimic-response": {
+            "engines": {
+                "node": ">=4"
+            },
+            "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
+            "version": "1.0.1"
+        },
         "node_modules/min-indent": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
             "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
             "version": "1.0.1"
@@ -11629,19 +12127,38 @@
             "version": "2.6.2"
         },
         "node_modules/nice-try": {
             "integrity": "sha512-1nh45deeb5olNY7eX82BkPO7SSxR5SSYJiPTrTdFUVYwAl8CKMA5N9PjTYkHiRjisVcxcQ1HXdLhx2qxxJzLNQ==",
             "resolved": "https://registry.npmjs.org/nice-try/-/nice-try-1.0.5.tgz",
             "version": "1.0.5"
         },
+        "node_modules/node-abi": {
+            "dependencies": {
+                "semver": "^7.3.5"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-zNy02qivjjRosswoYmPi8hIKJRr8MpQyeKT6qlcq/OnOgA3Rhoae+IYOqsM9V5+JnHWmxKnWOT2GxvtqdtOCXA==",
+            "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.40.0.tgz",
+            "version": "3.40.0"
+        },
         "node_modules/node-addon-api": {
             "integrity": "sha512-ibPK3iA+vaY1eEjESkQkM0BbCqFOaZMiXRTtdB0u7b4djtY6JnsjvPdUHVMg6xQt3B8fpTTWHI9A+ADjM9frzg==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-1.7.2.tgz",
             "version": "1.7.2"
         },
+        "node_modules/node-api-version": {
+            "dependencies": {
+                "semver": "^7.3.5"
+            },
+            "integrity": "sha512-KGXihXdUChwJAOHO53bv9/vXcLmdUsZ6jIptbvYvkpKfth+r7jw44JkVxQFA3kX5nQjzjmGu1uAu/xNNLNlI5g==",
+            "resolved": "https://registry.npmjs.org/node-api-version/-/node-api-version-0.1.4.tgz",
+            "version": "0.1.4"
+        },
         "node_modules/node-fetch": {
             "dependencies": {
                 "whatwg-url": "^5.0.0"
             },
             "engines": {
                 "node": "4.x || >=6.0.0"
             },
@@ -11722,14 +12239,25 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
             "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
             "version": "3.0.0"
         },
+        "node_modules/normalize-url": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
+            "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
+            "version": "6.1.0"
+        },
         "node_modules/npm-bundled": {
             "dependencies": {
                 "npm-normalize-package-bin": "^1.0.1"
             },
             "integrity": "sha512-x5DHup0SuyQcmL3s7Rx/YQ8sbw/Hzg0rj48eN0dV7hf5cmQq5PXIeioroH3raV1QC1yh3uTYuMThvEQF3iKgGQ==",
             "resolved": "https://registry.npmjs.org/npm-bundled/-/npm-bundled-1.1.2.tgz",
             "version": "1.1.2"
@@ -12249,14 +12777,22 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==",
             "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
             "version": "1.0.2"
         },
+        "node_modules/p-cancelable": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
+            "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
+            "version": "2.1.1"
+        },
         "node_modules/p-finally": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-LICb2p9CB7FS+0eR1oqWnHhp0FljGLZCWBE9aix0Uye9W8LTQPwMTYVGWQWIw9RdQiDg4+epXQODwIYJtSJaow==",
             "resolved": "https://registry.npmjs.org/p-finally/-/p-finally-1.0.0.tgz",
             "version": "1.0.0"
@@ -12719,14 +13255,23 @@
             "version": "1.2.4"
         },
         "node_modules/protocols": {
             "integrity": "sha512-/XJ368cyBJ7fzLMwLKv1e4vLxOju2MNAIokcr7meSaNcVbWz/CPcW22cP04mwxOErdA5mwjA8Q6w/cdAQxVn7Q==",
             "resolved": "https://registry.npmjs.org/protocols/-/protocols-2.0.1.tgz",
             "version": "2.0.1"
         },
+        "node_modules/pump": {
+            "dependencies": {
+                "end-of-stream": "^1.1.0",
+                "once": "^1.3.1"
+            },
+            "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
+            "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
+            "version": "3.0.0"
+        },
         "node_modules/punycode": {
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
             "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
             "version": "2.1.1"
@@ -12784,26 +13329,27 @@
             },
             "integrity": "sha512-kEmDUoYf/CDy8yZbLTmhB1X9kkjf9Q80PCNsDMb7ufrGd6zZSQA1+UyjrO+pZm5K/S4OXCWJeiIt1JA8kAsa6g==",
             "resolved": "https://registry.npmjs.org/read-cmd-shim/-/read-cmd-shim-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/read-config-file": {
             "dependencies": {
+                "config-file-ts": "^0.2.4",
                 "dotenv": "^9.0.2",
                 "dotenv-expand": "^5.1.0",
                 "js-yaml": "^4.1.0",
                 "json5": "^2.2.0",
                 "lazy-val": "^1.0.4"
             },
             "engines": {
                 "node": ">=12.0.0"
             },
-            "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
-            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
-            "version": "6.2.0"
+            "integrity": "sha512-M80lpCjnE6Wt6zb98DoW8WHR09nzMSpu8XHtPkiTHrJ5Az9CybfeQhTJ8D7saeBHpGhLPIVyA8lcL6ZmdKwY6Q==",
+            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.3.2.tgz",
+            "version": "6.3.2"
         },
         "node_modules/read-config-file/node_modules/argparse": {
             "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
             "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
             "version": "2.0.1"
         },
         "node_modules/read-config-file/node_modules/dotenv": {
@@ -13167,14 +13713,19 @@
             "funding": {
                 "url": "https://github.com/sponsors/ljharb"
             },
             "integrity": "sha512-nBpuuYuY5jFsli/JIs1oldw6fOQCBioohqWZg/2hiaOybXOft4lonv85uDOKXdf8rhyK159cxU5cDcK/NKk8zw==",
             "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
             "version": "1.22.1"
         },
+        "node_modules/resolve-alpn": {
+            "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
+            "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
+            "version": "1.2.1"
+        },
         "node_modules/resolve-cwd": {
             "dependencies": {
                 "resolve-from": "^5.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
@@ -13186,14 +13737,25 @@
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
             "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "node_modules/responselike": {
+            "dependencies": {
+                "lowercase-keys": "^2.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
+            "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/restore-cursor": {
             "dependencies": {
                 "onetime": "^5.1.0",
                 "signal-exit": "^3.0.2"
             },
             "engines": {
                 "node": ">=8"
@@ -13365,17 +13927,17 @@
         "node_modules/simple-update-notifier": {
             "dependencies": {
                 "semver": "~7.0.0"
             },
             "engines": {
                 "node": ">=8.10.0"
             },
-            "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
-            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
-            "version": "1.0.7"
+            "integrity": "sha512-VpsrsJSUcJEseSbMHkrsrAVSdvVS5I96Qo1QAQ4FxQ9wXFcB+pjj7FB7/us9+GcgfW4ziHtYMc1J0PLczb55mg==",
+            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.1.0.tgz",
+            "version": "1.1.0"
         },
         "node_modules/simple-update-notifier/node_modules/semver": {
             "bin": {
                 "semver": "bin/semver.js"
             },
             "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
             "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
@@ -13670,25 +14232,25 @@
             "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
             "version": "1.0.0"
         },
         "node_modules/tar": {
             "dependencies": {
                 "chownr": "^2.0.0",
                 "fs-minipass": "^2.0.0",
-                "minipass": "^3.0.0",
+                "minipass": "^5.0.0",
                 "minizlib": "^2.1.1",
                 "mkdirp": "^1.0.3",
                 "yallist": "^4.0.0"
             },
             "engines": {
-                "node": ">= 10"
+                "node": ">=10"
             },
-            "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
-            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
-            "version": "6.1.11"
+            "integrity": "sha512-/zKt9UyngnxIT/EAGYuxaMYgOIJiP81ab9ZfkILq4oNLPFX50qyYmu7jRj9qeXoxmJHjGlbH0+cm2uy1WCs10A==",
+            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.15.tgz",
+            "version": "6.1.15"
         },
         "node_modules/tar-stream": {
             "dependencies": {
                 "bl": "^4.0.3",
                 "end-of-stream": "^1.4.1",
                 "fs-constants": "^1.0.0",
                 "inherits": "^2.0.3",
@@ -13697,14 +14259,22 @@
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
             "resolved": "https://registry.npmjs.org/tar-stream/-/tar-stream-2.2.0.tgz",
             "version": "2.2.0"
         },
+        "node_modules/tar/node_modules/minipass": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==",
+            "resolved": "https://registry.npmjs.org/minipass/-/minipass-5.0.0.tgz",
+            "version": "5.0.0"
+        },
         "node_modules/temp-dir": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-xZFXEGbG7SNC3itwBzI3RYjq/cEhBkx2hJuKGIUOcEULmkQExXiHat2z/qkISYsuR+IKumhEfKKbV5qXmhICFQ==",
             "resolved": "https://registry.npmjs.org/temp-dir/-/temp-dir-1.0.0.tgz",
             "version": "1.0.0"
@@ -13836,17 +14406,17 @@
         "node_modules/tsconfig-paths/node_modules/json5": {
             "bin": {
                 "json5": "lib/cli.js"
             },
             "dependencies": {
                 "minimist": "^1.2.0"
             },
-            "integrity": "sha512-aKS4WQjPenRxiQsC93MNfjx+nbF4PAdYzmd/1JIj8HYzqfbu86beTuNgXDzPknWk0n0uARlyewZo4s++ES36Ow==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.1.tgz",
-            "version": "1.0.1"
+            "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
+            "version": "1.0.2"
         },
         "node_modules/tsconfig-paths/node_modules/strip-bom": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
             "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
@@ -14278,37 +14848,50 @@
             },
             "integrity": "sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==",
             "resolved": "https://registry.npmjs.org/yaml/-/yaml-1.10.2.tgz",
             "version": "1.10.2"
         },
         "node_modules/yargs": {
             "dependencies": {
-                "cliui": "^7.0.2",
+                "cliui": "^8.0.1",
                 "escalade": "^3.1.1",
                 "get-caller-file": "^2.0.5",
                 "require-directory": "^2.1.1",
                 "string-width": "^4.2.3",
                 "y18n": "^5.0.5",
-                "yargs-parser": "^21.0.0"
+                "yargs-parser": "^21.1.1"
             },
             "engines": {
                 "node": ">=12"
             },
-            "integrity": "sha512-t6YAJcxDkNX7NFYiVtKvWUz8l+PaKTLiL63mJYWR2GnHq2gjEWISzsLp9wg3aY36dY1j+gfIEL3pIF+XlJJfbA==",
-            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.5.1.tgz",
-            "version": "17.5.1"
+            "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
+            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
+            "version": "17.7.2"
         },
         "node_modules/yargs-parser": {
             "engines": {
                 "node": ">=10"
             },
             "integrity": "sha512-WOkpgNhPTlE73h4VFAFsOnomJVaovO8VqLDzy5saChRBFQFBoMYirowyW+Q9HB4HFF4Z7VZTiG3iSzJJA29yRA==",
             "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-20.2.4.tgz",
             "version": "20.2.4"
         },
+        "node_modules/yargs/node_modules/cliui": {
+            "dependencies": {
+                "string-width": "^4.2.0",
+                "strip-ansi": "^6.0.1",
+                "wrap-ansi": "^7.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+            "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+            "version": "8.0.1"
+        },
         "node_modules/yargs/node_modules/yargs-parser": {
             "engines": {
                 "node": ">=12"
             },
             "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
             "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
             "version": "21.1.1"
```

### Comparing `chia-blockchain-2.0.0b1/build_scripts/npm_windows/package-lock.json` & `chia-blockchain-2.0.0b3/build_scripts/npm_windows/package-lock.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9874045086589804%*

 * *Differences: {"'dependencies'": "{'@electron/universal': {'version': '1.3.4', 'resolved': "*

 * *                   "'https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz', "*

 * *                   "'integrity': "*

 * *                   "'sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==', "*

 * *                   "'requires': {'dir-compare': '^3.0.0', '@electron/asar': '^3.2.1', delete: "*

 * *                   "['asar']}, 'dependencies': OrderedDict([('@malept/cross-spawn-promi []*

```diff
@@ -79,27 +79,150 @@
             "requires": {
                 "ajv": "^6.12.0",
                 "ajv-keywords": "^3.4.1"
             },
             "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
             "version": "2.6.5"
         },
+        "@electron/asar": {
+            "integrity": "sha512-wmOfE6szYyqZhRIiLH+eyZEp+bGcJI0OD/SCvSUrfBE0jvauyGYO2ZhpWxmNCcDojKu5DYrsVqT5BOCZZ01XIg==",
+            "requires": {
+                "@types/glob": "^7.1.1",
+                "chromium-pickle-js": "^0.2.0",
+                "commander": "^5.0.0",
+                "glob": "^7.1.6",
+                "minimatch": "^3.0.4"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/asar/-/asar-3.2.3.tgz",
+            "version": "3.2.3"
+        },
+        "@electron/notarize": {
+            "integrity": "sha512-9oRzT56rKh5bspk3KpAVF8lPKHYQrBnRwcgiOeR0hdilVEQmszDaAu0IPCPrwwzJN0ugNs0rRboTreHMt/6mBQ==",
+            "requires": {
+                "debug": "^4.1.1",
+                "fs-extra": "^9.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/notarize/-/notarize-1.2.3.tgz",
+            "version": "1.2.3"
+        },
+        "@electron/osx-sign": {
+            "dependencies": {
+                "fs-extra": {
+                    "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+                    "requires": {
+                        "graceful-fs": "^4.2.0",
+                        "jsonfile": "^6.0.1",
+                        "universalify": "^2.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+                    "version": "10.1.0"
+                },
+                "isbinaryfile": {
+                    "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
+                    "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
+                    "version": "4.0.10"
+                }
+            },
+            "integrity": "sha512-xfhdEcIOfAZg7scZ9RQPya1G1lWo8/zMCwUXAulq0SfY7ONIW+b9qGyKdMyuMctNYwllrIS+vmxfijSfjeh97g==",
+            "requires": {
+                "compare-version": "^0.1.2",
+                "debug": "^4.3.4",
+                "fs-extra": "^10.0.0",
+                "isbinaryfile": "^4.0.8",
+                "minimist": "^1.2.6",
+                "plist": "^3.0.5"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/osx-sign/-/osx-sign-1.0.4.tgz",
+            "version": "1.0.4"
+        },
+        "@electron/rebuild": {
+            "dependencies": {
+                "cliui": {
+                    "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+                    "requires": {
+                        "string-width": "^4.2.0",
+                        "strip-ansi": "^6.0.1",
+                        "wrap-ansi": "^7.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+                    "version": "8.0.1"
+                },
+                "fs-extra": {
+                    "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+                    "requires": {
+                        "graceful-fs": "^4.2.0",
+                        "jsonfile": "^6.0.1",
+                        "universalify": "^2.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+                    "version": "10.1.0"
+                },
+                "yargs": {
+                    "integrity": "sha512-cwiTb08Xuv5fqF4AovYacTFNxk62th7LKJ6BL9IGUpTJrWoU7/7WdQGTP2SjKf1dUNBGzDd28p/Yfs/GI6JrLw==",
+                    "requires": {
+                        "cliui": "^8.0.1",
+                        "escalade": "^3.1.1",
+                        "get-caller-file": "^2.0.5",
+                        "require-directory": "^2.1.1",
+                        "string-width": "^4.2.3",
+                        "y18n": "^5.0.5",
+                        "yargs-parser": "^21.1.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.1.tgz",
+                    "version": "17.7.1"
+                },
+                "yargs-parser": {
+                    "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
+                    "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
+                    "version": "21.1.1"
+                }
+            },
+            "integrity": "sha512-SUBM6Mwi3yZaDFQjZzfGKpYTtOp9m60glounwX6tfGeVc/ZOl4jbquktUcyy7gYSLDWFLtKkftkY2xgMJZLQgg==",
+            "requires": {
+                "@malept/cross-spawn-promise": "^2.0.0",
+                "chalk": "^4.0.0",
+                "debug": "^4.1.1",
+                "detect-libc": "^2.0.1",
+                "fs-extra": "^10.0.0",
+                "got": "^11.7.0",
+                "lzma-native": "^8.0.5",
+                "node-abi": "^3.0.0",
+                "node-api-version": "^0.1.4",
+                "node-gyp": "^9.0.0",
+                "ora": "^5.1.0",
+                "semver": "^7.3.5",
+                "tar": "^6.0.5",
+                "yargs": "^17.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/rebuild/-/rebuild-3.2.10.tgz",
+            "version": "3.2.10"
+        },
         "@electron/universal": {
-            "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
+            "dependencies": {
+                "@malept/cross-spawn-promise": {
+                    "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+                    "requires": {
+                        "cross-spawn": "^7.0.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
+                    "version": "1.1.1"
+                }
+            },
+            "integrity": "sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==",
             "requires": {
+                "@electron/asar": "^3.2.1",
                 "@malept/cross-spawn-promise": "^1.1.0",
-                "asar": "^3.1.0",
                 "debug": "^4.3.1",
-                "dir-compare": "^2.4.0",
+                "dir-compare": "^3.0.0",
                 "fs-extra": "^9.0.1",
                 "minimatch": "^3.0.4",
                 "plist": "^3.0.4"
             },
-            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
-            "version": "1.2.1"
+            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz",
+            "version": "1.3.4"
         },
         "@gar/promisify": {
             "integrity": "sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==",
             "resolved": "https://registry.npmjs.org/@gar/promisify/-/promisify-1.1.3.tgz",
             "version": "1.1.3"
         },
         "@hutson/parse-repository-url": {
@@ -851,20 +974,20 @@
                 "npmlog": "^6.0.2",
                 "write-file-atomic": "^4.0.1"
             },
             "resolved": "https://registry.npmjs.org/@lerna/write-log-file/-/write-log-file-5.6.2.tgz",
             "version": "5.6.2"
         },
         "@malept/cross-spawn-promise": {
-            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+            "integrity": "sha512-1DpKU0Z5ThltBwjNySMC14g0CkbyhCaz9FkhxqNsZI6uAPJXFS8cMXlBKo26FJ8ZuW6S9GCMcR9IO5k2X5/9Fg==",
             "requires": {
                 "cross-spawn": "^7.0.1"
             },
-            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
-            "version": "1.1.1"
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-2.0.0.tgz",
+            "version": "2.0.0"
         },
         "@malept/flatpak-bundler": {
             "integrity": "sha512-9QOtNffcOF/c1seMCDnjckb3R9WHcG34tky+FHpNKKCW0wc/scYLwMtO+ptyGUfMW0/b/n4qRiALlaFHc9Oj7Q==",
             "requires": {
                 "debug": "^4.1.1",
                 "fs-extra": "^9.0.0",
                 "lodash": "^4.17.15",
@@ -1271,19 +1394,43 @@
             "integrity": "sha512-jjMmK1tnZbm1Jq5a7fBliM4gQwjxMU7TFoRNwIyzwlO+eHPRCFv/Nv+H/Gi1jc3WR7QURG8D5d0Tn12YGrUqBQ==",
             "requires": {
                 "esquery": "^1.0.1"
             },
             "resolved": "https://registry.npmjs.org/@phenomnomnominal/tsquery/-/tsquery-4.1.1.tgz",
             "version": "4.1.1"
         },
+        "@sindresorhus/is": {
+            "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
+            "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
+            "version": "4.6.0"
+        },
+        "@szmarczak/http-timer": {
+            "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
+            "requires": {
+                "defer-to-connect": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
+            "version": "4.0.6"
+        },
         "@tootallnate/once": {
             "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
             "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
             "version": "2.0.0"
         },
+        "@types/cacheable-request": {
+            "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
+            "requires": {
+                "@types/http-cache-semantics": "*",
+                "@types/keyv": "^3.1.4",
+                "@types/node": "*",
+                "@types/responselike": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
+            "version": "6.0.3"
+        },
         "@types/debug": {
             "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
             "requires": {
                 "@types/ms": "*"
             },
             "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
             "version": "4.1.7"
@@ -1302,19 +1449,32 @@
             "requires": {
                 "@types/minimatch": "*",
                 "@types/node": "*"
             },
             "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
             "version": "7.2.0"
         },
+        "@types/http-cache-semantics": {
+            "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
+            "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
+            "version": "4.0.1"
+        },
         "@types/json5": {
             "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
             "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
             "version": "0.0.29"
         },
+        "@types/keyv": {
+            "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
+            "requires": {
+                "@types/node": "*"
+            },
+            "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
+            "version": "3.1.4"
+        },
         "@types/minimatch": {
             "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
             "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
             "version": "3.0.5"
         },
         "@types/minimist": {
             "integrity": "sha512-jhuKLIRrhvCPLqwPcx6INqmKeiA5EWrsCOPhrlFSrbrmU4ZMPjj5Ul/oLCMDO98XRUIwVm78xICz4EPCektzeQ==",
@@ -1323,17 +1483,17 @@
         },
         "@types/ms": {
             "integrity": "sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==",
             "resolved": "https://registry.npmjs.org/@types/ms/-/ms-0.7.31.tgz",
             "version": "0.7.31"
         },
         "@types/node": {
-            "integrity": "sha512-m+6nTEOadJZuTPkKR/SYK3A2d7FZrgElol9UP1Kae90VVU4a6mxnPuLiIW1m4Cq4gZ/nWb9GrdVXJCoCazDAbg==",
-            "resolved": "https://registry.npmjs.org/@types/node/-/node-18.7.18.tgz",
-            "version": "18.7.18"
+            "integrity": "sha512-93+VvleD3mXwlLI/xASjw0FzKcwzl3OdTCzm1LaRfqgS21gfFtK3zDXM5Op9TeeMsJVOaJ2VRDpT9q4Y3d0AvA==",
+            "resolved": "https://registry.npmjs.org/@types/node/-/node-18.14.6.tgz",
+            "version": "18.14.6"
         },
         "@types/normalize-package-data": {
             "integrity": "sha512-Gj7cI7z+98M282Tqmp2K5EIsoouUEzbBJhQQzDE3jSIRk6r9gsz0oUokqIUR4u1R3dMHo0pDHM7sNOHyhulypw==",
             "resolved": "https://registry.npmjs.org/@types/normalize-package-data/-/normalize-package-data-2.4.1.tgz",
             "version": "2.4.1"
         },
         "@types/parse-json": {
@@ -1347,27 +1507,35 @@
             "requires": {
                 "@types/node": "*",
                 "xmlbuilder": ">=11.0.1"
             },
             "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
             "version": "3.0.2"
         },
+        "@types/responselike": {
+            "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
+            "requires": {
+                "@types/node": "*"
+            },
+            "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
+            "version": "1.0.0"
+        },
         "@types/verror": {
             "integrity": "sha512-NNm+gdePAX1VGvPcGZCDKQZKYSiAWigKhKaz5KF94hG6f2s8de9Ow5+7AbXoeKxL8gavZfk4UquSAygOF2duEQ==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.6.tgz",
             "version": "1.10.6"
         },
         "@types/yargs": {
-            "integrity": "sha512-aB4y9UDUXTSMxmM4MH+YnuR0g5Cph3FLQBoWoMB21DSvFVAxRVEHEMx3TLh+zUZYMCQtKiqazz0Q4Rre31f/OA==",
+            "integrity": "sha512-pet5WJ9U8yPVRhkwuEIp5ktAeAqRZOq4UdAyWLWzxbtpyXnzbtLdKiXAjJzi/KLmPGS9wk86lUFWZFN6sISo4g==",
             "requires": {
                 "@types/yargs-parser": "*"
             },
-            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.11.tgz",
-            "version": "17.0.11"
+            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.22.tgz",
+            "version": "17.0.22"
         },
         "@types/yargs-parser": {
             "integrity": "sha512-iO9ZQHkZxHn4mSakYV0vFHAVDyEOIJQrV2uZ06HxEPcx+mt8swXoZHIbaaJ2crJYFfErySgktuTZ3BeLz+XmFA==",
             "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.0.tgz",
             "version": "21.0.0"
         },
         "@yarnpkg/lockfile": {
@@ -1512,18 +1680,26 @@
         "app-builder-bin": {
             "integrity": "sha512-xwdG0FJPQMe0M0UA4Tz0zEB8rBJTRA5a476ZawAqiBkMv16GRK5xpXThOjMaEOFnZ6zabejjG4J3da0SXG63KA==",
             "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
             "version": "4.0.0"
         },
         "app-builder-lib": {
             "dependencies": {
+                "brace-expansion": {
+                    "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
+                    "requires": {
+                        "balanced-match": "^1.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
+                    "version": "2.0.1"
+                },
                 "ci-info": {
-                    "integrity": "sha512-t5QdPT5jq3o262DOQ8zA6E1tlH2upmUc4Hlvrbx1pGYJuiiHl7O7rvVNI+l8HTVhd/q3Qc9vqimkNk5yiXsAug==",
-                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.4.0.tgz",
-                    "version": "3.4.0"
+                    "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+                    "version": "3.8.0"
                 },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
@@ -1534,47 +1710,65 @@
                 "is-ci": {
                     "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
                     "requires": {
                         "ci-info": "^3.2.0"
                     },
                     "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
                     "version": "3.0.1"
+                },
+                "minimatch": {
+                    "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+                    "requires": {
+                        "brace-expansion": "^2.0.1"
+                    },
+                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+                    "version": "5.1.6"
+                },
+                "semver": {
+                    "integrity": "sha512-NB1ctGL5rlHrPJtFDVIVzTyQylMLu9N9VICA6HSFJo8MCGVTMW6gfpicwKmmK/dAjTOrqu5l63JJOpDSrAis3A==",
+                    "requires": {
+                        "lru-cache": "^6.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/semver/-/semver-7.3.8.tgz",
+                    "version": "7.3.8"
                 }
             },
-            "integrity": "sha512-Pf5HLmrRaeativDNhB+BxUdnSWIsz8H1eABkn/wvZ3WLNzbvIRvLRrsO9e9jTU10oDebxU/8FZ8InalmJxYCuA==",
+            "integrity": "sha512-S9wBoyXz2aQ7N3nV/SQS8Cg72NyhsIYGu0xm0w8iW+CWHkIOqQrwVd/cyV1iSYt6QntLGvS54j4SpW9OIkUqPw==",
             "requires": {
                 "7zip-bin": "~5.1.1",
                 "@develar/schema-utils": "~2.6.5",
-                "@electron/universal": "1.2.1",
+                "@electron/notarize": "^1.2.3",
+                "@electron/osx-sign": "^1.0.4",
+                "@electron/rebuild": "^3.2.10",
+                "@electron/universal": "1.3.4",
                 "@malept/flatpak-bundler": "^0.4.0",
                 "async-exit-hook": "^2.0.1",
                 "bluebird-lst": "^1.0.9",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
                 "chromium-pickle-js": "^0.2.0",
                 "debug": "^4.3.4",
-                "ejs": "^3.1.7",
-                "electron-osx-sign": "^0.6.0",
-                "electron-publish": "23.5.0",
+                "ejs": "^3.1.8",
+                "electron-publish": "24.0.0",
                 "form-data": "^4.0.0",
                 "fs-extra": "^10.1.0",
                 "hosted-git-info": "^4.1.0",
                 "is-ci": "^3.0.0",
-                "isbinaryfile": "^4.0.10",
+                "isbinaryfile": "^5.0.0",
                 "js-yaml": "^4.1.0",
                 "lazy-val": "^1.0.5",
-                "minimatch": "^3.1.2",
-                "read-config-file": "6.2.0",
+                "minimatch": "^5.1.1",
+                "read-config-file": "6.3.2",
                 "sanitize-filename": "^1.6.3",
-                "semver": "^7.3.7",
-                "tar": "^6.1.11",
+                "semver": "^7.3.8",
+                "tar": "^6.1.12",
                 "temp-file": "^3.4.0"
             },
-            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "aproba": {
             "integrity": "sha512-lYe4Gx7QT+MKGbDsA+Z+he/Wtef0BiwDOlK/XkBrdfsh9J/jPPXbX0tE9x9cl27Tmu5gg3QUbUrQYa/y+KOHPQ==",
             "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.0.0.tgz",
             "version": "2.0.0"
         },
         "are-we-there-yet": {
@@ -1612,26 +1806,14 @@
             "version": "1.0.1"
         },
         "asap": {
             "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
             "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
             "version": "2.0.6"
         },
-        "asar": {
-            "integrity": "sha512-COdw2ZQvKdFGFxXwX3oYh2/sOsJWJegrdJCGxnN4MZ7IULgRBp9P6665aqj9z1v9VwP4oP1hRBojRDQ//IGgAg==",
-            "requires": {
-                "@types/glob": "^7.1.1",
-                "chromium-pickle-js": "^0.2.0",
-                "commander": "^5.0.0",
-                "glob": "^7.1.6",
-                "minimatch": "^3.0.4"
-            },
-            "resolved": "https://registry.npmjs.org/asar/-/asar-3.2.0.tgz",
-            "version": "3.2.0"
-        },
         "assert-plus": {
             "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
             "version": "1.0.0"
         },
         "astral-regex": {
@@ -1755,49 +1937,30 @@
             "requires": {
                 "base64-js": "^1.3.1",
                 "ieee754": "^1.1.13"
             },
             "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
             "version": "5.7.1"
         },
-        "buffer-alloc": {
-            "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
-            "requires": {
-                "buffer-alloc-unsafe": "^1.1.0",
-                "buffer-fill": "^1.0.0"
-            },
-            "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
-            "version": "1.2.0"
-        },
-        "buffer-alloc-unsafe": {
-            "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
-            "version": "1.1.0"
-        },
         "buffer-equal": {
-            "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
-            "version": "1.0.0"
-        },
-        "buffer-fill": {
-            "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
-            "version": "1.0.0"
+            "integrity": "sha512-QoV3ptgEaQpvVwbXdSO39iqPQTCxSF7A5U99AxbHYqUdCizL/lH2Z0A2y6nbZucxMEOtNyZfG2s6gsVugGpKkg==",
+            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.1.tgz",
+            "version": "1.0.1"
         },
         "buffer-from": {
             "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
             "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
             "version": "1.1.2"
         },
         "builder-util": {
             "dependencies": {
                 "ci-info": {
-                    "integrity": "sha512-t5QdPT5jq3o262DOQ8zA6E1tlH2upmUc4Hlvrbx1pGYJuiiHl7O7rvVNI+l8HTVhd/q3Qc9vqimkNk5yiXsAug==",
-                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.4.0.tgz",
-                    "version": "3.4.0"
+                    "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+                    "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+                    "version": "3.8.0"
                 },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
@@ -1810,45 +1973,45 @@
                     "requires": {
                         "ci-info": "^3.2.0"
                     },
                     "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
                     "version": "3.0.1"
                 }
             },
-            "integrity": "sha512-TYz3sj2NMoG1/524/Je0p0RtEAKKjmTL6z2WQnzU6yM+WU/jHnA2OqX9Q/jys+rKuMy+7MCMdc+G+HrbpKWYSg==",
+            "integrity": "sha512-7UzkO1Uanui9Eyo6X4lM2UjEz6qA7sbZ7bPNsxhIi51nZ95o4EsQxIqIZgQlwM3cPSZba5pnu8oBThsAQVAhEg==",
             "requires": {
                 "7zip-bin": "~5.1.1",
                 "@types/debug": "^4.1.6",
                 "@types/fs-extra": "^9.0.11",
                 "app-builder-bin": "4.0.0",
                 "bluebird-lst": "^1.0.9",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
+                "builder-util-runtime": "9.2.0",
+                "chalk": "^4.1.2",
                 "cross-spawn": "^7.0.3",
                 "debug": "^4.3.4",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "http-proxy-agent": "^5.0.0",
-                "https-proxy-agent": "^5.0.0",
+                "https-proxy-agent": "^5.0.1",
                 "is-ci": "^3.0.0",
                 "js-yaml": "^4.1.0",
                 "source-map-support": "^0.5.19",
                 "stat-mode": "^1.0.0",
                 "temp-file": "^3.4.0"
             },
-            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.5.0.tgz",
-            "version": "23.5.0"
+            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "builder-util-runtime": {
-            "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
+            "integrity": "sha512-6S0FLP5n57MgSVEypgjq5veUMd8C8NKt/IgRRXyYXYnhRG9AxxAB4/uULQhDG4JbAoeb5ahOTPC1jAxT0l2ylQ==",
             "requires": {
                 "debug": "^4.3.4",
                 "sax": "^1.2.4"
             },
-            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
-            "version": "9.1.1"
+            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.2.0.tgz",
+            "version": "9.2.0"
         },
         "builtins": {
             "integrity": "sha512-qwVpFEHNfhYJIzNRBvd2C1kyo6jz3ZSMPyyuR47OPdiKWlbYnZNyDWuyR175qDnAJLiCo5fBBqPb3RiXgWlkOQ==",
             "requires": {
                 "semver": "^7.0.0"
             },
             "resolved": "https://registry.npmjs.org/builtins/-/builtins-5.0.1.tgz",
@@ -1915,14 +2078,43 @@
                 "ssri": "^9.0.0",
                 "tar": "^6.1.11",
                 "unique-filename": "^2.0.0"
             },
             "resolved": "https://registry.npmjs.org/cacache/-/cacache-16.1.3.tgz",
             "version": "16.1.3"
         },
+        "cacheable-lookup": {
+            "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
+            "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
+            "version": "5.0.4"
+        },
+        "cacheable-request": {
+            "dependencies": {
+                "get-stream": {
+                    "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
+                    "requires": {
+                        "pump": "^3.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
+                    "version": "5.2.0"
+                }
+            },
+            "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
+            "requires": {
+                "clone-response": "^1.0.2",
+                "get-stream": "^5.1.0",
+                "http-cache-semantics": "^4.0.0",
+                "keyv": "^4.0.0",
+                "lowercase-keys": "^2.0.0",
+                "normalize-url": "^6.0.1",
+                "responselike": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
+            "version": "7.0.2"
+        },
         "callsites": {
             "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
             "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
             "version": "3.1.0"
         },
         "camelcase": {
             "integrity": "sha512-L28STB170nwWS63UjtlEOE3dldQApaJXZkOI1uMFfzf3rRuPegHaHesyee+YxQ+W6SvRDQV6UrdOdRiR153wJg==",
@@ -2047,14 +2239,22 @@
                 "is-plain-object": "^2.0.4",
                 "kind-of": "^6.0.2",
                 "shallow-clone": "^3.0.0"
             },
             "resolved": "https://registry.npmjs.org/clone-deep/-/clone-deep-4.0.1.tgz",
             "version": "4.0.1"
         },
+        "clone-response": {
+            "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
+            "requires": {
+                "mimic-response": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "cmd-shim": {
             "integrity": "sha512-qkCtZ59BidfEwHltnJwkyVZn+XQojdAySM1D1gSeh11Z4pW1Kpolkyo53L5noc0nrxmIvyFwTmJRo4xs7FFLPw==",
             "requires": {
                 "mkdirp-infer-owner": "^2.0.0"
             },
             "resolved": "https://registry.npmjs.org/cmd-shim/-/cmd-shim-5.0.0.tgz",
             "version": "5.0.0"
@@ -2073,19 +2273,14 @@
             "version": "1.1.4"
         },
         "color-support": {
             "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
             "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
             "version": "1.1.3"
         },
-        "colors": {
-            "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
-            "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
-            "version": "1.0.3"
-        },
         "columnify": {
             "integrity": "sha512-lomjuFZKfM6MSAnV9aCZC9sc0qGbmZdfygNv+nCpqVkSKdCxCklLtd16O0EILGkImHw9ZpHkAnHaB+8Zxq5W6Q==",
             "requires": {
                 "strip-ansi": "^6.0.1",
                 "wcwidth": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/columnify/-/columnify-1.6.0.tgz",
@@ -2154,14 +2349,23 @@
             "requires": {
                 "ini": "^1.3.4",
                 "proto-list": "~1.2.1"
             },
             "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
             "version": "1.1.13"
         },
+        "config-file-ts": {
+            "integrity": "sha512-cKSW0BfrSaAUnxpgvpXPLaaW/umg4bqg4k3GO1JqlRfpx+d5W0GDXznCMkWotJQek5Mmz1MJVChQnz3IVaeMZQ==",
+            "requires": {
+                "glob": "^7.1.6",
+                "typescript": "^4.0.2"
+            },
+            "resolved": "https://registry.npmjs.org/config-file-ts/-/config-file-ts-0.2.4.tgz",
+            "version": "0.2.4"
+        },
         "console-control-strings": {
             "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ==",
             "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
             "version": "1.1.0"
         },
         "conventional-changelog-angular": {
             "integrity": "sha512-i/gipMxs7s8L/QeuavPF2hLnJgH6pEZAttySB6aiQLWcX3puWDL3ACVmvBhJGxnAy52Qc15ua26BufY6KpmrVA==",
@@ -2334,27 +2538,47 @@
             "requires": {
                 "decamelize": "^1.1.0",
                 "map-obj": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/decamelize-keys/-/decamelize-keys-1.1.1.tgz",
             "version": "1.1.1"
         },
+        "decompress-response": {
+            "dependencies": {
+                "mimic-response": {
+                    "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
+                    "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
+                    "version": "3.1.0"
+                }
+            },
+            "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
+            "requires": {
+                "mimic-response": "^3.1.0"
+            },
+            "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
+            "version": "6.0.0"
+        },
         "dedent": {
             "integrity": "sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==",
             "resolved": "https://registry.npmjs.org/dedent/-/dedent-0.7.0.tgz",
             "version": "0.7.0"
         },
         "defaults": {
             "integrity": "sha512-eFuaLoy/Rxalv2kr+lqMlUnrDWV+3j4pljOIJgLIhI058IQfWJ7vXhyEIHu+HtC738klGALYxOKDO0bQP3tg8A==",
             "requires": {
                 "clone": "^1.0.2"
             },
             "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.4.tgz",
             "version": "1.0.4"
         },
+        "defer-to-connect": {
+            "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
+            "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "define-lazy-prop": {
             "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
             "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
             "version": "2.0.0"
         },
         "delayed-stream": {
             "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
@@ -2377,51 +2601,36 @@
             "version": "2.3.1"
         },
         "detect-indent": {
             "integrity": "sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==",
             "resolved": "https://registry.npmjs.org/detect-indent/-/detect-indent-6.1.0.tgz",
             "version": "6.1.0"
         },
+        "detect-libc": {
+            "integrity": "sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==",
+            "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "dezalgo": {
             "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
             "requires": {
                 "asap": "^2.0.0",
                 "wrappy": "1"
             },
             "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
             "version": "1.0.4"
         },
         "dir-compare": {
-            "dependencies": {
-                "commander": {
-                    "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
-                    "requires": {
-                        "graceful-readlink": ">= 1.0.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
-                    "version": "2.9.0"
-                },
-                "minimatch": {
-                    "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
-                    "requires": {
-                        "brace-expansion": "^1.1.7"
-                    },
-                    "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
-                    "version": "3.0.4"
-                }
-            },
-            "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
+            "integrity": "sha512-J7/et3WlGUCxjdnD3HAAzQ6nsnc0WL6DD7WcwJb7c39iH1+AWfg+9OqzJNaI6PkBwBvm1mhZNL9iY/nRiZXlPg==",
             "requires": {
-                "buffer-equal": "1.0.0",
-                "colors": "1.0.3",
-                "commander": "2.9.0",
-                "minimatch": "3.0.4"
+                "buffer-equal": "^1.0.0",
+                "minimatch": "^3.0.4"
             },
-            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
-            "version": "2.4.0"
+            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-3.3.0.tgz",
+            "version": "3.3.0"
         },
         "dir-glob": {
             "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
             "requires": {
                 "path-type": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
@@ -2444,26 +2653,26 @@
                     "requires": {
                         "safer-buffer": ">= 2.1.2 < 3.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
                     "version": "0.6.3"
                 }
             },
-            "integrity": "sha512-TqIV0rdliw7FZ0DqY88FyPBH+q/Bp+yCPIhdYVraQxYMcaCNu7G3ZizApfEpCvoobtE6MY06/u91I9M7+gGYkw==",
+            "integrity": "sha512-/SWd0gYfn/ddx7mmBeAymOsslyyTNIO0ZFPKMlKcaBELziMqgrc3SX5qEwfPOh2942VgEQZyWzR9FhE+Y9bo6Q==",
             "requires": {
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "app-builder-lib": "24.0.0",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
                 "dmg-license": "^1.0.11",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "iconv-lite": "^0.6.2",
                 "js-yaml": "^4.1.0"
             },
-            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "dmg-license": {
             "integrity": "sha512-ZdzmqwKmECOWJpqefloC5OJy1+WZBBse5+MR88z9g9Zn4VY+WYUkAyojmhzJckH5YbbZGcYIuGAkY5/Ys5OM2Q==",
             "optional": true,
             "requires": {
                 "@types/plist": "^3.0.1",
                 "@types/verror": "^1.10.3",
@@ -2511,14 +2720,24 @@
         "electron-builder": {
             "dependencies": {
                 "ci-info": {
                     "integrity": "sha512-xmDt/QIAdeZ9+nfdPsaBCpMvHNLFiLdjj59qjqn+6iPe6YmHGQ35sBnQ8uslRBXFmXkiZQOJRjvQeoGppoTjjg==",
                     "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.3.2.tgz",
                     "version": "3.3.2"
                 },
+                "cliui": {
+                    "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+                    "requires": {
+                        "string-width": "^4.2.0",
+                        "strip-ansi": "^6.0.1",
+                        "wrap-ansi": "^7.0.0"
+                    },
+                    "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+                    "version": "8.0.1"
+                },
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
@@ -2530,112 +2749,76 @@
                     "requires": {
                         "ci-info": "^3.2.0"
                     },
                     "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
                     "version": "3.0.1"
                 },
                 "yargs": {
-                    "integrity": "sha512-t6YAJcxDkNX7NFYiVtKvWUz8l+PaKTLiL63mJYWR2GnHq2gjEWISzsLp9wg3aY36dY1j+gfIEL3pIF+XlJJfbA==",
+                    "integrity": "sha512-cwiTb08Xuv5fqF4AovYacTFNxk62th7LKJ6BL9IGUpTJrWoU7/7WdQGTP2SjKf1dUNBGzDd28p/Yfs/GI6JrLw==",
                     "requires": {
-                        "cliui": "^7.0.2",
+                        "cliui": "^8.0.1",
                         "escalade": "^3.1.1",
                         "get-caller-file": "^2.0.5",
                         "require-directory": "^2.1.1",
                         "string-width": "^4.2.3",
                         "y18n": "^5.0.5",
-                        "yargs-parser": "^21.0.0"
+                        "yargs-parser": "^21.1.1"
                     },
-                    "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.5.1.tgz",
-                    "version": "17.5.1"
+                    "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.1.tgz",
+                    "version": "17.7.1"
                 },
                 "yargs-parser": {
                     "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
                     "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
                     "version": "21.1.1"
                 }
             },
-            "integrity": "sha512-SWTlf9jqbSa/UFDy1xcaMLIAL39TMd1PPYIgDN8bnfzJntMKEd16qguKsAxfW/kEKcPHLCVh69JyS1GbQ4sROQ==",
+            "integrity": "sha512-31GXEEi02c0/lJwfs6cX0tQlyFEQOi9ZCCQ5GFyazdhnTlGGxYvVTTQogAG9LPxUGOzRNZiUvhai5KXmMp3a0g==",
             "requires": {
-                "@types/yargs": "^17.0.1",
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "dmg-builder": "23.5.1",
-                "fs-extra": "^10.0.0",
+                "@types/yargs": "^17.0.16",
+                "app-builder-lib": "24.0.0",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
+                "chalk": "^4.1.2",
+                "dmg-builder": "24.0.0",
+                "fs-extra": "^10.1.0",
                 "is-ci": "^3.0.0",
                 "lazy-val": "^1.0.5",
-                "read-config-file": "6.2.0",
-                "simple-update-notifier": "^1.0.7",
-                "yargs": "^17.5.1"
+                "read-config-file": "6.3.2",
+                "simple-update-notifier": "^1.1.0",
+                "yargs": "^17.6.2"
             },
-            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.5.1.tgz",
-            "version": "23.5.1"
-        },
-        "electron-osx-sign": {
-            "dependencies": {
-                "debug": {
-                    "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-                    "requires": {
-                        "ms": "2.0.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-                    "version": "2.6.9"
-                },
-                "isbinaryfile": {
-                    "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
-                    "requires": {
-                        "buffer-alloc": "^1.2.0"
-                    },
-                    "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
-                    "version": "3.0.3"
-                },
-                "ms": {
-                    "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
-                    "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-                    "version": "2.0.0"
-                }
-            },
-            "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
-            "requires": {
-                "bluebird": "^3.5.0",
-                "compare-version": "^0.1.2",
-                "debug": "^2.6.8",
-                "isbinaryfile": "^3.0.2",
-                "minimist": "^1.2.0",
-                "plist": "^3.0.1"
-            },
-            "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
-            "version": "0.6.0"
+            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "electron-publish": {
             "dependencies": {
                 "fs-extra": {
                     "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
                     "requires": {
                         "graceful-fs": "^4.2.0",
                         "jsonfile": "^6.0.1",
                         "universalify": "^2.0.0"
                     },
                     "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
                     "version": "10.1.0"
                 }
             },
-            "integrity": "sha512-dY/bAN5tIjEPX1AV5FK9TXKKoGGalGb53SgGbhiII3o+WLzK+4vew6rrmChBTwELP/q8r4a89X+slTDG/iPdww==",
+            "integrity": "sha512-XY99MVdMXfseO3oBPQ5jdT68DFcUd4eudonbVvqrCBj9qur0w/L80M/fBMmXulokTiwI4L8tIJzcswKE6W0ibA==",
             "requires": {
                 "@types/fs-extra": "^9.0.11",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "fs-extra": "^10.0.0",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
+                "chalk": "^4.1.2",
+                "fs-extra": "^10.1.0",
                 "lazy-val": "^1.0.5",
                 "mime": "^2.5.2"
             },
-            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.5.0.tgz",
-            "version": "23.5.0"
+            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "emoji-regex": {
             "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
             "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
             "version": "8.0.0"
         },
         "encoding": {
@@ -3081,24 +3264,37 @@
                 "ignore": "^5.2.0",
                 "merge2": "^1.4.1",
                 "slash": "^3.0.0"
             },
             "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
             "version": "11.1.0"
         },
+        "got": {
+            "integrity": "sha512-6tfZ91bOr7bOXnK7PRDCGBLa1H4U080YHNaAQ2KsMGlLEzRbk44nsZF2E1IeRc3vtJHPVbKCYgdFbaGO2ljd8g==",
+            "requires": {
+                "@sindresorhus/is": "^4.0.0",
+                "@szmarczak/http-timer": "^4.0.5",
+                "@types/cacheable-request": "^6.0.1",
+                "@types/responselike": "^1.0.0",
+                "cacheable-lookup": "^5.0.3",
+                "cacheable-request": "^7.0.2",
+                "decompress-response": "^6.0.0",
+                "http2-wrapper": "^1.0.0-beta.5.2",
+                "lowercase-keys": "^2.0.0",
+                "p-cancelable": "^2.0.0",
+                "responselike": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/got/-/got-11.8.6.tgz",
+            "version": "11.8.6"
+        },
         "graceful-fs": {
             "integrity": "sha512-NtNxqUcXgpW2iMrfqSfR73Glt39K+BLwWsPs94yR63v45T0Wbej7eRmL5cWfwEgqXnmjQp3zaJTshdRW/qC2ZQ==",
             "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.9.tgz",
             "version": "4.2.9"
         },
-        "graceful-readlink": {
-            "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
-            "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
-            "version": "1.0.1"
-        },
         "handlebars": {
             "integrity": "sha512-aAcXm5OAfE/8IXkcZvCepKU3VzW1/39Fb5ZuqMtgI/hT8X2YgoMvBY5dLhq/cpOvw7Lk1nK/UF71aLG/ZnVYRA==",
             "requires": {
                 "minimist": "^1.2.5",
                 "neo-async": "^2.6.0",
                 "source-map": "^0.6.1",
                 "uglify-js": "^3.1.4",
@@ -3135,36 +3331,52 @@
             "requires": {
                 "lru-cache": "^6.0.0"
             },
             "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
             "version": "4.1.0"
         },
         "http-cache-semantics": {
-            "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
-            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
-            "version": "4.1.0"
+            "integrity": "sha512-er295DKPVsV82j5kw1Gjt+ADA/XYHsajl82cGNQG2eyoPkvgUhX+nDIyelzhIWbbsXP39EHcI6l5tYs2FYqYXQ==",
+            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.1.tgz",
+            "version": "4.1.1"
         },
         "http-proxy-agent": {
             "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
             "requires": {
                 "@tootallnate/once": "2",
                 "agent-base": "6",
                 "debug": "4"
             },
             "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "http2-wrapper": {
+            "dependencies": {
+                "quick-lru": {
+                    "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
+                    "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
+                    "version": "5.1.1"
+                }
+            },
+            "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
+            "requires": {
+                "quick-lru": "^5.1.1",
+                "resolve-alpn": "^1.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "https-proxy-agent": {
-            "integrity": "sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==",
+            "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
             "requires": {
                 "agent-base": "6",
                 "debug": "4"
             },
-            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz",
-            "version": "5.0.0"
+            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
+            "version": "5.0.1"
         },
         "human-signals": {
             "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
             "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
             "version": "2.1.0"
         },
         "humanize-ms": {
@@ -3486,17 +3698,17 @@
         },
         "isarray": {
             "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
             "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
             "version": "1.0.0"
         },
         "isbinaryfile": {
-            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
-            "version": "4.0.10"
+            "integrity": "sha512-UDdnyGvMajJUWCkib7Cei/dvyJrrvo4FIrsvSFWdPpXSUorzXrDJ0S+X5Q4ZlasfPjca4yqCNNsjbCeiy8FFeg==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-5.0.0.tgz",
+            "version": "5.0.0"
         },
         "isexe": {
             "integrity": "sha1-6PvzdNxVb/iUehDcsFctYz8s+hA=",
             "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
             "version": "2.0.0"
         },
         "isobject": {
@@ -3524,14 +3736,19 @@
             "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
             "requires": {
                 "argparse": "^2.0.1"
             },
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "json-buffer": {
+            "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
+            "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
+            "version": "3.0.1"
+        },
         "json-parse-better-errors": {
             "integrity": "sha512-mrqyZKfX5EhL7hvqcV6WG1yYjnjeuYDzDhhcAAUrq8Po85NBQBJP+ZDUT75qZQ98IkUoBqdkExkukOU7Ts2wrw==",
             "resolved": "https://registry.npmjs.org/json-parse-better-errors/-/json-parse-better-errors-1.0.2.tgz",
             "version": "1.0.2"
         },
         "json-parse-even-better-errors": {
             "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
@@ -3550,17 +3767,17 @@
         },
         "json-stringify-safe": {
             "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
             "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
             "version": "5.0.1"
         },
         "json5": {
-            "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
-            "version": "2.2.1"
+            "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+            "version": "2.2.3"
         },
         "jsonc-parser": {
             "integrity": "sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==",
             "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz",
             "version": "3.2.0"
         },
         "jsonfile": {
@@ -3583,14 +3800,22 @@
             "version": "5.1.1"
         },
         "just-diff-apply": {
             "integrity": "sha512-AAV5Jw7tsniWwih8Ly3fXxEZ06y+6p5TwQMsw0dzZ/wPKilzyDgdAnL0Ug4NNIquPUOh1vfFWEHbmXUqM5+o8g==",
             "resolved": "https://registry.npmjs.org/just-diff-apply/-/just-diff-apply-5.4.1.tgz",
             "version": "5.4.1"
         },
+        "keyv": {
+            "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
+            "requires": {
+                "json-buffer": "3.0.1"
+            },
+            "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
+            "version": "4.5.2"
+        },
         "kind-of": {
             "integrity": "sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==",
             "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-6.0.3.tgz",
             "version": "6.0.3"
         },
         "lazy-val": {
             "integrity": "sha512-0/BnGCCfyUMkBpeDgWihanIAF9JmZhHBgUhEqzvf+adhNGLoP6TaiI5oF8oyb3I45P+PcnrqihSf01M0l0G5+Q==",
@@ -3759,22 +3984,37 @@
             "requires": {
                 "chalk": "^4.1.0",
                 "is-unicode-supported": "^0.1.0"
             },
             "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "lowercase-keys": {
+            "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
+            "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
+            "version": "2.0.0"
+        },
         "lru-cache": {
             "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
             "requires": {
                 "yallist": "^4.0.0"
             },
             "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
             "version": "6.0.0"
         },
+        "lzma-native": {
+            "integrity": "sha512-09xfg67mkL2Lz20PrrDeNYZxzeW7ADtpYFbwSQh9U8+76RIzx5QsJBMy8qikv3hbUPfpy6hqwxt6FcGK81g9AA==",
+            "requires": {
+                "node-addon-api": "^3.1.0",
+                "node-gyp-build": "^4.2.1",
+                "readable-stream": "^3.6.0"
+            },
+            "resolved": "https://registry.npmjs.org/lzma-native/-/lzma-native-8.0.6.tgz",
+            "version": "8.0.6"
+        },
         "make-dir": {
             "dependencies": {
                 "semver": {
                     "integrity": "sha512-b39TBaTSfV6yBrapU89p5fKekE2m/NwnDocOVruQFS1/veMgdzuPcnOM34M6CwxW8jH/lxEa5rBoDeUwu5HHTw==",
                     "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.0.tgz",
                     "version": "6.3.0"
                 }
@@ -3940,14 +4180,19 @@
             "version": "2.1.35"
         },
         "mimic-fn": {
             "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
             "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
             "version": "2.1.0"
         },
+        "mimic-response": {
+            "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
+            "version": "1.0.1"
+        },
         "min-indent": {
             "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
             "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
             "version": "1.0.1"
         },
         "minimatch": {
             "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
@@ -4096,19 +4341,35 @@
             "version": "0.6.3"
         },
         "neo-async": {
             "integrity": "sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==",
             "resolved": "https://registry.npmjs.org/neo-async/-/neo-async-2.6.2.tgz",
             "version": "2.6.2"
         },
+        "node-abi": {
+            "integrity": "sha512-7GGVawqyHF4pfd0YFybhv/eM9JwTtPqx0mAanQ146O3FlSh3pA24zf9IRQTOsfTSqXTNzPSP5iagAJ94jjuVog==",
+            "requires": {
+                "semver": "^7.3.5"
+            },
+            "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.33.0.tgz",
+            "version": "3.33.0"
+        },
         "node-addon-api": {
             "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-3.2.1.tgz",
             "version": "3.2.1"
         },
+        "node-api-version": {
+            "integrity": "sha512-KGXihXdUChwJAOHO53bv9/vXcLmdUsZ6jIptbvYvkpKfth+r7jw44JkVxQFA3kX5nQjzjmGu1uAu/xNNLNlI5g==",
+            "requires": {
+                "semver": "^7.3.5"
+            },
+            "resolved": "https://registry.npmjs.org/node-api-version/-/node-api-version-0.1.4.tgz",
+            "version": "0.1.4"
+        },
         "node-fetch": {
             "integrity": "sha512-ZjMPFEfVx5j+y2yF35Kzx5sF7kDzxuDj6ziH4FFbOp87zKDZNx8yExJIb05OGF4Nlt9IHFIMBkRl41VdvcNdbQ==",
             "requires": {
                 "whatwg-url": "^5.0.0"
             },
             "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.7.tgz",
             "version": "2.6.7"
@@ -4165,14 +4426,19 @@
             "version": "3.0.3"
         },
         "normalize-path": {
             "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
             "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
             "version": "3.0.0"
         },
+        "normalize-url": {
+            "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
+            "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
+            "version": "6.1.0"
+        },
         "npm-bundled": {
             "integrity": "sha512-x5DHup0SuyQcmL3s7Rx/YQ8sbw/Hzg0rj48eN0dV7hf5cmQq5PXIeioroH3raV1QC1yh3uTYuMThvEQF3iKgGQ==",
             "requires": {
                 "npm-normalize-package-bin": "^1.0.1"
             },
             "resolved": "https://registry.npmjs.org/npm-bundled/-/npm-bundled-1.1.2.tgz",
             "version": "1.1.2"
@@ -4569,14 +4835,19 @@
             "version": "5.4.1"
         },
         "os-tmpdir": {
             "integrity": "sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==",
             "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
             "version": "1.0.2"
         },
+        "p-cancelable": {
+            "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
+            "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
+            "version": "2.1.1"
+        },
         "p-finally": {
             "integrity": "sha512-LICb2p9CB7FS+0eR1oqWnHhp0FljGLZCWBE9aix0Uye9W8LTQPwMTYVGWQWIw9RdQiDg4+epXQODwIYJtSJaow==",
             "resolved": "https://registry.npmjs.org/p-finally/-/p-finally-1.0.0.tgz",
             "version": "1.0.0"
         },
         "p-limit": {
             "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
@@ -4851,18 +5122,27 @@
             "version": "2.0.1"
         },
         "proxy-from-env": {
             "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
             "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
             "version": "1.1.0"
         },
+        "pump": {
+            "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
+            "requires": {
+                "end-of-stream": "^1.1.0",
+                "once": "^1.3.1"
+            },
+            "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
+            "version": "3.0.0"
+        },
         "punycode": {
-            "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
-            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
-            "version": "2.1.1"
+            "integrity": "sha512-rRV+zQD8tVFys26lAGR9WUuS4iUAngJScM+ZRSKtvl5tKeZ2t5bvdNFdNHBW9FWR4guGHlgmsZ1G7BSm2wTbuA==",
+            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.0.tgz",
+            "version": "2.3.0"
         },
         "q": {
             "integrity": "sha512-kV/CThkXo6xyFEZUugw/+pIOywXcDbFYgSct5cT3gqlbkBE1SJdwy6UQoZvodiWF/ckQLZyDE/Bu1M6gVu5lVw==",
             "resolved": "https://registry.npmjs.org/q/-/q-1.5.1.tgz",
             "version": "1.5.1"
         },
         "queue-microtask": {
@@ -4885,24 +5165,25 @@
         },
         "read-cmd-shim": {
             "integrity": "sha512-kEmDUoYf/CDy8yZbLTmhB1X9kkjf9Q80PCNsDMb7ufrGd6zZSQA1+UyjrO+pZm5K/S4OXCWJeiIt1JA8kAsa6g==",
             "resolved": "https://registry.npmjs.org/read-cmd-shim/-/read-cmd-shim-3.0.1.tgz",
             "version": "3.0.1"
         },
         "read-config-file": {
-            "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
+            "integrity": "sha512-M80lpCjnE6Wt6zb98DoW8WHR09nzMSpu8XHtPkiTHrJ5Az9CybfeQhTJ8D7saeBHpGhLPIVyA8lcL6ZmdKwY6Q==",
             "requires": {
+                "config-file-ts": "^0.2.4",
                 "dotenv": "^9.0.2",
                 "dotenv-expand": "^5.1.0",
                 "js-yaml": "^4.1.0",
                 "json5": "^2.2.0",
                 "lazy-val": "^1.0.4"
             },
-            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
-            "version": "6.2.0"
+            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.3.2.tgz",
+            "version": "6.3.2"
         },
         "read-package-json": {
             "dependencies": {
                 "brace-expansion": {
                     "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
                     "requires": {
                         "balanced-match": "^1.0.0"
@@ -5153,27 +5434,40 @@
                 "is-core-module": "^2.9.0",
                 "path-parse": "^1.0.7",
                 "supports-preserve-symlinks-flag": "^1.0.0"
             },
             "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
             "version": "1.22.1"
         },
+        "resolve-alpn": {
+            "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
+            "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
+            "version": "1.2.1"
+        },
         "resolve-cwd": {
             "integrity": "sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==",
             "requires": {
                 "resolve-from": "^5.0.0"
             },
             "resolved": "https://registry.npmjs.org/resolve-cwd/-/resolve-cwd-3.0.0.tgz",
             "version": "3.0.0"
         },
         "resolve-from": {
             "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
             "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "responselike": {
+            "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
+            "requires": {
+                "lowercase-keys": "^2.0.0"
+            },
+            "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "restore-cursor": {
             "integrity": "sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==",
             "requires": {
                 "onetime": "^5.1.0",
                 "signal-exit": "^3.0.2"
             },
             "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-3.1.0.tgz",
@@ -5284,20 +5578,20 @@
             "dependencies": {
                 "semver": {
                     "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
                     "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
                     "version": "7.0.0"
                 }
             },
-            "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
+            "integrity": "sha512-VpsrsJSUcJEseSbMHkrsrAVSdvVS5I96Qo1QAQ4FxQ9wXFcB+pjj7FB7/us9+GcgfW4ziHtYMc1J0PLczb55mg==",
             "requires": {
                 "semver": "~7.0.0"
             },
-            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
-            "version": "1.0.7"
+            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.1.0.tgz",
+            "version": "1.1.0"
         },
         "slash": {
             "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
             "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
             "version": "3.0.0"
         },
         "slice-ansi": {
@@ -5490,25 +5784,32 @@
         },
         "supports-preserve-symlinks-flag": {
             "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
             "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
             "version": "1.0.0"
         },
         "tar": {
-            "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
+            "dependencies": {
+                "minipass": {
+                    "integrity": "sha512-lwycX3cBMTvcejsHITUgYj6Gy6A7Nh4Q6h9NP4sTHY1ccJlC7yKzDmiShEHsJ16Jf1nKGDEaiHxiltsJEvk0nQ==",
+                    "resolved": "https://registry.npmjs.org/minipass/-/minipass-4.2.4.tgz",
+                    "version": "4.2.4"
+                }
+            },
+            "integrity": "sha512-jdIBIN6LTIe2jqzay/2vtYLlBHa3JF42ot3h1dW8Q0PaAG4v8rm0cvpVePtau5C6OKXGGcgO9q2AMNSWxiLqKw==",
             "requires": {
                 "chownr": "^2.0.0",
                 "fs-minipass": "^2.0.0",
-                "minipass": "^3.0.0",
+                "minipass": "^4.0.0",
                 "minizlib": "^2.1.1",
                 "mkdirp": "^1.0.3",
                 "yallist": "^4.0.0"
             },
-            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
-            "version": "6.1.11"
+            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.13.tgz",
+            "version": "6.1.13"
         },
         "tar-stream": {
             "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
             "requires": {
                 "bl": "^4.0.3",
                 "end-of-stream": "^1.4.1",
                 "fs-constants": "^1.0.0",
@@ -5618,20 +5919,20 @@
             },
             "resolved": "https://registry.npmjs.org/truncate-utf8-bytes/-/truncate-utf8-bytes-1.0.2.tgz",
             "version": "1.0.2"
         },
         "tsconfig-paths": {
             "dependencies": {
                 "json5": {
-                    "integrity": "sha512-aKS4WQjPenRxiQsC93MNfjx+nbF4PAdYzmd/1JIj8HYzqfbu86beTuNgXDzPknWk0n0uARlyewZo4s++ES36Ow==",
+                    "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
                     "requires": {
                         "minimist": "^1.2.0"
                     },
-                    "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.1.tgz",
-                    "version": "1.0.1"
+                    "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
+                    "version": "1.0.2"
                 },
                 "strip-bom": {
                     "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
                     "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
                     "version": "3.0.0"
                 }
             },
@@ -5995,15 +6296,15 @@
         }
     },
     "lockfileVersion": 2,
     "name": "npm_windows",
     "packages": {
         "": {
             "dependencies": {
-                "electron-builder": "^23.5.1",
+                "electron-builder": "^24.0.0",
                 "lerna": "^5.6.2"
             },
             "license": "ISC",
             "name": "npm_windows",
             "version": "1.0.0"
         },
         "node_modules/7zip-bin": {
@@ -6111,30 +6412,205 @@
                 "type": "opencollective",
                 "url": "https://opencollective.com/webpack"
             },
             "integrity": "sha512-0cp4PsWQ/9avqTVMCtZ+GirikIA36ikvjtHweU4/j8yLtgObI0+JUPhYFScgwlteveGB1rt3Cm8UhN04XayDig==",
             "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
             "version": "2.6.5"
         },
+        "node_modules/@electron/asar": {
+            "bin": {
+                "asar": "bin/asar.js"
+            },
+            "dependencies": {
+                "chromium-pickle-js": "^0.2.0",
+                "commander": "^5.0.0",
+                "glob": "^7.1.6",
+                "minimatch": "^3.0.4"
+            },
+            "engines": {
+                "node": ">=10.12.0"
+            },
+            "integrity": "sha512-wmOfE6szYyqZhRIiLH+eyZEp+bGcJI0OD/SCvSUrfBE0jvauyGYO2ZhpWxmNCcDojKu5DYrsVqT5BOCZZ01XIg==",
+            "optionalDependencies": {
+                "@types/glob": "^7.1.1"
+            },
+            "resolved": "https://registry.npmjs.org/@electron/asar/-/asar-3.2.3.tgz",
+            "version": "3.2.3"
+        },
+        "node_modules/@electron/notarize": {
+            "dependencies": {
+                "debug": "^4.1.1",
+                "fs-extra": "^9.0.1"
+            },
+            "engines": {
+                "node": ">= 10.0.0"
+            },
+            "integrity": "sha512-9oRzT56rKh5bspk3KpAVF8lPKHYQrBnRwcgiOeR0hdilVEQmszDaAu0IPCPrwwzJN0ugNs0rRboTreHMt/6mBQ==",
+            "resolved": "https://registry.npmjs.org/@electron/notarize/-/notarize-1.2.3.tgz",
+            "version": "1.2.3"
+        },
+        "node_modules/@electron/osx-sign": {
+            "bin": {
+                "electron-osx-flat": "bin/electron-osx-flat.js",
+                "electron-osx-sign": "bin/electron-osx-sign.js"
+            },
+            "dependencies": {
+                "compare-version": "^0.1.2",
+                "debug": "^4.3.4",
+                "fs-extra": "^10.0.0",
+                "isbinaryfile": "^4.0.8",
+                "minimist": "^1.2.6",
+                "plist": "^3.0.5"
+            },
+            "engines": {
+                "node": ">=12.0.0"
+            },
+            "integrity": "sha512-xfhdEcIOfAZg7scZ9RQPya1G1lWo8/zMCwUXAulq0SfY7ONIW+b9qGyKdMyuMctNYwllrIS+vmxfijSfjeh97g==",
+            "resolved": "https://registry.npmjs.org/@electron/osx-sign/-/osx-sign-1.0.4.tgz",
+            "version": "1.0.4"
+        },
+        "node_modules/@electron/osx-sign/node_modules/fs-extra": {
+            "dependencies": {
+                "graceful-fs": "^4.2.0",
+                "jsonfile": "^6.0.1",
+                "universalify": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+            "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+            "version": "10.1.0"
+        },
+        "node_modules/@electron/osx-sign/node_modules/isbinaryfile": {
+            "engines": {
+                "node": ">= 8.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/gjtorikian/"
+            },
+            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
+            "version": "4.0.10"
+        },
+        "node_modules/@electron/rebuild": {
+            "bin": {
+                "electron-rebuild": "lib/src/cli.js"
+            },
+            "dependencies": {
+                "@malept/cross-spawn-promise": "^2.0.0",
+                "chalk": "^4.0.0",
+                "debug": "^4.1.1",
+                "detect-libc": "^2.0.1",
+                "fs-extra": "^10.0.0",
+                "got": "^11.7.0",
+                "lzma-native": "^8.0.5",
+                "node-abi": "^3.0.0",
+                "node-api-version": "^0.1.4",
+                "node-gyp": "^9.0.0",
+                "ora": "^5.1.0",
+                "semver": "^7.3.5",
+                "tar": "^6.0.5",
+                "yargs": "^17.0.1"
+            },
+            "engines": {
+                "node": ">=12.13.0"
+            },
+            "integrity": "sha512-SUBM6Mwi3yZaDFQjZzfGKpYTtOp9m60glounwX6tfGeVc/ZOl4jbquktUcyy7gYSLDWFLtKkftkY2xgMJZLQgg==",
+            "resolved": "https://registry.npmjs.org/@electron/rebuild/-/rebuild-3.2.10.tgz",
+            "version": "3.2.10"
+        },
+        "node_modules/@electron/rebuild/node_modules/cliui": {
+            "dependencies": {
+                "string-width": "^4.2.0",
+                "strip-ansi": "^6.0.1",
+                "wrap-ansi": "^7.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+            "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+            "version": "8.0.1"
+        },
+        "node_modules/@electron/rebuild/node_modules/fs-extra": {
+            "dependencies": {
+                "graceful-fs": "^4.2.0",
+                "jsonfile": "^6.0.1",
+                "universalify": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
+            "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
+            "version": "10.1.0"
+        },
+        "node_modules/@electron/rebuild/node_modules/yargs": {
+            "dependencies": {
+                "cliui": "^8.0.1",
+                "escalade": "^3.1.1",
+                "get-caller-file": "^2.0.5",
+                "require-directory": "^2.1.1",
+                "string-width": "^4.2.3",
+                "y18n": "^5.0.5",
+                "yargs-parser": "^21.1.1"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-cwiTb08Xuv5fqF4AovYacTFNxk62th7LKJ6BL9IGUpTJrWoU7/7WdQGTP2SjKf1dUNBGzDd28p/Yfs/GI6JrLw==",
+            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.1.tgz",
+            "version": "17.7.1"
+        },
+        "node_modules/@electron/rebuild/node_modules/yargs-parser": {
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
+            "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
+            "version": "21.1.1"
+        },
         "node_modules/@electron/universal": {
             "dependencies": {
+                "@electron/asar": "^3.2.1",
                 "@malept/cross-spawn-promise": "^1.1.0",
-                "asar": "^3.1.0",
                 "debug": "^4.3.1",
-                "dir-compare": "^2.4.0",
+                "dir-compare": "^3.0.0",
                 "fs-extra": "^9.0.1",
                 "minimatch": "^3.0.4",
                 "plist": "^3.0.4"
             },
             "engines": {
                 "node": ">=8.6"
             },
-            "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
-            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
-            "version": "1.2.1"
+            "integrity": "sha512-BdhBgm2ZBnYyYRLRgOjM5VHkyFItsbggJ0MHycOjKWdFGYwK97ZFXH54dTvUWEfha81vfvwr5On6XBjt99uDcg==",
+            "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.3.4.tgz",
+            "version": "1.3.4"
+        },
+        "node_modules/@electron/universal/node_modules/@malept/cross-spawn-promise": {
+            "dependencies": {
+                "cross-spawn": "^7.0.1"
+            },
+            "engines": {
+                "node": ">= 10"
+            },
+            "funding": [
+                {
+                    "type": "individual",
+                    "url": "https://github.com/sponsors/malept"
+                },
+                {
+                    "type": "tidelift",
+                    "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
+                }
+            ],
+            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
+            "version": "1.1.1"
         },
         "node_modules/@gar/promisify": {
             "integrity": "sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==",
             "resolved": "https://registry.npmjs.org/@gar/promisify/-/promisify-1.1.3.tgz",
             "version": "1.1.3"
         },
         "node_modules/@hutson/parse-repository-url": {
@@ -7070,29 +7546,29 @@
             "version": "5.6.2"
         },
         "node_modules/@malept/cross-spawn-promise": {
             "dependencies": {
                 "cross-spawn": "^7.0.1"
             },
             "engines": {
-                "node": ">= 10"
+                "node": ">= 12.13.0"
             },
             "funding": [
                 {
                     "type": "individual",
                     "url": "https://github.com/sponsors/malept"
                 },
                 {
                     "type": "tidelift",
                     "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
                 }
             ],
-            "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
-            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
-            "version": "1.1.1"
+            "integrity": "sha512-1DpKU0Z5ThltBwjNySMC14g0CkbyhCaz9FkhxqNsZI6uAPJXFS8cMXlBKo26FJ8ZuW6S9GCMcR9IO5k2X5/9Fg==",
+            "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-2.0.0.tgz",
+            "version": "2.0.0"
         },
         "node_modules/@malept/flatpak-bundler": {
             "dependencies": {
                 "debug": "^4.1.1",
                 "fs-extra": "^9.0.0",
                 "lodash": "^4.17.15",
                 "tmp-promise": "^3.0.2"
@@ -7622,22 +8098,55 @@
             "integrity": "sha512-jjMmK1tnZbm1Jq5a7fBliM4gQwjxMU7TFoRNwIyzwlO+eHPRCFv/Nv+H/Gi1jc3WR7QURG8D5d0Tn12YGrUqBQ==",
             "peerDependencies": {
                 "typescript": "^3 || ^4"
             },
             "resolved": "https://registry.npmjs.org/@phenomnomnominal/tsquery/-/tsquery-4.1.1.tgz",
             "version": "4.1.1"
         },
+        "node_modules/@sindresorhus/is": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sindresorhus/is?sponsor=1"
+            },
+            "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
+            "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
+            "version": "4.6.0"
+        },
+        "node_modules/@szmarczak/http-timer": {
+            "dependencies": {
+                "defer-to-connect": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
+            "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
+            "version": "4.0.6"
+        },
         "node_modules/@tootallnate/once": {
             "engines": {
                 "node": ">= 10"
             },
             "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
             "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
             "version": "2.0.0"
         },
+        "node_modules/@types/cacheable-request": {
+            "dependencies": {
+                "@types/http-cache-semantics": "*",
+                "@types/keyv": "^3.1.4",
+                "@types/node": "*",
+                "@types/responselike": "^1.0.0"
+            },
+            "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
+            "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
+            "version": "6.0.3"
+        },
         "node_modules/@types/debug": {
             "dependencies": {
                 "@types/ms": "*"
             },
             "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
             "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
             "version": "4.1.7"
@@ -7656,19 +8165,32 @@
                 "@types/node": "*"
             },
             "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
             "version": "7.2.0"
         },
+        "node_modules/@types/http-cache-semantics": {
+            "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
+            "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
+            "version": "4.0.1"
+        },
         "node_modules/@types/json5": {
             "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
             "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
             "version": "0.0.29"
         },
+        "node_modules/@types/keyv": {
+            "dependencies": {
+                "@types/node": "*"
+            },
+            "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
+            "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
+            "version": "3.1.4"
+        },
         "node_modules/@types/minimatch": {
             "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
             "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
             "version": "3.0.5"
         },
         "node_modules/@types/minimist": {
             "integrity": "sha512-jhuKLIRrhvCPLqwPcx6INqmKeiA5EWrsCOPhrlFSrbrmU4ZMPjj5Ul/oLCMDO98XRUIwVm78xICz4EPCektzeQ==",
@@ -7677,17 +8199,17 @@
         },
         "node_modules/@types/ms": {
             "integrity": "sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==",
             "resolved": "https://registry.npmjs.org/@types/ms/-/ms-0.7.31.tgz",
             "version": "0.7.31"
         },
         "node_modules/@types/node": {
-            "integrity": "sha512-m+6nTEOadJZuTPkKR/SYK3A2d7FZrgElol9UP1Kae90VVU4a6mxnPuLiIW1m4Cq4gZ/nWb9GrdVXJCoCazDAbg==",
-            "resolved": "https://registry.npmjs.org/@types/node/-/node-18.7.18.tgz",
-            "version": "18.7.18"
+            "integrity": "sha512-93+VvleD3mXwlLI/xASjw0FzKcwzl3OdTCzm1LaRfqgS21gfFtK3zDXM5Op9TeeMsJVOaJ2VRDpT9q4Y3d0AvA==",
+            "resolved": "https://registry.npmjs.org/@types/node/-/node-18.14.6.tgz",
+            "version": "18.14.6"
         },
         "node_modules/@types/normalize-package-data": {
             "integrity": "sha512-Gj7cI7z+98M282Tqmp2K5EIsoouUEzbBJhQQzDE3jSIRk6r9gsz0oUokqIUR4u1R3dMHo0pDHM7sNOHyhulypw==",
             "resolved": "https://registry.npmjs.org/@types/normalize-package-data/-/normalize-package-data-2.4.1.tgz",
             "version": "2.4.1"
         },
         "node_modules/@types/parse-json": {
@@ -7701,27 +8223,35 @@
                 "xmlbuilder": ">=11.0.1"
             },
             "integrity": "sha512-ULqvZNGMv0zRFvqn8/4LSPtnmN4MfhlPNtJCTpKuIIxGVGZ2rYWzFXrvEBoh9CVyqSE7D6YFRJ1hydLHI6kbWw==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
             "version": "3.0.2"
         },
+        "node_modules/@types/responselike": {
+            "dependencies": {
+                "@types/node": "*"
+            },
+            "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
+            "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
+            "version": "1.0.0"
+        },
         "node_modules/@types/verror": {
             "integrity": "sha512-NNm+gdePAX1VGvPcGZCDKQZKYSiAWigKhKaz5KF94hG6f2s8de9Ow5+7AbXoeKxL8gavZfk4UquSAygOF2duEQ==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.6.tgz",
             "version": "1.10.6"
         },
         "node_modules/@types/yargs": {
             "dependencies": {
                 "@types/yargs-parser": "*"
             },
-            "integrity": "sha512-aB4y9UDUXTSMxmM4MH+YnuR0g5Cph3FLQBoWoMB21DSvFVAxRVEHEMx3TLh+zUZYMCQtKiqazz0Q4Rre31f/OA==",
-            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.11.tgz",
-            "version": "17.0.11"
+            "integrity": "sha512-pet5WJ9U8yPVRhkwuEIp5ktAeAqRZOq4UdAyWLWzxbtpyXnzbtLdKiXAjJzi/KLmPGS9wk86lUFWZFN6sISo4g==",
+            "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.22.tgz",
+            "version": "17.0.22"
         },
         "node_modules/@types/yargs-parser": {
             "integrity": "sha512-iO9ZQHkZxHn4mSakYV0vFHAVDyEOIJQrV2uZ06HxEPcx+mt8swXoZHIbaaJ2crJYFfErySgktuTZ3BeLz+XmFA==",
             "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.0.tgz",
             "version": "21.0.0"
         },
         "node_modules/@yarnpkg/lockfile": {
@@ -7917,50 +8447,69 @@
             "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
             "version": "4.0.0"
         },
         "node_modules/app-builder-lib": {
             "dependencies": {
                 "7zip-bin": "~5.1.1",
                 "@develar/schema-utils": "~2.6.5",
-                "@electron/universal": "1.2.1",
+                "@electron/notarize": "^1.2.3",
+                "@electron/osx-sign": "^1.0.4",
+                "@electron/rebuild": "^3.2.10",
+                "@electron/universal": "1.3.4",
                 "@malept/flatpak-bundler": "^0.4.0",
                 "async-exit-hook": "^2.0.1",
                 "bluebird-lst": "^1.0.9",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
                 "chromium-pickle-js": "^0.2.0",
                 "debug": "^4.3.4",
-                "ejs": "^3.1.7",
-                "electron-osx-sign": "^0.6.0",
-                "electron-publish": "23.5.0",
+                "ejs": "^3.1.8",
+                "electron-publish": "24.0.0",
                 "form-data": "^4.0.0",
                 "fs-extra": "^10.1.0",
                 "hosted-git-info": "^4.1.0",
                 "is-ci": "^3.0.0",
-                "isbinaryfile": "^4.0.10",
+                "isbinaryfile": "^5.0.0",
                 "js-yaml": "^4.1.0",
                 "lazy-val": "^1.0.5",
-                "minimatch": "^3.1.2",
-                "read-config-file": "6.2.0",
+                "minimatch": "^5.1.1",
+                "read-config-file": "6.3.2",
                 "sanitize-filename": "^1.6.3",
-                "semver": "^7.3.7",
-                "tar": "^6.1.11",
+                "semver": "^7.3.8",
+                "tar": "^6.1.12",
                 "temp-file": "^3.4.0"
             },
             "engines": {
                 "node": ">=14.0.0"
             },
-            "integrity": "sha512-Pf5HLmrRaeativDNhB+BxUdnSWIsz8H1eABkn/wvZ3WLNzbvIRvLRrsO9e9jTU10oDebxU/8FZ8InalmJxYCuA==",
-            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.5.1.tgz",
-            "version": "23.5.1"
+            "integrity": "sha512-S9wBoyXz2aQ7N3nV/SQS8Cg72NyhsIYGu0xm0w8iW+CWHkIOqQrwVd/cyV1iSYt6QntLGvS54j4SpW9OIkUqPw==",
+            "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-24.0.0.tgz",
+            "version": "24.0.0"
+        },
+        "node_modules/app-builder-lib/node_modules/brace-expansion": {
+            "dependencies": {
+                "balanced-match": "^1.0.0"
+            },
+            "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
+            "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
+            "version": "2.0.1"
         },
         "node_modules/app-builder-lib/node_modules/ci-info": {
-            "integrity": "sha512-t5QdPT5jq3o262DOQ8zA6E1tlH2upmUc4Hlvrbx1pGYJuiiHl7O7rvVNI+l8HTVhd/q3Qc9vqimkNk5yiXsAug==",
-            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.4.0.tgz",
-            "version": "3.4.0"
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": [
+                {
+                    "type": "github",
+                    "url": "https://github.com/sponsors/sibiraj-s"
+                }
+            ],
+            "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+            "version": "3.8.0"
         },
         "node_modules/app-builder-lib/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -7978,14 +8527,39 @@
             "dependencies": {
                 "ci-info": "^3.2.0"
             },
             "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
             "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
             "version": "3.0.1"
         },
+        "node_modules/app-builder-lib/node_modules/minimatch": {
+            "dependencies": {
+                "brace-expansion": "^2.0.1"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
+            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
+            "version": "5.1.6"
+        },
+        "node_modules/app-builder-lib/node_modules/semver": {
+            "bin": {
+                "semver": "bin/semver.js"
+            },
+            "dependencies": {
+                "lru-cache": "^6.0.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-NB1ctGL5rlHrPJtFDVIVzTyQylMLu9N9VICA6HSFJo8MCGVTMW6gfpicwKmmK/dAjTOrqu5l63JJOpDSrAis3A==",
+            "resolved": "https://registry.npmjs.org/semver/-/semver-7.3.8.tgz",
+            "version": "7.3.8"
+        },
         "node_modules/aproba": {
             "integrity": "sha512-lYe4Gx7QT+MKGbDsA+Z+he/Wtef0BiwDOlK/XkBrdfsh9J/jPPXbX0tE9x9cl27Tmu5gg3QUbUrQYa/y+KOHPQ==",
             "resolved": "https://registry.npmjs.org/aproba/-/aproba-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/are-we-there-yet": {
             "dependencies": {
@@ -8034,34 +8608,14 @@
             "version": "1.0.1"
         },
         "node_modules/asap": {
             "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
             "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
             "version": "2.0.6"
         },
-        "node_modules/asar": {
-            "bin": {
-                "asar": "bin/asar.js"
-            },
-            "dependencies": {
-                "chromium-pickle-js": "^0.2.0",
-                "commander": "^5.0.0",
-                "glob": "^7.1.6",
-                "minimatch": "^3.0.4"
-            },
-            "engines": {
-                "node": ">=10.12.0"
-            },
-            "integrity": "sha512-COdw2ZQvKdFGFxXwX3oYh2/sOsJWJegrdJCGxnN4MZ7IULgRBp9P6665aqj9z1v9VwP4oP1hRBojRDQ//IGgAg==",
-            "optionalDependencies": {
-                "@types/glob": "^7.1.1"
-            },
-            "resolved": "https://registry.npmjs.org/asar/-/asar-3.2.0.tgz",
-            "version": "3.2.0"
-        },
         "node_modules/assert-plus": {
             "engines": {
                 "node": ">=0.8"
             },
             "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
             "optional": true,
             "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
@@ -8235,86 +8789,79 @@
                     "url": "https://feross.org/support"
                 }
             ],
             "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
             "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
             "version": "5.7.1"
         },
-        "node_modules/buffer-alloc": {
-            "dependencies": {
-                "buffer-alloc-unsafe": "^1.1.0",
-                "buffer-fill": "^1.0.0"
-            },
-            "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
-            "version": "1.2.0"
-        },
-        "node_modules/buffer-alloc-unsafe": {
-            "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
-            "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
-            "version": "1.1.0"
-        },
         "node_modules/buffer-equal": {
             "engines": {
-                "node": ">=0.4.0"
+                "node": ">=0.4"
             },
-            "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
-            "version": "1.0.0"
-        },
-        "node_modules/buffer-fill": {
-            "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
-            "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
-            "version": "1.0.0"
+            "funding": {
+                "url": "https://github.com/sponsors/ljharb"
+            },
+            "integrity": "sha512-QoV3ptgEaQpvVwbXdSO39iqPQTCxSF7A5U99AxbHYqUdCizL/lH2Z0A2y6nbZucxMEOtNyZfG2s6gsVugGpKkg==",
+            "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.1.tgz",
+            "version": "1.0.1"
         },
         "node_modules/buffer-from": {
             "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
             "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
             "version": "1.1.2"
         },
         "node_modules/builder-util": {
             "dependencies": {
                 "7zip-bin": "~5.1.1",
                 "@types/debug": "^4.1.6",
                 "@types/fs-extra": "^9.0.11",
                 "app-builder-bin": "4.0.0",
                 "bluebird-lst": "^1.0.9",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
+                "builder-util-runtime": "9.2.0",
+                "chalk": "^4.1.2",
                 "cross-spawn": "^7.0.3",
                 "debug": "^4.3.4",
-                "fs-extra": "^10.0.0",
+                "fs-extra": "^10.1.0",
                 "http-proxy-agent": "^5.0.0",
-                "https-proxy-agent": "^5.0.0",
+                "https-proxy-agent": "^5.0.1",
                 "is-ci": "^3.0.0",
                 "js-yaml": "^4.1.0",
                 "source-map-support": "^0.5.19",
                 "stat-mode": "^1.0.0",
                 "temp-file": "^3.4.0"
             },
-            "integrity": "sha512-TYz3sj2NMoG1/524/Je0p0RtEAKKjmTL6z2WQnzU6yM+WU/jHnA2OqX9Q/jys+rKuMy+7MCMdc+G+HrbpKWYSg==",
-            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.5.0.tgz",
-            "version": "23.5.0"
+            "integrity": "sha512-7UzkO1Uanui9Eyo6X4lM2UjEz6qA7sbZ7bPNsxhIi51nZ95o4EsQxIqIZgQlwM3cPSZba5pnu8oBThsAQVAhEg==",
+            "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "node_modules/builder-util-runtime": {
             "dependencies": {
                 "debug": "^4.3.4",
                 "sax": "^1.2.4"
             },
             "engines": {
                 "node": ">=12.0.0"
             },
-            "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
-            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
-            "version": "9.1.1"
+            "integrity": "sha512-6S0FLP5n57MgSVEypgjq5veUMd8C8NKt/IgRRXyYXYnhRG9AxxAB4/uULQhDG4JbAoeb5ahOTPC1jAxT0l2ylQ==",
+            "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.2.0.tgz",
+            "version": "9.2.0"
         },
         "node_modules/builder-util/node_modules/ci-info": {
-            "integrity": "sha512-t5QdPT5jq3o262DOQ8zA6E1tlH2upmUc4Hlvrbx1pGYJuiiHl7O7rvVNI+l8HTVhd/q3Qc9vqimkNk5yiXsAug==",
-            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.4.0.tgz",
-            "version": "3.4.0"
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": [
+                {
+                    "type": "github",
+                    "url": "https://github.com/sponsors/sibiraj-s"
+                }
+            ],
+            "integrity": "sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==",
+            "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.8.0.tgz",
+            "version": "3.8.0"
         },
         "node_modules/builder-util/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -8421,14 +8968,53 @@
             "engines": {
                 "node": ">=10"
             },
             "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
             "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
             "version": "5.1.0"
         },
+        "node_modules/cacheable-lookup": {
+            "engines": {
+                "node": ">=10.6.0"
+            },
+            "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
+            "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
+            "version": "5.0.4"
+        },
+        "node_modules/cacheable-request": {
+            "dependencies": {
+                "clone-response": "^1.0.2",
+                "get-stream": "^5.1.0",
+                "http-cache-semantics": "^4.0.0",
+                "keyv": "^4.0.0",
+                "lowercase-keys": "^2.0.0",
+                "normalize-url": "^6.0.1",
+                "responselike": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
+            "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
+            "version": "7.0.2"
+        },
+        "node_modules/cacheable-request/node_modules/get-stream": {
+            "dependencies": {
+                "pump": "^3.0.0"
+            },
+            "engines": {
+                "node": ">=8"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
+            "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
+            "version": "5.2.0"
+        },
         "node_modules/callsites": {
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
             "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
             "version": "3.1.0"
@@ -8613,14 +9199,25 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-h5PpgXkWitc38BBMYawTYMWJHFZJVnBquFE57xFpjB8pJFiF6gZ+bU+WyI/yqXiFR5mdLsgYNaPe8uao6Uv9Og==",
             "resolved": "https://registry.npmjs.org/is-plain-object/-/is-plain-object-2.0.4.tgz",
             "version": "2.0.4"
         },
+        "node_modules/clone-response": {
+            "dependencies": {
+                "mimic-response": "^1.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
+            "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
+            "version": "1.0.3"
+        },
         "node_modules/cmd-shim": {
             "dependencies": {
                 "mkdirp-infer-owner": "^2.0.0"
             },
             "engines": {
                 "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
             },
@@ -8648,22 +9245,14 @@
             "bin": {
                 "color-support": "bin.js"
             },
             "integrity": "sha512-qiBjkpbMLO/HL68y+lh4q0/O1MZFj2RX6X/KmMa3+gJD3z+WwI1ZzDHysvqHGS3mP6mznPckpXmw1nI9cJjyRg==",
             "resolved": "https://registry.npmjs.org/color-support/-/color-support-1.1.3.tgz",
             "version": "1.1.3"
         },
-        "node_modules/colors": {
-            "engines": {
-                "node": ">=0.1.90"
-            },
-            "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
-            "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
-            "version": "1.0.3"
-        },
         "node_modules/columnify": {
             "dependencies": {
                 "strip-ansi": "^6.0.1",
                 "wcwidth": "^1.0.0"
             },
             "engines": {
                 "node": ">=8.0.0"
@@ -8748,14 +9337,23 @@
                 "ini": "^1.3.4",
                 "proto-list": "~1.2.1"
             },
             "integrity": "sha512-qj+f8APARXHrM0hraqXYb2/bOVSV4PvJQlNZ/DVj0QrmNM2q2euizkeuVckQ57J+W0mRH6Hvi+k50M4Jul2VRQ==",
             "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
             "version": "1.1.13"
         },
+        "node_modules/config-file-ts": {
+            "dependencies": {
+                "glob": "^7.1.6",
+                "typescript": "^4.0.2"
+            },
+            "integrity": "sha512-cKSW0BfrSaAUnxpgvpXPLaaW/umg4bqg4k3GO1JqlRfpx+d5W0GDXznCMkWotJQek5Mmz1MJVChQnz3IVaeMZQ==",
+            "resolved": "https://registry.npmjs.org/config-file-ts/-/config-file-ts-0.2.4.tgz",
+            "version": "0.2.4"
+        },
         "node_modules/console-control-strings": {
             "integrity": "sha512-ty/fTekppD2fIwRvnZAVdeOiGd1c7YXEixbgJTNzqcxJWKQnjJ/V1bNEEE6hygpM3WjwHFUVK6HTjWSzV4a8sQ==",
             "resolved": "https://registry.npmjs.org/console-control-strings/-/console-control-strings-1.1.0.tgz",
             "version": "1.1.0"
         },
         "node_modules/conventional-changelog-angular": {
             "dependencies": {
@@ -8992,14 +9590,39 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-7N/q3lyZ+LVCp7PzuxrJr4KMbBE2hW7BT7YNia330OFxIf4d3r5zVpicP2650l7CPN6RM9zOJRl3NGpqSiw3Eg==",
             "resolved": "https://registry.npmjs.org/map-obj/-/map-obj-1.0.1.tgz",
             "version": "1.0.1"
         },
+        "node_modules/decompress-response": {
+            "dependencies": {
+                "mimic-response": "^3.1.0"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
+            "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
+            "version": "6.0.0"
+        },
+        "node_modules/decompress-response/node_modules/mimic-response": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
+            "version": "3.1.0"
+        },
         "node_modules/dedent": {
             "integrity": "sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==",
             "resolved": "https://registry.npmjs.org/dedent/-/dedent-0.7.0.tgz",
             "version": "0.7.0"
         },
         "node_modules/defaults": {
             "dependencies": {
@@ -9008,14 +9631,22 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-eFuaLoy/Rxalv2kr+lqMlUnrDWV+3j4pljOIJgLIhI058IQfWJ7vXhyEIHu+HtC738klGALYxOKDO0bQP3tg8A==",
             "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.4.tgz",
             "version": "1.0.4"
         },
+        "node_modules/defer-to-connect": {
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
+            "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/define-lazy-prop": {
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
             "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
             "version": "2.0.0"
@@ -9050,85 +9681,66 @@
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==",
             "resolved": "https://registry.npmjs.org/detect-indent/-/detect-indent-6.1.0.tgz",
             "version": "6.1.0"
         },
+        "node_modules/detect-libc": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==",
+            "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/dezalgo": {
             "dependencies": {
                 "asap": "^2.0.0",
                 "wrappy": "1"
             },
             "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
             "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
             "version": "1.0.4"
         },
         "node_modules/dir-compare": {
-            "bin": {
-                "dircompare": "src/cli/dircompare.js"
-            },
-            "dependencies": {
-                "buffer-equal": "1.0.0",
-                "colors": "1.0.3",
-                "commander": "2.9.0",
-                "minimatch": "3.0.4"
-            },
-            "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
-            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
-            "version": "2.4.0"
-        },
-        "node_modules/dir-compare/node_modules/commander": {
             "dependencies": {
-                "graceful-readlink": ">= 1.0.0"
-            },
-            "engines": {
-                "node": ">= 0.6.x"
-            },
-            "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
-            "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
-            "version": "2.9.0"
-        },
-        "node_modules/dir-compare/node_modules/minimatch": {
-            "dependencies": {
-                "brace-expansion": "^1.1.7"
-            },
-            "engines": {
-                "node": "*"
+                "buffer-equal": "^1.0.0",
+                "minimatch": "^3.0.4"
             },
-            "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
-            "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
-            "version": "3.0.4"
+            "integrity": "sha512-J7/et3WlGUCxjdnD3HAAzQ6nsnc0WL6DD7WcwJb7c39iH1+AWfg+9OqzJNaI6PkBwBvm1mhZNL9iY/nRiZXlPg==",
+            "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-3.3.0.tgz",
+            "version": "3.3.0"
         },
         "node_modules/dir-glob": {
             "dependencies": {
                 "path-type": "^4.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
             "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/dmg-builder": {
             "dependencies": {
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "fs-extra": "^10.0.0",
+                "app-builder-lib": "24.0.0",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
+                "fs-extra": "^10.1.0",
                 "iconv-lite": "^0.6.2",
                 "js-yaml": "^4.1.0"
             },
-            "integrity": "sha512-TqIV0rdliw7FZ0DqY88FyPBH+q/Bp+yCPIhdYVraQxYMcaCNu7G3ZizApfEpCvoobtE6MY06/u91I9M7+gGYkw==",
+            "integrity": "sha512-/SWd0gYfn/ddx7mmBeAymOsslyyTNIO0ZFPKMlKcaBELziMqgrc3SX5qEwfPOh2942VgEQZyWzR9FhE+Y9bo6Q==",
             "optionalDependencies": {
                 "dmg-license": "^1.0.11"
             },
-            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "node_modules/dmg-builder/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -9223,39 +9835,52 @@
         },
         "node_modules/electron-builder": {
             "bin": {
                 "electron-builder": "cli.js",
                 "install-app-deps": "install-app-deps.js"
             },
             "dependencies": {
-                "@types/yargs": "^17.0.1",
-                "app-builder-lib": "23.5.1",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "dmg-builder": "23.5.1",
-                "fs-extra": "^10.0.0",
+                "@types/yargs": "^17.0.16",
+                "app-builder-lib": "24.0.0",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
+                "chalk": "^4.1.2",
+                "dmg-builder": "24.0.0",
+                "fs-extra": "^10.1.0",
                 "is-ci": "^3.0.0",
                 "lazy-val": "^1.0.5",
-                "read-config-file": "6.2.0",
-                "simple-update-notifier": "^1.0.7",
-                "yargs": "^17.5.1"
+                "read-config-file": "6.3.2",
+                "simple-update-notifier": "^1.1.0",
+                "yargs": "^17.6.2"
             },
             "engines": {
                 "node": ">=14.0.0"
             },
-            "integrity": "sha512-SWTlf9jqbSa/UFDy1xcaMLIAL39TMd1PPYIgDN8bnfzJntMKEd16qguKsAxfW/kEKcPHLCVh69JyS1GbQ4sROQ==",
-            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.5.1.tgz",
-            "version": "23.5.1"
+            "integrity": "sha512-31GXEEi02c0/lJwfs6cX0tQlyFEQOi9ZCCQ5GFyazdhnTlGGxYvVTTQogAG9LPxUGOzRNZiUvhai5KXmMp3a0g==",
+            "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "node_modules/electron-builder/node_modules/ci-info": {
             "integrity": "sha512-xmDt/QIAdeZ9+nfdPsaBCpMvHNLFiLdjj59qjqn+6iPe6YmHGQ35sBnQ8uslRBXFmXkiZQOJRjvQeoGppoTjjg==",
             "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.3.2.tgz",
             "version": "3.3.2"
         },
+        "node_modules/electron-builder/node_modules/cliui": {
+            "dependencies": {
+                "string-width": "^4.2.0",
+                "strip-ansi": "^6.0.1",
+                "wrap-ansi": "^7.0.0"
+            },
+            "engines": {
+                "node": ">=12"
+            },
+            "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
+            "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
+            "version": "8.0.1"
+        },
         "node_modules/electron-builder/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
             "engines": {
@@ -9274,95 +9899,50 @@
             },
             "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
             "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/electron-builder/node_modules/yargs": {
             "dependencies": {
-                "cliui": "^7.0.2",
+                "cliui": "^8.0.1",
                 "escalade": "^3.1.1",
                 "get-caller-file": "^2.0.5",
                 "require-directory": "^2.1.1",
                 "string-width": "^4.2.3",
                 "y18n": "^5.0.5",
-                "yargs-parser": "^21.0.0"
+                "yargs-parser": "^21.1.1"
             },
             "engines": {
                 "node": ">=12"
             },
-            "integrity": "sha512-t6YAJcxDkNX7NFYiVtKvWUz8l+PaKTLiL63mJYWR2GnHq2gjEWISzsLp9wg3aY36dY1j+gfIEL3pIF+XlJJfbA==",
-            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.5.1.tgz",
-            "version": "17.5.1"
+            "integrity": "sha512-cwiTb08Xuv5fqF4AovYacTFNxk62th7LKJ6BL9IGUpTJrWoU7/7WdQGTP2SjKf1dUNBGzDd28p/Yfs/GI6JrLw==",
+            "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.1.tgz",
+            "version": "17.7.1"
         },
         "node_modules/electron-builder/node_modules/yargs-parser": {
             "engines": {
                 "node": ">=12"
             },
             "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
             "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
             "version": "21.1.1"
         },
-        "node_modules/electron-osx-sign": {
-            "bin": {
-                "electron-osx-flat": "bin/electron-osx-flat.js",
-                "electron-osx-sign": "bin/electron-osx-sign.js"
-            },
-            "dependencies": {
-                "bluebird": "^3.5.0",
-                "compare-version": "^0.1.2",
-                "debug": "^2.6.8",
-                "isbinaryfile": "^3.0.2",
-                "minimist": "^1.2.0",
-                "plist": "^3.0.1"
-            },
-            "deprecated": "Please use @electron/osx-sign moving forward. Be aware the API is slightly different",
-            "engines": {
-                "node": ">=4.0.0"
-            },
-            "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
-            "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
-            "version": "0.6.0"
-        },
-        "node_modules/electron-osx-sign/node_modules/debug": {
-            "dependencies": {
-                "ms": "2.0.0"
-            },
-            "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
-            "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
-            "version": "2.6.9"
-        },
-        "node_modules/electron-osx-sign/node_modules/isbinaryfile": {
-            "dependencies": {
-                "buffer-alloc": "^1.2.0"
-            },
-            "engines": {
-                "node": ">=0.6.0"
-            },
-            "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
-            "version": "3.0.3"
-        },
-        "node_modules/electron-osx-sign/node_modules/ms": {
-            "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
-            "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
-            "version": "2.0.0"
-        },
         "node_modules/electron-publish": {
             "dependencies": {
                 "@types/fs-extra": "^9.0.11",
-                "builder-util": "23.5.0",
-                "builder-util-runtime": "9.1.1",
-                "chalk": "^4.1.1",
-                "fs-extra": "^10.0.0",
+                "builder-util": "24.0.0",
+                "builder-util-runtime": "9.2.0",
+                "chalk": "^4.1.2",
+                "fs-extra": "^10.1.0",
                 "lazy-val": "^1.0.5",
                 "mime": "^2.5.2"
             },
-            "integrity": "sha512-dY/bAN5tIjEPX1AV5FK9TXKKoGGalGb53SgGbhiII3o+WLzK+4vew6rrmChBTwELP/q8r4a89X+slTDG/iPdww==",
-            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.5.0.tgz",
-            "version": "23.5.0"
+            "integrity": "sha512-XY99MVdMXfseO3oBPQ5jdT68DFcUd4eudonbVvqrCBj9qur0w/L80M/fBMmXulokTiwI4L8tIJzcswKE6W0ibA==",
+            "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-24.0.0.tgz",
+            "version": "24.0.0"
         },
         "node_modules/electron-publish/node_modules/fs-extra": {
             "dependencies": {
                 "graceful-fs": "^4.2.0",
                 "jsonfile": "^6.0.1",
                 "universalify": "^2.0.0"
             },
@@ -9968,24 +10548,43 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
             "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
             "version": "11.1.0"
         },
+        "node_modules/got": {
+            "dependencies": {
+                "@sindresorhus/is": "^4.0.0",
+                "@szmarczak/http-timer": "^4.0.5",
+                "@types/cacheable-request": "^6.0.1",
+                "@types/responselike": "^1.0.0",
+                "cacheable-lookup": "^5.0.3",
+                "cacheable-request": "^7.0.2",
+                "decompress-response": "^6.0.0",
+                "http2-wrapper": "^1.0.0-beta.5.2",
+                "lowercase-keys": "^2.0.0",
+                "p-cancelable": "^2.0.0",
+                "responselike": "^2.0.0"
+            },
+            "engines": {
+                "node": ">=10.19.0"
+            },
+            "funding": {
+                "url": "https://github.com/sindresorhus/got?sponsor=1"
+            },
+            "integrity": "sha512-6tfZ91bOr7bOXnK7PRDCGBLa1H4U080YHNaAQ2KsMGlLEzRbk44nsZF2E1IeRc3vtJHPVbKCYgdFbaGO2ljd8g==",
+            "resolved": "https://registry.npmjs.org/got/-/got-11.8.6.tgz",
+            "version": "11.8.6"
+        },
         "node_modules/graceful-fs": {
             "integrity": "sha512-NtNxqUcXgpW2iMrfqSfR73Glt39K+BLwWsPs94yR63v45T0Wbej7eRmL5cWfwEgqXnmjQp3zaJTshdRW/qC2ZQ==",
             "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.9.tgz",
             "version": "4.2.9"
         },
-        "node_modules/graceful-readlink": {
-            "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
-            "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
-            "version": "1.0.1"
-        },
         "node_modules/handlebars": {
             "bin": {
                 "handlebars": "bin/handlebars"
             },
             "dependencies": {
                 "minimist": "^1.2.5",
                 "neo-async": "^2.6.0",
@@ -10042,42 +10641,65 @@
                 "node": ">=10"
             },
             "integrity": "sha512-kyCuEOWjJqZuDbRHzL8V93NzQhwIB71oFWSyzVo+KPZI+pnQPPxucdkrOZvkLRnrf5URsQM+IJ09Dw29cRALIA==",
             "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
             "version": "4.1.0"
         },
         "node_modules/http-cache-semantics": {
-            "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
-            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
-            "version": "4.1.0"
+            "integrity": "sha512-er295DKPVsV82j5kw1Gjt+ADA/XYHsajl82cGNQG2eyoPkvgUhX+nDIyelzhIWbbsXP39EHcI6l5tYs2FYqYXQ==",
+            "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.1.tgz",
+            "version": "4.1.1"
         },
         "node_modules/http-proxy-agent": {
             "dependencies": {
                 "@tootallnate/once": "2",
                 "agent-base": "6",
                 "debug": "4"
             },
             "engines": {
                 "node": ">= 6"
             },
             "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
             "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "node_modules/http2-wrapper": {
+            "dependencies": {
+                "quick-lru": "^5.1.1",
+                "resolve-alpn": "^1.0.0"
+            },
+            "engines": {
+                "node": ">=10.19.0"
+            },
+            "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
+            "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
+            "version": "1.0.3"
+        },
+        "node_modules/http2-wrapper/node_modules/quick-lru": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
+            "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
+            "version": "5.1.1"
+        },
         "node_modules/https-proxy-agent": {
             "dependencies": {
                 "agent-base": "6",
                 "debug": "4"
             },
             "engines": {
                 "node": ">= 6"
             },
-            "integrity": "sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==",
-            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz",
-            "version": "5.0.0"
+            "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
+            "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
+            "version": "5.0.1"
         },
         "node_modules/human-signals": {
             "engines": {
                 "node": ">=10.17.0"
             },
             "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
             "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
@@ -10523,22 +11145,22 @@
         "node_modules/isarray": {
             "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
             "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
             "version": "1.0.0"
         },
         "node_modules/isbinaryfile": {
             "engines": {
-                "node": ">= 8.0.0"
+                "node": ">= 14.0.0"
             },
             "funding": {
                 "url": "https://github.com/sponsors/gjtorikian/"
             },
-            "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
-            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
-            "version": "4.0.10"
+            "integrity": "sha512-UDdnyGvMajJUWCkib7Cei/dvyJrrvo4FIrsvSFWdPpXSUorzXrDJ0S+X5Q4ZlasfPjca4yqCNNsjbCeiy8FFeg==",
+            "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-5.0.0.tgz",
+            "version": "5.0.0"
         },
         "node_modules/isexe": {
             "integrity": "sha1-6PvzdNxVb/iUehDcsFctYz8s+hA=",
             "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
             "version": "2.0.0"
         },
         "node_modules/isobject": {
@@ -10578,14 +11200,19 @@
             "dependencies": {
                 "argparse": "^2.0.1"
             },
             "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
             "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "node_modules/json-buffer": {
+            "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
+            "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
+            "version": "3.0.1"
+        },
         "node_modules/json-parse-better-errors": {
             "integrity": "sha512-mrqyZKfX5EhL7hvqcV6WG1yYjnjeuYDzDhhcAAUrq8Po85NBQBJP+ZDUT75qZQ98IkUoBqdkExkukOU7Ts2wrw==",
             "resolved": "https://registry.npmjs.org/json-parse-better-errors/-/json-parse-better-errors-1.0.2.tgz",
             "version": "1.0.2"
         },
         "node_modules/json-parse-even-better-errors": {
             "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
@@ -10613,17 +11240,17 @@
         "node_modules/json5": {
             "bin": {
                 "json5": "lib/cli.js"
             },
             "engines": {
                 "node": ">=6"
             },
-            "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
-            "version": "2.2.1"
+            "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+            "version": "2.2.3"
         },
         "node_modules/jsonc-parser": {
             "integrity": "sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==",
             "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz",
             "version": "3.2.0"
         },
         "node_modules/jsonfile": {
@@ -10651,14 +11278,22 @@
             "version": "5.1.1"
         },
         "node_modules/just-diff-apply": {
             "integrity": "sha512-AAV5Jw7tsniWwih8Ly3fXxEZ06y+6p5TwQMsw0dzZ/wPKilzyDgdAnL0Ug4NNIquPUOh1vfFWEHbmXUqM5+o8g==",
             "resolved": "https://registry.npmjs.org/just-diff-apply/-/just-diff-apply-5.4.1.tgz",
             "version": "5.4.1"
         },
+        "node_modules/keyv": {
+            "dependencies": {
+                "json-buffer": "3.0.1"
+            },
+            "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
+            "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
+            "version": "4.5.2"
+        },
         "node_modules/kind-of": {
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==",
             "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-6.0.3.tgz",
             "version": "6.0.3"
@@ -10872,25 +11507,50 @@
             "funding": {
                 "url": "https://github.com/sponsors/sindresorhus"
             },
             "integrity": "sha512-8XPvpAA8uyhfteu8pIvQxpJZ7SYYdpUivZpGy6sFsBuKRY/7rQGavedeB8aK+Zkyq6upMFVL/9AW6vOYzfRyLg==",
             "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
             "version": "4.1.0"
         },
+        "node_modules/lowercase-keys": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
+            "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
+            "version": "2.0.0"
+        },
         "node_modules/lru-cache": {
             "dependencies": {
                 "yallist": "^4.0.0"
             },
             "engines": {
                 "node": ">=10"
             },
             "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
             "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
             "version": "6.0.0"
         },
+        "node_modules/lzma-native": {
+            "bin": {
+                "lzmajs": "bin/lzmajs"
+            },
+            "dependencies": {
+                "node-addon-api": "^3.1.0",
+                "node-gyp-build": "^4.2.1",
+                "readable-stream": "^3.6.0"
+            },
+            "engines": {
+                "node": ">=10.0.0"
+            },
+            "hasInstallScript": true,
+            "integrity": "sha512-09xfg67mkL2Lz20PrrDeNYZxzeW7ADtpYFbwSQh9U8+76RIzx5QsJBMy8qikv3hbUPfpy6hqwxt6FcGK81g9AA==",
+            "resolved": "https://registry.npmjs.org/lzma-native/-/lzma-native-8.0.6.tgz",
+            "version": "8.0.6"
+        },
         "node_modules/make-dir": {
             "dependencies": {
                 "semver": "^6.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
@@ -11118,14 +11778,22 @@
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
             "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
             "version": "2.1.0"
         },
+        "node_modules/mimic-response": {
+            "engines": {
+                "node": ">=4"
+            },
+            "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
+            "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
+            "version": "1.0.1"
+        },
         "node_modules/min-indent": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==",
             "resolved": "https://registry.npmjs.org/min-indent/-/min-indent-1.0.1.tgz",
             "version": "1.0.1"
@@ -11328,19 +11996,38 @@
             "version": "0.6.3"
         },
         "node_modules/neo-async": {
             "integrity": "sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==",
             "resolved": "https://registry.npmjs.org/neo-async/-/neo-async-2.6.2.tgz",
             "version": "2.6.2"
         },
+        "node_modules/node-abi": {
+            "dependencies": {
+                "semver": "^7.3.5"
+            },
+            "engines": {
+                "node": ">=10"
+            },
+            "integrity": "sha512-7GGVawqyHF4pfd0YFybhv/eM9JwTtPqx0mAanQ146O3FlSh3pA24zf9IRQTOsfTSqXTNzPSP5iagAJ94jjuVog==",
+            "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.33.0.tgz",
+            "version": "3.33.0"
+        },
         "node_modules/node-addon-api": {
             "integrity": "sha512-mmcei9JghVNDYydghQmeDX8KoAm0FAiYyIcUt/N4nhyAipB17pllZQDOJD2fotxABnt4Mdz+dKTO7eftLg4d0A==",
             "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-3.2.1.tgz",
             "version": "3.2.1"
         },
+        "node_modules/node-api-version": {
+            "dependencies": {
+                "semver": "^7.3.5"
+            },
+            "integrity": "sha512-KGXihXdUChwJAOHO53bv9/vXcLmdUsZ6jIptbvYvkpKfth+r7jw44JkVxQFA3kX5nQjzjmGu1uAu/xNNLNlI5g==",
+            "resolved": "https://registry.npmjs.org/node-api-version/-/node-api-version-0.1.4.tgz",
+            "version": "0.1.4"
+        },
         "node_modules/node-fetch": {
             "dependencies": {
                 "whatwg-url": "^5.0.0"
             },
             "engines": {
                 "node": "4.x || >=6.0.0"
             },
@@ -11435,14 +12122,25 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
             "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
             "version": "3.0.0"
         },
+        "node_modules/normalize-url": {
+            "engines": {
+                "node": ">=10"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
+            "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
+            "version": "6.1.0"
+        },
         "node_modules/npm-bundled": {
             "dependencies": {
                 "npm-normalize-package-bin": "^1.0.1"
             },
             "integrity": "sha512-x5DHup0SuyQcmL3s7Rx/YQ8sbw/Hzg0rj48eN0dV7hf5cmQq5PXIeioroH3raV1QC1yh3uTYuMThvEQF3iKgGQ==",
             "resolved": "https://registry.npmjs.org/npm-bundled/-/npm-bundled-1.1.2.tgz",
             "version": "1.1.2"
@@ -11966,14 +12664,22 @@
             "engines": {
                 "node": ">=0.10.0"
             },
             "integrity": "sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==",
             "resolved": "https://registry.npmjs.org/os-tmpdir/-/os-tmpdir-1.0.2.tgz",
             "version": "1.0.2"
         },
+        "node_modules/p-cancelable": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
+            "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
+            "version": "2.1.1"
+        },
         "node_modules/p-finally": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-LICb2p9CB7FS+0eR1oqWnHhp0FljGLZCWBE9aix0Uye9W8LTQPwMTYVGWQWIw9RdQiDg4+epXQODwIYJtSJaow==",
             "resolved": "https://registry.npmjs.org/p-finally/-/p-finally-1.0.0.tgz",
             "version": "1.0.0"
@@ -12363,21 +13069,30 @@
             "version": "2.0.1"
         },
         "node_modules/proxy-from-env": {
             "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
             "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
             "version": "1.1.0"
         },
+        "node_modules/pump": {
+            "dependencies": {
+                "end-of-stream": "^1.1.0",
+                "once": "^1.3.1"
+            },
+            "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
+            "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
+            "version": "3.0.0"
+        },
         "node_modules/punycode": {
             "engines": {
                 "node": ">=6"
             },
-            "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
-            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
-            "version": "2.1.1"
+            "integrity": "sha512-rRV+zQD8tVFys26lAGR9WUuS4iUAngJScM+ZRSKtvl5tKeZ2t5bvdNFdNHBW9FWR4guGHlgmsZ1G7BSm2wTbuA==",
+            "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.0.tgz",
+            "version": "2.3.0"
         },
         "node_modules/q": {
             "engines": {
                 "node": ">=0.6.0",
                 "teleport": ">=0.2.0"
             },
             "integrity": "sha512-kV/CThkXo6xyFEZUugw/+pIOywXcDbFYgSct5cT3gqlbkBE1SJdwy6UQoZvodiWF/ckQLZyDE/Bu1M6gVu5lVw==",
@@ -12428,26 +13143,27 @@
             },
             "integrity": "sha512-kEmDUoYf/CDy8yZbLTmhB1X9kkjf9Q80PCNsDMb7ufrGd6zZSQA1+UyjrO+pZm5K/S4OXCWJeiIt1JA8kAsa6g==",
             "resolved": "https://registry.npmjs.org/read-cmd-shim/-/read-cmd-shim-3.0.1.tgz",
             "version": "3.0.1"
         },
         "node_modules/read-config-file": {
             "dependencies": {
+                "config-file-ts": "^0.2.4",
                 "dotenv": "^9.0.2",
                 "dotenv-expand": "^5.1.0",
                 "js-yaml": "^4.1.0",
                 "json5": "^2.2.0",
                 "lazy-val": "^1.0.4"
             },
             "engines": {
                 "node": ">=12.0.0"
             },
-            "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
-            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
-            "version": "6.2.0"
+            "integrity": "sha512-M80lpCjnE6Wt6zb98DoW8WHR09nzMSpu8XHtPkiTHrJ5Az9CybfeQhTJ8D7saeBHpGhLPIVyA8lcL6ZmdKwY6Q==",
+            "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.3.2.tgz",
+            "version": "6.3.2"
         },
         "node_modules/read-package-json": {
             "dependencies": {
                 "glob": "^8.0.1",
                 "json-parse-even-better-errors": "^2.3.1",
                 "normalize-package-data": "^4.0.0",
                 "npm-normalize-package-bin": "^2.0.0"
@@ -12780,14 +13496,19 @@
             "funding": {
                 "url": "https://github.com/sponsors/ljharb"
             },
             "integrity": "sha512-nBpuuYuY5jFsli/JIs1oldw6fOQCBioohqWZg/2hiaOybXOft4lonv85uDOKXdf8rhyK159cxU5cDcK/NKk8zw==",
             "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
             "version": "1.22.1"
         },
+        "node_modules/resolve-alpn": {
+            "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
+            "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
+            "version": "1.2.1"
+        },
         "node_modules/resolve-cwd": {
             "dependencies": {
                 "resolve-from": "^5.0.0"
             },
             "engines": {
                 "node": ">=8"
             },
@@ -12799,14 +13520,25 @@
             "engines": {
                 "node": ">=8"
             },
             "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
             "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
             "version": "5.0.0"
         },
+        "node_modules/responselike": {
+            "dependencies": {
+                "lowercase-keys": "^2.0.0"
+            },
+            "funding": {
+                "url": "https://github.com/sponsors/sindresorhus"
+            },
+            "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
+            "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
+            "version": "2.0.1"
+        },
         "node_modules/restore-cursor": {
             "dependencies": {
                 "onetime": "^5.1.0",
                 "signal-exit": "^3.0.2"
             },
             "engines": {
                 "node": ">=8"
@@ -12978,17 +13710,17 @@
         "node_modules/simple-update-notifier": {
             "dependencies": {
                 "semver": "~7.0.0"
             },
             "engines": {
                 "node": ">=8.10.0"
             },
-            "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
-            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
-            "version": "1.0.7"
+            "integrity": "sha512-VpsrsJSUcJEseSbMHkrsrAVSdvVS5I96Qo1QAQ4FxQ9wXFcB+pjj7FB7/us9+GcgfW4ziHtYMc1J0PLczb55mg==",
+            "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.1.0.tgz",
+            "version": "1.1.0"
         },
         "node_modules/simple-update-notifier/node_modules/semver": {
             "bin": {
                 "semver": "bin/semver.js"
             },
             "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
             "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
@@ -13258,25 +13990,25 @@
             "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
             "version": "1.0.0"
         },
         "node_modules/tar": {
             "dependencies": {
                 "chownr": "^2.0.0",
                 "fs-minipass": "^2.0.0",
-                "minipass": "^3.0.0",
+                "minipass": "^4.0.0",
                 "minizlib": "^2.1.1",
                 "mkdirp": "^1.0.3",
                 "yallist": "^4.0.0"
             },
             "engines": {
-                "node": ">= 10"
+                "node": ">=10"
             },
-            "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
-            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
-            "version": "6.1.11"
+            "integrity": "sha512-jdIBIN6LTIe2jqzay/2vtYLlBHa3JF42ot3h1dW8Q0PaAG4v8rm0cvpVePtau5C6OKXGGcgO9q2AMNSWxiLqKw==",
+            "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.13.tgz",
+            "version": "6.1.13"
         },
         "node_modules/tar-stream": {
             "dependencies": {
                 "bl": "^4.0.3",
                 "end-of-stream": "^1.4.1",
                 "fs-constants": "^1.0.0",
                 "inherits": "^2.0.3",
@@ -13285,14 +14017,22 @@
             "engines": {
                 "node": ">=6"
             },
             "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
             "resolved": "https://registry.npmjs.org/tar-stream/-/tar-stream-2.2.0.tgz",
             "version": "2.2.0"
         },
+        "node_modules/tar/node_modules/minipass": {
+            "engines": {
+                "node": ">=8"
+            },
+            "integrity": "sha512-lwycX3cBMTvcejsHITUgYj6Gy6A7Nh4Q6h9NP4sTHY1ccJlC7yKzDmiShEHsJ16Jf1nKGDEaiHxiltsJEvk0nQ==",
+            "resolved": "https://registry.npmjs.org/minipass/-/minipass-4.2.4.tgz",
+            "version": "4.2.4"
+        },
         "node_modules/temp-dir": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-xZFXEGbG7SNC3itwBzI3RYjq/cEhBkx2hJuKGIUOcEULmkQExXiHat2z/qkISYsuR+IKumhEfKKbV5qXmhICFQ==",
             "resolved": "https://registry.npmjs.org/temp-dir/-/temp-dir-1.0.0.tgz",
             "version": "1.0.0"
@@ -13424,17 +14164,17 @@
         "node_modules/tsconfig-paths/node_modules/json5": {
             "bin": {
                 "json5": "lib/cli.js"
             },
             "dependencies": {
                 "minimist": "^1.2.0"
             },
-            "integrity": "sha512-aKS4WQjPenRxiQsC93MNfjx+nbF4PAdYzmd/1JIj8HYzqfbu86beTuNgXDzPknWk0n0uARlyewZo4s++ES36Ow==",
-            "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.1.tgz",
-            "version": "1.0.1"
+            "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
+            "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
+            "version": "1.0.2"
         },
         "node_modules/tsconfig-paths/node_modules/strip-bom": {
             "engines": {
                 "node": ">=4"
             },
             "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
             "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
```

### Comparing `chia-blockchain-2.0.0b1/chia/clvm/spend_sim.py` & `chia-blockchain-2.0.0b3/chia/clvm/spend_sim.py`

 * *Files 1% similar despite different names*

```diff
@@ -408,27 +408,22 @@
             filter(lambda br: br.header_hash == header_hash, self.service.block_records)
         )[0]
         block_height: uint32 = selected_block.height
         additions: List[CoinRecord] = await self.service.coin_store.get_coins_added_at_height(block_height)
         removals: List[CoinRecord] = await self.service.coin_store.get_coins_removed_at_height(block_height)
         return additions, removals
 
-    async def get_puzzle_and_solution(self, coin_id: bytes32, height: uint32) -> Optional[CoinSpend]:
+    async def get_puzzle_and_solution(self, coin_id: bytes32, height: uint32) -> CoinSpend:
         filtered_generators = list(filter(lambda block: block.height == height, self.service.blocks))
         # real consideration should be made for the None cases instead of just hint ignoring
         generator: BlockGenerator = filtered_generators[0].transactions_generator  # type: ignore[assignment]
         coin_record = await self.service.coin_store.get_coin_record(coin_id)
         assert coin_record is not None
-        error, puzzle, solution = get_puzzle_and_solution_for_coin(generator, coin_record.coin)
-        if error:
-            return None
-        else:
-            assert puzzle is not None
-            assert solution is not None
-            return CoinSpend(coin_record.coin, puzzle, solution)
+        spend_info = get_puzzle_and_solution_for_coin(generator, coin_record.coin)
+        return CoinSpend(coin_record.coin, spend_info.puzzle, spend_info.solution)
 
     async def get_all_mempool_tx_ids(self) -> List[bytes32]:
         return self.service.mempool_manager.mempool.all_item_ids()
 
     async def get_all_mempool_items(self) -> Dict[bytes32, MempoolItem]:
         spends = {}
         for item in self.service.mempool_manager.mempool.all_items():
```

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/beta.py` & `chia-blockchain-2.0.0b3/chia/cmds/beta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/beta_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/beta_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/check_wallet_db.py` & `chia-blockchain-2.0.0b3/chia/cmds/check_wallet_db.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/chia.py` & `chia-blockchain-2.0.0b3/chia/cmds/chia.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/cmds_util.py` & `chia-blockchain-2.0.0b3/chia/cmds/cmds_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/coin_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/coin_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/coins.py` & `chia-blockchain-2.0.0b3/chia/cmds/coins.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/completion.py` & `chia-blockchain-2.0.0b3/chia/cmds/completion.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/configure.py` & `chia-blockchain-2.0.0b3/chia/cmds/configure.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/data.py` & `chia-blockchain-2.0.0b3/chia/cmds/data.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/data_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/data_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/db.py` & `chia-blockchain-2.0.0b3/chia/cmds/db.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/db_backup_func.py` & `chia-blockchain-2.0.0b3/chia/cmds/db_backup_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/db_upgrade_func.py` & `chia-blockchain-2.0.0b3/chia/cmds/db_upgrade_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/db_validate_func.py` & `chia-blockchain-2.0.0b3/chia/cmds/db_validate_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/farm.py` & `chia-blockchain-2.0.0b3/chia/cmds/farm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/farm_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/farm_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/init.py` & `chia-blockchain-2.0.0b3/chia/cmds/init.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/init_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/init_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/keys.py` & `chia-blockchain-2.0.0b3/chia/cmds/keys.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/keys_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/keys_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/netspace.py` & `chia-blockchain-2.0.0b3/chia/cmds/netspace.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/netspace_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/netspace_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/passphrase.py` & `chia-blockchain-2.0.0b3/chia/cmds/passphrase.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/passphrase_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/passphrase_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/peer.py` & `chia-blockchain-2.0.0b3/chia/cmds/peer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/peer_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/peer_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/plotnft.py` & `chia-blockchain-2.0.0b3/chia/cmds/plotnft.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/plotnft_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/plotnft_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/plots.py` & `chia-blockchain-2.0.0b3/chia/cmds/plots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/rpc.py` & `chia-blockchain-2.0.0b3/chia/cmds/rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/show.py` & `chia-blockchain-2.0.0b3/chia/cmds/show.py`

 * *Files 8% similar despite different names*

```diff
@@ -48,19 +48,19 @@
     remove_connection: str,
     block_header_hash_by_height: Optional[int],
     block_by_header_hash: str,
 ) -> None:
     import asyncio
 
     if connections:
-        print("'chia show -c' has been renamed to 'chia peer -c' ")
+        print("'chia show -c' has been renamed to 'chia peer full_node -c' ")
     if add_connection != "":
-        print("'chia show -a' has been renamed to 'chia peer -a' ")
+        print("'chia show -a' has been renamed to 'chia peer full_node -a' ")
     if remove_connection != "":
-        print("'chia show -r' has been renamed to 'chia peer -r' ")
+        print("'chia show -r' has been renamed to 'chia peer full_node -r' ")
     if wallet_rpc_port is not None:
         print("'chia show -wp' is not used, please remove it from your command.")
     asyncio.run(
         show_async(
             rpc_port,
             ctx.obj["root_path"],
             fee,
```

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/show_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/show_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/sim.py` & `chia-blockchain-2.0.0b3/chia/cmds/sim.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/sim_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/sim_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/start.py` & `chia-blockchain-2.0.0b3/chia/cmds/start.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/start_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/start_funcs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/stop.py` & `chia-blockchain-2.0.0b3/chia/cmds/stop.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/wallet.py` & `chia-blockchain-2.0.0b3/chia/cmds/wallet.py`

 * *Files 8% similar despite different names*

```diff
@@ -92,33 +92,41 @@
 )
 @click.option(
     "--reverse",
     is_flag=True,
     default=False,
     help="Reverse the transaction ordering",
 )
+@click.option(
+    "--clawback",
+    is_flag=True,
+    default=False,
+    help="Only show clawback transactions",
+)
 def get_transactions_cmd(
     wallet_rpc_port: Optional[int],
     fingerprint: int,
     id: int,
     offset: int,
     limit: int,
     verbose: bool,
     paginate: Optional[bool],
     sort_key: SortKey,
     reverse: bool,
-) -> None:
+    clawback: bool,
+) -> None:  # pragma: no cover
     extra_params = {
         "id": id,
         "verbose": verbose,
         "offset": offset,
         "paginate": paginate,
         "limit": limit,
         "sort_key": sort_key,
         "reverse": reverse,
+        "clawback": clawback,
     }
 
     import asyncio
 
     from .wallet_funcs import get_transactions
 
     asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, get_transactions))
@@ -181,39 +189,48 @@
 )
 @click.option(
     "--reuse",
     help="Reuse existing address for the change.",
     is_flag=True,
     default=False,
 )
+@click.option(
+    "--clawback_time",
+    help="The seconds that the recipient needs to wait to claim the fund."
+    " A positive number will enable the Clawback features.",
+    type=int,
+    default=0,
+)
 def send_cmd(
     wallet_rpc_port: Optional[int],
     fingerprint: int,
     id: int,
     amount: str,
     memo: Optional[str],
     fee: str,
     address: str,
     override: bool,
     min_coin_amount: str,
     max_coin_amount: str,
     coins_to_exclude: Tuple[str],
     reuse: bool,
-) -> None:
+    clawback_time: int,
+) -> None:  # pragma: no cover
     extra_params = {
         "id": id,
         "amount": amount,
         "memo": memo,
         "fee": fee,
         "address": address,
         "override": override,
         "min_coin_amount": min_coin_amount,
         "max_coin_amount": max_coin_amount,
-        "exclude_coin_ids": list(coins_to_exclude),
+        "excluded_coin_ids": list(coins_to_exclude),
         "reuse_puzhash": True if reuse else None,
+        "clawback_time": clawback_time,
     }
     import asyncio
 
     from .wallet_funcs import send
 
     asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, send))
 
@@ -270,14 +287,48 @@
     import asyncio
 
     from .wallet_funcs import get_address
 
     asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, get_address))
 
 
+@wallet_cmd.command(
+    "clawback",
+    help="Claim or revert a Clawback transaction."
+    " The wallet will automatically detect if you are able to revert or claim.",
+)
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-i", "--id", help="Id of the wallet to use", type=int, default=1, show_default=True, required=True)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option(
+    "-ids",
+    "--tx_ids",
+    help="IDs of the Clawback transactions you want to revert or claim. Separate multiple IDs by comma (,).",
+    type=str,
+    default="",
+    required=True,
+)
+@click.option(
+    "-m", "--fee", help="A fee to add to the offer when it gets taken, in XCH", default="0", show_default=True
+)
+def clawback(wallet_rpc_port: Optional[int], id, fingerprint: int, tx_ids: str, fee: str) -> None:  # pragma: no cover
+    extra_params = {"id": id, "tx_ids": tx_ids, "fee": fee}
+    import asyncio
+
+    from .wallet_funcs import spend_clawback
+
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, spend_clawback))
+
+
 @wallet_cmd.command("delete_unconfirmed_transactions", help="Deletes all unconfirmed transactions for this wallet ID")
 @click.option(
     "-wp",
     "--wallet-rpc-port",
     help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
     type=int,
     default=None,
@@ -1248,15 +1299,15 @@
     help="The amount to send to get the notification past the recipient's spam filter",
     type=str,
     default="0.00001",
     required=True,
     show_default=True,
 )
 @click.option("-n", "--message", help="The message of the notification", type=str)
-@click.option("-m", "--fee", help="The fee for the transaction", type=str)
+@click.option("-m", "--fee", help="The fee for the transaction, in XCH", type=str)
 def _send_notification(
     wallet_rpc_port: Optional[int],
     fingerprint: int,
     to_address: str,
     amount: str,
     message: str,
     fee: str,
@@ -1333,7 +1384,239 @@
     from .wallet_funcs import delete_notifications
 
     extra_params = {
         "ids": id,
         "all": all,
     }
     asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, delete_notifications))
+
+
+@wallet_cmd.group("vcs", short_help="Verifiable Credential related actions")
+def vcs_cmd():  # pragma: no cover
+    pass
+
+
+@vcs_cmd.command("mint", short_help="Mint a VC")
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option("-d", "--did", help="The DID of the VC's proof provider", type=str, required=True)
+@click.option("-t", "--target-address", help="The address to send the VC to once it's minted", type=str, required=False)
+@click.option("-m", "--fee", help="Blockchain fee for mint transaction, in XCH", type=str, required=False)
+def _mint_vc(
+    wallet_rpc_port: Optional[int],
+    fingerprint: int,
+    did: str,
+    target_address: Optional[str],
+    fee: Optional[str],
+) -> None:  # pragma: no cover
+    import asyncio
+
+    from chia.cmds.cmds_util import execute_with_wallet
+
+    from .wallet_funcs import mint_vc
+
+    extra_params = {
+        "did": did,
+        "target_address": target_address,
+        "fee": fee,
+    }
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, mint_vc))
+
+
+@vcs_cmd.command("get", short_help="Get a list of existing VCs")
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option(
+    "-s", "--start", help="The index to start the list at", type=int, required=False, default=0, show_default=True
+)
+@click.option(
+    "-c", "--count", help="How many results to return", type=int, required=False, default=50, show_default=True
+)
+def _get_vcs(
+    wallet_rpc_port: Optional[int],
+    fingerprint: int,
+    start: int,
+    count: int,
+) -> None:  # pragma: no cover
+    import asyncio
+
+    from chia.cmds.cmds_util import execute_with_wallet
+
+    from .wallet_funcs import get_vcs
+
+    extra_params = {
+        "start": start,
+        "count": count,
+    }
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, get_vcs))
+
+
+@vcs_cmd.command("update_proofs", short_help="Update a VC's proofs if you have the provider DID")
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option("-l", "--vc-id", help="The launcher ID of the VC whose proofs should be updated", type=str, required=True)
+@click.option(
+    "-t",
+    "--new-puzhash",
+    help="The address to send the VC after the proofs have been updated",
+    type=str,
+    required=False,
+)
+@click.option("-p", "--new-proof-hash", help="The new proof hash to update the VC to", type=str, required=True)
+@click.option("-m", "--fee", help="Blockchain fee for update transaction, in XCH", type=str, required=False)
+@click.option(
+    "--reuse-puzhash/--generate-new-puzhash",
+    help="Send the VC back to the same puzzle hash it came from (ignored if --new-puzhash is specified)",
+    default=False,
+    show_default=True,
+)
+def _spend_vc(
+    wallet_rpc_port: Optional[int],
+    fingerprint: int,
+    vc_id: str,
+    new_puzhash: Optional[str],
+    new_proof_hash: str,
+    fee: str,
+    reuse_puzhash: bool,
+) -> None:  # pragma: no cover
+    import asyncio
+
+    from chia.cmds.cmds_util import execute_with_wallet
+
+    from .wallet_funcs import spend_vc
+
+    extra_params = {
+        "vc_id": vc_id,
+        "new_puzhash": new_puzhash,
+        "new_proof_hash": new_proof_hash,
+        "fee": fee,
+        "reuse_puzhash": reuse_puzhash,
+    }
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, spend_vc))
+
+
+@vcs_cmd.command("add_proof_reveal", short_help="Add a series of proofs that will combine to a single proof hash")
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option("-p", "--proof", help="A flag to add as a proof", type=str, multiple=True)
+@click.option("-r", "--root-only", help="Do not add the proofs to the DB, just output the root", is_flag=True)
+def _add_proof_reveal(
+    wallet_rpc_port: Optional[int],
+    fingerprint: int,
+    proof: List[str],
+    root_only: bool,
+) -> None:  # pragma: no cover
+    import asyncio
+
+    from chia.cmds.cmds_util import execute_with_wallet
+
+    from .wallet_funcs import add_proof_reveal
+
+    extra_params = {
+        "proofs": proof,
+        "root_only": root_only,
+    }
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, add_proof_reveal))
+
+
+@vcs_cmd.command("get_proofs_for_root", short_help="Get the stored proof flags for a given proof hash")
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option("-r", "--proof-hash", help="The root to search for", type=str, required=True)
+def _get_proofs_for_root(
+    wallet_rpc_port: Optional[int],
+    fingerprint: int,
+    proof_hash: str,
+) -> None:  # pragma: no cover
+    import asyncio
+
+    from chia.cmds.cmds_util import execute_with_wallet
+
+    from .wallet_funcs import get_proofs_for_root
+
+    extra_params = {
+        "proof_hash": proof_hash,
+    }
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, get_proofs_for_root))
+
+
+@vcs_cmd.command("revoke", short_help="Revoke any VC if you have the proper DID and the VCs parent coin")
+@click.option(
+    "-wp",
+    "--wallet-rpc-port",
+    help="Set the port where the Wallet is hosting the RPC interface. See the rpc_port under wallet in config.yaml",
+    type=int,
+    default=None,
+)
+@click.option("-f", "--fingerprint", help="Set the fingerprint to specify which key to use", type=int)
+@click.option(
+    "-p",
+    "--parent-coin-id",
+    help="The ID of the parent coin of the VC (optional if VC ID is used)",
+    type=str,
+    required=False,
+)
+@click.option(
+    "-l",
+    "--vc-id",
+    help="The launcher ID of the VC to revoke (must be tracked by wallet) (optional if Parent ID is used)",
+    type=str,
+    required=False,
+)
+@click.option("-m", "--fee", help="Blockchain fee for revocation transaction, in XCH", type=str, required=False)
+@click.option(
+    "--reuse-puzhash/--generate-new-puzhash",
+    help="Send the VC back to the same puzzle hash it came from (ignored if --new-puzhash is specified)",
+    default=False,
+    show_default=True,
+)
+def _revoke_vc(
+    wallet_rpc_port: Optional[int],
+    fingerprint: int,
+    parent_coin_id: Optional[str],
+    vc_id: Optional[str],
+    fee: str,
+    reuse_puzhash: bool,
+) -> None:  # pragma: no cover
+    import asyncio
+
+    from chia.cmds.cmds_util import execute_with_wallet
+
+    from .wallet_funcs import revoke_vc
+
+    extra_params = {
+        "parent_coin_id": parent_coin_id,
+        "vc_id": vc_id,
+        "fee": fee,
+        "reuse_puzhash": reuse_puzhash,
+    }
+    asyncio.run(execute_with_wallet(wallet_rpc_port, fingerprint, extra_params, revoke_vc))
```

### Comparing `chia-blockchain-2.0.0b1/chia/cmds/wallet_funcs.py` & `chia-blockchain-2.0.0b3/chia/cmds/wallet_funcs.py`

 * *Files 12% similar despite different names*

```diff
@@ -24,51 +24,77 @@
 from chia.wallet.outer_puzzles import AssetType
 from chia.wallet.puzzle_drivers import PuzzleInfo
 from chia.wallet.trade_record import TradeRecord
 from chia.wallet.trading.offer import Offer
 from chia.wallet.trading.trade_status import TradeStatus
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.address_type import AddressType, ensure_valid_address
-from chia.wallet.util.transaction_type import TransactionType
+from chia.wallet.util.puzzle_decorator_type import PuzzleDecoratorType
+from chia.wallet.util.query_filter import HashFilter, TransactionTypeFilter
+from chia.wallet.util.transaction_type import CLAWBACK_TRANSACTION_TYPES, TransactionType
 from chia.wallet.util.wallet_types import WalletType
+from chia.wallet.vc_wallet.vc_store import VCProofs
+from chia.wallet.wallet_coin_store import GetCoinRecords
 
 CATNameResolver = Callable[[bytes32], Awaitable[Optional[Tuple[Optional[uint32], str]]]]
 
 transaction_type_descriptions = {
     TransactionType.INCOMING_TX: "received",
     TransactionType.OUTGOING_TX: "sent",
     TransactionType.COINBASE_REWARD: "rewarded",
     TransactionType.FEE_REWARD: "rewarded",
     TransactionType.INCOMING_TRADE: "received in trade",
     TransactionType.OUTGOING_TRADE: "sent in trade",
+    TransactionType.INCOMING_CLAWBACK_RECEIVE: "received in clawback as recipient",
+    TransactionType.INCOMING_CLAWBACK_SEND: "received in clawback as sender",
+    TransactionType.OUTGOING_CLAWBACK: "claim/clawback",
 }
 
 
 def transaction_description_from_type(tx: TransactionRecord) -> str:
     return transaction_type_descriptions.get(TransactionType(tx.type), "(unknown reason)")
 
 
-def print_transaction(tx: TransactionRecord, verbose: bool, name, address_prefix: str, mojo_per_unit: int) -> None:
+def print_transaction(
+    tx: TransactionRecord,
+    verbose: bool,
+    name,
+    address_prefix: str,
+    mojo_per_unit: int,
+    coin_record: Optional[Dict[str, Any]] = None,
+) -> None:  # pragma: no cover
     if verbose:
         print(tx)
     else:
         chia_amount = Decimal(int(tx.amount)) / mojo_per_unit
         to_address = encode_puzzle_hash(tx.to_puzzle_hash, address_prefix)
         print(f"Transaction {tx.name}")
         print(f"Status: {'Confirmed' if tx.confirmed else ('In mempool' if tx.is_in_mempool() else 'Pending')}")
         description = transaction_description_from_type(tx)
         print(f"Amount {description}: {chia_amount} {name}")
         print(f"To address: {to_address}")
         print("Created at:", datetime.fromtimestamp(tx.created_at_time).strftime("%Y-%m-%d %H:%M:%S"))
+        if coin_record is not None:
+            print(
+                "Recipient claimable time:",
+                datetime.fromtimestamp(tx.created_at_time + coin_record["metadata"]["time_lock"]).strftime(
+                    "%Y-%m-%d %H:%M:%S"
+                ),
+            )
         print("")
 
 
 def get_mojo_per_unit(wallet_type: WalletType) -> int:
     mojo_per_unit: int
-    if wallet_type in {WalletType.STANDARD_WALLET, WalletType.POOLING_WALLET, WalletType.DATA_LAYER}:
+    if wallet_type in {
+        WalletType.STANDARD_WALLET,
+        WalletType.POOLING_WALLET,
+        WalletType.DATA_LAYER,
+        WalletType.VC,
+    }:  # pragma: no cover
         mojo_per_unit = units["chia"]
     elif wallet_type == WalletType.CAT:
         mojo_per_unit = units["cat"]
     else:
         raise LookupError(f"Operation is not supported for Wallet type {wallet_type.name}")
 
     return mojo_per_unit
@@ -87,15 +113,20 @@
 
 async def get_unit_name_for_wallet_id(
     config: Dict[str, Any],
     wallet_type: WalletType,
     wallet_id: int,
     wallet_client: WalletRpcClient,
 ):
-    if wallet_type in {WalletType.STANDARD_WALLET, WalletType.POOLING_WALLET, WalletType.DATA_LAYER}:
+    if wallet_type in {
+        WalletType.STANDARD_WALLET,
+        WalletType.POOLING_WALLET,
+        WalletType.DATA_LAYER,
+        WalletType.VC,
+    }:  # pragma: no cover
         name = config["network_overrides"]["config"][config["selected_network"]]["address_prefix"].upper()
     elif wallet_type == WalletType.CAT:
         name = await wallet_client.get_cat_name(wallet_id=wallet_id)
     else:
         raise LookupError(f"Operation is not supported for Wallet type {wallet_type.name}")
 
     return name
@@ -127,26 +158,32 @@
         verbose=(args["verbose"] > 0),
         name=name,
         address_prefix=address_prefix,
         mojo_per_unit=mojo_per_unit,
     )
 
 
-async def get_transactions(args: dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:
+async def get_transactions(args: dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
     wallet_id = args["id"]
     paginate = args["paginate"]
     if paginate is None:
         paginate = sys.stdout.isatty()
     offset = args["offset"]
     limit = args["limit"]
     sort_key = args["sort_key"]
     reverse = args["reverse"]
-
+    type_filter = (
+        None
+        if not args["clawback"]
+        else TransactionTypeFilter.include(
+            [TransactionType.INCOMING_CLAWBACK_RECEIVE, TransactionType.INCOMING_CLAWBACK_SEND]
+        )
+    )
     txs: List[TransactionRecord] = await wallet_client.get_transactions(
-        wallet_id, start=offset, end=(offset + limit), sort_key=sort_key, reverse=reverse
+        wallet_id, start=offset, end=(offset + limit), sort_key=sort_key, reverse=reverse, type_filter=type_filter
     )
 
     config = load_config(DEFAULT_ROOT_PATH, "config.yaml", SERVICE_NAME)
     address_prefix = selected_network_address_prefix(config)
     if len(txs) == 0:
         print("There are no transactions to this address")
 
@@ -164,20 +201,28 @@
         return
 
     num_per_screen = 5 if paginate else len(txs)
     for i in range(0, len(txs), num_per_screen):
         for j in range(0, num_per_screen):
             if i + j >= len(txs):
                 break
+            coin_record: Optional[Dict[str, Any]] = None
+            if txs[i + j].type in CLAWBACK_TRANSACTION_TYPES:
+                coin_record = (
+                    await wallet_client.get_coin_records(
+                        GetCoinRecords(coin_id_filter=HashFilter.include([txs[i + j].additions[0].name()]))
+                    )
+                )["coin_records"][0]
             print_transaction(
                 txs[i + j],
                 verbose=(args["verbose"] > 0),
                 name=name,
                 address_prefix=address_prefix,
                 mojo_per_unit=mojo_per_unit,
+                coin_record=coin_record,
             )
         if i + num_per_screen >= len(txs):
             return None
         print("Press q to quit, or c to continue")
         while True:
             entered_key = sys.stdin.read(1)
             if entered_key == "q":
@@ -186,40 +231,43 @@
                 break
 
 
 def check_unusual_transaction(amount: Decimal, fee: Decimal):
     return fee >= amount
 
 
-async def send(args: dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:
+async def send(args: dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
     wallet_id: int = args["id"]
     amount = Decimal(args["amount"])
     fee = Decimal(args["fee"])
     address = args["address"]
     override = args["override"]
     min_coin_amount = Decimal(args["min_coin_amount"])
     max_coin_amount = Decimal(args["max_coin_amount"])
-    exclude_coin_ids: List[str] = args["exclude_coin_ids"]
+    excluded_coin_ids: List[str] = args["excluded_coin_ids"]
     memo = args["memo"]
     reuse_puzhash = args["reuse_puzhash"]
+    clawback_time_lock = args["clawback_time"]
     if memo is None:
         memos = None
     else:
         memos = [memo]
 
     if not override and check_unusual_transaction(amount, fee):
         print(
             f"A transaction of amount {amount} and fee {fee} is unusual.\n"
             f"Pass in --override if you are sure you mean to do this."
         )
         return
     if amount == 0:
         print("You can not send an empty transaction")
         return
-
+    if clawback_time_lock < 0:
+        print("Clawback time lock seconds cannot be negative.")
+        return
     try:
         typ = await get_wallet_type(wallet_id=wallet_id, wallet_client=wallet_client)
         mojo_per_unit = get_mojo_per_unit(typ)
     except LookupError:
         print(f"Wallet id: {wallet_id} not found.")
         return
 
@@ -233,28 +281,33 @@
             wallet_id,
             final_amount,
             address,
             final_fee,
             memos,
             final_min_coin_amount,
             final_max_coin_amount,
-            exclude_coin_ids=exclude_coin_ids,
+            excluded_coin_ids=excluded_coin_ids,
             reuse_puzhash=reuse_puzhash,
+            puzzle_decorator_override=[
+                {"decorator": PuzzleDecoratorType.CLAWBACK.name, "clawback_timelock": clawback_time_lock}
+            ]
+            if clawback_time_lock > 0
+            else None,
         )
     elif typ == WalletType.CAT:
         print("Submitting transaction...")
         res = await wallet_client.cat_spend(
             wallet_id,
             final_amount,
             address,
             final_fee,
             memos,
             final_min_coin_amount,
             final_max_coin_amount,
-            exclude_coin_ids=exclude_coin_ids,
+            excluded_coin_ids=excluded_coin_ids,
             reuse_puzhash=reuse_puzhash,
         )
     else:
         print("Only standard wallet and CAT wallets are supported")
         return
 
     tx_id = res.name
@@ -477,21 +530,23 @@
                         print("Error creating offer")
 
 
 def timestamp_to_time(timestamp):
     return datetime.fromtimestamp(timestamp).strftime("%Y-%m-%d %H:%M:%S")
 
 
-async def print_offer_summary(cat_name_resolver: CATNameResolver, sum_dict: Dict[str, int], has_fee: bool = False):
+async def print_offer_summary(
+    cat_name_resolver: CATNameResolver, sum_dict: Dict[str, int], has_fee: bool = False, network_xch="XCH"
+):
     for asset_id, amount in sum_dict.items():
         description: str = ""
         unit: int = units["chia"]
         wid: str = "1" if asset_id == "xch" else ""
         mojo_amount: int = int(Decimal(amount))
-        name: str = "XCH"
+        name: str = network_xch
         if asset_id != "xch":
             name = asset_id
             if asset_id == "unknown":
                 name = "Unknown"
                 unit = units["mojo"]
                 if has_fee:
                     description = " [Typically represents change returned from the included fee]"
@@ -626,19 +681,20 @@
             "72dec062874cd4d3aab892a0906688a1ae412b0109982e1797a170add88bdcdc"
         ):
             raise ValueError("CAT1s are no longer supported")
     ###
 
     offered, requested, _ = offer.summary()
     cat_name_resolver = wallet_client.cat_asset_id_to_name
+    network_xch = AddressType.XCH.hrp(config).upper()
     print("Summary:")
     print("  OFFERED:")
-    await print_offer_summary(cat_name_resolver, offered)
+    await print_offer_summary(cat_name_resolver, offered, network_xch=network_xch)
     print("  REQUESTED:")
-    await print_offer_summary(cat_name_resolver, requested)
+    await print_offer_summary(cat_name_resolver, requested, network_xch=network_xch)
 
     print()
 
     royalty_asset_dict: Dict[Any, Tuple[Any, uint16]] = {}
     for royalty_asset_id in nft_coin_ids_supporting_royalties_from_offer(offer):
         if royalty_asset_id.hex() in offered:
             percentage, address = await get_nft_royalty_percentage_and_address(royalty_asset_id, wallet_client)
@@ -650,15 +706,15 @@
     if royalty_asset_dict != {}:
         fungible_asset_dict: Dict[Any, uint64] = {}
         for fungible_asset_id in fungible_assets_from_offer(offer):
             fungible_asset_id_str = fungible_asset_id.hex() if fungible_asset_id is not None else "xch"
             if fungible_asset_id_str in requested:
                 nft_royalty_currency: str = "Unknown CAT"
                 if fungible_asset_id is None:
-                    nft_royalty_currency = "XCH"
+                    nft_royalty_currency = network_xch
                 else:
                     result = await wallet_client.cat_asset_id_to_name(fungible_asset_id)
                     if result is not None:
                         nft_royalty_currency = result[1]
                 fungible_asset_dict[nft_royalty_currency] = uint64(requested[fungible_asset_id_str])
 
         if fungible_asset_dict != {}:
@@ -666,30 +722,30 @@
                 royalty_asset_dict, fungible_asset_dict
             )
             total_amounts_requested: Dict[Any, int] = {}
             print("Royalties Summary:")
             for nft_id, summaries in royalty_summary.items():
                 print(f"  - For {nft_id}:")
                 for summary in summaries:
-                    divisor = units["chia"] if summary["asset"] == "XCH" else units["cat"]
+                    divisor = units["chia"] if summary["asset"] == network_xch else units["cat"]
                     converted_amount = Decimal(summary["amount"]) / divisor
                     total_amounts_requested.setdefault(summary["asset"], fungible_asset_dict[summary["asset"]])
                     total_amounts_requested[summary["asset"]] += summary["amount"]
                     print(
                         f"    - {converted_amount} {summary['asset']} ({summary['amount']} mojos) to {summary['address']}"  # noqa
                     )
 
             print()
             print("Total Amounts Requested:")
             for asset, amount in total_amounts_requested.items():
-                divisor = units["chia"] if asset == "XCH" else units["cat"]
+                divisor = units["chia"] if asset == network_xch else units["cat"]
                 converted_amount = Decimal(amount) / divisor
                 print(f"  - {converted_amount} {asset} ({amount} mojos)")
 
-    print(f"Included Fees: {Decimal(offer.fees()) / units['chia']} XCH, {offer.fees()} mojos")
+    print(f"Included Fees: {Decimal(offer.fees()) / units['chia']} {network_xch}, {offer.fees()} mojos")
 
     if not examine_only:
         print()
         confirmation = input("Would you like to take this offer? (y/n): ")
         if confirmation in ["y", "yes"]:
             trade_record = await wallet_client.take_offer(offer, fee=fee)
             print(f"Accepted offer with ID {trade_record.trade_id}")
@@ -1205,7 +1261,146 @@
         print("Invalid wallet type.")
         return
     print("")
     print(f'Message: {args["message"]}')
     print(f"Public Key: {pubkey}")
     print(f"Signature: {signature}")
     print(f"Signing Mode: {signing_mode}")
+
+
+async def spend_clawback(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    tx_ids = []
+    for tid in args["tx_ids"].split(","):
+        tx_ids.append(bytes32.from_hexstr(tid))
+    if len(tx_ids) == 0:
+        print("Transaction ID is required.")
+        return
+    fee = Decimal(args["fee"])
+    if fee < 0:
+        print("Batch fee cannot be negative.")
+        return
+    response = await wallet_client.spend_clawback_coins(tx_ids, int(fee * units["chia"]))
+    print(str(response))
+
+
+async def mint_vc(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    config = load_config(DEFAULT_ROOT_PATH, "config.yaml", SERVICE_NAME)
+    vc_record, txs = await wallet_client.vc_mint(
+        decode_puzzle_hash(ensure_valid_address(args["did"], allowed_types={AddressType.DID}, config=config)),
+        None
+        if args["target_address"] is None
+        else decode_puzzle_hash(
+            ensure_valid_address(args["target_address"], allowed_types={AddressType.XCH}, config=config)
+        ),
+        uint64(0) if args["fee"] is None else uint64(int(Decimal(args["fee"]) * units["chia"])),
+    )
+
+    print(f"New VC with launcher ID minted: {vc_record.vc.launcher_id}")
+    print("Relevant TX records:")
+    print("")
+    for tx in txs:
+        print_transaction(
+            tx,
+            verbose=False,
+            name="XCH",
+            address_prefix=selected_network_address_prefix(config),
+            mojo_per_unit=get_mojo_per_unit(wallet_type=WalletType.STANDARD_WALLET),
+        )
+
+
+async def get_vcs(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    config = load_config(DEFAULT_ROOT_PATH, "config.yaml", SERVICE_NAME)
+    vc_records, proofs = await wallet_client.vc_get_list(args["start"], args["count"])
+    print("Proofs:")
+    for hash, proof_dict in proofs.items():
+        if proof_dict is not None:
+            print(f"- {hash}")
+            for proof in proof_dict:
+                print(f"  - {proof}")
+    for record in vc_records:
+        print("")
+        print(f"Launcher ID: {record.vc.launcher_id.hex()}")
+        print(f"Coin ID: {record.vc.coin.name().hex()}")
+        print(
+            f"Inner Address: {encode_puzzle_hash(record.vc.inner_puzzle_hash, selected_network_address_prefix(config))}"
+        )
+        if record.vc.proof_hash is None:
+            pass
+        else:
+            print(f"Proof Hash: {record.vc.proof_hash.hex()}")
+
+
+async def spend_vc(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    config = load_config(DEFAULT_ROOT_PATH, "config.yaml", SERVICE_NAME)
+    txs = await wallet_client.vc_spend(
+        bytes32.from_hexstr(args["vc_id"]),
+        new_puzhash=None if args["new_puzhash"] is None else bytes32.from_hexstr(args["new_puzhash"]),
+        new_proof_hash=bytes32.from_hexstr(args["new_proof_hash"]),
+        fee=uint64(0) if args["fee"] is None else uint64(int(Decimal(args["fee"]) * units["chia"])),
+        reuse_puzhash=args["reuse_puzhash"],
+    )
+
+    print("Proofs successfully updated!")
+    print("Relevant TX records:")
+    print("")
+    for tx in txs:
+        print_transaction(
+            tx,
+            verbose=False,
+            name="XCH",
+            address_prefix=selected_network_address_prefix(config),
+            mojo_per_unit=get_mojo_per_unit(wallet_type=WalletType.STANDARD_WALLET),
+        )
+
+
+async def add_proof_reveal(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    if len(args["proofs"]) == 0:
+        print("Must specify at least one proof")
+        return
+
+    proof_dict: Dict[str, str] = {proof: "1" for proof in args["proofs"]}
+    if args["root_only"]:
+        print(f"Proof Hash: {VCProofs(proof_dict).root()}")
+        return
+    else:
+        await wallet_client.vc_add_proofs(proof_dict)
+        print("Proofs added to DB successfully!")
+        return
+
+
+async def get_proofs_for_root(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    proof_dict: Dict[str, str] = await wallet_client.vc_get_proofs_for_root(bytes32.from_hexstr(args["proof_hash"]))
+    print("Proofs:")
+    for proof in proof_dict:
+        print(f" - {proof}")
+
+
+async def revoke_vc(args: Dict, wallet_client: WalletRpcClient, fingerprint: int) -> None:  # pragma: no cover
+    config = load_config(DEFAULT_ROOT_PATH, "config.yaml", SERVICE_NAME)
+    if args["parent_coin_id"] is None:
+        if args["vc_id"] is None:
+            print("Must specify either --parent-coin-id or --vc-id")
+            return
+        record = await wallet_client.vc_get(bytes32.from_hexstr(args["vc_id"]))
+        if record is None:
+            print(f"Cannot find a VC with ID {args['vc_id']}")
+            return
+        parent_id: bytes32 = record.vc.coin.parent_coin_info
+    else:
+        parent_id = bytes32.from_hexstr(args["parent_coin_id"])
+    txs = await wallet_client.vc_revoke(
+        parent_id,
+        fee=uint64(0) if args["fee"] is None else uint64(int(Decimal(args["fee"]) * units["chia"])),
+        reuse_puzhash=args["reuse_puzhash"],
+    )
+
+    print("VC successfully revoked!")
+    print("Relevant TX records:")
+    print("")
+    for tx in txs:
+        print_transaction(
+            tx,
+            verbose=False,
+            name="XCH",
+            address_prefix=selected_network_address_prefix(config),
+            mojo_per_unit=get_mojo_per_unit(wallet_type=WalletType.STANDARD_WALLET),
+        )
```

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/block_body_validation.py` & `chia-blockchain-2.0.0b3/chia/consensus/block_body_validation.py`

 * *Files 1% similar despite different names*

```diff
@@ -476,17 +476,15 @@
             return error, None
 
     # create hash_key list for aggsig check
     pairs_pks: List[bytes48] = []
     pairs_msgs: List[bytes] = []
     if npc_result:
         assert npc_result.conds is not None
-        pairs_pks, pairs_msgs = pkm_pairs(
-            npc_result.conds, constants.AGG_SIG_ME_ADDITIONAL_DATA, soft_fork=height >= constants.SOFT_FORK_HEIGHT
-        )
+        pairs_pks, pairs_msgs = pkm_pairs(npc_result.conds, constants.AGG_SIG_ME_ADDITIONAL_DATA)
 
     # 22. Verify aggregated signature
     # TODO: move this to pre_validate_blocks_multiprocessing so we can sync faster
     if not block.transactions_info.aggregated_signature:
         return Err.BAD_AGGREGATE_SIGNATURE, None
 
     # The pairing cache is not useful while syncing as each pairing is seen
```

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/block_creation.py` & `chia-blockchain-2.0.0b3/chia/consensus/block_creation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/block_header_validation.py` & `chia-blockchain-2.0.0b3/chia/consensus/block_header_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/block_record.py` & `chia-blockchain-2.0.0b3/chia/consensus/block_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/block_rewards.py` & `chia-blockchain-2.0.0b3/chia/consensus/block_rewards.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/block_root_validation.py` & `chia-blockchain-2.0.0b3/chia/consensus/block_root_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/blockchain.py` & `chia-blockchain-2.0.0b3/chia/consensus/blockchain.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,12 @@
 from __future__ import annotations
 
 import asyncio
 import dataclasses
+import enum
 import logging
 import multiprocessing
 import traceback
 from concurrent.futures import Executor
 from concurrent.futures.process import ProcessPoolExecutor
 from enum import Enum
 from multiprocessing.context import BaseContext
@@ -45,14 +46,15 @@
 from chia.types.unfinished_header_block import UnfinishedHeaderBlock
 from chia.types.weight_proof import SubEpochChallengeSegment
 from chia.util.errors import ConsensusError, Err
 from chia.util.generator_tools import get_block_header, tx_removals_and_additions
 from chia.util.hash import std_hash
 from chia.util.inline_executor import InlineExecutor
 from chia.util.ints import uint16, uint32, uint64, uint128
+from chia.util.priority_mutex import PriorityMutex
 from chia.util.setproctitle import getproctitle, setproctitle
 
 log = logging.getLogger(__name__)
 
 
 class AddBlockResult(Enum):
     """
@@ -73,14 +75,20 @@
     peak: BlockRecord
     fork_height: uint32
     rolled_back_records: List[CoinRecord]
     new_npc_results: List[NPCResult]
     new_rewards: List[Coin]
 
 
+class BlockchainMutexPriority(enum.IntEnum):
+    # lower values are higher priority
+    low = 1
+    high = 0
+
+
 class Blockchain(BlockchainInterface):
     constants: ConsensusConstants
 
     # peak of the blockchain
     _peak_height: Optional[uint32]
     # All blocks in peak path are guaranteed to be included, can include orphan blocks
     __block_records: Dict[bytes32, BlockRecord]
@@ -98,15 +106,15 @@
     # Set holding seen compact proofs, in order to avoid duplicates.
     _seen_compact_proofs: Set[Tuple[VDFInfo, uint32]]
 
     # Whether blockchain is shut down or not
     _shut_down: bool
 
     # Lock to prevent simultaneous reads and writes
-    lock: asyncio.Lock
+    priority_mutex: PriorityMutex[BlockchainMutexPriority]
     compact_proof_lock: asyncio.Lock
 
     @staticmethod
     async def create(
         coin_store: CoinStore,
         block_store: BlockStore,
         consensus_constants: ConsensusConstants,
@@ -118,15 +126,17 @@
     ) -> "Blockchain":
         """
         Initializes a blockchain with the BlockRecords from disk, assuming they have all been
         validated. Uses the genesis block given in override_constants, or as a fallback,
         in the consensus constants config.
         """
         self = Blockchain()
-        self.lock = asyncio.Lock()  # External lock handled by full node
+        # Blocks are validated under high priority, and transactions under low priority. This guarantees blocks will
+        # be validated first.
+        self.priority_mutex = PriorityMutex.create(priority_type=BlockchainMutexPriority)
         self.compact_proof_lock = asyncio.Lock()
         if single_threaded:
             self.pool = InlineExecutor()
         else:
             cpu_count = multiprocessing.cpu_count()
             if cpu_count > 61:
                 cpu_count = 61  # Windows Server 2016 has an issue https://bugs.python.org/issue26903
@@ -300,14 +310,16 @@
 
         if state_change_summary is not None:
             # new coin records added
             return AddBlockResult.NEW_PEAK, None, state_change_summary
         else:
             return AddBlockResult.ADDED_AS_ORPHAN, None, None
 
+    # only to be called under short fork points
+    # under deep reorgs this can cause OOM
     async def _reconsider_peak(
         self,
         block_record: BlockRecord,
         genesis: bool,
         fork_point_with_peak: Optional[uint32],
         npc_result: Optional[NPCResult],
     ) -> Tuple[List[BlockRecord], Optional[StateChangeSummary]]:
```

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/blockchain_interface.py` & `chia-blockchain-2.0.0b3/chia/consensus/blockchain_interface.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/coinbase.py` & `chia-blockchain-2.0.0b3/chia/consensus/coinbase.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/constants.py` & `chia-blockchain-2.0.0b3/chia/consensus/constants.py`

 * *Files 4% similar despite different names*

```diff
@@ -58,20 +58,30 @@
     WEIGHT_PROOF_THRESHOLD: uint8
     WEIGHT_PROOF_RECENT_BLOCKS: uint32
     MAX_BLOCK_COUNT_PER_REQUESTS: uint32
     BLOCKS_CACHE_SIZE: uint32
     MAX_GENERATOR_SIZE: uint32
     MAX_GENERATOR_REF_LIST_SIZE: uint32
     POOL_SUB_SLOT_ITERS: uint64
-    # soft fork initiated in 1.7.0 release
-    SOFT_FORK_HEIGHT: uint32
 
     # soft fork initiated in 1.8.0 release
     SOFT_FORK2_HEIGHT: uint32
 
+    # soft fork initiated in 2.0 release
+    SOFT_FORK3_HEIGHT: uint32
+
+    # the hard fork planned with the 2.0 release
+    # this is the block with the first plot filter adjustment
+    HARD_FORK_HEIGHT: uint32
+
+    # the plot filter adjustment heights
+    PLOT_FILTER_128_HEIGHT: uint32
+    PLOT_FILTER_64_HEIGHT: uint32
+    PLOT_FILTER_32_HEIGHT: uint32
+
     def replace(self, **changes: object) -> "ConsensusConstants":
         return dataclasses.replace(self, **changes)
 
     def replace_str_to_bytes(self, **changes: Any) -> "ConsensusConstants":
         """
         Overrides str (hex) values with bytes.
         """
```

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/cost_calculator.py` & `chia-blockchain-2.0.0b3/chia/consensus/cost_calculator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/default_constants.py` & `chia-blockchain-2.0.0b3/chia/consensus/default_constants.py`

 * *Files 7% similar despite different names*

```diff
@@ -52,13 +52,22 @@
     "WEIGHT_PROOF_THRESHOLD": 2,
     "BLOCKS_CACHE_SIZE": 4608 + (128 * 4),
     "WEIGHT_PROOF_RECENT_BLOCKS": 1000,
     "MAX_BLOCK_COUNT_PER_REQUESTS": 32,  # Allow up to 32 blocks per request
     "MAX_GENERATOR_SIZE": 1000000,
     "MAX_GENERATOR_REF_LIST_SIZE": 512,  # Number of references allowed in the block generator ref list
     "POOL_SUB_SLOT_ITERS": 37600000000,  # iters limit * NUM_SPS
-    "SOFT_FORK_HEIGHT": 3630000,
     "SOFT_FORK2_HEIGHT": 3886635,
+    # October 23, 2023
+    "SOFT_FORK3_HEIGHT": 4410000,
+    # June 2024
+    "HARD_FORK_HEIGHT": 5496000,
+    # June 2027
+    "PLOT_FILTER_128_HEIGHT": 10542000,
+    # June 2030
+    "PLOT_FILTER_64_HEIGHT": 15592000,
+    # June 2033
+    "PLOT_FILTER_32_HEIGHT": 20643000,
 }
 
 
 DEFAULT_CONSTANTS = ConsensusConstants(**default_kwargs)  # type: ignore
```

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/deficit.py` & `chia-blockchain-2.0.0b3/chia/consensus/deficit.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/difficulty_adjustment.py` & `chia-blockchain-2.0.0b3/chia/consensus/difficulty_adjustment.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/find_fork_point.py` & `chia-blockchain-2.0.0b3/chia/consensus/find_fork_point.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/full_block_to_block_record.py` & `chia-blockchain-2.0.0b3/chia/consensus/full_block_to_block_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/get_block_challenge.py` & `chia-blockchain-2.0.0b3/chia/consensus/get_block_challenge.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/make_sub_epoch_summary.py` & `chia-blockchain-2.0.0b3/chia/consensus/make_sub_epoch_summary.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/multiprocess_validation.py` & `chia-blockchain-2.0.0b3/chia/consensus/multiprocess_validation.py`

 * *Files 3% similar despite different names*

```diff
@@ -118,19 +118,15 @@
                 if error_int is None:
                     # If this is False, it means either we don't have a signature (not a tx block) or we have an invalid
                     # signature (which also puts in an error) or we didn't validate the signature because we want to
                     # validate it later. add_block will attempt to validate the signature later.
                     if validate_signatures:
                         if npc_result is not None and block.transactions_info is not None:
                             assert npc_result.conds
-                            pairs_pks, pairs_msgs = pkm_pairs(
-                                npc_result.conds,
-                                constants.AGG_SIG_ME_ADDITIONAL_DATA,
-                                soft_fork=block.height >= constants.SOFT_FORK_HEIGHT,
-                            )
+                            pairs_pks, pairs_msgs = pkm_pairs(npc_result.conds, constants.AGG_SIG_ME_ADDITIONAL_DATA)
                             # Using AugSchemeMPL.aggregate_verify, so it's safe to use from_bytes_unchecked
                             pks_objects: List[G1Element] = [G1Element.from_bytes_unchecked(pk) for pk in pairs_pks]
                             if not AugSchemeMPL.aggregate_verify(
                                 pks_objects, pairs_msgs, block.transactions_info.aggregated_signature
                             ):
                                 error_int = uint16(Err.BAD_AGGREGATE_SIGNATURE.value)
                             else:
@@ -194,39 +190,34 @@
         blocks: list of full blocks to validate (must be connected to current chain)
         npc_results
         get_block_generator
     """
     prev_b: Optional[BlockRecord] = None
     # Collects all the recent blocks (up to the previous sub-epoch)
     recent_blocks: Dict[bytes32, BlockRecord] = {}
-    recent_blocks_compressed: Dict[bytes32, BlockRecord] = {}
     num_sub_slots_found = 0
     num_blocks_seen = 0
     if blocks[0].height > 0:
         if not block_records.contains_block(blocks[0].prev_header_hash):
             return [PreValidationResult(uint16(Err.INVALID_PREV_BLOCK_HASH.value), None, None, False)]
         curr = block_records.block_record(blocks[0].prev_header_hash)
         num_sub_slots_to_look_for = 3 if curr.overflow else 2
         while (
             curr.sub_epoch_summary_included is None
             or num_blocks_seen < constants.NUMBER_OF_TIMESTAMPS
             or num_sub_slots_found < num_sub_slots_to_look_for
         ) and curr.height > 0:
-            if num_blocks_seen < constants.NUMBER_OF_TIMESTAMPS or num_sub_slots_found < num_sub_slots_to_look_for:
-                recent_blocks_compressed[curr.header_hash] = curr
-
             if curr.first_in_sub_slot:
                 assert curr.finished_challenge_slot_hashes is not None
                 num_sub_slots_found += len(curr.finished_challenge_slot_hashes)
             recent_blocks[curr.header_hash] = curr
             if curr.is_transaction_block:
                 num_blocks_seen += 1
             curr = block_records.block_record(curr.prev_hash)
         recent_blocks[curr.header_hash] = curr
-        recent_blocks_compressed[curr.header_hash] = curr
     block_record_was_present = []
     for block in blocks:
         block_record_was_present.append(block_records.contains_block(block.header_hash))
 
     diff_ssis: List[Tuple[uint64, uint64]] = []
     for block in blocks:
         if block.height != 0:
@@ -278,40 +269,34 @@
             if not block_rec.sub_epoch_summary_included.get_hash() == next_ses.get_hash():
                 log.error("sub_epoch_summary does not match wp sub_epoch_summary list")
                 return [PreValidationResult(uint16(Err.INVALID_SUB_EPOCH_SUMMARY.value), None, None, False)]
         # Makes sure to not override the valid blocks already in block_records
         if not block_records.contains_block(block_rec.header_hash):
             block_records.add_block_record(block_rec)  # Temporarily add block to dict
             recent_blocks[block_rec.header_hash] = block_rec
-            recent_blocks_compressed[block_rec.header_hash] = block_rec
         else:
             recent_blocks[block_rec.header_hash] = block_records.block_record(block_rec.header_hash)
-            recent_blocks_compressed[block_rec.header_hash] = block_records.block_record(block_rec.header_hash)
         prev_b = block_rec
         diff_ssis.append((difficulty, sub_slot_iters))
 
     block_dict: Dict[bytes32, FullBlock] = {}
     for i, block in enumerate(blocks):
         block_dict[block.header_hash] = block
         if not block_record_was_present[i]:
             block_records.remove_block_record(block.header_hash)
 
-    recent_sb_compressed_pickled = {bytes(k): bytes(v) for k, v in recent_blocks_compressed.items()}
     npc_results_pickled = {}
     for k, v in npc_results.items():
         npc_results_pickled[k] = bytes(v)
     futures = []
     # Pool of workers to validate blocks concurrently
+    recent_blocks_bytes = {bytes(k): bytes(v) for k, v in recent_blocks.items()}  # convert to bytes
     for i in range(0, len(blocks), batch_size):
         end_i = min(i + batch_size, len(blocks))
         blocks_to_validate = blocks[i:end_i]
-        if any([len(block.finished_sub_slots) > 0 for block in blocks_to_validate]):
-            final_pickled = {bytes(k): bytes(v) for k, v in recent_blocks.items()}
-        else:
-            final_pickled = recent_sb_compressed_pickled
         b_pickled: Optional[List[bytes]] = None
         hb_pickled: Optional[List[bytes]] = None
         previous_generators: List[Optional[bytes]] = []
         for block in blocks_to_validate:
             # We ONLY add blocks which are in the past, based on header hashes (which are validated later) to the
             # prev blocks dict. This is important since these blocks are assumed to be valid and are used as previous
             # generator references
@@ -345,15 +330,15 @@
                 hb_pickled.append(bytes(block))
 
         futures.append(
             asyncio.get_running_loop().run_in_executor(
                 pool,
                 batch_pre_validate_blocks,
                 constants,
-                final_pickled,
+                recent_blocks_bytes,
                 b_pickled,
                 hb_pickled,
                 previous_generators,
                 npc_results_pickled,
                 check_filter,
                 [diff_ssis[j][0] for j in range(i, end_i)],
                 [diff_ssis[j][1] for j in range(i, end_i)],
```

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/pos_quality.py` & `chia-blockchain-2.0.0b3/chia/consensus/pos_quality.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/pot_iterations.py` & `chia-blockchain-2.0.0b3/chia/consensus/pot_iterations.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/consensus/vdf_info_computation.py` & `chia-blockchain-2.0.0b3/chia/consensus/vdf_info_computation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/daemon/client.py` & `chia-blockchain-2.0.0b3/chia/daemon/client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/daemon/keychain_proxy.py` & `chia-blockchain-2.0.0b3/chia/daemon/keychain_proxy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/daemon/keychain_server.py` & `chia-blockchain-2.0.0b3/chia/daemon/keychain_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/daemon/server.py` & `chia-blockchain-2.0.0b3/chia/daemon/server.py`

 * *Files 0% similar despite different names*

```diff
@@ -293,15 +293,15 @@
 
     async def ping_task(self) -> None:
         restart = True
         await asyncio.sleep(30)
         for service_name, connections in self.connections.items():
             if service_name == service_plotter:
                 continue
-            for connection in connections:
+            for connection in connections.copy():
                 try:
                     self.log.debug(f"About to ping: {service_name}")
                     await connection.ping()
                 except asyncio.CancelledError:
                     self.log.warning("Ping task received Cancel")
                     restart = False
                     break
@@ -945,15 +945,15 @@
 
         finally:
             if current_process is not None:
                 self.services[service_name].remove(current_process)
                 current_process.wait()  # prevent zombies
             self._run_next_serial_plotting(loop, queue)
 
-    async def start_plotting(self, request: Dict[str, Any]):
+    async def start_plotting(self, request: Dict[str, Any]) -> Dict[str, Any]:
         service_name = request["service"]
 
         plotter = request.get("plotter", "chiapos")
         delay = int(request.get("delay", 0))
         parallel = request.get("parallel", False)
         size = request.get("k")
         temp_dir = request.get("t")
@@ -1191,15 +1191,17 @@
     return root_path / "run" / f"{pid_name}{id}.pid"
 
 
 def plotter_log_path(root_path: Path, id: str):
     return root_path / "plotter" / f"plotter_log_{id}.txt"
 
 
-def launch_plotter(root_path: Path, service_name: str, service_array: List[str], id: str):
+def launch_plotter(
+    root_path: Path, service_name: str, service_array: List[str], id: str
+) -> Tuple[subprocess.Popen, Path]:
     # we need to pass on the possibly altered CHIA_ROOT
     os.environ["CHIA_ROOT"] = str(root_path)
     service_executable = executable_for_service(service_array[0])
 
     # Swap service name with name of executable
     service_array[0] = service_executable
     startupinfo = None
```

### Comparing `chia-blockchain-2.0.0b1/chia/daemon/windows_signal.py` & `chia-blockchain-2.0.0b3/chia/daemon/windows_signal.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_layer.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_layer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_layer_api.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_layer_api.py`

 * *Files 16% similar despite different names*

```diff
@@ -3,26 +3,23 @@
 import logging
 
 from chia.data_layer.data_layer import DataLayer
 from chia.server.server import ChiaServer
 
 
 class DataLayerAPI:
+    log: logging.Logger
     data_layer: DataLayer
 
     def __init__(self, data_layer: DataLayer) -> None:
+        self.log = logging.getLogger(__name__)
         self.data_layer = data_layer
 
     # def _set_state_changed_callback(self, callback: StateChangedProtocol) -> None:
     #     self.full_node.state_changed_callback = callback
 
     @property
     def server(self) -> ChiaServer:
         return self.data_layer.server
 
-    @property
-    def log(self) -> logging.Logger:
-        return self.data_layer.log
-
-    @property
-    def api_ready(self) -> bool:
+    def ready(self) -> bool:
         return self.data_layer.initialized
```

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_layer_errors.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_layer_errors.py`

 * *Files 11% similar despite different names*

```diff
@@ -36,7 +36,11 @@
 class KeyNotFoundError(Exception):
     def __init__(self, key: bytes) -> None:
         super().__init__(f"Key not found: {key.hex()}")
 
 
 class OfferIntegrityError(Exception):
     pass
+
+
+class LauncherCoinNotFoundError(Exception):
+    pass
```

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_layer_server.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_layer_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_layer_util.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_layer_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_layer_wallet.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_layer_wallet.py`

 * *Files 0% similar despite different names*

```diff
@@ -4,18 +4,18 @@
 import logging
 import time
 from operator import attrgetter
 from typing import TYPE_CHECKING, Any, ClassVar, Dict, List, Optional, Set, Tuple, cast
 
 from blspy import G1Element, G2Element
 from clvm.EvalError import EvalError
-from typing_extensions import final
+from typing_extensions import Unpack, final
 
 from chia.consensus.block_record import BlockRecord
-from chia.data_layer.data_layer_errors import OfferIntegrityError
+from chia.data_layer.data_layer_errors import LauncherCoinNotFoundError, OfferIntegrityError
 from chia.data_layer.data_layer_util import OfferStore, ProofOfInclusion, ProofOfInclusionLayer, StoreProofs, leaf_hash
 from chia.protocols.wallet_protocol import CoinState
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
@@ -52,14 +52,15 @@
 from chia.wallet.util.merkle_utils import _simplify_merkle_proof
 from chia.wallet.util.transaction_type import TransactionType
 from chia.wallet.util.wallet_sync_utils import fetch_coin_spend, fetch_coin_spend_for_coin_state
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet import Wallet
 from chia.wallet.wallet_coin_record import WalletCoinRecord
 from chia.wallet.wallet_info import WalletInfo
+from chia.wallet.wallet_protocol import GSTOptionalArgs, WalletProtocol
 
 if TYPE_CHECKING:
     from chia.wallet.wallet_state_manager import WalletStateManager
 
 
 @streamable
 @dataclasses.dataclass(frozen=True)
@@ -102,16 +103,14 @@
             json_dict["ours"],
         )
 
 
 @final
 class DataLayerWallet:
     if TYPE_CHECKING:
-        from chia.wallet.wallet_protocol import WalletProtocol
-
         _protocol_check: ClassVar[WalletProtocol] = cast("DataLayerWallet", None)
 
     wallet_state_manager: WalletStateManager
     log: logging.Logger
     wallet_info: WalletInfo
     wallet_id: uint8
     standard_wallet: Wallet
@@ -195,15 +194,15 @@
 
     async def get_launcher_coin_state(self, launcher_id: bytes32, peer: WSChiaConnection) -> CoinState:
         coin_states: List[CoinState] = await self.wallet_state_manager.wallet_node.get_coin_state(
             [launcher_id], peer=peer
         )
 
         if len(coin_states) == 0:
-            raise ValueError(f"Launcher ID {launcher_id} is not a valid coin")
+            raise LauncherCoinNotFoundError(f"Launcher ID {launcher_id} is not a valid coin")
         if coin_states[0].coin.puzzle_hash != SINGLETON_LAUNCHER.get_tree_hash():
             raise ValueError(f"Coin with ID {launcher_id} is not a singleton launcher")
         if coin_states[0].created_height is None:
             raise ValueError(f"Launcher with ID {launcher_id} has not been created (maybe reorged)")
         if coin_states[0].spent_height is None:
             raise ValueError(f"Launcher with ID {launcher_id} has not been spent")
 
@@ -623,21 +622,23 @@
         puzzle_hashes: List[bytes32],
         fee: uint64 = uint64(0),
         coins: Set[Coin] = set(),
         memos: Optional[List[List[bytes]]] = None,  # ignored
         coin_announcements_to_consume: Optional[Set[Announcement]] = None,
         puzzle_announcements_to_consume: Optional[Set[Announcement]] = None,
         ignore_max_send_amount: bool = False,  # ignored
-        # This wallet only
-        launcher_id: Optional[bytes32] = None,
-        new_root_hash: Optional[bytes32] = None,
-        sign: bool = True,  # This only prevent signing of THIS wallet's part of the tx (fee will still be signed)
-        add_pending_singleton: bool = True,
-        announce_new_state: bool = False,
+        **kwargs: Unpack[GSTOptionalArgs],
     ) -> List[TransactionRecord]:
+        launcher_id: Optional[bytes32] = kwargs.get("launcher_id", None)
+        new_root_hash: Optional[bytes32] = kwargs.get("new_root_hash", None)
+        sign: bool = kwargs.get(
+            "sign", True
+        )  # This only prevent signing of THIS wallet's part of the tx (fee will still be signed)
+        add_pending_singleton: bool = kwargs.get("add_pending_singleton", True)
+        announce_new_state: bool = kwargs.get("announce_new_state", False)
         # Figure out the launcher ID
         if len(coins) == 0:
             if launcher_id is None:
                 raise ValueError("Not enough info to know which DL coin to send")
         else:
             if len(coins) != 1:
                 raise ValueError("The wallet can only send one DL coin at a time")
```

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/data_store.py` & `chia-blockchain-2.0.0b3/chia/data_layer/data_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/dl_wallet_store.py` & `chia-blockchain-2.0.0b3/chia/data_layer/dl_wallet_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/download_data.py` & `chia-blockchain-2.0.0b3/chia/data_layer/download_data.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/s3_plugin_config.yml` & `chia-blockchain-2.0.0b3/chia/data_layer/s3_plugin_config.yml`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/s3_plugin_service.py` & `chia-blockchain-2.0.0b3/chia/data_layer/s3_plugin_service.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/data_layer/util/benchmark.py` & `chia-blockchain-2.0.0b3/chia/data_layer/util/benchmark.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/farmer/farmer.py` & `chia-blockchain-2.0.0b3/chia/farmer/farmer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/farmer/farmer_api.py` & `chia-blockchain-2.0.0b3/chia/farmer/farmer_api.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 from __future__ import annotations
 
 import json
+import logging
 import time
 from typing import Any, Dict, List, Optional, Tuple
 
 import aiohttp
 from blspy import AugSchemeMPL, G2Element, PrivateKey
 
 from chia import __version__
@@ -30,16 +31,18 @@
 from chia.server.server import ssl_context_for_root
 from chia.server.ws_connection import WSChiaConnection
 from chia.ssl.create_ssl import get_mozilla_ca_crt
 from chia.types.blockchain_format.pool_target import PoolTarget
 from chia.types.blockchain_format.proof_of_space import (
     generate_plot_public_key,
     generate_taproot_sk,
+    get_plot_id,
     verify_and_get_quality_string,
 )
+from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.api_decorators import api_request
 from chia.util.ints import uint32, uint64
 
 
 def strip_old_entries(pairs: List[Tuple[float, Any]], before: float) -> List[Tuple[float, Any]]:
     for index, [timestamp, points] in enumerate(pairs):
         if timestamp >= before:
@@ -47,21 +50,28 @@
                 return pairs
             if index > 0:
                 return pairs[index:]
     return []
 
 
 class FarmerAPI:
+    log: logging.Logger
     farmer: Farmer
 
-    def __init__(self, farmer) -> None:
+    def __init__(self, farmer: Farmer) -> None:
+        self.log = logging.getLogger(__name__)
         self.farmer = farmer
 
+    def ready(self) -> bool:
+        return self.farmer.started
+
     @api_request(peer_required=True)
-    async def new_proof_of_space(self, new_proof_of_space: harvester_protocol.NewProofOfSpace, peer: WSChiaConnection):
+    async def new_proof_of_space(
+        self, new_proof_of_space: harvester_protocol.NewProofOfSpace, peer: WSChiaConnection
+    ) -> None:
         """
         This is a response from the harvester, for a NewChallenge. Here we check if the proof
         of space is sufficiently good, and if so, we ask for the whole proof.
         """
         if new_proof_of_space.sp_hash not in self.farmer.number_of_responses:
             self.farmer.number_of_responses[new_proof_of_space.sp_hash] = 0
             self.farmer.cache_add_time[new_proof_of_space.sp_hash] = uint64(int(time.time()))
@@ -88,15 +98,16 @@
             computed_quality_string = verify_and_get_quality_string(
                 new_proof_of_space.proof,
                 self.farmer.constants,
                 new_proof_of_space.challenge_hash,
                 new_proof_of_space.sp_hash,
             )
             if computed_quality_string is None:
-                self.farmer.log.error(f"Invalid proof of space {new_proof_of_space.proof}")
+                plotid: bytes32 = get_plot_id(new_proof_of_space.proof)
+                self.farmer.log.error(f"Invalid proof of space: {plotid.hex()} proof: {new_proof_of_space.proof}")
                 return None
 
             self.farmer.number_of_responses[new_proof_of_space.sp_hash] += 1
 
             required_iters: uint64 = calculate_iterations_quality(
                 self.farmer.constants.DIFFICULTY_CONSTANT_FACTOR,
                 computed_quality_string,
@@ -137,15 +148,15 @@
             p2_singleton_puzzle_hash = new_proof_of_space.proof.pool_contract_puzzle_hash
             if p2_singleton_puzzle_hash is not None:
                 # Otherwise, send the proof of space to the pool
                 # When we win a block, we also send the partial to the pool
                 if p2_singleton_puzzle_hash not in self.farmer.pool_state:
                     self.farmer.log.info(f"Did not find pool info for {p2_singleton_puzzle_hash}")
                     return
-                pool_state_dict: Dict = self.farmer.pool_state[p2_singleton_puzzle_hash]
+                pool_state_dict: Dict[str, Any] = self.farmer.pool_state[p2_singleton_puzzle_hash]
                 pool_url = pool_state_dict["pool_config"].pool_url
                 if pool_url == "":
                     return
 
                 if pool_state_dict["current_difficulty"] is None:
                     self.farmer.log.warning(
                         f"No pool specific difficulty has been set for {p2_singleton_puzzle_hash}, "
@@ -243,15 +254,15 @@
                         async with session.post(
                             f"{pool_url}/partial",
                             json=post_partial_request.to_json_dict(),
                             ssl=ssl_context_for_root(get_mozilla_ca_crt(), log=self.farmer.log),
                             headers={"User-Agent": f"Chia Blockchain v.{__version__}"},
                         ) as resp:
                             if resp.ok:
-                                pool_response: Dict = json.loads(await resp.text())
+                                pool_response: Dict[str, Any] = json.loads(await resp.text())
                                 self.farmer.log.info(f"Pool response: {pool_response}")
                                 if "error_code" in pool_response:
                                     self.farmer.log.error(
                                         f"Error in pooling: "
                                         f"{pool_response['error_code'], pool_response['error_message']}"
                                     )
                                     pool_state_dict["pool_errors_24h"].append(pool_response)
@@ -283,15 +294,15 @@
                         "points_acknowledged_24h": pool_state_dict["points_acknowledged_24h"],
                     },
                 )
 
                 return
 
     @api_request()
-    async def respond_signatures(self, response: harvester_protocol.RespondSignatures):
+    async def respond_signatures(self, response: harvester_protocol.RespondSignatures) -> None:
         """
         There are two cases: receiving signatures for sps, or receiving signatures for the block.
         """
         if response.sp_hash not in self.farmer.sps:
             self.farmer.log.warning(f"Do not have challenge hash {response.challenge_hash}")
             return None
         is_sp_signatures: bool = False
@@ -438,15 +449,15 @@
                     await self.farmer.server.send_to_all([msg], NodeType.FULL_NODE)
 
     """
     FARMER PROTOCOL (FARMER <-> FULL NODE)
     """
 
     @api_request()
-    async def new_signage_point(self, new_signage_point: farmer_protocol.NewSignagePoint):
+    async def new_signage_point(self, new_signage_point: farmer_protocol.NewSignagePoint) -> None:
         try:
             pool_difficulties: List[PoolDifficulty] = []
             for p2_singleton_puzzle_hash, pool_dict in self.farmer.pool_state.items():
                 if pool_dict["pool_config"].pool_url == "":
                     # Self pooling
                     continue
 
@@ -494,15 +505,15 @@
             return
 
         self.farmer.sps[new_signage_point.challenge_chain_sp].append(new_signage_point)
         self.farmer.cache_add_time[new_signage_point.challenge_chain_sp] = uint64(int(time.time()))
         self.farmer.state_changed("new_signage_point", {"sp_hash": new_signage_point.challenge_chain_sp})
 
     @api_request()
-    async def request_signed_values(self, full_node_request: farmer_protocol.RequestSignedValues):
+    async def request_signed_values(self, full_node_request: farmer_protocol.RequestSignedValues) -> None:
         if full_node_request.quality_string not in self.farmer.quality_str_to_identifiers:
             self.farmer.log.error(f"Do not have quality string {full_node_request.quality_string}")
             return None
 
         (plot_identifier, challenge_hash, sp_hash, node_id) = self.farmer.quality_str_to_identifiers[
             full_node_request.quality_string
         ]
@@ -513,15 +524,15 @@
             [full_node_request.foliage_block_data_hash, full_node_request.foliage_transaction_block_hash],
         )
 
         msg = make_msg(ProtocolMessageTypes.request_signatures, request)
         await self.farmer.server.send_to_specific([msg], node_id)
 
     @api_request()
-    async def farming_info(self, request: farmer_protocol.FarmingInfo):
+    async def farming_info(self, request: farmer_protocol.FarmingInfo) -> None:
         self.farmer.state_changed(
             "new_farming_info",
             {
                 "farming_info": {
                     "challenge_hash": request.challenge_hash,
                     "signage_point": request.sp_hash,
                     "passed_filter": request.passed,
@@ -529,37 +540,37 @@
                     "total_plots": request.total_plots,
                     "timestamp": request.timestamp,
                 }
             },
         )
 
     @api_request(peer_required=True)
-    async def respond_plots(self, _: harvester_protocol.RespondPlots, peer: WSChiaConnection):
+    async def respond_plots(self, _: harvester_protocol.RespondPlots, peer: WSChiaConnection) -> None:
         self.farmer.log.warning(f"Respond plots came too late from: {peer.get_peer_logging()}")
 
     @api_request(peer_required=True)
-    async def plot_sync_start(self, message: PlotSyncStart, peer: WSChiaConnection):
+    async def plot_sync_start(self, message: PlotSyncStart, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].sync_started(message)
 
     @api_request(peer_required=True)
-    async def plot_sync_loaded(self, message: PlotSyncPlotList, peer: WSChiaConnection):
+    async def plot_sync_loaded(self, message: PlotSyncPlotList, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].process_loaded(message)
 
     @api_request(peer_required=True)
-    async def plot_sync_removed(self, message: PlotSyncPathList, peer: WSChiaConnection):
+    async def plot_sync_removed(self, message: PlotSyncPathList, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].process_removed(message)
 
     @api_request(peer_required=True)
-    async def plot_sync_invalid(self, message: PlotSyncPathList, peer: WSChiaConnection):
+    async def plot_sync_invalid(self, message: PlotSyncPathList, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].process_invalid(message)
 
     @api_request(peer_required=True)
-    async def plot_sync_keys_missing(self, message: PlotSyncPathList, peer: WSChiaConnection):
+    async def plot_sync_keys_missing(self, message: PlotSyncPathList, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].process_keys_missing(message)
 
     @api_request(peer_required=True)
-    async def plot_sync_duplicates(self, message: PlotSyncPathList, peer: WSChiaConnection):
+    async def plot_sync_duplicates(self, message: PlotSyncPathList, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].process_duplicates(message)
 
     @api_request(peer_required=True)
-    async def plot_sync_done(self, message: PlotSyncDone, peer: WSChiaConnection):
+    async def plot_sync_done(self, message: PlotSyncDone, peer: WSChiaConnection) -> None:
         await self.farmer.plot_sync_receivers[peer.peer_node_id].sync_done(message)
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/bitcoin_fee_estimator.py` & `chia-blockchain-2.0.0b3/chia/full_node/bitcoin_fee_estimator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/block_height_map.py` & `chia-blockchain-2.0.0b3/chia/full_node/block_height_map.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/block_store.py` & `chia-blockchain-2.0.0b3/chia/full_node/block_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/bundle_tools.py` & `chia-blockchain-2.0.0b3/chia/full_node/bundle_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/coin_store.py` & `chia-blockchain-2.0.0b3/chia/full_node/coin_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -9,18 +9,18 @@
 import typing_extensions
 from aiosqlite import Cursor
 
 from chia.protocols.wallet_protocol import CoinState
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
-from chia.util.chunks import chunks
 from chia.util.db_wrapper import SQLITE_MAX_VARIABLE_NUMBER, DBWrapper2
 from chia.util.ints import uint32, uint64
 from chia.util.lru_cache import LRUCache
+from chia.util.misc import to_batches
 
 log = logging.getLogger(__name__)
 
 
 @typing_extensions.final
 @dataclasses.dataclass
 class CoinStore:
@@ -181,20 +181,20 @@
         if len(names) == 0:
             return []
 
         coins: List[CoinRecord] = []
 
         async with self.db_wrapper.reader_no_transaction() as conn:
             cursors: List[Cursor] = []
-            for names_chunk in chunks(names, SQLITE_MAX_VARIABLE_NUMBER):
+            for batch in to_batches(names, SQLITE_MAX_VARIABLE_NUMBER):
                 names_db: Tuple[Any, ...]
                 if self.db_wrapper.db_version == 2:
-                    names_db = tuple(names_chunk)
+                    names_db = tuple(batch.entries)
                 else:
-                    names_db = tuple(n.hex() for n in names_chunk)
+                    names_db = tuple(n.hex() for n in batch.entries)
                 cursors.append(
                     await conn.execute(
                         f"SELECT confirmed_index, spent_index, coinbase, puzzle_hash, "
                         f"coin_parent, amount, timestamp FROM coin_record "
                         f'WHERE coin_name in ({",".join(["?"] * len(names_db))}) ',
                         names_db,
                     )
@@ -357,112 +357,118 @@
         if row[1] != 0:
             spent_h = row[1]
         return CoinState(coin, spent_h, row[0])
 
     async def get_coin_states_by_puzzle_hashes(
         self,
         include_spent_coins: bool,
-        puzzle_hashes: List[bytes32],
+        puzzle_hashes: Set[bytes32],
         min_height: uint32 = uint32(0),
         *,
         max_items: int = 50000,
-    ) -> List[CoinState]:
+    ) -> Set[CoinState]:
         if len(puzzle_hashes) == 0:
-            return []
+            return set()
 
         coins: Set[CoinState] = set()
         async with self.db_wrapper.reader_no_transaction() as conn:
-            for puzzles in chunks(puzzle_hashes, SQLITE_MAX_VARIABLE_NUMBER):
+            for batch in to_batches(puzzle_hashes, SQLITE_MAX_VARIABLE_NUMBER):
                 puzzle_hashes_db: Tuple[Any, ...]
                 if self.db_wrapper.db_version == 2:
-                    puzzle_hashes_db = tuple(puzzles)
+                    puzzle_hashes_db = tuple(batch.entries)
                 else:
-                    puzzle_hashes_db = tuple([ph.hex() for ph in puzzles])
+                    puzzle_hashes_db = tuple([ph.hex() for ph in batch.entries])
                 async with conn.execute(
                     f"SELECT confirmed_index, spent_index, coinbase, puzzle_hash, "
                     f"coin_parent, amount, timestamp FROM coin_record INDEXED BY coin_puzzle_hash "
-                    f'WHERE puzzle_hash in ({"?," * (len(puzzles) - 1)}?) '
+                    f'WHERE puzzle_hash in ({"?," * (len(batch.entries) - 1)}?) '
                     f"AND (confirmed_index>=? OR spent_index>=?)"
                     f"{'' if include_spent_coins else 'AND spent_index=0'}"
                     " LIMIT ?",
                     puzzle_hashes_db + (min_height, min_height, max_items - len(coins)),
                 ) as cursor:
                     row: sqlite3.Row
                     for row in await cursor.fetchall():
                         coins.add(self.row_to_coin_state(row))
 
                 if len(coins) >= max_items:
                     break
 
-        return list(coins)
+        return coins
 
     async def get_coin_records_by_parent_ids(
         self,
         include_spent_coins: bool,
         parent_ids: List[bytes32],
         start_height: uint32 = uint32(0),
         end_height: uint32 = uint32((2**32) - 1),
     ) -> List[CoinRecord]:
         if len(parent_ids) == 0:
             return []
 
         coins = set()
         async with self.db_wrapper.reader_no_transaction() as conn:
-            for ids in chunks(parent_ids, SQLITE_MAX_VARIABLE_NUMBER):
+            for batch in to_batches(parent_ids, SQLITE_MAX_VARIABLE_NUMBER):
                 parent_ids_db: Tuple[Any, ...]
                 if self.db_wrapper.db_version == 2:
-                    parent_ids_db = tuple(ids)
+                    parent_ids_db = tuple(batch.entries)
                 else:
-                    parent_ids_db = tuple([pid.hex() for pid in ids])
+                    parent_ids_db = tuple([pid.hex() for pid in batch.entries])
                 async with conn.execute(
-                    f"SELECT confirmed_index, spent_index, coinbase, puzzle_hash, "
-                    f'coin_parent, amount, timestamp FROM coin_record WHERE coin_parent in ({"?," * (len(ids) - 1)}?) '
+                    f"SELECT confirmed_index, spent_index, coinbase, puzzle_hash, coin_parent, amount, timestamp "
+                    f'FROM coin_record WHERE coin_parent in ({"?," * (len(batch.entries) - 1)}?) '
                     f"AND confirmed_index>=? AND confirmed_index<? "
                     f"{'' if include_spent_coins else 'AND spent_index=0'}",
                     parent_ids_db + (start_height, end_height),
                 ) as cursor:
                     async for row in cursor:
                         coin = self.row_to_coin(row)
                         coins.add(CoinRecord(coin, row[0], row[1], row[2], row[6]))
 
         return list(coins)
 
     async def get_coin_states_by_ids(
         self,
         include_spent_coins: bool,
-        coin_ids: List[bytes32],
+        coin_ids: Set[bytes32],
         min_height: uint32 = uint32(0),
         *,
+        max_height: uint32 = uint32.MAXIMUM,
         max_items: int = 50000,
     ) -> List[CoinState]:
         if len(coin_ids) == 0:
             return []
 
-        coins: Set[CoinState] = set()
+        coins: List[CoinState] = []
         async with self.db_wrapper.reader_no_transaction() as conn:
-            for ids in chunks(coin_ids, SQLITE_MAX_VARIABLE_NUMBER):
+            for batch in to_batches(coin_ids, SQLITE_MAX_VARIABLE_NUMBER):
                 coin_ids_db: Tuple[Any, ...]
                 if self.db_wrapper.db_version == 2:
-                    coin_ids_db = tuple(ids)
+                    coin_ids_db = tuple(batch.entries)
                 else:
-                    coin_ids_db = tuple([pid.hex() for pid in ids])
+                    coin_ids_db = tuple([pid.hex() for pid in batch.entries])
+
+                max_height_sql = ""
+                if max_height != uint32.MAXIMUM:
+                    max_height_sql = f"AND confirmed_index<={max_height} AND spent_index<={max_height}"
+
                 async with conn.execute(
-                    f"SELECT confirmed_index, spent_index, coinbase, puzzle_hash, "
-                    f'coin_parent, amount, timestamp FROM coin_record WHERE coin_name in ({"?," * (len(ids) - 1)}?) '
-                    f"AND (confirmed_index>=? OR spent_index>=?)"
+                    f"SELECT confirmed_index, spent_index, coinbase, puzzle_hash, coin_parent, amount, timestamp "
+                    f'FROM coin_record WHERE coin_name in ({"?," * (len(batch.entries) - 1)}?) '
+                    f"AND (confirmed_index>=? OR spent_index>=?) {max_height_sql}"
                     f"{'' if include_spent_coins else 'AND spent_index=0'}"
                     " LIMIT ?",
                     coin_ids_db + (min_height, min_height, max_items - len(coins)),
                 ) as cursor:
                     for row in await cursor.fetchall():
-                        coins.add(self.row_to_coin_state(row))
+                        coins.append(self.row_to_coin_state(row))
                 if len(coins) >= max_items:
                     break
 
-        return list(coins)
+        return coins
 
     async def rollback_to_block(self, block_index: int) -> List[CoinRecord]:
         """
         Note that block_index can be negative, in which case everything is rolled back
         Returns the list of coin records that have been modified
         """
 
@@ -554,30 +560,30 @@
         assert len(coin_names) == 0 or index > 0
 
         if len(coin_names) == 0:
             return None
 
         async with self.db_wrapper.writer_maybe_transaction() as conn:
             rows_updated: int = 0
-            for coin_names_chunk in chunks(coin_names, SQLITE_MAX_VARIABLE_NUMBER):
-                name_params = ",".join(["?"] * len(coin_names_chunk))
+            for batch in to_batches(coin_names, SQLITE_MAX_VARIABLE_NUMBER):
+                name_params = ",".join(["?"] * len(batch.entries))
                 if self.db_wrapper.db_version == 2:
                     ret: Cursor = await conn.execute(
                         f"UPDATE coin_record INDEXED BY sqlite_autoindex_coin_record_1 "
                         f"SET spent_index={index} "
                         f"WHERE spent_index=0 "
                         f"AND coin_name IN ({name_params})",
-                        coin_names_chunk,
+                        batch.entries,
                     )
                 else:
                     ret = await conn.execute(
                         f"UPDATE coin_record INDEXED BY sqlite_autoindex_coin_record_1 "
                         f"SET spent=1, spent_index={index} "
                         f"WHERE spent_index=0 "
                         f"AND coin_name IN ({name_params})",
-                        [name.hex() for name in coin_names_chunk],
+                        [name.hex() for name in batch.entries],
                     )
                 rows_updated += ret.rowcount
             if rows_updated != len(coin_names):
                 raise ValueError(
                     f"Invalid operation to set spent, total updates {rows_updated} expected {len(coin_names)}"
                 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimate.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimate.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimate_store.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimate_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimation.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimator.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimator_constants.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimator_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimator_example.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimator_example.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_estimator_interface.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_estimator_interface.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_history.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_history.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/fee_tracker.py` & `chia-blockchain-2.0.0b3/chia/full_node/fee_tracker.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/full_node.py` & `chia-blockchain-2.0.0b3/chia/full_node/full_node.py`

 * *Files 2% similar despite different names*

```diff
@@ -13,30 +13,29 @@
 from pathlib import Path
 from typing import Any, Awaitable, Callable, Dict, List, Optional, Set, Tuple, Union
 
 from blspy import AugSchemeMPL
 
 from chia.consensus.block_creation import unfinished_block_to_full_block
 from chia.consensus.block_record import BlockRecord
-from chia.consensus.blockchain import AddBlockResult, Blockchain, StateChangeSummary
+from chia.consensus.blockchain import AddBlockResult, Blockchain, BlockchainMutexPriority, StateChangeSummary
 from chia.consensus.blockchain_interface import BlockchainInterface
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.cost_calculator import NPCResult
 from chia.consensus.difficulty_adjustment import get_next_sub_slot_iters_and_difficulty
 from chia.consensus.make_sub_epoch_summary import next_sub_epoch_summary
 from chia.consensus.multiprocess_validation import PreValidationResult
 from chia.consensus.pot_iterations import calculate_sp_iters
 from chia.full_node.block_store import BlockStore
 from chia.full_node.bundle_tools import detect_potential_template_generator
 from chia.full_node.coin_store import CoinStore
 from chia.full_node.full_node_api import FullNodeAPI
 from chia.full_node.full_node_store import FullNodeStore, FullNodeStorePeakResult
 from chia.full_node.hint_management import get_hints_and_subscription_coin_ids
 from chia.full_node.hint_store import HintStore
-from chia.full_node.lock_queue import LockClient, LockQueue
 from chia.full_node.mempool_manager import MempoolManager
 from chia.full_node.signage_point import SignagePoint
 from chia.full_node.subscriptions import PeerSubscriptions
 from chia.full_node.sync_store import SyncStore
 from chia.full_node.tx_processing_queue import TransactionQueue
 from chia.full_node.weight_proof import WeightProofHandler
 from chia.protocols import farmer_protocol, full_node_protocol, timelord_protocol, wallet_protocol
@@ -122,17 +121,14 @@
     _block_store: Optional[BlockStore]
     _coin_store: Optional[CoinStore]
     _mempool_manager: Optional[MempoolManager]
     _init_weight_proof: Optional[asyncio.Task[None]]
     _blockchain: Optional[Blockchain]
     _timelord_lock: Optional[asyncio.Lock]
     weight_proof_handler: Optional[WeightProofHandler]
-    _blockchain_lock_queue: Optional[LockQueue]
-    _maybe_blockchain_lock_high_priority: Optional[LockClient]
-    _maybe_blockchain_lock_low_priority: Optional[LockClient]
 
     @property
     def server(self) -> ChiaServer:
         # This is a stop gap until the class usage is refactored such the values of
         # integral attributes are known at creation of the instance.
         if self._server is None:
             raise RuntimeError("server not assigned")
@@ -187,34 +183,21 @@
         self._block_store = None
         self._coin_store = None
         self._mempool_manager = None
         self._init_weight_proof = None
         self._blockchain = None
         self._timelord_lock = None
         self.weight_proof_handler = None
-        self._blockchain_lock_queue = None
-        self._maybe_blockchain_lock_high_priority = None
-        self._maybe_blockchain_lock_low_priority = None
 
     @property
     def block_store(self) -> BlockStore:
         assert self._block_store is not None
         return self._block_store
 
     @property
-    def _blockchain_lock_high_priority(self) -> LockClient:
-        assert self._maybe_blockchain_lock_high_priority is not None
-        return self._maybe_blockchain_lock_high_priority
-
-    @property
-    def _blockchain_lock_low_priority(self) -> LockClient:
-        assert self._maybe_blockchain_lock_low_priority is not None
-        return self._maybe_blockchain_lock_low_priority
-
-    @property
     def timelord_lock(self) -> asyncio.Lock:
         assert self._timelord_lock is not None
         return self._timelord_lock
 
     @property
     def mempool_manager(self) -> MempoolManager:
         assert self._mempool_manager is not None
@@ -371,21 +354,14 @@
         self._mempool_manager = MempoolManager(
             get_coin_record=self.coin_store.get_coin_record,
             consensus_constants=self.constants,
             multiprocessing_context=self.multiprocessing_context,
             single_threaded=single_threaded,
         )
 
-        # Blocks are validated under high priority, and transactions under low priority. This guarantees blocks will
-        # be validated first.
-        blockchain_lock_queue = LockQueue(self.blockchain.lock)
-        self._blockchain_lock_queue = blockchain_lock_queue
-        self._maybe_blockchain_lock_high_priority = LockClient(0, blockchain_lock_queue)
-        self._maybe_blockchain_lock_low_priority = LockClient(1, blockchain_lock_queue)
-
         # Transactions go into this queue from the server, and get sent to respond_transaction
         self._transaction_queue = TransactionQueue(1000, self.log)
         self._transaction_queue_task: asyncio.Task[None] = asyncio.create_task(self._handle_transactions())
         self.transaction_responses = []
 
         self._init_weight_proof = asyncio.create_task(self.initialize_weight_proof())
 
@@ -408,15 +384,15 @@
                 raise RuntimeError("corrupt blockchain DB")
         else:
             self.log.info(
                 f"Blockchain initialized to peak {peak.header_hash} height"
                 f" {peak.height}, "
                 f"time taken: {int(time_taken)}s"
             )
-            async with self._blockchain_lock_high_priority:
+            async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
                 pending_tx = await self.mempool_manager.new_peak(peak, None)
             assert len(pending_tx) == 0  # no pending transactions when starting up
 
             full_peak: Optional[FullBlock] = await self.blockchain.get_full_peak()
             assert full_peak is not None
             state_change_summary = StateChangeSummary(peak, uint32(max(peak.height - 1, 0)), [], [], [])
             ppp_result: PeakPostProcessingResult = await self.peak_post_processing(
@@ -572,15 +548,15 @@
         try:
             for height in range(start_height, target_height, batch_size):
                 end_height = min(target_height, height + batch_size)
                 request = RequestBlocks(uint32(height), uint32(end_height), True)
                 response = await peer.call_api(FullNodeAPI.request_blocks, request)
                 if not response:
                     raise ValueError(f"Error short batch syncing, invalid/no response for {height}-{end_height}")
-                async with self._blockchain_lock_high_priority:
+                async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
                     state_change_summary: Optional[StateChangeSummary]
                     success, state_change_summary = await self.add_block_batch(response.blocks, peer, None)
                     if not success:
                         raise ValueError(f"Error short batch syncing, failed to validate blocks {height}-{end_height}")
                     if state_change_summary is not None:
                         try:
                             peak_fb: Optional[FullBlock] = await self.blockchain.get_full_peak()
@@ -891,26 +867,22 @@
 
         if self.full_node_peers is not None:
             asyncio.create_task(self.full_node_peers.close())
         if self.uncompact_task is not None:
             self.uncompact_task.cancel()
         if self._transaction_queue_task is not None:
             self._transaction_queue_task.cancel()
-        if self._blockchain_lock_queue is not None:
-            self._blockchain_lock_queue.close()
         cancel_task_safe(task=self._sync_task, log=self.log)
 
     async def _await_closed(self) -> None:
         for task_id, task in list(self.full_node_store.tx_fetch_tasks.items()):
             cancel_task_safe(task, self.log)
         await self.db_wrapper.close()
         if self._init_weight_proof is not None:
             await asyncio.wait([self._init_weight_proof])
-        if self._blockchain_lock_queue is not None:
-            await self._blockchain_lock_queue.await_closed()
         if self._sync_task is not None:
             with contextlib.suppress(asyncio.CancelledError):
                 await self._sync_task
 
     async def _sync(self) -> None:
         """
         Performs a full sync of the blockchain up to the peak.
@@ -1034,15 +1006,15 @@
                 await weight_proof_peer.close(600)
                 raise ValueError("Weight proof validation failed")
 
             self.log.info(f"Re-checked peers: total of {len(peers_with_peak)} peers with peak {target_peak.height}")
             self.sync_store.set_sync_mode(True)
             self._state_changed("sync_mode")
             # Ensures that the fork point does not change
-            async with self._blockchain_lock_high_priority:
+            async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
                 await self.blockchain.warmup(fork_point)
                 await self.sync_from_fork_point(fork_point, target_peak.height, target_peak.header_hash, summaries)
         except asyncio.CancelledError:
             self.log.warning("Syncing failed, CancelledError")
         except Exception as e:
             tb = traceback.format_exc()
             self.log.error(f"Error with syncing: {type(e)}{tb}")
@@ -1074,20 +1046,18 @@
             try:
                 for start_height in range(fork_point_height, target_peak_sb_height, batch_size):
                     end_height = min(target_peak_sb_height, start_height + batch_size)
                     request = RequestBlocks(uint32(start_height), uint32(end_height), True)
                     fetched = False
                     for peer in random.sample(new_peers_with_peak, len(new_peers_with_peak)):
                         if peer.closed:
-                            peers_with_peak.remove(peer)
                             continue
                         response = await peer.call_api(FullNodeAPI.request_blocks, request, timeout=30)
                         if response is None:
                             await peer.close()
-                            peers_with_peak.remove(peer)
                         elif isinstance(response, RespondBlocks):
                             await batch_queue.put((peer, response.blocks))
                             fetched = True
                             break
                     if fetched is False:
                         self.log.error(f"failed fetching {start_height} to {end_height} from peers")
                         return
@@ -1112,16 +1082,14 @@
                 peer, blocks = res
                 start_height = blocks[0].height
                 end_height = blocks[-1].height
                 success, state_change_summary = await self.add_block_batch(
                     blocks, peer, None if advanced_peak else uint32(fork_point_height), summaries
                 )
                 if success is False:
-                    if peer in peers_with_peak:
-                        peers_with_peak.remove(peer)
                     await peer.close(600)
                     raise ValueError(f"Failed to validate block batch {start_height} to {end_height}")
                 self.log.info(f"Added blocks {start_height} to {end_height}")
                 peak: Optional[BlockRecord] = self.blockchain.get_peak()
                 if state_change_summary is not None:
                     advanced_peak = True
                     assert peak is not None
@@ -1301,15 +1269,15 @@
         self.log.info("long sync done")
         self.sync_store.set_long_sync(False)
         self.sync_store.set_sync_mode(False)
         self._state_changed("sync_mode")
         if self._server is None:
             return None
 
-        async with self._blockchain_lock_high_priority:
+        async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             await self.sync_store.clear_sync_info()
 
             peak: Optional[BlockRecord] = self.blockchain.get_peak()
             peak_fb: Optional[FullBlock] = await self.blockchain.get_full_peak()
             if peak_fb is not None:
                 assert peak is not None
                 state_change_summary = StateChangeSummary(peak, uint32(max(peak.height - 1, 0)), [], [], [])
@@ -1399,15 +1367,15 @@
     async def peak_post_processing(
         self,
         block: FullBlock,
         state_change_summary: StateChangeSummary,
         peer: Optional[WSChiaConnection],
     ) -> PeakPostProcessingResult:
         """
-        Must be called under self.blockchain.lock. This updates the internal state of the full node with the
+        Must be called under self.blockchain.priority_mutex. This updates the internal state of the full node with the
         latest peak information. It also notifies peers about the new peak.
         """
 
         record = state_change_summary.peak
         difficulty = self.blockchain.get_next_difficulty(record.header_hash, False)
         sub_slot_iters = self.blockchain.get_next_slot_iters(record.header_hash, False)
 
@@ -1649,15 +1617,15 @@
                     f"Wrong info in the cache for bh {new_block.header_hash}, there might be multiple blocks from the "
                     f"same farmer with the same pospace."
                 )
                 # This recursion ends here, we cannot recurse again because transactions_generator is not None
                 return await self.add_block(new_block, peer)
         state_change_summary: Optional[StateChangeSummary] = None
         ppp_result: Optional[PeakPostProcessingResult] = None
-        async with self._blockchain_lock_high_priority:
+        async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             # After acquiring the lock, check again, because another asyncio thread might have added it
             if self.blockchain.contains_block(header_hash):
                 return None
             validation_start = time.time()
             # Tries to add the block to the blockchain, if we already validated transactions, don't do it again
             npc_results = {}
             if pre_validation_result is not None and pre_validation_result.npc_result is not None:
@@ -1849,15 +1817,15 @@
             return None
 
         # The clvm generator and aggregate signature are validated outside of the lock, to allow other blocks and
         # transactions to get validated
         npc_result: Optional[NPCResult] = None
         pre_validation_time = None
 
-        async with self._blockchain_lock_high_priority:
+        async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             start_header_time = time.time()
             _, header_error = await self.blockchain.validate_unfinished_block_header(block)
             if header_error is not None:
                 raise ConsensusError(header_error)
             validate_time = time.time() - start_header_time
             self.log.log(
                 logging.WARNING if validate_time > 2 else logging.DEBUG,
@@ -1879,25 +1847,21 @@
             height = uint32(0) if prev_b is None else uint32(prev_b.height + 1)
             npc_result = await self.blockchain.run_generator(block_bytes, block_generator, height)
             pre_validation_time = time.time() - pre_validation_start
 
             # blockchain.run_generator throws on errors, so npc_result is
             # guaranteed to represent a successful run
             assert npc_result.conds is not None
-            pairs_pks, pairs_msgs = pkm_pairs(
-                npc_result.conds,
-                self.constants.AGG_SIG_ME_ADDITIONAL_DATA,
-                soft_fork=height >= self.constants.SOFT_FORK_HEIGHT,
-            )
+            pairs_pks, pairs_msgs = pkm_pairs(npc_result.conds, self.constants.AGG_SIG_ME_ADDITIONAL_DATA)
             if not cached_bls.aggregate_verify(
                 pairs_pks, pairs_msgs, block.transactions_info.aggregated_signature, True
             ):
                 raise ConsensusError(Err.BAD_AGGREGATE_SIGNATURE)
 
-        async with self._blockchain_lock_high_priority:
+        async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             # TODO: pre-validate VDFs outside of lock
             validation_start = time.time()
             validate_result = await self.blockchain.validate_unfinished_block(block, npc_result)
             if validate_result.error is not None:
                 if validate_result.error == Err.COIN_AMOUNT_NEGATIVE.value:
                     # TODO: remove in the future, hotfix for 1.1.5 peers to not disconnect older peers
                     self.log.info(f"Consensus error {validate_result.error}, not disconnecting")
@@ -2207,29 +2171,30 @@
         if self.mempool_manager.get_spendbundle(spend_name) is not None:
             self.mempool_manager.remove_seen(spend_name)
             return MempoolInclusionStatus.SUCCESS, None
         if self.mempool_manager.seen(spend_name):
             return MempoolInclusionStatus.FAILED, Err.ALREADY_INCLUDING_TRANSACTION
         self.mempool_manager.add_and_maybe_pop_seen(spend_name)
         self.log.debug(f"Processing transaction: {spend_name}")
-        # Ignore if syncing
-        if self.sync_store.get_sync_mode():
+        # Ignore if syncing or if we have not yet received a block
+        # the mempool must have a peak to validate transactions
+        if self.sync_store.get_sync_mode() or self.mempool_manager.peak is None:
             status = MempoolInclusionStatus.FAILED
             error: Optional[Err] = Err.NO_TRANSACTIONS_WHILE_SYNCING
             self.mempool_manager.remove_seen(spend_name)
         else:
             try:
                 cost_result = await self.mempool_manager.pre_validate_spendbundle(transaction, tx_bytes, spend_name)
             except ValidationError as e:
                 self.mempool_manager.remove_seen(spend_name)
                 return MempoolInclusionStatus.FAILED, e.code
             except Exception:
                 self.mempool_manager.remove_seen(spend_name)
                 raise
-            async with self._blockchain_lock_low_priority:
+            async with self.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.low):
                 if self.mempool_manager.get_spendbundle(spend_name) is not None:
                     self.mempool_manager.remove_seen(spend_name)
                     return MempoolInclusionStatus.SUCCESS, None
                 if self.mempool_manager.peak is None:
                     return MempoolInclusionStatus.FAILED, Err.MEMPOOL_NOT_INITIALIZED
                 cost, status, error = await self.mempool_manager.add_spend_bundle(
                     transaction, cost_result, spend_name, self.mempool_manager.peak.height
@@ -2400,14 +2365,19 @@
                 self.log.error(
                     f"_replace_proof error while adding block {block.header_hash} height {block.height},"
                     f" rolling back: {e} {traceback.format_exc()}"
                 )
                 raise
 
     async def add_compact_proof_of_time(self, request: timelord_protocol.RespondCompactProofOfTime) -> None:
+        peak = self.blockchain.get_peak()
+        if peak is None or peak.height - request.height < 5:
+            self.log.info(f"Ignoring add_compact_proof_of_time, height {request.height} too recent.")
+            return None
+
         field_vdf = CompressibleVDFField(int(request.field_vdf))
         if not await self._can_accept_compact_proof(
             request.vdf_info, request.vdf_proof, request.height, request.header_hash, field_vdf
         ):
             return None
         async with self.blockchain.compact_proof_lock:
             replaced = await self._replace_proof(request.vdf_info, request.vdf_proof, request.header_hash, field_vdf)
@@ -2419,14 +2389,18 @@
             ProtocolMessageTypes.new_compact_vdf,
             full_node_protocol.NewCompactVDF(request.height, request.header_hash, request.field_vdf, request.vdf_info),
         )
         if self._server is not None:
             await self.server.send_to_all([msg], NodeType.FULL_NODE)
 
     async def new_compact_vdf(self, request: full_node_protocol.NewCompactVDF, peer: WSChiaConnection) -> None:
+        peak = self.blockchain.get_peak()
+        if peak is None or peak.height - request.height < 5:
+            self.log.info(f"Ignoring new_compact_vdf, height {request.height} too recent.")
+            return None
         is_fully_compactified = await self.block_store.is_fully_compactified(request.header_hash)
         if is_fully_compactified is None or is_fully_compactified:
             return None
         header_block = await self.blockchain.get_header_block_by_height(
             request.height, request.header_hash, tx_filter=False
         )
         if header_block is None:
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/full_node_api.py` & `chia-blockchain-2.0.0b3/chia/full_node/full_node_api.py`

 * *Files 1% similar despite different names*

```diff
@@ -12,14 +12,15 @@
 from typing import TYPE_CHECKING, Dict, List, Optional, Set, Tuple
 
 from blspy import AugSchemeMPL, G1Element, G2Element
 from chiabip158 import PyBIP158
 
 from chia.consensus.block_creation import create_unfinished_block
 from chia.consensus.block_record import BlockRecord
+from chia.consensus.blockchain import BlockchainMutexPriority
 from chia.consensus.pot_iterations import calculate_ip_iters, calculate_iterations_quality, calculate_sp_iters
 from chia.full_node.bundle_tools import best_solution_generator_from_template, simple_solution_generator
 from chia.full_node.fee_estimate import FeeEstimate, FeeEstimateGroup, fee_rate_v2_to_v1
 from chia.full_node.fee_estimator_interface import FeeEstimatorInterface
 from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions, get_puzzle_and_solution_for_coin
 from chia.full_node.signage_point import SignagePoint
 from chia.full_node.tx_processing_queue import TransactionQueueFull
@@ -64,32 +65,29 @@
 if TYPE_CHECKING:
     from chia.full_node.full_node import FullNode
 else:
     FullNode = object
 
 
 class FullNodeAPI:
+    log: logging.Logger
     full_node: FullNode
     executor: ThreadPoolExecutor
 
     def __init__(self, full_node: FullNode) -> None:
+        self.log = logging.getLogger(__name__)
         self.full_node = full_node
         self.executor = ThreadPoolExecutor(max_workers=1)
 
     @property
     def server(self) -> ChiaServer:
         assert self.full_node.server is not None
         return self.full_node.server
 
-    @property
-    def log(self) -> logging.Logger:
-        return self.full_node.log
-
-    @property
-    def api_ready(self) -> bool:
+    def ready(self) -> bool:
         return self.full_node.initialized
 
     @api_request(peer_required=True, reply_types=[ProtocolMessageTypes.respond_peers])
     async def request_peers(
         self, _request: full_node_protocol.RequestPeers, peer: WSChiaConnection
     ) -> Optional[Message]:
         if peer.peer_server_port is None:
@@ -735,15 +733,15 @@
             assert quality_string is not None and len(quality_string) == 32
 
             # Grab best transactions from Mempool for given tip target
             aggregate_signature: G2Element = G2Element()
             block_generator: Optional[BlockGenerator] = None
             additions: Optional[List[Coin]] = []
             removals: Optional[List[Coin]] = []
-            async with self.full_node._blockchain_lock_high_priority:
+            async with self.full_node.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
                 peak: Optional[BlockRecord] = self.full_node.blockchain.get_peak()
                 if peak is not None:
                     # Finds the last transaction block before this one
                     curr_l_tb: BlockRecord = peak
                     while not curr_l_tb.is_transaction_block:
                         curr_l_tb = self.full_node.blockchain.block_record(curr_l_tb.prev_hash)
                     try:
@@ -1298,25 +1296,21 @@
         block: Optional[BlockInfo] = await self.full_node.block_store.get_block_info(header_hash)
 
         if block is None or block.transactions_generator is None:
             return reject_msg
 
         block_generator: Optional[BlockGenerator] = await self.full_node.blockchain.get_block_generator(block)
         assert block_generator is not None
-        error, puzzle, solution = await asyncio.get_running_loop().run_in_executor(
-            self.executor, get_puzzle_and_solution_for_coin, block_generator, coin_record.coin
-        )
-
-        if error is not None:
+        try:
+            spend_info = await asyncio.get_running_loop().run_in_executor(
+                self.executor, get_puzzle_and_solution_for_coin, block_generator, coin_record.coin
+            )
+        except ValueError:
             return reject_msg
-
-        assert puzzle is not None
-        assert solution is not None
-
-        wrapper = PuzzleSolutionResponse(coin_name, height, puzzle, solution)
+        wrapper = PuzzleSolutionResponse(coin_name, height, spend_info.puzzle, spend_info.solution)
         response = wallet_protocol.RespondPuzzleSolution(wrapper)
         response_msg = make_msg(ProtocolMessageTypes.respond_puzzle_solution, response)
         return response_msg
 
     @api_request()
     async def request_block_headers(self, request: wallet_protocol.RequestBlockHeaders) -> Optional[Message]:
         """Returns header blocks by directly streaming bytes into Message
@@ -1397,19 +1391,38 @@
 
         msg = make_msg(
             ProtocolMessageTypes.respond_header_blocks,
             wallet_protocol.RespondHeaderBlocks(request.start_height, request.end_height, header_blocks),
         )
         return msg
 
-    @api_request()
-    async def respond_compact_proof_of_time(self, request: timelord_protocol.RespondCompactProofOfTime) -> None:
+    @api_request(bytes_required=True, execute_task=True)
+    async def respond_compact_proof_of_time(
+        self, request: timelord_protocol.RespondCompactProofOfTime, request_bytes: bytes = b""
+    ) -> None:
         if self.full_node.sync_store.get_sync_mode():
             return None
-        await self.full_node.add_compact_proof_of_time(request)
+        name = std_hash(request_bytes)
+        if name in self.full_node.compact_vdf_requests:
+            self.log.debug(f"Ignoring CompactProofOfTime: {request}, already requested")
+            return None
+
+        self.full_node.compact_vdf_requests.add(name)
+
+        # this semaphore will only allow a limited number of tasks call
+        # new_compact_vdf() at a time, since it can be expensive
+        try:
+            async with self.full_node.compact_vdf_sem.acquire():
+                try:
+                    await self.full_node.add_compact_proof_of_time(request)
+                finally:
+                    self.full_node.compact_vdf_requests.remove(name)
+        except LimitedSemaphoreFullError:
+            self.log.debug(f"Ignoring CompactProofOfTime: {request}, _waiters")
+
         return None
 
     @api_request(peer_required=True, bytes_required=True, execute_task=True)
     async def new_compact_vdf(
         self, request: full_node_protocol.NewCompactVDF, peer: WSChiaConnection, request_bytes: bytes = b""
     ) -> None:
         if self.full_node.sync_store.get_sync_mode():
@@ -1472,15 +1485,15 @@
 
         # Note that coin state updates may arrive out-of-order on the client side.
         # We add the subscription before we're done collecting all the coin
         # state that goes into the response. CoinState updates may be sent
         # before we send the response
 
         # Send all coins with requested puzzle hash that have been created after the specified height
-        states: List[CoinState] = await self.full_node.coin_store.get_coin_states_by_puzzle_hashes(
+        states: Set[CoinState] = await self.full_node.coin_store.get_coin_states_by_puzzle_hashes(
             include_spent_coins=True, puzzle_hashes=puzzle_hashes, min_height=request.min_height, max_items=max_items
         )
         max_items -= len(states)
 
         hint_coin_ids: Set[bytes32] = set()
         if max_items > 0:
             for puzzle_hash in puzzle_hashes:
@@ -1490,19 +1503,19 @@
                 if max_items <= 0:
                     break
 
         hint_states: List[CoinState] = []
         if len(hint_coin_ids) > 0:
             hint_states = await self.full_node.coin_store.get_coin_states_by_ids(
                 include_spent_coins=True,
-                coin_ids=list(hint_coin_ids),
+                coin_ids=hint_coin_ids,
                 min_height=request.min_height,
                 max_items=len(hint_coin_ids),
             )
-            states.extend(hint_states)
+            states.update(hint_states)
 
         end_time = time.monotonic()
 
         truncated = max_items <= 0
 
         if truncated or end_time - start_time > 5:
             self.log.log(
@@ -1513,15 +1526,15 @@
                 len(states),
                 len(puzzle_hashes),
                 len(hint_states),
                 "The response was truncated. " if truncated else "",
                 end_time - start_time,
             )
 
-        response = wallet_protocol.RespondToPhUpdates(request.puzzle_hashes, request.min_height, states)
+        response = wallet_protocol.RespondToPhUpdates(request.puzzle_hashes, request.min_height, list(states))
         msg = make_msg(ProtocolMessageTypes.respond_to_ph_update, response)
         return msg
 
     @api_request(peer_required=True)
     async def register_interest_in_coin(
         self, request: wallet_protocol.RegisterForCoinUpdates, peer: WSChiaConnection
     ) -> Message:
@@ -1534,15 +1547,15 @@
 
         # TODO: apparently we have tests that expect to receive a
         # RespondToCoinUpdates even when subscribing to the same coin multiple
         # times, so we can't optimize away such DB lookups (yet)
         self.full_node.subscriptions.add_coin_subscriptions(peer.peer_node_id, request.coin_ids, max_subscriptions)
 
         states: List[CoinState] = await self.full_node.coin_store.get_coin_states_by_ids(
-            include_spent_coins=True, coin_ids=request.coin_ids, min_height=request.min_height, max_items=max_items
+            include_spent_coins=True, coin_ids=set(request.coin_ids), min_height=request.min_height, max_items=max_items
         )
 
         response = wallet_protocol.RespondToCoinUpdates(request.coin_ids, request.min_height, states)
         msg = make_msg(ProtocolMessageTypes.respond_to_coin_update, response)
         return msg
 
     @api_request()
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/full_node_store.py` & `chia-blockchain-2.0.0b3/chia/full_node/full_node_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/generator.py` & `chia-blockchain-2.0.0b3/chia/full_node/generator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/hint_management.py` & `chia-blockchain-2.0.0b3/chia/full_node/hint_management.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/hint_store.py` & `chia-blockchain-2.0.0b3/chia/full_node/hint_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/mempool.py` & `chia-blockchain-2.0.0b3/chia/full_node/mempool.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,55 +1,48 @@
 from __future__ import annotations
 
 import logging
 import sqlite3
-from dataclasses import dataclass
 from datetime import datetime
 from enum import Enum
 from typing import Callable, Dict, Iterator, List, Optional, Tuple
 
+from blspy import AugSchemeMPL, G2Element
 from chia_rs import Coin
 
-from chia.consensus.cost_calculator import NPCResult
 from chia.consensus.default_constants import DEFAULT_CONSTANTS
 from chia.full_node.fee_estimation import FeeMempoolInfo, MempoolInfo, MempoolItemInfo
 from chia.full_node.fee_estimator_interface import FeeEstimatorInterface
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.clvm_cost import CLVMCost
+from chia.types.coin_spend import CoinSpend
+from chia.types.eligible_coin_spends import EligibleCoinSpends
+from chia.types.internal_mempool_item import InternalMempoolItem
 from chia.types.mempool_item import MempoolItem
 from chia.types.spend_bundle import SpendBundle
-from chia.util.chunks import chunks
 from chia.util.db_wrapper import SQLITE_MAX_VARIABLE_NUMBER
 from chia.util.errors import Err
 from chia.util.ints import uint32, uint64
+from chia.util.misc import to_batches
 
 log = logging.getLogger(__name__)
 
 # We impose a limit on the fee a single transaction can pay in order to have the
 # sum of all fees in the mempool be less than 2^63. That's the limit of sqlite's
 # integers, which we rely on for computing fee per cost as well as the fee sum
 MEMPOOL_ITEM_FEE_LIMIT = 2**50
 
-SQLITE_NO_GENERATED_COLUMNS: bool = sqlite3.sqlite_version_info < (3, 31, 0)
-
 
 class MempoolRemoveReason(Enum):
     CONFLICT = 1
     BLOCK_INCLUSION = 2
     POOL_FULL = 3
     EXPIRED = 4
 
 
-@dataclass(frozen=True)
-class InternalMempoolItem:
-    spend_bundle: SpendBundle
-    npc_result: NPCResult
-    height_added_to_mempool: uint32
-
-
 class Mempool:
     _db_conn: sqlite3.Connection
     # it's expensive to serialize and deserialize G2Element, so we keep those in
     # this separate dictionary
     _items: Dict[bytes32, InternalMempoolItem]
 
     # the most recent block height and timestamp that we know of
@@ -61,29 +54,28 @@
         self._items = {}
         self._block_height = uint32(0)
         self._timestamp = uint64(0)
 
         with self._db_conn:
             # name means SpendBundle hash
             # assert_height may be NIL
-            generated = ""
-            if not SQLITE_NO_GENERATED_COLUMNS:
-                generated = " GENERATED ALWAYS AS (CAST(fee AS REAL) / cost) VIRTUAL"
             # the seq field indicates the order of items being added to the
             # mempool. It's used as a tie-breaker for items with the same fee
             # rate
+            # TODO: In the future, for the "fee_per_cost" field, opt for
+            # "GENERATED ALWAYS AS (CAST(fee AS REAL) / cost) VIRTUAL"
             self._db_conn.execute(
-                f"""CREATE TABLE tx(
+                """CREATE TABLE tx(
                 name BLOB,
                 cost INT NOT NULL,
                 fee INT NOT NULL,
                 assert_height INT,
                 assert_before_height INT,
                 assert_before_seconds INT,
-                fee_per_cost REAL{generated},
+                fee_per_cost REAL,
                 seq INTEGER PRIMARY KEY AUTOINCREMENT)
                 """
             )
             self._db_conn.execute("CREATE INDEX name_idx ON tx(name)")
             self._db_conn.execute("CREATE INDEX fee_sum ON tx(fee)")
             self._db_conn.execute("CREATE INDEX cost_sum ON tx(cost)")
             self._db_conn.execute("CREATE INDEX feerate ON tx(fee_per_cost)")
@@ -122,14 +114,15 @@
             uint64(fee),
             item.npc_result,
             name,
             uint32(item.height_added_to_mempool),
             assert_height,
             assert_before_height,
             assert_before_seconds,
+            bundle_coin_spends=item.bundle_coin_spends,
         )
 
     def total_mempool_fees(self) -> int:
         with self._db_conn:
             cursor = self._db_conn.execute("SELECT SUM(fee) FROM tx")
             val = cursor.fetchone()[0]
             return uint64(0) if val is None else uint64(val)
@@ -178,19 +171,20 @@
                 "SELECT * FROM tx WHERE name in (SELECT tx FROM spends WHERE coin_id=?)",
                 (spent_coin_id,),
             )
             return [self._row_to_item(row) for row in cursor]
 
     def get_items_by_coin_ids(self, spent_coin_ids: List[bytes32]) -> List[MempoolItem]:
         items: List[MempoolItem] = []
-        for coin_ids in chunks(spent_coin_ids, SQLITE_MAX_VARIABLE_NUMBER):
-            args = ",".join(["?"] * len(coin_ids))
+        for batch in to_batches(spent_coin_ids, SQLITE_MAX_VARIABLE_NUMBER):
+            args = ",".join(["?"] * len(batch.entries))
             with self._db_conn:
                 cursor = self._db_conn.execute(
-                    f"SELECT * FROM tx WHERE name IN (SELECT tx FROM spends WHERE coin_id IN ({args}))", tuple(coin_ids)
+                    f"SELECT * FROM tx WHERE name IN (SELECT tx FROM spends WHERE coin_id IN ({args}))",
+                    tuple(batch.entries),
                 )
                 items.extend(self._row_to_item(row) for row in cursor)
         return items
 
     def get_min_fee_rate(self, cost: int) -> float:
         """
         Gets the minimum fpc rate that a transaction with specified cost will need in order to get included.
@@ -240,34 +234,34 @@
         Removes an item from the mempool.
         """
         if items == []:
             return
 
         removed_items: List[MempoolItemInfo] = []
         if reason != MempoolRemoveReason.BLOCK_INCLUSION:
-            for spend_bundle_ids in chunks(items, SQLITE_MAX_VARIABLE_NUMBER):
-                args = ",".join(["?"] * len(spend_bundle_ids))
+            for batch in to_batches(items, SQLITE_MAX_VARIABLE_NUMBER):
+                args = ",".join(["?"] * len(batch.entries))
                 with self._db_conn:
                     cursor = self._db_conn.execute(
-                        f"SELECT name, cost, fee FROM tx WHERE name in ({args})", spend_bundle_ids
+                        f"SELECT name, cost, fee FROM tx WHERE name in ({args})", batch.entries
                     )
                     for row in cursor:
                         name = bytes32(row[0])
                         internal_item = self._items[name]
                         item = MempoolItemInfo(int(row[1]), int(row[2]), internal_item.height_added_to_mempool)
                         removed_items.append(item)
 
         for name in items:
             self._items.pop(name)
 
-        for spend_bundle_ids in chunks(items, SQLITE_MAX_VARIABLE_NUMBER):
-            args = ",".join(["?"] * len(spend_bundle_ids))
+        for batch in to_batches(items, SQLITE_MAX_VARIABLE_NUMBER):
+            args = ",".join(["?"] * len(batch.entries))
             with self._db_conn:
-                self._db_conn.execute(f"DELETE FROM tx WHERE name in ({args})", spend_bundle_ids)
-                self._db_conn.execute(f"DELETE FROM spends WHERE tx in ({args})", spend_bundle_ids)
+                self._db_conn.execute(f"DELETE FROM tx WHERE name in ({args})", batch.entries)
+                self._db_conn.execute(f"DELETE FROM spends WHERE tx in ({args})", batch.entries)
 
         if reason != MempoolRemoveReason.BLOCK_INCLUSION:
             info = FeeMempoolInfo(
                 self.mempool_info, self.total_mempool_cost(), self.total_mempool_fees(), datetime.now()
             )
             for iteminfo in removed_items:
                 self.fee_estimator.remove_mempool_item(info, iteminfo)
@@ -333,49 +327,36 @@
                         WHERE total_cost <= ?)
                     """,
                     (self.mempool_info.max_size_in_cost - item.cost,),
                 )
                 to_remove = [bytes32(row[0]) for row in cursor]
                 self.remove_from_pool(to_remove, MempoolRemoveReason.POOL_FULL)
 
-            if SQLITE_NO_GENERATED_COLUMNS:
-                self._db_conn.execute(
-                    "INSERT INTO "
-                    "tx(name,cost,fee,assert_height,assert_before_height,assert_before_seconds,fee_per_cost) "
-                    "VALUES(?, ?, ?, ?, ?, ?, ?)",
-                    (
-                        item.name,
-                        item.cost,
-                        item.fee,
-                        item.assert_height,
-                        item.assert_before_height,
-                        item.assert_before_seconds,
-                        item.fee / item.cost,
-                    ),
-                )
-            else:
-                self._db_conn.execute(
-                    "INSERT INTO "
-                    "tx(name,cost,fee,assert_height,assert_before_height,assert_before_seconds) "
-                    "VALUES(?, ?, ?, ?, ?, ?)",
-                    (
-                        item.name,
-                        item.cost,
-                        item.fee,
-                        item.assert_height,
-                        item.assert_before_height,
-                        item.assert_before_seconds,
-                    ),
-                )
+            # TODO: In the future, for the "fee_per_cost" field, opt for
+            # "GENERATED ALWAYS AS (CAST(fee AS REAL) / cost) VIRTUAL"
+            self._db_conn.execute(
+                "INSERT INTO "
+                "tx(name,cost,fee,assert_height,assert_before_height,assert_before_seconds,fee_per_cost) "
+                "VALUES(?, ?, ?, ?, ?, ?, ?)",
+                (
+                    item.name,
+                    item.cost,
+                    item.fee,
+                    item.assert_height,
+                    item.assert_before_height,
+                    item.assert_before_seconds,
+                    item.fee / item.cost,
+                ),
+            )
 
             all_coin_spends = [(s.coin_id, item.name) for s in item.npc_result.conds.spends]
             self._db_conn.executemany("INSERT INTO spends VALUES(?, ?)", all_coin_spends)
 
             self._items[item.name] = InternalMempoolItem(
-                item.spend_bundle, item.npc_result, item.height_added_to_mempool
+                item.spend_bundle, item.npc_result, item.height_added_to_mempool, item.bundle_coin_spends
             )
 
         info = FeeMempoolInfo(self.mempool_info, self.total_mempool_cost(), self.total_mempool_fees(), datetime.now())
         self.fee_estimator.add_mempool_item(info, MempoolItemInfo(item.cost, item.fee, item.height_added_to_mempool))
         return None
 
     def at_full_capacity(self, cost: int) -> bool:
@@ -386,35 +367,54 @@
         return self.total_mempool_cost() + cost > self.mempool_info.max_size_in_cost
 
     def create_bundle_from_mempool_items(
         self, item_inclusion_filter: Callable[[bytes32], bool]
     ) -> Optional[Tuple[SpendBundle, List[Coin]]]:
         cost_sum = 0  # Checks that total cost does not exceed block maximum
         fee_sum = 0  # Checks that total fees don't exceed 64 bits
-        spend_bundles: List[SpendBundle] = []
+        processed_spend_bundles = 0
         additions: List[Coin] = []
+        # This contains a map of coin ID to a coin spend solution and its isolated cost
+        # We reconstruct it for every bundle we create from mempool items because we
+        # deduplicate on the first coin spend solution that comes with the highest
+        # fee rate item, and that can change across calls
+        eligible_coin_spends = EligibleCoinSpends()
+        coin_spends: List[CoinSpend] = []
+        sigs: List[G2Element] = []
         log.info(f"Starting to make block, max cost: {self.mempool_info.max_block_clvm_cost}")
-        for item in self.items_by_feerate():
-            if not item_inclusion_filter(item.name):
+        with self._db_conn:
+            cursor = self._db_conn.execute("SELECT name, fee FROM tx ORDER BY fee_per_cost DESC, seq ASC")
+        for row in cursor:
+            name = bytes32(row[0])
+            fee = int(row[1])
+            item = self._items[name]
+            if not item_inclusion_filter(name):
                 continue
-            log.info("Cumulative cost: %d, fee per cost: %0.4f", cost_sum, item.fee_per_cost)
-            if (
-                item.cost + cost_sum > self.mempool_info.max_block_clvm_cost
-                or item.fee + fee_sum > DEFAULT_CONSTANTS.MAX_COIN_AMOUNT
-            ):
-                break
-            spend_bundles.append(item.spend_bundle)
-            cost_sum += item.cost
-            fee_sum += item.fee
-            if item.npc_result.conds is not None:
-                for spend in item.npc_result.conds.spends:
-                    for puzzle_hash, amount, _ in spend.create_coin:
-                        coin = Coin(spend.coin_id, puzzle_hash, amount)
-                        additions.append(coin)
-        if len(spend_bundles) == 0:
+            try:
+                unique_coin_spends, cost_saving, unique_additions = eligible_coin_spends.get_deduplication_info(
+                    bundle_coin_spends=item.bundle_coin_spends, max_cost=item.npc_result.cost
+                )
+                item_cost = item.npc_result.cost - cost_saving
+                log.info("Cumulative cost: %d, fee per cost: %0.4f", cost_sum, fee / item_cost)
+                if (
+                    item_cost + cost_sum > self.mempool_info.max_block_clvm_cost
+                    or fee + fee_sum > DEFAULT_CONSTANTS.MAX_COIN_AMOUNT
+                ):
+                    break
+                coin_spends.extend(unique_coin_spends)
+                additions.extend(unique_additions)
+                sigs.append(item.spend_bundle.aggregated_signature)
+                cost_sum += item_cost
+                fee_sum += fee
+                processed_spend_bundles += 1
+            except Exception as e:
+                log.debug(f"Exception while checking a mempool item for deduplication: {e}")
+                continue
+        if processed_spend_bundles == 0:
             return None
         log.info(
             f"Cumulative cost of block (real cost should be less) {cost_sum}. Proportion "
             f"full: {cost_sum / self.mempool_info.max_block_clvm_cost}"
         )
-        agg = SpendBundle.aggregate(spend_bundles)
+        aggregated_signature = AugSchemeMPL.aggregate(sigs)
+        agg = SpendBundle(coin_spends, aggregated_signature)
         return agg, additions
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/mempool_check_conditions.py` & `chia-blockchain-2.0.0b3/chia/full_node/mempool_check_conditions.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 from __future__ import annotations
 
 import logging
-from typing import Dict, List, Optional, Tuple
+from typing import Dict, List, Optional
 
-from chia_rs import ENABLE_ASSERT_BEFORE, LIMIT_STACK, MEMPOOL_MODE, NO_RELATIVE_CONDITIONS_ON_EPHEMERAL
+from chia_rs import ENABLE_ASSERT_BEFORE, MEMPOOL_MODE, NO_RELATIVE_CONDITIONS_ON_EPHEMERAL
 from chia_rs import get_puzzle_and_solution_for_coin as get_puzzle_and_solution_for_coin_rust
 from chia_rs import run_block_generator, run_chia_program
 from clvm.casts import int_from_bytes
 
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.cost_calculator import NPCResult
 from chia.consensus.default_constants import DEFAULT_CONSTANTS
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
-from chia.types.coin_spend import CoinSpend
+from chia.types.coin_spend import CoinSpend, SpendInfo
 from chia.types.generator_types import BlockGenerator
 from chia.types.spend_bundle_conditions import SpendBundleConditions
 from chia.util.errors import Err
 from chia.util.ints import uint16, uint32, uint64
 from chia.wallet.puzzles.load_clvm import load_serialized_clvm_maybe_recompile
 
 DESERIALIZE_MOD = load_serialized_clvm_maybe_recompile(
@@ -34,20 +34,17 @@
     generator: BlockGenerator,
     max_cost: int,
     *,
     mempool_mode: bool,
     height: uint32,
     constants: ConsensusConstants = DEFAULT_CONSTANTS,
 ) -> NPCResult:
+    flags = 0
     if mempool_mode:
-        flags = MEMPOOL_MODE
-    elif height >= constants.SOFT_FORK_HEIGHT:
-        flags = LIMIT_STACK
-    else:
-        flags = 0
+        flags = flags | MEMPOOL_MODE
 
     if height >= constants.SOFT_FORK2_HEIGHT:
         flags = flags | ENABLE_ASSERT_BEFORE | NO_RELATIVE_CONDITIONS_ON_EPHEMERAL
 
     try:
         block_args = [bytes(gen) for gen in generator.generator_refs]
         err, result = run_block_generator(bytes(generator.program), block_args, max_cost, flags)
@@ -58,36 +55,34 @@
             assert result is not None
             return NPCResult(None, result, uint64(result.cost))
     except BaseException:
         log.exception("get_name_puzzle_condition failed")
         return NPCResult(uint16(Err.GENERATOR_RUNTIME_ERROR.value), None, uint64(0))
 
 
-def get_puzzle_and_solution_for_coin(
-    generator: BlockGenerator, coin: Coin
-) -> Tuple[Optional[Exception], Optional[SerializedProgram], Optional[SerializedProgram]]:
+def get_puzzle_and_solution_for_coin(generator: BlockGenerator, coin: Coin) -> SpendInfo:
     try:
         args = bytearray(b"\xff")
         args += bytes(DESERIALIZE_MOD)
         args += b"\xff"
         args += bytes(Program.to([bytes(a) for a in generator.generator_refs]))
         args += b"\x80\x80"
 
         puzzle, solution = get_puzzle_and_solution_for_coin_rust(
             bytes(generator.program),
             bytes(args),
             DEFAULT_CONSTANTS.MAX_BLOCK_COST_CLVM,
             coin.parent_coin_info,
             coin.amount,
             coin.puzzle_hash,
+            0,
         )
-
-        return None, SerializedProgram.from_bytes(puzzle), SerializedProgram.from_bytes(solution)
+        return SpendInfo(SerializedProgram.from_bytes(puzzle), SerializedProgram.from_bytes(solution))
     except Exception as e:
-        return e, None, None
+        raise ValueError(f"Failed to get puzzle and solution for coin {coin}, error: {e}") from e
 
 
 def get_spends_for_block(generator: BlockGenerator) -> List[CoinSpend]:
     args = bytearray(b"\xff")
     args += bytes(DESERIALIZE_MOD)
     args += b"\xff"
     args += bytes(Program.to([bytes(a) for a in generator.generator_refs]))
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/mempool_manager.py` & `chia-blockchain-2.0.0b3/chia/full_node/mempool_manager.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,14 +6,15 @@
 from concurrent.futures import Executor
 from concurrent.futures.process import ProcessPoolExecutor
 from dataclasses import dataclass
 from multiprocessing.context import BaseContext
 from typing import Awaitable, Callable, Dict, List, Optional, Set, Tuple, TypeVar
 
 from blspy import GTElement
+from chia_rs import ELIGIBLE_FOR_DEDUP
 from chiabip158 import PyBIP158
 
 from chia.consensus.block_record import BlockRecordProtocol
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.cost_calculator import NPCResult
 from chia.full_node.bitcoin_fee_estimator import create_bitcoin_fee_estimator
 from chia.full_node.bundle_tools import simple_solution_generator
@@ -24,15 +25,15 @@
 from chia.full_node.pending_tx_cache import ConflictTxCache, PendingTxCache
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32, bytes48
 from chia.types.clvm_cost import CLVMCost
 from chia.types.coin_record import CoinRecord
 from chia.types.fee_rate import FeeRate
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
-from chia.types.mempool_item import MempoolItem
+from chia.types.mempool_item import BundleCoinSpend, MempoolItem
 from chia.types.spend_bundle import SpendBundle
 from chia.types.spend_bundle_conditions import SpendBundleConditions
 from chia.util import cached_bls
 from chia.util.cached_bls import LOCAL_CACHE
 from chia.util.condition_tools import pkm_pairs
 from chia.util.db_wrapper import SQLITE_INT_MAX
 from chia.util.errors import Err, ValidationError
@@ -71,15 +72,15 @@
 
         if result.error is not None:
             return Err(result.error), b"", {}
 
         pks: List[bytes48] = []
         msgs: List[bytes] = []
         assert result.conds is not None
-        pks, msgs = pkm_pairs(result.conds, additional_data, soft_fork=True)
+        pks, msgs = pkm_pairs(result.conds, additional_data)
 
         # Verify aggregated signature
         cache: LRUCache[bytes32, GTElement] = LRUCache(10000)
         if not cached_bls.aggregate_verify(pks, msgs, bundle.aggregated_signature, True, cache):
             return Err.BAD_AGGREGATE_SIGNATURE, b"", {}
         new_cache_entries: Dict[bytes32, bytes] = {}
         for k, v in cache.cache.items():
@@ -387,23 +388,38 @@
         cost = npc_result.cost
         log.debug(f"Cost: {cost}")
 
         assert npc_result.conds is not None
         removal_names: Set[bytes32] = set()
         additions_dict: Dict[bytes32, Coin] = {}
         addition_amount: int = 0
+        eligibility_and_additions: Dict[bytes32, Tuple[bool, List[Coin]]] = {}
+        non_eligible_coin_ids: List[bytes32] = []
         for spend in npc_result.conds.spends:
             coin_id = bytes32(spend.coin_id)
             removal_names.add(coin_id)
+            spend_additions = []
             for puzzle_hash, amount, _ in spend.create_coin:
                 child_coin = Coin(coin_id, puzzle_hash, amount)
+                spend_additions.append(child_coin)
                 additions_dict[child_coin.name()] = child_coin
                 addition_amount = addition_amount + child_coin.amount
+            is_eligible = bool(spend.flags & ELIGIBLE_FOR_DEDUP)
+            if not is_eligible:
+                non_eligible_coin_ids.append(coin_id)
+            eligibility_and_additions[coin_id] = (is_eligible, spend_additions)
+        removal_names_from_coin_spends: Set[bytes32] = set()
+        bundle_coin_spends: Dict[bytes32, BundleCoinSpend] = {}
+        for coin_spend in new_spend.coin_spends:
+            coin_id = coin_spend.coin.name()
+            removal_names_from_coin_spends.add(coin_id)
+            eligible_for_dedup, spend_additions = eligibility_and_additions.get(coin_id, (False, []))
+            bundle_coin_spends[coin_id] = BundleCoinSpend(coin_spend, eligible_for_dedup, spend_additions)
 
-        if removal_names != set(coin_spend.coin.name() for coin_spend in new_spend.coin_spends):
+        if removal_names != removal_names_from_coin_spends:
             # If you reach here it's probably because your program reveal doesn't match the coin's puzzle hash
             return Err.INVALID_SPEND_BUNDLE, None, []
 
         removal_record_dict: Dict[bytes32, CoinRecord] = {}
         removal_amount: int = 0
         for name in removal_names:
             removal_record = await self.get_coin_record(name)
@@ -450,15 +466,15 @@
         if self.mempool.at_full_capacity(cost):
             if fees_per_cost < self.nonzero_fee_minimum_fpc:
                 return Err.INVALID_FEE_TOO_CLOSE_TO_ZERO, None, []
             if fees_per_cost <= self.mempool.get_min_fee_rate(cost):
                 return Err.INVALID_FEE_LOW_FEE, None, []
         # Check removals against UnspentDB + DiffStore + Mempool + SpendBundle
         # Use this information later when constructing a block
-        fail_reason, conflicts = self.check_removals(removal_record_dict)
+        fail_reason, conflicts = self.check_removals(non_eligible_coin_ids, removal_record_dict)
 
         # If we have a mempool conflict, continue, since we still want to keep around the TX in the pending pool.
         if fail_reason is not None and fail_reason is not Err.MEMPOOL_CONFLICT:
             return fail_reason, None, []
 
         # Verify conditions, create hash_key list for aggsig check
         for spend in npc_result.conds.spends:
@@ -489,14 +505,15 @@
             uint64(fees),
             npc_result,
             spend_name,
             first_added_height,
             timelocks.assert_height,
             timelocks.assert_before_height,
             timelocks.assert_before_seconds,
+            bundle_coin_spends,
         )
 
         if tl_error:
             if tl_error is Err.ASSERT_HEIGHT_ABSOLUTE_FAILED or tl_error is Err.ASSERT_HEIGHT_RELATIVE_FAILED:
                 return tl_error, potential, []  # MempoolInclusionStatus.PENDING
             else:
                 return tl_error, None, []  # MempoolInclusionStatus.FAILED
@@ -512,31 +529,31 @@
             logging.DEBUG if duration < 2 else logging.WARNING,
             f"add_spendbundle {spend_name} took {duration:0.2f} seconds. "
             f"Cost: {cost} ({round(100.0 * cost/self.constants.MAX_BLOCK_COST_CLVM, 3)}% of max block cost)",
         )
 
         return None, potential, [item.name for item in conflicts]
 
-    def check_removals(self, removals: Dict[bytes32, CoinRecord]) -> Tuple[Optional[Err], List[MempoolItem]]:
+    def check_removals(
+        self, non_eligible_coin_ids: List[bytes32], removals: Dict[bytes32, CoinRecord]
+    ) -> Tuple[Optional[Err], List[MempoolItem]]:
         """
         This function checks for double spends, unknown spends and conflicting transactions in mempool.
         Returns Error (if any), the set of existing MempoolItems with conflicting spends (if any).
         Note that additions are not checked for duplicates, because having duplicate additions requires also
         having duplicate removals.
         """
         assert self.peak is not None
-        removals_ids = []
+        # 1. Checks if it's been spent already
         for record in removals.values():
-            removal = record.coin
-            # 1. Checks if it's been spent already
             if record.spent:
                 return Err.DOUBLE_SPEND, []
-            removals_ids.append(removal.name())
-        # 2. Checks if there are mempool conflicts
-        conflicts = self.mempool.get_items_by_coin_ids(removals_ids)
+        # 2. Checks if there's a mempool conflict
+        # Only consider conflicts if the coin is not eligible for deduplication
+        conflicts = self.mempool.get_items_by_coin_ids(non_eligible_coin_ids)
         if len(conflicts) > 0:
             return Err.MEMPOOL_CONFLICT, conflicts
         # 5. If coins can be spent return list of unspents as we see them in local storage
         return None, []
 
     def get_spendbundle(self, bundle_hash: bytes32) -> Optional[SpendBundle]:
         """Returns a full SpendBundle if it's inside one the mempools"""
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/pending_tx_cache.py` & `chia-blockchain-2.0.0b3/chia/full_node/pending_tx_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/subscriptions.py` & `chia-blockchain-2.0.0b3/chia/full_node/subscriptions.py`

 * *Files 1% similar despite different names*

```diff
@@ -27,27 +27,27 @@
 
     def has_ph_subscription(self, ph: bytes32) -> bool:
         return ph in self._ph_subscriptions
 
     def has_coin_subscription(self, coin_id: bytes32) -> bool:
         return coin_id in self._coin_subscriptions
 
-    def add_ph_subscriptions(self, peer_id: bytes32, phs: List[bytes32], max_items: int) -> List[bytes32]:
+    def add_ph_subscriptions(self, peer_id: bytes32, phs: List[bytes32], max_items: int) -> Set[bytes32]:
         """
         returns the puzzle hashes that were actually subscribed to. These may be
         fewer than requested in case:
         * there are duplicate puzzle_hashes
         * some puzzle hashes are already subscribed to
         * the max_items limit is exceeded
         """
 
         puzzle_hash_peers = self._peer_puzzle_hash.setdefault(peer_id, set())
         existing_sub_count = self._peer_sub_counter.setdefault(peer_id, 0)
 
-        ret: List[bytes32] = []
+        ret: Set[bytes32] = set()
 
         # if we've reached the limit on number of subscriptions, just bail
         if existing_sub_count >= max_items:
             log.info(
                 "peer_id: %s reached max number of puzzle-hash subscriptions. "
                 "Not all its coin states will be reported",
                 peer_id,
@@ -59,15 +59,15 @@
         subscriptions_left = max_items - existing_sub_count
 
         for ph in phs:
             ph_sub = self._ph_subscriptions.setdefault(ph, set())
             if peer_id in ph_sub:
                 continue
 
-            ret.append(ph)
+            ret.add(ph)
             ph_sub.add(peer_id)
             puzzle_hash_peers.add(ph)
             self._peer_sub_counter[peer_id] += 1
             subscriptions_left -= 1
 
             if subscriptions_left == 0:
                 log.info(
```

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/sync_store.py` & `chia-blockchain-2.0.0b3/chia/full_node/sync_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/tx_processing_queue.py` & `chia-blockchain-2.0.0b3/chia/full_node/tx_processing_queue.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/full_node/weight_proof.py` & `chia-blockchain-2.0.0b3/chia/full_node/weight_proof.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,15 +5,15 @@
 import logging
 import math
 import pathlib
 import random
 import tempfile
 from concurrent.futures.process import ProcessPoolExecutor
 from multiprocessing.context import BaseContext
-from typing import IO, Awaitable, Dict, List, Optional, Tuple
+from typing import IO, Dict, List, Optional, Tuple
 
 from chia.consensus.block_header_validation import validate_finished_header_block
 from chia.consensus.block_record import BlockRecord
 from chia.consensus.blockchain_interface import BlockchainInterface
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.deficit import calculate_deficit
 from chia.consensus.full_block_to_block_record import header_block_to_sub_block_record
@@ -37,23 +37,23 @@
     SubEpochChallengeSegment,
     SubEpochData,
     SubEpochSegments,
     SubSlotData,
     WeightProof,
 )
 from chia.util.block_cache import BlockCache
-from chia.util.chunks import chunks
 from chia.util.hash import std_hash
 from chia.util.ints import uint8, uint32, uint64, uint128
+from chia.util.misc import to_batches
 from chia.util.setproctitle import getproctitle, setproctitle
 
 log = logging.getLogger(__name__)
 
 
-def _create_shutdown_file() -> IO:
+def _create_shutdown_file() -> IO[bytes]:
     return tempfile.NamedTemporaryFile(prefix="chia_full_node_weight_proof_handler_executor_shutdown_trigger")
 
 
 class WeightProofHandler:
     LAMBDA_L = 100
     C = 0.5
     MAX_SAMPLES = 20
@@ -145,15 +145,15 @@
             # sample sub epoch
             # next sub block
             ses_block = ses_blocks[sub_epoch_n]
             if ses_block is None or ses_block.sub_epoch_summary_included is None:
                 log.error("error while building proof")
                 return None
 
-            if _sample_sub_epoch(prev_ses_block.weight, ses_block.weight, weight_to_check):  # type: ignore
+            if _sample_sub_epoch(prev_ses_block.weight, ses_block.weight, weight_to_check):
                 sample_n += 1
                 segments = await self.blockchain.get_sub_epoch_challenge_segments(ses_block.header_hash)
                 if segments is None:
                     segments = await self.__create_sub_epoch_segments(ses_block, prev_ses_block, uint32(sub_epoch_n))
                     if segments is None:
                         log.error(
                             f"failed while building segments for sub epoch {sub_epoch_n}, ses height {ses_height} "
@@ -161,15 +161,15 @@
                         return None
                     await self.blockchain.persist_sub_epoch_challenge_segments(ses_block.header_hash, segments)
                 sub_epoch_segments.extend(segments)
             prev_ses_block = ses_block
         log.debug(f"sub_epochs: {len(sub_epoch_data)}")
         return WeightProof(sub_epoch_data, sub_epoch_segments, recent_chain)
 
-    def get_seed_for_proof(self, summary_heights: List[uint32], tip_height) -> bytes32:
+    def get_seed_for_proof(self, summary_heights: List[uint32], tip_height: uint32) -> bytes32:
         count = 0
         ses = None
         for sub_epoch_n, ses_height in enumerate(reversed(summary_heights)):
             if ses_height <= tip_height:
                 count += 1
             if count == 2:
                 ses = self.blockchain.get_ses(ses_height)
@@ -272,15 +272,17 @@
                 return None
             await self.__create_persist_segment(prev_ses_block, ses_block, ses_height, sub_epoch_n)
             prev_ses_block = ses_block
             await asyncio.sleep(2)
         log.debug("done checking segments")
         return None
 
-    async def __create_persist_segment(self, prev_ses_block, ses_block, ses_height, sub_epoch_n):
+    async def __create_persist_segment(
+        self, prev_ses_block: BlockRecord, ses_block: BlockRecord, ses_height: uint32, sub_epoch_n: int
+    ) -> None:
         segments = await self.blockchain.get_sub_epoch_challenge_segments(ses_block.header_hash)
         if segments is None:
             segments = await self.__create_sub_epoch_segments(ses_block, prev_ses_block, uint32(sub_epoch_n))
             if segments is None:
                 log.error(f"failed while building segments for sub epoch {sub_epoch_n}, ses height {ses_height} ")
                 return None
             await self.blockchain.persist_sub_epoch_challenge_segments(ses_block.header_hash, segments)
@@ -309,15 +311,15 @@
                 if seg is None:
                     log.error(f"failed creating segment {curr.header_hash} ")
                     return None
                 segments.append(seg)
                 idx += 1
                 first = False
             else:
-                height = height + uint32(1)  # type: ignore
+                height = uint32(height + 1)
             header_hash = self.blockchain.height_to_hash(height)
             assert header_hash is not None
             curr = header_blocks[header_hash]
             if curr is None:
                 return None
         log.debug(f"next sub epoch starts at {height}")
         return segments
@@ -463,15 +465,15 @@
                 curr_icc_info = sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf
             sub_slots_data.append(handle_finished_slots(sub_slot, curr_icc_info))
 
         return sub_slots_data, first_rc_end_of_slot_vdf
 
     def first_rc_end_of_slot_vdf(
         self,
-        header_block,
+        header_block: HeaderBlock,
         blocks: Dict[bytes32, BlockRecord],
         header_blocks: Dict[bytes32, HeaderBlock],
     ) -> Optional[VDFInfo]:
         curr = blocks[header_block.header_hash]
         while curr.height > 0 and not curr.sub_epoch_summary_included:
             curr = blocks[curr.prev_hash]
         return header_blocks[curr.header_hash].finished_sub_slots[-1].reward_chain.end_of_slot_vdf
@@ -507,15 +509,15 @@
             curr_header_hash = curr.header_hash
 
         if len(tmp_sub_slots_data) > 0:
             sub_slots_data.extend(tmp_sub_slots_data)
         log.debug(f"slot end vdf end height {curr.height} slots {len(sub_slots_data)} ")
         return sub_slots_data, curr.height
 
-    def handle_block_vdfs(self, curr: HeaderBlock, blocks: Dict[bytes32, BlockRecord]):
+    def handle_block_vdfs(self, curr: HeaderBlock, blocks: Dict[bytes32, BlockRecord]) -> SubSlotData:
         cc_sp_proof = None
         icc_ip_proof = None
         cc_sp_info = None
         icc_ip_info = None
         block_record = blocks[curr.header_hash]
         if curr.infused_challenge_chain_ip_proof is not None:
             assert curr.reward_chain_block.infused_challenge_chain_ip_vdf
@@ -569,19 +571,20 @@
         if summaries is None:
             log.warning("weight proof failed sub epoch data validation")
             return False, uint32(0)
         summary_bytes, wp_segment_bytes, wp_recent_chain_bytes = vars_to_bytes(summaries, weight_proof)
         log.info("validate sub epoch challenge segments")
         seed = summaries[-2].get_hash()
         rng = random.Random(seed)
+        assert sub_epoch_weight_list is not None
         if not validate_sub_epoch_sampling(rng, sub_epoch_weight_list, weight_proof):
             log.error("failed weight proof sub epoch sample validation")
             return False, uint32(0)
 
-        if not _validate_sub_epoch_segments(self.constants, rng, wp_segment_bytes, summary_bytes):
+        if _validate_sub_epoch_segments(self.constants, rng, wp_segment_bytes, summary_bytes) is None:
             return False, uint32(0)
         log.info("validate weight proof recent blocks")
         success, _ = validate_recent_blocks(self.constants, wp_recent_chain_bytes, summary_bytes)
         if not success:
             return False, uint32(0)
         fork_point, _ = self.get_fork_point(summaries)
         return True, fork_point
@@ -592,14 +595,15 @@
         assert len(weight_proof.sub_epochs) > 0
         if len(weight_proof.sub_epochs) == 0:
             return False, uint32(0)
         summaries, sub_epoch_weight_list = _validate_sub_epoch_summaries(self.constants, weight_proof)
         if summaries is None:
             log.warning("weight proof failed to validate sub epoch summaries")
             return False, uint32(0)
+        assert sub_epoch_weight_list is not None
         fork_height, _ = self.get_fork_point(summaries)
         return True, fork_height
 
     async def validate_weight_proof(self, weight_proof: WeightProof) -> Tuple[bool, uint32, List[SubEpochSummary]]:
         assert self.blockchain is not None
         if len(weight_proof.sub_epochs) == 0:
             return False, uint32(0), []
@@ -620,15 +624,15 @@
             mp_context=self.multiprocessing_context,
             initializer=setproctitle,
             initargs=(f"{getproctitle()}_worker",),
         ) as executor:
             # The shutdown file manager must be inside of the executor manager so that
             # we request the workers close prior to waiting for them to close.
             with _create_shutdown_file() as shutdown_file:
-                task: asyncio.Task = asyncio.create_task(
+                task = asyncio.create_task(
                     validate_weight_proof_inner(
                         self.constants,
                         executor,
                         shutdown_file.name,
                         self._num_processes,
                         weight_proof,
                         summaries,
@@ -682,15 +686,15 @@
     weight_to_check.sort()
     return weight_to_check
 
 
 def _sample_sub_epoch(
     start_of_epoch_weight: uint128,
     end_of_epoch_weight: uint128,
-    weight_to_check: List[uint128],
+    weight_to_check: Optional[List[uint128]],
 ) -> bool:
     """
     weight_to_check: List[uint128] is expected to be sorted
     """
     if weight_to_check is None:
         return True
     if weight_to_check[-1] < start_of_epoch_weight:
@@ -725,15 +729,15 @@
 
 
 async def _challenge_block_vdfs(
     constants: ConsensusConstants,
     header_block: HeaderBlock,
     block_rec: BlockRecord,
     sub_blocks: Dict[bytes32, BlockRecord],
-):
+) -> SubSlotData:
     (_, _, _, _, cc_vdf_iters, _) = get_signage_point_vdf_info(
         constants,
         header_block.finished_sub_slots,
         block_rec.overflow,
         None if header_block.height == 0 else sub_blocks[header_block.prev_header_hash],
         BlockCache(sub_blocks),
         block_rec.sp_total_iters(constants),
@@ -764,15 +768,15 @@
         header_block.reward_chain_block.challenge_chain_ip_vdf,
         header_block.reward_chain_block.infused_challenge_chain_ip_vdf,
         block_rec.total_iters,
     )
     return ssd
 
 
-def handle_finished_slots(end_of_slot: EndOfSubSlotBundle, icc_end_of_slot_info):
+def handle_finished_slots(end_of_slot: EndOfSubSlotBundle, icc_end_of_slot_info: Optional[VDFInfo]) -> SubSlotData:
     return SubSlotData(
         None,
         None,
         None,
         None,
         None,
         None,
@@ -789,15 +793,15 @@
         None,
     )
 
 
 def handle_end_of_slot(
     sub_slot: EndOfSubSlotBundle,
     eos_vdf_iters: uint64,
-):
+) -> SubSlotData:
     assert sub_slot.infused_challenge_chain
     assert sub_slot.proofs.infused_challenge_chain_slot_proof
     if sub_slot.proofs.infused_challenge_chain_slot_proof.normalized_to_identity:
         icc_info = sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf
     else:
         icc_info = VDFInfo(
             sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf.challenge,
@@ -827,35 +831,14 @@
         icc_info,
         None,
         None,
         None,
     )
 
 
-def compress_segments(full_segment_index, segments: List[SubEpochChallengeSegment]) -> List[SubEpochChallengeSegment]:
-    compressed_segments = []
-    compressed_segments.append(segments[0])
-    for idx, segment in enumerate(segments[1:]):
-        if idx != full_segment_index:
-            # remove all redundant values
-            segment = compress_segment(segment)
-        compressed_segments.append(segment)
-    return compressed_segments
-
-
-def compress_segment(segment: SubEpochChallengeSegment) -> SubEpochChallengeSegment:
-    # find challenge slot
-    comp_seg = SubEpochChallengeSegment(segment.sub_epoch_n, [], segment.rc_slot_end_info)
-    for slot in segment.sub_slots:
-        comp_seg.sub_slots.append(slot)
-        if slot.is_challenge():
-            break
-    return segment
-
-
 # wp validation methods
 def _validate_sub_epoch_summaries(
     constants: ConsensusConstants,
     weight_proof: WeightProof,
 ) -> Tuple[Optional[List[SubEpochSummary]], Optional[List[uint128]]]:
     last_ses_hash, last_ses_sub_height = _get_last_ses_hash(constants, weight_proof.recent_chain_data)
     if last_ses_hash is None:
@@ -906,31 +889,37 @@
 
         if idx < len(sub_epoch_data) - 1:
             delta = 0
             if idx > 0:
                 delta = sub_epoch_data[idx].num_blocks_overflow
             log.debug(f"sub epoch {idx} start weight is {total_weight+curr_difficulty} ")
             sub_epoch_weight_list.append(uint128(total_weight + curr_difficulty))
-            total_weight = total_weight + uint128(  # type: ignore
-                curr_difficulty * (sub_blocks_for_se + sub_epoch_data[idx + 1].num_blocks_overflow - delta)
+            total_weight = uint128(
+                total_weight
+                + curr_difficulty * (sub_blocks_for_se + sub_epoch_data[idx + 1].num_blocks_overflow - delta)
             )
 
         # if new epoch update diff and iters
         if data.new_difficulty is not None:
             curr_difficulty = data.new_difficulty
 
         # add to dict
         summaries.append(ses)
         ses_hash = std_hash(ses)
     # add last sub epoch weight
     sub_epoch_weight_list.append(uint128(total_weight + curr_difficulty))
     return summaries, total_weight, sub_epoch_weight_list
 
 
-def _validate_summaries_weight(constants: ConsensusConstants, sub_epoch_data_weight, summaries, weight_proof) -> bool:
+def _validate_summaries_weight(
+    constants: ConsensusConstants,
+    sub_epoch_data_weight: uint128,
+    summaries: List[SubEpochSummary],
+    weight_proof: WeightProof,
+) -> bool:
     num_over = summaries[-1].num_blocks_overflow
     ses_end_height = (len(summaries) - 1) * constants.SUB_EPOCH_BLOCKS + num_over - 1
     curr = None
     for block in weight_proof.recent_chain_data:
         if block.reward_chain_block.height == ses_end_height:
             curr = block
     if curr is None:
@@ -941,15 +930,15 @@
 
 def _validate_sub_epoch_segments(
     constants: ConsensusConstants,
     rng: random.Random,
     weight_proof_bytes: bytes,
     summaries_bytes: List[bytes],
     validate_from: int = 0,
-):
+) -> Optional[List[Tuple[VDFProof, ClassgroupElement, VDFInfo]]]:
     summaries = summaries_from_bytes(summaries_bytes)
     sub_epoch_segments: SubEpochSegments = SubEpochSegments.from_bytes(weight_proof_bytes)
     rc_sub_slot_hash = constants.GENESIS_CHALLENGE
     total_blocks, total_ip_iters = 0, 0
     total_slot_iters, total_slots = 0, 0
     total_ip_iters = 0
     prev_ses: Optional[SubEpochSummary] = None
@@ -964,34 +953,34 @@
         sampled_seg_index = rng.choice(range(len(segments)))
         if sub_epoch_n > 0:
             rc_sub_slot = __get_rc_sub_slot(constants, segments[0], summaries, curr_ssi)
             prev_ses = summaries[sub_epoch_n - 1]
             rc_sub_slot_hash = rc_sub_slot.get_hash()
         if not summaries[sub_epoch_n].reward_chain_hash == rc_sub_slot_hash:
             log.error(f"failed reward_chain_hash validation sub_epoch {sub_epoch_n}")
-            return False
+            return None
 
         # skip validation up to fork height
         if sub_epoch_n < validate_from:
             continue
 
         for idx, segment in enumerate(segments):
             valid_segment, ip_iters, slot_iters, slots, vdf_list = _validate_segment(
                 constants, segment, curr_ssi, prev_ssi, curr_difficulty, prev_ses, idx == 0, sampled_seg_index == idx
             )
             vdfs_to_validate.extend(vdf_list)
             if not valid_segment:
                 log.error(f"failed to validate sub_epoch {segment.sub_epoch_n} segment {idx} slots")
-                return False
+                return None
             prev_ses = None
             total_blocks += 1
             total_slot_iters += slot_iters
             total_slots += slots
             total_ip_iters += ip_iters
-    return True, vdfs_to_validate
+    return vdfs_to_validate
 
 
 def _validate_segment(
     constants: ConsensusConstants,
     segment: SubEpochChallengeSegment,
     curr_ssi: uint64,
     prev_ssi: uint64,
@@ -1156,47 +1145,54 @@
         if sub_slot_idx >= 2:
             if sub_slots[sub_slot_idx - 2].cc_slot_end_info is None:
                 for ssd_idx in reversed(range(0, sub_slot_idx - 1)):
                     ssd = sub_slots[ssd_idx]
                     if ssd.cc_slot_end_info is not None:
                         ssd = sub_slots[ssd_idx + 1]
                         break
+                    assert ssd.total_iters is not None
                     if not (ssd.total_iters > sp_total_iters):
                         break
                 if ssd and ssd.cc_ip_vdf_info is not None:
+                    assert ssd.total_iters is not None
                     if ssd.total_iters < sp_total_iters:
                         cc_input = ssd.cc_ip_vdf_info.output
         return cc_input
 
     elif not is_overflow and not new_sub_slot:
         for ssd_idx in reversed(range(0, sub_slot_idx)):
             ssd = sub_slots[ssd_idx]
             if ssd.cc_slot_end_info is not None:
                 ssd = sub_slots[ssd_idx + 1]
                 break
+            assert ssd.total_iters is not None
             if not (ssd.total_iters > sp_total_iters):
                 break
         assert ssd is not None
         if ssd.cc_ip_vdf_info is not None:
+            assert ssd.total_iters is not None
             if ssd.total_iters < sp_total_iters:
                 cc_input = ssd.cc_ip_vdf_info.output
         return cc_input
 
     elif not new_sub_slot and is_overflow:
         slots_seen = 0
         for ssd_idx in reversed(range(0, sub_slot_idx)):
             ssd = sub_slots[ssd_idx]
             if ssd.cc_slot_end_info is not None:
                 slots_seen += 1
                 if slots_seen == 2:
                     return ClassgroupElement.get_default_element()
-            if ssd.cc_slot_end_info is None and not (ssd.total_iters > sp_total_iters):
-                break
+            if ssd.cc_slot_end_info is None:
+                assert ssd.total_iters is not None
+                if not (ssd.total_iters > sp_total_iters):
+                    break
         assert ssd is not None
         if ssd.cc_ip_vdf_info is not None:
+            assert ssd.total_iters is not None
             if ssd.total_iters < sp_total_iters:
                 cc_input = ssd.cc_ip_vdf_info.output
     return cc_input
 
 
 def validate_recent_blocks(
     constants: ConsensusConstants,
@@ -1259,19 +1255,18 @@
                 )
                 if error is not None:
                     log.error(f"block {block.header_hash} failed validation {error}")
                     return False, []
                 assert caluclated_required_iters is not None
                 required_iters = caluclated_required_iters
             else:
-                required_iters = _validate_pospace_recent_chain(
-                    constants, block, challenge, diff, overflow, prev_challenge
-                )
-                if required_iters is None:
+                ret = _validate_pospace_recent_chain(constants, block, challenge, diff, overflow, prev_challenge)
+                if ret is None:
                     return False, []
+                required_iters = ret
 
         curr_block_ses = None if not ses else summaries[ses_idx - 1]
         block_record = header_block_to_sub_block_record(
             constants, required_iters, block, ssi, overflow, deficit, height, curr_block_ses
         )
         log.debug(f"add block {block_record.height} to tmp sub blocks")
         sub_blocks.add_block_record(block_record)
@@ -1294,15 +1289,15 @@
 def _validate_pospace_recent_chain(
     constants: ConsensusConstants,
     block: HeaderBlock,
     challenge: bytes32,
     diff: uint64,
     overflow: bool,
     prev_challenge: bytes32,
-):
+) -> Optional[uint64]:
     if block.reward_chain_block.challenge_chain_sp_vdf is None:
         # Edge case of first sp (start of slot), where sp_iters == 0
         cc_sp_hash: bytes32 = challenge
     else:
         cc_sp_hash = block.reward_chain_block.challenge_chain_sp_vdf.output.get_hash()
     assert cc_sp_hash is not None
     q_str = verify_and_get_quality_string(
@@ -1451,15 +1446,15 @@
         cc_sub_slot.get_hash(),
         icc_sub_slot_hash,
         constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK,
     )
     return rc_sub_slot
 
 
-def __get_cc_sub_slot(sub_slots: List[SubSlotData], idx, ses: Optional[SubEpochSummary]) -> ChallengeChainSubSlot:
+def __get_cc_sub_slot(sub_slots: List[SubSlotData], idx: int, ses: Optional[SubEpochSummary]) -> ChallengeChainSubSlot:
     sub_slot: Optional[SubSlotData] = None
     for i in reversed(range(0, idx)):
         sub_slot = sub_slots[i]
         if sub_slot.cc_slot_end_info is not None:
             break
 
     assert sub_slot is not None
@@ -1476,27 +1471,30 @@
         None if ses is None else ses.new_sub_slot_iters,
         None if ses is None else ses.new_difficulty,
     )
 
     return cc_sub_slot
 
 
-def _get_curr_diff_ssi(constants: ConsensusConstants, idx, summaries):
+def _get_curr_diff_ssi(
+    constants: ConsensusConstants, idx: int, summaries: List[SubEpochSummary]
+) -> Tuple[uint64, uint64]:
     curr_difficulty = constants.DIFFICULTY_STARTING
     curr_ssi = constants.SUB_SLOT_ITERS_STARTING
     for ses in reversed(summaries[0:idx]):
         if ses.new_sub_slot_iters is not None:
             curr_ssi = ses.new_sub_slot_iters
+            assert ses.new_difficulty is not None
             curr_difficulty = ses.new_difficulty
             break
 
     return curr_difficulty, curr_ssi
 
 
-def vars_to_bytes(summaries: List[SubEpochSummary], weight_proof: WeightProof):
+def vars_to_bytes(summaries: List[SubEpochSummary], weight_proof: WeightProof) -> Tuple[List[bytes], bytes, bytes]:
     wp_recent_chain_bytes = bytes(RecentChainData(weight_proof.recent_chain_data))
     wp_segment_bytes = bytes(SubEpochSegments(weight_proof.sub_epoch_segments))
     summary_bytes = []
     for summary in summaries:
         summary_bytes.append(bytes(summary))
     return summary_bytes, wp_segment_bytes, wp_recent_chain_bytes
 
@@ -1549,37 +1547,41 @@
         if curr_deficit >= 1 and not (overflow and curr_deficit == constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK):
             curr_deficit = uint8(curr_deficit - 1)
         return curr_deficit
 
     return calculate_deficit(constants, uint32(prev_block.height + 1), prev_block, overflow, num_finished_sub_slots)
 
 
-def get_sp_total_iters(constants: ConsensusConstants, is_overflow: bool, ssi: uint64, sub_slot_data: SubSlotData):
+def get_sp_total_iters(
+    constants: ConsensusConstants, is_overflow: bool, ssi: uint64, sub_slot_data: SubSlotData
+) -> int:
     assert sub_slot_data.cc_ip_vdf_info is not None
     assert sub_slot_data.total_iters is not None
     assert sub_slot_data.signage_point_index is not None
     sp_iters: uint64 = calculate_sp_iters(constants, ssi, sub_slot_data.signage_point_index)
     ip_iters: uint64 = sub_slot_data.cc_ip_vdf_info.number_of_iterations
     sp_sub_slot_total_iters = uint128(sub_slot_data.total_iters - ip_iters)
     if is_overflow:
         sp_sub_slot_total_iters = uint128(sp_sub_slot_total_iters - ssi)
     return sp_sub_slot_total_iters + sp_iters
 
 
-def blue_boxed_end_of_slot(sub_slot: EndOfSubSlotBundle):
+def blue_boxed_end_of_slot(sub_slot: EndOfSubSlotBundle) -> bool:
     if sub_slot.proofs.challenge_chain_slot_proof.normalized_to_identity:
         if sub_slot.proofs.infused_challenge_chain_slot_proof is not None:
             if sub_slot.proofs.infused_challenge_chain_slot_proof.normalized_to_identity:
                 return True
         else:
             return True
     return False
 
 
-def validate_sub_epoch_sampling(rng, sub_epoch_weight_list, weight_proof):
+def validate_sub_epoch_sampling(
+    rng: random.Random, sub_epoch_weight_list: List[uint128], weight_proof: WeightProof
+) -> bool:
     tip = weight_proof.recent_chain_data[-1]
     weight_to_check = _get_weights_for_sampling(rng, tip.weight, weight_proof.recent_chain_data)
     sampled_sub_epochs: Dict[int, bool] = {}
     for idx in range(1, len(sub_epoch_weight_list)):
         if _sample_sub_epoch(sub_epoch_weight_list[idx - 1], sub_epoch_weight_list[idx], weight_to_check):
             sampled_sub_epochs[idx - 1] = True
             if len(sampled_sub_epochs) == WeightProofHandler.MAX_SAMPLES:
@@ -1591,60 +1593,32 @@
                 del sampled_sub_epochs[sub_epoch_segment.sub_epoch_n]
         curr_sub_epoch_n = sub_epoch_segment.sub_epoch_n
     if len(sampled_sub_epochs) > 0:
         return False
     return True
 
 
-def map_segments_by_sub_epoch(sub_epoch_segments) -> Dict[int, List[SubEpochChallengeSegment]]:
+def map_segments_by_sub_epoch(
+    sub_epoch_segments: List[SubEpochChallengeSegment],
+) -> Dict[int, List[SubEpochChallengeSegment]]:
     segments: Dict[int, List[SubEpochChallengeSegment]] = {}
     curr_sub_epoch_n = -1
     for idx, segment in enumerate(sub_epoch_segments):
         if curr_sub_epoch_n < segment.sub_epoch_n:
             curr_sub_epoch_n = segment.sub_epoch_n
             segments[curr_sub_epoch_n] = []
         segments[curr_sub_epoch_n].append(segment)
     return segments
 
 
-def validate_total_iters(
-    segment: SubEpochChallengeSegment,
-    sub_slot_data_idx,
-    expected_sub_slot_iters: uint64,
-    finished_sub_slots_since_prev: int,
-    prev_b: SubSlotData,
-    prev_sub_slot_data_iters,
-    genesis,
-) -> bool:
-    sub_slot_data = segment.sub_slots[sub_slot_data_idx]
-    if genesis:
-        total_iters: uint128 = uint128(expected_sub_slot_iters * finished_sub_slots_since_prev)
-    elif segment.sub_slots[sub_slot_data_idx - 1].is_end_of_slot():
-        assert prev_b.total_iters
-        assert prev_b.cc_ip_vdf_info
-        total_iters = prev_b.total_iters
-        # Add the rest of the slot of prev_b
-        total_iters = uint128(total_iters + prev_sub_slot_data_iters - prev_b.cc_ip_vdf_info.number_of_iterations)
-        # Add other empty slots
-        total_iters = uint128(total_iters + (expected_sub_slot_iters * (finished_sub_slots_since_prev - 1)))
-    else:
-        # Slot iters is guaranteed to be the same for header_block and prev_b
-        # This takes the beginning of the slot, and adds ip_iters
-        assert prev_b.cc_ip_vdf_info
-        assert prev_b.total_iters
-        total_iters = uint128(prev_b.total_iters - prev_b.cc_ip_vdf_info.number_of_iterations)
-    total_iters = uint128(total_iters + sub_slot_data.cc_ip_vdf_info.number_of_iterations)
-    return total_iters == sub_slot_data.total_iters
-
-
 def _validate_vdf_batch(
     constants: ConsensusConstants,
     vdf_list: List[Tuple[bytes, bytes, bytes]],
     shutdown_file_path: Optional[pathlib.Path] = None,
-):
+) -> bool:
     for vdf_proof_bytes, class_group_bytes, info in vdf_list:
         vdf = VDFProof.from_bytes(vdf_proof_bytes)
         class_group = ClassgroupElement.from_bytes(class_group_bytes)
         vdf_info = VDFInfo.from_bytes(info)
         if not vdf.is_valid(constants, class_group, vdf_info):
             return False
 
@@ -1652,18 +1626,18 @@
             log.info("cancelling VDF validation, shutdown requested")
             return False
 
     return True
 
 
 async def validate_weight_proof_inner(
-    constants,
-    executor,
-    shutdown_file_name,
-    num_processes,
+    constants: ConsensusConstants,
+    executor: ProcessPoolExecutor,
+    shutdown_file_name: str,
+    num_processes: int,
     weight_proof: WeightProof,
     summaries: List[SubEpochSummary],
     sub_epoch_weight_list: List[uint128],
     skip_segment_validation: bool,
     validate_from: int,
 ) -> Tuple[bool, List[BlockRecord]]:
     assert len(weight_proof.sub_epochs) > 0
@@ -1686,27 +1660,24 @@
         constants,
         wp_recent_chain_bytes,
         summary_bytes,
         pathlib.Path(shutdown_file_name),
     )
 
     if not skip_segment_validation:
-        segments_validated, vdfs_to_validate = _validate_sub_epoch_segments(
-            constants, rng, wp_segment_bytes, summary_bytes, validate_from
-        )
+        vdfs_to_validate = _validate_sub_epoch_segments(constants, rng, wp_segment_bytes, summary_bytes, validate_from)
         await asyncio.sleep(0)  # break up otherwise multi-second sync code
 
-        if not segments_validated:
+        if vdfs_to_validate is None:
             return False, []
 
-        vdf_chunks = chunks(vdfs_to_validate, num_processes)
-        vdf_tasks: List[Awaitable] = []
-        for chunk in vdf_chunks:
+        vdf_tasks = []
+        for batch in to_batches(vdfs_to_validate, num_processes):
             byte_chunks = []
-            for vdf_proof, classgroup, vdf_info in chunk:
+            for vdf_proof, classgroup, vdf_info in batch.entries:
                 byte_chunks.append((bytes(vdf_proof), bytes(classgroup), bytes(vdf_info)))
             vdf_task = asyncio.get_running_loop().run_in_executor(
                 executor,
                 _validate_vdf_batch,
                 constants,
                 byte_chunks,
                 pathlib.Path(shutdown_file_name),
```

### Comparing `chia-blockchain-2.0.0b1/chia/harvester/harvester.py` & `chia-blockchain-2.0.0b3/chia/harvester/harvester.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/harvester/harvester_api.py` & `chia-blockchain-2.0.0b3/chia/harvester/harvester_api.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 from __future__ import annotations
 
 import asyncio
+import logging
 import time
 from pathlib import Path
 from typing import List, Optional, Tuple
 
 from blspy import AugSchemeMPL, G1Element, G2Element
 
 from chia.consensus.pot_iterations import calculate_iterations_quality, calculate_sp_interval_iters
@@ -25,19 +26,24 @@
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.api_decorators import api_request
 from chia.util.ints import uint8, uint32, uint64
 from chia.wallet.derive_keys import master_sk_to_local_sk
 
 
 class HarvesterAPI:
+    log: logging.Logger
     harvester: Harvester
 
     def __init__(self, harvester: Harvester):
+        self.log = logging.getLogger(__name__)
         self.harvester = harvester
 
+    def ready(self) -> bool:
+        return True
+
     @api_request(peer_required=True)
     async def harvester_handshake(
         self, harvester_handshake: harvester_protocol.HarvesterHandshake, peer: WSChiaConnection
     ) -> None:
         """
         Handshake between the harvester and farmer. The harvester receives the pool public keys,
         as well as the farmer pks, which must be put into the plots, before the plotting process begins.
```

### Comparing `chia-blockchain-2.0.0b1/chia/introducer/introducer.py` & `chia-blockchain-2.0.0b3/chia/introducer/introducer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/introducer/introducer_api.py` & `chia-blockchain-2.0.0b3/chia/introducer/introducer_api.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,28 +1,34 @@
 from __future__ import annotations
 
+import logging
 from typing import Optional
 
 from chia.introducer.introducer import Introducer
 from chia.protocols.introducer_protocol import RequestPeersIntroducer, RespondPeersIntroducer
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.rpc.rpc_server import StateChangedProtocol
 from chia.server.outbound_message import Message, make_msg
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.peer_info import TimestampedPeerInfo
 from chia.util.api_decorators import api_request
 from chia.util.ints import uint64
 
 
 class IntroducerAPI:
+    log: logging.Logger
     introducer: Introducer
 
     def __init__(self, introducer) -> None:
+        self.log = logging.getLogger(__name__)
         self.introducer = introducer
 
+    def ready(self) -> bool:
+        return True
+
     def _set_state_changed_callback(self, callback: StateChangedProtocol) -> None:
         pass
 
     @api_request(peer_required=True)
     async def request_peers_introducer(
         self,
         request: RequestPeersIntroducer,
```

### Comparing `chia-blockchain-2.0.0b1/chia/plot_sync/delta.py` & `chia-blockchain-2.0.0b3/chia/plot_sync/delta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plot_sync/exceptions.py` & `chia-blockchain-2.0.0b3/chia/plot_sync/exceptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plot_sync/receiver.py` & `chia-blockchain-2.0.0b3/chia/plot_sync/receiver.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plot_sync/sender.py` & `chia-blockchain-2.0.0b3/chia/plot_sync/sender.py`

 * *Files 1% similar despite different names*

```diff
@@ -22,16 +22,16 @@
     PlotSyncPlotList,
     PlotSyncResponse,
     PlotSyncStart,
 )
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.server.outbound_message import NodeType, make_msg
 from chia.server.ws_connection import WSChiaConnection
-from chia.util.generator_tools import list_to_batches
 from chia.util.ints import int16, uint32, uint64
+from chia.util.misc import to_batches
 
 log = logging.getLogger(__name__)
 
 
 def _convert_plot_info_list(plot_infos: List[PlotInfo]) -> List[Plot]:
     converted: List[Plot] = []
     for plot_info in plot_infos:
@@ -146,18 +146,18 @@
         log.debug(f"_reset {self}")
         self._last_sync_id = uint64(0)
         self._sync_id = uint64(0)
         self._next_message_id = uint64(0)
         self._messages.clear()
         if self._task is not None:
             self.sync_start(self._plot_manager.plot_count(), True)
-            for remaining, batch in list_to_batches(
+            for batch in to_batches(
                 list(self._plot_manager.plots.values()), self._plot_manager.refresh_parameter.batch_size
             ):
-                self.process_batch(batch, remaining)
+                self.process_batch(batch.entries, batch.remaining)
             self.sync_done([], 0)
 
     async def _wait_for_response(self) -> bool:
         start = time.time()
         assert self._response is not None
         while time.time() - start < Constants.message_timeout and self._response.message is None:
             await asyncio.sleep(0.1)
@@ -247,16 +247,16 @@
 
         return True
 
     def _add_list_batched(self, message_type: ProtocolMessageTypes, payload_type: Any, data: List[Any]) -> None:
         if len(data) == 0:
             self._add_message(message_type, payload_type, [], True)
             return
-        for remaining, batch in list_to_batches(data, self._plot_manager.refresh_parameter.batch_size):
-            self._add_message(message_type, payload_type, batch, remaining == 0)
+        for batch in to_batches(data, self._plot_manager.refresh_parameter.batch_size):
+            self._add_message(message_type, payload_type, batch.entries, batch.remaining == 0)
 
     def sync_start(self, count: float, initial: bool) -> None:
         log.debug(f"sync_start {self}: count {count}, initial {initial}")
         while self.sync_active():
             if self._stop_requested:
                 log.debug("sync_start aborted")
                 return
```

### Comparing `chia-blockchain-2.0.0b1/chia/plot_sync/util.py` & `chia-blockchain-2.0.0b3/chia/plot_sync/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotters/bladebit.py` & `chia-blockchain-2.0.0b3/chia/plotters/bladebit.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotters/chiapos.py` & `chia-blockchain-2.0.0b3/chia/plotters/chiapos.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,14 +2,15 @@
 NOTE: This contains duplicate code from `chia.cmds.plots`.
 After `chia plots create` becomes obsolete, consider removing it from there.
 """
 from __future__ import annotations
 
 import asyncio
 import logging
+from argparse import Namespace
 from pathlib import Path
 from typing import Any, Dict, Optional
 
 import pkg_resources
 
 from chia.plotting.create_plots import create_plots, resolve_plot_keys
 from chia.plotting.util import Params, add_plot_directory, validate_plot_size
@@ -18,15 +19,15 @@
 
 
 def get_chiapos_install_info() -> Optional[Dict[str, Any]]:
     chiapos_version: str = pkg_resources.get_distribution("chiapos").version
     return {"display_name": "Chia Proof of Space", "version": chiapos_version, "installed": True}
 
 
-def plot_chia(args, root_path):
+def plot_chia(args: Namespace, root_path: Path) -> None:
     try:
         validate_plot_size(root_path, args.size, args.override)
     except ValueError as e:
         print(e)
         return
 
     plot_keys = asyncio.run(
```

### Comparing `chia-blockchain-2.0.0b1/chia/plotters/madmax.py` & `chia-blockchain-2.0.0b3/chia/plotters/madmax.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotters/plotters.py` & `chia-blockchain-2.0.0b3/chia/plotters/plotters.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotters/plotters_util.py` & `chia-blockchain-2.0.0b3/chia/plotters/plotters_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotting/cache.py` & `chia-blockchain-2.0.0b3/chia/plotting/cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotting/check_plots.py` & `chia-blockchain-2.0.0b3/chia/plotting/check_plots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotting/create_plots.py` & `chia-blockchain-2.0.0b3/chia/plotting/create_plots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/plotting/manager.py` & `chia-blockchain-2.0.0b3/chia/plotting/manager.py`

 * *Files 1% similar despite different names*

```diff
@@ -10,15 +10,15 @@
 
 from blspy import G1Element
 from chiapos import DiskProver
 
 from chia.consensus.pos_quality import UI_ACTUAL_SPACE_CONSTANT_FACTOR, _expected_plot_size
 from chia.plotting.cache import Cache, CacheEntry
 from chia.plotting.util import PlotInfo, PlotRefreshEvents, PlotRefreshResult, PlotsRefreshParameter, get_plot_filenames
-from chia.util.generator_tools import list_to_batches
+from chia.util.misc import to_batches
 
 log = logging.getLogger(__name__)
 
 
 class PlotManager:
     plots: Dict[Path, PlotInfo]
     plot_filename_paths: Dict[str, Tuple[str, Set[str]]]
@@ -176,27 +176,27 @@
                             paths_to_remove.append(path_str)
                     for path_str in paths_to_remove:
                         duplicated_paths.remove(path_str)
 
                 for filename in filenames_to_remove:
                     del self.plot_filename_paths[filename]
 
-                for remaining, batch in list_to_batches(sorted(list(plot_paths)), self.refresh_parameter.batch_size):
-                    batch_result: PlotRefreshResult = self.refresh_batch(batch, plot_directories)
+                for batch in to_batches(sorted(list(plot_paths)), self.refresh_parameter.batch_size):
+                    batch_result: PlotRefreshResult = self.refresh_batch(batch.entries, plot_directories)
                     if not self._refreshing_enabled:
                         self.log.debug("refresh_plots: Aborted")
                         break
                     # Set the remaining files since `refresh_batch()` doesn't know them but we want to report it
-                    batch_result.remaining = remaining
+                    batch_result.remaining = batch.remaining
                     total_result.loaded += batch_result.loaded
                     total_result.processed += batch_result.processed
                     total_result.duration += batch_result.duration
 
                     self._refresh_callback(PlotRefreshEvents.batch_processed, batch_result)
-                    if remaining == 0:
+                    if batch.remaining == 0:
                         break
                     batch_sleep = self.refresh_parameter.batch_sleep_milliseconds
                     self.log.debug(f"refresh_plots: Sleep {batch_sleep} milliseconds")
                     time.sleep(float(batch_sleep) / 1000.0)
 
                 if self._refreshing_enabled:
                     self._refresh_callback(PlotRefreshEvents.done, total_result)
```

### Comparing `chia-blockchain-2.0.0b1/chia/plotting/util.py` & `chia-blockchain-2.0.0b3/chia/plotting/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/pools/pool_config.py` & `chia-blockchain-2.0.0b3/chia/pools/pool_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/pools/pool_puzzles.py` & `chia-blockchain-2.0.0b3/chia/pools/pool_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/pools/pool_wallet.py` & `chia-blockchain-2.0.0b3/chia/pools/pool_wallet.py`

 * *Files 1% similar despite different names*

```diff
@@ -256,20 +256,14 @@
             current_state.current.target_puzzle_hash,
             current_state.p2_singleton_puzzle_hash,
             current_state.current.owner_pubkey,
         )
         pool_config_dict[new_config.launcher_id] = new_config
         await update_pool_config(self.wallet_state_manager.root_path, list(pool_config_dict.values()))
 
-    @staticmethod
-    def get_next_interesting_coin(spend: CoinSpend) -> Optional[Coin]:
-        # CoinSpend of one of the coins that we cared about. This coin was spent in a block, but might be in a reorg
-        # If we return a value, it is a coin that we are also interested in (to support two transitions per block)
-        return get_most_recent_singleton_coin_from_coin_spend(spend)
-
     async def apply_state_transition(self, new_state: CoinSpend, block_height: uint32) -> bool:
         """
         Updates the Pool state (including DB) with new singleton spends.
         The DB must be committed after calling this method. All validation should be done here. Returns True iff
         the spend is a valid transition spend for the singleton, False otherwise.
         """
         tip: Tuple[uint32, CoinSpend] = await self.get_tip()
@@ -683,19 +677,19 @@
         announcement_message = Program.to([puzzle_hash, amount, pool_state_bytes]).get_tree_hash()
         announcement_set.add(Announcement(launcher_coin.name(), announcement_message))
 
         create_launcher_tx_record: Optional[TransactionRecord] = await standard_wallet.generate_signed_transaction(
             amount,
             genesis_launcher_puz.get_tree_hash(),
             fee,
-            launcher_parent.name(),
             coins,
             None,
             False,
             announcement_set,
+            origin_id=launcher_parent.name(),
         )
         assert create_launcher_tx_record is not None and create_launcher_tx_record.spend_bundle is not None
 
         genesis_launcher_solution: Program = Program.to([puzzle_hash, amount, pool_state_bytes])
 
         launcher_cs: CoinSpend = CoinSpend(
             launcher_coin,
```

### Comparing `chia-blockchain-2.0.0b1/chia/pools/pool_wallet_info.py` & `chia-blockchain-2.0.0b3/chia/pools/pool_wallet_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/farmer_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/farmer_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/full_node_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/full_node_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/harvester_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/harvester_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/introducer_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/introducer_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/pool_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/pool_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/protocol_message_types.py` & `chia-blockchain-2.0.0b3/chia/protocols/protocol_message_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/protocol_state_machine.py` & `chia-blockchain-2.0.0b3/chia/protocols/protocol_state_machine.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/shared_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/shared_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/timelord_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/timelord_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/protocols/wallet_protocol.py` & `chia-blockchain-2.0.0b3/chia/protocols/wallet_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/pyinstaller.spec` & `chia-blockchain-2.0.0b3/chia/pyinstaller.spec`

 * *Files 8% similar despite different names*

```diff
@@ -61,21 +61,24 @@
     "full_node",
     "harvester",
     "farmer",
     "introducer",
     "timelord",
 ]
 
-# TODO: collapse all these entry points into one `chia_exec` entrypoint that accepts the server as a parameter
-
-entry_points = ["chia.cmds.chia"] + [f"chia.server.start_{s}" for s in SERVERS]
-
-hiddenimports = []
-hiddenimports.extend(entry_points)
-hiddenimports.extend(keyring_imports)
+if THIS_IS_WINDOWS:
+    hidden_imports_for_windows = ["win32timezone", "win32cred", "pywintypes", "win32ctypes.pywin32"]
+else:
+    hidden_imports_for_windows = []
+
+hiddenimports = [
+    *collect_submodules("chia"),
+    *keyring_imports,
+    *hidden_imports_for_windows,
+]
 
 binaries = []
 
 if os.path.exists(f"{ROOT}/madmax/chia_plot"):
     binaries.extend([
         (
             f"{ROOT}/madmax/chia_plot",
@@ -96,21 +99,14 @@
         (
             f"{ROOT}/bladebit/bladebit",
             "bladebit"
         )
     ])
 
 if THIS_IS_WINDOWS:
-    hiddenimports.extend(["win32timezone", "win32cred", "pywintypes", "win32ctypes.pywin32"])
-
-# this probably isn't necessary
-if THIS_IS_WINDOWS:
-    entry_points.extend(["aiohttp", "chia.util.bip39"])
-
-if THIS_IS_WINDOWS:
     chia_mod = importlib.import_module("chia")
     dll_paths = pathlib.Path(sysconfig.get_path("platlib")) / "*.dll"
 
     binaries = [
         (
             dll_paths,
             ".",
@@ -138,15 +134,16 @@
     ]
 
 
 datas = []
 
 datas.append((f"{ROOT}/chia/util/english.txt", "chia/util"))
 datas.append((f"{ROOT}/chia/util/initial-config.yaml", "chia/util"))
-datas.append((f"{ROOT}/chia/wallet/puzzles/*.hex", "chia/wallet/puzzles"))
+for path in sorted({path.parent for path in ROOT.joinpath("chia").rglob("*.hex")}):
+    datas.append((f"{path}/*.hex", path.relative_to(ROOT)))
 datas.append((f"{ROOT}/chia/ssl/*", "chia/ssl"))
 datas.append((f"{ROOT}/mozilla-ca/*", "mozilla-ca"))
 datas.append(version_data)
 
 pathex = []
 
 
@@ -199,14 +196,15 @@
 for server in SERVERS:
     add_binary(f"start_{server}", f"{ROOT}/chia/server/start_{server}.py", COLLECT_ARGS)
 
 add_binary("start_crawler", f"{ROOT}/chia/seeder/start_crawler.py", COLLECT_ARGS)
 add_binary("start_seeder", f"{ROOT}/chia/seeder/dns_server.py", COLLECT_ARGS)
 add_binary("start_data_layer_http", f"{ROOT}/chia/data_layer/data_layer_server.py", COLLECT_ARGS)
 add_binary("start_data_layer_s3_plugin", f"{ROOT}/chia/data_layer/s3_plugin_service.py", COLLECT_ARGS)
+add_binary("timelord_launcher", f"{ROOT}/chia/timelord/timelord_launcher.py", COLLECT_ARGS)
 
 COLLECT_KWARGS = dict(
     strip=False,
     upx_exclude=[],
     name="daemon",
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/crawler_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/crawler_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/data_layer_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/data_layer_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/data_layer_rpc_client.py` & `chia-blockchain-2.0.0b3/chia/rpc/data_layer_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/data_layer_rpc_util.py` & `chia-blockchain-2.0.0b3/chia/rpc/data_layer_rpc_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/farmer_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/farmer_rpc_api.py`

 * *Files 1% similar despite different names*

```diff
@@ -14,14 +14,15 @@
 from chia.util.byte_types import hexstr_to_bytes
 from chia.util.ints import uint32
 from chia.util.paginator import Paginator
 from chia.util.streamable import Streamable, streamable
 from chia.util.ws_message import WsRpcMessage, create_payload_dict
 
 
+@dataclasses.dataclass
 class PaginatedRequestData(Protocol):
     @property
     def node_id(self) -> bytes32:
         pass
 
     @property
     def page(self) -> uint32:
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/farmer_rpc_client.py` & `chia-blockchain-2.0.0b3/chia/rpc/farmer_rpc_client.py`

 * *Files 4% similar despite different names*

```diff
@@ -59,15 +59,15 @@
     async def set_payout_instructions(self, launcher_id: bytes32, payout_instructions: str) -> Dict[str, Any]:
         request = {"launcher_id": launcher_id.hex(), "payout_instructions": payout_instructions}
         return await self.fetch("set_payout_instructions", request)
 
     async def get_harvesters(self) -> Dict[str, Any]:
         return await self.fetch("get_harvesters", {})
 
-    async def get_harvesters_summary(self) -> Dict[str, object]:
+    async def get_harvesters_summary(self) -> Dict[str, Any]:
         return await self.fetch("get_harvesters_summary", {})
 
     async def get_harvester_plots_valid(self, request: PlotInfoRequestData) -> Dict[str, Any]:
         return await self.fetch("get_harvester_plots_valid", dataclass_to_json_dict(request))
 
     async def get_harvester_plots_invalid(self, request: PlotPathRequestData) -> Dict[str, Any]:
         return await self.fetch("get_harvester_plots_invalid", dataclass_to_json_dict(request))
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/full_node_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/full_node_rpc_api.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,14 @@
 from __future__ import annotations
 
 from datetime import datetime, timezone
 from typing import Any, Dict, List, Optional
 
 from chia.consensus.block_record import BlockRecord
+from chia.consensus.blockchain import BlockchainMutexPriority
 from chia.consensus.cost_calculator import NPCResult
 from chia.consensus.pos_quality import UI_ACTUAL_SPACE_CONSTANT_FACTOR
 from chia.full_node.fee_estimator_interface import FeeEstimatorInterface
 from chia.full_node.full_node import FullNode
 from chia.full_node.mempool_check_conditions import get_puzzle_and_solution_for_coin, get_spends_for_block
 from chia.rpc.rpc_server import Endpoint, EndpointResult
 from chia.server.outbound_message import NodeType
@@ -690,33 +691,27 @@
         block: Optional[FullBlock] = await self.service.block_store.get_full_block(header_hash)
 
         if block is None or block.transactions_generator is None:
             raise ValueError("Invalid block or block generator")
 
         block_generator: Optional[BlockGenerator] = await self.service.blockchain.get_block_generator(block)
         assert block_generator is not None
-        error, puzzle, solution = get_puzzle_and_solution_for_coin(block_generator, coin_record.coin)
-        if error is not None:
-            raise ValueError(f"Error: {error}")
-
-        assert puzzle is not None
-        assert solution is not None
-
-        return {"coin_solution": CoinSpend(coin_record.coin, puzzle, solution)}
+        spend_info = get_puzzle_and_solution_for_coin(block_generator, coin_record.coin)
+        return {"coin_solution": CoinSpend(coin_record.coin, spend_info.puzzle, spend_info.solution)}
 
     async def get_additions_and_removals(self, request: Dict[str, Any]) -> EndpointResult:
         if "header_hash" not in request:
             raise ValueError("No header_hash in request")
         header_hash = bytes32.from_hexstr(request["header_hash"])
 
         block: Optional[FullBlock] = await self.service.block_store.get_full_block(header_hash)
         if block is None:
             raise ValueError(f"Block {header_hash.hex()} not found")
 
-        async with self.service._blockchain_lock_low_priority:
+        async with self.service.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.low):
             if self.service.blockchain.height_to_hash(block.height) != header_hash:
                 raise ValueError(f"Block at {header_hash.hex()} is no longer in the blockchain (it's in a fork)")
             additions: List[CoinRecord] = await self.service.coin_store.get_coins_added_at_height(block.height)
             removals: List[CoinRecord] = await self.service.coin_store.get_coins_removed_at_height(block.height)
 
         return {
             "additions": [coin_record_dict_backwards_compat(cr.to_json_dict()) for cr in additions],
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/full_node_rpc_client.py` & `chia-blockchain-2.0.0b3/chia/rpc/full_node_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/harvester_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/harvester_rpc_api.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 
-from typing import Any, Dict, List
+from typing import Any, Dict, List, Optional
 
 from chia.harvester.harvester import Harvester
 from chia.rpc.rpc_server import Endpoint, EndpointResult
 from chia.util.ws_message import WsRpcMessage, create_payload_dict
 
 
 class HarvesterRpcApi:
@@ -18,15 +18,15 @@
             "/refresh_plots": self.refresh_plots,
             "/delete_plot": self.delete_plot,
             "/add_plot_directory": self.add_plot_directory,
             "/get_plot_directories": self.get_plot_directories,
             "/remove_plot_directory": self.remove_plot_directory,
         }
 
-    async def _state_changed(self, change: str, change_data: Dict[str, Any] = None) -> List[WsRpcMessage]:
+    async def _state_changed(self, change: str, change_data: Optional[Dict[str, Any]] = None) -> List[WsRpcMessage]:
         if change_data is None:
             change_data = {}
 
         payloads = []
 
         if change == "plots":
             data = await self.get_plots({})
@@ -40,40 +40,40 @@
             payloads.append(create_payload_dict("add_connection", change_data, self.service_name, "metrics"))
 
         if change == "close_connection":
             payloads.append(create_payload_dict("close_connection", change_data, self.service_name, "metrics"))
 
         return payloads
 
-    async def get_plots(self, request: Dict) -> EndpointResult:
+    async def get_plots(self, _: Dict[str, Any]) -> EndpointResult:
         plots, failed_to_open, not_found = self.service.get_plots()
         return {
             "plots": plots,
             "failed_to_open_filenames": failed_to_open,
             "not_found_filenames": not_found,
         }
 
-    async def refresh_plots(self, request: Dict) -> EndpointResult:
+    async def refresh_plots(self, _: Dict[str, Any]) -> EndpointResult:
         self.service.plot_manager.trigger_refresh()
         return {}
 
-    async def delete_plot(self, request: Dict) -> EndpointResult:
+    async def delete_plot(self, request: Dict[str, Any]) -> EndpointResult:
         filename = request["filename"]
         if self.service.delete_plot(filename):
             return {}
         raise ValueError(f"Not able to delete file {filename}")
 
-    async def add_plot_directory(self, request: Dict) -> EndpointResult:
+    async def add_plot_directory(self, request: Dict[str, Any]) -> EndpointResult:
         directory_name = request["dirname"]
         if await self.service.add_plot_directory(directory_name):
             return {}
         raise ValueError(f"Did not add plot directory {directory_name}")
 
-    async def get_plot_directories(self, request: Dict) -> EndpointResult:
+    async def get_plot_directories(self, _: Dict[str, Any]) -> EndpointResult:
         plot_dirs = await self.service.get_plot_directories()
         return {"directories": plot_dirs}
 
-    async def remove_plot_directory(self, request: Dict) -> EndpointResult:
+    async def remove_plot_directory(self, request: Dict[str, Any]) -> EndpointResult:
         directory_name = request["dirname"]
         if await self.service.remove_plot_directory(directory_name):
             return {}
         raise ValueError(f"Did not remove plot directory {directory_name}")
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/harvester_rpc_client.py` & `chia-blockchain-2.0.0b3/chia/rpc/harvester_rpc_client.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 
-from typing import Any, Dict, List
+from typing import Any, Dict, List, cast
 
 from chia.rpc.rpc_client import RpcClient
 
 
 class HarvesterRpcClient(RpcClient):
     """
     Client to Chia RPC, connects to a local harvester. Uses HTTP/JSON, and converts back from
@@ -17,17 +17,29 @@
     async def get_plots(self) -> Dict[str, Any]:
         return await self.fetch("get_plots", {})
 
     async def refresh_plots(self) -> None:
         await self.fetch("refresh_plots", {})
 
     async def delete_plot(self, filename: str) -> bool:
-        return (await self.fetch("delete_plot", {"filename": filename}))["success"]
+        response = await self.fetch("delete_plot", {"filename": filename})
+        # TODO: casting due to lack of type checked deserialization
+        result = cast(bool, response["success"])
+        return result
 
     async def add_plot_directory(self, dirname: str) -> bool:
-        return (await self.fetch("add_plot_directory", {"dirname": dirname}))["success"]
+        response = await self.fetch("add_plot_directory", {"dirname": dirname})
+        # TODO: casting due to lack of type checked deserialization
+        result = cast(bool, response["success"])
+        return result
 
     async def get_plot_directories(self) -> List[str]:
-        return (await self.fetch("get_plot_directories", {}))["directories"]
+        response = await self.fetch("get_plot_directories", {})
+        # TODO: casting due to lack of type checked deserialization
+        result = cast(List[str], response["directories"])
+        return result
 
     async def remove_plot_directory(self, dirname: str) -> bool:
-        return (await self.fetch("remove_plot_directory", {"dirname": dirname}))["success"]
+        response = await self.fetch("remove_plot_directory", {"dirname": dirname})
+        # TODO: casting due to lack of type checked deserialization
+        result = cast(bool, response["success"])
+        return result
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/rpc_client.py` & `chia-blockchain-2.0.0b3/chia/rpc/rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/rpc_server.py` & `chia-blockchain-2.0.0b3/chia/rpc/rpc_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/timelord_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/timelord_rpc_api.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/util.py` & `chia-blockchain-2.0.0b3/chia/rpc/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/wallet_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/rpc/wallet_rpc_api.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,18 +1,19 @@
 from __future__ import annotations
 
 import dataclasses
 import json
 import logging
 from pathlib import Path
-from typing import Any, Dict, List, Optional, Set, Tuple, Union
+from typing import Any, ClassVar, Dict, List, Optional, Set, Tuple, Union
 
 from blspy import AugSchemeMPL, G1Element, G2Element, PrivateKey
 
 from chia.consensus.block_rewards import calculate_base_farmer_reward
+from chia.data_layer.data_layer_errors import LauncherCoinNotFoundError
 from chia.data_layer.data_layer_wallet import DataLayerWallet
 from chia.pools.pool_wallet import PoolWallet
 from chia.pools.pool_wallet_info import FARMING_TO_POOL, PoolState, PoolWalletInfo, create_pool_state
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.protocols.wallet_protocol import CoinState
 from chia.rpc.rpc_server import Endpoint, EndpointResult, default_get_connections
 from chia.server.outbound_message import NodeType, make_msg
@@ -30,14 +31,15 @@
 from chia.util.byte_types import hexstr_to_bytes
 from chia.util.config import load_config, str2bool
 from chia.util.errors import KeychainIsLocked
 from chia.util.ints import uint16, uint32, uint64
 from chia.util.keychain import bytes_to_mnemonic, generate_mnemonic
 from chia.util.misc import UInt32Range
 from chia.util.path import path_from_root
+from chia.util.streamable import Streamable, streamable
 from chia.util.ws_message import WsRpcMessage, create_payload_dict
 from chia.wallet.cat_wallet.cat_constants import DEFAULT_CATS
 from chia.wallet.cat_wallet.cat_wallet import CATWallet
 from chia.wallet.derive_keys import (
     MAX_POOL_WALLETS,
     master_sk_to_farmer_sk,
     master_sk_to_pool_sk,
@@ -58,42 +60,49 @@
 from chia.wallet.nft_wallet.nft_puzzles import get_metadata_and_phs
 from chia.wallet.nft_wallet.nft_wallet import NFTWallet
 from chia.wallet.nft_wallet.uncurry_nft import UncurriedNFT
 from chia.wallet.notification_store import Notification
 from chia.wallet.outer_puzzles import AssetType
 from chia.wallet.payment import Payment
 from chia.wallet.puzzle_drivers import PuzzleInfo, Solver
+from chia.wallet.puzzles.clawback.metadata import AutoClaimSettings, ClawbackMetadata
 from chia.wallet.puzzles.p2_delegated_puzzle_or_hidden_puzzle import puzzle_hash_for_synthetic_public_key
 from chia.wallet.singleton import create_singleton_puzzle
 from chia.wallet.trade_record import TradeRecord
 from chia.wallet.trading.offer import Offer
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.uncurried_puzzle import uncurry_puzzle
 from chia.wallet.util.address_type import AddressType, is_valid_address
 from chia.wallet.util.compute_hints import compute_coin_hints
 from chia.wallet.util.compute_memos import compute_memos
-from chia.wallet.util.transaction_type import TransactionType
+from chia.wallet.util.query_filter import HashFilter, TransactionTypeFilter
+from chia.wallet.util.transaction_type import CLAWBACK_TRANSACTION_TYPES, TransactionType
 from chia.wallet.util.wallet_sync_utils import fetch_coin_spend_for_coin_state
-from chia.wallet.util.wallet_types import WalletType
+from chia.wallet.util.wallet_types import CoinType, WalletType
+from chia.wallet.vc_wallet.vc_store import VCProofs
+from chia.wallet.vc_wallet.vc_wallet import VCWallet
 from chia.wallet.wallet import CHIP_0002_SIGN_MESSAGE_PREFIX, Wallet
 from chia.wallet.wallet_coin_record import WalletCoinRecord
-from chia.wallet.wallet_coin_store import HashFilter
+from chia.wallet.wallet_coin_store import CoinRecordOrder, GetCoinRecords, unspent_range
 from chia.wallet.wallet_info import WalletInfo
 from chia.wallet.wallet_node import WalletNode
 from chia.wallet.wallet_protocol import WalletProtocol
 
 # Timeout for response from wallet/full node for sending a transaction
 TIMEOUT = 30
 MAX_DERIVATION_INDEX_DELTA = 1000
 MAX_NFT_CHUNK_SIZE = 25
 
 log = logging.getLogger(__name__)
 
 
 class WalletRpcApi:
+    max_get_coin_records_limit: ClassVar[uint32] = uint32(1000)
+    max_get_coin_records_filter_items: ClassVar[uint32] = uint32(1000)
+
     def __init__(self, wallet_node: WalletNode):
         assert wallet_node is not None
         self.service = wallet_node
         self.service_name = "chia_wallet"
 
     def get_routes(self) -> Dict[str, Endpoint]:
         return {
@@ -111,29 +120,34 @@
             "/set_wallet_resync_on_startup": self.set_wallet_resync_on_startup,
             "/get_sync_status": self.get_sync_status,
             "/get_height_info": self.get_height_info,
             "/push_tx": self.push_tx,
             "/push_transactions": self.push_transactions,
             "/farm_block": self.farm_block,  # Only when node simulator is running
             "/get_timestamp_for_height": self.get_timestamp_for_height,
+            "/set_auto_claim": self.set_auto_claim,
+            "/get_auto_claim": self.get_auto_claim,
             # this function is just here for backwards-compatibility. It will probably
             # be removed in the future
             "/get_initial_freeze_period": self.get_initial_freeze_period,
             "/get_network_info": self.get_network_info,
             # Wallet management
             "/get_wallets": self.get_wallets,
             "/create_new_wallet": self.create_new_wallet,
             # Wallet
             "/get_wallet_balance": self.get_wallet_balance,
+            "/get_wallet_balances": self.get_wallet_balances,
             "/get_transaction": self.get_transaction,
             "/get_transactions": self.get_transactions,
             "/get_transaction_count": self.get_transaction_count,
             "/get_next_address": self.get_next_address,
             "/send_transaction": self.send_transaction,
             "/send_transaction_multi": self.send_transaction_multi,
+            "/spend_clawback_coins": self.spend_clawback_coins,
+            "/get_coin_records": self.get_coin_records,
             "/get_farmed_amount": self.get_farmed_amount,
             "/create_signed_transaction": self.create_signed_transaction,
             "/delete_unconfirmed_transactions": self.delete_unconfirmed_transactions,
             "/select_coins": self.select_coins,
             "/get_spendable_coins": self.get_spendable_coins,
             "/get_coin_records_by_names": self.get_coin_records_by_names,
             "/get_current_derivation_index": self.get_current_derivation_index,
@@ -210,14 +224,22 @@
             "/dl_update_root": self.dl_update_root,
             "/dl_update_multiple": self.dl_update_multiple,
             "/dl_history": self.dl_history,
             "/dl_owned_singletons": self.dl_owned_singletons,
             "/dl_get_mirrors": self.dl_get_mirrors,
             "/dl_new_mirror": self.dl_new_mirror,
             "/dl_delete_mirror": self.dl_delete_mirror,
+            # Verified Credential
+            "/vc_mint": self.vc_mint,
+            "/vc_get": self.vc_get,
+            "/vc_get_list": self.vc_get_list,
+            "/vc_spend": self.vc_spend,
+            "/vc_add_proofs": self.vc_add_proofs,
+            "/vc_get_proofs_for_root": self.vc_get_proofs_for_root,
+            "/vc_revoke": self.vc_revoke,
         }
 
     def get_connections(self, request_node_type: Optional[NodeType]) -> List[Dict[str, Any]]:
         return default_get_connections(server=self.service.server, request_node_type=request_node_type)
 
     async def _state_changed(self, change: str, change_data: Optional[Dict[str, Any]]) -> List[WsRpcMessage]:
         """
@@ -225,34 +247,15 @@
         gives us an opportunity to send notifications to all connected clients via WebSocket.
         """
         payloads = []
         if change in {"sync_changed", "coin_added", "add_connection", "close_connection"}:
             # Metrics is the only current consumer for this event
             payloads.append(create_payload_dict(change, change_data, self.service_name, "metrics"))
 
-        if change in {
-            "offer_cancelled",
-            "offer_added",
-            "wallet_created",
-            "did_coin_added",
-            "nft_coin_added",
-            "nft_coin_removed",
-            "nft_coin_updated",
-            "nft_coin_did_set",
-            "new_block",
-            "coin_removed",
-            "coin_added",
-            "new_derivation_index",
-            "added_stray_cat",
-            "pending_transaction",
-            "tx_update",
-            "wallet_removed",
-            "new_on_chain_notification",
-        }:
-            payloads.append(create_payload_dict("state_changed", change_data, self.service_name, "wallet_ui"))
+        payloads.append(create_payload_dict("state_changed", change_data, self.service_name, "wallet_ui"))
 
         return payloads
 
     async def _stop_wallet(self):
         """
         Stops a currently running wallet/key, which allows starting the wallet with a new key.
         Each key has it's own wallet database.
@@ -558,14 +561,33 @@
 
         await self.service.server.send_to_all([msg], NodeType.FULL_NODE)
         return {}
 
     async def get_timestamp_for_height(self, request) -> EndpointResult:
         return {"timestamp": await self.service.get_timestamp_for_height(uint32(request["height"]))}
 
+    async def set_auto_claim(self, request) -> EndpointResult:
+        """
+        Set auto claim merkle coins config
+        :param request: Example {"enable": true, "tx_fee": 100000, "min_amount": 0, "batch_size": 50}
+        :return:
+        """
+        return self.service.set_auto_claim(AutoClaimSettings.from_json_dict(request))
+
+    async def get_auto_claim(self, request) -> EndpointResult:
+        """
+        Get auto claim merkle coins config
+        :param request: None
+        :return:
+        """
+        auto_claim_settings = AutoClaimSettings.from_json_dict(
+            self.service.wallet_state_manager.config.get("auto_claim", {})
+        )
+        return auto_claim_settings.to_json_dict()
+
     ##########################################################################################
     # Wallet Management
     ##########################################################################################
 
     async def get_wallets(self, request: Dict) -> EndpointResult:
         include_data: bool = request.get("include_data", True)
         wallet_type: Optional[WalletType] = None
@@ -780,28 +802,42 @@
         # TODO: rework this function to report detailed errors for each error case
         return {"success": False, "error": "invalid request"}
 
     ##########################################################################################
     # Wallet
     ##########################################################################################
 
-    async def get_wallet_balance(self, request: Dict) -> EndpointResult:
-        wallet_id = uint32(int(request["wallet_id"]))
+    async def _get_wallet_balance(self, wallet_id: uint32) -> Dict:
         wallet = self.service.wallet_state_manager.wallets[wallet_id]
         balance = await self.service.get_balance(wallet_id)
         wallet_balance = balance.to_json_dict()
         wallet_balance["wallet_id"] = wallet_id
         wallet_balance["wallet_type"] = wallet.type()
         if self.service.logged_in_fingerprint is not None:
             wallet_balance["fingerprint"] = self.service.logged_in_fingerprint
         if wallet.type() == WalletType.CAT:
             assert isinstance(wallet, CATWallet)
             wallet_balance["asset_id"] = wallet.get_asset_id()
+        return wallet_balance
+
+    async def get_wallet_balance(self, request: Dict) -> EndpointResult:
+        wallet_id = uint32(int(request["wallet_id"]))
+        wallet_balance = await self._get_wallet_balance(wallet_id)
         return {"wallet_balance": wallet_balance}
 
+    async def get_wallet_balances(self, request: Dict) -> EndpointResult:
+        try:
+            wallet_ids: List[uint32] = [uint32(int(wallet_id)) for wallet_id in request["wallet_ids"]]
+        except (TypeError, KeyError):
+            wallet_ids = list(self.service.wallet_state_manager.wallets.keys())
+        wallet_balances: Dict[uint32, Dict] = {}
+        for wallet_id in wallet_ids:
+            wallet_balances[wallet_id] = await self._get_wallet_balance(wallet_id)
+        return {"wallet_balances": wallet_balances}
+
     async def get_transaction(self, request: Dict) -> EndpointResult:
         transaction_id: bytes32 = bytes32(hexstr_to_bytes(request["transaction_id"]))
         tr: Optional[TransactionRecord] = await self.service.wallet_state_manager.get_transaction(transaction_id)
         if tr is None:
             raise ValueError(f"Transaction 0x{transaction_id.hex()} not found")
 
         return {
@@ -843,29 +879,59 @@
         sort_key = request.get("sort_key", None)
         reverse = request.get("reverse", False)
 
         to_address = request.get("to_address", None)
         to_puzzle_hash: Optional[bytes32] = None
         if to_address is not None:
             to_puzzle_hash = decode_puzzle_hash(to_address)
+        type_filter = None
+        if "type_filter" in request:
+            type_filter = TransactionTypeFilter.from_json_dict(request["type_filter"])
 
         transactions = await self.service.wallet_state_manager.tx_store.get_transactions_between(
-            wallet_id, start, end, sort_key=sort_key, reverse=reverse, to_puzzle_hash=to_puzzle_hash
-        )
+            wallet_id,
+            start,
+            end,
+            sort_key=sort_key,
+            reverse=reverse,
+            to_puzzle_hash=to_puzzle_hash,
+            type_filter=type_filter,
+            confirmed=request.get("confirmed", None),
+        )
+        tx_list = []
+        # Format for clawback transactions
+        for tr in transactions:
+            try:
+                tx = (await self._convert_tx_puzzle_hash(tr)).to_json_dict_convenience(self.service.config)
+                tx_list.append(tx)
+                if tx["type"] not in CLAWBACK_TRANSACTION_TYPES:
+                    continue
+                coin: Coin = tr.additions[0]
+                record: Optional[WalletCoinRecord] = await self.service.wallet_state_manager.coin_store.get_coin_record(
+                    coin.name()
+                )
+                assert record is not None, f"Cannot find coin record for clawback transaction {tx['name']}"
+                tx["metadata"] = record.parsed_metadata().to_json_dict()
+                tx["metadata"]["coin_id"] = coin.name().hex()
+                tx["metadata"]["spent"] = record.spent
+            except Exception:
+                log.exception(f"Failed to get transaction {tr.name}.")
         return {
-            "transactions": [
-                (await self._convert_tx_puzzle_hash(tr)).to_json_dict_convenience(self.service.config)
-                for tr in transactions
-            ],
+            "transactions": tx_list,
             "wallet_id": wallet_id,
         }
 
     async def get_transaction_count(self, request: Dict) -> EndpointResult:
         wallet_id = int(request["wallet_id"])
-        count = await self.service.wallet_state_manager.tx_store.get_transaction_count_for_wallet(wallet_id)
+        type_filter = None
+        if "type_filter" in request:
+            type_filter = TransactionTypeFilter.from_json_dict(request["type_filter"])
+        count = await self.service.wallet_state_manager.tx_store.get_transaction_count_for_wallet(
+            wallet_id, confirmed=request.get("confirmed", None), type_filter=type_filter
+        )
         return {
             "count": count,
             "wallet_id": wallet_id,
         }
 
     # this function is just here for backwards-compatibility. It will probably
     # be removed in the future
@@ -923,36 +989,39 @@
             memos = [mem.encode("utf-8") for mem in request["memos"]]
 
         fee: uint64 = uint64(request.get("fee", 0))
         min_coin_amount: uint64 = uint64(request.get("min_coin_amount", 0))
         max_coin_amount: uint64 = uint64(request.get("max_coin_amount", 0))
         if max_coin_amount == 0:
             max_coin_amount = uint64(self.service.wallet_state_manager.constants.MAX_COIN_AMOUNT)
-        exclude_coin_amounts: Optional[List[uint64]] = request.get("exclude_coin_amounts")
-        if exclude_coin_amounts is not None:
-            exclude_coin_amounts = [uint64(a) for a in exclude_coin_amounts]
-        exclude_coin_ids: Optional[List] = request.get("exclude_coin_ids")
-        if exclude_coin_ids is not None:
+        excluded_coin_amounts: Optional[List[uint64]] = request.get(
+            "excluded_coin_amounts", request.get("exclude_coin_amounts")
+        )
+        if excluded_coin_amounts is not None:
+            excluded_coin_amounts = [uint64(a) for a in excluded_coin_amounts]
+        excluded_coin_ids: Optional[List] = request.get("excluded_coin_ids", request.get("exclude_coin_ids"))
+        if excluded_coin_ids is not None:
             result = await self.service.wallet_state_manager.coin_store.get_coin_records(
-                coin_id_filter=HashFilter.include([bytes32.from_hexstr(hex_id) for hex_id in exclude_coin_ids])
+                coin_id_filter=HashFilter.include([bytes32.from_hexstr(hex_id) for hex_id in excluded_coin_ids])
             )
-            exclude_coins = {wr.coin for wr in result.records}
+            excluded_coins = {wr.coin for wr in result.records}
         else:
-            exclude_coins = set()
+            excluded_coins = set()
 
         async with self.service.wallet_state_manager.lock:
             tx: TransactionRecord = await wallet.generate_signed_transaction(
                 amount,
                 puzzle_hash,
                 fee,
                 memos=memos,
                 min_coin_amount=min_coin_amount,
                 max_coin_amount=max_coin_amount,
-                exclude_coin_amounts=exclude_coin_amounts,
-                exclude_coins=exclude_coins,
+                excluded_coin_amounts=excluded_coin_amounts,
+                excluded_coins=excluded_coins,
+                puzzle_decorator_override=request.get("puzzle_decorator", None),
                 reuse_puzhash=request.get("reuse_puzhash", None),
             )
             await wallet.push_transaction(tx)
 
         # Transaction may not have been included in the mempool yet. Use get_transaction to check.
         return {
             "transaction": tx.to_json_dict_convenience(self.service.config),
@@ -976,14 +1045,54 @@
             if wallet.type() != WalletType.CAT:
                 assert isinstance(wallet, Wallet)
                 await wallet.push_transaction(tr)
 
         # Transaction may not have been included in the mempool yet. Use get_transaction to check.
         return {"transaction": transaction, "transaction_id": tr.name}
 
+    async def spend_clawback_coins(self, request) -> EndpointResult:
+        """Spend clawback coins that were sent (to claw them back) or received (to claim them).
+
+        :param coin_ids: list of coin ids to be spent
+        :param batch_size: number of coins to spend per bundle
+        :param fee: transaction fee in mojos
+        :return:
+        """
+        if "coin_ids" not in request:
+            raise ValueError("Coin IDs are required.")
+        coin_ids: List[bytes32] = [bytes32.from_hexstr(coin) for coin in request["coin_ids"]]
+        tx_fee: uint64 = uint64(request.get("fee", 0))
+        # Get inner puzzle
+        coin_records = await self.service.wallet_state_manager.coin_store.get_coin_records(
+            coin_id_filter=HashFilter.include(coin_ids),
+            coin_type=CoinType.CLAWBACK,
+            wallet_type=WalletType.STANDARD_WALLET,
+            spent_range=UInt32Range(stop=uint32(0)),
+        )
+
+        coins: Dict[Coin, ClawbackMetadata] = {}
+        batch_size = request.get(
+            "batch_size", self.service.wallet_state_manager.config.get("auto_claim", {}).get("batch_size", 50)
+        )
+        tx_id_list: List[bytes] = []
+        for coin_id, coin_record in coin_records.coin_id_to_record.items():
+            try:
+                coins[coin_record.coin] = coin_record.parsed_metadata()
+                if len(coins) >= batch_size:
+                    tx_id_list.extend((await self.service.wallet_state_manager.spend_clawback_coins(coins, tx_fee)))
+                    coins = {}
+            except Exception as e:
+                log.error(f"Failed to spend clawback coin {coin_id.hex()}: %s", e)
+        if len(coins) > 0:
+            tx_id_list.extend((await self.service.wallet_state_manager.spend_clawback_coins(coins, tx_fee)))
+        return {
+            "success": True,
+            "transaction_ids": [tx.hex() for tx in tx_id_list],
+        }
+
     async def delete_unconfirmed_transactions(self, request) -> EndpointResult:
         wallet_id = uint32(request["wallet_id"])
         if wallet_id not in self.service.wallet_state_manager.wallets:
             raise ValueError(f"Wallet id {wallet_id} does not exist")
         if await self.service.wallet_state_manager.synced() is False:
             raise ValueError("Wallet needs to be fully synced.")
 
@@ -1115,15 +1224,15 @@
             confirmed_range = dataclasses.replace(confirmed_range, start=uint32(request["start_height"]))
         if "end_height" in request:
             confirmed_range = dataclasses.replace(confirmed_range, stop=uint32(request["end_height"]))
         if confirmed_range != UInt32Range():
             kwargs["confirmed_range"] = confirmed_range
 
         if "include_spent_coins" in request and not str2bool(request["include_spent_coins"]):
-            kwargs["spent_range"] = UInt32Range(start=uint32(uint32.MAXIMUM_EXCLUSIVE - 1))
+            kwargs["spent_range"] = unspent_range
 
         async with self.service.wallet_state_manager.lock:
             coin_records: List[CoinRecord] = await self.service.wallet_state_manager.get_coin_records_by_coin_ids(
                 **kwargs
             )
             missed_coins: List[str] = [
                 "0x" + c_id.hex() for c_id in coin_ids if c_id not in [cr.name for cr in coin_records]
@@ -1419,25 +1528,27 @@
         if "coins" in request and len(request["coins"]) > 0:
             coins = set([Coin.from_json_dict(coin_json) for coin_json in request["coins"]])
         fee: uint64 = uint64(request.get("fee", 0))
         min_coin_amount: uint64 = uint64(request.get("min_coin_amount", 0))
         max_coin_amount: uint64 = uint64(request.get("max_coin_amount", 0))
         if max_coin_amount == 0:
             max_coin_amount = uint64(self.service.wallet_state_manager.constants.MAX_COIN_AMOUNT)
-        exclude_coin_amounts: Optional[List[uint64]] = request.get("exclude_coin_amounts")
-        if exclude_coin_amounts is not None:
-            exclude_coin_amounts = [uint64(a) for a in exclude_coin_amounts]
-        exclude_coin_ids: Optional[List] = request.get("exclude_coin_ids")
-        if exclude_coin_ids is not None:
+        excluded_coin_amounts: Optional[List[uint64]] = request.get(
+            "excluded_coin_amounts", request.get("exclude_coin_amounts")
+        )
+        if excluded_coin_amounts is not None:
+            excluded_coin_amounts = [uint64(a) for a in excluded_coin_amounts]
+        excluded_coin_ids: Optional[List] = request.get("excluded_coin_ids", request.get("exclude_coin_ids"))
+        if excluded_coin_ids is not None:
             result = await self.service.wallet_state_manager.coin_store.get_coin_records(
-                coin_id_filter=HashFilter.include([bytes32.from_hexstr(hex_id) for hex_id in exclude_coin_ids])
+                coin_id_filter=HashFilter.include([bytes32.from_hexstr(hex_id) for hex_id in excluded_coin_ids])
             )
-            exclude_coins = {wr.coin for wr in result.records}
+            excluded_coins = {wr.coin for wr in result.records}
         else:
-            exclude_coins = None
+            excluded_coins = None
         cat_discrepancy_params: Tuple[Optional[int], Optional[str], Optional[str]] = (
             request.get("extra_delta", None),
             request.get("tail_reveal", None),
             request.get("tail_solution", None),
         )
         cat_discrepancy: Optional[Tuple[int, Program, Program]] = None
         if cat_discrepancy_params != (None, None, None):
@@ -1459,31 +1570,31 @@
                     puzzle_hashes,
                     fee,
                     cat_discrepancy=cat_discrepancy,
                     coins=coins,
                     memos=memos if memos else None,
                     min_coin_amount=min_coin_amount,
                     max_coin_amount=max_coin_amount,
-                    exclude_coin_amounts=exclude_coin_amounts,
-                    exclude_cat_coins=exclude_coins,
+                    excluded_coin_amounts=excluded_coin_amounts,
+                    excluded_cat_coins=excluded_coins,
                     reuse_puzhash=request.get("reuse_puzhash", None),
                 )
                 for tx in txs:
                     await wallet.standard_wallet.push_transaction(tx)
         else:
             txs = await wallet.generate_signed_transaction(
                 amounts,
                 puzzle_hashes,
                 fee,
                 coins=coins,
                 memos=memos if memos else None,
                 min_coin_amount=min_coin_amount,
                 max_coin_amount=max_coin_amount,
-                exclude_coin_amounts=exclude_coin_amounts,
-                exclude_cat_coins=exclude_coins,
+                excluded_coin_amounts=excluded_coin_amounts,
+                excluded_cat_coins=excluded_coins,
                 reuse_puzhash=request.get("reuse_puzhash", None),
             )
             for tx in txs:
                 await wallet.standard_wallet.push_transaction(tx)
 
         # Return the first transaction, which is expected to be the CAT spend. If a fee is
         # included, it is currently ordered after the CAT spend.
@@ -2361,21 +2472,21 @@
         if did_id != b"":
             did_id = decode_puzzle_hash(did_id)
         nft_dict: Dict[uint32, List[NFTCoinInfo]] = {}
         tx_list: List[TransactionRecord] = []
         coin_ids = []
         nft_ids = []
         fee = uint64(request.get("fee", 0))
+        nft_wallet: NFTWallet
         for nft_coin in request["nft_coin_list"]:
             if "nft_coin_id" not in nft_coin or "wallet_id" not in nft_coin:
                 log.error(f"Cannot set DID for NFT :{nft_coin}, missing nft_coin_id or wallet_id.")
                 continue
             wallet_id = uint32(nft_coin["wallet_id"])
-            nft_wallet = self.service.wallet_state_manager.wallets[wallet_id]
-            assert isinstance(nft_wallet, NFTWallet)
+            nft_wallet = self.service.wallet_state_manager.get_wallet(id=wallet_id, required_type=NFTWallet)
             nft_coin_id = nft_coin["nft_coin_id"]
             if nft_coin_id.startswith(AddressType.NFT.hrp(self.service.config)):
                 nft_id = decode_puzzle_hash(nft_coin_id)
                 nft_coin_info = await nft_wallet.get_nft(nft_id)
             else:
                 nft_coin_id = bytes32.from_hexstr(nft_coin_id)
                 nft_coin_info = await nft_wallet.get_nft_coin_by_id(nft_coin_id)
@@ -2389,16 +2500,15 @@
                 nft_dict[wallet_id].append(nft_coin_info)
             else:
                 nft_dict[wallet_id] = [nft_coin_info]
             nft_ids.append(nft_coin_info.nft_id)
         first = True
         nft_wallet = None
         for wallet_id, nft_list in nft_dict.items():
-            nft_wallet = self.service.wallet_state_manager.wallets[wallet_id]
-            assert isinstance(nft_wallet, NFTWallet)
+            nft_wallet = self.service.wallet_state_manager.get_wallet(id=wallet_id, required_type=NFTWallet)
             if not first:
                 tx_list.extend(await nft_wallet.set_bulk_nft_did(nft_list, did_id))
             else:
                 tx_list.extend(
                     await nft_wallet.set_bulk_nft_did(
                         nft_list, did_id, fee, nft_ids, reuse_puzhash=request.get("reuse_puzhash", None)
                     )
@@ -2450,21 +2560,21 @@
             puzzle_hash = decode_puzzle_hash(address)
         else:
             return dict(success=False, error="target_address parameter missing")
         nft_dict: Dict[uint32, List[NFTCoinInfo]] = {}
         tx_list: List[TransactionRecord] = []
         coin_ids = []
         fee = uint64(request.get("fee", 0))
+        nft_wallet: NFTWallet
         for nft_coin in request["nft_coin_list"]:
             if "nft_coin_id" not in nft_coin or "wallet_id" not in nft_coin:
                 log.error(f"Cannot transfer NFT :{nft_coin}, missing nft_coin_id or wallet_id.")
                 continue
             wallet_id = uint32(nft_coin["wallet_id"])
-            nft_wallet = self.service.wallet_state_manager.wallets[wallet_id]
-            assert isinstance(nft_wallet, NFTWallet)
+            nft_wallet = self.service.wallet_state_manager.get_wallet(id=wallet_id, required_type=NFTWallet)
             nft_coin_id = nft_coin["nft_coin_id"]
             if nft_coin_id.startswith(AddressType.NFT.hrp(self.service.config)):
                 nft_id = decode_puzzle_hash(nft_coin_id)
                 nft_coin_info = await nft_wallet.get_nft(nft_id)
             else:
                 nft_coin_id = bytes32.from_hexstr(nft_coin_id)
                 nft_coin_info = await nft_wallet.get_nft_coin_by_id(nft_coin_id)
@@ -2472,16 +2582,15 @@
             if wallet_id in nft_dict:
                 nft_dict[wallet_id].append(nft_coin_info)
             else:
                 nft_dict[wallet_id] = [nft_coin_info]
         first = True
         nft_wallet = None
         for wallet_id, nft_list in nft_dict.items():
-            nft_wallet = self.service.wallet_state_manager.wallets[wallet_id]
-            assert isinstance(nft_wallet, NFTWallet)
+            nft_wallet = self.service.wallet_state_manager.get_wallet(id=wallet_id, required_type=NFTWallet)
             if not first:
                 tx_list.extend(await nft_wallet.bulk_transfer_nft(nft_list, puzzle_hash))
             else:
                 tx_list.extend(
                     await nft_wallet.bulk_transfer_nft(
                         nft_list, puzzle_hash, fee, reuse_puzhash=request.get("reuse_puzhash", None)
                     )
@@ -2814,14 +2923,56 @@
                 nft_id_list.append(encode_puzzle_hash(cs.coin.name(), AddressType.NFT.hrp(self.service.config)))
         return {
             "success": True,
             "spend_bundle": sb,
             "nft_id_list": nft_id_list,
         }
 
+    async def get_coin_records(self, request: Dict[str, Any]) -> EndpointResult:
+        parsed_request = GetCoinRecords.from_json_dict(request)
+
+        if parsed_request.limit != uint32.MAXIMUM and parsed_request.limit > self.max_get_coin_records_limit:
+            raise ValueError(f"limit of {self.max_get_coin_records_limit} exceeded: {parsed_request.limit}")
+
+        for filter_name, filter in {
+            "coin_id_filter": parsed_request.coin_id_filter,
+            "puzzle_hash_filter": parsed_request.puzzle_hash_filter,
+            "parent_coin_id_filter": parsed_request.parent_coin_id_filter,
+            "amount_filter": parsed_request.amount_filter,
+        }.items():
+            if filter is None:
+                continue
+            if len(filter.values) > self.max_get_coin_records_filter_items:
+                raise ValueError(
+                    f"{filter_name} max items {self.max_get_coin_records_filter_items} exceeded: {len(filter.values)}"
+                )
+
+        result = await self.service.wallet_state_manager.coin_store.get_coin_records(
+            offset=parsed_request.offset,
+            limit=parsed_request.limit,
+            wallet_id=parsed_request.wallet_id,
+            wallet_type=None if parsed_request.wallet_type is None else WalletType(parsed_request.wallet_type),
+            coin_type=None if parsed_request.coin_type is None else CoinType(parsed_request.coin_type),
+            coin_id_filter=parsed_request.coin_id_filter,
+            puzzle_hash_filter=parsed_request.puzzle_hash_filter,
+            parent_coin_id_filter=parsed_request.parent_coin_id_filter,
+            amount_filter=parsed_request.amount_filter,
+            amount_range=parsed_request.amount_range,
+            confirmed_range=parsed_request.confirmed_range,
+            spent_range=parsed_request.spent_range,
+            order=CoinRecordOrder(parsed_request.order),
+            reverse=parsed_request.reverse,
+            include_total_count=parsed_request.include_total_count,
+        )
+
+        return {
+            "coin_records": [coin_record.to_json_dict_parsed_metadata() for coin_record in result.records],
+            "total_count": result.total_count,
+        }
+
     async def get_farmed_amount(self, request) -> EndpointResult:
         tx_records: List[TransactionRecord] = await self.service.wallet_state_manager.tx_store.get_farming_rewards()
         amount = 0
         pool_reward_amount = 0
         farmer_reward_amount = 0
         fee_amount = 0
         last_height_farmed = 0
@@ -2890,25 +3041,28 @@
             additional_outputs.append(Payment(receiver_ph, amount, memos))
 
         fee: uint64 = uint64(request.get("fee", 0))
         min_coin_amount: uint64 = uint64(request.get("min_coin_amount", 0))
         max_coin_amount: uint64 = uint64(request.get("max_coin_amount", 0))
         if max_coin_amount == 0:
             max_coin_amount = uint64(self.service.wallet_state_manager.constants.MAX_COIN_AMOUNT)
-        exclude_coin_amounts: Optional[List[uint64]] = request.get("exclude_coin_amounts")
-        if exclude_coin_amounts is not None:
-            exclude_coin_amounts = [uint64(a) for a in exclude_coin_amounts]
+        excluded_coin_amounts: Optional[List[uint64]] = request.get(
+            "excluded_coin_amounts", request.get("excluded_coin_amounts")
+        )
+        if excluded_coin_amounts is not None:
+            excluded_coin_amounts = [uint64(a) for a in excluded_coin_amounts]
 
         coins = None
         if "coins" in request and len(request["coins"]) > 0:
             coins = set([Coin.from_json_dict(coin_json) for coin_json in request["coins"]])
 
-        exclude_coins = None
-        if "exclude_coins" in request and len(request["exclude_coins"]) > 0:
-            exclude_coins = set([Coin.from_json_dict(coin_json) for coin_json in request["exclude_coins"]])
+        _excluded_coins: Optional[List[bytes32]] = request.get("excluded_coins", request.get("exclude_coins"))
+        excluded_coins: Optional[Set[Coin]] = None
+        if _excluded_coins is not None and len(_excluded_coins) > 0:
+            excluded_coins = set([Coin.from_json_dict(coin_json) for coin_json in _excluded_coins])
 
         coin_announcements: Optional[Set[Announcement]] = None
         if (
             "coin_announcements" in request
             and request["coin_announcements"] is not None
             and len(request["coin_announcements"]) > 0
         ):
@@ -2943,44 +3097,44 @@
         async def _generate_signed_transaction() -> EndpointResult:
             if isinstance(wallet, Wallet):
                 tx = await wallet.generate_signed_transaction(
                     amount_0,
                     bytes32(puzzle_hash_0),
                     fee,
                     coins=coins,
-                    exclude_coins=exclude_coins,
+                    excluded_coins=excluded_coins,
                     ignore_max_send_amount=True,
                     primaries=additional_outputs,
                     memos=memos_0,
                     coin_announcements_to_consume=coin_announcements,
                     puzzle_announcements_to_consume=puzzle_announcements,
                     min_coin_amount=min_coin_amount,
                     max_coin_amount=max_coin_amount,
-                    exclude_coin_amounts=exclude_coin_amounts,
+                    excluded_coin_amounts=excluded_coin_amounts,
                 )
                 signed_tx = tx.to_json_dict_convenience(self.service.config)
 
                 return {"signed_txs": [signed_tx], "signed_tx": signed_tx}
 
             else:
                 assert isinstance(wallet, CATWallet)
 
                 txs = await wallet.generate_signed_transaction(
                     [amount_0] + [output.amount for output in additional_outputs],
                     [bytes32(puzzle_hash_0)] + [output.puzzle_hash for output in additional_outputs],
                     fee,
                     coins=coins,
-                    exclude_cat_coins=exclude_coins,
+                    excluded_cat_coins=excluded_coins,
                     ignore_max_send_amount=True,
                     memos=[memos_0] + [output.memos for output in additional_outputs],
                     coin_announcements_to_consume=coin_announcements,
                     puzzle_announcements_to_consume=puzzle_announcements,
                     min_coin_amount=min_coin_amount,
                     max_coin_amount=max_coin_amount,
-                    exclude_coin_amounts=exclude_coin_amounts,
+                    excluded_coin_amounts=excluded_coin_amounts,
                 )
                 signed_txs = [tx.to_json_dict_convenience(self.service.config) for tx in txs]
 
                 return {"signed_txs": signed_txs, "signed_tx": signed_txs[0]}
 
         if hold_lock:
             async with self.service.wallet_state_manager.lock:
@@ -3098,18 +3252,26 @@
         try:
             dl_wallet = self.service.wallet_state_manager.get_dl_wallet()
         except ValueError:
             async with self.service.wallet_state_manager.lock:
                 dl_wallet = await DataLayerWallet.create_new_dl_wallet(
                     self.service.wallet_state_manager,
                 )
-        await dl_wallet.track_new_launcher_id(
-            bytes32.from_hexstr(request["launcher_id"]),
-            self.service.get_full_node_peer(),
-        )
+        peer_list = self.service.get_full_node_peers_in_order()
+        peer_length = len(peer_list)
+        for i, peer in enumerate(peer_list):
+            try:
+                await dl_wallet.track_new_launcher_id(
+                    bytes32.from_hexstr(request["launcher_id"]),
+                    peer,
+                )
+            except LauncherCoinNotFoundError as e:
+                if i == peer_length - 1:
+                    raise e  # raise the error if we've tried all peers
+                continue  # try some other peers, maybe someone has it
         return {}
 
     async def dl_stop_tracking(self, request) -> Dict:
         """Initialize the DataLayer Wallet (only one can exist)"""
         if self.service.wallet_state_manager is None:
             raise ValueError("The wallet service is not currently initialized")
 
@@ -3261,7 +3423,189 @@
             )
             for tx in txs:
                 await self.service.wallet_state_manager.add_pending_transaction(tx)
 
         return {
             "transactions": [tx.to_json_dict_convenience(self.service.config) for tx in txs],
         }
+
+    ##########################################################################################
+    # Verified Credential
+    ##########################################################################################
+    async def vc_mint(self, request) -> Dict:
+        """
+        Mint a verified credential using the assigned DID
+        :param request: We require 'did_id' that will be minting the VC and options for a new 'target_address' as well
+        as a 'fee' for the mint tx
+        :return: a 'vc_record' containing all the information of the soon-to-be-confirmed vc as well as any relevant
+        'transactions'
+        """
+
+        @streamable
+        @dataclasses.dataclass(frozen=True)
+        class VCMint(Streamable):
+            did_id: str
+            target_address: Optional[str] = None
+            fee: uint64 = uint64(0)
+
+        parsed_request = VCMint.from_json_dict(request)
+
+        did_id = decode_puzzle_hash(parsed_request.did_id)
+        puzhash: Optional[bytes32] = None
+        if parsed_request.target_address is not None:
+            puzhash = decode_puzzle_hash(parsed_request.target_address)
+
+        vc_wallet: VCWallet = await self.service.wallet_state_manager.get_or_create_vc_wallet()
+        vc_record, tx_list = await vc_wallet.launch_new_vc(did_id, puzhash, parsed_request.fee)
+        for tx in tx_list:
+            await self.service.wallet_state_manager.add_pending_transaction(tx)
+        return {
+            "vc_record": vc_record.to_json_dict(),
+            "transactions": [tx.to_json_dict_convenience(self.service.config) for tx in tx_list],
+        }
+
+    async def vc_get(self, request) -> Dict:
+        """
+        Given a launcher ID get the verified credential
+        :param request: the 'vc_id' launcher id of a verifiable credential
+        :return: the 'vc_record' representing the specified verifiable credential
+        """
+
+        @streamable
+        @dataclasses.dataclass(frozen=True)
+        class VCGet(Streamable):
+            vc_id: bytes32
+
+        parsed_request = VCGet.from_json_dict(request)
+
+        vc_record = await self.service.wallet_state_manager.vc_store.get_vc_record(parsed_request.vc_id)
+        return {"vc_record": vc_record}
+
+    async def vc_get_list(self, request) -> Dict:
+        """
+        Get a list of verified credentials
+        :param request: optional parameters for pagination 'start' and 'count'
+        :return: all 'vc_records' in the specified range and any 'proofs' associated with the roots contained within
+        """
+
+        @streamable
+        @dataclasses.dataclass(frozen=True)
+        class VCGetList(Streamable):
+            start: uint32 = uint32(0)
+            end: uint32 = uint32(50)
+
+        parsed_request = VCGetList.from_json_dict(request)
+
+        vc_list = await self.service.wallet_state_manager.vc_store.get_vc_record_list(
+            parsed_request.start, parsed_request.end
+        )
+        return {
+            "vc_records": [{"coin_id": "0x" + vc.vc.coin.name().hex(), **vc.to_json_dict()} for vc in vc_list],
+            "proofs": {
+                rec.vc.proof_hash.hex(): None if fetched_proof is None else fetched_proof.key_value_pairs
+                for rec in vc_list
+                if rec.vc.proof_hash is not None
+                for fetched_proof in (
+                    await self.service.wallet_state_manager.vc_store.get_proofs_for_root(rec.vc.proof_hash),
+                )
+            },
+        }
+
+    async def vc_spend(self, request) -> Dict:
+        """
+        Spend a verified credential
+        :param request: Required 'vc_id' launcher id of the vc we wish to spend. Optional paramaters for a 'new_puzhash'
+        for the vc to end up at and 'new_proof_hash' & 'provider_inner_puzhash' which can be used to update the vc's
+        proofs. Also standard 'fee' & 'reuse_puzhash' parameters for the transaction.
+        :return: a list of all relevant 'transactions' to perform this spend
+        """
+
+        @streamable
+        @dataclasses.dataclass(frozen=True)
+        class VCSpend(Streamable):
+            vc_id: bytes32
+            new_puzhash: Optional[bytes32] = None
+            new_proof_hash: Optional[bytes32] = None
+            provider_inner_puzhash: Optional[bytes32] = None
+            fee: uint64 = uint64(0)
+            reuse_puzhash: Optional[bool] = None
+
+        parsed_request = VCSpend.from_json_dict(request)
+
+        vc_wallet: VCWallet = await self.service.wallet_state_manager.get_or_create_vc_wallet()
+        txs = await vc_wallet.generate_signed_transaction(
+            parsed_request.vc_id,
+            parsed_request.fee,
+            parsed_request.new_puzhash,
+            new_proof_hash=parsed_request.new_proof_hash,
+            provider_inner_puzhash=parsed_request.provider_inner_puzhash,
+            reuse_puzhash=parsed_request.reuse_puzhash,
+        )
+        for tx in txs:
+            await self.service.wallet_state_manager.add_pending_transaction(tx)
+
+        return {
+            "transactions": [tx.to_json_dict_convenience(self.service.config) for tx in txs],
+        }
+
+    async def vc_add_proofs(self, request) -> Dict:
+        """
+        Add a set of proofs to the DB that can be used when spending a VC. VCs are near useless until their proofs have
+        been added.
+        :param request: 'proofs' is a dictionary of key/value pairs
+        :return:
+        """
+        vc_wallet: VCWallet = await self.service.wallet_state_manager.get_or_create_vc_wallet()
+
+        await vc_wallet.store.add_vc_proofs(VCProofs(request["proofs"]))
+
+        return {}
+
+    async def vc_get_proofs_for_root(self, request) -> Dict:
+        """
+        Given a specified vc root, get any proofs associated with that root.
+        :param request: must specify 'root' representing the tree hash of some set of proofs
+        :return: a dictionary of root hashes mapped to dictionaries of key value pairs of 'proofs'
+        """
+
+        @streamable
+        @dataclasses.dataclass(frozen=True)
+        class VCGetProofsForRoot(Streamable):
+            root: bytes32
+
+        parsed_request = VCGetProofsForRoot.from_json_dict(request)
+        vc_wallet: VCWallet = await self.service.wallet_state_manager.get_or_create_vc_wallet()
+
+        vc_proofs: Optional[VCProofs] = await vc_wallet.store.get_proofs_for_root(parsed_request.root)
+        if vc_proofs is None:
+            raise ValueError("no proofs found for specified root")  # pragma: no cover
+        return {"proofs": vc_proofs.key_value_pairs}
+
+    async def vc_revoke(self, request) -> Dict:
+        """
+        Revoke an on chain VC provided the correct DID is available
+        :param request: required 'vc_parent_id' for the VC coin. Standard transaction params 'fee' & 'reuse_puzhash'.
+        :return: all relevant 'transactions'
+        """
+
+        @streamable
+        @dataclasses.dataclass(frozen=True)
+        class VCRevoke(Streamable):
+            vc_parent_id: bytes32
+            fee: uint64 = uint64(0)
+            reuse_puzhash: Optional[bool] = None
+
+        parsed_request = VCRevoke.from_json_dict(request)
+        vc_wallet: VCWallet = await self.service.wallet_state_manager.get_or_create_vc_wallet()
+
+        txs = await vc_wallet.revoke_vc(
+            parsed_request.vc_parent_id,
+            self.service.get_full_node_peer(),
+            parsed_request.fee,
+            parsed_request.reuse_puzhash,
+        )
+        for tx in txs:
+            await self.service.wallet_state_manager.add_pending_transaction(tx)
+
+        return {
+            "transactions": [tx.to_json_dict_convenience(self.service.config) for tx in txs],
+        }
```

### Comparing `chia-blockchain-2.0.0b1/chia/rpc/wallet_rpc_client.py` & `chia-blockchain-2.0.0b3/chia/rpc/wallet_rpc_client.py`

 * *Files 3% similar despite different names*

```diff
@@ -6,21 +6,25 @@
 from chia.pools.pool_wallet_info import PoolWalletInfo
 from chia.rpc.rpc_client import RpcClient
 from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
+from chia.util.bech32m import encode_puzzle_hash
 from chia.util.ints import uint16, uint32, uint64
 from chia.wallet.notification_store import Notification
 from chia.wallet.trade_record import TradeRecord
 from chia.wallet.trading.offer import Offer
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.transaction_sorting import SortKey
+from chia.wallet.util.query_filter import TransactionTypeFilter
 from chia.wallet.util.wallet_types import WalletType
+from chia.wallet.vc_wallet.vc_store import VCRecord
+from chia.wallet.wallet_coin_store import GetCoinRecords
 
 
 def parse_result_transactions(result: Dict[str, Any]) -> Dict[str, Any]:
     result["transaction"] = TransactionRecord.from_json_dict(result["transaction"])
     if result["fee_transaction"]:
         result["fee_transaction"] = TransactionRecord.from_json_dict(result["fee_transaction"])
     return result
@@ -107,14 +111,17 @@
             request["type"] = wallet_type
         return (await self.fetch("get_wallets", request))["wallets"]
 
     # Wallet APIs
     async def get_wallet_balance(self, wallet_id: int) -> Dict:
         return (await self.fetch("get_wallet_balance", {"wallet_id": wallet_id}))["wallet_balance"]
 
+    async def get_wallet_balances(self, wallet_ids: Optional[List[int]] = None) -> Dict:
+        return (await self.fetch("get_wallet_balances", {"wallet_ids": wallet_ids}))["wallet_balances"]
+
     async def get_transaction(self, wallet_id: int, transaction_id: bytes32) -> TransactionRecord:
         res = await self.fetch(
             "get_transaction",
             {"walled_id": wallet_id, "transaction_id": transaction_id.hex()},
         )
         return TransactionRecord.from_json_dict_convenience(res["transaction"])
 
@@ -122,83 +129,99 @@
         self,
         wallet_id: int,
         start: int = None,
         end: int = None,
         sort_key: SortKey = None,
         reverse: bool = False,
         to_address: Optional[str] = None,
+        type_filter: Optional[TransactionTypeFilter] = None,
+        confirmed: Optional[bool] = None,
     ) -> List[TransactionRecord]:
         request: Dict[str, Any] = {"wallet_id": wallet_id}
 
         if start is not None:
             request["start"] = start
         if end is not None:
             request["end"] = end
         if sort_key is not None:
             request["sort_key"] = sort_key.name
         request["reverse"] = reverse
 
         if to_address is not None:
             request["to_address"] = to_address
 
+        if type_filter is not None:
+            request["type_filter"] = type_filter.to_json_dict()
+
+        if confirmed is not None:
+            request["confirmed"] = confirmed
+
         res = await self.fetch(
             "get_transactions",
             request,
         )
         return [TransactionRecord.from_json_dict_convenience(tx) for tx in res["transactions"]]
 
     async def get_transaction_count(
         self,
         wallet_id: int,
+        confirmed: Optional[bool] = None,
+        type_filter: Optional[TransactionTypeFilter] = None,
     ) -> List[TransactionRecord]:
-        res = await self.fetch(
-            "get_transaction_count",
-            {"wallet_id": wallet_id},
-        )
+        request: Dict[str, Any] = {"wallet_id": wallet_id}
+        if type_filter is not None:
+            request["type_filter"] = type_filter.to_json_dict()
+
+        if confirmed is not None:
+            request["confirmed"] = confirmed
+        res = await self.fetch("get_transaction_count", request)
         return res["count"]
 
     async def get_next_address(self, wallet_id: int, new_address: bool) -> str:
         return (await self.fetch("get_next_address", {"wallet_id": wallet_id, "new_address": new_address}))["address"]
 
     async def send_transaction(
         self,
         wallet_id: int,
         amount: uint64,
         address: str,
         fee: uint64 = uint64(0),
         memos: Optional[List[str]] = None,
         min_coin_amount: uint64 = uint64(0),
         max_coin_amount: uint64 = uint64(0),
-        exclude_amounts: Optional[List[uint64]] = None,
-        exclude_coin_ids: Optional[List[str]] = None,
+        excluded_amounts: Optional[List[uint64]] = None,
+        excluded_coin_ids: Optional[List[str]] = None,
+        puzzle_decorator_override: Optional[List[Dict[str, Union[str, int, bool]]]] = None,
         reuse_puzhash: Optional[bool] = None,
     ) -> TransactionRecord:
         if memos is None:
             send_dict: Dict = {
                 "wallet_id": wallet_id,
                 "amount": amount,
                 "address": address,
                 "fee": fee,
                 "min_coin_amount": min_coin_amount,
                 "max_coin_amount": max_coin_amount,
-                "exclude_coin_amounts": exclude_amounts,
-                "exclude_coin_ids": exclude_coin_ids,
+                "excluded_coin_amounts": excluded_amounts,
+                "excluded_coin_ids": excluded_coin_ids,
+                "puzzle_decorator": puzzle_decorator_override,
                 "reuse_puzhash": reuse_puzhash,
             }
         else:
             send_dict = {
                 "wallet_id": wallet_id,
                 "amount": amount,
                 "address": address,
                 "fee": fee,
                 "memos": memos,
                 "min_coin_amount": min_coin_amount,
                 "max_coin_amount": max_coin_amount,
-                "exclude_coin_amounts": exclude_amounts,
-                "exclude_coin_ids": exclude_coin_ids,
+                "excluded_coin_amounts": excluded_amounts,
+                "excluded_coin_ids": excluded_coin_ids,
+                "puzzle_decorator": puzzle_decorator_override,
                 "reuse_puzhash": reuse_puzhash,
             }
         res = await self.fetch("send_transaction", send_dict)
         return TransactionRecord.from_json_dict_convenience(res["transaction"])
 
     async def send_transaction_multi(
         self, wallet_id: int, additions: List[Dict], coins: List[Coin] = None, fee: uint64 = uint64(0)
@@ -218,14 +241,25 @@
         else:
             response = await self.fetch(
                 "send_transaction_multi", {"wallet_id": wallet_id, "additions": additions_hex, "fee": fee}
             )
 
         return TransactionRecord.from_json_dict_convenience(response["transaction"])
 
+    async def spend_clawback_coins(
+        self,
+        coin_ids: List[bytes32],
+        fee: int = 0,
+    ) -> Dict:
+        response = await self.fetch(
+            "spend_clawback_coins",
+            {"coin_ids": [cid.hex() for cid in coin_ids], "fee": fee},
+        )
+        return response
+
     async def delete_unconfirmed_transactions(self, wallet_id: int) -> None:
         await self.fetch(
             "delete_unconfirmed_transactions",
             {"wallet_id": wallet_id},
         )
         return None
 
@@ -243,31 +277,31 @@
         additions: List[Dict],
         coins: List[Coin] = None,
         fee: uint64 = uint64(0),
         coin_announcements: Optional[List[Announcement]] = None,
         puzzle_announcements: Optional[List[Announcement]] = None,
         min_coin_amount: uint64 = uint64(0),
         max_coin_amount: uint64 = uint64(0),
-        exclude_coins: Optional[List[Coin]] = None,
-        exclude_amounts: Optional[List[uint64]] = None,
+        excluded_coins: Optional[List[Coin]] = None,
+        excluded_amounts: Optional[List[uint64]] = None,
         wallet_id: Optional[int] = None,
     ) -> List[TransactionRecord]:
         # Converts bytes to hex for puzzle hashes
         additions_hex = []
         for ad in additions:
             additions_hex.append({"amount": ad["amount"], "puzzle_hash": ad["puzzle_hash"].hex()})
             if "memos" in ad:
                 additions_hex[-1]["memos"] = ad["memos"]
 
         request: Dict[str, Any] = {
             "additions": additions_hex,
             "fee": fee,
             "min_coin_amount": min_coin_amount,
             "max_coin_amount": max_coin_amount,
-            "exclude_coin_amounts": exclude_amounts,
+            "excluded_coin_amounts": excluded_amounts,
         }
 
         if coin_announcements is not None and len(coin_announcements) > 0:
             request["coin_announcements"] = [
                 {
                     "coin_id": ann.origin_info.hex(),
                     "message": ann.message.hex(),
@@ -286,17 +320,17 @@
                 for ann in puzzle_announcements
             ]
 
         if coins is not None and len(coins) > 0:
             coins_json = [c.to_json_dict() for c in coins]
             request["coins"] = coins_json
 
-        if exclude_coins is not None and len(exclude_coins) > 0:
-            exclude_coins_json = [exclude_coin.to_json_dict() for exclude_coin in exclude_coins]
-            request["exclude_coins"] = exclude_coins_json
+        if excluded_coins is not None and len(excluded_coins) > 0:
+            excluded_coins_json = [excluded_coin.to_json_dict() for excluded_coin in excluded_coins]
+            request["excluded_coins"] = excluded_coins_json
 
         if wallet_id:
             request["wallet_id"] = wallet_id
 
         response: Dict = await self.fetch("create_signed_transaction", request)
         return [TransactionRecord.from_json_dict_convenience(tx) for tx in response["signed_txs"]]
 
@@ -304,25 +338,27 @@
         self,
         additions: List[Dict],
         coins: List[Coin] = None,
         fee: uint64 = uint64(0),
         coin_announcements: Optional[List[Announcement]] = None,
         puzzle_announcements: Optional[List[Announcement]] = None,
         min_coin_amount: uint64 = uint64(0),
-        exclude_coins: Optional[List[Coin]] = None,
+        excluded_coins: Optional[List[Coin]] = None,
+        excluded_amounts: Optional[List[uint64]] = None,
         wallet_id: Optional[int] = None,
     ) -> TransactionRecord:
         txs: List[TransactionRecord] = await self.create_signed_transactions(
             additions=additions,
             coins=coins,
             fee=fee,
             coin_announcements=coin_announcements,
             puzzle_announcements=puzzle_announcements,
             min_coin_amount=min_coin_amount,
-            exclude_coins=exclude_coins,
+            excluded_coins=excluded_coins,
+            excluded_amounts=excluded_amounts,
             wallet_id=wallet_id,
         )
         if len(txs) == 0:
             raise ValueError("`create_signed_transaction` returned empty list!")
 
         return txs[0]
 
@@ -344,14 +380,17 @@
             "max_coin_amount": max_coin_amount,
             "excluded_coins": [excluded_coin.to_json_dict() for excluded_coin in excluded_coins],
             "excluded_coin_amounts": excluded_amounts,
         }
         response: Dict[str, List[Dict]] = await self.fetch("select_coins", request)
         return [Coin.from_json_dict(coin) for coin in response["coins"]]
 
+    async def get_coin_records(self, request: GetCoinRecords) -> Dict[str, Any]:
+        return await self.fetch("get_coin_records", request.to_json_dict())
+
     async def get_spendable_coins(
         self,
         wallet_id: int,
         excluded_coins: Optional[List[Coin]] = None,
         min_coin_amount: uint64 = uint64(0),
         max_coin_amount: uint64 = uint64(0),
         excluded_amounts: Optional[List[uint64]] = None,
@@ -690,29 +729,29 @@
         wallet_id: int,
         amount: Optional[uint64] = None,
         inner_address: Optional[str] = None,
         fee: uint64 = uint64(0),
         memos: Optional[List[str]] = None,
         min_coin_amount: uint64 = uint64(0),
         max_coin_amount: uint64 = uint64(0),
-        exclude_amounts: Optional[List[uint64]] = None,
-        exclude_coin_ids: Optional[List[str]] = None,
+        excluded_amounts: Optional[List[uint64]] = None,
+        excluded_coin_ids: Optional[List[str]] = None,
         additions: Optional[List[Dict[str, Any]]] = None,
         removals: Optional[List[Coin]] = None,
         cat_discrepancy: Optional[Tuple[int, Program, Program]] = None,  # (extra_delta, tail_reveal, tail_solution)
         reuse_puzhash: Optional[bool] = None,
     ) -> TransactionRecord:
         send_dict: Dict[str, Any] = {
             "wallet_id": wallet_id,
             "fee": fee,
             "memos": memos if memos else [],
             "min_coin_amount": min_coin_amount,
             "max_coin_amount": max_coin_amount,
-            "exclude_coin_amounts": exclude_amounts,
-            "exclude_coin_ids": exclude_coin_ids,
+            "excluded_coin_amounts": excluded_amounts,
+            "excluded_coin_ids": excluded_coin_ids,
             "reuse_puzhash": reuse_puzhash,
         }
         if amount is not None and inner_address is not None:
             send_dict["amount"] = amount
             send_dict["inner_address"] = inner_address
         elif additions is not None:
             additions_hex = []
@@ -944,15 +983,15 @@
 
     async def count_nfts(self, wallet_id: Optional[int]):
         request: Dict[str, Any] = {"wallet_id": wallet_id}
         response = await self.fetch("nft_count_nfts", request)
         return response
 
     async def list_nfts(self, wallet_id):
-        request: Dict[str, Any] = {"wallet_id": wallet_id}
+        request: Dict[str, Any] = {"wallet_id": wallet_id, "num": 100_000}
         response = await self.fetch("nft_get_nfts", request)
         return response
 
     async def set_nft_did(
         self,
         wallet_id,
         did_id,
@@ -1155,7 +1194,72 @@
     async def sign_message_by_address(self, address: str, message: str) -> Tuple[str, str, str]:
         response = await self.fetch("sign_message_by_address", {"address": address, "message": message})
         return response["pubkey"], response["signature"], response["signing_mode"]
 
     async def sign_message_by_id(self, id: str, message: str) -> Tuple[str, str, str]:
         response = await self.fetch("sign_message_by_id", {"id": id, "message": message})
         return response["pubkey"], response["signature"], response["signing_mode"]
+
+    async def vc_mint(
+        self, did_id: bytes32, target_address: Optional[bytes32] = None, fee: uint64 = uint64(0)
+    ) -> Tuple[VCRecord, List[TransactionRecord]]:
+        response = await self.fetch(
+            "vc_mint",
+            {
+                "did_id": encode_puzzle_hash(did_id, "rpc"),
+                "target_address": encode_puzzle_hash(target_address, "rpc") if target_address is not None else None,
+                "fee": fee,
+            },
+        )
+        return VCRecord.from_json_dict(response["vc_record"]), [
+            TransactionRecord.from_json_dict_convenience(tx) for tx in response["transactions"]
+        ]
+
+    async def vc_get(self, vc_id: bytes32) -> Optional[VCRecord]:
+        response = await self.fetch("vc_get", {"vc_id": vc_id.hex()})
+        return None if response["vc_record"] is None else VCRecord.from_json_dict(response["vc_record"])
+
+    async def vc_get_list(self, start: int = 0, count: int = 50) -> Tuple[List[VCRecord], Dict[str, Any]]:
+        response = await self.fetch("vc_get_list", {"start": start, "count": count})
+        return [VCRecord.from_json_dict(rec) for rec in response["vc_records"]], response["proofs"]
+
+    async def vc_spend(
+        self,
+        vc_id: bytes32,
+        new_puzhash: Optional[bytes32] = None,
+        new_proof_hash: Optional[bytes32] = None,
+        provider_inner_puzhash: Optional[bytes32] = None,
+        fee: uint64 = uint64(0),
+        reuse_puzhash: Optional[bool] = None,
+    ) -> List[TransactionRecord]:
+        response = await self.fetch(
+            "vc_spend",
+            {
+                "vc_id": vc_id.hex(),
+                "new_puzhash": new_puzhash.hex() if new_puzhash is not None else new_puzhash,
+                "new_proof_hash": new_proof_hash.hex() if new_proof_hash is not None else new_proof_hash,
+                "provider_inner_puzhash": provider_inner_puzhash.hex()
+                if provider_inner_puzhash is not None
+                else provider_inner_puzhash,
+                "fee": fee,
+                "reuse_puzhash": reuse_puzhash,
+            },
+        )
+        return [TransactionRecord.from_json_dict_convenience(tx) for tx in response["transactions"]]
+
+    async def vc_add_proofs(self, proofs: Dict[str, Any]) -> None:
+        await self.fetch("vc_add_proofs", {"proofs": proofs})
+
+    async def vc_get_proofs_for_root(self, root: bytes32) -> Dict[str, Any]:
+        response = await self.fetch("vc_get_proofs_for_root", {"root": root.hex()})
+        return response["proofs"]
+
+    async def vc_revoke(
+        self,
+        vc_parent_id: bytes32,
+        fee: uint64 = uint64(0),
+        reuse_puzhash: Optional[bool] = None,
+    ) -> List[TransactionRecord]:
+        response = await self.fetch(
+            "vc_revoke", {"vc_parent_id": vc_parent_id.hex(), "fee": fee, "reuse_puzhash": reuse_puzhash}
+        )
+        return [TransactionRecord.from_json_dict_convenience(tx) for tx in response["transactions"]]
```

### Comparing `chia-blockchain-2.0.0b1/chia/seeder/crawl_store.py` & `chia-blockchain-2.0.0b3/chia/seeder/crawl_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/seeder/crawler.py` & `chia-blockchain-2.0.0b3/chia/seeder/crawler.py`

 * *Files 0% similar despite different names*

```diff
@@ -28,15 +28,15 @@
 
 log = logging.getLogger(__name__)
 
 
 class Crawler:
     sync_store: Any
     coin_store: CoinStore
-    connection: aiosqlite.Connection
+    connection: Optional[aiosqlite.Connection]
     config: Dict
     _server: Optional[ChiaServer]
     crawl_store: Optional[CrawlStore]
     log: logging.Logger
     constants: ConsensusConstants
     _shut_down: bool
     root_path: Path
@@ -59,14 +59,15 @@
         root_path: Path,
         consensus_constants: ConsensusConstants,
         name: str = None,
     ):
         self.initialized = False
         self.root_path = root_path
         self.config = config
+        self.connection = None
         self._server = None
         self._shut_down = False  # Set to true to close all infinite loops
         self.constants = consensus_constants
         self.state_changed_callback: Optional[StateChangedProtocol] = None
         self.crawl_store = None
         self.log = log
         self.peer_count = 0
@@ -368,8 +369,9 @@
     async def on_connect(self, connection: WSChiaConnection):
         pass
 
     def _close(self):
         self._shut_down = True
 
     async def _await_closed(self):
-        await self.connection.close()
+        if self.connection is not None:
+            await self.connection.close()
```

### Comparing `chia-blockchain-2.0.0b1/chia/seeder/crawler_api.py` & `chia-blockchain-2.0.0b3/chia/seeder/crawler_api.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,42 +1,40 @@
 from __future__ import annotations
 
+import logging
 from typing import Optional
 
 from chia.protocols import full_node_protocol, wallet_protocol
 from chia.seeder.crawler import Crawler
 from chia.server.outbound_message import Message
 from chia.server.server import ChiaServer
 from chia.server.ws_connection import WSChiaConnection
 from chia.util.api_decorators import api_request
 
 
 class CrawlerAPI:
+    log: logging.Logger
     crawler: Crawler
 
-    def __init__(self, crawler):
+    def __init__(self, crawler: Crawler) -> None:
+        self.log = logging.getLogger(__name__)
         self.crawler = crawler
 
-    def __getattr__(self, attr_name: str):
-        async def invoke(*args, **kwargs):
-            pass
-
-        return invoke
-
     @property
     def server(self) -> ChiaServer:
         assert self.crawler.server is not None
         return self.crawler.server
 
-    @property
-    def log(self):
-        return self.crawler.log
+    def ready(self) -> bool:
+        return True
 
     @api_request(peer_required=True)
-    async def request_peers(self, _request: full_node_protocol.RequestPeers, peer: WSChiaConnection):
+    async def request_peers(
+        self, _request: full_node_protocol.RequestPeers, peer: WSChiaConnection
+    ) -> Optional[Message]:
         pass
 
     @api_request(peer_required=True)
     async def respond_peers(
         self, request: full_node_protocol.RespondPeers, peer: WSChiaConnection
     ) -> Optional[Message]:
         pass
@@ -59,15 +57,17 @@
     @api_request()
     async def new_unfinished_block(
         self, new_unfinished_block: full_node_protocol.NewUnfinishedBlock
     ) -> Optional[Message]:
         pass
 
     @api_request(peer_required=True)
-    async def new_compact_vdf(self, request: full_node_protocol.NewCompactVDF, peer: WSChiaConnection):
+    async def new_compact_vdf(
+        self, request: full_node_protocol.NewCompactVDF, peer: WSChiaConnection
+    ) -> Optional[Message]:
         pass
 
     @api_request()
     async def request_transaction(self, request: full_node_protocol.RequestTransaction) -> Optional[Message]:
         pass
 
     @api_request()
```

### Comparing `chia-blockchain-2.0.0b1/chia/seeder/dns_server.py` & `chia-blockchain-2.0.0b3/chia/seeder/dns_server.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/seeder/peer_record.py` & `chia-blockchain-2.0.0b3/chia/seeder/peer_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/seeder/start_crawler.py` & `chia-blockchain-2.0.0b3/chia/seeder/start_crawler.py`

 * *Files 0% similar despite different names*

```diff
@@ -25,15 +25,15 @@
 
 
 def create_full_node_crawler_service(
     root_path: pathlib.Path,
     config: Dict,
     consensus_constants: ConsensusConstants,
     connect_to_daemon: bool = True,
-) -> Service[Crawler]:
+) -> Service[Crawler, CrawlerAPI]:
     service_config = config[SERVICE_NAME]
 
     crawler = Crawler(
         service_config,
         root_path=root_path,
         consensus_constants=consensus_constants,
     )
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/address_manager.py` & `chia-blockchain-2.0.0b3/chia/server/address_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/address_manager_sqlite_store.py` & `chia-blockchain-2.0.0b3/chia/server/address_manager_sqlite_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/address_manager_store.py` & `chia-blockchain-2.0.0b3/chia/server/address_manager_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/capabilities.py` & `chia-blockchain-2.0.0b3/chia/server/capabilities.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/chia_policy.py` & `chia-blockchain-2.0.0b3/chia/server/chia_policy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/introducer_peers.py` & `chia-blockchain-2.0.0b3/chia/server/introducer_peers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/node_discovery.py` & `chia-blockchain-2.0.0b3/chia/server/node_discovery.py`

 * *Files 1% similar despite different names*

```diff
@@ -36,14 +36,15 @@
     "testnet10": 58444,
     "testnet8": 58445,
 }
 
 
 class FullNodeDiscovery:
     resolver: Optional[dns.asyncresolver.Resolver]
+    enable_private_networks: bool
 
     def __init__(
         self,
         server: ChiaServer,
         target_outbound_count: int,
         peer_store_resolver: PeerStoreResolver,
         introducer_info: Optional[Dict[str, Any]],
@@ -60,14 +61,17 @@
         self.legacy_peer_db_migrated = False
         self.peers_file_path = peer_store_resolver.peers_file_path
         self.dns_servers = dns_servers
         random.shuffle(dns_servers)  # Don't always start with the same DNS server
         self.introducer_info: Optional[UnresolvedPeerInfo] = None
         if introducer_info is not None:
             self.introducer_info = UnresolvedPeerInfo(introducer_info["host"], introducer_info["port"])
+            self.enable_private_networks = introducer_info.get("enable_private_networks", False)
+        else:
+            self.enable_private_networks = False
         self.peer_connect_interval = peer_connect_interval
         self.log = log
         self.relay_queue: Optional[asyncio.Queue[Tuple[TimestampedPeerInfo, int]]] = None
         self.address_manager: Optional[AddressManager] = None
         self.connection_time_pretest: Dict[str, Any] = {}
         self.received_count_from_peers: Dict[str, Any] = {}
         self.lock = asyncio.Lock()
@@ -108,14 +112,16 @@
                 await AddressManagerStore.serialize(address_manager, self.peers_file_path)
                 self.legacy_peer_db_migrated = True
         except Exception:
             self.log.exception("Error migrating legacy peer database")
 
     async def initialize_address_manager(self) -> None:
         self.address_manager = await AddressManagerStore.create_address_manager(self.peers_file_path)
+        if self.enable_private_networks:
+            self.address_manager.make_private_subnets_valid()
         self.server.set_received_message_callback(self.update_peer_timestamp_on_message)
 
     async def start_tasks(self) -> None:
         random = Random()
         self.connect_peers_task = asyncio.create_task(self._connect_to_peers(random))
         self.serialize_task = asyncio.create_task(self._periodically_serialize(random))
         self.cleanup_task = asyncio.create_task(self._periodically_cleanup())
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/outbound_message.py` & `chia-blockchain-2.0.0b3/chia/server/outbound_message.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/peer_store_resolver.py` & `chia-blockchain-2.0.0b3/chia/server/peer_store_resolver.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/rate_limit_numbers.py` & `chia-blockchain-2.0.0b3/chia/server/rate_limit_numbers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/rate_limits.py` & `chia-blockchain-2.0.0b3/chia/server/rate_limits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/server.py` & `chia-blockchain-2.0.0b3/chia/server/server.py`

 * *Files 1% similar despite different names*

```diff
@@ -24,14 +24,15 @@
 from cryptography.hazmat.primitives import hashes, serialization
 from typing_extensions import final
 
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.protocols.protocol_state_machine import message_requires_reply
 from chia.protocols.protocol_timing import INVALID_PROTOCOL_BAN_SECONDS
 from chia.protocols.shared_protocol import protocol_version
+from chia.server.api_protocol import ApiProtocol
 from chia.server.introducer_peers import IntroducerPeers
 from chia.server.outbound_message import Message, NodeType
 from chia.server.ssl_context import private_ssl_paths, public_ssl_paths
 from chia.server.ws_connection import ConnectionCallback, WSChiaConnection
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.peer_info import PeerInfo
 from chia.util.errors import Err, ProtocolError
@@ -118,15 +119,15 @@
     _port: int
     _local_type: NodeType
     _local_capabilities_for_handshake: List[Tuple[uint16, str]]
     _ping_interval: int
     _network_id: str
     _inbound_rate_limit_percent: int
     _outbound_rate_limit_percent: int
-    api: Any
+    api: ApiProtocol
     node: Any
     root_path: Path
     config: Dict[str, Any]
     log: logging.Logger
     ssl_context: ssl.SSLContext
     ssl_client_context: ssl.SSLContext
     node_id: bytes32
@@ -143,15 +144,15 @@
     invalid_protocol_ban_seconds = INVALID_PROTOCOL_BAN_SECONDS
 
     @classmethod
     def create(
         cls,
         port: int,
         node: Any,
-        api: Any,
+        api: ApiProtocol,
         local_type: NodeType,
         ping_interval: int,
         network_id: str,
         inbound_rate_limit_percent: int,
         outbound_rate_limit_percent: int,
         capabilities: List[Tuple[uint16, str]],
         root_path: Path,
@@ -325,15 +326,14 @@
                 local_type=self._local_type,
                 ws=ws,
                 api=self.api,
                 server_port=self._port,
                 log=self.log,
                 is_outbound=False,
                 received_message_callback=self.received_message_callback,
-                peer_host=request.remote,
                 close_callback=self.connection_closed,
                 peer_id=peer_id,
                 inbound_rate_limit_percent=self._inbound_rate_limit_percent,
                 outbound_rate_limit_percent=self._outbound_rate_limit_percent,
                 local_capabilities_for_handshake=self._local_capabilities_for_handshake,
             )
             await connection.perform_handshake(self._network_id, protocol_version, self._port, self._local_type)
@@ -470,15 +470,14 @@
                 local_type=self._local_type,
                 ws=ws,
                 api=self.api,
                 server_port=self._port,
                 log=self.log,
                 is_outbound=True,
                 received_message_callback=self.received_message_callback,
-                peer_host=target_node.host,
                 close_callback=self.connection_closed,
                 peer_id=peer_id,
                 inbound_rate_limit_percent=self._inbound_rate_limit_percent,
                 outbound_rate_limit_percent=self._outbound_rate_limit_percent,
                 local_capabilities_for_handshake=self._local_capabilities_for_handshake,
                 session=session,
             )
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/ssl_context.py` & `chia-blockchain-2.0.0b3/chia/server/ssl_context.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_data_layer.py` & `chia-blockchain-2.0.0b3/chia/server/start_data_layer.py`

 * *Files 6% similar despite different names*

```diff
@@ -13,31 +13,32 @@
 from chia.server.start_service import RpcInfo, Service, async_run
 from chia.ssl.create_ssl import create_all_ssl
 from chia.util.chia_logging import initialize_logging
 from chia.util.config import load_config, load_config_cli
 from chia.util.default_root import DEFAULT_ROOT_PATH
 from chia.util.ints import uint16
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 
 # See: https://bugs.python.org/issue29288
 "".encode("idna")
 
 SERVICE_NAME = "data_layer"
 log = logging.getLogger(__name__)
 
 
 # TODO: Review need for config and if retained then hint it properly.
 def create_data_layer_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     downloaders: List[str],
     uploaders: List[str],  # dont add FilesystemUploader to this, it is the default uploader
-    wallet_service: Optional[Service[WalletNode]] = None,
+    wallet_service: Optional[Service[WalletNode, WalletNodeAPI]] = None,
     connect_to_daemon: bool = True,
-) -> Service[DataLayer]:
+) -> Service[DataLayer, DataLayerAPI]:
     if uploaders is None:
         uploaders = []
     if downloaders is None:
         downloaders = []
     service_config = config[SERVICE_NAME]
     self_hostname = config["self_hostname"]
     wallet_rpc_port = service_config["wallet_peer"]["port"]
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_farmer.py` & `chia-blockchain-2.0.0b3/chia/server/start_farmer.py`

 * *Files 2% similar despite different names*

```diff
@@ -26,15 +26,15 @@
 def create_farmer_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     config_pool: Dict[str, Any],
     consensus_constants: ConsensusConstants,
     keychain: Optional[Keychain] = None,
     connect_to_daemon: bool = True,
-) -> Service[Farmer]:
+) -> Service[Farmer, FarmerAPI]:
     service_config = config[SERVICE_NAME]
 
     fnp = service_config.get("full_node_peer")
     connect_peers = set() if fnp is None else {UnresolvedPeerInfo(fnp["host"], fnp["port"])}
 
     overrides = service_config["network_overrides"]["constants"][service_config["selected_network"]]
     updated_constants = consensus_constants.replace_str_to_bytes(**overrides)
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_full_node.py` & `chia-blockchain-2.0.0b3/chia/server/start_full_node.py`

 * *Files 7% similar despite different names*

```diff
@@ -29,15 +29,15 @@
 
 def create_full_node_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     consensus_constants: ConsensusConstants,
     connect_to_daemon: bool = True,
     override_capabilities: Optional[List[Tuple[uint16, str]]] = None,
-) -> Service[FullNode]:
+) -> Service[FullNode, FullNodeAPI]:
     service_config = config[SERVICE_NAME]
 
     full_node = FullNode(
         service_config,
         root_path=root_path,
         consensus_constants=consensus_constants,
     )
@@ -63,27 +63,40 @@
         network_id=network_id,
         rpc_info=rpc_info,
         connect_to_daemon=connect_to_daemon,
         override_capabilities=override_capabilities,
     )
 
 
+def update_testnet_overrides(network_id: str, overrides: Dict[str, Any]) -> None:
+    if network_id != "testnet10":
+        return
+    # activate softforks immediately on testnet
+    # these numbers are supposed to match initial-config.yaml
+    if "SOFT_FORK2_HEIGHT" not in overrides:
+        overrides["SOFT_FORK2_HEIGHT"] = 0
+    if "SOFT_FORK3_HEIGHT" not in overrides:
+        overrides["SOFT_FORK3_HEIGHT"] = 0
+    if "HARD_FORK_HEIGHT" not in overrides:
+        overrides["HARD_FORK_HEIGHT"] = 2997292
+    if "PLOT_FILTER_128_HEIGHT" not in overrides:
+        overrides["PLOT_FILTER_128_HEIGHT"] = 3061804
+    if "PLOT_FILTER_64_HEIGHT" not in overrides:
+        overrides["PLOT_FILTER_64_HEIGHT"] = 8010796
+    if "PLOT_FILTER_32_HEIGHT" not in overrides:
+        overrides["PLOT_FILTER_32_HEIGHT"] = 13056556
+
+
 async def async_main(service_config: Dict[str, Any]) -> int:
     # TODO: refactor to avoid the double load
     config = load_config(DEFAULT_ROOT_PATH, "config.yaml")
     config[SERVICE_NAME] = service_config
     network_id = service_config["selected_network"]
     overrides = service_config["network_overrides"]["constants"][network_id]
-    if network_id == "testnet10":
-        # testnet10 is 1031258 blocks behind mainnet
-        testnet10_offset = 1031258
-        if "SOFT_FORK2_HEIGHT" not in overrides:
-            overrides["SOFT_FORK2_HEIGHT"] = 3886635 - testnet10_offset
-        if "SOFT_FORK_HEIGHT" not in overrides:
-            overrides["SOFT_FORK_HEIGHT"] = 3630000 - testnet10_offset
+    update_testnet_overrides(network_id, overrides)
     updated_constants = DEFAULT_CONSTANTS.replace_str_to_bytes(**overrides)
     initialize_service_logging(service_name=SERVICE_NAME, config=config)
     service = create_full_node_service(DEFAULT_ROOT_PATH, config, updated_constants)
     await service.setup_process_global_state()
     await service.run()
 
     return 0
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_harvester.py` & `chia-blockchain-2.0.0b3/chia/server/start_harvester.py`

 * *Files 1% similar despite different names*

```diff
@@ -24,15 +24,15 @@
 
 def create_harvester_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     consensus_constants: ConsensusConstants,
     farmer_peer: Optional[UnresolvedPeerInfo],
     connect_to_daemon: bool = True,
-) -> Service[Harvester]:
+) -> Service[Harvester, HarvesterAPI]:
     service_config = config[SERVICE_NAME]
 
     overrides = service_config["network_overrides"]["constants"][service_config["selected_network"]]
     updated_constants = consensus_constants.replace_str_to_bytes(**overrides)
 
     harvester = Harvester(root_path, service_config, updated_constants)
     peer_api = HarvesterAPI(harvester)
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_introducer.py` & `chia-blockchain-2.0.0b3/chia/server/start_introducer.py`

 * *Files 4% similar despite different names*

```diff
@@ -19,15 +19,15 @@
 
 
 def create_introducer_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     advertised_port: Optional[int] = None,
     connect_to_daemon: bool = True,
-) -> Service[Introducer]:
+) -> Service[Introducer, IntroducerAPI]:
     service_config = config[SERVICE_NAME]
 
     if advertised_port is None:
         advertised_port = service_config["port"]
 
     introducer = Introducer(service_config["max_peers_to_send"], service_config["recent_peer_threshold"])
     node__api = IntroducerAPI(introducer)
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_service.py` & `chia-blockchain-2.0.0b3/chia/server/start_service.py`

 * *Files 2% similar despite different names*

```diff
@@ -10,14 +10,15 @@
 from pathlib import Path
 from types import FrameType
 from typing import Any, Awaitable, Callable, Coroutine, Dict, Generic, List, Optional, Set, Tuple, Type, TypeVar
 
 from chia.cmds.init_funcs import chia_full_version_str
 from chia.daemon.server import service_launch_lock_path
 from chia.rpc.rpc_server import RpcApiProtocol, RpcServer, RpcServiceProtocol, start_rpc_server
+from chia.server.api_protocol import ApiProtocol
 from chia.server.chia_policy import set_chia_policy
 from chia.server.outbound_message import NodeType
 from chia.server.server import ChiaServer
 from chia.server.ssl_context import chia_ssl_ca_paths, private_ssl_ca_paths
 from chia.server.upnp import UPnP
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.peer_info import PeerInfo, UnresolvedPeerInfo
@@ -30,28 +31,29 @@
 
 # this is used to detect whether we are running in the main process or not, in
 # signal handlers. We need to ignore signals in the sub processes.
 main_pid: Optional[int] = None
 
 T = TypeVar("T")
 _T_RpcServiceProtocol = TypeVar("_T_RpcServiceProtocol", bound=RpcServiceProtocol)
+_T_ApiProtocol = TypeVar("_T_ApiProtocol", bound=ApiProtocol)
 
 RpcInfo = Tuple[Type[RpcApiProtocol], int]
 
 
 class ServiceException(Exception):
     pass
 
 
-class Service(Generic[_T_RpcServiceProtocol]):
+class Service(Generic[_T_RpcServiceProtocol, _T_ApiProtocol]):
     def __init__(
         self,
         root_path: Path,
         node: _T_RpcServiceProtocol,
-        peer_api: Any,
+        peer_api: _T_ApiProtocol,
         node_type: NodeType,
         advertised_port: int,
         service_name: str,
         network_id: str,
         *,
         config: Dict[str, Any],
         upnp_ports: List[int] = [],
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_timelord.py` & `chia-blockchain-2.0.0b3/chia/server/start_timelord.py`

 * *Files 1% similar despite different names*

```diff
@@ -27,15 +27,15 @@
 
 
 def create_timelord_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     constants: ConsensusConstants,
     connect_to_daemon: bool = True,
-) -> Service[Timelord]:
+) -> Service[Timelord, TimelordAPI]:
     service_config = config[SERVICE_NAME]
 
     connect_peers = {
         UnresolvedPeerInfo(service_config["full_node_peer"]["host"], service_config["full_node_peer"]["port"])
     }
     overrides = service_config["network_overrides"]["constants"][service_config["selected_network"]]
     updated_constants = constants.replace_str_to_bytes(**overrides)
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/start_wallet.py` & `chia-blockchain-2.0.0b3/chia/server/start_wallet.py`

 * *Files 0% similar despite different names*

```diff
@@ -29,15 +29,15 @@
 
 def create_wallet_service(
     root_path: pathlib.Path,
     config: Dict[str, Any],
     consensus_constants: ConsensusConstants,
     keychain: Optional[Keychain] = None,
     connect_to_daemon: bool = True,
-) -> Service[WalletNode]:
+) -> Service[WalletNode, WalletNodeAPI]:
     service_config = config[SERVICE_NAME]
 
     overrides = service_config["network_overrides"]["constants"][service_config["selected_network"]]
     updated_constants = consensus_constants.replace_str_to_bytes(**overrides)
     if "short_sync_blocks_behind_threshold" not in service_config:
         service_config["short_sync_blocks_behind_threshold"] = 20
```

### Comparing `chia-blockchain-2.0.0b1/chia/server/upnp.py` & `chia-blockchain-2.0.0b3/chia/server/upnp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/server/ws_connection.py` & `chia-blockchain-2.0.0b3/chia/server/ws_connection.py`

 * *Files 0% similar despite different names*

```diff
@@ -9,21 +9,23 @@
 from dataclasses import dataclass, field
 from secrets import token_bytes
 from typing import Any, Awaitable, Callable, Dict, List, Optional, Set, Tuple, Union
 
 from aiohttp import ClientSession, WSCloseCode, WSMessage, WSMsgType
 from aiohttp.client import ClientWebSocketResponse
 from aiohttp.web import WebSocketResponse
+from packaging.version import Version
 from typing_extensions import Protocol, final
 
 from chia.cmds.init_funcs import chia_full_version_str
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.protocols.protocol_state_machine import message_response_ok
 from chia.protocols.protocol_timing import API_EXCEPTION_BAN_SECONDS, INTERNAL_PROTOCOL_ERROR_BAN_SECONDS
 from chia.protocols.shared_protocol import Capability, Handshake
+from chia.server.api_protocol import ApiProtocol
 from chia.server.capabilities import known_active_capabilities
 from chia.server.outbound_message import Message, NodeType, make_msg
 from chia.server.rate_limits import RateLimiter
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.peer_info import PeerInfo
 from chia.util.api_decorators import get_metadata
 from chia.util.errors import Err, ProtocolError
@@ -61,15 +63,15 @@
     """
     Represents a connection to another node. Local host and port are ours, while peer host and
     port are the host and port of the peer that we are connected to. Node_id and connection_type are
     set after the handshake is performed in this connection.
     """
 
     ws: WebSocket = field(repr=False)
-    api: Any = field(repr=False)
+    api: ApiProtocol = field(repr=False)
     local_type: NodeType
     local_port: int
     local_capabilities_for_handshake: List[Tuple[uint16, str]] = field(repr=False)
     local_capabilities: List[Capability]
     peer_info: PeerInfo
     peer_node_id: bytes32
     log: logging.Logger = field(repr=False)
@@ -95,56 +97,54 @@
     bytes_written: int = 0
     last_message_time: float = 0
 
     peer_server_port: Optional[uint16] = None
     inbound_task: Optional[asyncio.Task[None]] = field(default=None, repr=False)
     incoming_message_task: Optional[asyncio.Task[None]] = field(default=None, repr=False)
     outbound_task: Optional[asyncio.Task[None]] = field(default=None, repr=False)
-    active: bool = False  # once handshake is successful this will be changed to True
     _close_event: asyncio.Event = field(default_factory=asyncio.Event, repr=False)
     session: Optional[ClientSession] = field(default=None, repr=False)
 
     pending_requests: Dict[uint16, asyncio.Event] = field(default_factory=dict, repr=False)
     request_results: Dict[uint16, Message] = field(default_factory=dict, repr=False)
     closed: bool = False
     connection_type: Optional[NodeType] = None
     request_nonce: uint16 = uint16(0)
     peer_capabilities: List[Capability] = field(default_factory=list)
     # Used by the Chia Seeder.
-    version: str = field(default_factory=str)
-    protocol_version: str = field(default_factory=str)
+    version: Version = field(default_factory=lambda: Version("0"))
+    protocol_version: Version = field(default_factory=lambda: Version("0"))
 
     log_rate_limit_last_time: Dict[ProtocolMessageTypes, float] = field(
         default_factory=create_default_last_message_time_dict,
         repr=False,
     )
 
     @classmethod
     def create(
         cls,
         local_type: NodeType,
         ws: WebSocket,
-        api: Any,
+        api: ApiProtocol,
         server_port: int,
         log: logging.Logger,
         is_outbound: bool,
         received_message_callback: Optional[ConnectionCallback],
-        peer_host: str,
         close_callback: Optional[ConnectionClosedCallbackProtocol],
         peer_id: bytes32,
         inbound_rate_limit_percent: int,
         outbound_rate_limit_percent: int,
         local_capabilities_for_handshake: List[Tuple[uint16, str]],
         session: Optional[ClientSession] = None,
     ) -> WSChiaConnection:
         assert ws._writer is not None
         peername = ws._writer.transport.get_extra_info("peername")
 
         if peername is None:
-            raise ValueError(f"Was not able to get peername from {peer_host}")
+            raise ValueError(f"Was not able to get peername for {peer_id}")
 
         if is_outbound:
             request_nonce = uint16(0)
         else:
             # Different nonce to reduce chances of overlap. Each peer will increment the nonce by one for each
             # request. The receiving peer (not is_outbound), will use 2^15 to 2^16 - 1
             request_nonce = uint16(2**15)
@@ -152,15 +152,15 @@
         return cls(
             ws=ws,
             api=api,
             local_type=local_type,
             local_port=server_port,
             local_capabilities_for_handshake=local_capabilities_for_handshake,
             local_capabilities=known_active_capabilities(local_capabilities_for_handshake),
-            peer_info=PeerInfo(peer_host, peername[1]),
+            peer_info=PeerInfo(peername[0], peername[1]),
             peer_node_id=peer_id,
             log=log,
             close_callback=close_callback,
             request_nonce=request_nonce,
             outbound_rate_limiter=RateLimiter(incoming=False, percentage_of_limit=outbound_rate_limit_percent),
             inbound_rate_limiter=RateLimiter(incoming=True, percentage_of_limit=inbound_rate_limit_percent),
             is_outbound=is_outbound,
@@ -215,16 +215,16 @@
 
             if message_type != ProtocolMessageTypes.handshake:
                 raise ProtocolError(Err.INVALID_HANDSHAKE)
 
             if inbound_handshake.network_id != network_id:
                 raise ProtocolError(Err.INCOMPATIBLE_NETWORK_ID)
 
-            self.version = inbound_handshake.software_version
-            self.protocol_version = inbound_handshake.protocol_version
+            self.version = Version(inbound_handshake.software_version)
+            self.protocol_version = Version(inbound_handshake.protocol_version)
             self.peer_server_port = inbound_handshake.server_port
             self.connection_type = NodeType(inbound_handshake.node_type)
             # "1" means capability is enabled
             self.peer_capabilities = known_active_capabilities(inbound_handshake.capabilities)
         else:
             try:
                 message = await self._read_one_message()
@@ -243,14 +243,16 @@
             if message_type != ProtocolMessageTypes.handshake:
                 raise ProtocolError(Err.INVALID_HANDSHAKE)
 
             inbound_handshake = Handshake.from_bytes(message.data)
             if inbound_handshake.network_id != network_id:
                 raise ProtocolError(Err.INCOMPATIBLE_NETWORK_ID)
             await self._send_message(outbound_handshake)
+            self.version = Version(inbound_handshake.software_version)
+            self.protocol_version = Version(inbound_handshake.protocol_version)
             self.peer_server_port = inbound_handshake.server_port
             self.connection_type = NodeType(inbound_handshake.node_type)
             # "1" means capability is enabled
             self.peer_capabilities = known_active_capabilities(inbound_handshake.capabilities)
 
         self.outbound_task = asyncio.create_task(self.outbound_handler())
         self.inbound_task = asyncio.create_task(self.inbound_handler())
@@ -368,17 +370,17 @@
 
             metadata = get_metadata(function=f)
             if metadata is None:
                 self.log.error(f"Peer trying to call non api function {message_type}")
                 raise ProtocolError(Err.INVALID_PROTOCOL_MESSAGE, [message_type])
 
             # If api is not ready ignore the request
-            if hasattr(self.api, "api_ready"):
-                if self.api.api_ready is False:
-                    return None
+            if not self.api.ready():
+                self.log.warning(f"API not ready, ignore request: {full_message}")
+                return None
 
             timeout: Optional[int] = 600
             if metadata.execute_task:
                 # Don't timeout on methods with execute_task decorator, these need to run fully
                 self.execute_tasks.add(task_id)
                 timeout = None
 
@@ -669,15 +671,15 @@
             self.log.error(f"Unexpected WebSocket message type: {message}")
             asyncio.create_task(self.close())
             await asyncio.sleep(3)
         return None
 
     # Used by the Chia Seeder.
     def get_version(self) -> str:
-        return self.version
+        return str(self.version)
 
     def get_tls_version(self) -> str:
         ssl_obj = self._get_extra_info("ssl_object")
         if ssl_obj is not None:
             return str(ssl_obj.version())
         else:
             return "unknown"
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/block_tools.py` & `chia-blockchain-2.0.0b3/chia/simulator/block_tools.py`

 * *Files 0% similar despite different names*

```diff
@@ -42,18 +42,18 @@
 from chia.daemon.keychain_proxy import KeychainProxy, connect_to_keychain_and_validate, wrap_local_keychain
 from chia.full_node.bundle_tools import (
     best_solution_generator_from_template,
     detect_potential_template_generator,
     simple_solution_generator,
 )
 from chia.full_node.signage_point import SignagePoint
-from chia.plotters.chiapos import Params
 from chia.plotting.create_plots import PlotKeys, create_plots
 from chia.plotting.manager import PlotManager
 from chia.plotting.util import (
+    Params,
     PlotRefreshEvents,
     PlotRefreshResult,
     PlotsRefreshParameter,
     add_plot_directory,
     parse_plot_info,
 )
 from chia.server.server import ssl_context_for_client
@@ -109,14 +109,15 @@
 )
 from chia.util.default_root import DEFAULT_ROOT_PATH
 from chia.util.errors import Err
 from chia.util.hash import std_hash
 from chia.util.ints import uint8, uint16, uint32, uint64, uint128
 from chia.util.keychain import Keychain, bytes_to_mnemonic
 from chia.util.prev_transaction_block import get_prev_transaction_block
+from chia.util.ssl_check import fix_ssl
 from chia.util.vdf_prover import get_vdf_info_and_proof
 from chia.wallet.derive_keys import (
     master_sk_to_farmer_sk,
     master_sk_to_local_sk,
     master_sk_to_pool_sk,
     master_sk_to_wallet_sk,
 )
@@ -173,21 +174,21 @@
     _block_cache_difficulty: uint64
     _block_cache: Dict[bytes32, BlockRecord]
 
     def __init__(
         self,
         constants: ConsensusConstants = test_constants,
         root_path: Optional[Path] = None,
-        const_dict=None,
+        const_dict: Optional[Dict[str, int]] = None,
         keychain: Optional[Keychain] = None,
-        config_overrides: Optional[Dict] = None,
+        config_overrides: Optional[Dict[str, Any]] = None,
         automated_testing: bool = True,
         plot_dir: str = "test-plots",
         log: logging.Logger = logging.getLogger(__name__),
-    ):
+    ) -> None:
         self._block_cache_header = bytes32([0] * 32)
 
         self._tempdir = None
         if root_path is None:
             self._tempdir = tempfile.TemporaryDirectory()
             root_path = Path(self._tempdir.name)
 
@@ -210,14 +211,15 @@
             ] = get_next_nodes_certs_and_keys()
             create_default_chia_config(root_path)
             create_all_ssl(
                 root_path,
                 private_ca_crt_and_key=self.ssl_ca_cert_and_key_wrapper.collateral.cert_and_key,
                 node_certs_and_keys=self.ssl_nodes_certs_and_keys_wrapper.collateral.certs_and_keys,
             )
+            fix_ssl(root_path)
             with lock_config(root_path=root_path, filename="config.yaml"):
                 path = config_path_for_filename(root_path=root_path, filename="config.yaml")
                 path.write_text(path.read_text().replace("localhost", "127.0.0.1"))
         self._config = load_config(self.root_path, "config.yaml")
         if automated_testing:
             if config_overrides is None:
                 config_overrides = {}
@@ -251,15 +253,15 @@
         self.temp_dir: Path = get_plot_tmp_dir(self.plot_dir_name, self.automated_testing)
         self.plot_dir.mkdir(parents=True, exist_ok=True)
         self.temp_dir.mkdir(parents=True, exist_ok=True)
         self.expected_plots: Dict[bytes32, Path] = {}
         self.created_plots: int = 0
         self.total_result = PlotRefreshResult()
 
-        def test_callback(event: PlotRefreshEvents, update_result: PlotRefreshResult):
+        def test_callback(event: PlotRefreshEvents, update_result: PlotRefreshResult) -> None:
             assert update_result.duration < 15
             if event == PlotRefreshEvents.started:
                 self.total_result = PlotRefreshResult()
 
             if event == PlotRefreshEvents.batch_processed:
                 self.total_result.loaded += update_result.loaded
                 self.total_result.processed += update_result.processed
@@ -277,15 +279,15 @@
         self.plot_manager: PlotManager = PlotManager(
             self.root_path,
             refresh_parameter=PlotsRefreshParameter(batch_size=uint32(2)),
             refresh_callback=test_callback,
             match_str=str(self.plot_dir.relative_to(DEFAULT_ROOT_PATH.parent)) if not automated_testing else None,
         )
 
-    async def setup_keys(self, fingerprint: Optional[int] = None, reward_ph: Optional[bytes32] = None):
+    async def setup_keys(self, fingerprint: Optional[int] = None, reward_ph: Optional[bytes32] = None) -> None:
         keychain_proxy: Optional[KeychainProxy]
         try:
             if self.local_keychain:
                 keychain_proxy = wrap_local_keychain(self.local_keychain, log=self.log)
             elif not self.automated_testing and fingerprint is not None:
                 keychain_proxy = await connect_to_keychain_and_validate(self.root_path, self.log)
             else:  # if we are automated testing or if we don't have a fingerprint.
@@ -331,15 +333,15 @@
                 raise RuntimeError("Keys not generated. Run `chia keys generate`")
 
             self.plot_manager.set_public_keys(self.farmer_pubkeys, self.pool_pubkeys)
         finally:
             if keychain_proxy is not None:
                 await keychain_proxy.close()  # close the keychain proxy
 
-    def change_config(self, new_config: Dict):
+    def change_config(self, new_config: Dict[str, Any]) -> None:
         self._config = new_config
         overrides = self._config["network_overrides"]["constants"][self._config["selected_network"]]
         updated_constants = self.constants.replace_str_to_bytes(**overrides)
         self.constants = updated_constants
         with lock_config(self.root_path, "config.yaml"):
             save_config(self.root_path, "config.yaml", self._config)
 
@@ -383,16 +385,16 @@
         await self.refresh_plots()
         assert len(self.plot_manager.plots) == len(self.expected_plots)
         return existing_plots
 
     async def new_plot(
         self,
         pool_contract_puzzle_hash: Optional[bytes32] = None,
-        path: Path = None,
-        tmp_dir: Path = None,
+        path: Optional[Path] = None,
+        tmp_dir: Optional[Path] = None,
         plot_keys: Optional[PlotKeys] = None,
         exclude_plots: bool = False,
         plot_size: int = 20,
         bitfield: bool = True,
     ) -> BlockToolsNewPlotResult:
         final_dir = self.plot_dir
         if path is not None:
@@ -466,22 +468,22 @@
         self.plot_manager.trigger_refresh()
         assert self.plot_manager.needs_refresh()
         self.plot_manager.start_refreshing(sleep_interval_ms=1)
         await time_out_assert_custom_interval(10, 0.001, self.plot_manager.needs_refresh, value=False)
         self.plot_manager.stop_refreshing()
         assert not self.plot_manager.needs_refresh()
 
-    async def delete_plot(self, plot_id: bytes32):
+    async def delete_plot(self, plot_id: bytes32) -> None:
         assert plot_id in self.expected_plots
         self.expected_plots[plot_id].unlink()
         del self.expected_plots[plot_id]
         await self.refresh_plots()
 
     @property
-    def config(self) -> Dict:
+    def config(self) -> Dict[str, Any]:
         return copy.deepcopy(self._config)
 
     def get_daemon_ssl_context(self) -> ssl.SSLContext:
         crt_path = self.root_path / self.config["daemon_ssl"]["private_crt"]
         key_path = self.root_path / self.config["daemon_ssl"]["private_key"]
         ca_cert_path = self.root_path / self.config["private_ssl_ca"]["crt"]
         ca_key_path = self.root_path / self.config["private_ssl_ca"]["key"]
@@ -535,15 +537,15 @@
 
     def get_pool_wallet_tool(self) -> WalletTool:
         return WalletTool(self.constants, self.pool_master_sk)
 
     def get_consecutive_blocks(
         self,
         num_blocks: int,
-        block_list_input: List[FullBlock] = None,
+        block_list_input: Optional[List[FullBlock]] = None,
         *,
         farmer_reward_puzzle_hash: Optional[bytes32] = None,
         pool_reward_puzzle_hash: Optional[bytes32] = None,
         transaction_data: Optional[SpendBundle] = None,
         seed: bytes = b"",
         time_per_block: Optional[float] = None,
         force_overflow: bool = False,
@@ -1655,16 +1657,16 @@
     get_plot_signature: Callable[[bytes32, G1Element], G2Element],
     get_pool_signature: Callable[[PoolTarget, Optional[G1Element]], Optional[G2Element]],
     finished_sub_slots: List[EndOfSubSlotBundle],
     signage_point: SignagePoint,
     prev_block: BlockRecord,
     seed: bytes = b"",
     *,
-    overflow_cc_challenge: bytes32 = None,
-    overflow_rc_challenge: bytes32 = None,
+    overflow_cc_challenge: Optional[bytes32] = None,
+    overflow_rc_challenge: Optional[bytes32] = None,
     normalized_to_identity_cc_ip: bool = False,
     current_time: bool = False,
     block_time_residual: float = 0.0,
 ) -> Tuple[FullBlock, BlockRecord, float]:
     time_delta, block_time_residual = round_timestamp(time_per_block, block_time_residual)
     if current_time is True:
         timestamp = uint64(max(int(time.time()), last_timestamp + time_delta))
@@ -2003,15 +2005,15 @@
     blocks: BlockchainInterface,
     seed: bytes = b"",
     block_generator: Optional[BlockGenerator] = None,
     aggregate_sig: G2Element = G2Element(),
     additions: Optional[List[Coin]] = None,
     removals: Optional[List[Coin]] = None,
     prev_block: Optional[BlockRecord] = None,
-    finished_sub_slots_input: List[EndOfSubSlotBundle] = None,
+    finished_sub_slots_input: Optional[List[EndOfSubSlotBundle]] = None,
 ) -> UnfinishedBlock:
     """
     Creates a new unfinished block using all the information available at the signage point. This will have to be
     modified using information from the infusion point.
 
     Args:
         constants: consensus constants being used for this chain
@@ -2146,34 +2148,34 @@
 # The daemon's listen port is configured in the config.yaml, and the only way a test can control which
 # listen port it uses is to write it to the config file.
 
 
 async def create_block_tools_async(
     constants: ConsensusConstants = test_constants,
     root_path: Optional[Path] = None,
-    const_dict=None,
+    const_dict: Optional[Dict[str, int]] = None,
     keychain: Optional[Keychain] = None,
-    config_overrides: Optional[Dict] = None,
+    config_overrides: Optional[Dict[str, Any]] = None,
 ) -> BlockTools:
     global create_block_tools_async_count
     create_block_tools_async_count += 1
     print(f"  create_block_tools_async called {create_block_tools_async_count} times")
     bt = BlockTools(constants, root_path, const_dict, keychain, config_overrides=config_overrides)
     await bt.setup_keys()
     await bt.setup_plots()
 
     return bt
 
 
 def create_block_tools(
     constants: ConsensusConstants = test_constants,
     root_path: Optional[Path] = None,
-    const_dict: Optional[Dict] = None,
+    const_dict: Optional[Dict[str, int]] = None,
     keychain: Optional[Keychain] = None,
-    config_overrides: Optional[Dict] = None,
+    config_overrides: Optional[Dict[str, Any]] = None,
 ) -> BlockTools:
     global create_block_tools_count
     create_block_tools_count += 1
     print(f"  create_block_tools called {create_block_tools_count} times")
     bt = BlockTools(constants, root_path, const_dict, keychain, config_overrides=config_overrides)
 
     asyncio.get_event_loop().run_until_complete(bt.setup_keys())
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/full_node_simulator.py` & `chia-blockchain-2.0.0b3/chia/simulator/full_node_simulator.py`

 * *Files 4% similar despite different names*

```diff
@@ -5,14 +5,15 @@
 import time
 from typing import Any, Collection, Dict, Iterator, List, Optional, Set, Tuple, Union
 
 import anyio
 
 from chia.consensus.block_record import BlockRecord
 from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
+from chia.consensus.blockchain import BlockchainMutexPriority
 from chia.consensus.multiprocess_validation import PreValidationResult
 from chia.full_node.full_node import FullNode
 from chia.full_node.full_node_api import FullNodeAPI
 from chia.rpc.rpc_server import default_get_connections
 from chia.server.outbound_message import NodeType
 from chia.simulator.block_tools import BlockTools
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol, GetAllCoinsProtocol, ReorgProtocol
@@ -140,15 +141,15 @@
 
     async def revert_block_height(self, new_height: uint32) -> None:
         """
         This completely deletes blocks from the blockchain.
         While reorgs are preferred, this is also an option
         Note: This does not broadcast the changes, and all wallets will need to be wiped.
         """
-        async with self.full_node._blockchain_lock_high_priority:
+        async with self.full_node.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             peak_height: Optional[uint32] = self.full_node.blockchain.get_peak_height()
             if peak_height is None:
                 raise ValueError("We can't revert without any blocks.")
             elif peak_height - 1 < new_height:
                 raise ValueError("Cannot revert to a height greater than the current peak height.")
             elif new_height < 1:
                 raise ValueError("Cannot revert to a height less than 1.")
@@ -175,15 +176,15 @@
                 dict_value: Tuple[uint128, int] = ph_total_amount[cr.coin.puzzle_hash]
                 ph_total_amount[cr.coin.puzzle_hash] = (uint128(cr.coin.amount + dict_value[0]), dict_value[1] + 1)
         return ph_total_amount
 
     async def farm_new_transaction_block(
         self, request: FarmNewBlockProtocol, force_wait_for_timestamp: bool = False
     ) -> FullBlock:
-        async with self.full_node._blockchain_lock_high_priority:
+        async with self.full_node.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             self.log.info("Farming new block!")
             current_blocks = await self.get_all_full_blocks()
             if len(current_blocks) == 0:
                 genesis = self.bt.get_consecutive_blocks(uint8(1))[0]
                 pre_validation_results: List[
                     PreValidationResult
                 ] = await self.full_node.blockchain.pre_validate_blocks_multiprocessing(
@@ -224,15 +225,15 @@
                 current_time=current_time,
                 previous_generator=self.full_node.full_node_store.previous_generator,
             )
         await self.full_node.add_block(more[-1])
         return more[-1]
 
     async def farm_new_block(self, request: FarmNewBlockProtocol, force_wait_for_timestamp: bool = False):
-        async with self.full_node._blockchain_lock_high_priority:
+        async with self.full_node.blockchain.priority_mutex.acquire(priority=BlockchainMutexPriority.high):
             self.log.info("Farming new block!")
             current_blocks = await self.get_all_full_blocks()
             if len(current_blocks) == 0:
                 genesis = self.bt.get_consecutive_blocks(uint8(1))[0]
                 pre_validation_results: List[
                     PreValidationResult
                 ] = await self.full_node.blockchain.pre_validate_blocks_multiprocessing(
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/keyring.py` & `chia-blockchain-2.0.0b3/chia/simulator/keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/setup_nodes.py` & `chia-blockchain-2.0.0b3/chia/simulator/setup_nodes.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,20 +1,22 @@
 from __future__ import annotations
 
 import asyncio
 import logging
 from pathlib import Path
-from typing import Any, AsyncGenerator, AsyncIterator, Dict, List, Optional, Tuple, Union
+from typing import Any, AsyncGenerator, AsyncIterator, Dict, List, Optional, Tuple, Union, cast
 
 from chia.consensus.constants import ConsensusConstants
 from chia.daemon.server import WebSocketServer
 from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
 from chia.full_node.full_node import FullNode
 from chia.full_node.full_node_api import FullNodeAPI
 from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
 from chia.protocols.shared_protocol import Capability
 from chia.server.server import ChiaServer
 from chia.server.start_service import Service
 from chia.simulator.block_tools import BlockTools, create_block_tools_async, test_constants
 from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.keyring import TempKeyring
 from chia.simulator.setup_services import (
@@ -27,23 +29,27 @@
     setup_vdf_client,
     setup_vdf_clients,
     setup_wallet_node,
 )
 from chia.simulator.socket import find_available_listen_port
 from chia.simulator.time_out_assert import time_out_assert_custom_interval
 from chia.timelord.timelord import Timelord
+from chia.timelord.timelord_api import TimelordAPI
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.peer_info import UnresolvedPeerInfo
 from chia.util.hash import std_hash
 from chia.util.ints import uint16, uint32
 from chia.util.keychain import Keychain
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 
 SimulatorsAndWallets = Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools]
-SimulatorsAndWalletsServices = Tuple[List[Service[FullNode]], List[Service[WalletNode]], BlockTools]
+SimulatorsAndWalletsServices = Tuple[
+    List[Service[FullNode, FullNodeSimulator]], List[Service[WalletNode, WalletNodeAPI]], BlockTools
+]
 
 
 def cleanup_keyring(keyring: TempKeyring) -> None:
     keyring.cleanup()
 
 
 log = logging.getLogger(__name__)
@@ -66,29 +72,29 @@
     consensus_constants: ConsensusConstants, db_version: int, self_hostname: str
 ) -> AsyncGenerator[Tuple[FullNodeAPI, FullNodeAPI, ChiaServer, ChiaServer, BlockTools], None]:
     """
     Setup and teardown of two full nodes, with blockchains and separate DBs.
     """
 
     with TempKeyring(populate=True) as keychain1, TempKeyring(populate=True) as keychain2:
-        bt1 = await create_block_tools_async(constants=test_constants, keychain=keychain1)
+        bt1 = await create_block_tools_async(constants=consensus_constants, keychain=keychain1)
         node_iters = [
             setup_full_node(
                 consensus_constants,
                 "blockchain_test.db",
                 self_hostname,
                 bt1,
                 simulator=False,
                 db_version=db_version,
             ),
             setup_full_node(
                 consensus_constants,
                 "blockchain_test_2.db",
                 self_hostname,
-                await create_block_tools_async(constants=test_constants, keychain=keychain2),
+                await create_block_tools_async(constants=consensus_constants, keychain=keychain2),
                 simulator=False,
                 db_version=db_version,
             ),
         ]
 
         service1 = await node_iters[0].__anext__()
         service2 = await node_iters[1].__anext__()
@@ -112,15 +118,15 @@
         keyring = TempKeyring(populate=True)
         keyrings_to_cleanup.append(keyring)
         node_iters.append(
             setup_full_node(
                 consensus_constants,
                 f"blockchain_test_{i}.db",
                 self_hostname,
-                await create_block_tools_async(constants=test_constants, keychain=keyring.get_keychain()),
+                await create_block_tools_async(constants=consensus_constants, keychain=keyring.get_keychain()),
                 simulator=False,
                 db_version=db_version,
             )
         )
     nodes = []
     for ni in node_iters:
         service = await ni.__anext__()
@@ -142,15 +148,15 @@
     xch_spam_amount: int = 1000000,
     *,
     key_seed: Optional[bytes32] = None,
     initial_num_public_keys: int = 5,
     db_version: int = 1,
     config_overrides: Optional[Dict[str, int]] = None,
     disable_capabilities: Optional[List[Capability]] = None,
-) -> AsyncGenerator[Tuple[List[FullNodeAPI], List[Tuple[WalletNode, ChiaServer]], BlockTools], None]:
+) -> AsyncGenerator[Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools], None]:
     with TempKeyring(populate=True) as keychain1, TempKeyring(populate=True) as keychain2:
         res = await setup_simulators_and_wallets_inner(
             db_version,
             dic,
             initial_num_public_keys,
             key_seed,
             keychain1,
@@ -185,15 +191,17 @@
     xch_spam_amount: int = 1000000,
     *,
     key_seed: Optional[bytes32] = None,
     initial_num_public_keys: int = 5,
     db_version: int = 1,
     config_overrides: Optional[Dict[str, int]] = None,
     disable_capabilities: Optional[List[Capability]] = None,
-) -> AsyncGenerator[Tuple[List[Service[FullNode]], List[Service[WalletNode]], BlockTools], None]:
+) -> AsyncGenerator[
+    Tuple[List[Service[FullNode, FullNodeSimulator]], List[Service[WalletNode, WalletNodeAPI]], BlockTools], None
+]:
     with TempKeyring(populate=True) as keychain1, TempKeyring(populate=True) as keychain2:
         res = await setup_simulators_and_wallets_inner(
             db_version,
             dic,
             initial_num_public_keys,
             key_seed,
             keychain1,
@@ -223,38 +231,43 @@
     spam_filter_after_n_txs: int,
     wallet_count: int,
     xch_spam_amount: int,
     config_overrides: Optional[Dict[str, int]],
     disable_capabilities: Optional[List[Capability]],
 ) -> Tuple[
     List[BlockTools],
-    List[AsyncGenerator[Union[Service[FullNode], Service[WalletNode]], None]],
-    List[Service[FullNode]],
-    List[Service[WalletNode]],
+    List[AsyncGenerator[Union[Service[FullNode, FullNodeSimulator], Service[WalletNode, WalletNodeAPI]], None]],
+    List[Service[FullNode, FullNodeSimulator]],
+    List[Service[WalletNode, WalletNodeAPI]],
 ]:
-    simulators: List[Service[FullNode]] = []
-    wallets: List[Service[WalletNode]] = []
-    node_iters: List[AsyncGenerator[Union[Service[FullNode], Service[WalletNode]], None]] = []
+    simulators: List[Service[FullNode, FullNodeSimulator]] = []
+    wallets: List[Service[WalletNode, WalletNodeAPI]] = []
+    node_iters: List[
+        AsyncGenerator[Union[Service[FullNode, FullNodeSimulator], Service[WalletNode, WalletNodeAPI]], None]
+    ] = []
     bt_tools: List[BlockTools] = []
     consensus_constants: ConsensusConstants = constants_for_dic(dic)
     for index in range(0, simulator_count):
         db_name = f"blockchain_test_{index}_sim_and_wallets.db"
         bt_tools.append(
             await create_block_tools_async(
                 consensus_constants, const_dict=dic, keychain=keychain1, config_overrides=config_overrides
             )
         )  # block tools modifies constants
-        sim = setup_full_node(
-            consensus_constants=bt_tools[index].constants,
-            db_name=db_name,
-            self_hostname=bt_tools[index].config["self_hostname"],
-            local_bt=bt_tools[index],
-            simulator=True,
-            db_version=db_version,
-            disable_capabilities=disable_capabilities,
+        sim = cast(
+            AsyncGenerator[Service[FullNode, FullNodeSimulator], None],
+            setup_full_node(
+                consensus_constants=bt_tools[index].constants,
+                db_name=db_name,
+                self_hostname=bt_tools[index].config["self_hostname"],
+                local_bt=bt_tools[index],
+                simulator=True,
+                db_version=db_version,
+                disable_capabilities=disable_capabilities,
+            ),
         )
         service = await sim.__anext__()
         simulators.append(service)
         node_iters.append(sim)
     for index in range(0, wallet_count):
         if key_seed is None:
             seed = std_hash(uint32(index))
@@ -285,15 +298,15 @@
 async def setup_farmer_multi_harvester(
     block_tools: BlockTools,
     harvester_count: int,
     temp_dir: Path,
     consensus_constants: ConsensusConstants,
     *,
     start_services: bool,
-) -> AsyncIterator[Tuple[List[Service[Harvester]], Service[Farmer], BlockTools]]:
+) -> AsyncIterator[Tuple[List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools]]:
     farmer_node_iterators = [
         setup_farmer(
             block_tools,
             temp_dir / "farmer",
             block_tools.config["self_hostname"],
             consensus_constants,
             port=uint16(0),
@@ -338,15 +351,17 @@
 
 async def setup_full_system(
     consensus_constants: ConsensusConstants,
     shared_b_tools: BlockTools,
     b_tools: Optional[BlockTools] = None,
     b_tools_1: Optional[BlockTools] = None,
     db_version: int = 1,
-) -> AsyncGenerator[Tuple[Any, Any, Harvester, Farmer, Any, Service[Timelord], object, object, Any, ChiaServer], None]:
+) -> AsyncGenerator[
+    Tuple[Any, Any, Harvester, Farmer, Any, Service[Timelord, TimelordAPI], object, object, Any, ChiaServer], None
+]:
     with TempKeyring(populate=True) as keychain1, TempKeyring(populate=True) as keychain2:
         daemon_ws, node_iters, ret = await setup_full_system_inner(
             b_tools, b_tools_1, False, consensus_constants, db_version, keychain1, keychain2, shared_b_tools
         )
 
         yield ret
 
@@ -357,15 +372,25 @@
     consensus_constants: ConsensusConstants,
     shared_b_tools: BlockTools,
     b_tools: Optional[BlockTools] = None,
     b_tools_1: Optional[BlockTools] = None,
     db_version: int = 1,
 ) -> AsyncGenerator[
     Tuple[
-        Any, Any, Harvester, Farmer, Any, Service[Timelord], object, object, Any, ChiaServer, Optional[WebSocketServer]
+        Any,
+        Any,
+        Harvester,
+        Farmer,
+        Any,
+        Service[Timelord, TimelordAPI],
+        object,
+        object,
+        Any,
+        ChiaServer,
+        Optional[WebSocketServer],
     ],
     None,
 ]:
     with TempKeyring(populate=True) as keychain1, TempKeyring(populate=True) as keychain2:
         daemon_ws, node_iters, ret = await setup_full_system_inner(
             b_tools, b_tools_1, True, consensus_constants, db_version, keychain1, keychain2, shared_b_tools
         )
@@ -383,20 +408,20 @@
     db_version: int,
     keychain1: Keychain,
     keychain2: Keychain,
     shared_b_tools: BlockTools,
 ) -> Tuple[
     Optional[WebSocketServer],
     List[AsyncGenerator[object, None]],
-    Tuple[Any, Any, Harvester, Farmer, Any, Service[Timelord], object, object, Any, ChiaServer],
+    Tuple[Any, Any, Harvester, Farmer, Any, Service[Timelord, TimelordAPI], object, object, Any, ChiaServer],
 ]:
     if b_tools is None:
-        b_tools = await create_block_tools_async(constants=test_constants, keychain=keychain1)
+        b_tools = await create_block_tools_async(constants=consensus_constants, keychain=keychain1)
     if b_tools_1 is None:
-        b_tools_1 = await create_block_tools_async(constants=test_constants, keychain=keychain2)
+        b_tools_1 = await create_block_tools_async(constants=consensus_constants, keychain=keychain2)
     daemon_ws = None
     if connect_to_daemon:
         daemon_iter = setup_daemon(btools=b_tools)
         daemon_ws = await daemon_iter.__anext__()
     # Start the introducer first so we can find out the port, and use that for the nodes
     introducer_iter = setup_introducer(shared_b_tools, uint16(0))
     introducer_service = await introducer_iter.__anext__()
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/setup_services.py` & `chia-blockchain-2.0.0b3/chia/simulator/setup_services.py`

 * *Files 2% similar despite different names*

```diff
@@ -10,37 +10,46 @@
 from secrets import token_bytes
 from typing import Any, AsyncGenerator, Dict, Iterator, List, Optional, Tuple
 
 from chia.cmds.init_funcs import init
 from chia.consensus.constants import ConsensusConstants
 from chia.daemon.server import WebSocketServer, daemon_launch_lock_path
 from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
 from chia.full_node.full_node import FullNode
+from chia.full_node.full_node_api import FullNodeAPI
 from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
 from chia.introducer.introducer import Introducer
+from chia.introducer.introducer_api import IntroducerAPI
 from chia.protocols.shared_protocol import Capability, capabilities
+from chia.seeder.crawler import Crawler
+from chia.seeder.crawler_api import CrawlerAPI
+from chia.seeder.start_crawler import create_full_node_crawler_service
 from chia.server.start_farmer import create_farmer_service
 from chia.server.start_full_node import create_full_node_service
 from chia.server.start_harvester import create_harvester_service
 from chia.server.start_introducer import create_introducer_service
 from chia.server.start_service import Service
 from chia.server.start_timelord import create_timelord_service
 from chia.server.start_wallet import create_wallet_service
 from chia.simulator.block_tools import BlockTools
 from chia.simulator.keyring import TempKeyring
 from chia.simulator.start_simulator import create_full_node_simulator_service
 from chia.timelord.timelord import Timelord
+from chia.timelord.timelord_api import TimelordAPI
 from chia.timelord.timelord_launcher import kill_processes, spawn_process
 from chia.types.peer_info import UnresolvedPeerInfo
 from chia.util.bech32m import encode_puzzle_hash
 from chia.util.config import config_path_for_filename, lock_and_load_config, save_config
 from chia.util.ints import uint16
 from chia.util.keychain import bytes_to_mnemonic
 from chia.util.lock import Lockfile
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 
 log = logging.getLogger(__name__)
 
 
 @contextmanager
 def create_lock_and_load_config(certs_path: Path, root_path: Path) -> Iterator[Dict[str, Any]]:
     init(None, root_path)
@@ -94,17 +103,19 @@
     introducer_port: Optional[int] = None,
     simulator: bool = False,
     send_uncompact_interval: int = 0,
     sanitize_weight_proof_only: bool = False,
     connect_to_daemon: bool = False,
     db_version: int = 1,
     disable_capabilities: Optional[List[Capability]] = None,
-) -> AsyncGenerator[Service[FullNode], None]:
+    *,
+    reuse_db: bool = False,
+) -> AsyncGenerator[Service[FullNode, FullNodeAPI], None]:
     db_path = local_bt.root_path / f"{db_name}"
-    if db_path.exists():
+    if not reuse_db and db_path.exists():
         # TODO: remove (maybe) when fixed https://github.com/python/cpython/issues/97641
         gc.collect()
         db_path.unlink()
 
         if db_version > 1:
             with sqlite3.connect(db_path) as connection:
                 connection.execute("CREATE TABLE database_version(version int)")
@@ -153,33 +164,59 @@
         )
     await service.start()
 
     yield service
 
     service.stop()
     await service.wait_closed()
-    if db_path.exists():
+    if not reuse_db and db_path.exists():
         # TODO: remove (maybe) when fixed https://github.com/python/cpython/issues/97641
         gc.collect()
         db_path.unlink()
 
 
+async def setup_crawler(
+    bt: BlockTools,
+) -> AsyncGenerator[Service[Crawler, CrawlerAPI], None]:
+    config = bt.config
+    service_config = config["seeder"]
+    service_config["selected_network"] = "testnet0"
+    service_config["port"] = 0
+    service_config["start_rpc_server"] = False
+    overrides = service_config["network_overrides"]["constants"][service_config["selected_network"]]
+    updated_constants = bt.constants.replace_str_to_bytes(**overrides)
+    bt.change_config(config)
+    service = create_full_node_crawler_service(
+        bt.root_path,
+        config,
+        updated_constants,
+        connect_to_daemon=False,
+    )
+    await service.start()
+
+    try:
+        yield service
+    finally:
+        service.stop()
+        await service.wait_closed()
+
+
 # Note: convert these setup functions to fixtures, or push it one layer up,
 # keeping these usable independently?
 async def setup_wallet_node(
     self_hostname: str,
     consensus_constants: ConsensusConstants,
     local_bt: BlockTools,
     spam_filter_after_n_txs: Optional[int] = 200,
     xch_spam_amount: int = 1000000,
     full_node_port: Optional[uint16] = None,
     introducer_port: Optional[uint16] = None,
     key_seed: Optional[bytes] = None,
     initial_num_public_keys: int = 5,
-) -> AsyncGenerator[Service[WalletNode], None]:
+) -> AsyncGenerator[Service[WalletNode, WalletNodeAPI], None]:
     with TempKeyring(populate=True) as keychain:
         config = local_bt.config
         service_config = config["wallet"]
         service_config["testing"] = True
         service_config["port"] = 0
         service_config["rpc_port"] = 0
         service_config["initial_num_public_keys"] = initial_num_public_keys
@@ -241,15 +278,15 @@
 
 async def setup_harvester(
     b_tools: BlockTools,
     root_path: Path,
     farmer_peer: Optional[UnresolvedPeerInfo],
     consensus_constants: ConsensusConstants,
     start_service: bool = True,
-) -> AsyncGenerator[Service[Harvester], None]:
+) -> AsyncGenerator[Service[Harvester, HarvesterAPI], None]:
     with create_lock_and_load_config(b_tools.root_path / "config" / "ssl" / "ca", root_path) as config:
         config["logging"]["log_stdout"] = True
         config["selected_network"] = "testnet0"
         config["harvester"]["selected_network"] = "testnet0"
         config["harvester"]["port"] = 0
         config["harvester"]["rpc_port"] = 0
         config["harvester"]["plot_directories"] = [str(b_tools.plot_dir.resolve())]
@@ -275,15 +312,15 @@
     b_tools: BlockTools,
     root_path: Path,
     self_hostname: str,
     consensus_constants: ConsensusConstants,
     full_node_port: Optional[uint16] = None,
     start_service: bool = True,
     port: uint16 = uint16(0),
-) -> AsyncGenerator[Service[Farmer], None]:
+) -> AsyncGenerator[Service[Farmer, FarmerAPI], None]:
     with create_lock_and_load_config(b_tools.root_path / "config" / "ssl" / "ca", root_path) as root_config:
         root_config["logging"]["log_stdout"] = True
         root_config["selected_network"] = "testnet0"
         root_config["farmer"]["selected_network"] = "testnet0"
         save_config(root_path, "config.yaml", root_config)
     service_config = root_config["farmer"]
     config_pool = root_config["pool"]
@@ -314,15 +351,15 @@
 
     yield service
 
     service.stop()
     await service.wait_closed()
 
 
-async def setup_introducer(bt: BlockTools, port: int) -> AsyncGenerator[Service[Introducer], None]:
+async def setup_introducer(bt: BlockTools, port: int) -> AsyncGenerator[Service[Introducer, IntroducerAPI], None]:
     service = create_introducer_service(
         bt.root_path,
         bt.config,
         advertised_port=port,
         connect_to_daemon=False,
     )
 
@@ -377,15 +414,15 @@
 
 async def setup_timelord(
     full_node_port: int,
     sanitizer: bool,
     consensus_constants: ConsensusConstants,
     b_tools: BlockTools,
     vdf_port: uint16 = uint16(0),
-) -> AsyncGenerator[Service[Timelord], None]:
+) -> AsyncGenerator[Service[Timelord, TimelordAPI], None]:
     config = b_tools.config
     service_config = config["timelord"]
     service_config["full_node_peer"]["port"] = full_node_port
     service_config["bluebox_mode"] = sanitizer
     service_config["fast_algorithm"] = False
     service_config["vdf_server"]["port"] = vdf_port
     service_config["start_rpc_server"] = True
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/simulator_constants.py` & `chia-blockchain-2.0.0b3/chia/simulator/simulator_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/simulator_full_node_rpc_api.py` & `chia-blockchain-2.0.0b3/chia/simulator/simulator_full_node_rpc_api.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,98 +1,102 @@
 from __future__ import annotations
 
 from secrets import token_bytes
 from typing import Dict, List
 
 from chia.rpc.full_node_rpc_api import FullNodeRpcApi
 from chia.rpc.rpc_server import Endpoint, EndpointResult
+from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol, GetAllCoinsProtocol, ReorgProtocol
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
 from chia.types.full_block import FullBlock
 from chia.util.bech32m import decode_puzzle_hash
 from chia.util.ints import uint32
 
 
 class SimulatorFullNodeRpcApi(FullNodeRpcApi):
+    @property
+    def simulator_api(self) -> FullNodeSimulator:
+        assert isinstance(self.service.server.api, FullNodeSimulator)
+        return self.service.server.api
+
     def get_routes(self) -> Dict[str, Endpoint]:
         routes = super().get_routes()
         routes["/get_all_blocks"] = self.get_all_blocks
         routes["/farm_block"] = self.farm_block
         routes["/set_auto_farming"] = self.set_auto_farming
         routes["/get_auto_farming"] = self.get_auto_farming
         routes["/get_farming_ph"] = self.get_farming_ph
         routes["/get_all_coins"] = self.get_all_coins
         routes["/get_all_puzzle_hashes"] = self.get_all_puzzle_hashes
         routes["/revert_blocks"] = self.revert_blocks
         routes["/reorg_blocks"] = self.reorg_blocks
         return routes
 
     async def get_all_blocks(self, _request: Dict[str, object]) -> EndpointResult:
-        all_blocks: List[FullBlock] = await self.service.server.api.get_all_full_blocks()
+        all_blocks: List[FullBlock] = await self.simulator_api.get_all_full_blocks()
         return {"blocks": [block.to_json_dict() for block in all_blocks]}
 
     async def farm_block(self, _request: Dict[str, object]) -> EndpointResult:
         request_address = str(_request["address"])
         guarantee_tx_block = bool(_request.get("guarantee_tx_block", False))
         blocks = int(str(_request.get("blocks", 1)))  # mypy made me do this
         ph = decode_puzzle_hash(request_address)
         req = FarmNewBlockProtocol(ph)
         cur_height = self.service.blockchain.get_peak_height()
         if guarantee_tx_block:
             for i in range(blocks):  # these can only be tx blocks
-                await self.service.server.api.farm_new_transaction_block(req)
+                await self.simulator_api.farm_new_transaction_block(req)
         else:
             for i in range(blocks):  # these can either be full blocks or tx blocks
-                await self.service.server.api.farm_new_block(req)
+                await self.simulator_api.farm_new_block(req)
         return {"new_peak_height": (cur_height if cur_height is not None else 0) + blocks}
 
     async def set_auto_farming(self, _request: Dict[str, object]) -> EndpointResult:
         auto_farm = bool(_request["auto_farm"])
-        result = await self.service.server.api.update_autofarm_config(auto_farm)
+        result = await self.simulator_api.update_autofarm_config(auto_farm)
         return {"auto_farm_enabled": result}
 
     async def get_auto_farming(self, _request: Dict[str, object]) -> EndpointResult:
-        return {"auto_farm_enabled": self.service.server.api.auto_farm}
+        return {"auto_farm_enabled": self.simulator_api.auto_farm}
 
     async def get_farming_ph(self, _request: Dict[str, object]) -> EndpointResult:
-        return {"puzzle_hash": self.service.server.api.bt.farmer_ph.hex()}
+        return {"puzzle_hash": self.simulator_api.bt.farmer_ph.hex()}
 
     async def get_all_coins(self, _request: Dict[str, object]) -> EndpointResult:
         p_request = GetAllCoinsProtocol(bool((_request.get("include_spent_coins", False))))
-        result: List[CoinRecord] = await self.service.server.api.get_all_coins(p_request)
+        result: List[CoinRecord] = await self.simulator_api.get_all_coins(p_request)
         return {"coin_records": [coin_record.to_json_dict() for coin_record in result]}
 
     async def get_all_puzzle_hashes(self, _request: Dict[str, object]) -> EndpointResult:
-        result = await self.service.server.api.get_all_puzzle_hashes()
+        result = await self.simulator_api.get_all_puzzle_hashes()
         return {
             "puzzle_hashes": {puzzle_hash.hex(): (amount, num_tx) for (puzzle_hash, (amount, num_tx)) in result.items()}
         }
 
     async def revert_blocks(self, _request: Dict[str, object]) -> EndpointResult:
         blocks = int(str(_request.get("num_of_blocks", 1)))  # number of blocks to revert
         all_blocks = bool(_request.get("delete_all_blocks", False))  # revert all blocks
         height = self.service.blockchain.get_peak_height()
         if height is None:
             raise ValueError("No blocks to revert")
         new_height = (height - blocks) if not all_blocks else 1
         assert new_height >= 1
-        await self.service.server.api.revert_block_height(new_height)
+        await self.simulator_api.revert_block_height(uint32(new_height))
         return {"new_peak_height": new_height}
 
     async def reorg_blocks(self, _request: Dict[str, object]) -> EndpointResult:
         fork_blocks = int(str(_request.get("num_of_blocks_to_rev", 1)))  # number of blocks to go back
         new_blocks = int(str(_request.get("num_of_new_blocks", 1)))  # how many extra blocks should we add
         all_blocks = bool(_request.get("revert_all_blocks", False))  # fork all blocks
         use_random_seed = bool(_request.get("random_seed", True))  # randomize the seed to differentiate reorgs
         random_seed = bytes32(token_bytes(32)) if use_random_seed else None
         cur_height = self.service.blockchain.get_peak_height()
         if cur_height is None:
             raise ValueError("No blocks to revert")
         fork_height = (cur_height - fork_blocks) if not all_blocks else 1
         new_height = cur_height + new_blocks  # any number works as long as its not 0
         assert fork_height >= 1 and new_height - 1 >= cur_height
-        request = ReorgProtocol(
-            uint32(fork_height), uint32(new_height), self.service.server.api.bt.farmer_ph, random_seed
-        )
-        await self.service.server.api.reorg_from_index_to_new_index(request)
+        request = ReorgProtocol(uint32(fork_height), uint32(new_height), self.simulator_api.bt.farmer_ph, random_seed)
+        await self.simulator_api.reorg_from_index_to_new_index(request)
         return {"new_peak_height": new_height}
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/simulator_full_node_rpc_client.py` & `chia-blockchain-2.0.0b3/chia/simulator/simulator_full_node_rpc_client.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/simulator_protocol.py` & `chia-blockchain-2.0.0b3/chia/simulator/simulator_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/simulator_test_tools.py` & `chia-blockchain-2.0.0b3/chia/simulator/simulator_test_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/socket.py` & `chia-blockchain-2.0.0b3/chia/simulator/socket.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_1.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_1.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_10.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_10.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_2.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_2.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_3.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_3.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_4.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_4.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_5.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_5.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_6.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_6.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_7.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_7.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_8.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_8.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/ssl_certs_9.py` & `chia-blockchain-2.0.0b3/chia/simulator/ssl_certs_9.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/start_simulator.py` & `chia-blockchain-2.0.0b3/chia/simulator/start_simulator.py`

 * *Files 4% similar despite different names*

```diff
@@ -3,14 +3,15 @@
 import logging
 import sys
 from multiprocessing import freeze_support
 from pathlib import Path
 from typing import Dict, List, Optional, Tuple
 
 from chia.full_node.full_node import FullNode
+from chia.full_node.full_node_api import FullNodeAPI
 from chia.server.outbound_message import NodeType
 from chia.server.start_service import Service, async_run
 from chia.simulator.block_tools import BlockTools, test_constants
 from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.simulator_full_node_rpc_api import SimulatorFullNodeRpcApi
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.bech32m import decode_puzzle_hash
@@ -30,15 +31,15 @@
 
 def create_full_node_simulator_service(
     root_path: Path,
     config: Dict,
     bt: BlockTools,
     connect_to_daemon: bool = True,
     override_capabilities: List[Tuple[uint16, str]] = None,
-) -> Service[FullNode]:
+) -> Service[FullNode, FullNodeAPI]:
     service_config = config[SERVICE_NAME]
     constants = bt.constants
 
     node = FullNode(
         config=service_config,
         root_path=root_path,
         consensus_constants=constants,
```

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/time_out_assert.py` & `chia-blockchain-2.0.0b3/chia/simulator/time_out_assert.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/simulator/wallet_tools.py` & `chia-blockchain-2.0.0b3/chia/simulator/wallet_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/ssl/chia_ca.crt` & `chia-blockchain-2.0.0b3/chia/ssl/chia_ca.crt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/ssl/chia_ca.key` & `chia-blockchain-2.0.0b3/chia/ssl/chia_ca.key`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/ssl/create_ssl.py` & `chia-blockchain-2.0.0b3/chia/ssl/create_ssl.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/ssl/dst_root_ca.pem` & `chia-blockchain-2.0.0b3/chia/ssl/dst_root_ca.pem`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/timelord/iters_from_block.py` & `chia-blockchain-2.0.0b3/chia/timelord/iters_from_block.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,20 +1,21 @@
 from __future__ import annotations
 
 from typing import Optional, Tuple, Union
 
+from chia.consensus.constants import ConsensusConstants
 from chia.consensus.pot_iterations import calculate_ip_iters, calculate_iterations_quality, calculate_sp_iters
 from chia.types.blockchain_format.proof_of_space import verify_and_get_quality_string
 from chia.types.blockchain_format.reward_chain_block import RewardChainBlock, RewardChainBlockUnfinished
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.ints import uint64
 
 
 def iters_from_block(
-    constants,
+    constants: ConsensusConstants,
     reward_chain_block: Union[RewardChainBlock, RewardChainBlockUnfinished],
     sub_slot_iters: uint64,
     difficulty: uint64,
 ) -> Tuple[uint64, uint64]:
     if reward_chain_block.challenge_chain_sp_vdf is None:
         assert reward_chain_block.signage_point_index == 0
         cc_sp: bytes32 = reward_chain_block.pos_ss_cc_challenge_hash
```

### Comparing `chia-blockchain-2.0.0b1/chia/timelord/timelord.py` & `chia-blockchain-2.0.0b3/chia/timelord/timelord.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,15 +6,16 @@
 import logging
 import multiprocessing
 import os
 import random
 import time
 import traceback
 from concurrent.futures import ProcessPoolExecutor
-from typing import Any, Dict, List, Optional, Set, Tuple
+from pathlib import Path
+from typing import Any, Dict, List, Optional, Set, Tuple, cast
 
 from chiavdf import create_discriminant, prove
 
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.pot_iterations import calculate_sp_iters, is_overflow_block
 from chia.protocols import timelord_protocol
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
@@ -49,45 +50,48 @@
 @dataclasses.dataclass(frozen=True)
 class BlueboxProcessData(Streamable):
     challenge: bytes32
     size_bits: uint16
     iters: uint64
 
 
-def prove_bluebox_slow(payload):
+def prove_bluebox_slow(payload: bytes) -> bytes:
     bluebox_process_data = BlueboxProcessData.from_bytes(payload)
     initial_el = b"\x08" + (b"\x00" * 99)
-    return prove(
-        bluebox_process_data.challenge,
-        initial_el,
-        bluebox_process_data.size_bits,
-        bluebox_process_data.iters,
+    return cast(
+        bytes,
+        prove(
+            bluebox_process_data.challenge,
+            initial_el,
+            bluebox_process_data.size_bits,
+            bluebox_process_data.iters,
+        ),
     )
 
 
 class Timelord:
     @property
     def server(self) -> ChiaServer:
         # This is a stop gap until the class usage is refactored such the values of
         # integral attributes are known at creation of the instance.
         if self._server is None:
             raise RuntimeError("server not assigned")
 
         return self._server
 
-    def __init__(self, root_path, config: Dict, constants: ConsensusConstants):
+    def __init__(self, root_path: Path, config: Dict[str, Any], constants: ConsensusConstants) -> None:
         self.config = config
         self.root_path = root_path
         self.constants = constants
         self._shut_down = False
         self.free_clients: List[Tuple[str, asyncio.StreamReader, asyncio.StreamWriter]] = []
         self.ip_whitelist = self.config["vdf_clients"]["ip"]
         self._server: Optional[ChiaServer] = None
         self.chain_type_to_stream: Dict[Chain, Tuple[str, asyncio.StreamReader, asyncio.StreamWriter]] = {}
-        self.chain_start_time: Dict = {}
+        self.chain_start_time: Dict[Chain, float] = {}
         # Chains that currently don't have a vdf_client.
         self.unspawned_chains: List[Chain] = [
             Chain.CHALLENGE_CHAIN,
             Chain.REWARD_CHAIN,
             Chain.INFUSED_CHALLENGE_CHAIN,
         ]
         # Chains that currently accept iterations.
@@ -98,31 +102,31 @@
         # Unfinished block info, iters adjusted to the last peak.
         self.unfinished_blocks: List[timelord_protocol.NewUnfinishedBlockTimelord] = []
         # Signage points iters, adjusted to the last peak.
         self.signage_point_iters: List[Tuple[uint64, uint8]] = []
         # For each chain, send those info when the process spawns.
         self.iters_to_submit: Dict[Chain, List[uint64]] = {}
         self.iters_submitted: Dict[Chain, List[uint64]] = {}
-        self.iters_finished: Set = set()
+        self.iters_finished: Set[uint64] = set()
         # For each iteration submitted, know if it's a signage point, an infusion point or an end of slot.
         self.iteration_to_proof_type: Dict[uint64, IterationType] = {}
         # List of proofs finished.
         self.proofs_finished: List[Tuple[Chain, VDFInfo, VDFProof, int]] = []
         # Data to send at vdf_client initialization.
         self.overflow_blocks: List[timelord_protocol.NewUnfinishedBlockTimelord] = []
         # Incremented each time `reset_chains` has been called.
         # Used to label proofs in `finished_proofs` and to only filter proofs corresponding to the most recent state.
         self.num_resets: int = 0
 
         multiprocessing_start_method = process_config_start_method(config=self.config, log=log)
         self.multiprocessing_context = multiprocessing.get_context(method=multiprocessing_start_method)
 
-        self.process_communication_tasks: List[asyncio.Task] = []
-        self.main_loop = None
-        self.vdf_server = None
+        self.process_communication_tasks: List[asyncio.Task[None]] = []
+        self.main_loop: Optional[asyncio.Task[None]] = None
+        self.vdf_server: Optional[asyncio.base_events.Server] = None
         self._shut_down = False
         self.vdf_failures: List[Tuple[Chain, Optional[int]]] = []
         self.vdf_failures_count: int = 0
         self.vdf_failure_time: float = 0
         self.total_unfinished: int = 0
         self.total_infused: int = 0
         self.state_changed_callback: Optional[StateChangedProtocol] = None
@@ -130,15 +134,15 @@
         # Support backwards compatibility for the old `config.yaml` that has field `sanitizer_mode`.
         if not self.bluebox_mode:
             self.bluebox_mode = self.config.get("sanitizer_mode", False)
         self.pending_bluebox_info: List[Tuple[float, timelord_protocol.RequestCompactProofOfTime]] = []
         self.last_active_time = time.time()
         self.bluebox_pool: Optional[ProcessPoolExecutor] = None
 
-    async def _start(self):
+    async def _start(self) -> None:
         self.lock: asyncio.Lock = asyncio.Lock()
         self.vdf_server = await asyncio.start_server(
             self._handle_client,
             self.config["vdf_server"]["host"],
             int(self.config["vdf_server"]["port"]),
         )
         self.last_state: LastState = LastState(self.constants)
@@ -161,53 +165,53 @@
             else:
                 self.main_loop = asyncio.create_task(self._manage_discriminant_queue_sanitizer())
         log.info(f"Started timelord, listening on port {self.get_vdf_server_port()}")
 
     def get_connections(self, request_node_type: Optional[NodeType]) -> List[Dict[str, Any]]:
         return default_get_connections(server=self.server, request_node_type=request_node_type)
 
-    async def on_connect(self, connection: WSChiaConnection):
+    async def on_connect(self, connection: WSChiaConnection) -> None:
         pass
 
     def get_vdf_server_port(self) -> Optional[uint16]:
         if self.vdf_server is not None:
-            return self.vdf_server.sockets[0].getsockname()[1]
+            return uint16(self.vdf_server.sockets[0].getsockname()[1])
         return None
 
-    def _close(self):
+    def _close(self) -> None:
         self._shut_down = True
         for task in self.process_communication_tasks:
             task.cancel()
         if self.main_loop is not None:
             self.main_loop.cancel()
         if self.bluebox_pool is not None:
             self.bluebox_pool.shutdown()
 
-    async def _await_closed(self):
+    async def _await_closed(self) -> None:
         pass
 
     def _set_state_changed_callback(self, callback: StateChangedProtocol) -> None:
         self.state_changed_callback = callback
 
-    def state_changed(self, change: str, change_data: Optional[Dict[str, Any]] = None):
+    def state_changed(self, change: str, change_data: Optional[Dict[str, Any]] = None) -> None:
         if self.state_changed_callback is not None:
             self.state_changed_callback(change, change_data)
 
-    def set_server(self, server: ChiaServer):
+    def set_server(self, server: ChiaServer) -> None:
         self._server = server
 
-    async def _handle_client(self, reader: asyncio.StreamReader, writer: asyncio.StreamWriter):
+    async def _handle_client(self, reader: asyncio.StreamReader, writer: asyncio.StreamWriter) -> None:
         async with self.lock:
             client_ip = writer.get_extra_info("peername")[0]
             log.debug(f"New timelord connection from client: {client_ip}.")
             if client_ip in self.ip_whitelist:
                 self.free_clients.append((client_ip, reader, writer))
                 log.debug(f"Added new VDF client {client_ip}.")
 
-    async def _stop_chain(self, chain: Chain):
+    async def _stop_chain(self, chain: Chain) -> None:
         try:
             _, _, stop_writer = self.chain_type_to_stream[chain]
             if chain in self.allows_iters:
                 stop_writer.write(b"010")
                 await stop_writer.drain()
                 self.allows_iters.remove(chain)
             else:
@@ -269,29 +273,29 @@
                     )
                 return None
 
         if new_block_iters > 0:
             return new_block_iters
         return None
 
-    async def _reset_chains(self, first_run=False, only_eos=False):
+    async def _reset_chains(self, *, first_run: bool = False, only_eos: bool = False) -> None:
         # First, stop all chains.
         self.last_active_time = time.time()
         log.debug("Resetting chains")
         ip_iters = self.last_state.get_last_ip()
         sub_slot_iters = self.last_state.get_sub_slot_iters()
 
         if not first_run:
             for chain in list(self.chain_type_to_stream.keys()):
                 await self._stop_chain(chain)
 
         # Adjust all signage points iterations to the peak.
         iters_per_signage = uint64(sub_slot_iters // self.constants.NUM_SPS_SUB_SLOT)
         self.signage_point_iters = [
-            (k * iters_per_signage - ip_iters, k)
+            (uint64(k * iters_per_signage - ip_iters), uint8(k))
             for k in range(1, self.constants.NUM_SPS_SUB_SLOT)
             if k * iters_per_signage - ip_iters > 0
         ]
         for sp, k in self.signage_point_iters:
             assert k * iters_per_signage > 0
             assert k * iters_per_signage < sub_slot_iters
         # Adjust all unfinished blocks iterations to the peak.
@@ -324,28 +328,28 @@
             for signage, k in self.signage_point_iters:
                 for chain in [Chain.CHALLENGE_CHAIN, Chain.REWARD_CHAIN]:
                     self.iters_to_submit[chain].append(signage)
                 self.iteration_to_proof_type[signage] = IterationType.SIGNAGE_POINT
                 count_signage += 1
                 if count_signage == 3:
                     break
-        left_subslot_iters = sub_slot_iters - ip_iters
+        left_subslot_iters = uint64(sub_slot_iters - ip_iters)
         assert left_subslot_iters > 0
 
         if self.last_state.get_deficit() < self.constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK:
             self.iters_to_submit[Chain.INFUSED_CHALLENGE_CHAIN].append(left_subslot_iters)
         self.iters_to_submit[Chain.CHALLENGE_CHAIN].append(left_subslot_iters)
         self.iters_to_submit[Chain.REWARD_CHAIN].append(left_subslot_iters)
         self.iteration_to_proof_type[left_subslot_iters] = IterationType.END_OF_SUBSLOT
 
         for chain, iters in self.iters_to_submit.items():
             for iteration in iters:
                 assert iteration > 0
 
-    async def _handle_new_peak(self):
+    async def _handle_new_peak(self) -> None:
         assert self.new_peak is not None
         self.last_state.set_state(self.new_peak)
 
         if self.total_unfinished > 0:
             remove_unfinished = []
             for unf_block_timelord in self.unfinished_blocks + self.overflow_blocks:
                 if (
@@ -370,15 +374,15 @@
                 f"Total infused blocks: {self.total_infused}. "
                 f"Infusion rate: {infusion_rate}%."
             )
 
         self.new_peak = None
         await self._reset_chains()
 
-    async def _map_chains_with_vdf_clients(self):
+    async def _map_chains_with_vdf_clients(self) -> None:
         while not self._shut_down:
             picked_chain = None
             async with self.lock:
                 if len(self.free_clients) == 0:
                     break
                 ip, reader, writer = self.free_clients[0]
                 for chain_type in self.unspawned_chains:
@@ -392,23 +396,25 @@
                 picked_chain = self.unspawned_chains[0]
                 self.chain_type_to_stream[picked_chain] = (ip, reader, writer)
                 self.free_clients = self.free_clients[1:]
                 self.unspawned_chains = self.unspawned_chains[1:]
                 self.chain_start_time[picked_chain] = time.time()
 
             log.debug(f"Mapping free vdf_client with chain: {picked_chain}.")
+            assert challenge is not None
+            assert initial_form is not None
             self.process_communication_tasks.append(
                 asyncio.create_task(
                     self._do_process_communication(
                         picked_chain, challenge, initial_form, ip, reader, writer, proof_label=self.num_resets
                     )
                 )
             )
 
-    async def _submit_iterations(self):
+    async def _submit_iterations(self) -> None:
         for chain in [Chain.CHALLENGE_CHAIN, Chain.REWARD_CHAIN, Chain.INFUSED_CHALLENGE_CHAIN]:
             if chain in self.allows_iters:
                 _, _, writer = self.chain_type_to_stream[chain]
                 for iteration in self.iters_to_submit[chain]:
                     if iteration in self.iters_submitted[chain]:
                         continue
                     log.debug(f"Submitting iterations to {chain}: {iteration}")
@@ -417,27 +423,27 @@
                     if len(str(iteration)) < 10:
                         prefix = "0" + prefix
                     iter_str = prefix + str(iteration)
                     writer.write(iter_str.encode())
                     await writer.drain()
                     self.iters_submitted[chain].append(iteration)
 
-    def _clear_proof_list(self, iters: uint64):
+    def _clear_proof_list(self, iters: uint64) -> List[Tuple[Chain, VDFInfo, VDFProof, int]]:
         return [
             (chain, info, proof, label)
             for chain, info, proof, label in self.proofs_finished
             if info.number_of_iterations != iters
         ]
 
-    async def _check_for_new_sp(self, iter_to_look_for: uint64):
+    async def _check_for_new_sp(self, iter_to_look_for: uint64) -> None:
         signage_iters = [
             iteration for iteration, t in self.iteration_to_proof_type.items() if t == IterationType.SIGNAGE_POINT
         ]
         if len(signage_iters) == 0:
-            return None
+            return
         to_remove = []
         for potential_sp_iters, signage_point_index in self.signage_point_iters:
             if potential_sp_iters not in signage_iters or potential_sp_iters != iter_to_look_for:
                 continue
             signage_iter = potential_sp_iters
             proofs_with_iter = [
                 (chain, info, proof)
@@ -496,17 +502,17 @@
                         break
 
                 # Break so we alternate between checking SP and IP
                 break
         for r in to_remove:
             self.signage_point_iters.remove(r)
 
-    async def _check_for_new_ip(self, iter_to_look_for: uint64):
+    async def _check_for_new_ip(self, iter_to_look_for: uint64) -> None:
         if len(self.unfinished_blocks) == 0:
-            return None
+            return
         infusion_iters = [
             iteration for iteration, t in self.iteration_to_proof_type.items() if t == IterationType.INFUSION_POINT
         ]
         for iteration in infusion_iters:
             if iteration != iter_to_look_for:
                 continue
             proofs_with_iter = [
@@ -553,15 +559,15 @@
                             rc_info = info
                             rc_proof = proof
                         if chain == Chain.INFUSED_CHALLENGE_CHAIN:
                             icc_info = info
                             icc_proof = proof
                     if cc_info is None or cc_proof is None or rc_info is None or rc_proof is None:
                         log.error(f"Insufficient VDF proofs for infusion point ch: {challenge} iterations:{iteration}")
-                        return None
+                        return
 
                     rc_challenge = self.last_state.get_challenge(Chain.REWARD_CHAIN)
                     if rc_info.challenge != rc_challenge:
                         assert rc_challenge is not None
                         log.warning(
                             f"Do not have correct challenge {rc_challenge.hex()} "
                             f"has {rc_info.challenge}, partial hash {block.reward_chain_block.get_hash()}"
@@ -573,15 +579,15 @@
                     self.last_active_time = time.time()
                     log.debug(f"Generated infusion point for challenge: {challenge} iterations: {iteration}.")
 
                     overflow = is_overflow_block(self.constants, block.reward_chain_block.signage_point_index)
 
                     if not self.last_state.can_infuse_block(overflow):
                         log.warning("Too many blocks, or overflow in new epoch, cannot infuse, discarding")
-                        return None
+                        return
 
                     cc_info = dataclasses.replace(cc_info, number_of_iterations=ip_iters)
                     response = timelord_protocol.NewInfusionPointVDF(
                         challenge,
                         cc_info,
                         cc_proof,
                         rc_info,
@@ -596,15 +602,15 @@
                     self.proofs_finished = self._clear_proof_list(iteration)
 
                     if (
                         self.last_state.get_last_block_total_iters() is None
                         and not self.last_state.state_type == StateType.FIRST_SUB_SLOT
                     ):
                         # We don't know when the last block was, so we can't make peaks
-                        return None
+                        return
 
                     sp_total_iters = (
                         ip_total_iters
                         - ip_iters
                         + calculate_sp_iters(
                             self.constants,
                             block.sub_slot_iters,
@@ -620,15 +626,15 @@
                         assert last_block_ti is not None
                         is_transaction_block = last_block_ti < sp_total_iters
                         height = uint32(self.last_state.get_height() + 1)
 
                     if height < 5:
                         # Don't directly update our state for the first few blocks, because we cannot validate
                         # whether the pre-farm is correct
-                        return None
+                        return
 
                     new_reward_chain_block = RewardChainBlock(
                         uint128(self.last_state.get_weight() + block.difficulty),
                         height,
                         uint128(ip_total_iters),
                         block.reward_chain_block.signage_point_index,
                         block.reward_chain_block.pos_ss_cc_challenge_hash,
@@ -692,22 +698,22 @@
                         passed_ses_height_but_not_yet_included,
                     )
 
                     await self._handle_new_peak()
                     # Break so we alternate between checking SP and IP
                     break
 
-    async def _check_for_end_of_subslot(self, iter_to_look_for: uint64):
+    async def _check_for_end_of_subslot(self, iter_to_look_for: uint64) -> None:
         left_subslot_iters = [
             iteration for iteration, t in self.iteration_to_proof_type.items() if t == IterationType.END_OF_SUBSLOT
         ]
         if len(left_subslot_iters) == 0:
-            return None
+            return
         if left_subslot_iters[0] != iter_to_look_for:
-            return None
+            return
         chains_finished = [
             (chain, info, proof)
             for chain, info, proof, label in self.proofs_finished
             if info.number_of_iterations == left_subslot_iters[0] and label == self.num_resets
         ]
         if self.last_state.get_challenge(Chain.INFUSED_CHALLENGE_CHAIN) is not None:
             chain_count = 3
@@ -733,15 +739,15 @@
             assert cc_proof is not None and rc_proof is not None and cc_vdf is not None and rc_vdf is not None
 
             rc_challenge = self.last_state.get_challenge(Chain.REWARD_CHAIN)
             if rc_vdf.challenge != rc_challenge:
                 assert rc_challenge is not None
                 log.warning(f"Do not have correct challenge {rc_challenge.hex()} has {rc_vdf.challenge}")
                 # This proof is on an outdated challenge, so don't use it
-                return None
+                return
             log.debug("Collected end of subslot vdfs.")
             self.iters_finished.add(iter_to_look_for)
             self.last_active_time = time.time()
             iters_from_sub_slot_start = cc_vdf.number_of_iterations + self.last_state.get_last_ip()
             cc_vdf = dataclasses.replace(cc_vdf, number_of_iterations=iters_from_sub_slot_start)
             if icc_ip_vdf is not None:
                 if self.last_state.peak is not None:
@@ -819,15 +825,15 @@
 
             self.last_state.set_state(eos_bundle)
             for block in self.unfinished_blocks:
                 if self._can_infuse_unfinished_block(block) is not None:
                     self.total_unfinished += 1
             await self._reset_chains()
 
-    async def _handle_failures(self):
+    async def _handle_failures(self) -> None:
         if len(self.vdf_failures) > 0:
             # This can happen if one of the VDF processes has an issue. In this case, we abort all other
             # infusion points and signage points, and go straight to the end of slot, so we avoid potential
             # issues with the number of iterations that failed.
 
             failed_chain, proof_label = self.vdf_failures[0]
             log.error(
@@ -849,18 +855,18 @@
             # If there were no failures recently trigger a reset after 60 seconds of no activity.
             # Signage points should be every 9 seconds
             active_time_threshold = 60
         if time.time() - self.last_active_time > active_time_threshold:
             log.error(f"Not active for {active_time_threshold} seconds, restarting all chains")
             await self._reset_chains()
 
-    async def _manage_chains(self):
+    async def _manage_chains(self) -> None:
         async with self.lock:
             await asyncio.sleep(5)
-            await self._reset_chains(True)
+            await self._reset_chains(first_run=True)
         while not self._shut_down:
             try:
                 await asyncio.sleep(0.1)
                 async with self.lock:
                     await self._handle_failures()
                     # We've got a new peak, process it.
                     if self.new_peak is not None:
@@ -901,15 +907,15 @@
         # Data specific only when running in bluebox mode.
         bluebox_iteration: Optional[uint64] = None,
         header_hash: Optional[bytes32] = None,
         height: Optional[uint32] = None,
         field_vdf: Optional[uint8] = None,
         # Labels a proof to the current state only
         proof_label: Optional[int] = None,
-    ):
+    ) -> None:
         disc: int = create_discriminant(challenge, self.constants.DISCRIMINANT_SIZE_BITS)
 
         try:
             # Depending on the flags 'fast_algorithm' and 'bluebox_mode',
             # the timelord tells the vdf_client what to execute.
             async with self.lock:
                 if self.bluebox_mode:
@@ -939,18 +945,18 @@
             try:
                 ok = await reader.readexactly(2)
             except (asyncio.IncompleteReadError, ConnectionResetError, Exception) as e:
                 log.warning(f"{type(e)} {e}")
                 async with self.lock:
                     self.vdf_failures.append((chain, proof_label))
                     self.vdf_failures_count += 1
-                return None
+                return
 
             if ok.decode() != "OK":
-                return None
+                return
 
             log.debug("Got handshake with VDF client.")
             if not self.bluebox_mode:
                 async with self.lock:
                     self.allows_iters.append(chain)
             else:
                 async with self.lock:
@@ -1066,15 +1072,15 @@
                     self.state_changed(
                         "new_compact_proof", {"header_hash": header_hash, "height": height, "field_vdf": field_vdf}
                     )
 
         except ConnectionResetError as e:
             log.debug(f"Connection reset with VDF client {e}")
 
-    async def _manage_discriminant_queue_sanitizer(self):
+    async def _manage_discriminant_queue_sanitizer(self) -> None:
         while not self._shut_down:
             async with self.lock:
                 try:
                     while len(self.pending_bluebox_info) > 0 and len(self.free_clients) > 0:
                         # Select randomly the field_vdf we're creating a compact vdf for.
                         # This is done because CC_SP and CC_IP are more frequent than
                         # CC_EOS and ICC_EOS. This guarantees everything is picked uniformly.
@@ -1105,22 +1111,22 @@
                         )
                         self.pending_bluebox_info.remove(info)
                         self.free_clients = self.free_clients[1:]
                 except Exception as e:
                     log.error(f"Exception manage discriminant queue: {e}")
             await asyncio.sleep(0.1)
 
-    async def _start_manage_discriminant_queue_sanitizer_slow(self, pool: ProcessPoolExecutor, counter: int):
+    async def _start_manage_discriminant_queue_sanitizer_slow(self, pool: ProcessPoolExecutor, counter: int) -> None:
         tasks = []
         for _ in range(counter):
             tasks.append(asyncio.create_task(self._manage_discriminant_queue_sanitizer_slow(pool)))
         for task in tasks:
             await task
 
-    async def _manage_discriminant_queue_sanitizer_slow(self, pool: ProcessPoolExecutor):
+    async def _manage_discriminant_queue_sanitizer_slow(self, pool: ProcessPoolExecutor) -> None:
         log.info("Started task for managing bluebox queue.")
         while not self._shut_down:
             picked_info = None
             async with self.lock:
                 try:
                     if len(self.pending_bluebox_info) > 0:
                         # Select randomly the field_vdf we're creating a compact vdf for.
```

### Comparing `chia-blockchain-2.0.0b1/chia/timelord/timelord_api.py` & `chia-blockchain-2.0.0b3/chia/timelord/timelord_api.py`

 * *Files 3% similar despite different names*

```diff
@@ -2,27 +2,34 @@
 
 import logging
 import time
 from typing import Optional
 
 from chia.protocols import timelord_protocol
 from chia.rpc.rpc_server import StateChangedProtocol
-from chia.timelord.timelord import Chain, IterationType, Timelord, iters_from_block
+from chia.timelord.iters_from_block import iters_from_block
+from chia.timelord.timelord import Timelord
+from chia.timelord.types import Chain, IterationType
 from chia.util.api_decorators import api_request
 from chia.util.ints import uint64
 
 log = logging.getLogger(__name__)
 
 
 class TimelordAPI:
+    log: logging.Logger
     timelord: Timelord
 
     def __init__(self, timelord) -> None:
+        self.log = logging.getLogger(__name__)
         self.timelord = timelord
 
+    def ready(self) -> bool:
+        return True
+
     def _set_state_changed_callback(self, callback: StateChangedProtocol) -> None:
         self.timelord.state_changed_callback = callback
 
     @api_request()
     async def new_peak_timelord(self, new_peak: timelord_protocol.NewPeakTimelord) -> None:
         if self.timelord.last_state is None:
             return None
```

### Comparing `chia-blockchain-2.0.0b1/chia/timelord/timelord_launcher.py` & `chia-blockchain-2.0.0b3/chia/timelord/timelord_launcher.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/timelord/timelord_state.py` & `chia-blockchain-2.0.0b3/chia/timelord/timelord_state.py`

 * *Files 1% similar despite different names*

```diff
@@ -45,15 +45,15 @@
         self.difficulty: uint64 = constants.DIFFICULTY_STARTING
         self.sub_slot_iters: uint64 = constants.SUB_SLOT_ITERS_STARTING
         self.reward_challenge_cache: List[Tuple[bytes32, uint128]] = [(constants.GENESIS_CHALLENGE, uint128(0))]
         self.new_epoch = False
         self.passed_ses_height_but_not_yet_included = False
         self.infused_ses = False
 
-    def set_state(self, state: Union[timelord_protocol.NewPeakTimelord, EndOfSubSlotBundle]):
+    def set_state(self, state: Union[timelord_protocol.NewPeakTimelord, EndOfSubSlotBundle]) -> None:
         if isinstance(state, timelord_protocol.NewPeakTimelord):
             self.state_type = StateType.PEAK
             self.peak = state
             self.subslot_end = None
             _, self.last_ip = iters_from_block(
                 self.constants,
                 state.reward_chain_block,
```

### Comparing `chia-blockchain-2.0.0b1/chia/types/announcement.py` & `chia-blockchain-2.0.0b3/chia/types/announcement.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/block_protocol.py` & `chia-blockchain-2.0.0b3/chia/types/block_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/classgroup.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/classgroup.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/coin.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/coin.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/foliage.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/foliage.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/program.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/proof_of_space.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/proof_of_space.py`

 * *Files 7% similar despite different names*

```diff
@@ -40,34 +40,34 @@
     pos: ProofOfSpace,
     constants: ConsensusConstants,
     original_challenge_hash: bytes32,
     signage_point: bytes32,
 ) -> Optional[bytes32]:
     # Exactly one of (pool_public_key, pool_contract_puzzle_hash) must not be None
     if (pos.pool_public_key is None) and (pos.pool_contract_puzzle_hash is None):
-        log.error("Fail 1")
+        log.error("Expected pool public key or pool contract puzzle hash but got neither")
         return None
     if (pos.pool_public_key is not None) and (pos.pool_contract_puzzle_hash is not None):
-        log.error("Fail 2")
+        log.error("Expected pool public key or pool contract puzzle hash but got both")
         return None
     if pos.size < constants.MIN_PLOT_SIZE:
-        log.error("Fail 3")
+        log.error("Plot size is lower than the minimum")
         return None
     if pos.size > constants.MAX_PLOT_SIZE:
-        log.error("Fail 4")
+        log.error("Plot size is higher than the maximum")
         return None
     plot_id: bytes32 = get_plot_id(pos)
     new_challenge: bytes32 = calculate_pos_challenge(plot_id, original_challenge_hash, signage_point)
 
     if new_challenge != pos.challenge:
-        log.error("New challenge is not challenge")
+        log.error("Calculated pos challenge doesn't match the provided one")
         return None
 
     if not passes_plot_filter(constants, plot_id, original_challenge_hash, signage_point):
-        log.error("Fail 5")
+        log.error("Did not pass the plot filter")
         return None
 
     return get_quality_string(pos, plot_id)
 
 
 def get_quality_string(pos: ProofOfSpace, plot_id: bytes32) -> Optional[bytes32]:
     quality_str = Verifier().validate_proof(plot_id, pos.size, pos.challenge, bytes(pos.proof))
```

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/reward_chain_block.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/reward_chain_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/serialized_program.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/serialized_program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/slots.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/slots.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/sub_epoch_summary.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/sub_epoch_summary.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/tree_hash.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/tree_hash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/blockchain_format/vdf.py` & `chia-blockchain-2.0.0b3/chia/types/blockchain_format/vdf.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/coin_record.py` & `chia-blockchain-2.0.0b3/chia/types/coin_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/coin_spend.py` & `chia-blockchain-2.0.0b3/chia/types/coin_spend.py`

 * *Files 4% similar despite different names*

```diff
@@ -61,7 +61,14 @@
         ret.append(Coin(parent_id, puzzle_hash, amount))
 
     return ret, cost
 
 
 def compute_additions(cs: CoinSpend, *, max_cost: int = DEFAULT_CONSTANTS.MAX_BLOCK_COST_CLVM) -> List[Coin]:
     return compute_additions_with_cost(cs, max_cost=max_cost)[0]
+
+
+@streamable
+@dataclass(frozen=True)
+class SpendInfo(Streamable):
+    puzzle: SerializedProgram
+    solution: SerializedProgram
```

### Comparing `chia-blockchain-2.0.0b1/chia/types/condition_opcodes.py` & `chia-blockchain-2.0.0b3/chia/types/condition_opcodes.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/end_of_slot_bundle.py` & `chia-blockchain-2.0.0b3/chia/types/end_of_slot_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/fee_rate.py` & `chia-blockchain-2.0.0b3/chia/types/fee_rate.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/full_block.py` & `chia-blockchain-2.0.0b3/chia/types/full_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/generator_types.py` & `chia-blockchain-2.0.0b3/chia/types/generator_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/header_block.py` & `chia-blockchain-2.0.0b3/chia/types/header_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/mempool_item.py` & `chia-blockchain-2.0.0b3/chia/types/mempool_item.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,37 +1,50 @@
 from __future__ import annotations
 
-from dataclasses import dataclass
+from dataclasses import dataclass, field
 from typing import Any, Dict, List, Optional
 
 from chia.consensus.cost_calculator import NPCResult
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
+from chia.types.coin_spend import CoinSpend
 from chia.types.spend_bundle import SpendBundle
 from chia.util.generator_tools import additions_for_npc
 from chia.util.ints import uint32, uint64
 from chia.util.streamable import recurse_jsonify
 
 
 @dataclass(frozen=True)
+class BundleCoinSpend:
+    coin_spend: CoinSpend
+    eligible_for_dedup: bool
+    additions: List[Coin]
+    # cost on the specific solution in this item
+    cost: Optional[uint64] = None
+
+
+@dataclass(frozen=True)
 class MempoolItem:
     spend_bundle: SpendBundle
     fee: uint64
     npc_result: NPCResult
     spend_bundle_name: bytes32
     height_added_to_mempool: uint32
 
     # If present, this SpendBundle is not valid at or before this height
     assert_height: Optional[uint32] = None
 
-    # If presemt, this SpendBundle is not valid once the block height reaches
+    # If present, this SpendBundle is not valid once the block height reaches
     # the specified height
     assert_before_height: Optional[uint32] = None
     assert_before_seconds: Optional[uint64] = None
 
+    # Map of coin ID to coin spend data between the bundle and its NPCResult
+    bundle_coin_spends: Dict[bytes32, BundleCoinSpend] = field(default_factory=dict)
+
     def __lt__(self, other: MempoolItem) -> bool:
         return self.fee_per_cost < other.fee_per_cost
 
     def __hash__(self) -> int:
         return hash(self.spend_bundle_name)
 
     @property
```

### Comparing `chia-blockchain-2.0.0b1/chia/types/mempool_submission_status.py` & `chia-blockchain-2.0.0b3/chia/types/mempool_submission_status.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/peer_info.py` & `chia-blockchain-2.0.0b3/chia/types/peer_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/signing_mode.py` & `chia-blockchain-2.0.0b3/chia/types/signing_mode.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/spend_bundle.py` & `chia-blockchain-2.0.0b3/chia/types/spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/transaction_queue_entry.py` & `chia-blockchain-2.0.0b3/chia/types/transaction_queue_entry.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/unfinished_block.py` & `chia-blockchain-2.0.0b3/chia/types/unfinished_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/unfinished_header_block.py` & `chia-blockchain-2.0.0b3/chia/types/unfinished_header_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/types/weight_proof.py` & `chia-blockchain-2.0.0b3/chia/types/weight_proof.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/api_decorators.py` & `chia-blockchain-2.0.0b3/chia/util/api_decorators.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/bech32m.py` & `chia-blockchain-2.0.0b3/chia/util/bech32m.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/beta_metrics.py` & `chia-blockchain-2.0.0b3/chia/util/beta_metrics.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/block_cache.py` & `chia-blockchain-2.0.0b3/chia/util/block_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/byte_types.py` & `chia-blockchain-2.0.0b3/chia/util/byte_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/cached_bls.py` & `chia-blockchain-2.0.0b3/chia/util/cached_bls.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/check_fork_next_block.py` & `chia-blockchain-2.0.0b3/chia/util/check_fork_next_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/chia_logging.py` & `chia-blockchain-2.0.0b3/chia/util/chia_logging.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/condition_tools.py` & `chia-blockchain-2.0.0b3/chia/util/condition_tools.py`

 * *Files 5% similar despite different names*

```diff
@@ -51,23 +51,21 @@
     """
     Takes a ChiaLisp sexp (list) and returns the list of ConditionWithArgss
     Raises an ConsensusError if it fails.
     """
     return [parse_sexp_to_condition(s) for s in sexp.as_iter()]
 
 
-def pkm_pairs(
-    conditions: SpendBundleConditions, additional_data: bytes, *, soft_fork: bool
-) -> Tuple[List[bytes48], List[bytes]]:
+def pkm_pairs(conditions: SpendBundleConditions, additional_data: bytes) -> Tuple[List[bytes48], List[bytes]]:
     ret: Tuple[List[bytes48], List[bytes]] = ([], [])
 
     for pk, msg in conditions.agg_sig_unsafe:
         ret[0].append(bytes48(pk))
         ret[1].append(msg)
-        if soft_fork and msg.endswith(additional_data):
+        if msg.endswith(additional_data):
             raise ConsensusError(Err.INVALID_CONDITION)
 
     for spend in conditions.spends:
         for pk, msg in spend.agg_sig_me:
             ret[0].append(bytes48(pk))
             ret[1].append(msg + spend.coin_id + additional_data)
     return ret
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/config.py` & `chia-blockchain-2.0.0b3/chia/util/config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/db_synchronous.py` & `chia-blockchain-2.0.0b3/chia/util/db_synchronous.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/db_version.py` & `chia-blockchain-2.0.0b3/chia/util/db_version.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/db_wrapper.py` & `chia-blockchain-2.0.0b3/chia/util/db_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/dump_keyring.py` & `chia-blockchain-2.0.0b3/chia/util/dump_keyring.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 #!/usr/bin/env python3
 
 from __future__ import annotations
 
+import os
 from io import TextIOWrapper
 from pathlib import Path
-from typing import Optional
+from typing import Any, Dict, Optional, cast
 
 import click
 import colorama
 import yaml
 from cryptography.exceptions import InvalidTag
 
 from chia.cmds.passphrase_funcs import prompt_for_passphrase, read_passphrase_from_file
@@ -16,72 +17,77 @@
 from chia.util.file_keyring import FileKeyringContent
 from chia.util.keyring_wrapper import DEFAULT_PASSPHRASE_IF_NO_MASTER_PASSPHRASE, KeyringWrapper
 
 DEFAULT_KEYRING_YAML = DEFAULT_KEYS_ROOT_PATH / "keyring.yaml"
 
 
 def get_passphrase_prompt(keyring_file: str) -> str:
-    prompt = (
-        colorama.Fore.YELLOW
-        + colorama.Style.BRIGHT
-        + "(Unlock Keyring: "
-        + colorama.Fore.MAGENTA
-        + keyring_file
-        + colorama.Style.RESET_ALL
-        + colorama.Fore.YELLOW
-        + colorama.Style.BRIGHT
-        + ")"
-        + colorama.Style.RESET_ALL
-        + " Passphrase: "
-    )  # noqa: E501
+    # casting since the colors are Any
+    prompt = cast(
+        str,
+        (
+            colorama.Fore.YELLOW
+            + colorama.Style.BRIGHT
+            + "(Unlock Keyring: "
+            + colorama.Fore.MAGENTA
+            + keyring_file
+            + colorama.Style.RESET_ALL
+            + colorama.Fore.YELLOW
+            + colorama.Style.BRIGHT
+            + ")"
+            + colorama.Style.RESET_ALL
+            + " Passphrase: "
+        ),  # noqa: E501
+    )
     return prompt
 
 
 @click.command()
-@click.argument("keyring_file", nargs=1, default=DEFAULT_KEYRING_YAML)
+@click.argument("keyring_file", nargs=1, default=os.fspath(DEFAULT_KEYRING_YAML))
 @click.option(
     "--full-payload", is_flag=True, default=False, help="Print the full keyring contents, including plaintext"
 )
 @click.option("--passphrase-file", type=click.File("r"), help="File or descriptor to read the passphrase from")
 @click.option("--pretty-print", is_flag=True, default=False)
-def dump(keyring_file, full_payload: bool, passphrase_file: Optional[TextIOWrapper], pretty_print: bool):
+def dump(keyring_file: str, full_payload: bool, passphrase_file: Optional[TextIOWrapper], pretty_print: bool) -> None:
     saved_passphrase: Optional[str] = KeyringWrapper.get_shared_instance().get_master_passphrase_from_credential_store()
     passphrase: str = saved_passphrase or DEFAULT_PASSPHRASE_IF_NO_MASTER_PASSPHRASE
-    prompt: str = get_passphrase_prompt(str(keyring_file))
+    prompt: str = get_passphrase_prompt(keyring_file)
 
     print(f"Attempting to dump contents of keyring file: {keyring_file}\n")
 
     if passphrase_file is not None:
         passphrase = read_passphrase_from_file(passphrase_file)
 
     keyring_path = Path(keyring_file)
     file_content = FileKeyringContent.create_from_path(keyring_path)
     file_content_dict = file_content.to_dict()
 
     for i in range(5):
         try:
             data_dict = file_content.get_decrypted_data_dict(passphrase)
             if full_payload:
-                dump_content = file_content_dict
+                dump_content: Dict[str, Any] = file_content_dict
                 dump_content["data"] = data_dict
             else:
                 dump_content = data_dict
 
             if pretty_print:
-                dump_content = yaml.dump(dump_content)
+                print(yaml.dump(dump_content))
+            else:
+                print(dump_content)
 
-            print(dump_content)
             break
         except (ValueError, InvalidTag):
             passphrase = prompt_for_passphrase(prompt)
         except Exception as e:
             print(f"Unhandled exception: {e}")
             break
 
 
-def main():
+def main() -> None:
     colorama.init()
     dump()  # pylint: disable=no-value-for-parameter
 
 
 if __name__ == "__main__":
     main()
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/english.txt` & `chia-blockchain-2.0.0b3/chia/util/english.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/errors.py` & `chia-blockchain-2.0.0b3/chia/util/errors.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/file_keyring.py` & `chia-blockchain-2.0.0b3/chia/util/file_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/files.py` & `chia-blockchain-2.0.0b3/chia/util/files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/full_block_utils.py` & `chia-blockchain-2.0.0b3/chia/util/full_block_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/initial-config.yaml` & `chia-blockchain-2.0.0b3/chia/util/initial-config.yaml`

 * *Files 6% similar despite different names*

```diff
@@ -67,16 +67,25 @@
       DIFFICULTY_STARTING: 30
       EPOCH_BLOCKS: 768
       GENESIS_CHALLENGE: ae83525ba8d1dd3f09b277de18ca3e43fc0af20d20c4b3e92ef2a48bd291ccb2
       GENESIS_PRE_FARM_FARMER_PUZZLE_HASH: 3d8765d3a597ec1d99663f6c9816d915b9f68613ac94009884c4addaefcce6af
       GENESIS_PRE_FARM_POOL_PUZZLE_HASH: d23da14695a188ae5708dd152263c4db883eb27edeb936178d4d988b8f3ce5fc
       MEMPOOL_BLOCK_BUFFER: 10
       MIN_PLOT_SIZE: 18
-      SOFT_FORK_HEIGHT: 2598742
-      SOFT_FORK2_HEIGHT: 2855377
+      SOFT_FORK2_HEIGHT: 0
+      SOFT_FORK3_HEIGHT: 0
+      # planned 2.0 release is July 26, height 2965036 on testnet
+      # 1 week later
+      HARD_FORK_HEIGHT": 2997292
+      # another 2 weeks later
+      PLOT_FILTER_128_HEIGHT": 3061804
+      # 3 years later
+      PLOT_FILTER_64_HEIGHT": 8010796
+      # 3 years later
+      PLOT_FILTER_32_HEIGHT": 13056556
   config:
     mainnet:
       address_prefix: "xch"
       default_full_node_port: 8444
     testnet0:
       address_prefix: "txch"
       default_full_node_port: 58444
@@ -426,14 +435,15 @@
     port: 8447
   timelord_peer:
     host: *self_hostname
     port: 8446
   introducer_peer:
     host: introducer.chia.net # Chia AWS introducer IPv4/IPv6
     port: 8444
+    enable_private_networks: False
   wallet_peer:
     host: *self_hostname
     port: 8449
   logging: *logging
   network_overrides: *network_overrides
   selected_network: *selected_network
 
@@ -538,14 +548,15 @@
   # The introducer will only return peers who it has seen in the last
   # recent_peer_threshold seconds
   recent_peer_threshold: 6000
 
   introducer_peer:
     host: introducer.chia.net # Chia AWS introducer IPv4/IPv6
     port: 8444
+    enable_private_networks: False
 
   ssl:
     private_crt: "config/ssl/wallet/private_wallet.crt"
     private_key: "config/ssl/wallet/private_wallet.key"
     public_crt: "config/ssl/wallet/public_wallet.crt"
     public_key: "config/ssl/wallet/public_wallet.key"
 
@@ -577,14 +588,32 @@
   spam_filter_after_n_txs: 200
   xch_spam_amount: 1000000
   # Enable notifications from parties on chain
   enable_notifications: True
   # The amount someone has to pay you in mojos for you to see their notification
   required_notification_amount: 10000000
 
+  #################################
+  #  Inner puzzle decorators      #
+  #################################
+  # Default puzzle decorator settings, this will apply to all asset wallets under the same key
+  # Here is an example
+  # puzzle_decorators:
+  #   2999502625:
+  #     - decorator: "CLAWBACK"
+  #       clawback_timelock: 3600
+  #     - decorator: "DECORATOR_TYPE" #If you want to add more decorators
+  #       parameter1: 0
+
+  auto_claim:
+    enabled: False
+    tx_fee: 0
+    min_amount: 0
+    batch_size: 50
+
 data_layer:
   # TODO: consider name
   # TODO: organize consistently with other sections
 
   # TODO: shouldn't we not need this since we have no actual public interface (yet)?
   port: 8561
   wallet_peer:
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/inline_executor.py` & `chia-blockchain-2.0.0b3/chia/util/inline_executor.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/json_util.py` & `chia-blockchain-2.0.0b3/chia/util/json_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/keychain.py` & `chia-blockchain-2.0.0b3/chia/util/keychain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/keyring_wrapper.py` & `chia-blockchain-2.0.0b3/chia/util/keyring_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/limited_semaphore.py` & `chia-blockchain-2.0.0b3/chia/util/limited_semaphore.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/lock.py` & `chia-blockchain-2.0.0b3/chia/util/lock.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/log_exceptions.py` & `chia-blockchain-2.0.0b3/chia/util/log_exceptions.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 from __future__ import annotations
 
 import logging
 import traceback
 from contextlib import contextmanager
-from typing import Tuple, Type, Union
+from typing import Iterator, Tuple, Type, Union
 
 
 @contextmanager
 def log_exceptions(
     log: logging.Logger,
     *,
     consume: bool = False,
     message: str = "Caught exception",
     level: int = logging.ERROR,
     show_traceback: bool = True,
     exceptions_to_process: Union[Type[BaseException], Tuple[Type[BaseException], ...]] = Exception,
-):
+) -> Iterator[None]:
     try:
         yield
     except exceptions_to_process as e:
         message = f"{message}: {type(e).__name__}: {e}"
         if show_traceback:
             message += f"\n{traceback.format_exc()}"
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/logging.py` & `chia-blockchain-2.0.0b3/chia/util/logging.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/lru_cache.py` & `chia-blockchain-2.0.0b3/chia/util/lru_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/merkle_set.py` & `chia-blockchain-2.0.0b3/chia/util/merkle_set.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/misc.py` & `chia-blockchain-2.0.0b3/chia/util/misc.py`

 * *Files 17% similar despite different names*

```diff
@@ -1,19 +1,22 @@
 from __future__ import annotations
 
 import dataclasses
 import signal
 import sys
+from dataclasses import dataclass
 from pathlib import Path
-from typing import Any, Dict, Sequence, Union
+from typing import Any, Collection, Dict, Generic, Iterator, List, Sequence, TypeVar, Union
 
 from chia.util.errors import InvalidPathError
 from chia.util.ints import uint16, uint32, uint64
 from chia.util.streamable import Streamable, recurse_jsonify, streamable
 
+T = TypeVar("T")
+
 
 @streamable
 @dataclasses.dataclass(frozen=True)
 class VersionedBlob(Streamable):
     version: uint16
     blob: bytes
 
@@ -117,15 +120,48 @@
     sendable_termination_signals = termination_signals
 
 
 @streamable
 @dataclasses.dataclass(frozen=True)
 class UInt32Range(Streamable):
     start: uint32 = uint32(0)
-    stop: uint32 = uint32(uint32.MAXIMUM_EXCLUSIVE - 1)
+    stop: uint32 = uint32.MAXIMUM
 
 
 @streamable
 @dataclasses.dataclass(frozen=True)
 class UInt64Range(Streamable):
     start: uint64 = uint64(0)
-    stop: uint64 = uint64(uint64.MAXIMUM_EXCLUSIVE - 1)
+    stop: uint64 = uint64.MAXIMUM
+
+
+@dataclass(frozen=True)
+class Batch(Generic[T]):
+    remaining: int
+    entries: List[T]
+
+
+def to_batches(to_split: Collection[T], batch_size: int) -> Iterator[Batch[T]]:
+    if batch_size <= 0:
+        raise ValueError("to_batches: batch_size must be greater than 0.")
+    total_size = len(to_split)
+    if total_size == 0:
+        return iter(())
+
+    if isinstance(to_split, list):
+        for batch_start in range(0, total_size, batch_size):
+            batch_end = min(batch_start + batch_size, total_size)
+            yield Batch(total_size - batch_end, to_split[batch_start:batch_end])
+    elif isinstance(to_split, set):
+        processed = 0
+        entries = []
+        for entry in to_split:
+            entries.append(entry)
+            if len(entries) >= batch_size:
+                processed += len(entries)
+                yield Batch(total_size - processed, entries)
+                entries = []
+        if len(entries) > 0:
+            processed += len(entries)
+            yield Batch(total_size - processed, entries)
+    else:
+        raise ValueError(f"to_batches: Unsupported type {type(to_split)}")
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/network.py` & `chia-blockchain-2.0.0b3/chia/util/network.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/paginator.py` & `chia-blockchain-2.0.0b3/chia/util/paginator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/partial_func.py` & `chia-blockchain-2.0.0b3/chia/util/partial_func.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/path.py` & `chia-blockchain-2.0.0b3/chia/util/path.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/pprint.py` & `chia-blockchain-2.0.0b3/chia/util/pprint.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/prev_transaction_block.py` & `chia-blockchain-2.0.0b3/chia/util/prev_transaction_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/profiler.py` & `chia-blockchain-2.0.0b3/chia/util/profiler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/service_groups.py` & `chia-blockchain-2.0.0b3/chia/util/service_groups.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/significant_bits.py` & `chia-blockchain-2.0.0b3/chia/util/significant_bits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/ssl_check.py` & `chia-blockchain-2.0.0b3/chia/util/ssl_check.py`

 * *Files 1% similar despite different names*

```diff
@@ -147,15 +147,15 @@
         print("@             WARNING: UNPROTECTED SSL FILE!              @")
         print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@")
         for path, actual_permissions, expected_permissions in invalid_files:
             print(
                 get_ssl_perm_warning(path, actual_permissions, expected_permissions)
             )  # lgtm [py/clear-text-logging-sensitive-data]
         print("One or more SSL files were found with permission issues.")
-        print("Run `chia init --fix-ssl-permissions` to fix issues.")
+        print("Run the following to fix issues: chia init --fix-ssl-permissions")
 
 
 def check_and_fix_permissions_for_ssl_file(file: Path, mask: int, updated_mode: int) -> Tuple[bool, bool]:
     """Check file permissions and attempt to fix them if found to be too open"""
     if sys.platform == "win32" or sys.platform == "cygwin":
         # TODO: ACLs for SSL certs/keys on Windows
         return True, False
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/streamable.py` & `chia-blockchain-2.0.0b3/chia/util/streamable.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/struct_stream.py` & `chia-blockchain-2.0.0b3/chia/util/struct_stream.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 from __future__ import annotations
 
-from typing import BinaryIO, SupportsInt, Type, TypeVar, Union
+from typing import BinaryIO, ClassVar, SupportsInt, Type, TypeVar, Union
 
 from typing_extensions import Protocol, SupportsIndex
 
 _T_StructStream = TypeVar("_T_StructStream", bound="StructStream")
 
 
 # https://github.com/python/typeshed/blob/c2182fdd3e572a1220c70ad9c28fd908b70fb19b/stdlib/_typeshed/__init__.pyi#L68-L69
@@ -33,43 +33,47 @@
     cls.SIZE, remainder = divmod(cls.BITS, 8)
     if remainder != 0:
         # There may be a good use case for removing this but until the details are
         # thought through we should avoid such cases.
         raise ValueError(f"cls.BITS must be a multiple of 8: {cls.BITS}")
 
     if cls.SIGNED:
-        cls.MAXIMUM_EXCLUSIVE = 2 ** (cls.BITS - 1)
         cls.MINIMUM = -(2 ** (cls.BITS - 1))
+        cls.MAXIMUM = (2 ** (cls.BITS - 1)) - 1
     else:
-        cls.MAXIMUM_EXCLUSIVE = 2**cls.BITS
         cls.MINIMUM = 0
+        cls.MAXIMUM = (2**cls.BITS) - 1
+
+    cls.MINIMUM = cls(cls.MINIMUM)
+    cls.MAXIMUM = cls(cls.MAXIMUM)
 
     return cls
 
 
 class StructStream(int):
-    SIZE = 0
-    BITS = 0
-    SIGNED = False
-    MAXIMUM_EXCLUSIVE = 0
-    MINIMUM = 0
+    SIZE: ClassVar[int]
+    BITS: ClassVar[int]
+    SIGNED: ClassVar[bool]
+    MAXIMUM: ClassVar[int]
+    MINIMUM: ClassVar[int]
 
     """
-    Create a class that can parse and stream itself based on a struct.pack template string.
+    Create a class that can parse and stream itself based on a struct.pack template string. This is only meant to be
+    a base class for further derivation and it's not recommended to instantiate it directly.
     """
 
     # This is just a partial exposure of the underlying int constructor.  Liskov...
     # https://github.com/python/typeshed/blob/5d07ebc864577c04366fcc46b84479dbec033921/stdlib/builtins.pyi#L181-L185
     def __init__(self, value: Union[str, bytes, SupportsInt, SupportsIndex, SupportsTrunc]) -> None:
         # v is unused here and that is ok since .__new__() seems to have already
         # processed the parameter when creating the instance of the class.  We have no
         # additional special action to take here beyond verifying that the newly
         # created instance satisfies the bounds limitations of the particular subclass.
         super().__init__()
-        if not (self.MINIMUM <= self < self.MAXIMUM_EXCLUSIVE):
+        if not (self.MINIMUM <= self <= self.MAXIMUM):
             raise ValueError(f"Value {self} does not fit into {type(self).__name__}")
 
     @classmethod
     def parse(cls: Type[_T_StructStream], f: BinaryIO) -> _T_StructStream:
         read_bytes = f.read(cls.SIZE)
         return cls.from_bytes(read_bytes)
```

### Comparing `chia-blockchain-2.0.0b1/chia/util/task_timing.py` & `chia-blockchain-2.0.0b3/chia/util/task_timing.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/vdf_prover.py` & `chia-blockchain-2.0.0b3/chia/util/vdf_prover.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/util/ws_message.py` & `chia-blockchain-2.0.0b3/chia/util/ws_message.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/block_record.py` & `chia-blockchain-2.0.0b3/chia/wallet/block_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_constants.py` & `chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_info.py` & `chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_outer_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_outer_puzzle.py`

 * *Files 1% similar despite different names*

```diff
@@ -5,22 +5,22 @@
 
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.util.ints import uint64
 from chia.wallet.cat_wallet.cat_utils import (
+    CAT_MOD,
     SpendableCAT,
     construct_cat_puzzle,
     match_cat_puzzle,
     unsigned_spend_bundle_for_spendable_cats,
 )
 from chia.wallet.lineage_proof import LineageProof
 from chia.wallet.puzzle_drivers import PuzzleInfo, Solver
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.uncurried_puzzle import UncurriedPuzzle, uncurry_puzzle
 
 
 @dataclass(frozen=True)
 class CATOuterPuzzle:
     _match: Callable[[UncurriedPuzzle], Optional[PuzzleInfo]]
     _construct: Callable[[PuzzleInfo, Program], Program]
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_utils.py` & `chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_utils.py`

 * *Files 3% similar despite different names*

```diff
@@ -9,20 +9,22 @@
 from chia.types.blockchain_format.program import INFINITE_COST, Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.types.condition_opcodes import ConditionOpcode
 from chia.types.spend_bundle import SpendBundle
 from chia.util.condition_tools import conditions_dict_for_solution
 from chia.wallet.lineage_proof import LineageProof
-from chia.wallet.puzzles.cat_loader import CAT_MOD
+from chia.wallet.puzzles.load_clvm import load_clvm_maybe_recompile
 from chia.wallet.uncurried_puzzle import UncurriedPuzzle
 
 NULL_SIGNATURE = G2Element()
 
 ANYONE_CAN_SPEND_PUZZLE = Program.to(1)  # simply return the conditions
+CAT_MOD = load_clvm_maybe_recompile("cat_v2.clsp", package_or_requirement="chia.wallet.puzzles")
+CAT_MOD_HASH = CAT_MOD.get_tree_hash()
 
 
 def empty_program() -> Program:
     # ignoring hint error here for:
     # https://github.com/Chia-Network/clvm/pull/102
     # https://github.com/Chia-Network/clvm/pull/106
     return Program.to([])  # type: ignore[no-any-return]
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/cat_wallet.py` & `chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/cat_wallet.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,14 +4,15 @@
 import logging
 import time
 import traceback
 from secrets import token_bytes
 from typing import TYPE_CHECKING, Any, ClassVar, Dict, List, Optional, Set, Tuple, cast
 
 from blspy import AugSchemeMPL, G1Element, G2Element
+from typing_extensions import Unpack
 
 from chia.consensus.cost_calculator import NPCResult
 from chia.full_node.bundle_tools import simple_solution_generator
 from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
@@ -24,27 +25,27 @@
 from chia.util.byte_types import hexstr_to_bytes
 from chia.util.condition_tools import conditions_dict_for_solution, pkm_pairs_for_conditions_dict
 from chia.util.hash import std_hash
 from chia.util.ints import uint32, uint64, uint128
 from chia.wallet.cat_wallet.cat_constants import DEFAULT_CATS
 from chia.wallet.cat_wallet.cat_info import CATInfo, LegacyCATInfo
 from chia.wallet.cat_wallet.cat_utils import (
+    CAT_MOD,
     SpendableCAT,
     construct_cat_puzzle,
     match_cat_puzzle,
     unsigned_spend_bundle_for_spendable_cats,
 )
 from chia.wallet.cat_wallet.lineage_store import CATLineageStore
 from chia.wallet.coin_selection import select_coins
 from chia.wallet.derivation_record import DerivationRecord
 from chia.wallet.lineage_proof import LineageProof
 from chia.wallet.outer_puzzles import AssetType
 from chia.wallet.payment import Payment
 from chia.wallet.puzzle_drivers import PuzzleInfo
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.puzzles.p2_delegated_puzzle_or_hidden_puzzle import (
     DEFAULT_HIDDEN_PUZZLE_HASH,
     calculate_synthetic_secret_key,
 )
 from chia.wallet.puzzles.tails import ALL_LIMITATIONS_PROGRAMS
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.uncurried_puzzle import uncurry_puzzle
@@ -52,29 +53,28 @@
 from chia.wallet.util.curry_and_treehash import calculate_hash_of_quoted_mod_hash, curry_and_treehash
 from chia.wallet.util.transaction_type import TransactionType
 from chia.wallet.util.wallet_sync_utils import fetch_coin_spend_for_coin_state
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet import Wallet
 from chia.wallet.wallet_coin_record import WalletCoinRecord
 from chia.wallet.wallet_info import WalletInfo
+from chia.wallet.wallet_protocol import GSTOptionalArgs, WalletProtocol
 
 if TYPE_CHECKING:
     from chia.wallet.wallet_state_manager import WalletStateManager
 
 # This should probably not live in this file but it's for experimental right now
 
 CAT_MOD_HASH = CAT_MOD.get_tree_hash()
 CAT_MOD_HASH_HASH = Program.to(CAT_MOD_HASH).get_tree_hash()
 QUOTED_MOD_HASH = calculate_hash_of_quoted_mod_hash(CAT_MOD_HASH)
 
 
 class CATWallet:
     if TYPE_CHECKING:
-        from chia.wallet.wallet_protocol import WalletProtocol
-
         _protocol_check: ClassVar[WalletProtocol] = cast("CATWallet", None)
 
     wallet_state_manager: WalletStateManager
     log: logging.Logger
     wallet_info: WalletInfo
     cat_info: CATInfo
     standard_wallet: Wallet
@@ -209,14 +209,30 @@
         limitations_program_hash = bytes32(hexstr_to_bytes(limitations_program_hash_hex))
         self.cat_info = CATInfo(limitations_program_hash, None)
         info_as_string = bytes(self.cat_info).hex()
         self.wallet_info = await wallet_state_manager.user_store.create_wallet(name, WalletType.CAT, info_as_string)
 
         self.lineage_store = await CATLineageStore.create(self.wallet_state_manager.db_wrapper, self.get_asset_id())
         await self.wallet_state_manager.add_new_wallet(self)
+
+        delete: bool = False
+        for state in await self.wallet_state_manager.interested_store.get_unacknowledged_states_for_asset_id(
+            limitations_program_hash
+        ):
+            new_peer = self.wallet_state_manager.wallet_node.get_full_node_peer()
+            if new_peer is not None:
+                delete = True
+                peer_id: bytes32 = new_peer.peer_node_id
+                await self.wallet_state_manager.retry_store.add_state(state[0], peer_id, state[1])
+
+        if delete:
+            await self.wallet_state_manager.interested_store.delete_unacknowledged_states_for_asset_id(
+                limitations_program_hash
+            )
+
         return self
 
     @classmethod
     async def create_from_puzzle_info(
         cls,
         wallet_state_manager: WalletStateManager,
         wallet: Wallet,
@@ -500,19 +516,15 @@
     async def sign(self, spend_bundle: SpendBundle) -> SpendBundle:
         sigs: List[G2Element] = []
         for spend in spend_bundle.coin_spends:
             args = match_cat_puzzle(uncurry_puzzle(spend.puzzle_reveal.to_program()))
             if args is not None:
                 _, _, inner_puzzle = args
                 puzzle_hash = inner_puzzle.get_tree_hash()
-                ret = await self.wallet_state_manager.get_keys(puzzle_hash)
-                if ret is None:
-                    # Abort signing the entire SpendBundle - sign all or none
-                    raise RuntimeError(f"Failed to get keys for puzzle_hash {puzzle_hash}")
-                pubkey, private = ret
+                private = await self.wallet_state_manager.get_private_key(puzzle_hash)
                 synthetic_secret_key = calculate_synthetic_secret_key(private, DEFAULT_HIDDEN_PUZZLE_HASH)
                 conditions = conditions_dict_for_solution(
                     spend.puzzle_reveal.to_program(),
                     spend.solution.to_program(),
                     self.wallet_state_manager.constants.MAX_BLOCK_COST_CLVM,
                 )
                 synthetic_pk = synthetic_secret_key.get_g1()
@@ -552,15 +564,15 @@
     async def create_tandem_xch_tx(
         self,
         fee: uint64,
         amount_to_claim: uint64,
         announcement_to_assert: Optional[Announcement] = None,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
-        exclude_coin_amounts: Optional[List[uint64]] = None,
+        excluded_coin_amounts: Optional[List[uint64]] = None,
         reuse_puzhash: Optional[bool] = None,
     ) -> Tuple[TransactionRecord, Optional[Announcement]]:
         """
         This function creates a non-CAT transaction to pay fees, contribute funds for issuance, and absorb melt value.
         It is meant to be called in `generate_unsigned_spendbundle` and as such should be called under the
         wallet_state_manager lock
         """
@@ -574,15 +586,15 @@
                     str(self.wallet_state_manager.wallet_node.logged_in_fingerprint), False
                 )
         if fee > amount_to_claim:
             chia_coins = await self.standard_wallet.select_coins(
                 fee,
                 min_coin_amount=min_coin_amount,
                 max_coin_amount=max_coin_amount,
-                excluded_coin_amounts=exclude_coin_amounts,
+                excluded_coin_amounts=excluded_coin_amounts,
             )
             origin_id = list(chia_coins)[0].name()
             chia_tx = await self.standard_wallet.generate_signed_transaction(
                 uint64(0),
                 (await self.standard_wallet.get_puzzle_hash(not reuse_puzhash)),
                 fee=uint64(fee - amount_to_claim),
                 coins=chia_coins,
@@ -604,15 +616,15 @@
             assert message is not None
             announcement = Announcement(origin_id, message)
         else:
             chia_coins = await self.standard_wallet.select_coins(
                 fee,
                 min_coin_amount=min_coin_amount,
                 max_coin_amount=max_coin_amount,
-                excluded_coin_amounts=exclude_coin_amounts,
+                excluded_coin_amounts=excluded_coin_amounts,
             )
             selected_amount = sum([c.amount for c in chia_coins])
             chia_tx = await self.standard_wallet.generate_signed_transaction(
                 uint64(selected_amount + amount_to_claim - fee),
                 (await self.standard_wallet.get_puzzle_hash(not reuse_puzhash)),
                 coins=chia_coins,
                 negative_change_allowed=True,
@@ -629,16 +641,16 @@
         fee: uint64 = uint64(0),
         cat_discrepancy: Optional[Tuple[int, Program, Program]] = None,  # (extra_delta, tail_reveal, tail_solution)
         coins: Optional[Set[Coin]] = None,
         coin_announcements_to_consume: Optional[Set[Announcement]] = None,
         puzzle_announcements_to_consume: Optional[Set[Announcement]] = None,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
-        exclude_coin_amounts: Optional[List[uint64]] = None,
-        exclude_coins: Optional[Set[Coin]] = None,
+        excluded_coin_amounts: Optional[List[uint64]] = None,
+        excluded_coins: Optional[Set[Coin]] = None,
         reuse_puzhash: Optional[bool] = None,
     ) -> Tuple[SpendBundle, Optional[TransactionRecord]]:
         if coin_announcements_to_consume is not None:
             coin_announcements_bytes: Optional[Set[bytes32]] = {a.name() for a in coin_announcements_to_consume}
         else:
             coin_announcements_bytes = None
 
@@ -658,24 +670,24 @@
             if reuse_puzhash_config is None:
                 reuse_puzhash = False
             else:
                 reuse_puzhash = reuse_puzhash_config.get(
                     str(self.wallet_state_manager.wallet_node.logged_in_fingerprint), False
                 )
         if coins is None:
-            if exclude_coins is None:
-                exclude_coins = set()
+            if excluded_coins is None:
+                excluded_coins = set()
             cat_coins = await self.select_coins(
                 uint64(starting_amount),
-                exclude=list(exclude_coins),
+                exclude=list(excluded_coins),
                 min_coin_amount=min_coin_amount,
                 max_coin_amount=max_coin_amount,
-                excluded_coin_amounts=exclude_coin_amounts,
+                excluded_coin_amounts=excluded_coin_amounts,
             )
-        elif exclude_coins is not None:
+        elif excluded_coins is not None:
             raise ValueError("Can't exclude coins when also specifically including coins")
         else:
             cat_coins = coins
 
         selected_cat_amount = sum([c.amount for c in cat_coins])
         assert selected_cat_amount >= starting_amount
 
@@ -720,30 +732,30 @@
                     if fee > regular_chia_to_claim:
                         chia_tx, _ = await self.create_tandem_xch_tx(
                             fee,
                             uint64(regular_chia_to_claim),
                             announcement_to_assert=announcement,
                             min_coin_amount=min_coin_amount,
                             max_coin_amount=max_coin_amount,
-                            exclude_coin_amounts=exclude_coin_amounts,
+                            excluded_coin_amounts=excluded_coin_amounts,
                             reuse_puzhash=reuse_puzhash,
                         )
                         innersol = self.standard_wallet.make_solution(
                             primaries=primaries,
                             coin_announcements={announcement.message},
                             coin_announcements_to_assert=coin_announcements_bytes,
                             puzzle_announcements_to_assert=puzzle_announcements_bytes,
                         )
                     elif regular_chia_to_claim > fee:
                         chia_tx, _ = await self.create_tandem_xch_tx(
                             fee,
                             uint64(regular_chia_to_claim),
                             min_coin_amount=min_coin_amount,
                             max_coin_amount=max_coin_amount,
-                            exclude_coin_amounts=exclude_coin_amounts,
+                            excluded_coin_amounts=excluded_coin_amounts,
                             reuse_puzhash=reuse_puzhash,
                         )
                         innersol = self.standard_wallet.make_solution(
                             primaries=primaries,
                             coin_announcements={announcement.message},
                             coin_announcements_to_assert={announcement.name()},
                         )
@@ -802,19 +814,21 @@
         coins: Optional[Set[Coin]] = None,
         ignore_max_send_amount: bool = False,
         memos: Optional[List[List[bytes]]] = None,
         coin_announcements_to_consume: Optional[Set[Announcement]] = None,
         puzzle_announcements_to_consume: Optional[Set[Announcement]] = None,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
-        exclude_coin_amounts: Optional[List[uint64]] = None,
-        exclude_cat_coins: Optional[Set[Coin]] = None,
-        cat_discrepancy: Optional[Tuple[int, Program, Program]] = None,  # (extra_delta, tail_reveal, tail_solution)
+        excluded_coin_amounts: Optional[List[uint64]] = None,
         reuse_puzhash: Optional[bool] = None,
+        **kwargs: Unpack[GSTOptionalArgs],
     ) -> List[TransactionRecord]:
+        excluded_cat_coins: Optional[Set[Coin]] = kwargs.get("excluded_cat_coins", None)
+        # (extra_delta, tail_reveal, tail_solution)
+        cat_discrepancy: Optional[Tuple[int, Program, Program]] = kwargs.get("cat_discrepancy", None)
         if memos is None:
             memos = [[] for _ in range(len(puzzle_hashes))]
 
         if not (len(memos) == len(puzzle_hashes) == len(amounts)):
             raise ValueError("Memos, puzzle_hashes, and amounts must have the same length")
 
         payments = []
@@ -833,16 +847,16 @@
             fee,
             cat_discrepancy=cat_discrepancy,  # (extra_delta, tail_reveal, tail_solution)
             coins=coins,
             coin_announcements_to_consume=coin_announcements_to_consume,
             puzzle_announcements_to_consume=puzzle_announcements_to_consume,
             min_coin_amount=min_coin_amount,
             max_coin_amount=max_coin_amount,
-            exclude_coin_amounts=exclude_coin_amounts,
-            exclude_coins=exclude_cat_coins,
+            excluded_coin_amounts=excluded_coin_amounts,
+            excluded_coins=excluded_cat_coins,
             reuse_puzhash=reuse_puzhash,
         )
         spend_bundle = await self.sign(unsigned_spend_bundle)
         # TODO add support for array in stored records
         tx_list = [
             TransactionRecord(
                 confirmed_at_height=uint32(0),
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/cat_wallet/lineage_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/cat_wallet/lineage_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/chialisp.py` & `chia-blockchain-2.0.0b3/chia/wallet/chialisp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/coin_selection.py` & `chia-blockchain-2.0.0b3/chia/wallet/coin_selection.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/db_wallet/db_wallet_puzzles.py` & `chia-blockchain-2.0.0b3/chia/wallet/db_wallet/db_wallet_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/derivation_record.py` & `chia-blockchain-2.0.0b3/chia/wallet/derivation_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/derive_keys.py` & `chia-blockchain-2.0.0b3/chia/wallet/derive_keys.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/did_wallet/did_info.py` & `chia-blockchain-2.0.0b3/chia/wallet/did_wallet/did_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/did_wallet/did_wallet.py` & `chia-blockchain-2.0.0b3/chia/wallet/did_wallet/did_wallet.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,16 +6,14 @@
 import re
 import time
 from secrets import token_bytes
 from typing import TYPE_CHECKING, Any, ClassVar, Dict, List, Optional, Set, Tuple, cast
 
 from blspy import AugSchemeMPL, G1Element, G2Element
 
-from chia.full_node.full_node_api import FullNodeAPI
-from chia.protocols import wallet_protocol
 from chia.protocols.wallet_protocol import CoinState
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
@@ -41,15 +39,15 @@
     create_singleton_puzzle,
     create_singleton_puzzle_hash,
     get_inner_puzzle_from_singleton,
 )
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.compute_memos import compute_memos
 from chia.wallet.util.transaction_type import TransactionType
-from chia.wallet.util.wallet_sync_utils import fetch_coin_spend
+from chia.wallet.util.wallet_sync_utils import fetch_coin_spend, fetch_coin_spend_for_coin_state
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet import CHIP_0002_SIGN_MESSAGE_PREFIX, Wallet
 from chia.wallet.wallet_coin_record import WalletCoinRecord
 from chia.wallet.wallet_info import WalletInfo
 
 
 class DIDWallet:
@@ -384,22 +382,16 @@
 
         parent = self.get_parent_for_coin(coin)
         if parent is None:
             # this is the first time we received it, check it's a DID coin
             parent_state: CoinState = (
                 await self.wallet_state_manager.wallet_node.get_coin_state([coin.parent_coin_info], peer=peer)
             )[0]
-            assert parent_state.spent_height is not None
-            puzzle_solution_request = wallet_protocol.RequestPuzzleSolution(
-                coin.parent_coin_info, uint32(parent_state.spent_height)
-            )
-            response = await peer.call_api(FullNodeAPI.request_puzzle_solution, puzzle_solution_request)
-            req_puz_sol = response.response
-            assert req_puz_sol.puzzle is not None
-            parent_innerpuz = get_inner_puzzle_from_singleton(req_puz_sol.puzzle.to_program())
+            response = await fetch_coin_spend_for_coin_state(parent_state, peer)
+            parent_innerpuz = get_inner_puzzle_from_singleton(response.puzzle_reveal.to_program())
             if parent_innerpuz:
                 parent_info = LineageProof(
                     parent_state.coin.parent_coin_info,
                     parent_innerpuz.get_tree_hash(),
                     uint64(parent_state.coin.amount),
                 )
 
@@ -760,14 +752,16 @@
         return did_record
 
     # The message spend can tests\wallet\rpc\test_wallet_rpc.py send messages and also change your innerpuz
     async def create_message_spend(
         self,
         coin_announcements: Optional[Set[bytes]] = None,
         puzzle_announcements: Optional[Set[bytes]] = None,
+        coin_announcements_to_assert: Optional[Set[Announcement]] = None,
+        puzzle_announcements_to_assert: Optional[Set[Announcement]] = None,
         new_innerpuzzle: Optional[Program] = None,
     ):
         assert self.did_info.current_inner is not None
         assert self.did_info.origin_coin is not None
         coins = await self.select_coins(uint64(1))
         assert coins is not None
         coin = coins.pop()
@@ -778,14 +772,20 @@
         uncurried = did_wallet_puzzles.uncurry_innerpuz(new_innerpuzzle)
         assert uncurried is not None
         p2_puzzle = uncurried[0]
         p2_solution = self.standard_wallet.make_solution(
             primaries=[Payment(new_innerpuzzle.get_tree_hash(), uint64(coin.amount), [p2_puzzle.get_tree_hash()])],
             puzzle_announcements=puzzle_announcements,
             coin_announcements=coin_announcements,
+            coin_announcements_to_assert={a.name() for a in coin_announcements_to_assert}
+            if coin_announcements_to_assert is not None
+            else None,
+            puzzle_announcements_to_assert={a.name() for a in puzzle_announcements_to_assert}
+            if puzzle_announcements_to_assert is not None
+            else None,
         )
         # innerpuz solution is (mode p2_solution)
         innersol: Program = Program.to([1, p2_solution])
 
         # full solution is (corehash parent_info my_amount innerpuz_reveal solution)
         full_puzzle: Program = create_singleton_puzzle(
             innerpuz,
@@ -1171,15 +1171,15 @@
     async def sign_message(self, message: str, is_hex: bool = False) -> Tuple[G1Element, G2Element]:
         if self.did_info.current_inner is None:
             raise ValueError("Missing DID inner puzzle.")
         puzzle_args = did_wallet_puzzles.uncurry_innerpuz(self.did_info.current_inner)
         if puzzle_args is not None:
             p2_puzzle, _, _, _, _ = puzzle_args
             puzzle_hash = p2_puzzle.get_tree_hash()
-            pubkey, private = await self.wallet_state_manager.get_keys(puzzle_hash)
+            private = await self.wallet_state_manager.get_private_key(puzzle_hash)
             synthetic_secret_key = calculate_synthetic_secret_key(private, DEFAULT_HIDDEN_PUZZLE_HASH)
             synthetic_pk = synthetic_secret_key.get_g1()
             if is_hex:
                 puzzle: Program = Program.to((CHIP_0002_SIGN_MESSAGE_PREFIX, bytes.fromhex(message)))
             else:
                 puzzle = Program.to((CHIP_0002_SIGN_MESSAGE_PREFIX, message))
             return synthetic_pk, AugSchemeMPL.sign(synthetic_secret_key, puzzle.get_tree_hash())
@@ -1189,15 +1189,15 @@
     async def sign(self, spend_bundle: SpendBundle) -> SpendBundle:
         sigs: List[G2Element] = []
         for spend in spend_bundle.coin_spends:
             puzzle_args = did_wallet_puzzles.match_did_puzzle(*spend.puzzle_reveal.to_program().uncurry())
             if puzzle_args is not None:
                 p2_puzzle, _, _, _, _ = puzzle_args
                 puzzle_hash = p2_puzzle.get_tree_hash()
-                pubkey, private = await self.wallet_state_manager.get_keys(puzzle_hash)
+                private = await self.wallet_state_manager.get_private_key(puzzle_hash)
                 synthetic_secret_key = calculate_synthetic_secret_key(private, DEFAULT_HIDDEN_PUZZLE_HASH)
                 conditions = conditions_dict_for_solution(
                     spend.puzzle_reveal.to_program(),
                     spend.solution.to_program(),
                     self.wallet_state_manager.constants.MAX_BLOCK_COST_CLVM,
                 )
                 synthetic_pk = synthetic_secret_key.get_g1()
@@ -1232,15 +1232,22 @@
         did_puzzle_hash = did_full_puz.get_tree_hash()
 
         announcement_set: Set[Announcement] = set()
         announcement_message = Program.to([did_puzzle_hash, amount, bytes(0x80)]).get_tree_hash()
         announcement_set.add(Announcement(launcher_coin.name(), announcement_message))
 
         tx_record: Optional[TransactionRecord] = await self.standard_wallet.generate_signed_transaction(
-            amount, genesis_launcher_puz.get_tree_hash(), fee, origin.name(), coins, None, False, announcement_set
+            amount,
+            genesis_launcher_puz.get_tree_hash(),
+            fee,
+            coins,
+            None,
+            False,
+            announcement_set,
+            origin_id=origin.name(),
         )
 
         genesis_launcher_solution = Program.to([did_puzzle_hash, amount, bytes(0x80)])
 
         launcher_cs = CoinSpend(launcher_coin, genesis_launcher_puz, genesis_launcher_solution)
         launcher_sb = SpendBundle([launcher_cs], AugSchemeMPL.aggregate([]))
         eve_coin = Coin(launcher_coin.name(), did_puzzle_hash, amount)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/did_wallet/did_wallet_puzzles.py` & `chia-blockchain-2.0.0b3/chia/wallet/did_wallet/did_wallet_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/driver_protocol.py` & `chia-blockchain-2.0.0b3/chia/wallet/driver_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/key_val_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/key_val_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/lineage_proof.py` & `chia-blockchain-2.0.0b3/chia/wallet/lineage_proof.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/metadata_outer_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/metadata_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/nft_info.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/nft_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/nft_puzzles.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/nft_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/nft_wallet.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/nft_wallet.py`

 * *Files 0% similar despite different names*

```diff
@@ -5,14 +5,15 @@
 import logging
 import math
 import time
 from typing import TYPE_CHECKING, Any, ClassVar, Dict, List, Optional, Set, Tuple, Type, TypeVar, cast
 
 from blspy import AugSchemeMPL, G1Element, G2Element
 from clvm.casts import int_from_bytes, int_to_bytes
+from typing_extensions import Unpack
 
 import chia.wallet.singleton
 from chia.protocols.wallet_protocol import CoinState
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
@@ -52,22 +53,21 @@
 from chia.wallet.util.transaction_type import TransactionType
 from chia.wallet.util.wallet_sync_utils import fetch_coin_spend
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet import CHIP_0002_SIGN_MESSAGE_PREFIX, Wallet
 from chia.wallet.wallet_coin_record import WalletCoinRecord
 from chia.wallet.wallet_info import WalletInfo
 from chia.wallet.wallet_nft_store import WalletNftStore
+from chia.wallet.wallet_protocol import GSTOptionalArgs, WalletProtocol
 
 _T_NFTWallet = TypeVar("_T_NFTWallet", bound="NFTWallet")
 
 
 class NFTWallet:
     if TYPE_CHECKING:
-        from chia.wallet.wallet_protocol import WalletProtocol
-
         _protocol_check: ClassVar[WalletProtocol] = cast("NFTWallet", None)
 
     wallet_state_manager: Any
     log: logging.Logger
     wallet_info: WalletInfo
     nft_wallet_info: NFTWalletInfo
     standard_wallet: Wallet
@@ -397,19 +397,19 @@
             "Creating transaction for launcher: %s and other coins: %s (%s)", origin, coins, announcement_set
         )
         # store the launcher transaction in the wallet state
         tx_record: Optional[TransactionRecord] = await self.standard_wallet.generate_signed_transaction(
             uint64(amount),
             nft_puzzles.LAUNCHER_PUZZLE_HASH,
             fee,
-            origin.name(),
             coins,
             None,
             False,
             announcement_set,
+            origin_id=origin.name(),
         )
         genesis_launcher_solution = Program.to([eve_fullpuz_hash, amount, []])
 
         # launcher spend to generate the singleton
         launcher_cs = CoinSpend(launcher_coin, genesis_launcher_puz, genesis_launcher_solution)
         launcher_sb = SpendBundle([launcher_cs], AugSchemeMPL.aggregate([]))
 
@@ -460,17 +460,16 @@
             pks = {}
             if not puzzle_hashes:
                 uncurried_nft = UncurriedNFT.uncurry(*spend.puzzle_reveal.to_program().uncurry())
                 if uncurried_nft is not None:
                     self.log.debug("Found a NFT state layer to sign")
                     puzzle_hashes.append(uncurried_nft.p2_puzzle.get_tree_hash())
             for ph in puzzle_hashes:
-                keys = await self.wallet_state_manager.get_keys(ph)
-                assert keys
-                pks[bytes(keys[0])] = private = keys[1]
+                private = await self.wallet_state_manager.get_private_key(ph)
+                pks[bytes(private.get_g1())] = private
                 synthetic_secret_key = calculate_synthetic_secret_key(private, DEFAULT_HIDDEN_PUZZLE_HASH)
                 synthetic_pk = synthetic_secret_key.get_g1()
                 pks[bytes(synthetic_pk)] = synthetic_secret_key
             conditions = conditions_dict_for_solution(
                 spend.puzzle_reveal.to_program(),
                 spend.solution.to_program(),
                 self.wallet_state_manager.constants.MAX_BLOCK_COST_CLVM,
@@ -559,15 +558,15 @@
             return puzzle_info
 
     async def sign_message(self, message: str, nft: NFTCoinInfo, is_hex: bool = False) -> Tuple[G1Element, G2Element]:
         uncurried_nft = UncurriedNFT.uncurry(*nft.full_puzzle.uncurry())
         if uncurried_nft is not None:
             p2_puzzle = uncurried_nft.p2_puzzle
             puzzle_hash = p2_puzzle.get_tree_hash()
-            pubkey, private = await self.wallet_state_manager.get_keys(puzzle_hash)
+            private = await self.wallet_state_manager.get_private_key(puzzle_hash)
             synthetic_secret_key = calculate_synthetic_secret_key(private, DEFAULT_HIDDEN_PUZZLE_HASH)
             synthetic_pk = synthetic_secret_key.get_g1()
             if is_hex:
                 puzzle: Program = Program.to((CHIP_0002_SIGN_MESSAGE_PREFIX, bytes.fromhex(message)))
             else:
                 puzzle = Program.to((CHIP_0002_SIGN_MESSAGE_PREFIX, message))
             return synthetic_pk, AugSchemeMPL.sign(synthetic_secret_key, puzzle.get_tree_hash())
@@ -617,26 +616,27 @@
 
     async def generate_signed_transaction(
         self,
         amounts: List[uint64],
         puzzle_hashes: List[bytes32],
         fee: uint64 = uint64(0),
         coins: Optional[Set[Coin]] = None,
-        nft_coin: Optional[NFTCoinInfo] = None,
         memos: Optional[List[List[bytes]]] = None,
         coin_announcements_to_consume: Optional[Set[Announcement]] = None,
         puzzle_announcements_to_consume: Optional[Set[Announcement]] = None,
         ignore_max_send_amount: bool = False,
-        new_owner: Optional[bytes] = None,
-        new_did_inner_hash: Optional[bytes] = None,
-        trade_prices_list: Optional[Program] = None,
-        additional_bundles: List[SpendBundle] = [],
-        metadata_update: Optional[Tuple[str, str]] = None,
         reuse_puzhash: Optional[bool] = None,
+        **kwargs: Unpack[GSTOptionalArgs],
     ) -> List[TransactionRecord]:
+        nft_coin: Optional[NFTCoinInfo] = kwargs.get("nft_coin", None)
+        new_owner: Optional[bytes] = kwargs.get("new_owner", None)
+        new_did_inner_hash: Optional[bytes] = kwargs.get("new_did_inner_hash", None)
+        trade_prices_list: Optional[Program] = kwargs.get("trade_prices_list", None)
+        additional_bundles: List[SpendBundle] = kwargs.get("additional_bundles", [])
+        metadata_update: Optional[Tuple[str, str]] = kwargs.get("metadata_update", None)
         if memos is None:
             memos = [[] for _ in range(len(puzzle_hashes))]
 
         if not (len(memos) == len(puzzle_hashes) == len(amounts)):
             raise ValueError("Memos, puzzle_hashes, and amounts must have the same length")
 
         payments = []
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/ownership_outer_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/ownership_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/singleton_outer_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/singleton_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/transfer_program_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/transfer_program_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/nft_wallet/uncurry_nft.py` & `chia-blockchain-2.0.0b3/chia/wallet/nft_wallet/uncurry_nft.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/notification_manager.py` & `chia-blockchain-2.0.0b3/chia/wallet/notification_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/notification_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/notification_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/outer_puzzles.py` & `chia-blockchain-2.0.0b3/chia/wallet/outer_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/payment.py` & `chia-blockchain-2.0.0b3/chia/wallet/payment.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzle_drivers.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzle_drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/block_program_zero.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/block_program_zero.clsp`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 
 ; TODO convert generators arg to list of generators
 
 (mod (decompress_puzzle decompress_coin_spend_entry start end compressed_cses deserialize gen_list reserved_arg)
 
   (defun decompress_cses (decompress_puzzle decompress_coin_spend_entry cses deserialize puzzle_prefix)
     (if cses
-      (c (a decompress_coin_spend_entry (list deserialize decompress_puzzle puzzle_prefix (f cses)))
-         (decompress_cses decompress_puzzle decompress_coin_spend_entry (r cses) deserialize puzzle_prefix ))
-      ()) )
+        (c (a decompress_coin_spend_entry (list deserialize decompress_puzzle puzzle_prefix (f cses)))
+        (decompress_cses decompress_puzzle decompress_coin_spend_entry (r cses) deserialize puzzle_prefix ))
+  ()) )
 
-      (list (decompress_cses decompress_puzzle decompress_coin_spend_entry compressed_cses deserialize (substr (f gen_list) start end)))
+  (list (decompress_cses decompress_puzzle decompress_coin_spend_entry compressed_cses deserialize (substr (f gen_list) start end)))
 
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_truths.clib` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/cat_truths.clib`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_v2.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/cat_v2.clsp`

 * *Files 3% similar despite different names*

```diff
@@ -88,310 +88,310 @@
 ;;  this_coin_info: (parent_id puzzle_hash amount)
 ;;  next_coin_proof: (parent_id inner_puzzle_hash amount)
 ;;  prev_subtotal: the subtotal between prev-coin and this-coin
 ;;  extra_delta: an amount that is added to our delta and checked by the TAIL program
 ;;
 
 (mod (
-      MOD_HASH                 ;; curried into puzzle
-      TAIL_PROGRAM_HASH        ;; curried into puzzle
-      INNER_PUZZLE             ;; curried into puzzle
-      inner_puzzle_solution    ;; if invalid, INNER_PUZZLE will fail
-      lineage_proof            ;; This is the parent's coin info, used to check if the parent was a CAT. Optional if using tail_program.
-      prev_coin_id             ;; used in this coin's announcement, prev_coin ASSERT_COIN_ANNOUNCEMENT will fail if wrong
-      this_coin_info           ;; verified with ASSERT_MY_COIN_ID
-      next_coin_proof          ;; used to generate ASSERT_COIN_ANNOUNCEMENT
-      prev_subtotal            ;; included in announcement, prev_coin ASSERT_COIN_ANNOUNCEMENT will fail if wrong
-      extra_delta              ;; this is the "legal discrepancy" between your real delta and what you're announcing your delta is
-    )
-
-     ;;;;; start library code
-
-     (include condition_codes.clib)
-     (include curry-and-treehash.clib)
-     (include cat_truths.clib)
-     (include utility_macros.clib)
-
-     (defconstant RING_MORPH_BYTE 0xcb)
-
-
-    ; take two lists and merge them into one
-    (defun merge_list (list_a list_b)
-      (if list_a
+    MOD_HASH  ;; curried into puzzle
+    TAIL_PROGRAM_HASH  ;; curried into puzzle
+    INNER_PUZZLE  ;; curried into puzzle
+    inner_puzzle_solution  ;; if invalid, INNER_PUZZLE will fail
+    lineage_proof  ;; This is the parent's coin info, used to check if the parent was a CAT. Optional if using tail_program.
+    prev_coin_id  ;; used in this coin's announcement, prev_coin ASSERT_COIN_ANNOUNCEMENT will fail if wrong
+    this_coin_info  ;; verified with ASSERT_MY_COIN_ID
+    next_coin_proof  ;; used to generate ASSERT_COIN_ANNOUNCEMENT
+    prev_subtotal  ;; included in announcement, prev_coin ASSERT_COIN_ANNOUNCEMENT will fail if wrong
+    extra_delta  ;; this is the "legal discrepancy" between your real delta and what you're announcing your delta is
+  )
+
+  ;;;;; start library code
+
+  (include condition_codes.clib)
+  (include curry-and-treehash.clib)
+  (include cat_truths.clib)
+  (include utility_macros.clib)
+
+  (defconstant RING_MORPH_BYTE 0xcb)
+
+
+  ; take two lists and merge them into one
+  (defun merge_list (list_a list_b)
+    (if list_a
         (c (f list_a) (merge_list (r list_a) list_b))
         list_b
-      )
     )
+  )
 
-    ; cat_mod_struct = (MOD_HASH MOD_HASH_hash GENESIS_COIN_CHECKER GENESIS_COIN_CHECKER_hash)
+  ; cat_mod_struct = (MOD_HASH MOD_HASH_hash GENESIS_COIN_CHECKER GENESIS_COIN_CHECKER_hash)
 
-    (defun-inline mod_hash_from_cat_mod_struct (cat_mod_struct) (f cat_mod_struct))
-    (defun-inline mod_hash_hash_from_cat_mod_struct (cat_mod_struct) (f (r cat_mod_struct)))
-    (defun-inline tail_program_hash_from_cat_mod_struct (cat_mod_struct) (f (r (r cat_mod_struct))))
-
-     ;;;;; end library code
-
-     ;; return the puzzle hash for a cat with the given `GENESIS_COIN_CHECKER_hash` & `INNER_PUZZLE`
-     (defun-inline cat_puzzle_hash (cat_mod_struct inner_puzzle_hash)
-       (puzzle-hash-of-curried-function (mod_hash_from_cat_mod_struct cat_mod_struct)
-                                        inner_puzzle_hash
-                                        (sha256 ONE (tail_program_hash_from_cat_mod_struct cat_mod_struct))
-                                        (mod_hash_hash_from_cat_mod_struct cat_mod_struct)
-       )
-     )
-
-     ;; assert `CREATE_COIN_ANNOUNCEMENT` doesn't contain the RING_MORPH_BYTE bytes so it cannot be used to cheat the coin ring
-
-     (defun-inline morph_condition (condition cat_mod_struct)
-       (if (= (f condition) CREATE_COIN)
-         (c CREATE_COIN
-               (c (cat_puzzle_hash cat_mod_struct (f (r condition)))
-                    (r (r condition)))
-         )
-         (if (= (f condition) CREATE_COIN_ANNOUNCEMENT)
-           (assert (not (and
-                     (= 33 (strlen (f (r condition))))
-                     (= (substr (f (r condition)) 0 ONE) RING_MORPH_BYTE)  ; lazy eval
-                   ))
-             ; then
-             condition
-           )
-           condition
-         )
-       )
-     )
-
-     ;; given a coin's parent, inner_puzzle and amount, and the cat_mod_struct, calculate the id of the coin
-     (defun-inline coin_id_for_proof (coin cat_mod_struct)
-       (calculate_coin_id (f coin) (cat_puzzle_hash cat_mod_struct (f (r coin))) (f (r (r coin))))
-     )
-
-     ;; utility to fetch coin amount from coin
-     (defun-inline input_amount_for_coin (coin)
-       (f (r (r coin)))
-     )
-
-     ;; calculate the hash of an announcement
-     ;; we add 0xcb so ring announcements exist in a different namespace to announcements from inner_puzzles
-     (defun-inline calculate_annoucement_id (this_coin_id this_subtotal next_coin_id cat_mod_struct)
-       (sha256 next_coin_id RING_MORPH_BYTE (sha256tree (list this_coin_id this_subtotal)))
-     )
-
-     ;; create the `ASSERT_COIN_ANNOUNCEMENT` condition that ensures the next coin's announcement is correct
-     (defun-inline create_assert_next_announcement_condition (this_coin_id this_subtotal next_coin_id cat_mod_struct)
-       (list ASSERT_COIN_ANNOUNCEMENT
-             (calculate_annoucement_id this_coin_id
-                                            this_subtotal
-                                            next_coin_id
-                                            cat_mod_struct
-             )
-       )
-     )
-
-     ;; here we commit to I_{k-1} and S_k
-     ;; we add 0xcb so ring announcements exist in a different namespace to announcements from inner_puzzles
-     (defun-inline create_announcement_condition (prev_coin_id prev_subtotal)
-       (list CREATE_COIN_ANNOUNCEMENT
-             (concat RING_MORPH_BYTE (sha256tree (list prev_coin_id prev_subtotal)))
-       )
-      )
+  (defun-inline mod_hash_from_cat_mod_struct (cat_mod_struct) (f cat_mod_struct))
+  (defun-inline mod_hash_hash_from_cat_mod_struct (cat_mod_struct) (f (r cat_mod_struct)))
+  (defun-inline tail_program_hash_from_cat_mod_struct (cat_mod_struct) (f (r (r cat_mod_struct))))
+
+  ;;;;; end library code
+
+  ;; return the puzzle hash for a cat with the given `GENESIS_COIN_CHECKER_hash` & `INNER_PUZZLE`
+  (defun-inline cat_puzzle_hash (cat_mod_struct inner_puzzle_hash)
+    (puzzle-hash-of-curried-function (mod_hash_from_cat_mod_struct cat_mod_struct)
+      inner_puzzle_hash
+      (sha256 ONE (tail_program_hash_from_cat_mod_struct cat_mod_struct))
+      (mod_hash_hash_from_cat_mod_struct cat_mod_struct)
+    )
+  )
+
+  ;; assert `CREATE_COIN_ANNOUNCEMENT` doesn't contain the RING_MORPH_BYTE bytes so it cannot be used to cheat the coin ring
 
-     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
+  (defun-inline morph_condition (condition cat_mod_struct)
+    (if (= (f condition) CREATE_COIN)
+        (c CREATE_COIN
+          (c (cat_puzzle_hash cat_mod_struct (f (r condition)))
+          (r (r condition)))
+        )
+        (if (= (f condition) CREATE_COIN_ANNOUNCEMENT)
+            (assert (not (and
+                (= 33 (strlen (f (r condition))))
+                (= (substr (f (r condition)) 0 ONE) RING_MORPH_BYTE)  ; lazy eval
+              ))
+              ; then
+              condition
+            )
+            condition
+        )
+    )
+  )
 
-     ;; this function takes a condition and returns an integer indicating
-     ;; the value of all output coins created with CREATE_COIN. If it's not
-     ;; a CREATE_COIN condition, it returns 0.
-
-     (defun-inline output_value_for_condition (condition)
-       (if (= (f condition) CREATE_COIN)
-         (f (r (r condition)))
-         0
-       )
-     )
-
-     ;; add two conditions to the list of morphed conditions:
-     ;; CREATE_COIN_ANNOUNCEMENT for my announcement
-     ;; ASSERT_COIN_ANNOUNCEMENT for the next coin's announcement
-     (defun-inline generate_final_output_conditions
-       (
-         prev_subtotal
-         this_subtotal
-         morphed_conditions
-         prev_coin_id
-         this_coin_id
-         next_coin_id
-         cat_mod_struct
-       )
-         (c (create_announcement_condition prev_coin_id prev_subtotal)
-           (c (create_assert_next_announcement_condition this_coin_id this_subtotal next_coin_id cat_mod_struct)
-             morphed_conditions)
-         )
+  ;; given a coin's parent, inner_puzzle and amount, and the cat_mod_struct, calculate the id of the coin
+  (defun-inline coin_id_for_proof (coin cat_mod_struct)
+    (calculate_coin_id (f coin) (cat_puzzle_hash cat_mod_struct (f (r coin))) (f (r (r coin))))
+  )
+
+  ;; utility to fetch coin amount from coin
+  (defun-inline input_amount_for_coin (coin)
+    (f (r (r coin)))
+  )
+
+  ;; calculate the hash of an announcement
+  ;; we add 0xcb so ring announcements exist in a different namespace to announcements from inner_puzzles
+  (defun-inline calculate_annoucement_id (this_coin_id this_subtotal next_coin_id cat_mod_struct)
+    (sha256 next_coin_id RING_MORPH_BYTE (sha256tree (list this_coin_id this_subtotal)))
+  )
+
+  ;; create the `ASSERT_COIN_ANNOUNCEMENT` condition that ensures the next coin's announcement is correct
+  (defun-inline create_assert_next_announcement_condition (this_coin_id this_subtotal next_coin_id cat_mod_struct)
+    (list ASSERT_COIN_ANNOUNCEMENT
+      (calculate_annoucement_id this_coin_id
+        this_subtotal
+        next_coin_id
+        cat_mod_struct
       )
+    )
+  )
 
+  ;; here we commit to I_{k-1} and S_k
+  ;; we add 0xcb so ring announcements exist in a different namespace to announcements from inner_puzzles
+  (defun-inline create_announcement_condition (prev_coin_id prev_subtotal)
+    (list CREATE_COIN_ANNOUNCEMENT
+      (concat RING_MORPH_BYTE (sha256tree (list prev_coin_id prev_subtotal)))
+    )
+  )
 
-      ;; This next section of code loops through all of the conditions to do three things:
-      ;;   1) Look for a "magic" value of -113 and, if one exists, filter it, and take note of the tail reveal and solution
-      ;;   2) Morph any CREATE_COIN or CREATE_COIN_ANNOUNCEMENT conditions
-      ;;   3) Sum the total output amount of all of the CREATE_COINs that are output by the inner puzzle
-      ;;
-      ;; After everything return a struct in the format (morphed_conditions . (output_sum . tail_reveal_and_solution))
-      ;; If multiple magic conditions are specified, the later one will take precedence
+  ;;;;;;;;;;;;;;;;;;;;;;;;;;;
 
-      (defun-inline condition_tail_reveal (condition) (f (r (r (r condition)))))
-      (defun-inline condition_tail_solution (condition) (f (r (r (r (r condition))))))
+  ;; this function takes a condition and returns an integer indicating
+  ;; the value of all output coins created with CREATE_COIN. If it's not
+  ;; a CREATE_COIN condition, it returns 0.
+
+  (defun-inline output_value_for_condition (condition)
+    (if (= (f condition) CREATE_COIN)
+        (f (r (r condition)))
+        0
+    )
+  )
+
+  ;; add two conditions to the list of morphed conditions:
+  ;; CREATE_COIN_ANNOUNCEMENT for my announcement
+  ;; ASSERT_COIN_ANNOUNCEMENT for the next coin's announcement
+  (defun-inline generate_final_output_conditions
+    (
+      prev_subtotal
+      this_subtotal
+      morphed_conditions
+      prev_coin_id
+      this_coin_id
+      next_coin_id
+      cat_mod_struct
+    )
+    (c (create_announcement_condition prev_coin_id prev_subtotal)
+      (c (create_assert_next_announcement_condition this_coin_id this_subtotal next_coin_id cat_mod_struct)
+      morphed_conditions)
+    )
+  )
 
-      (defun cons_onto_first_and_add_to_second (morphed_condition output_value struct)
-        (c (c morphed_condition (f struct)) (c (+ output_value (f (r struct))) (r (r struct))))
-      )
 
-      (defun find_and_strip_tail_info (inner_conditions cat_mod_struct tail_reveal_and_solution)
-        (if inner_conditions
-            (if (= (output_value_for_condition (f inner_conditions)) -113)  ; Checks this is a CREATE_COIN of value -113
-                (find_and_strip_tail_info
-                  (r inner_conditions)
-                  cat_mod_struct
-                  (c (condition_tail_reveal (f inner_conditions)) (condition_tail_solution (f inner_conditions)))
-                )
-                (cons_onto_first_and_add_to_second
-                  (morph_condition (f inner_conditions) cat_mod_struct)
-                  (output_value_for_condition (f inner_conditions))
-                  (find_and_strip_tail_info
-                    (r inner_conditions)
-                    cat_mod_struct
-                    tail_reveal_and_solution
-                  )
-                )
+  ;; This next section of code loops through all of the conditions to do three things:
+  ;;   1) Look for a "magic" value of -113 and, if one exists, filter it, and take note of the tail reveal and solution
+  ;;   2) Morph any CREATE_COIN or CREATE_COIN_ANNOUNCEMENT conditions
+  ;;   3) Sum the total output amount of all of the CREATE_COINs that are output by the inner puzzle
+  ;;
+  ;; After everything return a struct in the format (morphed_conditions . (output_sum . tail_reveal_and_solution))
+  ;; If multiple magic conditions are specified, the later one will take precedence
+
+  (defun-inline condition_tail_reveal (condition) (f (r (r (r condition)))))
+  (defun-inline condition_tail_solution (condition) (f (r (r (r (r condition))))))
+
+  (defun cons_onto_first_and_add_to_second (morphed_condition output_value struct)
+    (c (c morphed_condition (f struct)) (c (+ output_value (f (r struct))) (r (r struct))))
+  )
+
+  (defun find_and_strip_tail_info (inner_conditions cat_mod_struct tail_reveal_and_solution)
+    (if inner_conditions
+        (if (= (output_value_for_condition (f inner_conditions)) -113)  ; Checks this is a CREATE_COIN of value -113
+            (find_and_strip_tail_info
+              (r inner_conditions)
+              cat_mod_struct
+              (c (condition_tail_reveal (f inner_conditions)) (condition_tail_solution (f inner_conditions)))
+            )
+            (cons_onto_first_and_add_to_second
+              (morph_condition (f inner_conditions) cat_mod_struct)
+              (output_value_for_condition (f inner_conditions))
+              (find_and_strip_tail_info
+                (r inner_conditions)
+                cat_mod_struct
+                tail_reveal_and_solution
+              )
             )
-            (c () (c 0 tail_reveal_and_solution))
         )
-      )
+        (c () (c 0 tail_reveal_and_solution))
+    )
+  )
 
-     ;;;;;;;;;;;;;;;;;;;;;;;;;;; lineage checking
+  ;;;;;;;;;;;;;;;;;;;;;;;;;;; lineage checking
 
-     ;; return true iff parent of `this_coin_info` is provably a cat
-     ;; A 'lineage proof' consists of (parent_parent_id parent_INNER_puzzle_hash parent_amount)
-     ;; We use this information to construct a coin who's puzzle has been wrapped in this MOD and verify that,
-     ;; once wrapped, it matches our parent coin's ID.
-     (defun-inline is_parent_cat (
-       cat_mod_struct
-       parent_id
-       lineage_proof
-     )
-       (= parent_id
-          (calculate_coin_id (f lineage_proof)
-                  (cat_puzzle_hash cat_mod_struct (f (r lineage_proof)))
-                  (f (r (r lineage_proof)))
-          )
-       )
-     )
-
-    (defun check_lineage_or_run_tail_program
-      (
-        this_coin_info
-        tail_reveal_and_solution
-        parent_is_cat  ; flag which says whether or not the parent CAT check ran and passed
-        lineage_proof
-        Truths
-        extra_delta
-        inner_conditions
+  ;; return true iff parent of `this_coin_info` is provably a cat
+  ;; A 'lineage proof' consists of (parent_parent_id parent_INNER_puzzle_hash parent_amount)
+  ;; We use this information to construct a coin who's puzzle has been wrapped in this MOD and verify that,
+  ;; once wrapped, it matches our parent coin's ID.
+  (defun-inline is_parent_cat (
+      cat_mod_struct
+      parent_id
+      lineage_proof
+    )
+    (= parent_id
+      (calculate_coin_id (f lineage_proof)
+        (cat_puzzle_hash cat_mod_struct (f (r lineage_proof)))
+        (f (r (r lineage_proof)))
       )
-      (if tail_reveal_and_solution
-          (assert (= (sha256tree (f tail_reveal_and_solution)) (cat_tail_program_hash_truth Truths))
-            (merge_list
-              (a  (f tail_reveal_and_solution)
-                  (list
-                    Truths
-                    parent_is_cat
-                    lineage_proof ; Lineage proof is only guaranteed to be true if parent_is_cat
-                    extra_delta
-                    inner_conditions
-                    (r tail_reveal_and_solution)
-                  )
+    )
+  )
+
+  (defun check_lineage_or_run_tail_program
+    (
+      this_coin_info
+      tail_reveal_and_solution
+      parent_is_cat  ; flag which says whether or not the parent CAT check ran and passed
+      lineage_proof
+      Truths
+      extra_delta
+      inner_conditions
+    )
+    (if tail_reveal_and_solution
+        (assert (= (sha256tree (f tail_reveal_and_solution)) (cat_tail_program_hash_truth Truths))
+          (merge_list
+            (a  (f tail_reveal_and_solution)
+              (list
+                Truths
+                parent_is_cat
+                lineage_proof  ; Lineage proof is only guaranteed to be true if parent_is_cat
+                extra_delta
+                inner_conditions
+                (r tail_reveal_and_solution)
               )
-              inner_conditions
             )
-          )
-          (assert parent_is_cat (not extra_delta)
             inner_conditions
           )
-      )
-    )
-
-     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
-
-     (defun stager_two (
-         Truths
-         (inner_conditions . (output_sum . tail_reveal_and_solution))
-         lineage_proof
-         prev_coin_id
-         this_coin_info
-         next_coin_id
-         prev_subtotal
-         extra_delta
-      )
-      (check_lineage_or_run_tail_program
-            this_coin_info
-            tail_reveal_and_solution
-            (if lineage_proof (is_parent_cat (cat_struct_truth Truths) (my_parent_cat_truth Truths) lineage_proof) ())
-            lineage_proof
-            Truths
-            extra_delta
-            (generate_final_output_conditions
-              prev_subtotal
-              ; the expression on the next line calculates `this_subtotal` by adding the delta to `prev_subtotal`
-              (+ prev_subtotal (- (input_amount_for_coin this_coin_info) output_sum) extra_delta)
-              inner_conditions
-              prev_coin_id
-              (my_id_cat_truth Truths)
-              next_coin_id
-              (cat_struct_truth Truths)
-            )
+        )
+        (assert parent_is_cat (not extra_delta)
+          inner_conditions
         )
     )
+  )
 
-    ; CAT TRUTHS struct is: ; CAT Truths is: ((Inner puzzle hash . (MOD hash . (MOD hash hash . TAIL hash))) . (my_id . (my_parent_info my_puzhash my_amount)))
-    ; create truths - this_coin_info verified true because we calculated my ID from it!
-    ; lineage proof is verified later by cat parent check or tail_program
+  ;;;;;;;;;;;;;;;;;;;;;;;;;;;
 
-    (defun stager (
-        cat_mod_struct
+  (defun stager_two (
+      Truths
+      (inner_conditions . (output_sum . tail_reveal_and_solution))
+      lineage_proof
+      prev_coin_id
+      this_coin_info
+      next_coin_id
+      prev_subtotal
+      extra_delta
+    )
+    (check_lineage_or_run_tail_program
+      this_coin_info
+      tail_reveal_and_solution
+      (if lineage_proof (is_parent_cat (cat_struct_truth Truths) (my_parent_cat_truth Truths) lineage_proof) ())
+      lineage_proof
+      Truths
+      extra_delta
+      (generate_final_output_conditions
+        prev_subtotal
+        ; the expression on the next line calculates `this_subtotal` by adding the delta to `prev_subtotal`
+        (+ prev_subtotal (- (input_amount_for_coin this_coin_info) output_sum) extra_delta)
         inner_conditions
-        lineage_proof
-        inner_puzzle_hash
-        my_id
         prev_coin_id
-        this_coin_info
-        next_coin_proof
-        prev_subtotal
-        extra_delta
-     )
-      (c (list ASSERT_MY_COIN_ID my_id) (stager_two
+        (my_id_cat_truth Truths)
+        next_coin_id
+        (cat_struct_truth Truths)
+      )
+    )
+  )
+
+  ; CAT TRUTHS struct is: ; CAT Truths is: ((Inner puzzle hash . (MOD hash . (MOD hash hash . TAIL hash))) . (my_id . (my_parent_info my_puzhash my_amount)))
+  ; create truths - this_coin_info verified true because we calculated my ID from it!
+  ; lineage proof is verified later by cat parent check or tail_program
+
+  (defun stager (
+      cat_mod_struct
+      inner_conditions
+      lineage_proof
+      inner_puzzle_hash
+      my_id
+      prev_coin_id
+      this_coin_info
+      next_coin_proof
+      prev_subtotal
+      extra_delta
+    )
+    (c (list ASSERT_MY_COIN_ID my_id) (stager_two
         (cat_truth_data_to_truth_struct
           inner_puzzle_hash
           cat_mod_struct
           my_id
           this_coin_info
         )
         (find_and_strip_tail_info inner_conditions cat_mod_struct ())
         lineage_proof
         prev_coin_id
         this_coin_info
         (coin_id_for_proof next_coin_proof cat_mod_struct)
         prev_subtotal
         extra_delta
-      ))
-    )
+    ))
+  )
 
-    (stager
-        ;; calculate cat_mod_struct, inner_puzzle_hash, coin_id
-        (list MOD_HASH (sha256 ONE MOD_HASH) TAIL_PROGRAM_HASH)
-        (a INNER_PUZZLE inner_puzzle_solution)
-        lineage_proof
-        (sha256tree INNER_PUZZLE)
-        (calculate_coin_id (f this_coin_info) (f (r this_coin_info)) (f (r (r this_coin_info))))
-        prev_coin_id    ; ID
-        this_coin_info  ; (parent_id puzzle_hash amount)
-        next_coin_proof ; (parent_id innerpuzhash amount)
-        prev_subtotal
-        extra_delta
-    )
+  (stager
+    ;; calculate cat_mod_struct, inner_puzzle_hash, coin_id
+    (list MOD_HASH (sha256 ONE MOD_HASH) TAIL_PROGRAM_HASH)
+    (a INNER_PUZZLE inner_puzzle_solution)
+    lineage_proof
+    (sha256tree INNER_PUZZLE)
+    (calculate_coin_id (f this_coin_info) (f (r this_coin_info)) (f (r (r this_coin_info))))
+    prev_coin_id  ; ID
+    this_coin_info  ; (parent_id puzzle_hash amount)
+    next_coin_proof  ; (parent_id innerpuzhash amount)
+    prev_subtotal
+    extra_delta
+  )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/cat_v2.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/cat_v2.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080
+ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/chialisp_deserialisation.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/chialisp_deserialisation.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -14,52 +14,52 @@
   (defconstant MAX_FOUR_BYTE 0xef)
   (defconstant MAX_FIVE_BYTE 0xf7)
   (defconstant MAX_SIX_BYTE 0xfb)
   (defconstant CONS_BOX_MARKER 0xFF)
 
   (defun sexp_from_stream (input_stream)
     (if (= (substr input_stream 0 1) CONS_BOX_MARKER)
-      (cons_sexp_from_stream (sexp_from_stream (substr input_stream 1)))
-      (atom_from_stream (substr input_stream 1) (substr input_stream 0 1))
+        (cons_sexp_from_stream (sexp_from_stream (substr input_stream 1)))
+        (atom_from_stream (substr input_stream 1) (substr input_stream 0 1))
     )
   )
 
   (defun cons_sexp_from_stream (left_sexp_with_input)
     (cons_return (f left_sexp_with_input) (sexp_from_stream (f (r left_sexp_with_input))))
   )
 
   (defun cons_return (left_sexp right_sexp_with_input)
     (list (c left_sexp (f right_sexp_with_input)) (f (r right_sexp_with_input)))
   )
 
   (defun atom_from_stream (input_file input_bits)
     (if (= input_bits (quote 0x80))
-      (list () input_file)
-      (if (>s input_bits MAX_SINGLE_BYTE)
-        (atom_from_stream_part_two (get_bitcount input_bits input_file))
-        (list input_bits input_file)
-      )
+        (list () input_file)
+        (if (>s input_bits MAX_SINGLE_BYTE)
+            (atom_from_stream_part_two (get_bitcount input_bits input_file))
+            (list input_bits input_file)
+        )
     )
   )
 
   ; Note that we reject any serialized atom here with more than 3 bytes of
   ; encoded length prefix, even though the Rust and Python CLVM interpreters
   ; and deserializers support more.
   ; This allows 5 + 8 = 13 bits = 8191-byte atoms
   ; Also note that this does not limit intermediate atom length. Those limits
   ; are implemented in the clvm interpreters theselves
   (defun-inline get_bitcount (input_bits input_file)
     (if (>s input_bits MAX_TWO_BYTE)
-      (if (>s input_bits MAX_THREE_BYTE)
-              (x)
-        ;three byte length prefix
-        (list (concat (logand (quote 0x1f) input_bits) (substr input_file 0 1)) (substr input_file 1))
-      )
-      ;two byte length prefix
-      (list (logand (quote 0x3f) input_bits) input_file)
+        (if (>s input_bits MAX_THREE_BYTE)
+            (x)
+            ;three byte length prefix
+            (list (concat (logand (quote 0x1f) input_bits) (substr input_file 0 1)) (substr input_file 1))
+        )
+        ;two byte length prefix
+        (list (logand (quote 0x3f) input_bits) input_file)
     )
   )
 
   (defun atom_from_stream_part_two ((size_to_read input_file))
     (list (substr input_file 0 size_to_read) (substr input_file size_to_read))
   )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/chialisp_deserialisation.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/chialisp_deserialisation.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff05ffff02ff3effff04ff02ffff04ff05ff8080808080ffff04ffff01ffffff81ff7fff81df81bfffffff02ffff03ffff09ff0bffff01818080ffff01ff04ff80ffff04ff05ff808080ffff01ff02ffff03ffff0aff0bff1880ffff01ff02ff1affff04ff02ffff04ffff02ffff03ffff0aff0bff1c80ffff01ff02ffff03ffff0aff0bff1480ffff01ff0880ffff01ff04ffff0effff18ffff011fff0b80ffff0cff05ff80ffff01018080ffff04ffff0cff05ffff010180ff80808080ff0180ffff01ff04ffff18ffff013fff0b80ffff04ff05ff80808080ff0180ff80808080ffff01ff04ff0bffff04ff05ff80808080ff018080ff0180ff04ffff0cff15ff80ff0980ffff04ffff0cff15ff0980ff808080ffff04ffff04ff05ff1380ffff04ff2bff808080ffff02ff16ffff04ff02ffff04ff09ffff04ffff02ff3effff04ff02ffff04ff15ff80808080ff8080808080ff02ffff03ffff09ffff0cff05ff80ffff010180ff1080ffff01ff02ff2effff04ff02ffff04ffff02ff3effff04ff02ffff04ffff0cff05ffff010180ff80808080ff80808080ffff01ff02ff12ffff04ff02ffff04ffff0cff05ffff010180ffff04ffff0cff05ff80ffff010180ff808080808080ff0180ff018080
+ff02ffff01ff05ffff02ff3effff04ff02ffff04ff05ff8080808080ffff04ffff01ffffff81ff7fff81df81bfffffff02ffff03ffff09ff0bffff01818080ffff01ff04ff80ffff04ff05ff808080ffff01ff02ffff03ffff0aff0bff1880ffff01ff02ff1affff04ff02ffff04ffff02ffff03ffff0aff0bff1c80ffff01ff02ffff03ffff0aff0bff1480ffff01ff0880ffff01ff04ffff0effff18ffff011fff0b80ffff0cff05ff80ffff01018080ffff04ffff0cff05ffff010180ff80808080ff0180ffff01ff04ffff18ffff013fff0b80ffff04ff05ff80808080ff0180ff80808080ffff01ff04ff0bffff04ff05ff80808080ff018080ff0180ff04ffff0cff15ff80ff0980ffff04ffff0cff15ff0980ff808080ffff04ffff04ff05ff1380ffff04ff2bff808080ffff02ff16ffff04ff02ffff04ff09ffff04ffff02ff3effff04ff02ffff04ff15ff80808080ff8080808080ff02ffff03ffff09ffff0cff05ff80ffff010180ff1080ffff01ff02ff2effff04ff02ffff04ffff02ff3effff04ff02ffff04ffff0cff05ffff010180ff80808080ff80808080ffff01ff02ff12ffff04ff02ffff04ffff0cff05ffff010180ffff04ffff0cff05ff80ffff010180ff808080808080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/condition_codes.clib` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/condition_codes.clib`

 * *Files 14% similar despite different names*

```diff
@@ -1,59 +1,59 @@
 ; See chia/types/condition_opcodes.py
 
 (
-    (defconstant AGG_SIG_UNSAFE 49)
-    (defconstant AGG_SIG_ME 50)
+  (defconstant AGG_SIG_UNSAFE 49)
+  (defconstant AGG_SIG_ME 50)
 
-    ; the conditions below reserve coin amounts and have to be accounted for in output totals
+  ; the conditions below reserve coin amounts and have to be accounted for in output totals
 
-    (defconstant CREATE_COIN 51)
-    (defconstant RESERVE_FEE 52)
+  (defconstant CREATE_COIN 51)
+  (defconstant RESERVE_FEE 52)
 
-    ; the conditions below deal with announcements, for inter-coin communication
+  ; the conditions below deal with announcements, for inter-coin communication
 
-    ; coin announcements
-    (defconstant CREATE_COIN_ANNOUNCEMENT 60)
-    (defconstant ASSERT_COIN_ANNOUNCEMENT 61)
+  ; coin announcements
+  (defconstant CREATE_COIN_ANNOUNCEMENT 60)
+  (defconstant ASSERT_COIN_ANNOUNCEMENT 61)
 
-    ; puzzle announcements
-    (defconstant CREATE_PUZZLE_ANNOUNCEMENT 62)
-    (defconstant ASSERT_PUZZLE_ANNOUNCEMENT 63)
+  ; puzzle announcements
+  (defconstant CREATE_PUZZLE_ANNOUNCEMENT 62)
+  (defconstant ASSERT_PUZZLE_ANNOUNCEMENT 63)
 
-    ; coin-id
-    (defconstant ASSERT_CONCURRENT_SPEND 64)
-    ; puzzle-hash
-    (defconstant ASSERT_CONCURRENT_PUZZLE 65)
+  ; coin-id
+  (defconstant ASSERT_CONCURRENT_SPEND 64)
+  ; puzzle-hash
+  (defconstant ASSERT_CONCURRENT_PUZZLE 65)
 
-    ; the conditions below let coins inquire about themselves
+  ; the conditions below let coins inquire about themselves
 
-    (defconstant ASSERT_MY_COIN_ID 70)
-    (defconstant ASSERT_MY_PARENT_ID 71)
-    (defconstant ASSERT_MY_PUZZLEHASH 72)
-    (defconstant ASSERT_MY_AMOUNT 73)
-    (defconstant ASSERT_MY_BIRTH_SECONDS 74)
-    (defconstant ASSERT_MY_BIRTH_HEIGHT 75)
-    (defconstant ASSERT_EPHEMERAL 76)
+  (defconstant ASSERT_MY_COIN_ID 70)
+  (defconstant ASSERT_MY_PARENT_ID 71)
+  (defconstant ASSERT_MY_PUZZLEHASH 72)
+  (defconstant ASSERT_MY_AMOUNT 73)
+  (defconstant ASSERT_MY_BIRTH_SECONDS 74)
+  (defconstant ASSERT_MY_BIRTH_HEIGHT 75)
+  (defconstant ASSERT_EPHEMERAL 76)
 
-    ; the conditions below ensure that we're "far enough" in the future
+  ; the conditions below ensure that we're "far enough" in the future
 
-    ; wall-clock time
-    (defconstant ASSERT_SECONDS_RELATIVE 80)
-    (defconstant ASSERT_SECONDS_ABSOLUTE 81)
+  ; wall-clock time
+  (defconstant ASSERT_SECONDS_RELATIVE 80)
+  (defconstant ASSERT_SECONDS_ABSOLUTE 81)
 
-    ; block index
-    (defconstant ASSERT_HEIGHT_RELATIVE 82)
-    (defconstant ASSERT_HEIGHT_ABSOLUTE 83)
+  ; block index
+  (defconstant ASSERT_HEIGHT_RELATIVE 82)
+  (defconstant ASSERT_HEIGHT_ABSOLUTE 83)
 
-    ; the conditions below ensure that we're "not too far" in the future
+  ; the conditions below ensure that we're "not too far" in the future
 
-    ; wall-clock time
-    (defconstant ASSERT_BEFORE_SECONDS_RELATIVE 84)
-    (defconstant ASSERT_BEFORE_SECONDS_ABSOLUTE 85)
+  ; wall-clock time
+  (defconstant ASSERT_BEFORE_SECONDS_RELATIVE 84)
+  (defconstant ASSERT_BEFORE_SECONDS_ABSOLUTE 85)
 
-    ; block index
-    (defconstant ASSERT_BEFORE_HEIGHT_RELATIVE 86)
-    (defconstant ASSERT_BEFORE_HEIGHT_ABSOLUTE 87)
+  ; block index
+  (defconstant ASSERT_BEFORE_HEIGHT_RELATIVE 86)
+  (defconstant ASSERT_BEFORE_HEIGHT_ABSOLUTE 87)
 
-    ; A condition that is always true and always ignore all arguments
-    (defconstant REMARK 1)
+  ; A condition that is always true and always ignore all arguments
+  (defconstant REMARK 1)
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/curry-and-treehash.clib` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/curry-and-treehash.clib`

 * *Files 1% similar despite different names*

```diff
@@ -19,43 +19,43 @@
   ;; return the tree hash of the tree corresponding to
   ;; `(c (q . P) E)`
   ;; This is the new environment tree with the addition parameter P curried in.
   ;;
   ;; Note that `(c (q . P) E)` = `(c . ((q . P) . (E . 0)))`
 
   (defun-inline update-hash-for-parameter-hash (parameter-hash environment-hash)
-     (sha256 TWO (sha256 ONE C_KW)
-                 (sha256 TWO (sha256 TWO (sha256 ONE Q_KW) parameter-hash)
-                             (sha256 TWO environment-hash (sha256 ONE 0))))
+    (sha256 TWO (sha256 ONE C_KW)
+      (sha256 TWO (sha256 TWO (sha256 ONE Q_KW) parameter-hash)
+    (sha256 TWO environment-hash (sha256 ONE 0))))
   )
 
   ;; This function recursively calls `update-hash-for-parameter-hash`, updating `environment-hash`
   ;; along the way.
 
   (defun build-curry-list (reversed-curry-parameter-hashes environment-hash)
-     (if reversed-curry-parameter-hashes
-         (build-curry-list (r reversed-curry-parameter-hashes)
-                           (update-hash-for-parameter-hash (f reversed-curry-parameter-hashes) environment-hash))
-         environment-hash
-     )
+    (if reversed-curry-parameter-hashes
+        (build-curry-list (r reversed-curry-parameter-hashes)
+        (update-hash-for-parameter-hash (f reversed-curry-parameter-hashes) environment-hash))
+        environment-hash
+    )
   )
 
   ;; Given the tree hash `environment-hash` of an environment tree E
   ;; and the tree hash `function-hash` of a function tree F
   ;; return the tree hash of the tree corresponding to
   ;; `(a (q . F) E)`
   ;; This is the hash of a new function that adopts the new environment E.
   ;; This is used to build of the tree hash of a curried function.
   ;;
   ;; Note that `(a (q . F) E)` = `(a . ((q . F)  . (E . 0)))`
 
   (defun-inline tree-hash-of-apply (function-hash environment-hash)
-     (sha256 TWO (sha256 ONE A_KW)
-                 (sha256 TWO (sha256 TWO (sha256 ONE Q_KW) function-hash)
-                             (sha256 TWO environment-hash (sha256 ONE 0))))
+    (sha256 TWO (sha256 ONE A_KW)
+      (sha256 TWO (sha256 TWO (sha256 ONE Q_KW) function-hash)
+    (sha256 TWO environment-hash (sha256 ONE 0))))
   )
 
   ;; DO NOT USE THIS FUNCTION GOING FORWARD. Having to pass the arguments in reverse order is stupid.
   ;; When I (RK) wrote this, I thought it was necessary, but of course, I was just being dumb
   ;; and it is not necessary. It's very confusing.
   ;;
   ;; function-hash:
@@ -72,31 +72,31 @@
   ;;
   ;; Note that from a user's perspective the hashes passed in here aren't simply
   ;; the hashes of the desired parameters, but their treehash representation since
   ;; that's the form we're assuming they take in the actual curried program.
 
   ;; DO NOT USE
   (defun puzzle-hash-of-curried-function (function-hash . reversed-curry-parameter-hashes)
-     (tree-hash-of-apply function-hash
-                         (build-curry-list reversed-curry-parameter-hashes (sha256 ONE ONE)))
+    (tree-hash-of-apply function-hash
+    (build-curry-list reversed-curry-parameter-hashes (sha256 ONE ONE)))
   )
 
   (defconstant b32 32)
 
   (defun-inline size_b32 (var)
     (= (strlen var) b32)
   )
 
   (defun calculate_coin_id (parent puzzlehash amount)
     (if (all (size_b32 parent) (size_b32 puzzlehash) (> amount -1))
-      (sha256 parent puzzlehash amount)
-      (x)
+        (sha256 parent puzzlehash amount)
+        (x)
     )
   )
 
   ; takes a lisp tree and returns the hash of it
   (defun sha256tree (TREE)
-        (if (l TREE)
-            (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-            (sha256 1 TREE)))
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+  (sha256 1 TREE)))
 
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/curry.clib` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/curry.clib`

 * *Files 0% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 (
   ;; The code below is used to calculate of the tree hash of a curried function
   ;; without actually doing the curry, and using other optimization tricks
   ;; like unrolling `sha256tree`.
 
   (defconstant TWO 2)
   (defconstant constant_tree (
-     (0x4bf5122f344554c53bde2ebb8cd2b7e3d1600ad631c385a5d7cce23c7785459a .   ;  = `(sha256 1)`
+      (0x4bf5122f344554c53bde2ebb8cd2b7e3d1600ad631c385a5d7cce23c7785459a .  ;  = `(sha256 1)`
       0x9dcf97a184f32623d11a73124ceb99a5709b083721e878a16d78f596718ba7b2) .  ;  = `(sha256 1 1)` = `(sha256 1 #q)`
-     (0x02a12871fee210fb8619291eaea194581cbd2531e4b23759d225f6806923f63222 . ;  = `(concat 2 (sha256 1 #a))`
+      (0x02a12871fee210fb8619291eaea194581cbd2531e4b23759d225f6806923f63222 .  ;  = `(concat 2 (sha256 1 #a))`
       0x02a8d5dd63fba471ebcb1f3e8f7c1e1879b7152a6e7298a91ce119a63400ade7c5)  ;  = `(concat 2 (sha256 1 #c))`
     )
   )
 
   ; I looked into calculating the values of `constant_tree` because it's pretty easy to code-golf
   ; out an implementation that produces the values cheaper than just inlining them. The problem is,
   ; when do we calculate them? If there were a way to calculate it "before main" and include it in
@@ -24,50 +24,50 @@
   (defun-inline sha256_one _noargs (f (f constant_tree)))
   (defun-inline sha256_one_one _noargs (r (f constant_tree)))
   (defun-inline two_sha256_one_a_kw _noargs (f (r constant_tree)))
   (defun-inline two_sha256_one_c_kw _noargs (r (r constant_tree)))
 
   ;; this returns the sha256 tree hash of expression F = `((q . a1) a2)`
   (defun hash_expression_F (a1 a2)
-         (sha256 TWO (sha256 TWO (sha256_one_one) a1)
-                 (sha256 TWO a2 (sha256_one)))
+    (sha256 TWO (sha256 TWO (sha256_one_one) a1)
+    (sha256 TWO a2 (sha256_one)))
   )
 
   ;; Given the tree hash `environment_hash` of an environment tree E
   ;; and the tree hash `parameter_hash` of a constant parameter P
   ;; return the tree hash of the tree corresponding to
   ;; `(c (q . P) E)`
   ;; This is the new environment tree with the addition parameter P curried in.
   ;;
   ;; Note that `(c (q . P) E)` = `(c . ((q . P) . (E . 0)))`
 
   (defun-inline update_hash_for_parameter_hash (parameter_hash environment_hash)
-     (sha256 (two_sha256_one_c_kw) (hash_expression_F parameter_hash environment_hash))
+    (sha256 (two_sha256_one_c_kw) (hash_expression_F parameter_hash environment_hash))
   )
 
   ;; Given the tree hash `environment_hash` of an environment tree E
   ;; and the tree hash `mod_hash` of a mod M
   ;; return the tree hash of the tree corresponding to
   ;; `(a (q . M) E)`
   ;; This is the hash of a new function that adopts the new environment E.
   ;; This is used to build of the tree hash of a curried function.
   ;;
   ;; Note that `(a (q . M) E)` = `(a . ((q . M)  . (E . 0)))`
 
   (defun-inline tree_hash_of_apply (mod_hash environment_hash)
-     (sha256 (two_sha256_one_a_kw) (hash_expression_F mod_hash environment_hash))
+    (sha256 (two_sha256_one_a_kw) (hash_expression_F mod_hash environment_hash))
   )
 
   ;; This function recursively calls `update_hash_for_parameter_hash`
 
   (defun calculate_hash_of_curried_parameters (curry_parameter_hashes)
-     (if curry_parameter_hashes
-      (update_hash_for_parameter_hash (f curry_parameter_hashes) (calculate_hash_of_curried_parameters (r curry_parameter_hashes)))
-      (sha256_one_one)
-     )
+    (if curry_parameter_hashes
+        (update_hash_for_parameter_hash (f curry_parameter_hashes) (calculate_hash_of_curried_parameters (r curry_parameter_hashes)))
+        (sha256_one_one)
+    )
   )
 
   ;; mod_hash:
   ;;   the hash of a puzzle function, ie. a `mod`
   ;;
   ;; curry_parameter_hashes:
   ;;   a list of pre_hashed trees representing parameters to be curried into the puzzle.
@@ -78,16 +78,16 @@
   ;; Note that from a user's perspective the hashes passed in here aren't simply
   ;; the hashes of the desired parameters, but their treehash representation since
   ;; that's the form we're assuming they take in the acutal curried program.
 
   ;; inline functions that take varargs don't seem to work, so we can't inline `curry`
 
   (defun curry_hashes (mod_hash . curry_parameter_hashes)
-     (tree_hash_of_apply mod_hash
-                         (calculate_hash_of_curried_parameters curry_parameter_hashes))
+    (tree_hash_of_apply mod_hash
+    (calculate_hash_of_curried_parameters curry_parameter_hashes))
   )
 
 
   ;; This is the macro version that inlines everything and expects varargs parameters.
   ;; It may be more efficient in some cases.
 
   (defmacro curry_hashes_inline (mod_hash . curry_parameter_hashes)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/delegated_tail.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/delegated_tail.clsp`

 * *Files 22% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 ; This is a "limitations_program" for use with cat.clsp.
 (mod (
-      PUBKEY
-      Truths
-      parent_is_cat
-      lineage_proof
-      delta
-      inner_conditions
-      (
-        delegated_puzzle
-        delegated_solution
-      )
+    PUBKEY
+    Truths
+    parent_is_cat
+    lineage_proof
+    delta
+    inner_conditions
+    (
+      delegated_puzzle
+      delegated_solution
     )
+  )
 
-    (include condition_codes.clib)
+  (include condition_codes.clib)
 
-    (defun sha256tree1 (TREE)
-          (if (l TREE)
-              (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
-              (sha256 1 TREE)))
+  (defun sha256tree1 (TREE)
+    (if (l TREE)
+        (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
+  (sha256 1 TREE)))
 
-    (c (list AGG_SIG_UNSAFE PUBKEY (sha256tree1 delegated_puzzle))
-      (a delegated_puzzle (c Truths (c parent_is_cat (c lineage_proof (c delta (c inner_conditions delegated_solution))))))
-    )
+  (c (list AGG_SIG_UNSAFE PUBKEY (sha256tree1 delegated_puzzle))
+    (a delegated_puzzle (c Truths (c parent_is_cat (c lineage_proof (c delta (c inner_conditions delegated_solution))))))
+  )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/deployed_puzzle_hashes.json` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/deployed_puzzle_hashes.json`

 * *Files 20% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.7636363636363637%*

 * *Differences: {"'augmented_condition'": "'d303eafa617bedf0bc05850dd014e10fbddf622187dc07891a2aacba9d8a93f6'",*

 * * "'covenant_layer'": "'b982796850336aabf9ab17c3f21e299f0c633444117ab5e9ebeafadf1860d9fc'",*

 * * "'credential_restriction'": "'2fdfc1f058cfd65e7ec4e253bfeb394da163ecd0036f508df8629b0a2b8fde96'",*

 * * "'eml_covenant_morpher'": "'6a87946257f555ae82aca6a11b5205058b844f634ecb6c7dc6b0c54eb2996308'",*

 * * "'eml_transfer_program_covenant_adapter'": "'4218fbebbb6f3c0907ebe8a672fa5d1e4bc655645a3a0073601e6c9b50b07c47'",*

 * * "'eml_update_m []*

```diff
@@ -1,29 +1,39 @@
 {
+    "augmented_condition": "d303eafa617bedf0bc05850dd014e10fbddf622187dc07891a2aacba9d8a93f6",
     "block_program_zero": "f0a38c8efe58895ae527c65c37f700a4238504691b83990e5dd91bd8b3c30eae",
     "calculate_synthetic_public_key": "624c5d5704d0decadfc0503e71bbffb6cdfe45025bce7cf3e6864d1eafe8f65e",
     "cat_v2": "37bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7a",
     "chialisp_deserialisation": "94ec19077f9a34e0b11ad2456af0170f4cc03f11230ca42e3f82e6e644ac4f5d",
+    "covenant_layer": "b982796850336aabf9ab17c3f21e299f0c633444117ab5e9ebeafadf1860d9fc",
     "create_nft_launcher_from_did": "7a32d2d9571d3436791c0ad3d7fcfdb9c43ace2b0f0ff13f98d29f0cc093f445",
+    "credential_restriction": "2fdfc1f058cfd65e7ec4e253bfeb394da163ecd0036f508df8629b0a2b8fde96",
     "decompress_coin_spend_entry": "9d98ed08770d31be4bd1bde4705dab388db5e7e9c349f5a76fc3c347aa3a0b79",
     "decompress_coin_spend_entry_with_prefix": "92aa4bc8060a8836355a1884075141b4791ce1b67ae6092bb166b2845954bc89",
     "decompress_puzzle": "fe94c58f1117afe315e0450daca1c62460ec1a1c439cd4018d79967a5d7d1370",
     "delegated_tail": "999c3696e167f8a79d938adc11feba3a3dcb39ccff69a426d570706e7b8ec399",
     "did_innerpuz": "33143d2bef64f14036742673afd158126b94284b4530a28c354fac202b0c910e",
+    "eml_covenant_morpher": "6a87946257f555ae82aca6a11b5205058b844f634ecb6c7dc6b0c54eb2996308",
+    "eml_transfer_program_covenant_adapter": "4218fbebbb6f3c0907ebe8a672fa5d1e4bc655645a3a0073601e6c9b50b07c47",
+    "eml_update_metadata_with_DID": "d3a9a1fc20f247d009b4b0e941707d50b91885c99d0b27ef882e1294e771139d",
     "everything_with_signature": "1720d13250a7c16988eaf530331cefa9dd57a76b2c82236bec8bbbff91499b89",
+    "exigent_metadata_layer": "d5fd32e069fda83e230ccd8f6a7c4f652231aed5c755514b3d996cbeff4182b8",
+    "flag_proofs_checker": "fe2e3c631562fbb9be095297f762bf573705a0197164e9361ad5d50e045ba241",
     "genesis_by_coin_id": "493afb89eed93ab86741b2aa61b8f5de495d33ff9b781dfc8919e602b2afa150",
     "genesis_by_puzzle_hash": "de5a6e06d41518be97ff6365694f4f89475dda773dede267caa33da63b434e36",
     "graftroot_dl_offers": "0893e36a88c064fddfa6f8abdb42c044584a98cb4273b80cccc83b4867b701a1",
     "nft_intermediate_launcher": "7a32d2d9571d3436791c0ad3d7fcfdb9c43ace2b0f0ff13f98d29f0cc093f445",
     "nft_metadata_updater_default": "fe8a4b4e27a2e29a4d3fc7ce9d527adbcaccbab6ada3903ccf3ba9a769d2d78b",
     "nft_metadata_updater_updateable": "0b1ffba1601777c06b78ab38636e9624f2f8da73be9b36e0ce17c8d8ef3bad9f",
     "nft_ownership_layer": "c5abea79afaa001b5427dfa0c8cf42ca6f38f5841b78f9b3c252733eb2de2726",
     "nft_ownership_transfer_program_one_way_claim_with_royalties": "025dee0fb1e9fa110302a7e9bfb6e381ca09618e2778b0184fa5c6b275cfce1f",
     "nft_state_layer": "a04d9f57764f54a43e4030befb4d80026e870519aaa66334aef8304f5d0393c2",
     "notification": "b8b9d8ffca6d5cba5422ead7f477ecfc8f6aaaa1c024b8c3aeb1956b24a0ab1e",
+    "p2_1_of_n": "46b29fd87fbeb6737600c4543931222a6c1ed3db6fa5601a3ca284a9f4efe780",
+    "p2_announced_delegated_puzzle": "c4d24c3c5349376f3e8f3aba202972091713b4ec4915f0f26192ae4ace0bd04d",
     "p2_conditions": "1c77d7d5efde60a7a1d2d27db6d746bc8e568aea1ef8586ca967a0d60b83cc36",
     "p2_delegated_conditions": "0ff94726f1a8dea5c3f70d3121945190778d3b2b3fcda3735a1f290977e98341",
     "p2_delegated_puzzle": "542cde70d1102cd1b763220990873efc8ab15625ded7eae22cc11e21ef2e2f7c",
     "p2_delegated_puzzle_or_hidden_puzzle": "e9aaa49f45bad5c889b86ee3341550c155cfdd10c3a6757de618d20612fffd52",
     "p2_m_of_n_delegate_direct": "0f199d5263ac1a62b077c159404a71abd3f9691cc57520bf1d4c5cb501504457",
     "p2_parent": "b10ce2d0b18dcf8c21ddfaf55d9b9f0adcbf1e0beb55b1a8b9cad9bbff4e5f22",
     "p2_puzzle_hash": "13e29a62b42cd2ef72a79e4bacdc59733ca6310d65af83d349360d36ec622363",
@@ -35,10 +45,13 @@
     "rom_bootstrap_generator2": "fae4b90d1f0a18bf9b7e5771da787dcc288e4ab5113d526841f54d32a5777db9",
     "settlement_payments": "cfbfdeed5c4ca2de3d0bf520b9cb4bb7743a359bd2e6a188d19ce7dffc21d3e7",
     "settlement_payments_old": "bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79",
     "sha256tree_module": "eb4ead6576048c9d730b5ced00646c7fdd390649cfdf48a00de1590cdd8ee18f",
     "singleton_launcher": "eff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9",
     "singleton_top_layer": "24e044101e57b3d8c908b8a38ad57848afd29d3eecc439dba45f4412df4954fd",
     "singleton_top_layer_v1_1": "7faa3253bfddd1e0decb0906b2dc6247bbc4cf608f58345d173adb63e8b47c9f",
+    "standard_vc_backdoor_puzzle": "fbce76408ebaf9b3d0b8cd90cc68607755eeca67cd7432d5eea85f3f498cc002",
+    "std_parent_morpher": "8c3f1dc2e46c0d7ec4c2cbd007e23c0368ff8f80c5bc0101647a5c27626ebce6",
     "test_generator_deserialize": "52add794fc76e89512e4a063c383418bda084c8a78c74055abe80179e4a7832c",
-    "test_multiple_generator_input_arguments": "156dafbddc3e1d3bfe1f2a84e48e5e46b287b8358bf65c3c091c93e855fbfc5b"
+    "test_multiple_generator_input_arguments": "156dafbddc3e1d3bfe1f2a84e48e5e46b287b8358bf65c3c091c93e855fbfc5b",
+    "viral_backdoor": "00848115554ea674131f89f311707a959ad3f4647482648f3fe91ba289131f51"
 }
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/did_innerpuz.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/did_innerpuz.clsp`

 * *Files 1% similar despite different names*

```diff
@@ -1,42 +1,42 @@
 ; The DID innerpuzzle is designed to sit inside the singleton layer and provide functionality related to being an identity.
 ; At the moment the two pieces of functionality are recovery and message creation.
 ; A DID's ID is it's Singleton ID
 ; Recovery is based around having a list of known other DIDs which can send messages approving you change the innerpuzzle of your DID singleton
 
 (mod
   (
-  INNER_PUZZLE  ; Standard P2 inner puzzle, used to record the ownership of the DID.
-  RECOVERY_DID_LIST_HASH  ; the list of DIDs that can send messages to you for recovery we store only the hash so that we don't have to reveal every time we make a message spend
-  NUM_VERIFICATIONS_REQUIRED  ; how many of the above list are required for a recovery
-  SINGLETON_STRUCT  ; my singleton_struct, formerly a Truth - ((SINGLETON_MOD_HASH, (LAUNCHER_ID, LAUNCHER_PUZZLE_HASH)))
-  METADATA ; Customized metadata, e.g KYC info
-  mode  ; this indicates which spend mode we want. 0. Recovery mode 1. Run INNER_PUZZLE with p2_solution
-  my_amount_or_inner_solution  ; In mode 0, we use this to recover our coin and assert it is our actual amount
-                             ; In mode 1 this is the solution of the inner P2 puzzle, only required in the create message mode and transfer mode.
-  new_inner_puzhash  ; In recovery mode, this will be the new wallet DID puzzle hash
-  parent_innerpuzhash_amounts_for_recovery_ids  ; during a recovery we need extra information about our recovery list coins
-  pubkey  ; this is the new pubkey used for a recovery
-  recovery_list_reveal  ; this is the reveal of the stored list of DIDs approved for recovery
-  my_id  ; my coin ID
+    INNER_PUZZLE  ; Standard P2 inner puzzle, used to record the ownership of the DID.
+    RECOVERY_DID_LIST_HASH  ; the list of DIDs that can send messages to you for recovery we store only the hash so that we don't have to reveal every time we make a message spend
+    NUM_VERIFICATIONS_REQUIRED  ; how many of the above list are required for a recovery
+    SINGLETON_STRUCT  ; my singleton_struct, formerly a Truth - ((SINGLETON_MOD_HASH, (LAUNCHER_ID, LAUNCHER_PUZZLE_HASH)))
+    METADATA  ; Customized metadata, e.g KYC info
+    mode  ; this indicates which spend mode we want. 0. Recovery mode 1. Run INNER_PUZZLE with p2_solution
+    my_amount_or_inner_solution  ; In mode 0, we use this to recover our coin and assert it is our actual amount
+    ; In mode 1 this is the solution of the inner P2 puzzle, only required in the create message mode and transfer mode.
+    new_inner_puzhash  ; In recovery mode, this will be the new wallet DID puzzle hash
+    parent_innerpuzhash_amounts_for_recovery_ids  ; during a recovery we need extra information about our recovery list coins
+    pubkey  ; this is the new pubkey used for a recovery
+    recovery_list_reveal  ; this is the reveal of the stored list of DIDs approved for recovery
+    my_id  ; my coin ID
   )
   ;message is the new puzzle in the recovery and standard spend cases
 
   ;MOD_HASH, MY_PUBKEY, RECOVERY_DID_LIST_HASH are curried into the puzzle
   ;EXAMPLE SOLUTION (0xcafef00d 0x12341234 0x923bf9a7856b19d335a65f12d68957d497e1f0c16c0e14baf6d120e60753a1ce 2 1 100 (q "source code") 0xdeadbeef 0xcafef00d ((0xdadadada 0xdad5dad5 200) () (0xfafafafa 0xfaf5faf5 200)) 0xfadeddab (0x22222222 0x33333333 0x44444444))
 
   (include condition_codes.clib)
   (include curry-and-treehash.clib)
 
   ; takes a lisp tree and returns the hash of it
   (defun sha256tree1 (TREE)
-      (if (l TREE)
-          (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
-          (sha256 1 TREE)
-      )
+    (if (l TREE)
+        (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
+        (sha256 1 TREE)
+    )
   )
 
   ; recovery message module - gets values curried in to make the puzzle
   (defun make_message_puzzle (recovering_coin newpuz pubkey)
     (qq (q . (((unquote CREATE_COIN_ANNOUNCEMENT) (unquote recovering_coin)) ((unquote AGG_SIG_UNSAFE) (unquote pubkey) (unquote newpuz)))))
   )
 
@@ -50,86 +50,86 @@
     (sha256 parent (calculate_full_puzzle_hash (c (f SINGLETON_STRUCT) (c launcher_id (r (r SINGLETON_STRUCT)))) innerpuzhash) amount)
   )
 
 
   ; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline calculate_full_puzzle_hash (SINGLETON_STRUCT inner_puzzle_hash)
-     (puzzle-hash-of-curried-function (f SINGLETON_STRUCT)
-                                      inner_puzzle_hash
-                                      (sha256tree1 SINGLETON_STRUCT)
-     )
+    (puzzle-hash-of-curried-function (f SINGLETON_STRUCT)
+      inner_puzzle_hash
+      (sha256tree1 SINGLETON_STRUCT)
+    )
   )
 
   ; this loops over our identities to check list, and checks if we have been given parent information for this identity
   ; the reason for this is because we might only require 3/5 of the IDs give approval messages for a recovery
   ; if we have the information for an identity then we create a consume message using that information
 
   (defun check_messages_from_identities (SINGLETON_STRUCT num_verifications_required identities my_id  new_puz parent_innerpuzhash_amounts_for_recovery_ids pubkey num_verifications)
     (if identities
-      (if (f parent_innerpuzhash_amounts_for_recovery_ids)
-        ; if we have parent information then we should create a consume coin condition
-        (c
-          (create_consume_message
-            ; create coin_id from DID
-            (create_coin_ID_for_recovery
+        (if (f parent_innerpuzhash_amounts_for_recovery_ids)
+            ; if we have parent information then we should create a consume coin condition
+            (c
+              (create_consume_message
+                ; create coin_id from DID
+                (create_coin_ID_for_recovery
+                  SINGLETON_STRUCT
+                  (f identities)
+                  (f (f parent_innerpuzhash_amounts_for_recovery_ids))
+                  (f (r (f parent_innerpuzhash_amounts_for_recovery_ids)))
+                (f (r (r (f parent_innerpuzhash_amounts_for_recovery_ids)))))
+                my_id
+                new_puz
+                pubkey
+              )
+              (check_messages_from_identities
+                SINGLETON_STRUCT
+                num_verifications_required
+                (r identities)
+                my_id
+                new_puz
+                (r parent_innerpuzhash_amounts_for_recovery_ids)
+                pubkey
+                (+ num_verifications 1)
+              )
+            )
+            ; if no parent information found for this identity, move on to next in list
+            (check_messages_from_identities
               SINGLETON_STRUCT
-              (f identities)
-              (f (f parent_innerpuzhash_amounts_for_recovery_ids))
-              (f (r (f parent_innerpuzhash_amounts_for_recovery_ids)))
-              (f (r (r (f parent_innerpuzhash_amounts_for_recovery_ids)))))
-            my_id
-            new_puz
-            pubkey
-          )
-          (check_messages_from_identities
-            SINGLETON_STRUCT
-            num_verifications_required
-            (r identities)
-            my_id
-            new_puz
-            (r parent_innerpuzhash_amounts_for_recovery_ids)
-            pubkey
-            (+ num_verifications 1)
-          )
+              (r identities)
+              my_id
+              new_puz
+              (r parent_innerpuzhash_amounts_for_recovery_ids)
+              pubkey
+              num_verifications
+            )
         )
-        ; if no parent information found for this identity, move on to next in list
-        (check_messages_from_identities
-          SINGLETON_STRUCT
-          (r identities)
-          my_id
-          new_puz
-          (r parent_innerpuzhash_amounts_for_recovery_ids)
-          pubkey
-          num_verifications
+        ;if we're out of identites to check for, check we have enough
+        (if (> num_verifications (- num_verifications_required 1))
+            (list (list AGG_SIG_UNSAFE pubkey new_puz) )
+            (x)
         )
-      )
-      ;if we're out of identites to check for, check we have enough
-      (if (> num_verifications (- num_verifications_required 1))
-        (list (list AGG_SIG_UNSAFE pubkey new_puz) )
-        (x)
-      )
     )
   )
 
   ;Spend modes:
   ;0 = recovery
   ;1 = run the INNER_PUZZLE
 
   ;MAIN
   (if mode
-    ; mode 1 - run INNER_PUZZLE
-    (a INNER_PUZZLE my_amount_or_inner_solution)
+      ; mode 1 - run INNER_PUZZLE
+      (a INNER_PUZZLE my_amount_or_inner_solution)
 
-    ; mode 0 - recovery
-    (if (all (= (sha256tree1 recovery_list_reveal) RECOVERY_DID_LIST_HASH) (> NUM_VERIFICATIONS_REQUIRED 0))
-      (c (list ASSERT_MY_AMOUNT my_amount_or_inner_solution)
-        (c (list CREATE_COIN new_inner_puzhash my_amount_or_inner_solution (list new_inner_puzhash))
-            (c (list ASSERT_MY_COIN_ID my_id)
+      ; mode 0 - recovery
+      (if (all (= (sha256tree1 recovery_list_reveal) RECOVERY_DID_LIST_HASH) (> NUM_VERIFICATIONS_REQUIRED 0))
+          (c (list ASSERT_MY_AMOUNT my_amount_or_inner_solution)
+            (c (list CREATE_COIN new_inner_puzhash my_amount_or_inner_solution (list new_inner_puzhash))
+              (c (list ASSERT_MY_COIN_ID my_id)
                 (check_messages_from_identities SINGLETON_STRUCT NUM_VERIFICATIONS_REQUIRED recovery_list_reveal my_id new_inner_puzhash parent_innerpuzhash_amounts_for_recovery_ids pubkey 0)
+              )
             )
-        )
+          )
+          (x)
       )
-      (x)
-    )
   )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/did_innerpuz.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/did_innerpuz.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ff81bfffff01ff02ff05ff82017f80ffff01ff02ffff03ffff22ffff09ffff02ff7effff04ff02ffff04ff8217ffff80808080ff0b80ffff15ff17ff808080ffff01ff04ffff04ff28ffff04ff82017fff808080ffff04ffff04ff34ffff04ff8202ffffff04ff82017fffff04ffff04ff8202ffff8080ff8080808080ffff04ffff04ff38ffff04ff822fffff808080ffff02ff26ffff04ff02ffff04ff2fffff04ff17ffff04ff8217ffffff04ff822fffffff04ff8202ffffff04ff8205ffffff04ff820bffffff01ff8080808080808080808080808080ffff01ff088080ff018080ff0180ffff04ffff01ffffffff313dff4946ffff0233ff3c04ffffff0101ff02ff02ffff03ff05ffff01ff02ff3affff04ff02ffff04ff0dffff04ffff0bff2affff0bff22ff3c80ffff0bff2affff0bff2affff0bff22ff3280ff0980ffff0bff2aff0bffff0bff22ff8080808080ff8080808080ffff010b80ff0180ffffff02ffff03ff17ffff01ff02ffff03ff82013fffff01ff04ffff04ff30ffff04ffff0bffff0bffff02ff36ffff04ff02ffff04ff05ffff04ff27ffff04ff82023fffff04ff82053fffff04ff820b3fff8080808080808080ffff02ff7effff04ff02ffff04ffff02ff2effff04ff02ffff04ff2fffff04ff5fffff04ff82017fff808080808080ff8080808080ff2f80ff808080ffff02ff26ffff04ff02ffff04ff05ffff04ff0bffff04ff37ffff04ff2fffff04ff5fffff04ff8201bfffff04ff82017fffff04ffff10ff8202ffffff010180ff808080808080808080808080ffff01ff02ff26ffff04ff02ffff04ff05ffff04ff37ffff04ff2fffff04ff5fffff04ff8201bfffff04ff82017fffff04ff8202ffff8080808080808080808080ff0180ffff01ff02ffff03ffff15ff8202ffffff11ff0bffff01018080ffff01ff04ffff04ff20ffff04ff82017fffff04ff5fff80808080ff8080ffff01ff088080ff018080ff0180ff0bff17ffff02ff5effff04ff02ffff04ff09ffff04ff2fffff04ffff02ff7effff04ff02ffff04ffff04ff09ffff04ff0bff1d8080ff80808080ff808080808080ff5f80ffff04ffff0101ffff04ffff04ff2cffff04ff05ff808080ffff04ffff04ff20ffff04ff17ffff04ff0bff80808080ff80808080ffff0bff2affff0bff22ff2480ffff0bff2affff0bff2affff0bff22ff3280ff0580ffff0bff2affff02ff3affff04ff02ffff04ff07ffff04ffff0bff22ff2280ff8080808080ffff0bff22ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff7effff04ff02ffff04ff09ff80808080ffff02ff7effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ffff03ff81bfffff01ff02ff05ff82017f80ffff01ff02ffff03ffff22ffff09ffff02ff7effff04ff02ffff04ff8217ffff80808080ff0b80ffff15ff17ff808080ffff01ff04ffff04ff28ffff04ff82017fff808080ffff04ffff04ff34ffff04ff8202ffffff04ff82017fffff04ffff04ff8202ffff8080ff8080808080ffff04ffff04ff38ffff04ff822fffff808080ffff02ff26ffff04ff02ffff04ff2fffff04ff17ffff04ff8217ffffff04ff822fffffff04ff8202ffffff04ff8205ffffff04ff820bffffff01ff8080808080808080808080808080ffff01ff088080ff018080ff0180ffff04ffff01ffffffff313dff4946ffff0233ff3c04ffffff0101ff02ff02ffff03ff05ffff01ff02ff3affff04ff02ffff04ff0dffff04ffff0bff2affff0bff22ff3c80ffff0bff2affff0bff2affff0bff22ff3280ff0980ffff0bff2aff0bffff0bff22ff8080808080ff8080808080ffff010b80ff0180ffffff02ffff03ff17ffff01ff02ffff03ff82013fffff01ff04ffff04ff30ffff04ffff0bffff0bffff02ff36ffff04ff02ffff04ff05ffff04ff27ffff04ff82023fffff04ff82053fffff04ff820b3fff8080808080808080ffff02ff7effff04ff02ffff04ffff02ff2effff04ff02ffff04ff2fffff04ff5fffff04ff82017fff808080808080ff8080808080ff2f80ff808080ffff02ff26ffff04ff02ffff04ff05ffff04ff0bffff04ff37ffff04ff2fffff04ff5fffff04ff8201bfffff04ff82017fffff04ffff10ff8202ffffff010180ff808080808080808080808080ffff01ff02ff26ffff04ff02ffff04ff05ffff04ff37ffff04ff2fffff04ff5fffff04ff8201bfffff04ff82017fffff04ff8202ffff8080808080808080808080ff0180ffff01ff02ffff03ffff15ff8202ffffff11ff0bffff01018080ffff01ff04ffff04ff20ffff04ff82017fffff04ff5fff80808080ff8080ffff01ff088080ff018080ff0180ff0bff17ffff02ff5effff04ff02ffff04ff09ffff04ff2fffff04ffff02ff7effff04ff02ffff04ffff04ff09ffff04ff0bff1d8080ff80808080ff808080808080ff5f80ffff04ffff0101ffff04ffff04ff2cffff04ff05ff808080ffff04ffff04ff20ffff04ff17ffff04ff0bff80808080ff80808080ffff0bff2affff0bff22ff2480ffff0bff2affff0bff2affff0bff22ff3280ff0580ffff0bff2affff02ff3affff04ff02ffff04ff07ffff04ffff0bff22ff2280ff8080808080ffff0bff22ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff7effff04ff02ffff04ff09ff80808080ffff02ff7effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/genesis_by_puzzle_hash.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/genesis_by_puzzle_hash.clsp`

 * *Files 26% similar despite different names*

```diff
@@ -1,24 +1,24 @@
 ; This is a "limitations_program" for use with cat.clsp.
 ;
 ; This checker allows new CATs to be created if their parent has a particular puzzle hash
 (mod (
-      GENESIS_PUZZLE_HASH
-      Truths
-      parent_is_cat
-      lineage_proof
-      delta
-      inner_conditions
-      (parent_parent_id parent_amount)
-    )
+    GENESIS_PUZZLE_HASH
+    Truths
+    parent_is_cat
+    lineage_proof
+    delta
+    inner_conditions
+    (parent_parent_id parent_amount)
+  )
 
-    (include cat_truths.clib)
+  (include cat_truths.clib)
 
-    ; Returns nil since we don't need to add any conditions
-    (if delta
-        (x)
-        (if (= (sha256 parent_parent_id GENESIS_PUZZLE_HASH parent_amount) (my_parent_cat_truth Truths))
-            ()
-            (x)
-        )
-    )
+  ; Returns nil since we don't need to add any conditions
+  (if delta
+      (x)
+      (if (= (sha256 parent_parent_id GENESIS_PUZZLE_HASH parent_amount) (my_parent_cat_truth Truths))
+          ()
+          (x)
+      )
+  )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/graftroot_dl_offers.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/graftroot_dl_offers.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -12,29 +12,29 @@
   )
 
   (include condition_codes.clib)
   (include merkle_utils.clib)
   (include curry-and-treehash.clib)
 
   (defmacro assert items
-      (if (r items)
-          (list if (f items) (c assert (r items)) (q . (x)))
-          (f items)
-      )
+    (if (r items)
+        (list if (f items) (c assert (r items)) (q . (x)))
+        (f items)
+    )
   )
 
   (defun-inline construct_singleton (SINGLETON_STRUCT METADATA_LAYER_HASH new_metadata new_metadata_updater new_inner_puz)
     (puzzle-hash-of-curried-function (f SINGLETON_STRUCT)
-                                    (puzzle-hash-of-curried-function METADATA_LAYER_HASH
-                                                                     new_inner_puz
-                                                                     (sha256tree new_metadata_updater)
-                                                                     (sha256tree new_metadata)
-                                                                     (sha256tree METADATA_LAYER_HASH)
-                                    )
-                                    (sha256tree SINGLETON_STRUCT)
+      (puzzle-hash-of-curried-function METADATA_LAYER_HASH
+        new_inner_puz
+        (sha256tree new_metadata_updater)
+        (sha256tree new_metadata)
+        (sha256tree METADATA_LAYER_HASH)
+      )
+      (sha256tree SINGLETON_STRUCT)
     )
   )
 
   (defun verify_proofs (new_root VALUES_TO_PROVE proofs_of_inclusion)
     (if proofs_of_inclusion
         (assert (= new_root (simplify_merkle_proof_after_leaf (f VALUES_TO_PROVE) (f proofs_of_inclusion)))
           ; then
@@ -53,48 +53,48 @@
       new_metadatas
       new_metadata_updaters
       new_inner_puzs
       conditions
     )
 
     (if SINGLETON_STRUCTS
-      (assert (verify_proofs (f (f new_metadatas)) (f VALUES_TO_PROVE) (f proofs_of_inclusion))
-        ; then
-        (loop_over_curried_params
-          (r SINGLETON_STRUCTS)
-          (r METADATA_LAYER_HASHES)
-          (r VALUES_TO_PROVE)
-          (r proofs_of_inclusion)
-          (r new_metadatas)
-          (r new_metadata_updaters)
-          (r new_inner_puzs)
-          (c
-            (list
-              ASSERT_PUZZLE_ANNOUNCEMENT
-              (sha256
-                (construct_singleton (f SINGLETON_STRUCTS) (f METADATA_LAYER_HASHES) (f new_metadatas) (f new_metadata_updaters) (f new_inner_puzs))
-                '$'
+        (assert (verify_proofs (f (f new_metadatas)) (f VALUES_TO_PROVE) (f proofs_of_inclusion))
+          ; then
+          (loop_over_curried_params
+            (r SINGLETON_STRUCTS)
+            (r METADATA_LAYER_HASHES)
+            (r VALUES_TO_PROVE)
+            (r proofs_of_inclusion)
+            (r new_metadatas)
+            (r new_metadata_updaters)
+            (r new_inner_puzs)
+            (c
+              (list
+                ASSERT_PUZZLE_ANNOUNCEMENT
+                (sha256
+                  (construct_singleton (f SINGLETON_STRUCTS) (f METADATA_LAYER_HASHES) (f new_metadatas) (f new_metadata_updaters) (f new_inner_puzs))
+                  '$'
+                )
               )
+              conditions
             )
-            conditions
           )
         )
-      )
-      conditions
+        conditions
     )
   )
 
   (if proofs_of_inclusion
-    (loop_over_curried_params
-      SINGLETON_STRUCTS
-      METADATA_LAYER_HASHES
-      VALUES_TO_PROVE
-      proofs_of_inclusion
-      new_metadatas
-      new_metadata_updaters
-      new_inner_puzs
-      (a INNER_PUZZLE inner_solution)
-    )
-    ; You may want to run the puzzle without a raise to examine conditions so we'll make a "blessed" way to fail
-    (c (list ASSERT_MY_AMOUNT -1) (a INNER_PUZZLE inner_solution))
+      (loop_over_curried_params
+        SINGLETON_STRUCTS
+        METADATA_LAYER_HASHES
+        VALUES_TO_PROVE
+        proofs_of_inclusion
+        new_metadatas
+        new_metadata_updaters
+        new_inner_puzs
+        (a INNER_PUZZLE inner_solution)
+      )
+      ; You may want to run the puzzle without a raise to examine conditions so we'll make a "blessed" way to fail
+      (c (list ASSERT_MY_AMOUNT -1) (a INNER_PUZZLE inner_solution))
   )
-)
+)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/graftroot_dl_offers.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/graftroot_dl_offers.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ff5fffff01ff02ff3affff04ff02ffff04ff0bffff04ff17ffff04ff2fffff04ff5fffff04ff81bfffff04ff82017fffff04ff8202ffffff04ffff02ff05ff8205ff80ff8080808080808080808080ffff01ff04ffff04ff10ffff01ff81ff8080ffff02ff05ff8205ff808080ff0180ffff04ffff01ffffff49ff3f02ff04ff0101ffff02ffff02ffff03ff05ffff01ff02ff2affff04ff02ffff04ff0dffff04ffff0bff12ffff0bff2cff1480ffff0bff12ffff0bff12ffff0bff2cff3c80ff0980ffff0bff12ff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ff02ffff03ff05ffff01ff02ffff03ffff02ff3effff04ff02ffff04ff82011fffff04ff27ffff04ff4fff808080808080ffff01ff02ff3affff04ff02ffff04ff0dffff04ff1bffff04ff37ffff04ff6fffff04ff81dfffff04ff8201bfffff04ff82037fffff04ffff04ffff04ff28ffff04ffff0bffff02ff26ffff04ff02ffff04ff11ffff04ffff02ff26ffff04ff02ffff04ff13ffff04ff82027fffff04ffff02ff36ffff04ff02ffff04ff82013fff80808080ffff04ffff02ff36ffff04ff02ffff04ff819fff80808080ffff04ffff02ff36ffff04ff02ffff04ff13ff80808080ff8080808080808080ffff04ffff02ff36ffff04ff02ffff04ff09ff80808080ff808080808080ffff012480ff808080ff8202ff80ff8080808080808080808080ffff01ff088080ff0180ffff018202ff80ff0180ffffff0bff12ffff0bff2cff3880ffff0bff12ffff0bff12ffff0bff2cff3c80ff0580ffff0bff12ffff02ff2affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff36ffff04ff02ffff04ff09ff80808080ffff02ff36ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff02ffff03ff1bffff01ff02ff2effff04ff02ffff04ffff02ffff03ffff18ffff0101ff1380ffff01ff0bffff0102ff2bff0580ffff01ff0bffff0102ff05ff2b8080ff0180ffff04ffff04ffff17ff13ffff0181ff80ff3b80ff8080808080ffff010580ff0180ff02ffff03ff17ffff01ff02ffff03ffff09ff05ffff02ff2effff04ff02ffff04ff13ffff04ff27ff808080808080ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff37ff808080808080ffff01ff088080ff0180ffff01ff010180ff0180ff018080
+ff02ffff01ff02ffff03ff5fffff01ff02ff3affff04ff02ffff04ff0bffff04ff17ffff04ff2fffff04ff5fffff04ff81bfffff04ff82017fffff04ff8202ffffff04ffff02ff05ff8205ff80ff8080808080808080808080ffff01ff04ffff04ff10ffff01ff81ff8080ffff02ff05ff8205ff808080ff0180ffff04ffff01ffffff49ff3f02ff04ff0101ffff02ffff02ffff03ff05ffff01ff02ff2affff04ff02ffff04ff0dffff04ffff0bff12ffff0bff2cff1480ffff0bff12ffff0bff12ffff0bff2cff3c80ff0980ffff0bff12ff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ff02ffff03ff05ffff01ff02ffff03ffff02ff3effff04ff02ffff04ff82011fffff04ff27ffff04ff4fff808080808080ffff01ff02ff3affff04ff02ffff04ff0dffff04ff1bffff04ff37ffff04ff6fffff04ff81dfffff04ff8201bfffff04ff82037fffff04ffff04ffff04ff28ffff04ffff0bffff02ff26ffff04ff02ffff04ff11ffff04ffff02ff26ffff04ff02ffff04ff13ffff04ff82027fffff04ffff02ff36ffff04ff02ffff04ff82013fff80808080ffff04ffff02ff36ffff04ff02ffff04ff819fff80808080ffff04ffff02ff36ffff04ff02ffff04ff13ff80808080ff8080808080808080ffff04ffff02ff36ffff04ff02ffff04ff09ff80808080ff808080808080ffff012480ff808080ff8202ff80ff8080808080808080808080ffff01ff088080ff0180ffff018202ff80ff0180ffffff0bff12ffff0bff2cff3880ffff0bff12ffff0bff12ffff0bff2cff3c80ff0580ffff0bff12ffff02ff2affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff36ffff04ff02ffff04ff09ff80808080ffff02ff36ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff02ffff03ff1bffff01ff02ff2effff04ff02ffff04ffff02ffff03ffff18ffff0101ff1380ffff01ff0bffff0102ff2bff0580ffff01ff0bffff0102ff05ff2b8080ff0180ffff04ffff04ffff17ff13ffff0181ff80ff3b80ff8080808080ffff010580ff0180ff02ffff03ff17ffff01ff02ffff03ffff09ff05ffff02ff2effff04ff02ffff04ff13ffff04ff27ff808080808080ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff37ff808080808080ffff01ff088080ff0180ffff01ff010180ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/json.clib` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/json.clib`

 * *Files 4% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 (
 
   (defun search_list_then_resume (key json_object result)
     (if result
-      result
-      (search_for_value_given_key key (r json_object))
+        result
+        (search_for_value_given_key key (r json_object))
     )
   )
 
   (defun search_for_value_given_key (key json_object)
     (if json_object
-      (if (l (f from_json_dict)) ; if we are hitting an unlabelled item (atom), just move on
-        (if (= (f (f json_object)) key)  ; if we have found our key
-          (r (f json_object))  ; return the value
-          (if (l (r (f json_object)))  ; otherwise check if we have hit another dictionary
-            (search_list_then_resume key json_object (search_for_value_given_key key (r (f json_object)))) ; check new dictionary
+        (if (l (f from_json_dict))  ; if we are hitting an unlabelled item (atom), just move on
+            (if (= (f (f json_object)) key)  ; if we have found our key
+                (r (f json_object))  ; return the value
+                (if (l (r (f json_object)))  ; otherwise check if we have hit another dictionary
+                    (search_list_then_resume key json_object (search_for_value_given_key key (r (f json_object))))  ; check new dictionary
+                    (search_for_value_given_key key (r json_object))
+                )
+            )
             (search_for_value_given_key key (r json_object))
-          )
         )
-        (search_for_value_given_key key (r json_object))
-      )
-      ()
+        ()
     )
   )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/load_clvm.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/load_clvm.py`

 * *Files 8% similar despite different names*

```diff
@@ -13,15 +13,17 @@
 
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.util.lock import Lockfile
 
 compile_clvm_py = None
 
-recompile_requested = (os.environ.get("CHIA_DEV_COMPILE_CLVM_ON_IMPORT", "") != "") or ("pytest" in sys.modules)
+recompile_requested = (
+    (os.environ.get("CHIA_DEV_COMPILE_CLVM_ON_IMPORT", "") != "") or ("pytest" in sys.modules)
+) and os.environ.get("CHIA_DEV_COMPILE_CLVM_DISABLED", None) is None
 
 
 def translate_path(p_):
     p = str(p_)
     if os.path.isdir(p):
         return p
     else:
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_metadata_updater_default.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_metadata_updater_default.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -2,29 +2,29 @@
 
   ; METADATA and METADATA_UPDATER_PUZZLE_HASH are passed in as truths from the layer above
   ; This program returns ((new_metadata new_metadata_updater_puzhash) conditions)
 
   ; Add uri to a field
   (defun add_url (METADATA key new_url)
     (if METADATA
-      (if (= (f (f METADATA)) key)
-        (c (c key (c new_url (r (f METADATA)))) (r METADATA))
-        (c (f METADATA) (add_url (r METADATA) key new_url))
-      )
-      ()
+        (if (= (f (f METADATA)) key)
+            (c (c key (c new_url (r (f METADATA)))) (r METADATA))
+            (c (f METADATA) (add_url (r METADATA) key new_url))
+        )
+        ()
     )
   )
   ; main
   ; returns ((new_metadata new_metadata_updater_puzhash) conditions)
   (list
     (list
-        (if (all key new_url)
-            (if (any (= key "mu") (= key "lu") (= key "u"))
-                (add_url CURRENT_METADATA key new_url)
-                CURRENT_METADATA
-            )
-            CURRENT_METADATA
-         )
-        METADATA_UPDATER_PUZZLE_HASH)
+      (if (all key new_url)
+          (if (any (= key "mu") (= key "lu") (= key "u"))
+              (add_url CURRENT_METADATA key new_url)
+              CURRENT_METADATA
+          )
+          CURRENT_METADATA
+      )
+    METADATA_UPDATER_PUZZLE_HASH)
     0
   )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_metadata_updater_updateable.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_metadata_updater_updateable.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -6,19 +6,19 @@
   ; This program returns ((new_metadata new_metadata_updater_puzhash) conditions)
 
   ; NOTE THIS PROGRAM IS FOR TESTING ONLY - USE IN DEPLOYMENT AT YOUR OWN PERIL
 
   ; once we find 'u' we don't need to continue looping
   (defun add_url (METADATA new_url)
     (if METADATA
-      (if (= (f (f METADATA)) 'u')
-        (c (c 'u' (c new_url (r (f METADATA)))) (r METADATA))
-        (c (f METADATA) (add_url (r METADATA) new_url))
-      )
-      ()
+        (if (= (f (f METADATA)) 'u')
+            (c (c 'u' (c new_url (r (f METADATA)))) (r METADATA))
+            (c (f METADATA) (add_url (r METADATA) new_url))
+        )
+        ()
     )
   )
 
   (defun-inline assert_bytes32 (value)
     (= (strlen value) 32)
   )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_layer.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_layer.clsp`

 * *Files 17% similar despite different names*

```diff
@@ -1,82 +1,82 @@
 (mod (
     NFT_OWNERSHIP_LAYER_MOD_HASH
     CURRENT_OWNER
     TRANSFER_PROGRAM
     INNER_PUZZLE
     inner_solution
-   )
+  )
 
-   (include condition_codes.clib)
-   (include curry-and-treehash.clib)
-   (include utility_macros.clib)
-
-   (defconstant NEW_OWNER_CONDITION -10)
-   (defconstant ANNOUNCEMENT_PREFIX 0xad4c)  ; first 2 bytes of (sha256 "Ownership Layer")
-
-   (defun-inline nft_ownership_layer_puzzle_hash (NFT_OWNERSHIP_LAYER_MOD_HASH new_owner TRANSFER_PROGRAM inner_puzzle_hash)
-      (puzzle-hash-of-curried-function NFT_OWNERSHIP_LAYER_MOD_HASH
-                                       inner_puzzle_hash
-                                       (sha256tree TRANSFER_PROGRAM)
-                                       (sha256 ONE new_owner)
-                                       (sha256 ONE NFT_OWNERSHIP_LAYER_MOD_HASH)
-      )
-   )
+  (include condition_codes.clib)
+  (include curry-and-treehash.clib)
+  (include utility_macros.clib)
+
+  (defconstant NEW_OWNER_CONDITION -10)
+  (defconstant ANNOUNCEMENT_PREFIX 0xad4c)  ; first 2 bytes of (sha256 "Ownership Layer")
+
+  (defun-inline nft_ownership_layer_puzzle_hash (NFT_OWNERSHIP_LAYER_MOD_HASH new_owner TRANSFER_PROGRAM inner_puzzle_hash)
+    (puzzle-hash-of-curried-function NFT_OWNERSHIP_LAYER_MOD_HASH
+      inner_puzzle_hash
+      (sha256tree TRANSFER_PROGRAM)
+      (sha256 ONE new_owner)
+      (sha256 ONE NFT_OWNERSHIP_LAYER_MOD_HASH)
+    )
+  )
 
-   (defun construct_end_conditions (NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM odd_args (new_owner new_tp conditions))
-     (c
-       (c
-         CREATE_COIN
-         (c
-           (nft_ownership_layer_puzzle_hash NFT_OWNERSHIP_LAYER_MOD_HASH new_owner (if new_tp new_tp TRANSFER_PROGRAM) (f odd_args))
-           (r odd_args)
-          )
+  (defun construct_end_conditions (NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM odd_args (new_owner new_tp conditions))
+    (c
+      (c
+        CREATE_COIN
+        (c
+          (nft_ownership_layer_puzzle_hash NFT_OWNERSHIP_LAYER_MOD_HASH new_owner (if new_tp new_tp TRANSFER_PROGRAM) (f odd_args))
+          (r odd_args)
         )
-        conditions
-     )
-   )
-
-   (defun wrap_odd_create_coins (NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions conditions odd_args tp_output)
-     (if conditions
-       (if (= (f (f conditions)) CREATE_COIN)
-         (if (= (logand (f (r (r (f conditions))))) ONE)
-            (assert (not odd_args)
-              ; then
-              (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) (r (f conditions)) tp_output)
-            )
-            (c (f conditions) (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args tp_output))
-         )
-         (if (= (f (f conditions)) NEW_OWNER_CONDITION)
-            (assert (not tp_output)
-              (c
-                (list CREATE_PUZZLE_ANNOUNCEMENT (concat ANNOUNCEMENT_PREFIX (sha256tree (r (f conditions)))))
-                (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args (a TRANSFER_PROGRAM (list CURRENT_OWNER all_conditions (r (f conditions)))))
-              )
-            )
-            (if (= (f (f conditions)) CREATE_PUZZLE_ANNOUNCEMENT)
-                (assert (not (and
-                          (= 34 (strlen (f (r (f conditions)))))
-                          (= (substr (f (r (f conditions))) 0 2) ANNOUNCEMENT_PREFIX)  ; lazy eval
-                        ))
+      )
+      conditions
+    )
+  )
+
+  (defun wrap_odd_create_coins (NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions conditions odd_args tp_output)
+    (if conditions
+        (if (= (f (f conditions)) CREATE_COIN)
+            (if (= (logand (f (r (r (f conditions))))) ONE)
+                (assert (not odd_args)
                   ; then
-                  (c (f conditions) (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args tp_output))
+                  (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) (r (f conditions)) tp_output)
                 )
                 (c (f conditions) (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args tp_output))
             )
-         )
-       )
-       ; odd_args is guaranteed to not be nil or else we'll have a path into atom error
-       (construct_end_conditions NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM odd_args
+            (if (= (f (f conditions)) NEW_OWNER_CONDITION)
+                (assert (not tp_output)
+                  (c
+                    (list CREATE_PUZZLE_ANNOUNCEMENT (concat ANNOUNCEMENT_PREFIX (sha256tree (r (f conditions)))))
+                    (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args (a TRANSFER_PROGRAM (list CURRENT_OWNER all_conditions (r (f conditions)))))
+                  )
+                )
+                (if (= (f (f conditions)) CREATE_PUZZLE_ANNOUNCEMENT)
+                    (assert (not (and
+                        (= 34 (strlen (f (r (f conditions)))))
+                        (= (substr (f (r (f conditions))) 0 2) ANNOUNCEMENT_PREFIX)  ; lazy eval
+                      ))
+                      ; then
+                      (c (f conditions) (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args tp_output))
+                    )
+                    (c (f conditions) (wrap_odd_create_coins NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM CURRENT_OWNER all_conditions (r conditions) odd_args tp_output))
+                )
+            )
+        )
+        ; odd_args is guaranteed to not be nil or else we'll have a path into atom error
+        (construct_end_conditions NFT_OWNERSHIP_LAYER_MOD_HASH TRANSFER_PROGRAM odd_args
           (if tp_output
               tp_output
               (a TRANSFER_PROGRAM (list CURRENT_OWNER all_conditions ()))
           )
-       )
-     )
-   )
+        )
+    )
+  )
 
   (defun main (
       NFT_OWNERSHIP_LAYER_MOD_HASH
       TRANSFER_PROGRAM
       CURRENT_OWNER
       conditions
     )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_layer.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_layer.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff26ffff04ff02ffff04ff05ffff04ff17ffff04ff0bffff04ffff02ff2fff5f80ff80808080808080ffff04ffff01ffffff82ad4cff0233ffff3e04ff81f601ffffff0102ffff02ffff03ff05ffff01ff02ff2affff04ff02ffff04ff0dffff04ffff0bff32ffff0bff3cff3480ffff0bff32ffff0bff32ffff0bff3cff2280ff0980ffff0bff32ff0bffff0bff3cff8080808080ff8080808080ffff010b80ff0180ff04ffff04ff38ffff04ffff02ff36ffff04ff02ffff04ff05ffff04ff27ffff04ffff02ff2effff04ff02ffff04ffff02ffff03ff81afffff0181afffff010b80ff0180ff80808080ffff04ffff0bff3cff4f80ffff04ffff0bff3cff0580ff8080808080808080ff378080ff82016f80ffffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff2fffff01ff80ff808080808080808080ff0bff32ffff0bff3cff2880ffff0bff32ffff0bff32ffff0bff3cff2280ff0580ffff0bff32ffff02ff2affff04ff02ffff04ff07ffff04ffff0bff3cff3c80ff8080808080ffff0bff3cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ff5fffff01ff02ffff03ffff09ff82011fff3880ffff01ff02ffff03ffff09ffff18ff82059f80ff3c80ffff01ff02ffff03ffff20ff81bf80ffff01ff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff82019fffff04ff82017fff80808080808080808080ffff01ff088080ff0180ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff808080808080808080808080ff0180ffff01ff02ffff03ffff09ff82011fff2c80ffff01ff02ffff03ffff20ff82017f80ffff01ff04ffff04ff24ffff04ffff0eff10ffff02ff2effff04ff02ffff04ff82019fff8080808080ff808080ffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ffff02ff0bffff04ff17ffff04ff2fffff04ff82019fff8080808080ff8080808080808080808080ffff01ff088080ff0180ffff01ff02ffff03ffff09ff82011fff2480ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0122ffff0dff82029f8080ffff01ff02ffff03ffff09ffff0cff82029fff80ffff010280ff1080ffff01ff0101ff8080ff0180ff8080ff018080ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff8080808080808080808080ffff01ff088080ff0180ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff808080808080808080808080ff018080ff018080ff0180ffff01ff02ff3affff04ff02ffff04ff05ffff04ff0bffff04ff81bfffff04ffff02ffff03ff82017fffff0182017fffff01ff02ff0bffff04ff17ffff04ff2fffff01ff808080808080ff0180ff8080808080808080ff0180ff018080
+ff02ffff01ff02ff26ffff04ff02ffff04ff05ffff04ff17ffff04ff0bffff04ffff02ff2fff5f80ff80808080808080ffff04ffff01ffffff82ad4cff0233ffff3e04ff81f601ffffff0102ffff02ffff03ff05ffff01ff02ff2affff04ff02ffff04ff0dffff04ffff0bff32ffff0bff3cff3480ffff0bff32ffff0bff32ffff0bff3cff2280ff0980ffff0bff32ff0bffff0bff3cff8080808080ff8080808080ffff010b80ff0180ff04ffff04ff38ffff04ffff02ff36ffff04ff02ffff04ff05ffff04ff27ffff04ffff02ff2effff04ff02ffff04ffff02ffff03ff81afffff0181afffff010b80ff0180ff80808080ffff04ffff0bff3cff4f80ffff04ffff0bff3cff0580ff8080808080808080ff378080ff82016f80ffffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff2fffff01ff80ff808080808080808080ff0bff32ffff0bff3cff2880ffff0bff32ffff0bff32ffff0bff3cff2280ff0580ffff0bff32ffff02ff2affff04ff02ffff04ff07ffff04ffff0bff3cff3c80ff8080808080ffff0bff3cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ff5fffff01ff02ffff03ffff09ff82011fff3880ffff01ff02ffff03ffff09ffff18ff82059f80ff3c80ffff01ff02ffff03ffff20ff81bf80ffff01ff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff82019fffff04ff82017fff80808080808080808080ffff01ff088080ff0180ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff808080808080808080808080ff0180ffff01ff02ffff03ffff09ff82011fff2c80ffff01ff02ffff03ffff20ff82017f80ffff01ff04ffff04ff24ffff04ffff0eff10ffff02ff2effff04ff02ffff04ff82019fff8080808080ff808080ffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ffff02ff0bffff04ff17ffff04ff2fffff04ff82019fff8080808080ff8080808080808080808080ffff01ff088080ff0180ffff01ff02ffff03ffff09ff82011fff2480ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0122ffff0dff82029f8080ffff01ff02ffff03ffff09ffff0cff82029fff80ffff010280ff1080ffff01ff0101ff8080ff0180ff8080ff018080ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff8080808080808080808080ffff01ff088080ff0180ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff808080808080808080808080ff018080ff018080ff0180ffff01ff02ff3affff04ff02ffff04ff05ffff04ff0bffff04ff81bfffff04ffff02ffff03ff82017fffff0182017fffff01ff02ff0bffff04ff17ffff04ff2fffff01ff808080808080ff0180ff8080808080808080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -14,65 +14,65 @@
   (include curry-and-treehash.clib)
 
   (defconstant TEN_THOUSAND 10000)
 
   ;; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline calculate_full_puzzle_hash (SINGLETON_STRUCT inner_puzzle_hash)
-     (puzzle-hash-of-curried-function (f SINGLETON_STRUCT)
-                                      inner_puzzle_hash
-                                      (sha256tree SINGLETON_STRUCT)
-     )
+    (puzzle-hash-of-curried-function (f SINGLETON_STRUCT)
+      inner_puzzle_hash
+      (sha256tree SINGLETON_STRUCT)
+    )
   )
 
   ; Given a singleton ID, generate the singleton struct
   (defun-inline get_singleton_struct (SINGLETON_STRUCT singleton_id)
-      (c (f SINGLETON_STRUCT) (c singleton_id (r (r SINGLETON_STRUCT))))
+    (c (f SINGLETON_STRUCT) (c singleton_id (r (r SINGLETON_STRUCT))))
   )
 
   (defun-inline calculate_percentage (amount percentage)
-      (f (divmod (* amount percentage) TEN_THOUSAND))
+    (f (divmod (* amount percentage) TEN_THOUSAND))
   )
 
   ; Loop of the trade prices list and either assert a puzzle announcement or generate xch
   (defun parse_trade_prices_list (ROYALTY_ADDRESS TRADE_PRICE_PERCENTAGE trade_prices_list my_nft_id)
-      (if trade_prices_list
-          (c
-              (list
-                ASSERT_PUZZLE_ANNOUNCEMENT
-                (sha256
-                  (f (r (f trade_prices_list)))
-                  (sha256tree (c my_nft_id (list (list ROYALTY_ADDRESS (calculate_percentage (f (f trade_prices_list)) TRADE_PRICE_PERCENTAGE) (list ROYALTY_ADDRESS)))))
-                )
-              )
-              (parse_trade_prices_list ROYALTY_ADDRESS TRADE_PRICE_PERCENTAGE (r trade_prices_list) my_nft_id)
+    (if trade_prices_list
+        (c
+          (list
+            ASSERT_PUZZLE_ANNOUNCEMENT
+            (sha256
+              (f (r (f trade_prices_list)))
+              (sha256tree (c my_nft_id (list (list ROYALTY_ADDRESS (calculate_percentage (f (f trade_prices_list)) TRADE_PRICE_PERCENTAGE) (list ROYALTY_ADDRESS)))))
+            )
           )
-          ()
-      )
+          (parse_trade_prices_list ROYALTY_ADDRESS TRADE_PRICE_PERCENTAGE (r trade_prices_list) my_nft_id)
+        )
+        ()
+    )
   )
 
   ; main
   ; Returning (new_owner new_transfer_program conditions)
   ; solution is (new_owner trade_prices_list new_did_inner_hash)
   (if solution
       (list
         (f solution)
         0
         (if (all (f solution) (not (= (f solution) Current_Owner)))
-          (c
-            (list
-              ASSERT_PUZZLE_ANNOUNCEMENT
-              (sha256
-                (calculate_full_puzzle_hash (get_singleton_struct SINGLETON_STRUCT (f solution)) (f (r (r solution))))
-                (f (r SINGLETON_STRUCT))
+            (c
+              (list
+                ASSERT_PUZZLE_ANNOUNCEMENT
+                (sha256
+                  (calculate_full_puzzle_hash (get_singleton_struct SINGLETON_STRUCT (f solution)) (f (r (r solution))))
+                  (f (r SINGLETON_STRUCT))
+                )
               )
+              (parse_trade_prices_list ROYALTY_ADDRESS TRADE_PRICE_PERCENTAGE (f (r solution)) (f (r SINGLETON_STRUCT)))
             )
             (parse_trade_prices_list ROYALTY_ADDRESS TRADE_PRICE_PERCENTAGE (f (r solution)) (f (r SINGLETON_STRUCT)))
-          )
-          (parse_trade_prices_list ROYALTY_ADDRESS TRADE_PRICE_PERCENTAGE (f (r solution)) (f (r SINGLETON_STRUCT)))
         )
       )
       (list Current_Owner () ())
   )
 
 
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ff81bfffff01ff04ff82013fffff04ff80ffff04ffff02ffff03ffff22ff82013fffff20ffff09ff82013fff2f808080ffff01ff04ffff04ff10ffff04ffff0bffff02ff2effff04ff02ffff04ff09ffff04ff8205bfffff04ffff02ff3effff04ff02ffff04ffff04ff09ffff04ff82013fff1d8080ff80808080ff808080808080ff1580ff808080ffff02ff16ffff04ff02ffff04ff0bffff04ff17ffff04ff8202bfffff04ff15ff8080808080808080ffff01ff02ff16ffff04ff02ffff04ff0bffff04ff17ffff04ff8202bfffff04ff15ff8080808080808080ff0180ff80808080ffff01ff04ff2fffff01ff80ff80808080ff0180ffff04ffff01ffffff3f02ff04ff0101ffff822710ff02ff02ffff03ff05ffff01ff02ff3affff04ff02ffff04ff0dffff04ffff0bff2affff0bff2cff1480ffff0bff2affff0bff2affff0bff2cff3c80ff0980ffff0bff2aff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ff17ffff01ff04ffff04ff10ffff04ffff0bff81a7ffff02ff3effff04ff02ffff04ffff04ff2fffff04ffff04ff05ffff04ffff05ffff14ffff12ff47ff0b80ff128080ffff04ffff04ff05ff8080ff80808080ff808080ff8080808080ff808080ffff02ff16ffff04ff02ffff04ff05ffff04ff0bffff04ff37ffff04ff2fff8080808080808080ff8080ff0180ffff0bff2affff0bff2cff1880ffff0bff2affff0bff2affff0bff2cff3c80ff0580ffff0bff2affff02ff3affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ffff03ff81bfffff01ff04ff82013fffff04ff80ffff04ffff02ffff03ffff22ff82013fffff20ffff09ff82013fff2f808080ffff01ff04ffff04ff10ffff04ffff0bffff02ff2effff04ff02ffff04ff09ffff04ff8205bfffff04ffff02ff3effff04ff02ffff04ffff04ff09ffff04ff82013fff1d8080ff80808080ff808080808080ff1580ff808080ffff02ff16ffff04ff02ffff04ff0bffff04ff17ffff04ff8202bfffff04ff15ff8080808080808080ffff01ff02ff16ffff04ff02ffff04ff0bffff04ff17ffff04ff8202bfffff04ff15ff8080808080808080ff0180ff80808080ffff01ff04ff2fffff01ff80ff80808080ff0180ffff04ffff01ffffff3f02ff04ff0101ffff822710ff02ff02ffff03ff05ffff01ff02ff3affff04ff02ffff04ff0dffff04ffff0bff2affff0bff2cff1480ffff0bff2affff0bff2affff0bff2cff3c80ff0980ffff0bff2aff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ff17ffff01ff04ffff04ff10ffff04ffff0bff81a7ffff02ff3effff04ff02ffff04ffff04ff2fffff04ffff04ff05ffff04ffff05ffff14ffff12ff47ff0b80ff128080ffff04ffff04ff05ff8080ff80808080ff808080ff8080808080ff808080ffff02ff16ffff04ff02ffff04ff05ffff04ff0bffff04ff37ffff04ff2fff8080808080808080ff8080ff0180ffff0bff2affff0bff2cff1880ffff0bff2affff0bff2affff0bff2cff3c80ff0580ffff0bff2affff02ff3affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_state_layer.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_state_layer.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -8,62 +8,62 @@
 
   (include condition_codes.clib)
   (include curry-and-treehash.clib)
   (include utility_macros.clib)
 
   (defun-inline nft_state_layer_puzzle_hash (NFT_STATE_LAYER_MOD_HASH METADATA METADATA_UPDATER_PUZZLE_HASH inner_puzzle_hash)
     (puzzle-hash-of-curried-function NFT_STATE_LAYER_MOD_HASH
-                                     inner_puzzle_hash
-                                     (sha256 ONE METADATA_UPDATER_PUZZLE_HASH)
-                                     (sha256tree METADATA)
-                                     (sha256 ONE NFT_STATE_LAYER_MOD_HASH)
+      inner_puzzle_hash
+      (sha256 ONE METADATA_UPDATER_PUZZLE_HASH)
+      (sha256tree METADATA)
+      (sha256 ONE NFT_STATE_LAYER_MOD_HASH)
     )
   )
 
 
   ; this function does two things - it wraps the odd value create coins, and it also filters out all negative conditions
   ; odd_coin_params is (puzhash amount ...)
   ; new_metadata_info is ((METADATA METADATA_UPDATER_PUZZLE_HASH) conditions)
   (defun wrap_odd_create_coins (NFT_STATE_LAYER_MOD_HASH conditions odd_coin_params new_metadata_info metadata_seen)
     (if conditions
-      (if (= (f (f conditions)) CREATE_COIN)
-          (if (logand (f (r (r (f conditions)))) ONE)
-              (assert (not odd_coin_params)
-                (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) (r (f conditions)) new_metadata_info metadata_seen)
-              )
-              (c (f conditions) (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) odd_coin_params new_metadata_info metadata_seen))
-          )
-          (if (= (f (f conditions)) -24)
-              (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) odd_coin_params
-                (assert (all
-                          (= (sha256tree (f (r (f conditions)))) (f (r (f new_metadata_info))))
-                          (not metadata_seen)
-                        )
+        (if (= (f (f conditions)) CREATE_COIN)
+            (if (logand (f (r (r (f conditions)))) ONE)
+                (assert (not odd_coin_params)
+                  (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) (r (f conditions)) new_metadata_info metadata_seen)
+                )
+                (c (f conditions) (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) odd_coin_params new_metadata_info metadata_seen))
+            )
+            (if (= (f (f conditions)) -24)
+                (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) odd_coin_params
+                  (assert (all
+                      (= (sha256tree (f (r (f conditions)))) (f (r (f new_metadata_info))))
+                      (not metadata_seen)
+                    )
                     ; then
                     (a (f (r (f conditions))) (list (f (f new_metadata_info)) (f (r (f new_metadata_info))) (f (r (r (f conditions))))))
+                  )
+                  ONE  ; the metadata update has been seen now
                 )
-                ONE  ; the metadata update has been seen now
-              )
-              (c (f conditions) (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) odd_coin_params new_metadata_info metadata_seen))
-          )
-      )
-      (c
-        (c CREATE_COIN
+                (c (f conditions) (wrap_odd_create_coins NFT_STATE_LAYER_MOD_HASH (r conditions) odd_coin_params new_metadata_info metadata_seen))
+            )
+        )
+        (c
+          (c CREATE_COIN
             (c
               (nft_state_layer_puzzle_hash
                 NFT_STATE_LAYER_MOD_HASH
                 (f (f new_metadata_info))
                 (f (r (f new_metadata_info)))
                 (f odd_coin_params)  ; metadata updater solution
               )
               (r odd_coin_params)
             )
+          )
+          (f (r new_metadata_info))  ; metadata_updater conditions
         )
-        (f (r new_metadata_info))  ; metadata_updater conditions
-      )
     )
   )
 
   ; main
   (wrap_odd_create_coins
     NFT_STATE_LAYER_MOD_HASH
     (a INNER_PUZZLE inner_solution)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/nft_state_layer.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/nft_state_layer.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff3effff04ff02ffff04ff05ffff04ffff02ff2fff5f80ffff04ff80ffff04ffff04ffff04ff0bffff04ff17ff808080ffff01ff808080ffff01ff8080808080808080ffff04ffff01ffffff0233ff04ff0101ffff02ff02ffff03ff05ffff01ff02ff1affff04ff02ffff04ff0dffff04ffff0bff12ffff0bff2cff1480ffff0bff12ffff0bff12ffff0bff2cff3c80ff0980ffff0bff12ff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff0bff12ffff0bff2cff1080ffff0bff12ffff0bff12ffff0bff2cff3c80ff0580ffff0bff12ffff02ff1affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ff0bffff01ff02ffff03ffff09ff23ff1880ffff01ff02ffff03ffff18ff81b3ff2c80ffff01ff02ffff03ffff20ff1780ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff33ffff04ff2fffff04ff5fff8080808080808080ffff01ff088080ff0180ffff01ff04ff13ffff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ff2fffff04ff5fff80808080808080808080ff0180ffff01ff02ffff03ffff09ff23ffff0181e880ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ffff02ffff03ffff22ffff09ffff02ff2effff04ff02ffff04ff53ff80808080ff82014f80ffff20ff5f8080ffff01ff02ff53ffff04ff818fffff04ff82014fffff04ff81b3ff8080808080ffff01ff088080ff0180ffff04ff2cff8080808080808080ffff01ff04ff13ffff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ff2fffff04ff5fff80808080808080808080ff018080ff0180ffff01ff04ffff04ff18ffff04ffff02ff16ffff04ff02ffff04ff05ffff04ff27ffff04ffff0bff2cff82014f80ffff04ffff02ff2effff04ff02ffff04ff818fff80808080ffff04ffff0bff2cff0580ff8080808080808080ff378080ff81af8080ff0180ff018080
+ff02ffff01ff02ff3effff04ff02ffff04ff05ffff04ffff02ff2fff5f80ffff04ff80ffff04ffff04ffff04ff0bffff04ff17ff808080ffff01ff808080ffff01ff8080808080808080ffff04ffff01ffffff0233ff04ff0101ffff02ff02ffff03ff05ffff01ff02ff1affff04ff02ffff04ff0dffff04ffff0bff12ffff0bff2cff1480ffff0bff12ffff0bff12ffff0bff2cff3c80ff0980ffff0bff12ff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff0bff12ffff0bff2cff1080ffff0bff12ffff0bff12ffff0bff2cff3c80ff0580ffff0bff12ffff02ff1affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ff0bffff01ff02ffff03ffff09ff23ff1880ffff01ff02ffff03ffff18ff81b3ff2c80ffff01ff02ffff03ffff20ff1780ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff33ffff04ff2fffff04ff5fff8080808080808080ffff01ff088080ff0180ffff01ff04ff13ffff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ff2fffff04ff5fff80808080808080808080ff0180ffff01ff02ffff03ffff09ff23ffff0181e880ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ffff02ffff03ffff22ffff09ffff02ff2effff04ff02ffff04ff53ff80808080ff82014f80ffff20ff5f8080ffff01ff02ff53ffff04ff818fffff04ff82014fffff04ff81b3ff8080808080ffff01ff088080ff0180ffff04ff2cff8080808080808080ffff01ff04ff13ffff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ff2fffff04ff5fff80808080808080808080ff018080ff0180ffff01ff04ffff04ff18ffff04ffff02ff16ffff04ff02ffff04ff05ffff04ff27ffff04ffff0bff2cff82014f80ffff04ffff02ff2effff04ff02ffff04ff818fff80808080ffff04ffff0bff2cff0580ff8080808080808080ff378080ff81af8080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_conditions.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_conditions.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.clsp`

 * *Files 12% similar despite different names*

```diff
@@ -19,73 +19,73 @@
 ; delegated_puzzle: a delegated puzzle, as in "graftroot", which should return the
 ;   desired conditions.
 ;
 ; solution: the solution to the delegated puzzle
 
 
 (mod
-    ; A puzzle should commit to `SYNTHETIC_PUBLIC_KEY`
-    ;
-    ; The solution should pass in 0 for `original_public_key` if it wants to use
-    ; an arbitrary `delegated_puzzle` (and `solution`) signed by the
-    ; `SYNTHETIC_PUBLIC_KEY` (whose corresponding private key can be calculated
-    ; if you know the private key for `original_public_key`)
-    ;
-    ; Or you can solve the hidden puzzle by revealing the `original_public_key`,
-    ; the hidden puzzle in `delegated_puzzle`, and a solution to the hidden puzzle.
-
-    (SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle solution)
-
-    ; "assert" is a macro that wraps repeated instances of "if"
-    ; usage: (assert A0 A1 ... An R)
-    ; all of A0, A1, ... An must evaluate to non-null, or an exception is raised
-    ; return the value of R (if we get that far)
-
-    (defmacro assert items
-        (if (r items)
-            (list if (f items) (c assert (r items)) (q . (x)))
-            (f items)
-        )
+  ; A puzzle should commit to `SYNTHETIC_PUBLIC_KEY`
+  ;
+  ; The solution should pass in 0 for `original_public_key` if it wants to use
+  ; an arbitrary `delegated_puzzle` (and `solution`) signed by the
+  ; `SYNTHETIC_PUBLIC_KEY` (whose corresponding private key can be calculated
+  ; if you know the private key for `original_public_key`)
+  ;
+  ; Or you can solve the hidden puzzle by revealing the `original_public_key`,
+  ; the hidden puzzle in `delegated_puzzle`, and a solution to the hidden puzzle.
+
+  (SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle solution)
+
+  ; "assert" is a macro that wraps repeated instances of "if"
+  ; usage: (assert A0 A1 ... An R)
+  ; all of A0, A1, ... An must evaluate to non-null, or an exception is raised
+  ; return the value of R (if we get that far)
+
+  (defmacro assert items
+    (if (r items)
+        (list if (f items) (c assert (r items)) (q . (x)))
+        (f items)
     )
+  )
 
-    (include condition_codes.clib)
+  (include condition_codes.clib)
 
-    ;; hash a tree
-    ;; This is used to calculate a puzzle hash given a puzzle program.
-    (defun sha256tree1
-           (TREE)
-           (if (l TREE)
-               (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
-               (sha256 1 TREE)
-           )
+  ;; hash a tree
+  ;; This is used to calculate a puzzle hash given a puzzle program.
+  (defun sha256tree1
+    (TREE)
+    (if (l TREE)
+        (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
+        (sha256 1 TREE)
     )
+  )
 
-    ; "is_hidden_puzzle_correct" returns true iff the hidden puzzle is correctly encoded
+  ; "is_hidden_puzzle_correct" returns true iff the hidden puzzle is correctly encoded
 
-    (defun-inline is_hidden_puzzle_correct (SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle)
-      (=
-          SYNTHETIC_PUBLIC_KEY
-          (point_add
-              original_public_key
-              (pubkey_for_exp (sha256 original_public_key (sha256tree1 delegated_puzzle)))
-          )
+  (defun-inline is_hidden_puzzle_correct (SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle)
+    (=
+      SYNTHETIC_PUBLIC_KEY
+      (point_add
+        original_public_key
+        (pubkey_for_exp (sha256 original_public_key (sha256tree1 delegated_puzzle)))
       )
     )
+  )
 
-    ; "possibly_prepend_aggsig" is the main entry point
+  ; "possibly_prepend_aggsig" is the main entry point
 
-    (defun-inline possibly_prepend_aggsig (SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle conditions)
-      (if original_public_key
-          (assert
-              (is_hidden_puzzle_correct SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle)
-              conditions
-          )
-          (c (list AGG_SIG_ME SYNTHETIC_PUBLIC_KEY (sha256tree1 delegated_puzzle)) conditions)
-      )
+  (defun-inline possibly_prepend_aggsig (SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle conditions)
+    (if original_public_key
+        (assert
+          (is_hidden_puzzle_correct SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle)
+          conditions
+        )
+        (c (list AGG_SIG_ME SYNTHETIC_PUBLIC_KEY (sha256tree1 delegated_puzzle)) conditions)
     )
+  )
 
-    ; main entry point
+  ; main entry point
 
-    (possibly_prepend_aggsig
-        SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle
-        (a delegated_puzzle solution))
+  (possibly_prepend_aggsig
+    SYNTHETIC_PUBLIC_KEY original_public_key delegated_puzzle
+  (a delegated_puzzle solution))
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_delegated_puzzle_or_hidden_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp`

 * *Files 19% similar despite different names*

```diff
@@ -14,95 +14,95 @@
 ;  delegated_puzzle: the puzzle signed by the M public keys
 ;     This puzzle must return a list of conditions
 
 ;  solution: the solution to the delegated puzzle
 
 
 (mod
-    (M public_key_list selectors delegated_puzzle solution)
+  (M public_key_list selectors delegated_puzzle solution)
 
-    (include condition_codes.clib)
+  (include condition_codes.clib)
 
-    ;; hash a tree
-    ;; This is used to calculate a puzzle hash given a puzzle program.
-    (defun sha256tree1
-           (TREE)
-           (if (l TREE)
-               (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
-               (sha256 1 TREE)
-           )
-    )
-
-    ; "assert" is a macro that wraps repeated instances of "if"
-    ; usage: (assert A0 A1 ... An R)
-    ; all of A0, A1, ... An must evaluate to non-null, or an exception is raised
-    ; return the value of R (if we get that far)
-
-    (defmacro assert items
-        (if (r items)
-            (list if (f items) (c assert (r items)) (q . (x)))
-            (f items)
+  ;; hash a tree
+  ;; This is used to calculate a puzzle hash given a puzzle program.
+  (defun sha256tree1
+    (TREE)
+    (if (l TREE)
+        (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
+        (sha256 1 TREE)
+    )
+  )
+
+  ; "assert" is a macro that wraps repeated instances of "if"
+  ; usage: (assert A0 A1 ... An R)
+  ; all of A0, A1, ... An must evaluate to non-null, or an exception is raised
+  ; return the value of R (if we get that far)
+
+  (defmacro assert items
+    (if (r items)
+        (list if (f items) (c assert (r items)) (q . (x)))
+        (f items)
+    )
+  )
+
+  ; add_aggsig returns a list of conditions. It includes M AGG_SIG conditions
+  ;   corresponding to the given list of public keys (with the given hash)
+  ;   plus the conditions that come out of the delegated puzzle.
+  ;
+  ; hash is the hash of delegated_puzzle.
+  ;  Yes it's redundant since we include the delegated_puzzle itself,
+  ;  but we don't want to recalculate the hash multiple times as its expensive to do so
+
+  (defun add_aggsig (public_key_list hash delegated_puzzle solution)
+    (if public_key_list
+        (c (list AGG_SIG_UNSAFE (f public_key_list) hash)
+          (add_aggsig (r public_key_list) hash delegated_puzzle solution)
         )
+        (a delegated_puzzle solution)
     )
+  )
 
-    ; add_aggsig returns a list of conditions. It includes M AGG_SIG conditions
-    ;   corresponding to the given list of public keys (with the given hash)
-    ;   plus the conditions that come out of the delegated puzzle.
-    ;
-    ; hash is the hash of delegated_puzzle.
-    ;  Yes it's redundant since we include the delegated_puzzle itself,
-    ;  but we don't want to recalculate the hash multiple times as its expensive to do so
-
-    (defun add_aggsig (public_key_list hash delegated_puzzle solution)
-        (if public_key_list
-            (c (list AGG_SIG_UNSAFE (f public_key_list) hash)
-               (add_aggsig (r public_key_list) hash delegated_puzzle solution)
-            )
-            (a delegated_puzzle solution)
-        )
-    )
-
-    ; choose_keys takes a list of selectors and the N public keys and
-    ; returns a list of the M public keys chosen by the selectors
+  ; choose_keys takes a list of selectors and the N public keys and
+  ; returns a list of the M public keys chosen by the selectors
 
-    (defun choose_keys (selectors public_key_list)
-        (if selectors
-            (if (f selectors)
-                (c (f public_key_list) (choose_keys (r selectors) (r public_key_list)))
-                (choose_keys (r selectors) (r public_key_list)))
-            ()
-        )
+  (defun choose_keys (selectors public_key_list)
+    (if selectors
+        (if (f selectors)
+            (c (f public_key_list) (choose_keys (r selectors) (r public_key_list)))
+        (choose_keys (r selectors) (r public_key_list)))
+        ()
     )
+  )
 
 
-    ; count the number of non-0 values in the list of selectors and return it as an integer
+  ; count the number of non-0 values in the list of selectors and return it as an integer
 
-    (defun count_selectors (selectors)
-        (if selectors
-            (+
-                (count_selectors (r selectors))
-                (if (f selectors) 1 0)
-            )
-            0
+  (defun count_selectors (selectors)
+    (if selectors
+        (+
+          (count_selectors (r selectors))
+          (if (f selectors) 1 0)
         )
+        0
     )
+  )
 
-    ; "solve_puzzle" is the main entry point
+  ; "solve_puzzle" is the main entry point
 
-    (defun-inline solve_puzzle (M public_key_list selectors delegated_puzzle solution)
-        ; make sure we have exactly M selectors
-        (assert (= M (count_selectors selectors))
-            ; return the AGG_SIG conditions plus the conditions from the delegated_puzzle
-                (add_aggsig (choose_keys selectors public_key_list)
-                            (sha256tree1 delegated_puzzle)
-                            delegated_puzzle
-                            solution)
-        )
+  (defun-inline solve_puzzle (M public_key_list selectors delegated_puzzle solution)
+    ; make sure we have exactly M selectors
+    (assert (= M (count_selectors selectors))
+      ; return the AGG_SIG conditions plus the conditions from the delegated_puzzle
+      (add_aggsig (choose_keys selectors public_key_list)
+        (sha256tree1 delegated_puzzle)
+        delegated_puzzle
+      solution)
     )
+  )
 
-    ; main entry point
+  ; main entry point
 
-    (solve_puzzle
-        M public_key_list
-        selectors delegated_puzzle solution
-    )
+  (solve_puzzle
+    M public_key_list
+    selectors delegated_puzzle solution
+  )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_m_of_n_delegate_direct.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ffff09ff05ffff02ff16ffff04ff02ffff04ff17ff8080808080ffff01ff02ff0cffff04ff02ffff04ffff02ff0affff04ff02ffff04ff17ffff04ff0bff8080808080ffff04ffff02ff1effff04ff02ffff04ff2fff80808080ffff04ff2fffff04ff5fff80808080808080ffff01ff088080ff0180ffff04ffff01ffff31ff02ffff03ff05ffff01ff04ffff04ff08ffff04ff09ffff04ff0bff80808080ffff02ff0cffff04ff02ffff04ff0dffff04ff0bffff04ff17ffff04ff2fff8080808080808080ffff01ff02ff17ff2f8080ff0180ffff02ffff03ff05ffff01ff02ffff03ff09ffff01ff04ff13ffff02ff0affff04ff02ffff04ff0dffff04ff1bff808080808080ffff01ff02ff0affff04ff02ffff04ff0dffff04ff1bff808080808080ff0180ff8080ff0180ffff02ffff03ff05ffff01ff10ffff02ff16ffff04ff02ffff04ff0dff80808080ffff02ffff03ff09ffff01ff0101ff8080ff018080ff8080ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ffff03ffff09ff05ffff02ff16ffff04ff02ffff04ff17ff8080808080ffff01ff02ff0cffff04ff02ffff04ffff02ff0affff04ff02ffff04ff17ffff04ff0bff8080808080ffff04ffff02ff1effff04ff02ffff04ff2fff80808080ffff04ff2fffff04ff5fff80808080808080ffff01ff088080ff0180ffff04ffff01ffff31ff02ffff03ff05ffff01ff04ffff04ff08ffff04ff09ffff04ff0bff80808080ffff02ff0cffff04ff02ffff04ff0dffff04ff0bffff04ff17ffff04ff2fff8080808080808080ffff01ff02ff17ff2f8080ff0180ffff02ffff03ff05ffff01ff02ffff03ff09ffff01ff04ff13ffff02ff0affff04ff02ffff04ff0dffff04ff1bff808080808080ffff01ff02ff0affff04ff02ffff04ff0dffff04ff1bff808080808080ff0180ff8080ff0180ffff02ffff03ff05ffff01ff10ffff02ff16ffff04ff02ffff04ff0dff80808080ffff02ffff03ff09ffff01ff0101ff8080ff018080ff8080ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_m_of_n_delegate_direct.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_puzzle_hash.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_puzzle_hash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton.clsp`

 * *Files 1% similar despite different names*

```diff
@@ -8,23 +8,23 @@
 
   (include condition_codes.clib)
   (include curry-and-treehash.clib)
 
   ;; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline calculate_full_puzzle_hash (SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH inner_puzzle_hash)
-     (puzzle-hash-of-curried-function SINGLETON_MOD_HASH
-                                      inner_puzzle_hash
-                                      (sha256tree (c SINGLETON_MOD_HASH (c LAUNCHER_ID LAUNCHER_PUZZLE_HASH)))
-     )
+    (puzzle-hash-of-curried-function SINGLETON_MOD_HASH
+      inner_puzzle_hash
+      (sha256tree (c SINGLETON_MOD_HASH (c LAUNCHER_ID LAUNCHER_PUZZLE_HASH)))
+    )
   )
 
   (defun-inline claim_rewards (SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash my_id)
     (list
-        (list ASSERT_PUZZLE_ANNOUNCEMENT (sha256 (calculate_full_puzzle_hash SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash) my_id))
-        (list CREATE_COIN_ANNOUNCEMENT '$')
-        (list ASSERT_MY_COIN_ID my_id))
+      (list ASSERT_PUZZLE_ANNOUNCEMENT (sha256 (calculate_full_puzzle_hash SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash) my_id))
+      (list CREATE_COIN_ANNOUNCEMENT '$')
+    (list ASSERT_MY_COIN_ID my_id))
   )
 
   ; main
   (claim_rewards SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash my_id)
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff04ffff04ff18ffff04ffff0bffff02ff2effff04ff02ffff04ff05ffff04ff2fffff04ffff02ff3effff04ff02ffff04ffff04ff05ffff04ff0bff178080ff80808080ff808080808080ff5f80ff808080ffff04ffff04ff2cffff01ff248080ffff04ffff04ff10ffff04ff5fff808080ff80808080ffff04ffff01ffffff463fff02ff3c04ffff01ff0102ffff02ffff03ff05ffff01ff02ff16ffff04ff02ffff04ff0dffff04ffff0bff3affff0bff12ff3c80ffff0bff3affff0bff3affff0bff12ff2a80ff0980ffff0bff3aff0bffff0bff12ff8080808080ff8080808080ffff010b80ff0180ffff0bff3affff0bff12ff1480ffff0bff3affff0bff3affff0bff12ff2a80ff0580ffff0bff3affff02ff16ffff04ff02ffff04ff07ffff04ffff0bff12ff1280ff8080808080ffff0bff12ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff04ffff04ff18ffff04ffff0bffff02ff2effff04ff02ffff04ff05ffff04ff2fffff04ffff02ff3effff04ff02ffff04ffff04ff05ffff04ff0bff178080ff80808080ff808080808080ff5f80ff808080ffff04ffff04ff2cffff01ff248080ffff04ffff04ff10ffff04ff5fff808080ff80808080ffff04ffff01ffffff463fff02ff3c04ffff01ff0102ffff02ffff03ff05ffff01ff02ff16ffff04ff02ffff04ff0dffff04ffff0bff3affff0bff12ff3c80ffff0bff3affff0bff3affff0bff12ff2a80ff0980ffff0bff3aff0bffff0bff12ff8080808080ff8080808080ffff010b80ff0180ffff0bff3affff0bff12ff1480ffff0bff3affff0bff3affff0bff12ff2a80ff0580ffff0bff3affff02ff16ffff04ff02ffff04ff07ffff04ffff0bff12ff1280ff8080808080ffff0bff12ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp`

 * *Files 1% similar despite different names*

```diff
@@ -6,16 +6,16 @@
   ; SINGLETON_MOD_HASH is the mod-hash for the singleton_top_layer puzzle
   ; LAUNCHER_ID is the ID of the singleton we are committed to paying to
   ; LAUNCHER_PUZZLE_HASH is the puzzle hash of the launcher
   ; SECONDS_DELAY is the number of seconds before the coin can be spent with `DELAYED_PUZZLE_HASH`
   ; DELAYED_PUZZLE_HASH is the puzzle hash of the delayed puzzle
   ; if my_id is passed in as () then this signals that we are trying to do a delayed spend case
   ; p1's meaning changes depending upon which case we're using
-    ; if we are paying to singleton then p1 is singleton_inner_puzzle_hash
-    ; if we are running the delayed case then p1 is the amount to output
+  ; if we are paying to singleton then p1 is singleton_inner_puzzle_hash
+  ; if we are running the delayed case then p1 is the amount to output
 
   (include condition_codes.clib)
   (include curry-and-treehash.clib)
 
   ;; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline delayed_spend (SECONDS_DELAY DELAYED_PUZZLE_HASH amount)
@@ -25,26 +25,26 @@
       (list ASSERT_MY_AMOUNT amount)
     )
   )
 
   ;; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline calculate_full_puzzle_hash (SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH inner_puzzle_hash)
-     (puzzle-hash-of-curried-function SINGLETON_MOD_HASH
-                                      inner_puzzle_hash
-                                      (sha256tree (c SINGLETON_MOD_HASH (c LAUNCHER_ID LAUNCHER_PUZZLE_HASH)))
-     )
+    (puzzle-hash-of-curried-function SINGLETON_MOD_HASH
+      inner_puzzle_hash
+      (sha256tree (c SINGLETON_MOD_HASH (c LAUNCHER_ID LAUNCHER_PUZZLE_HASH)))
+    )
   )
 
   (defun-inline claim_rewards (SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash my_id)
     (list
-        (list ASSERT_PUZZLE_ANNOUNCEMENT (sha256 (calculate_full_puzzle_hash SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash) my_id))
-        (list CREATE_COIN_ANNOUNCEMENT '$')
-        (list ASSERT_MY_COIN_ID my_id))
+      (list ASSERT_PUZZLE_ANNOUNCEMENT (sha256 (calculate_full_puzzle_hash SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH singleton_inner_puzzle_hash) my_id))
+      (list CREATE_COIN_ANNOUNCEMENT '$')
+    (list ASSERT_MY_COIN_ID my_id))
   )
 
   ; main
   (if my_id
-    (claim_rewards SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH p1 my_id)
-    (delayed_spend SECONDS_DELAY DELAYED_PUZZLE_HASH p1)
+      (claim_rewards SINGLETON_MOD_HASH LAUNCHER_ID LAUNCHER_PUZZLE_HASH p1 my_id)
+      (delayed_spend SECONDS_DELAY DELAYED_PUZZLE_HASH p1)
   )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/p2_singleton_or_delayed_puzhash.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ff82017fffff01ff04ffff04ff38ffff04ffff0bffff02ff2effff04ff02ffff04ff05ffff04ff81bfffff04ffff02ff3effff04ff02ffff04ffff04ff05ffff04ff0bff178080ff80808080ff808080808080ff82017f80ff808080ffff04ffff04ff3cffff01ff248080ffff04ffff04ff28ffff04ff82017fff808080ff80808080ffff01ff04ffff04ff24ffff04ff2fff808080ffff04ffff04ff2cffff04ff5fffff04ff81bfff80808080ffff04ffff04ff10ffff04ff81bfff808080ff8080808080ff0180ffff04ffff01ffffff49ff463fffff5002ff333cffff04ff0101ffff02ff02ffff03ff05ffff01ff02ff36ffff04ff02ffff04ff0dffff04ffff0bff26ffff0bff2aff1280ffff0bff26ffff0bff26ffff0bff2aff3a80ff0980ffff0bff26ff0bffff0bff2aff8080808080ff8080808080ffff010b80ff0180ffff0bff26ffff0bff2aff3480ffff0bff26ffff0bff26ffff0bff2aff3a80ff0580ffff0bff26ffff02ff36ffff04ff02ffff04ff07ffff04ffff0bff2aff2a80ff8080808080ffff0bff2aff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ffff03ff82017fffff01ff04ffff04ff38ffff04ffff0bffff02ff2effff04ff02ffff04ff05ffff04ff81bfffff04ffff02ff3effff04ff02ffff04ffff04ff05ffff04ff0bff178080ff80808080ff808080808080ff82017f80ff808080ffff04ffff04ff3cffff01ff248080ffff04ffff04ff28ffff04ff82017fff808080ff80808080ffff01ff04ffff04ff24ffff04ff2fff808080ffff04ffff04ff2cffff04ff5fffff04ff81bfff80808080ffff04ffff04ff10ffff04ff81bfff808080ff8080808080ff0180ffff04ffff01ffffff49ff463fffff5002ff333cffff04ff0101ffff02ff02ffff03ff05ffff01ff02ff36ffff04ff02ffff04ff0dffff04ffff0bff26ffff0bff2aff1280ffff0bff26ffff0bff26ffff0bff2aff3a80ff0980ffff0bff26ff0bffff0bff2aff8080808080ff8080808080ffff010b80ff0180ffff0bff26ffff0bff2aff3480ffff0bff26ffff0bff26ffff0bff2aff3a80ff0580ffff0bff26ffff02ff36ffff04ff02ffff04ff07ffff04ffff0bff2aff2a80ff8080808080ffff0bff2aff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_member_innerpuz.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_member_innerpuz.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 (mod (POOL_PUZZLE_HASH
-      P2_SINGLETON_PUZZLE_HASH
-      OWNER_PUBKEY
-      POOL_REWARD_PREFIX
-      WAITINGROOM_PUZHASH
-      Truths
-      p1
-      pool_reward_height
-      )
+    P2_SINGLETON_PUZZLE_HASH
+    OWNER_PUBKEY
+    POOL_REWARD_PREFIX
+    WAITINGROOM_PUZHASH
+    Truths
+    p1
+    pool_reward_height
+  )
 
 
   ; POOL_PUZZLE_HASH is commitment to the pool's puzzle hash
   ; P2_SINGLETON_PUZZLE_HASH is the puzzle hash for your pay to singleton puzzle
   ; OWNER_PUBKEY is the farmer pubkey which authorises a travel
   ; POOL_REWARD_PREFIX is network-specific data (mainnet vs testnet) that helps determine if a coin is a pool reward
   ; WAITINGROOM_PUZHASH is the puzzle_hash you'll go to when you initiate the leaving process
@@ -26,45 +26,45 @@
   ; key_value_list is signed extra data that the wallet may want to publicly announce for syncing purposes
 
   (include condition_codes.clib)
   (include singleton_truths.clib)
 
   ; takes a lisp tree and returns the hash of it
   (defun sha256tree (TREE)
-      (if (l TREE)
-          (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-          (sha256 1 TREE)
-      )
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+        (sha256 1 TREE)
+    )
   )
 
   (defun-inline calculate_pool_reward (pool_reward_height P2_SINGLETON_PUZZLE_HASH POOL_REWARD_PREFIX pool_reward_amount)
     (sha256 (logior POOL_REWARD_PREFIX (logand (- (lsh (q . 1) (q . 128)) (q . 1)) pool_reward_height)) P2_SINGLETON_PUZZLE_HASH pool_reward_amount)
   )
 
   (defun absorb_pool_reward (POOL_PUZZLE_HASH my_inner_puzzle_hash my_amount pool_reward_amount pool_reward_id)
     (list
-        (list CREATE_COIN my_inner_puzzle_hash my_amount)
-        (list CREATE_COIN POOL_PUZZLE_HASH pool_reward_amount)
-        (list CREATE_PUZZLE_ANNOUNCEMENT pool_reward_id)
-        (list ASSERT_COIN_ANNOUNCEMENT (sha256 pool_reward_id '$'))
+      (list CREATE_COIN my_inner_puzzle_hash my_amount)
+      (list CREATE_COIN POOL_PUZZLE_HASH pool_reward_amount)
+      (list CREATE_PUZZLE_ANNOUNCEMENT pool_reward_id)
+      (list ASSERT_COIN_ANNOUNCEMENT (sha256 pool_reward_id '$'))
     )
   )
 
   (defun-inline travel_to_waitingroom (OWNER_PUBKEY WAITINGROOM_PUZHASH my_amount extra_data)
     (list (list AGG_SIG_ME OWNER_PUBKEY (sha256tree extra_data))
-          (list CREATE_COIN WAITINGROOM_PUZHASH my_amount)
+      (list CREATE_COIN WAITINGROOM_PUZHASH my_amount)
     )
   )
 
   ; main
 
   (if pool_reward_height
-    (absorb_pool_reward POOL_PUZZLE_HASH
-                        (my_inner_puzzle_hash_truth Truths)
-                        (my_amount_truth Truths)
-                        p1
-                        (calculate_pool_reward pool_reward_height P2_SINGLETON_PUZZLE_HASH POOL_REWARD_PREFIX p1)
-    )
-    (travel_to_waitingroom OWNER_PUBKEY WAITINGROOM_PUZHASH (my_amount_truth Truths) p1)
-    )
+      (absorb_pool_reward POOL_PUZZLE_HASH
+        (my_inner_puzzle_hash_truth Truths)
+        (my_amount_truth Truths)
+        p1
+        (calculate_pool_reward pool_reward_height P2_SINGLETON_PUZZLE_HASH POOL_REWARD_PREFIX p1)
+      )
+      (travel_to_waitingroom OWNER_PUBKEY WAITINGROOM_PUZHASH (my_amount_truth Truths) p1)
   )
 )
+)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_member_innerpuz.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_member_innerpuz.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ff8202ffffff01ff02ff16ffff04ff02ffff04ff05ffff04ff8204bfffff04ff8206bfffff04ff82017fffff04ffff0bffff19ff2fffff18ffff019100ffffffffffffffffffffffffffffffffff8202ff8080ff0bff82017f80ff8080808080808080ffff01ff04ffff04ff08ffff04ff17ffff04ffff02ff1effff04ff02ffff04ff82017fff80808080ff80808080ffff04ffff04ff1cffff04ff5fffff04ff8206bfff80808080ff80808080ff0180ffff04ffff01ffff32ff3d33ff3effff04ffff04ff1cffff04ff0bffff04ff17ff80808080ffff04ffff04ff1cffff04ff05ffff04ff2fff80808080ffff04ffff04ff0affff04ff5fff808080ffff04ffff04ff14ffff04ffff0bff5fffff012480ff808080ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ffff03ff8202ffffff01ff02ff16ffff04ff02ffff04ff05ffff04ff8204bfffff04ff8206bfffff04ff82017fffff04ffff0bffff19ff2fffff18ffff019100ffffffffffffffffffffffffffffffffff8202ff8080ff0bff82017f80ff8080808080808080ffff01ff04ffff04ff08ffff04ff17ffff04ffff02ff1effff04ff02ffff04ff82017fff80808080ff80808080ffff04ffff04ff1cffff04ff5fffff04ff8206bfff80808080ff80808080ff0180ffff04ffff01ffff32ff3d33ff3effff04ffff04ff1cffff04ff0bffff04ff17ff80808080ffff04ffff04ff1cffff04ff05ffff04ff2fff80808080ffff04ffff04ff0affff04ff5fff808080ffff04ffff04ff14ffff04ffff0bff5fffff012480ff808080ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp`

 * *Files 2% similar despite different names*

```diff
@@ -1,69 +1,69 @@
 (mod (POOL_PUZZLE_HASH
-      P2_SINGLETON_PUZZLE_HASH
-      OWNER_PUBKEY
-      POOL_REWARD_PREFIX
-      RELATIVE_LOCK_HEIGHT
-      Truths
-      spend_type
-      p1
-      p2
-      )
+    P2_SINGLETON_PUZZLE_HASH
+    OWNER_PUBKEY
+    POOL_REWARD_PREFIX
+    RELATIVE_LOCK_HEIGHT
+    Truths
+    spend_type
+    p1
+    p2
+  )
 
   ; POOL_PUZZLE_HASH is commitment to the pool's puzzle hash
   ; P2_SINGLETON_PUZZLE_HASH is the puzzlehash for your pay_to_singleton puzzle
   ; OWNER_PUBKEY is the farmer pubkey which signs the exit puzzle_hash
   ; POOL_REWARD_PREFIX is network-specific data (mainnet vs testnet) that helps determine if a coin is a pool reward
   ; RELATIVE_LOCK_HEIGHT is how long it takes to leave
 
   ; spend_type is: 0 for absorbing money, 1 to escape
   ; if spend_type is 0
-    ; p1 is pool_reward_amount - the value of the coin reward - this is passed in so that this puzzle will still work after halvenings
-    ; p2 is pool_reward_height - the block height that the reward was generated at. This is used to calculate the coin ID.
+  ; p1 is pool_reward_amount - the value of the coin reward - this is passed in so that this puzzle will still work after halvenings
+  ; p2 is pool_reward_height - the block height that the reward was generated at. This is used to calculate the coin ID.
   ; if spend_type is 1
-    ; p1 is extra_data key_value_list - signed extra data that the wallet may want to publicly announce for syncing purposes
-    ; p2 is destination_puzhash - the location that the escape spend wants to create itself to
+  ; p1 is extra_data key_value_list - signed extra data that the wallet may want to publicly announce for syncing purposes
+  ; p2 is destination_puzhash - the location that the escape spend wants to create itself to
 
   (include condition_codes.clib)
   (include singleton_truths.clib)
 
   ; takes a lisp tree and returns the hash of it
   (defun sha256tree (TREE)
-      (if (l TREE)
-          (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-          (sha256 1 TREE)
-      )
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+        (sha256 1 TREE)
+    )
   )
 
   (defun-inline calculate_pool_reward (pool_reward_height P2_SINGLETON_PUZZLE_HASH POOL_REWARD_PREFIX pool_reward_amount)
     (sha256 (logior POOL_REWARD_PREFIX (logand (- (lsh (q . 1) (q . 128)) (q . 1)) pool_reward_height)) P2_SINGLETON_PUZZLE_HASH pool_reward_amount)
   )
 
   (defun absorb_pool_reward (POOL_PUZZLE_HASH my_inner_puzzle_hash my_amount pool_reward_amount pool_reward_id)
     (list
-        (list CREATE_COIN my_inner_puzzle_hash my_amount)
-        (list CREATE_COIN POOL_PUZZLE_HASH pool_reward_amount)
-        (list CREATE_PUZZLE_ANNOUNCEMENT pool_reward_id)
-        (list ASSERT_COIN_ANNOUNCEMENT (sha256 pool_reward_id '$'))
+      (list CREATE_COIN my_inner_puzzle_hash my_amount)
+      (list CREATE_COIN POOL_PUZZLE_HASH pool_reward_amount)
+      (list CREATE_PUZZLE_ANNOUNCEMENT pool_reward_id)
+      (list ASSERT_COIN_ANNOUNCEMENT (sha256 pool_reward_id '$'))
     )
   )
 
   (defun-inline travel_spend (RELATIVE_LOCK_HEIGHT new_puzzle_hash my_amount extra_data)
     (list (list ASSERT_HEIGHT_RELATIVE RELATIVE_LOCK_HEIGHT)
-          (list CREATE_COIN new_puzzle_hash my_amount)
-          (list AGG_SIG_ME OWNER_PUBKEY (sha256tree (list new_puzzle_hash extra_data)))
+      (list CREATE_COIN new_puzzle_hash my_amount)
+      (list AGG_SIG_ME OWNER_PUBKEY (sha256tree (list new_puzzle_hash extra_data)))
     )
   )
 
   ; main
 
   (if spend_type
-    (travel_spend RELATIVE_LOCK_HEIGHT p2 (my_amount_truth Truths) p1)
-    (absorb_pool_reward POOL_PUZZLE_HASH
-                        (my_inner_puzzle_hash_truth Truths)
-                        (my_amount_truth Truths)
-                        p1
-                        (calculate_pool_reward p2 P2_SINGLETON_PUZZLE_HASH POOL_REWARD_PREFIX p1)
-    )
+      (travel_spend RELATIVE_LOCK_HEIGHT p2 (my_amount_truth Truths) p1)
+      (absorb_pool_reward POOL_PUZZLE_HASH
+        (my_inner_puzzle_hash_truth Truths)
+        (my_amount_truth Truths)
+        p1
+        (calculate_pool_reward p2 P2_SINGLETON_PUZZLE_HASH POOL_REWARD_PREFIX p1)
+      )
   )
 
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/pool_waitingroom_innerpuz.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ff82017fffff01ff04ffff04ff1cffff04ff5fff808080ffff04ffff04ff12ffff04ff8205ffffff04ff8206bfff80808080ffff04ffff04ff08ffff04ff17ffff04ffff02ff1effff04ff02ffff04ffff04ff8205ffffff04ff8202ffff808080ff80808080ff80808080ff80808080ffff01ff02ff16ffff04ff02ffff04ff05ffff04ff8204bfffff04ff8206bfffff04ff8202ffffff04ffff0bffff19ff2fffff18ffff019100ffffffffffffffffffffffffffffffffff8205ff8080ff0bff8202ff80ff808080808080808080ff0180ffff04ffff01ffff32ff3d52ffff333effff04ffff04ff12ffff04ff0bffff04ff17ff80808080ffff04ffff04ff12ffff04ff05ffff04ff2fff80808080ffff04ffff04ff1affff04ff5fff808080ffff04ffff04ff14ffff04ffff0bff5fffff012480ff808080ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ffff03ff82017fffff01ff04ffff04ff1cffff04ff5fff808080ffff04ffff04ff12ffff04ff8205ffffff04ff8206bfff80808080ffff04ffff04ff08ffff04ff17ffff04ffff02ff1effff04ff02ffff04ffff04ff8205ffffff04ff8202ffff808080ff80808080ff80808080ff80808080ffff01ff02ff16ffff04ff02ffff04ff05ffff04ff8204bfffff04ff8206bfffff04ff8202ffffff04ffff0bffff19ff2fffff18ffff019100ffffffffffffffffffffffffffffffffff8205ff8080ff0bff8202ff80ff808080808080808080ff0180ffff04ffff01ffff32ff3d52ffff333effff04ffff04ff12ffff04ff0bffff04ff17ff80808080ffff04ffff04ff12ffff04ff05ffff04ff2fff80808080ffff04ffff04ff1affff04ff5fff808080ffff04ffff04ff14ffff04ffff0bff5fffff012480ff808080ff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/prefarm/make_prefarm_ph.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/prefarm/make_prefarm_ph.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/prefarm/spend_prefarm.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/prefarm/spend_prefarm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator.clsp`

 * *Files 3% similar despite different names*

```diff
@@ -1,37 +1,37 @@
 (mod (block_decompresser_program (historical_blocks_tree))
 
-    (defconstant local_deserialize_mod
-        ;; this monstrosity is the assembly output of `chialisp_deserialisation.clsp`
-        ;; it's pasted in here because the compiler doesn't yet support nested `mod`
-        ;; my apologies -- RK
-
-        (a (q 5 (a 62 (c 2 (c 5 ()))))
-           (c (q ((-1 . 127) -33 . -65) ((a (i (= 11 (q . -128)) (q 4 () (c 5 ())) (q 2 (i (>s 11 24) (q 2 26 (c 2 (c (a (i (>s 11 28) (q 2 (i (>s 11 20) (q 8) (q 4 (concat (logand (q . 31) 11) (substr 5 () (q . 1))) (c (substr 5 (q . 1)) ()))) 1) (q 4 (logand (q . 63) 11) (c 5 ()))) 1) ()))) (q 4 11 (c 5 ()))) 1)) 1) 4 (substr 21 () 9) (c (substr 21 9) ())) (c (c 5 19) (c 43 ())) (a 22 (c 2 (c 9 (c (a 62 (c 2 (c 21 ()))) ())))) 2 (i (= (substr 5 () (q . 1)) 16) (q 2 46 (c 2 (c (a 62 (c 2 (c (substr 5 (q . 1)) ()))) ()))) (q 2 18 (c 2 (c (substr 5 (q . 1)) (c (substr 5 () (q . 1)) ()))))) 1)
-              1))
+  (defconstant local_deserialize_mod
+    ;; this monstrosity is the assembly output of `chialisp_deserialisation.clsp`
+    ;; it's pasted in here because the compiler doesn't yet support nested `mod`
+    ;; my apologies -- RK
+
+    (a (q 5 (a 62 (c 2 (c 5 ()))))
+      (c (q ((-1 . 127) -33 . -65) ((a (i (= 11 (q . -128)) (q 4 () (c 5 ())) (q 2 (i (>s 11 24) (q 2 26 (c 2 (c (a (i (>s 11 28) (q 2 (i (>s 11 20) (q 8) (q 4 (concat (logand (q . 31) 11) (substr 5 () (q . 1))) (c (substr 5 (q . 1)) ()))) 1) (q 4 (logand (q . 63) 11) (c 5 ()))) 1) ()))) (q 4 11 (c 5 ()))) 1)) 1) 4 (substr 21 () 9) (c (substr 21 9) ())) (c (c 5 19) (c 43 ())) (a 22 (c 2 (c 9 (c (a 62 (c 2 (c 21 ()))) ())))) 2 (i (= (substr 5 () (q . 1)) 16) (q 2 46 (c 2 (c (a 62 (c 2 (c (substr 5 (q . 1)) ()))) ()))) (q 2 18 (c 2 (c (substr 5 (q . 1)) (c (substr 5 () (q . 1)) ()))))) 1)
+    1))
+  )
+
+  (defun sha256tree
+    (TREE)
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+        (sha256 1 TREE)
     )
+  )
 
-    (defun sha256tree
-           (TREE)
-           (if (l TREE)
-               (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-               (sha256 1 TREE)
-           )
+  (defun process_coin_spend ((parent puzzle amount solution . spend_level_extras))
+    (c parent (c (sha256tree puzzle) (c amount (c (a puzzle solution) spend_level_extras))))
+  )
+
+  (defun recurse (coin_spends)
+    (if coin_spends
+        (c (process_coin_spend (f coin_spends)) (recurse (r coin_spends)))
+        0
     )
+  )
 
-    (defun process_coin_spend ((parent puzzle amount solution . spend_level_extras))
-        (c parent (c (sha256tree puzzle) (c amount (c (a puzzle solution) spend_level_extras))))
-    )
-
-    (defun recurse (coin_spends)
-        (if coin_spends
-            (c (process_coin_spend (f coin_spends)) (recurse (r coin_spends)))
-            0
-        )
-    )
-
-    (defun process-decompressor ((coin_spends . block-level-extras))
-        (c (recurse coin_spends) block-level-extras)
-    )
+  (defun process-decompressor ((coin_spends . block-level-extras))
+    (c (recurse coin_spends) block-level-extras)
+  )
 
-    (process-decompressor (a block_decompresser_program (list local_deserialize_mod historical_blocks_tree))))
+(process-decompressor (a block_decompresser_program (list local_deserialize_mod historical_blocks_tree))))
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff0cffff04ff02ffff04ffff02ff05ffff04ff08ffff04ff13ff80808080ff80808080ffff04ffff01ffffff02ffff01ff05ffff02ff3effff04ff02ffff04ff05ff8080808080ffff04ffff01ffffff81ff7fff81df81bfffffff02ffff03ffff09ff0bffff01818080ffff01ff04ff80ffff04ff05ff808080ffff01ff02ffff03ffff0aff0bff1880ffff01ff02ff1affff04ff02ffff04ffff02ffff03ffff0aff0bff1c80ffff01ff02ffff03ffff0aff0bff1480ffff01ff0880ffff01ff04ffff0effff18ffff011fff0b80ffff0cff05ff80ffff01018080ffff04ffff0cff05ffff010180ff80808080ff0180ffff01ff04ffff18ffff013fff0b80ffff04ff05ff80808080ff0180ff80808080ffff01ff04ff0bffff04ff05ff80808080ff018080ff0180ff04ffff0cff15ff80ff0980ffff04ffff0cff15ff0980ff808080ffff04ffff04ff05ff1380ffff04ff2bff808080ffff02ff16ffff04ff02ffff04ff09ffff04ffff02ff3effff04ff02ffff04ff15ff80808080ff8080808080ff02ffff03ffff09ffff0cff05ff80ffff010180ff1080ffff01ff02ff2effff04ff02ffff04ffff02ff3effff04ff02ffff04ffff0cff05ffff010180ff80808080ff80808080ffff01ff02ff12ffff04ff02ffff04ffff0cff05ffff010180ffff04ffff0cff05ff80ffff010180ff808080808080ff0180ff018080ff04ffff02ff16ffff04ff02ffff04ff09ff80808080ff0d80ffff04ff09ffff04ffff02ff1effff04ff02ffff04ff15ff80808080ffff04ff2dffff04ffff02ff15ff5d80ff7d80808080ffff02ffff03ff05ffff01ff04ffff02ff0affff04ff02ffff04ff09ff80808080ffff02ff16ffff04ff02ffff04ff0dff8080808080ff8080ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ff0cffff04ff02ffff04ffff02ff05ffff04ff08ffff04ff13ff80808080ff80808080ffff04ffff01ffffff02ffff01ff05ffff02ff3effff04ff02ffff04ff05ff8080808080ffff04ffff01ffffff81ff7fff81df81bfffffff02ffff03ffff09ff0bffff01818080ffff01ff04ff80ffff04ff05ff808080ffff01ff02ffff03ffff0aff0bff1880ffff01ff02ff1affff04ff02ffff04ffff02ffff03ffff0aff0bff1c80ffff01ff02ffff03ffff0aff0bff1480ffff01ff0880ffff01ff04ffff0effff18ffff011fff0b80ffff0cff05ff80ffff01018080ffff04ffff0cff05ffff010180ff80808080ff0180ffff01ff04ffff18ffff013fff0b80ffff04ff05ff80808080ff0180ff80808080ffff01ff04ff0bffff04ff05ff80808080ff018080ff0180ff04ffff0cff15ff80ff0980ffff04ffff0cff15ff0980ff808080ffff04ffff04ff05ff1380ffff04ff2bff808080ffff02ff16ffff04ff02ffff04ff09ffff04ffff02ff3effff04ff02ffff04ff15ff80808080ff8080808080ff02ffff03ffff09ffff0cff05ff80ffff010180ff1080ffff01ff02ff2effff04ff02ffff04ffff02ff3effff04ff02ffff04ffff0cff05ffff010180ff80808080ff80808080ffff01ff02ff12ffff04ff02ffff04ffff0cff05ffff010180ffff04ffff0cff05ff80ffff010180ff808080808080ff0180ff018080ff04ffff02ff16ffff04ff02ffff04ff09ff80808080ff0d80ffff04ff09ffff04ffff02ff1effff04ff02ffff04ff15ff80808080ffff04ff2dffff04ffff02ff15ff5d80ff7d80808080ffff02ffff03ff05ffff01ff04ffff02ff0affff04ff02ffff04ff09ff80808080ffff02ff16ffff04ff02ffff04ff0dff8080808080ff8080ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator2.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator2.clsp`

 * *Files 4% similar despite different names*

```diff
@@ -1,34 +1,34 @@
 ; This is a new generator ROM that does not pass in the CLVM parser program as
 ; the first argument to the generator program, but instead passes NULL.
 ; It is intended to be used once the 2.0 hard fork activates, in an attempt to
 ; simplify the consensus rules
 (mod (block_decompresser_program (historical_blocks_tree))
 
-    (defconstant null ()
-	)
+  (defconstant null ()
+  )
 
-    (defun sha256tree
-           (TREE)
-           (if (l TREE)
-               (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-               (sha256 1 TREE)
-           )
+  (defun sha256tree
+    (TREE)
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+        (sha256 1 TREE)
     )
+  )
 
-    (defun process_coin_spend ((parent puzzle amount solution . spend_level_extras))
-        (c parent (c (sha256tree puzzle) (c amount (c (a puzzle solution) spend_level_extras))))
+  (defun process_coin_spend ((parent puzzle amount solution . spend_level_extras))
+    (c parent (c (sha256tree puzzle) (c amount (c (a puzzle solution) spend_level_extras))))
+  )
+
+  (defun recurse (coin_spends)
+    (if coin_spends
+        (c (process_coin_spend (f coin_spends)) (recurse (r coin_spends)))
+        0
     )
+  )
 
-    (defun recurse (coin_spends)
-        (if coin_spends
-            (c (process_coin_spend (f coin_spends)) (recurse (r coin_spends)))
-            0
-        )
-    )
-
-    (defun process-decompressor ((coin_spends . block-level-extras))
-        (c (recurse coin_spends) block-level-extras)
-    )
+  (defun process-decompressor ((coin_spends . block-level-extras))
+    (c (recurse coin_spends) block-level-extras)
+  )
 
-    (process-decompressor (a block_decompresser_program (list null historical_blocks_tree))))
+(process-decompressor (a block_decompresser_program (list null historical_blocks_tree))))
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/rom_bootstrap_generator2.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/rom_bootstrap_generator2.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff0cffff04ff02ffff04ffff02ff05ffff04ff08ffff04ff13ff80808080ff80808080ffff04ffff01ffff80ff04ffff02ff16ffff04ff02ffff04ff09ff80808080ff0d80ffff04ff09ffff04ffff02ff1effff04ff02ffff04ff15ff80808080ffff04ff2dffff04ffff02ff15ff5d80ff7d80808080ffff02ffff03ff05ffff01ff04ffff02ff0affff04ff02ffff04ff09ff80808080ffff02ff16ffff04ff02ffff04ff0dff8080808080ff8080ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ff0cffff04ff02ffff04ffff02ff05ffff04ff08ffff04ff13ff80808080ff80808080ffff04ffff01ffff80ff04ffff02ff16ffff04ff02ffff04ff09ff80808080ff0d80ffff04ff09ffff04ffff02ff1effff04ff02ffff04ff15ff80808080ffff04ff2dffff04ffff02ff15ff5d80ff7d80808080ffff02ffff03ff05ffff01ff04ffff02ff0affff04ff02ffff04ff09ff80808080ffff02ff16ffff04ff02ffff04ff0dff8080808080ff8080ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -6,33 +6,33 @@
   ;; The idea is the other side of this trade requires observing the announcement from a
   ;; `settlement_payments` puzzle hash as a condition of one or more coin spends.
 
   (include condition_codes.clib)
   (include utility_macros.clib)
 
   (defun sha256tree (TREE)
-     (if (l TREE)
-         (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-         (sha256 1 TREE)
-     )
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+        (sha256 1 TREE)
+    )
   )
 
   (defun create_coins_for_payment (payment_params so_far)
     (if payment_params
         (assert (> (f (r (f payment_params))) 0)  ; assert the amount is positive
           ; then
           (c (c CREATE_COIN (f payment_params)) (create_coins_for_payment (r payment_params) so_far))
         )
         so_far
     )
   )
 
   (defun-inline create_announcement_for_payment (notarized_payment)
-      (list CREATE_PUZZLE_ANNOUNCEMENT
-            (sha256tree notarized_payment))
+    (list CREATE_PUZZLE_ANNOUNCEMENT
+    (sha256tree notarized_payment))
   )
 
   (defun-inline augment_condition_list (notarized_payment so_far)
     (c
       (create_announcement_for_payment notarized_payment)
       (create_coins_for_payment (r notarized_payment) so_far)
     )
@@ -42,8 +42,8 @@
     (if notarized_payments
         (augment_condition_list (f notarized_payments) (construct_condition_list (r notarized_payments)))
         ()
     )
   )
 
   (construct_condition_list notarized_payments)
-)
+)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff02ffff03ffff15ff29ff8080ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff01ff088080ff0180ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff02ffff03ffff15ff29ff8080ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff01ff088080ff0180ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments_old.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments_old.clsp`

 * *Files 0% similar despite different names*

```diff
@@ -5,30 +5,30 @@
   ;; and a `(CREATE_PUZZLE_ANNOUNCEMENT (sha256tree notarized_coin_payment))` announcement
   ;; The idea is the other side of this trade requires observing the announcement from a
   ;; `settlement_payments` puzzle hash as a condition of one or more coin spends.
 
   (include condition_codes.clib)
 
   (defun sha256tree (TREE)
-     (if (l TREE)
-         (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
-         (sha256 1 TREE)
-     )
+    (if (l TREE)
+        (sha256 2 (sha256tree (f TREE)) (sha256tree (r TREE)))
+        (sha256 1 TREE)
+    )
   )
 
   (defun create_coins_for_payment (payment_params so_far)
     (if payment_params
         (c (c CREATE_COIN (f payment_params)) (create_coins_for_payment (r payment_params) so_far))
         so_far
     )
   )
 
   (defun-inline create_announcement_for_payment (notarized_payment)
-      (list CREATE_PUZZLE_ANNOUNCEMENT
-            (sha256tree notarized_payment))
+    (list CREATE_PUZZLE_ANNOUNCEMENT
+    (sha256tree notarized_payment))
   )
 
   (defun-inline augment_condition_list (notarized_payment so_far)
     (c
       (create_announcement_for_payment notarized_payment)
       (create_coins_for_payment (r notarized_payment) so_far)
     )
@@ -38,8 +38,8 @@
     (if notarized_payments
         (augment_condition_list (f notarized_payments) (construct_condition_list (r notarized_payments)))
         ()
     )
   )
 
   (construct_condition_list notarized_payments)
-)
+)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/settlement_payments_old.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/settlement_payments_old.clsp.hex`

 * *Ordering differences only*

 * *Files 1% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
+ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer.clsp`

 * *Files 2% similar despite different names*

```diff
@@ -1,29 +1,29 @@
 (mod (SINGLETON_STRUCT INNER_PUZZLE lineage_proof my_amount inner_solution)
 
-;; SINGLETON_STRUCT = (MOD_HASH . (LAUNCHER_ID . LAUNCHER_PUZZLE_HASH))
+  ;; SINGLETON_STRUCT = (MOD_HASH . (LAUNCHER_ID . LAUNCHER_PUZZLE_HASH))
 
-; SINGLETON_STRUCT, INNER_PUZZLE are curried in by the wallet
+  ; SINGLETON_STRUCT, INNER_PUZZLE are curried in by the wallet
 
-; EXAMPLE SOLUTION '(0xfadeddab 0xdeadbeef 1 (0xdeadbeef 200) 50 ((51 0xfadeddab 100) (60 "trash") (51 deadbeef 0)))'
+  ; EXAMPLE SOLUTION '(0xfadeddab 0xdeadbeef 1 (0xdeadbeef 200) 50 ((51 0xfadeddab 100) (60 "trash") (51 deadbeef 0)))'
 
 
-; This puzzle is a wrapper around an inner smart puzzle which guarantees uniqueness.
-; It takes its singleton identity from a coin with a launcher puzzle which guarantees that it is unique.
+  ; This puzzle is a wrapper around an inner smart puzzle which guarantees uniqueness.
+  ; It takes its singleton identity from a coin with a launcher puzzle which guarantees that it is unique.
 
   (include condition_codes.clib)
   (include curry-and-treehash.clib)
   (include singleton_truths.clib)
 
   ; takes a lisp tree and returns the hash of it
   (defun sha256tree1 (TREE)
-      (if (l TREE)
-          (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
-          (sha256 1 TREE)
-      )
+    (if (l TREE)
+        (sha256 2 (sha256tree1 (f TREE)) (sha256tree1 (r TREE)))
+        (sha256 1 TREE)
+    )
   )
 
   ; "assert" is a macro that wraps repeated instances of "if"
   ; usage: (assert A0 A1 ... An R)
   ; all of A0, A1, ... An must evaluate to non-null, or an exception is raised
   ; return the value of R (if we get that far)
 
@@ -37,35 +37,35 @@
   (defun-inline mod_hash_for_singleton_struct (SINGLETON_STRUCT) (f SINGLETON_STRUCT))
   (defun-inline launcher_id_for_singleton_struct (SINGLETON_STRUCT) (f (r SINGLETON_STRUCT)))
   (defun-inline launcher_puzzle_hash_for_singleton_struct (SINGLETON_STRUCT) (r (r SINGLETON_STRUCT)))
 
   ;; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline calculate_full_puzzle_hash (SINGLETON_STRUCT inner_puzzle_hash)
-     (puzzle-hash-of-curried-function (mod_hash_for_singleton_struct SINGLETON_STRUCT)
-                                      inner_puzzle_hash
-                                      (sha256tree1 SINGLETON_STRUCT)
-     )
+    (puzzle-hash-of-curried-function (mod_hash_for_singleton_struct SINGLETON_STRUCT)
+      inner_puzzle_hash
+      (sha256tree1 SINGLETON_STRUCT)
+    )
   )
 
   ; assembles information from the solution to create our own full ID including asserting our parent is a singleton
   (defun create_my_ID (SINGLETON_STRUCT full_puzzle_hash parent_parent parent_inner_puzzle_hash parent_amount my_amount)
     (sha256 (sha256 parent_parent (calculate_full_puzzle_hash SINGLETON_STRUCT parent_inner_puzzle_hash) parent_amount)
-            full_puzzle_hash
-            my_amount)
+      full_puzzle_hash
+    my_amount)
   )
 
   ;; take a boolean and a non-empty list of conditions
   ;; strip off the first condition if a boolean is set
   ;; this is used to remove `(CREATE_COIN xxx -113)`
   ;; pretty sneaky, eh?
   (defun strip_first_condition_if (boolean condition_list)
     (if boolean
-      (r condition_list)
-      condition_list
+        (r condition_list)
+        condition_list
     )
   )
 
   (defun-inline morph_condition (condition SINGLETON_STRUCT)
     (list (f condition) (calculate_full_puzzle_hash SINGLETON_STRUCT (f (r condition))) (f (r (r condition))))
   )
 
@@ -76,16 +76,16 @@
         0
     )
   )
 
   ;; Returns a (bool . bool)
   (defun odd_cons_m113 (output_amount)
     (c
-      (= (logand output_amount 1) 1) ;; is it odd?
-      (= output_amount -113) ;; is it the escape value?
+      (= (logand output_amount 1) 1)  ;; is it odd?
+      (= output_amount -113)  ;; is it the escape value?
     )
   )
 
   ; Assert exactly one output with odd value exists - ignore it if value is -113
 
   ;; this function iterates over the output conditions from the inner puzzle & solution
   ;; and both checks that exactly one unique singleton child is created (with odd valued output),
@@ -93,37 +93,37 @@
   ;;
   ;; The special case where the output value is -113 means a child singleton is intentionally
   ;; *NOT* being created, thus forever ending this singleton's existence
 
   (defun check_and_morph_conditions_for_singleton (SINGLETON_STRUCT conditions has_odd_output_been_found)
     (if conditions
         (morph_next_condition SINGLETON_STRUCT conditions has_odd_output_been_found (odd_cons_m113 (created_coin_value_or_0 (f conditions))))
-          (if has_odd_output_been_found
-              0
-              (x)  ;; no odd output found
-          )
+        (if has_odd_output_been_found
+            0
+            (x)  ;; no odd output found
         )
-   )
+    )
+  )
 
-   ;; a continuation of `check_and_morph_conditions_for_singleton` with booleans `is_output_odd` and `is_output_m113`
-   ;; precalculated
-   (defun morph_next_condition (SINGLETON_STRUCT conditions has_odd_output_been_found (is_output_odd . is_output_m113))
-       (assert
-          (not (all is_output_odd has_odd_output_been_found))
-          (strip_first_condition_if
-             is_output_m113
-             (c (if is_output_odd
-                    (morph_condition (f conditions) SINGLETON_STRUCT)
-                    (f conditions)
-                )
-                (check_and_morph_conditions_for_singleton SINGLETON_STRUCT (r conditions) (any is_output_odd has_odd_output_been_found))
-             )
+  ;; a continuation of `check_and_morph_conditions_for_singleton` with booleans `is_output_odd` and `is_output_m113`
+  ;; precalculated
+  (defun morph_next_condition (SINGLETON_STRUCT conditions has_odd_output_been_found (is_output_odd . is_output_m113))
+    (assert
+      (not (all is_output_odd has_odd_output_been_found))
+      (strip_first_condition_if
+        is_output_m113
+        (c (if is_output_odd
+               (morph_condition (f conditions) SINGLETON_STRUCT)
+               (f conditions)
           )
+          (check_and_morph_conditions_for_singleton SINGLETON_STRUCT (r conditions) (any is_output_odd has_odd_output_been_found))
+        )
       )
-   )
+    )
+  )
 
   ; this final stager asserts our ID
   ; it also runs the innerpuz with the innersolution with the "truths" added
   ; it then passes that output conditions from the innerpuz to the morph conditions function
   (defun stager_three (SINGLETON_STRUCT lineage_proof my_id full_puzhash innerpuzhash my_amount INNER_PUZZLE inner_solution)
     (c (list ASSERT_MY_COIN_ID my_id) (check_and_morph_conditions_for_singleton SINGLETON_STRUCT (a INNER_PUZZLE (c (truth_data_to_truth_struct my_id full_puzhash innerpuzhash my_amount lineage_proof SINGLETON_STRUCT) inner_solution)) 0))
   )
@@ -167,11 +167,11 @@
 
 
   ; main
 
   ; if our value is not an odd amount then we are invalid
   ; this calculates my_innerpuzhash and passes all values to stager_one
   (if (logand my_amount 1)
-    (stager_one SINGLETON_STRUCT lineage_proof (sha256tree1 INNER_PUZZLE) my_amount INNER_PUZZLE inner_solution)
-    (x)
+      (stager_one SINGLETON_STRUCT lineage_proof (sha256tree1 INNER_PUZZLE) my_amount INNER_PUZZLE inner_solution)
+      (x)
   )
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ffff18ff2fffff010180ffff01ff02ff36ffff04ff02ffff04ff05ffff04ff17ffff04ffff02ff26ffff04ff02ffff04ff0bff80808080ffff04ff2fffff04ff0bffff04ff5fff808080808080808080ffff01ff088080ff0180ffff04ffff01ffffffff4602ff3304ffff0101ff02ffff02ffff03ff05ffff01ff02ff5cffff04ff02ffff04ff0dffff04ffff0bff2cffff0bff24ff3880ffff0bff2cffff0bff2cffff0bff24ff3480ff0980ffff0bff2cff0bffff0bff24ff8080808080ff8080808080ffff010b80ff0180ff02ffff03ff0bffff01ff02ff32ffff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ffff02ff2affff04ff02ffff04ffff02ffff03ffff09ff23ff2880ffff0181b3ff8080ff0180ff80808080ff80808080808080ffff01ff02ffff03ff17ff80ffff01ff088080ff018080ff0180ffffffff0bffff0bff17ffff02ff3affff04ff02ffff04ff09ffff04ff2fffff04ffff02ff26ffff04ff02ffff04ff05ff80808080ff808080808080ff5f80ff0bff81bf80ff02ffff03ffff20ffff22ff4fff178080ffff01ff02ff7effff04ff02ffff04ff6fffff04ffff04ffff02ffff03ff4fffff01ff04ff23ffff04ffff02ff3affff04ff02ffff04ff09ffff04ff53ffff04ffff02ff26ffff04ff02ffff04ff05ff80808080ff808080808080ffff04ff81b3ff80808080ffff011380ff0180ffff02ff7cffff04ff02ffff04ff05ffff04ff1bffff04ffff21ff4fff1780ff80808080808080ff8080808080ffff01ff088080ff0180ffff04ffff09ffff18ff05ffff010180ffff010180ffff09ff05ffff01818f8080ff0bff2cffff0bff24ff3080ffff0bff2cffff0bff2cffff0bff24ff3480ff0580ffff0bff2cffff02ff5cffff04ff02ffff04ff07ffff04ffff0bff24ff2480ff8080808080ffff0bff24ff8080808080ffffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff26ffff04ff02ffff04ff09ff80808080ffff02ff26ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ff5effff04ff02ffff04ff05ffff04ff0bffff04ffff02ff3affff04ff02ffff04ff09ffff04ff17ffff04ffff02ff26ffff04ff02ffff04ff05ff80808080ff808080808080ffff04ff17ffff04ff2fffff04ff5fffff04ff81bfff80808080808080808080ffff04ffff04ff20ffff04ff17ff808080ffff02ff7cffff04ff02ffff04ff05ffff04ffff02ff82017fffff04ffff04ffff04ff17ff2f80ffff04ffff04ff5fff81bf80ffff04ff0bff05808080ff8202ff8080ffff01ff80808080808080ffff02ff2effff04ff02ffff04ff05ffff04ff0bffff04ffff02ffff03ff3bffff01ff02ff22ffff04ff02ffff04ff05ffff04ff17ffff04ff13ffff04ff2bffff04ff5bffff04ff5fff808080808080808080ffff01ff02ffff03ffff09ff15ffff0bff13ff1dff2b8080ffff01ff0bff15ff17ff5f80ffff01ff088080ff018080ff0180ffff04ff17ffff04ff2fffff04ff5fffff04ff81bfffff04ff82017fff8080808080808080808080ff02ffff03ff05ffff011bffff010b80ff0180ff018080
+ff02ffff01ff02ffff03ffff18ff2fffff010180ffff01ff02ff36ffff04ff02ffff04ff05ffff04ff17ffff04ffff02ff26ffff04ff02ffff04ff0bff80808080ffff04ff2fffff04ff0bffff04ff5fff808080808080808080ffff01ff088080ff0180ffff04ffff01ffffffff4602ff3304ffff0101ff02ffff02ffff03ff05ffff01ff02ff5cffff04ff02ffff04ff0dffff04ffff0bff2cffff0bff24ff3880ffff0bff2cffff0bff2cffff0bff24ff3480ff0980ffff0bff2cff0bffff0bff24ff8080808080ff8080808080ffff010b80ff0180ff02ffff03ff0bffff01ff02ff32ffff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ffff02ff2affff04ff02ffff04ffff02ffff03ffff09ff23ff2880ffff0181b3ff8080ff0180ff80808080ff80808080808080ffff01ff02ffff03ff17ff80ffff01ff088080ff018080ff0180ffffffff0bffff0bff17ffff02ff3affff04ff02ffff04ff09ffff04ff2fffff04ffff02ff26ffff04ff02ffff04ff05ff80808080ff808080808080ff5f80ff0bff81bf80ff02ffff03ffff20ffff22ff4fff178080ffff01ff02ff7effff04ff02ffff04ff6fffff04ffff04ffff02ffff03ff4fffff01ff04ff23ffff04ffff02ff3affff04ff02ffff04ff09ffff04ff53ffff04ffff02ff26ffff04ff02ffff04ff05ff80808080ff808080808080ffff04ff81b3ff80808080ffff011380ff0180ffff02ff7cffff04ff02ffff04ff05ffff04ff1bffff04ffff21ff4fff1780ff80808080808080ff8080808080ffff01ff088080ff0180ffff04ffff09ffff18ff05ffff010180ffff010180ffff09ff05ffff01818f8080ff0bff2cffff0bff24ff3080ffff0bff2cffff0bff2cffff0bff24ff3480ff0580ffff0bff2cffff02ff5cffff04ff02ffff04ff07ffff04ffff0bff24ff2480ff8080808080ffff0bff24ff8080808080ffffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff26ffff04ff02ffff04ff09ff80808080ffff02ff26ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ff5effff04ff02ffff04ff05ffff04ff0bffff04ffff02ff3affff04ff02ffff04ff09ffff04ff17ffff04ffff02ff26ffff04ff02ffff04ff05ff80808080ff808080808080ffff04ff17ffff04ff2fffff04ff5fffff04ff81bfff80808080808080808080ffff04ffff04ff20ffff04ff17ff808080ffff02ff7cffff04ff02ffff04ff05ffff04ffff02ff82017fffff04ffff04ffff04ff17ff2f80ffff04ffff04ff5fff81bf80ffff04ff0bff05808080ff8202ff8080ffff01ff80808080808080ffff02ff2effff04ff02ffff04ff05ffff04ff0bffff04ffff02ffff03ff3bffff01ff02ff22ffff04ff02ffff04ff05ffff04ff17ffff04ff13ffff04ff2bffff04ff5bffff04ff5fff808080808080808080ffff01ff02ffff03ffff09ff15ffff0bff13ff1dff2b8080ffff01ff0bff15ff17ff5f80ffff01ff088080ff018080ff0180ffff04ff17ffff04ff2fffff04ff5fffff04ff81bfffff04ff82017fff8080808080808080808080ff02ffff03ff05ffff011bffff010b80ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp`

 * *Files 2% similar despite different names*

```diff
@@ -1,35 +1,35 @@
 (mod (SINGLETON_STRUCT INNER_PUZZLE lineage_proof my_amount inner_solution)
 
-;; SINGLETON_STRUCT = (MOD_HASH . (LAUNCHER_ID . LAUNCHER_PUZZLE_HASH))
+  ;; SINGLETON_STRUCT = (MOD_HASH . (LAUNCHER_ID . LAUNCHER_PUZZLE_HASH))
 
-; SINGLETON_STRUCT, INNER_PUZZLE are curried in by the wallet
+  ; SINGLETON_STRUCT, INNER_PUZZLE are curried in by the wallet
 
-; EXAMPLE SOLUTION '(0xfadeddab 0xdeadbeef 1 (0xdeadbeef 200) 50 ((51 0xfadeddab 100) (60 "trash") (51 deadbeef 0)))'
+  ; EXAMPLE SOLUTION '(0xfadeddab 0xdeadbeef 1 (0xdeadbeef 200) 50 ((51 0xfadeddab 100) (60 "trash") (51 deadbeef 0)))'
 
 
-; This puzzle is a wrapper around an inner smart puzzle which guarantees uniqueness.
-; It takes its singleton identity from a coin with a launcher puzzle which guarantees that it is unique.
+  ; This puzzle is a wrapper around an inner smart puzzle which guarantees uniqueness.
+  ; It takes its singleton identity from a coin with a launcher puzzle which guarantees that it is unique.
 
   (include condition_codes.clib)
   (include curry-and-treehash.clib)  ; also imports the constant ONE == 1
   (include singleton_truths.clib)
   (include utility_macros.clib)
 
   (defun-inline mod_hash_for_singleton_struct (SINGLETON_STRUCT) (f SINGLETON_STRUCT))
   (defun-inline launcher_id_for_singleton_struct (SINGLETON_STRUCT) (f (r SINGLETON_STRUCT)))
   (defun-inline launcher_puzzle_hash_for_singleton_struct (SINGLETON_STRUCT) (r (r SINGLETON_STRUCT)))
 
   ;; return the full puzzlehash for a singleton with the innerpuzzle curried in
   ; puzzle-hash-of-curried-function is imported from curry-and-treehash.clib
   (defun-inline calculate_full_puzzle_hash (SINGLETON_STRUCT inner_puzzle_hash)
-     (puzzle-hash-of-curried-function (mod_hash_for_singleton_struct SINGLETON_STRUCT)
-                                      inner_puzzle_hash
-                                      (sha256tree SINGLETON_STRUCT)
-     )
+    (puzzle-hash-of-curried-function (mod_hash_for_singleton_struct SINGLETON_STRUCT)
+      inner_puzzle_hash
+      (sha256tree SINGLETON_STRUCT)
+    )
   )
 
   (defun-inline morph_condition (condition SINGLETON_STRUCT)
     (c (f condition) (c (calculate_full_puzzle_hash SINGLETON_STRUCT (f (r condition))) (r (r condition))))
   )
 
   (defun is_odd_create_coin (condition)
@@ -59,24 +59,24 @@
                   (c (morph_condition (f conditions) SINGLETON_STRUCT) (check_and_morph_conditions_for_singleton SINGLETON_STRUCT (r conditions) ONE))
               )
             )
             (c (f conditions) (check_and_morph_conditions_for_singleton SINGLETON_STRUCT (r conditions) has_odd_output_been_found))
         )
         (assert has_odd_output_been_found ())
     )
-   )
+  )
 
- ; assert that either the lineage proof is for a parent singleton, or, if it's for the launcher, verify it matched our launcher ID
- ; then return a condition asserting it actually is our parent ID
- (defun verify_lineage_proof (SINGLETON_STRUCT parent_id is_not_launcher)
+  ; assert that either the lineage proof is for a parent singleton, or, if it's for the launcher, verify it matched our launcher ID
+  ; then return a condition asserting it actually is our parent ID
+  (defun verify_lineage_proof (SINGLETON_STRUCT parent_id is_not_launcher)
     (assert (any is_not_launcher (= parent_id (launcher_id_for_singleton_struct SINGLETON_STRUCT)))
       ; then
       (list ASSERT_MY_PARENT_ID parent_id)
     )
- )
+  )
 
   ; main
 
   ; if our value is not an odd amount then we are invalid
   (assert (logand my_amount ONE)
     ; then
     (c
@@ -85,20 +85,20 @@
         ; Verify the lineage proof by asserting our parent's ID
         (verify_lineage_proof
           SINGLETON_STRUCT
           ; calculate our parent's ID
           (calculate_coin_id
             (parent_info_for_lineage_proof lineage_proof)
             (if (is_not_eve_proof lineage_proof)  ; The PH calculation changes based on the lineage proof
-              (calculate_full_puzzle_hash SINGLETON_STRUCT (puzzle_hash_for_lineage_proof lineage_proof))  ; wrap the innerpuz in a singleton
-              (launcher_puzzle_hash_for_singleton_struct SINGLETON_STRUCT) ; Use the static launcher puzzle hash
+                (calculate_full_puzzle_hash SINGLETON_STRUCT (puzzle_hash_for_lineage_proof lineage_proof))  ; wrap the innerpuz in a singleton
+                (launcher_puzzle_hash_for_singleton_struct SINGLETON_STRUCT)  ; Use the static launcher puzzle hash
             )
             (if (is_not_eve_proof lineage_proof)  ; The position of "amount" changes based on the type on lineage proof
-              (amount_for_lineage_proof lineage_proof)
-              (amount_for_eve_proof lineage_proof)
+                (amount_for_lineage_proof lineage_proof)
+                (amount_for_eve_proof lineage_proof)
             )
           )
           (is_not_eve_proof lineage_proof)
         )
         ; finally check all of the conditions for a single odd output to wrap
         (check_and_morph_conditions_for_singleton SINGLETON_STRUCT (a INNER_PUZZLE inner_solution) 0)
       )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer_v1_1.clsp.hex`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -1 +1 @@
-ff02ffff01ff02ffff03ffff18ff2fff3480ffff01ff04ffff04ff20ffff04ff2fff808080ffff04ffff02ff3effff04ff02ffff04ff05ffff04ffff02ff2affff04ff02ffff04ff27ffff04ffff02ffff03ff77ffff01ff02ff36ffff04ff02ffff04ff09ffff04ff57ffff04ffff02ff2effff04ff02ffff04ff05ff80808080ff808080808080ffff011d80ff0180ffff04ffff02ffff03ff77ffff0181b7ffff015780ff0180ff808080808080ffff04ff77ff808080808080ffff02ff3affff04ff02ffff04ff05ffff04ffff02ff0bff5f80ffff01ff8080808080808080ffff01ff088080ff0180ffff04ffff01ffffffff4947ff0233ffff0401ff0102ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff3cffff0bff34ff2480ffff0bff3cffff0bff3cffff0bff34ff2c80ff0980ffff0bff3cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ff02ffff03ff0bffff01ff02ffff03ffff02ff26ffff04ff02ffff04ff13ff80808080ffff01ff02ffff03ffff20ff1780ffff01ff02ffff03ffff09ff81b3ffff01818f80ffff01ff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff34ff808080808080ffff01ff04ffff04ff23ffff04ffff02ff36ffff04ff02ffff04ff09ffff04ff53ffff04ffff02ff2effff04ff02ffff04ff05ff80808080ff808080808080ff738080ffff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff34ff8080808080808080ff0180ffff01ff088080ff0180ffff01ff04ff13ffff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff17ff8080808080808080ff0180ffff01ff02ffff03ff17ff80ffff01ff088080ff018080ff0180ffffff02ffff03ffff09ff09ff3880ffff01ff02ffff03ffff18ff2dffff010180ffff01ff0101ff8080ff0180ff8080ff0180ff0bff3cffff0bff34ff2880ffff0bff3cffff0bff3cffff0bff34ff2c80ff0580ffff0bff3cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ffff21ff17ffff09ff0bff158080ffff01ff04ff30ffff04ff0bff808080ffff01ff088080ff0180ff018080
+ff02ffff01ff02ffff03ffff18ff2fff3480ffff01ff04ffff04ff20ffff04ff2fff808080ffff04ffff02ff3effff04ff02ffff04ff05ffff04ffff02ff2affff04ff02ffff04ff27ffff04ffff02ffff03ff77ffff01ff02ff36ffff04ff02ffff04ff09ffff04ff57ffff04ffff02ff2effff04ff02ffff04ff05ff80808080ff808080808080ffff011d80ff0180ffff04ffff02ffff03ff77ffff0181b7ffff015780ff0180ff808080808080ffff04ff77ff808080808080ffff02ff3affff04ff02ffff04ff05ffff04ffff02ff0bff5f80ffff01ff8080808080808080ffff01ff088080ff0180ffff04ffff01ffffffff4947ff0233ffff0401ff0102ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff3cffff0bff34ff2480ffff0bff3cffff0bff3cffff0bff34ff2c80ff0980ffff0bff3cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ff02ffff03ff0bffff01ff02ffff03ffff02ff26ffff04ff02ffff04ff13ff80808080ffff01ff02ffff03ffff20ff1780ffff01ff02ffff03ffff09ff81b3ffff01818f80ffff01ff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff34ff808080808080ffff01ff04ffff04ff23ffff04ffff02ff36ffff04ff02ffff04ff09ffff04ff53ffff04ffff02ff2effff04ff02ffff04ff05ff80808080ff808080808080ff738080ffff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff34ff8080808080808080ff0180ffff01ff088080ff0180ffff01ff04ff13ffff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff17ff8080808080808080ff0180ffff01ff02ffff03ff17ff80ffff01ff088080ff018080ff0180ffffff02ffff03ffff09ff09ff3880ffff01ff02ffff03ffff18ff2dffff010180ffff01ff0101ff8080ff0180ff8080ff0180ff0bff3cffff0bff34ff2880ffff0bff3cffff0bff3cffff0bff34ff2c80ff0580ffff0bff3cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ffff21ff17ffff09ff0bff158080ffff01ff04ff30ffff04ff0bff808080ffff01ff088080ff0180ff018080
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_top_layer_v1_1.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_top_layer_v1_1.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/singleton_truths.clib` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/singleton_truths.clib`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -14,8 +14,8 @@
 
   (defun-inline parent_info_for_lineage_proof (lineage_proof) (f lineage_proof))
   (defun-inline puzzle_hash_for_lineage_proof (lineage_proof) (f (r lineage_proof)))
   (defun-inline amount_for_lineage_proof (lineage_proof) (f (r (r lineage_proof))))
   (defun-inline is_not_eve_proof (lineage_proof) (r (r lineage_proof)))
   (defun-inline parent_info_for_eve_proof (lineage_proof) (f lineage_proof))
   (defun-inline amount_for_eve_proof (lineage_proof) (f (r lineage_proof)))
-)
+)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/tails.py` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/tails.py`

 * *Files 1% similar despite different names*

```diff
@@ -5,22 +5,22 @@
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.spend_bundle import SpendBundle
 from chia.util.byte_types import hexstr_to_bytes
 from chia.util.ints import uint64
 from chia.wallet.cat_wallet.cat_info import CATInfo
 from chia.wallet.cat_wallet.cat_utils import (
+    CAT_MOD,
     SpendableCAT,
     construct_cat_puzzle,
     unsigned_spend_bundle_for_spendable_cats,
 )
 from chia.wallet.cat_wallet.lineage_store import CATLineageStore
 from chia.wallet.lineage_proof import LineageProof
 from chia.wallet.payment import Payment
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.puzzles.load_clvm import load_clvm_maybe_recompile
 from chia.wallet.transaction_record import TransactionRecord
 
 GENESIS_BY_ID_MOD = load_clvm_maybe_recompile("genesis_by_coin_id.clsp")
 GENESIS_BY_PUZHASH_MOD = load_clvm_maybe_recompile("genesis_by_puzzle_hash.clsp")
 EVERYTHING_WITH_SIG_MOD = load_clvm_maybe_recompile("everything_with_signature.clsp")
 DELEGATED_LIMITATIONS_MOD = load_clvm_maybe_recompile("delegated_tail.clsp")
@@ -82,21 +82,22 @@
             wallet.wallet_state_manager.db_wrapper, tail.get_tree_hash().hex()
         )
         await wallet.add_lineage(origin_id, LineageProof())
 
         minted_cat_puzzle_hash: bytes32 = construct_cat_puzzle(CAT_MOD, tail.get_tree_hash(), cat_inner).get_tree_hash()
 
         tx_record: TransactionRecord = await wallet.standard_wallet.generate_signed_transaction(
-            amount, minted_cat_puzzle_hash, uint64(0), origin_id, coins
+            amount, minted_cat_puzzle_hash, uint64(0), coins, origin_id=origin_id
         )
         assert tx_record.spend_bundle is not None
 
+        inner_tree_hash = cat_inner.get_tree_hash()
         inner_solution = wallet.standard_wallet.add_condition_to_solution(
             Program.to([51, 0, -113, tail, []]),
-            wallet.standard_wallet.make_solution(primaries=[Payment(cat_inner.get_tree_hash(), amount)]),
+            wallet.standard_wallet.make_solution(primaries=[Payment(inner_tree_hash, amount, [inner_tree_hash])]),
         )
         eve_spend = unsigned_spend_bundle_for_spendable_cats(
             CAT_MOD,
             [
                 SpendableCAT(
                     list(filter(lambda a: a.amount == amount, tx_record.additions))[0],
                     tail.get_tree_hash(),
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp` & `chia-blockchain-2.0.0b3/chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp`

 * *Files 1% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 
 (mod (decompress_puzzle decompress_coin_spend_entry start1 end1 start2 end2 compressed_cses deserialize gen_list reserved_arg)
 
   (defun decompress_cses (decompress_puzzle decompress_coin_spend_entry cses deserialize puzzle_prefix)
     (if cses
-      (c (a decompress_coin_spend_entry (list deserialize decompress_puzzle puzzle_prefix (f cses)))
-         (decompress_cses decompress_puzzle decompress_coin_spend_entry (r cses) deserialize puzzle_prefix ))
-      ()) )
+        (c (a decompress_coin_spend_entry (list deserialize decompress_puzzle puzzle_prefix (f cses)))
+        (decompress_cses decompress_puzzle decompress_coin_spend_entry (r cses) deserialize puzzle_prefix ))
+  ()) )
 
   (defun join_gen_args (generators start1 end1 start2 end2)
     (concat
       (substr (f generators) start1 end1)
       (substr (f (r generators)) start2 end2)
     )
   )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/secret_key_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/secret_key_store.py`

 * *Files 26% similar despite different names*

```diff
@@ -6,16 +6,16 @@
 
 GROUP_ORDER = 0x73EDA753299D7D483339D80809A1D80553BDA402FFFE5BFEFFFFFFFF00000001
 
 
 class SecretKeyStore:
     _pk2sk: Dict[G1Element, PrivateKey]
 
-    def __init__(self):
+    def __init__(self) -> None:
         self._pk2sk = {}
 
-    def save_secret_key(self, secret_key: PrivateKey):
+    def save_secret_key(self, secret_key: PrivateKey) -> None:
         public_key = secret_key.get_g1()
         self._pk2sk[bytes(public_key)] = secret_key
 
     def secret_key_for_public_key(self, public_key: G1Element) -> Optional[PrivateKey]:
         return self._pk2sk.get(bytes(public_key))
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/sign_coin_spends.py` & `chia-blockchain-2.0.0b3/chia/wallet/sign_coin_spends.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/singleton.py` & `chia-blockchain-2.0.0b3/chia/wallet/singleton.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/trade_manager.py` & `chia-blockchain-2.0.0b3/chia/wallet/trade_manager.py`

 * *Files 2% similar despite different names*

```diff
@@ -24,19 +24,19 @@
 from chia.wallet.puzzle_drivers import PuzzleInfo, Solver
 from chia.wallet.puzzles.load_clvm import load_clvm_maybe_recompile
 from chia.wallet.trade_record import TradeRecord
 from chia.wallet.trading.offer import OFFER_MOD_OLD_HASH, NotarizedPayment, Offer
 from chia.wallet.trading.trade_status import TradeStatus
 from chia.wallet.trading.trade_store import TradeStore
 from chia.wallet.transaction_record import TransactionRecord
+from chia.wallet.util.query_filter import HashFilter
 from chia.wallet.util.transaction_type import TransactionType
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet import Wallet
 from chia.wallet.wallet_coin_record import WalletCoinRecord
-from chia.wallet.wallet_coin_store import HashFilter
 
 OFFER_MOD = load_clvm_maybe_recompile("settlement_payments.clsp")
 
 
 class TradeManager:
     """
     This class is a driver for creating and accepting settlement_payments.clsp style offers.
@@ -385,16 +385,26 @@
         for trade in trades:
             if secure:
                 await self.trade_store.set_status(trade.trade_id, TradeStatus.PENDING_CANCEL)
             else:
                 await self.trade_store.set_status(trade.trade_id, TradeStatus.CANCELLED)
         return all_txs
 
-    async def save_trade(self, trade: TradeRecord, offer_name: bytes32) -> None:
+    async def save_trade(self, trade: TradeRecord, offer: Offer) -> None:
+        offer_name: bytes32 = offer.name()
         await self.trade_store.add_trade_record(trade, offer_name)
+
+        # We want to subscribe to the coin IDs of all coins that are not the ephemeral offer coins
+        offered_coins: Set[Coin] = set([value for values in offer.get_offered_coins().values() for value in values])
+        non_offer_additions: Set[Coin] = set(offer.additions()) ^ offered_coins
+        non_offer_removals: Set[Coin] = set(offer.removals()) ^ offered_coins
+        await self.wallet_state_manager.add_interested_coin_ids(
+            [coin.name() for coin in (*non_offer_removals, *non_offer_additions)]
+        )
+
         self.wallet_state_manager.state_changed("offer_added")
 
     async def create_offer_for_ids(
         self,
         offer: Dict[Union[int, bytes32], int],
         driver_dict: Optional[Dict[bytes32, PuzzleInfo]] = None,
         solver: Optional[Solver] = None,
@@ -434,15 +444,15 @@
             coins_of_interest=created_offer.get_involved_coins(),
             trade_id=created_offer.name(),
             status=uint32(TradeStatus.PENDING_ACCEPT.value),
             sent_to=[],
         )
 
         if success is True and trade_offer is not None and not validate_only:
-            await self.save_trade(trade_offer, created_offer.name())
+            await self.save_trade(trade_offer, created_offer)
 
         return success, trade_offer, error
 
     async def _create_offer_for_ids(
         self,
         offer_dict: Dict[Union[int, bytes32], int],
         driver_dict: Optional[Dict[bytes32, PuzzleInfo]] = None,
@@ -797,28 +807,28 @@
             taken_offer=bytes(offer),
             coins_of_interest=complete_offer.get_involved_coins(),
             trade_id=complete_offer.name(),
             status=uint32(TradeStatus.PENDING_CONFIRM.value),
             sent_to=[],
         )
 
-        await self.save_trade(trade_record, offer.name())
+        await self.save_trade(trade_record, offer)
 
         # Dummy transaction for the sake of the wallet push
         push_tx = TransactionRecord(
             confirmed_at_height=uint32(0),
             created_at_time=uint64(int(time.time())),
             to_puzzle_hash=bytes32([1] * 32),
             amount=uint64(0),
             fee_amount=uint64(0),
             confirmed=False,
             sent=uint32(0),
             spend_bundle=final_spend_bundle,
-            additions=[],
-            removals=[],
+            additions=final_spend_bundle.additions(),
+            removals=final_spend_bundle.removals(),
             wallet_id=uint32(0),
             sent_to=[],
             trade_id=bytes32([1] * 32),
             type=uint32(TransactionType.OUTGOING_TRADE.value),
             name=final_spend_bundle.name(),
             memos=[],
         )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/trade_record.py` & `chia-blockchain-2.0.0b3/chia/wallet/trade_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/trading/offer.py` & `chia-blockchain-2.0.0b3/chia/wallet/trading/offer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/trading/trade_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/trading/trade_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/transaction_record.py` & `chia-blockchain-2.0.0b3/chia/wallet/transaction_record.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/address_type.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/address_type.py`

 * *Files 4% similar despite different names*

```diff
@@ -12,15 +12,15 @@
     NFT = "nft"
     DID = "did:chia:"
 
     def hrp(self, config: Dict[str, Any]) -> str:
         if self == AddressType.XCH:
             # Special case to map XCH to the current network's address prefix
             return selected_network_address_prefix(config)
-        return self.value
+        return str(self.value)
 
     def expected_decoded_length(self) -> int:
         # Current address types encode 32 bytes. If future address types vary in
         # their length, this will need to be updated.
         return 32
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/compute_hints.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/compute_hints.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/compute_memos.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/compute_memos.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/curry_and_treehash.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/curry_and_treehash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/debug_spend_bundle.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/debug_spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/json_clvm_utils.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/json_clvm_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/merkle_tree.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/merkle_tree.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/merkle_utils.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/merkle_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/new_peak_queue.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/new_peak_queue.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/peer_request_cache.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/peer_request_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/puzzle_compression.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/puzzle_compression.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 from __future__ import annotations
 
 import zlib
 from typing import List
 
 from chia.types.blockchain_format.program import Program
+from chia.wallet.cat_wallet.cat_utils import CAT_MOD
 from chia.wallet.nft_wallet.nft_puzzles import (
     NFT_METADATA_UPDATER,
     NFT_OWNERSHIP_LAYER,
     NFT_STATE_LAYER_MOD,
     NFT_TRANSFER_PROGRAM_DEFAULT,
     SINGLETON_TOP_LAYER_MOD,
 )
 from chia.wallet.puzzles import p2_delegated_puzzle_or_hidden_puzzle as standard_puzzle
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.puzzles.load_clvm import load_clvm_maybe_recompile
 
 # Need the legacy CAT mod for zlib backwards compatibility
 LEGACY_CAT_MOD = Program.fromhex(
     "ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff2cff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff0bff82027fff82057fff820b7f80ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff81ca3dff46ff0233ffff3c04ff01ff0181cbffffff02ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff22ffff0bff2cff3480ffff0bff22ffff0bff22ffff0bff2cff5c80ff0980ffff0bff22ff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff26ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ffff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff7880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff7affff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff5affff04ff02ffff04ffff02ffff03ffff09ff11ff7880ffff01ff04ff78ffff04ffff02ff36ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff2cff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff2480ffff01ff04ff24ffff04ffff0bff20ff2980ff398080ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff7880ffff0159ff8080ff0180ffff04ffff02ff7affff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffffff02ffff03ff05ffff01ff04ff09ffff02ff26ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff22ffff0bff2cff5880ffff0bff22ffff0bff22ffff0bff2cff5c80ff0580ffff0bff22ffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bff2cff058080ff0180ffff04ffff04ff28ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff7affff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff0bff8204ffffff02ff36ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff2cff2d80ffff04ff15ff80808080808080ff8216ff80ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff2affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff0bff27ffff02ff36ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff2cff81b980ffff04ff59ff80808080808080ff81b78080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff24ffff04ffff0bff7cff2fff82017f80ff808080ffff04ffff04ff30ffff04ffff0bff81bfffff0bff7cff15ffff10ff82017fffff11ff8202dfff2b80ff8202ff808080ff808080ff138080ff80808080808080808080ff018080"  # noqa
 )
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/wallet_sync_utils.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/wallet_sync_utils.py`

 * *Files 3% similar despite different names*

```diff
@@ -314,14 +314,25 @@
     if cs.created_height is not None:
         return uint32(cs.created_height)
 
     # Reorgs should be processed at the beginning
     return uint32(0)
 
 
+def sort_coin_states(coin_states: List[CoinState]) -> List[CoinState]:
+    return sorted(
+        coin_states,
+        key=lambda coin_state: (
+            last_change_height_cs(coin_state),
+            0 if coin_state.created_height is None else coin_state.created_height,
+            0 if coin_state.spent_height is None else coin_state.spent_height,
+        ),
+    )
+
+
 def get_block_header(block: FullBlock) -> HeaderBlock:
     return HeaderBlock(
         block.finished_sub_slots,
         block.reward_chain_block,
         block.challenge_chain_sp_proof,
         block.challenge_chain_ip_proof,
         block.reward_chain_sp_proof,
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/util/wallet_types.py` & `chia-blockchain-2.0.0b3/chia/wallet/util/wallet_types.py`

 * *Files 4% similar despite different names*

```diff
@@ -21,21 +21,28 @@
     CAT = 6
     RECOVERABLE = 7
     DECENTRALIZED_ID = 8
     POOLING_WALLET = 9
     NFT = 10
     DATA_LAYER = 11
     DATA_LAYER_OFFER = 12
+    VC = 13
 
 
 class CoinType(IntEnum):
     NORMAL = 0
     CLAWBACK = 1
 
 
+class RemarkDataType(IntEnum):
+    NORMAL = 0
+    CUSTODY = 1
+    CLAWBACK = 2
+
+
 @dataclass(frozen=True)
 class WalletIdentifier:
     id: uint32
     type: WalletType
 
     @classmethod
     def create(cls, wallet: WalletProtocol) -> WalletIdentifier:
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 from __future__ import annotations
 
 import logging
 import time
 from typing import TYPE_CHECKING, Any, ClassVar, Dict, List, Optional, Set, Tuple, cast
 
 from blspy import AugSchemeMPL, G1Element, G2Element
+from typing_extensions import Unpack
 
 from chia.consensus.cost_calculator import NPCResult
 from chia.full_node.bundle_tools import simple_solution_generator
 from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions
 from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
@@ -26,60 +27,59 @@
     DEFAULT_HIDDEN_PUZZLE_HASH,
     calculate_synthetic_secret_key,
     puzzle_for_pk,
     puzzle_hash_for_pk,
     solution_for_conditions,
 )
 from chia.wallet.puzzles.puzzle_utils import (
-    make_assert_absolute_seconds_exceeds_condition,
     make_assert_coin_announcement,
-    make_assert_my_coin_id_condition,
     make_assert_puzzle_announcement,
     make_create_coin_announcement,
     make_create_coin_condition,
     make_create_puzzle_announcement,
     make_reserve_fee_condition,
 )
 from chia.wallet.secret_key_store import SecretKeyStore
 from chia.wallet.sign_coin_spends import sign_coin_spends
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.compute_memos import compute_memos
+from chia.wallet.util.puzzle_decorator import PuzzleDecoratorManager
 from chia.wallet.util.transaction_type import TransactionType
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet_coin_record import WalletCoinRecord
 from chia.wallet.wallet_info import WalletInfo
+from chia.wallet.wallet_protocol import GSTOptionalArgs, WalletProtocol
 
 if TYPE_CHECKING:
     from chia.server.ws_connection import WSChiaConnection
+    from chia.wallet.wallet_state_manager import WalletStateManager
 
 # https://github.com/Chia-Network/chips/blob/80e4611fe52b174bf1a0382b9dff73805b18b8c6/CHIPs/chip-0002.md#signmessage
 CHIP_0002_SIGN_MESSAGE_PREFIX = "Chia Signed Message"
 
 
 class Wallet:
     if TYPE_CHECKING:
-        from chia.wallet.wallet_protocol import WalletProtocol
-
         _protocol_check: ClassVar[WalletProtocol] = cast("Wallet", None)
 
     wallet_info: WalletInfo
-    wallet_state_manager: Any
+    wallet_state_manager: WalletStateManager
     log: logging.Logger
     wallet_id: uint32
     secret_key_store: SecretKeyStore
     cost_of_single_tx: Optional[int]
 
     @staticmethod
     async def create(
         wallet_state_manager: Any,
         info: WalletInfo,
-        name: str = None,
-    ):
+        name: str = __name__,
+    ) -> Wallet:
         self = Wallet()
-        self.log = logging.getLogger(name if name else __name__)
+        self.log = logging.getLogger(name)
         self.wallet_state_manager = wallet_state_manager
         self.wallet_id = info.id
         self.secret_key_store = SecretKeyStore()
         self.cost_of_single_tx = None
         return self
 
     async def get_max_send_amount(self, records: Optional[Set[WalletCoinRecord]] = None) -> uint128:
@@ -176,28 +176,19 @@
     def puzzle_hash_for_pk(self, pubkey: G1Element) -> bytes32:
         return puzzle_hash_for_pk(pubkey)
 
     async def convert_puzzle_hash(self, puzzle_hash: bytes32) -> bytes32:
         return puzzle_hash  # Looks unimpressive, but it's more complicated in other wallets
 
     async def hack_populate_secret_key_for_puzzle_hash(self, puzzle_hash: bytes32) -> G1Element:
-        maybe = await self.wallet_state_manager.get_keys(puzzle_hash)
-        if maybe is None:
-            error_msg = f"Wallet couldn't find keys for puzzle_hash {puzzle_hash}"
-            self.log.error(error_msg)
-            raise ValueError(error_msg)
-
-        # Get puzzle for pubkey
-        public_key, secret_key = maybe
-
+        secret_key = await self.wallet_state_manager.get_private_key(puzzle_hash)
         # HACK
         synthetic_secret_key = calculate_synthetic_secret_key(secret_key, DEFAULT_HIDDEN_PUZZLE_HASH)
         self.secret_key_store.save_secret_key(synthetic_secret_key)
-
-        return public_key
+        return secret_key.get_g1()
 
     async def hack_populate_secret_keys_for_coin_spends(self, coin_spends: List[CoinSpend]) -> None:
         """
         This hack forces secret keys into the `_pk2sk` lookup. This should eventually be replaced
         by a persistent DB table that can do this look-up directly.
         """
         for coin_spend in coin_spends:
@@ -228,51 +219,48 @@
         puzhash = (await self.wallet_state_manager.get_unused_derivation_record(self.id())).puzzle_hash
         await self.hack_populate_secret_key_for_puzzle_hash(puzhash)
         return puzhash
 
     def make_solution(
         self,
         primaries: List[Payment],
-        min_time=0,
-        me=None,
         coin_announcements: Optional[Set[bytes]] = None,
         coin_announcements_to_assert: Optional[Set[bytes32]] = None,
         puzzle_announcements: Optional[Set[bytes]] = None,
         puzzle_announcements_to_assert: Optional[Set[bytes32]] = None,
-        fee=0,
+        magic_conditions: Optional[List[Any]] = None,
+        fee: uint64 = uint64(0),
     ) -> Program:
         assert fee >= 0
         condition_list = []
         if len(primaries) > 0:
             for primary in primaries:
                 condition_list.append(make_create_coin_condition(primary.puzzle_hash, primary.amount, primary.memos))
-        if min_time > 0:
-            condition_list.append(make_assert_absolute_seconds_exceeds_condition(min_time))
-        if me:
-            condition_list.append(make_assert_my_coin_id_condition(me["id"]))
         if fee:
             condition_list.append(make_reserve_fee_condition(fee))
         if coin_announcements:
             for announcement in coin_announcements:
                 condition_list.append(make_create_coin_announcement(announcement))
         if coin_announcements_to_assert:
             for announcement_hash in coin_announcements_to_assert:
                 condition_list.append(make_assert_coin_announcement(announcement_hash))
         if puzzle_announcements:
             for announcement in puzzle_announcements:
                 condition_list.append(make_create_puzzle_announcement(announcement))
         if puzzle_announcements_to_assert:
             for announcement_hash in puzzle_announcements_to_assert:
                 condition_list.append(make_assert_puzzle_announcement(announcement_hash))
+        if magic_conditions is not None:
+            condition_list.extend(magic_conditions)
         return solution_for_conditions(condition_list)
 
     def add_condition_to_solution(self, condition: Program, solution: Program) -> Program:
         python_program = solution.as_python()
         python_program[1].append(condition)
-        return Program.to(python_program)
+        return cast(Program, Program.to(python_program))
 
     async def select_coins(
         self,
         amount: uint64,
         exclude: Optional[List[Coin]] = None,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
@@ -309,39 +297,43 @@
         return coins
 
     async def _generate_unsigned_transaction(
         self,
         amount: uint64,
         newpuzzlehash: bytes32,
         fee: uint64 = uint64(0),
-        origin_id: bytes32 = None,
-        coins: Set[Coin] = None,
+        origin_id: Optional[bytes32] = None,
+        coins: Optional[Set[Coin]] = None,
         primaries_input: Optional[List[Payment]] = None,
         ignore_max_send_amount: bool = False,
-        coin_announcements_to_consume: Set[Announcement] = None,
-        puzzle_announcements_to_consume: Set[Announcement] = None,
+        coin_announcements_to_consume: Optional[Set[Announcement]] = None,
+        puzzle_announcements_to_consume: Optional[Set[Announcement]] = None,
         memos: Optional[List[bytes]] = None,
         negative_change_allowed: bool = False,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
-        exclude_coin_amounts: Optional[List[uint64]] = None,
-        exclude_coins: Optional[Set[Coin]] = None,
+        excluded_coin_amounts: Optional[List[uint64]] = None,
+        excluded_coins: Optional[Set[Coin]] = None,
+        puzzle_decorator_override: Optional[List[Dict[str, Any]]] = None,
         reuse_puzhash: Optional[bool] = None,
     ) -> List[CoinSpend]:
         """
         Generates a unsigned transaction in form of List(Puzzle, Solutions)
         Note: this must be called under a wallet state manager lock
         """
+        decorator_manager: PuzzleDecoratorManager = self.wallet_state_manager.decorator_manager
+        if puzzle_decorator_override is not None:
+            decorator_manager = PuzzleDecoratorManager.create(puzzle_decorator_override)
+
         primaries = []
-        if (primaries_input is None and amount > 0) or primaries_input is not None:
-            primaries.append(Payment(newpuzzlehash, amount, [] if memos is None else memos))
         if primaries_input is not None:
             primaries.extend(primaries_input)
 
-        total_amount = sum(primary.amount for primary in primaries) + fee
+        total_amount = amount + sum(primary.amount for primary in primaries) + fee
+
         if reuse_puzhash is None:
             reuse_puzhash_config = self.wallet_state_manager.config.get("reuse_public_key_for_change", None)
             if reuse_puzhash_config is None:
                 reuse_puzhash = False
             else:
                 reuse_puzhash = reuse_puzhash_config.get(
                     str(self.wallet_state_manager.wallet_node.logged_in_fingerprint), False
@@ -353,25 +345,25 @@
                 raise ValueError(f"Can't send more than {max_send} mojos in a single transaction, got {total_amount}")
             self.log.debug("Got back max send amount: %s", max_send)
         if coins is None:
             if total_amount > total_balance:
                 raise ValueError(
                     f"Can't spend more than wallet balance: {total_balance} mojos, tried to spend: {total_amount} mojos"
                 )
-            exclude_coins_list: Optional[List[Coin]] = None
-            if exclude_coins is not None:
-                exclude_coins_list = list(exclude_coins)
+            excluded_coins_list: Optional[List[Coin]] = None
+            if excluded_coins is not None:
+                excluded_coins_list = list(excluded_coins)
             coins = await self.select_coins(
                 uint64(total_amount),
                 min_coin_amount=min_coin_amount,
                 max_coin_amount=max_coin_amount,
-                excluded_coin_amounts=exclude_coin_amounts,
-                exclude=exclude_coins_list,
+                excluded_coin_amounts=excluded_coin_amounts,
+                exclude=excluded_coins_list,
             )
-        elif exclude_coins is not None:
+        elif excluded_coins is not None:
             raise ValueError("Can't exclude coins when also specifically including coins")
 
         assert len(coins) > 0
         self.log.info(f"coins is not None {coins}")
         spend_value = sum([coin.amount for coin in coins])
         self.log.info(f"spend_value is {spend_value} and total_amount is {total_amount}")
         change = spend_value - total_amount
@@ -396,14 +388,27 @@
         all_primaries_list = [(p.puzzle_hash, p.amount) for p in primaries]
         if len(set(all_primaries_list)) != len(all_primaries_list):
             raise ValueError("Cannot create two identical coins")
         for coin in coins:
             # Only one coin creates outputs
             if origin_id in (None, coin.name()):
                 origin_id = coin.name()
+                public_key = await self.hack_populate_secret_key_for_puzzle_hash(coin.puzzle_hash)
+                inner_puzzle = puzzle_for_pk(public_key)
+                decorated_target_puzzle_hash = decorator_manager.decorate_target_puzzle_hash(
+                    inner_puzzle, newpuzzlehash
+                )
+                target_primary: List[Payment] = []
+                if memos is None:
+                    memos = []
+                memos = decorator_manager.decorate_memos(inner_puzzle, newpuzzlehash, memos)
+                if (primaries_input is None and amount > 0) or primaries_input is not None:
+                    primaries.append(Payment(decorated_target_puzzle_hash, amount, memos))
+                    target_primary.append(Payment(newpuzzlehash, amount, memos))
+
                 if change > 0:
                     if reuse_puzhash:
                         change_puzzle_hash: bytes32 = coin.puzzle_hash
                         for primary in primaries:
                             if change_puzzle_hash == primary.puzzle_hash and change == primary.amount:
                                 # We cannot create two coins has same id, create a new puzhash for the change:
                                 change_puzzle_hash = await self.get_new_puzzlehash()
@@ -419,14 +424,15 @@
                 solution: Program = self.make_solution(
                     primaries=primaries,
                     fee=fee,
                     coin_announcements={message},
                     coin_announcements_to_assert=coin_announcements_bytes,
                     puzzle_announcements_to_assert=puzzle_announcements_bytes,
                 )
+                solution = decorator_manager.solve(inner_puzzle, target_primary, solution)
                 primary_announcement_hash = Announcement(coin.name(), message).name()
 
                 spends.append(
                     CoinSpend(
                         coin, SerializedProgram.from_bytes(bytes(puzzle)), SerializedProgram.from_bytes(bytes(solution))
                     )
                 )
@@ -434,17 +440,19 @@
         else:
             raise ValueError("origin_id is not in the set of selected coins")
 
         # Process the non-origin coins now that we have the primary announcement hash
         for coin in coins:
             if coin.name() == origin_id:
                 continue
-
+            public_key = await self.hack_populate_secret_key_for_puzzle_hash(coin.puzzle_hash)
+            inner_puzzle = puzzle_for_pk(public_key)
             puzzle = await self.puzzle_for_puzzle_hash(coin.puzzle_hash)
             solution = self.make_solution(primaries=[], coin_announcements_to_assert={primary_announcement_hash})
+            solution = decorator_manager.solve(inner_puzzle, [], solution)
             spends.append(
                 CoinSpend(
                     coin, SerializedProgram.from_bytes(bytes(puzzle)), SerializedProgram.from_bytes(bytes(solution))
                 )
             )
 
         self.log.debug(f"Spends is {spends}")
@@ -459,42 +467,44 @@
         )
 
     async def sign_message(
         self, message: str, puzzle_hash: bytes32, is_hex: bool = False
     ) -> Tuple[G1Element, G2Element]:
         # CHIP-0002 message signing as documented at:
         # https://github.com/Chia-Network/chips/blob/80e4611fe52b174bf1a0382b9dff73805b18b8c6/CHIPs/chip-0002.md#signmessage
-        pubkey, private = await self.wallet_state_manager.get_keys(puzzle_hash)
+        private = await self.wallet_state_manager.get_private_key(puzzle_hash)
         synthetic_secret_key = calculate_synthetic_secret_key(private, DEFAULT_HIDDEN_PUZZLE_HASH)
         synthetic_pk = synthetic_secret_key.get_g1()
         if is_hex:
             puzzle: Program = Program.to((CHIP_0002_SIGN_MESSAGE_PREFIX, bytes.fromhex(message)))
         else:
             puzzle = Program.to((CHIP_0002_SIGN_MESSAGE_PREFIX, message))
         return synthetic_pk, AugSchemeMPL.sign(synthetic_secret_key, puzzle.get_tree_hash())
 
     async def generate_signed_transaction(
         self,
         amount: uint64,
         puzzle_hash: bytes32,
         fee: uint64 = uint64(0),
-        origin_id: bytes32 = None,
-        coins: Set[Coin] = None,
+        coins: Optional[Set[Coin]] = None,
         primaries: Optional[List[Payment]] = None,
         ignore_max_send_amount: bool = False,
-        coin_announcements_to_consume: Set[Announcement] = None,
-        puzzle_announcements_to_consume: Set[Announcement] = None,
+        coin_announcements_to_consume: Optional[Set[Announcement]] = None,
+        puzzle_announcements_to_consume: Optional[Set[Announcement]] = None,
         memos: Optional[List[bytes]] = None,
-        negative_change_allowed: bool = False,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
-        exclude_coin_amounts: Optional[List[uint64]] = None,
-        exclude_coins: Optional[Set[Coin]] = None,
+        excluded_coin_amounts: Optional[List[uint64]] = None,
+        excluded_coins: Optional[Set[Coin]] = None,
+        puzzle_decorator_override: Optional[List[Dict[str, Any]]] = None,
         reuse_puzhash: Optional[bool] = None,
+        **kwargs: Unpack[GSTOptionalArgs],
     ) -> TransactionRecord:
+        origin_id: Optional[bytes32] = kwargs.get("origin_id", None)
+        negative_change_allowed: bool = kwargs.get("negative_change_allowed", False)
         """
         Use this to generate transaction.
         Note: this must be called under a wallet state manager lock
         The first output is (amount, puzzle_hash, memos), and the rest of the outputs are in primaries.
         """
         if primaries is None:
             non_change_amount = amount
@@ -512,16 +522,17 @@
             ignore_max_send_amount,
             coin_announcements_to_consume,
             puzzle_announcements_to_consume,
             memos,
             negative_change_allowed,
             min_coin_amount=min_coin_amount,
             max_coin_amount=max_coin_amount,
-            exclude_coin_amounts=exclude_coin_amounts,
-            exclude_coins=exclude_coins,
+            excluded_coin_amounts=excluded_coin_amounts,
+            excluded_coins=excluded_coins,
+            puzzle_decorator_override=puzzle_decorator_override,
             reuse_puzhash=reuse_puzhash,
         )
         assert len(transaction) > 0
         self.log.info("About to sign a transaction: %s", transaction)
         await self.hack_populate_secret_keys_for_coin_spends(transaction)
         spend_bundle: SpendBundle = await sign_coin_spends(
             transaction,
@@ -596,15 +607,15 @@
         asset_id: Optional[bytes32],
         amount: uint64,
         min_coin_amount: Optional[uint64] = None,
         max_coin_amount: Optional[uint64] = None,
     ) -> Set[Coin]:
         if asset_id is not None:
             raise ValueError(f"The standard wallet cannot offer coins with asset id {asset_id}")
-        balance = await self.get_confirmed_balance()
+        balance = await self.get_spendable_balance()
         if balance < amount:
             raise Exception(f"insufficient funds in wallet {self.id()}")
         return await self.select_coins(amount, min_coin_amount=min_coin_amount, max_coin_amount=max_coin_amount)
 
     # WSChiaConnection is only imported for type checking
     async def coin_added(
         self, coin: Coin, height: uint32, peer: WSChiaConnection
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_blockchain.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_coin_record.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_coin_record.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,20 +1,22 @@
 from __future__ import annotations
 
 from dataclasses import dataclass, field
-from typing import Any, Dict, Optional
+from typing import Any, Dict, Optional, Union
 
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
 from chia.util.ints import uint8, uint32, uint64
 from chia.util.misc import VersionedBlob
-from chia.util.streamable import Streamable
+from chia.wallet.puzzles.clawback.metadata import ClawbackMetadata, ClawbackVersion
 from chia.wallet.util.wallet_types import CoinType, StreamableWalletIdentifier, WalletType
 
+MetadataTypes = Union[ClawbackMetadata]
+
 
 @dataclass(frozen=True)
 class WalletCoinRecord:
     """
     These are values that correspond to a CoinName that are used
     in keeping track of the unspent database.
     """
@@ -31,22 +33,21 @@
     # TODO Change hardcode offer in unit tests
     coin_type: CoinType = field(default=CoinType.NORMAL, hash=False)
     metadata: Optional[VersionedBlob] = field(default=None, hash=False)
 
     def wallet_identifier(self) -> StreamableWalletIdentifier:
         return StreamableWalletIdentifier(uint32(self.wallet_id), uint8(self.wallet_type))
 
-    def parsed_metadata(self) -> Streamable:
+    def parsed_metadata(self) -> MetadataTypes:
         if self.metadata is None:
             raise ValueError("Can't parse None metadata")
-        if self.coin_type == CoinType.CLAWBACK:
-            #  TODO: Parse proper clawback metadata here when its introduced
-            return self.metadata
-        else:
-            raise ValueError(f"Unknown metadata {self.metadata} for coin_type {self.coin_type}")
+        if self.coin_type == CoinType.CLAWBACK and self.metadata.version == ClawbackVersion.V1.value:
+            return ClawbackMetadata.from_bytes(self.metadata.blob)
+
+        raise ValueError(f"Unknown metadata {self.metadata} for coin_type {self.coin_type}")
 
     def name(self) -> bytes32:
         return self.coin.name()
 
     def to_coin_record(self, timestamp: uint64) -> CoinRecord:
         return CoinRecord(self.coin, self.confirmed_block_height, self.spent_block_height, self.coinbase, timestamp)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_coin_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_coin_store.py`

 * *Files 6% similar despite different names*

```diff
@@ -9,63 +9,31 @@
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.db_wrapper import DBWrapper2, execute_fetchone
 from chia.util.hash import std_hash
 from chia.util.ints import uint8, uint32, uint64
 from chia.util.lru_cache import LRUCache
 from chia.util.misc import UInt32Range, UInt64Range, VersionedBlob
 from chia.util.streamable import Streamable, streamable
+from chia.wallet.util.query_filter import AmountFilter, FilterMode, HashFilter
 from chia.wallet.util.wallet_types import CoinType, WalletType
 from chia.wallet.wallet_coin_record import WalletCoinRecord
 
-
-class FilterMode(IntEnum):
-    include = 1
-    exclude = 2
-
-
-@streamable
-@dataclass(frozen=True)
-class AmountFilter(Streamable):
-    values: List[uint64]
-    mode: uint8  # FilterMode
-
-    @classmethod
-    def include(cls, values: List[uint64]):
-        return cls(values, mode=uint8(FilterMode.include))
-
-    @classmethod
-    def exclude(cls, values: List[uint64]):
-        return cls(values, mode=uint8(FilterMode.exclude))
-
-
-@streamable
-@dataclass(frozen=True)
-class HashFilter(Streamable):
-    values: List[bytes32]
-    mode: uint8  # FilterMode
-
-    @classmethod
-    def include(cls, values: List[bytes32]):
-        return cls(values, mode=uint8(FilterMode.include))
-
-    @classmethod
-    def exclude(cls, values: List[bytes32]):
-        return cls(values, mode=uint8(FilterMode.exclude))
+unspent_range = UInt32Range(stop=uint32(0))
 
 
 class CoinRecordOrder(IntEnum):
     confirmed_height = 1
     spent_height = 2
 
 
 @streamable
 @dataclass(frozen=True)
 class GetCoinRecords(Streamable):
     offset: uint32 = uint32(0)
-    limit: uint32 = uint32(uint32.MAXIMUM_EXCLUSIVE - 1)
+    limit: uint32 = uint32.MAXIMUM
     wallet_id: Optional[uint32] = None
     wallet_type: Optional[uint8] = None  # WalletType
     coin_type: Optional[uint8] = None  # CoinType
     coin_id_filter: Optional[HashFilter] = None
     puzzle_hash_filter: Optional[HashFilter] = None
     parent_coin_id_filter: Optional[HashFilter] = None
     amount_filter: Optional[AmountFilter] = None
@@ -216,15 +184,15 @@
             return None
         return self.coin_record_from_row(rows[0])
 
     async def get_coin_records(
         self,
         *,
         offset: uint32 = uint32(0),
-        limit: uint32 = uint32(uint32.MAXIMUM_EXCLUSIVE - 1),
+        limit: uint32 = uint32.MAXIMUM,
         wallet_id: Optional[uint32] = None,
         wallet_type: Optional[WalletType] = None,
         coin_type: Optional[CoinType] = None,
         coin_id_filter: Optional[HashFilter] = None,
         puzzle_hash_filter: Optional[HashFilter] = None,
         parent_coin_id_filter: Optional[HashFilter] = None,
         amount_filter: Optional[AmountFilter] = None,
@@ -265,15 +233,15 @@
         if amount_range is not None and amount_range != UInt64Range():
             conditions.append(
                 f"amount BETWEEN X'{bytes(amount_range.start).hex()}' AND X'{bytes(amount_range.stop).hex()}'"
             )
 
         where_sql = "WHERE " + " AND ".join(conditions) if len(conditions) > 0 else ""
         order_sql = f"ORDER BY {order.name} {'DESC' if reverse else 'ASC'}, rowid"
-        limit_sql = f"LIMIT {offset}, {limit}" if offset > 0 or limit < uint32.MAXIMUM_EXCLUSIVE - 1 else ""
+        limit_sql = f"LIMIT {offset}, {limit}" if offset > 0 or limit < uint32.MAXIMUM else ""
         query_sql = f"{where_sql} {order_sql} {limit_sql}"
 
         async with self.db_wrapper.reader_no_transaction() as conn:
             rows = await conn.execute_fetchall(f"SELECT * FROM coin_record {query_sql}")
 
             total_count = None
             if include_total_count:
@@ -372,7 +340,13 @@
             await (
                 await conn.execute(
                     "UPDATE coin_record SET spent_height = 0, spent = 0 WHERE spent_height>?",
                     (height,),
                 )
             ).close()
         self.total_count_cache.cache.clear()
+
+    async def delete_wallet(self, wallet_id: uint32) -> None:
+        async with self.db_wrapper.writer_maybe_transaction() as conn:
+            cursor = await conn.execute("DELETE FROM coin_record WHERE wallet_id=?", (wallet_id,))
+            await cursor.close()
+        self.total_count_cache.cache.clear()
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_info.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_info.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_nft_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_nft_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_node.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_node.py`

 * *Files 2% similar despite different names*

```diff
@@ -41,39 +41,40 @@
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.header_block import HeaderBlock
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.types.spend_bundle import SpendBundle
 from chia.types.weight_proof import WeightProof
-from chia.util.chunks import chunks
 from chia.util.config import (
     WALLET_PEERS_PATH_KEY_DEPRECATED,
     lock_and_load_config,
     process_config_start_method,
     save_config,
 )
 from chia.util.db_wrapper import manage_connection
 from chia.util.errors import KeychainIsEmpty, KeychainIsLocked, KeychainKeyNotFound, KeychainProxyConnectionFailure
-from chia.util.ints import uint32, uint64, uint128
+from chia.util.ints import uint16, uint32, uint64, uint128
 from chia.util.keychain import Keychain
+from chia.util.misc import to_batches
 from chia.util.path import path_from_root
 from chia.util.profiler import mem_profile_task, profile_task
 from chia.util.streamable import Streamable, streamable
+from chia.wallet.puzzles.clawback.metadata import AutoClaimSettings
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.new_peak_queue import NewPeakItem, NewPeakQueue, NewPeakQueueTypes
 from chia.wallet.util.peer_request_cache import PeerRequestCache, can_use_peer_request_cache
 from chia.wallet.util.wallet_sync_utils import (
     PeerRequestException,
     fetch_header_blocks_in_range,
     fetch_last_tx_from_peer,
-    last_change_height_cs,
     request_and_validate_additions,
     request_and_validate_removals,
     request_header_blocks,
+    sort_coin_states,
     subscribe_to_coin_updates,
     subscribe_to_phs,
 )
 from chia.wallet.wallet_state_manager import WalletStateManager
 from chia.wallet.wallet_weight_proof_handler import WalletWeightProofHandler, get_wp_fork_point
 
 
@@ -102,14 +103,20 @@
     spendable_balance: uint128 = uint128(0)
     pending_change: uint64 = uint64(0)
     max_send_amount: uint128 = uint128(0)
     unspent_coin_count: uint32 = uint32(0)
     pending_coin_removal_count: uint32 = uint32(0)
 
 
+@dataclasses.dataclass(frozen=True)
+class PeerPeak:
+    height: uint32
+    hash: bytes32
+
+
 @dataclasses.dataclass
 class WalletNode:
     config: Dict[str, Any]
     root_path: Path
     constants: ConsensusConstants
     local_keychain: Optional[Keychain] = None
 
@@ -128,15 +135,15 @@
     # Peers that we have long synced to
     synced_peers: Set[bytes32] = dataclasses.field(default_factory=set)
     wallet_peers: Optional[WalletPeers] = None
     peer_caches: Dict[bytes32, PeerRequestCache] = dataclasses.field(default_factory=dict)
     # in Untrusted mode wallet might get the state update before receiving the block
     race_cache: Dict[bytes32, Set[CoinState]] = dataclasses.field(default_factory=dict)
     race_cache_hashes: List[Tuple[uint32, bytes32]] = dataclasses.field(default_factory=list)
-    node_peaks: Dict[bytes32, Tuple[uint32, bytes32]] = dataclasses.field(default_factory=dict)
+    node_peaks: Dict[bytes32, PeerPeak] = dataclasses.field(default_factory=dict)
     validation_semaphore: Optional[asyncio.Semaphore] = None
     local_node_synced: bool = False
     LONG_SYNC_THRESHOLD: int = 300
     last_wallet_tx_resend_time: int = 0
     # Duration in seconds
     coin_state_retry_seconds: int = 10
     wallet_tx_resend_timeout_secs: int = 1800
@@ -252,14 +259,27 @@
                     "Trying to disable resync: %s [%s]", fingerprint, config["wallet"].get("reset_sync_for_fingerprint")
                 )
                 if config["wallet"].get("reset_sync_for_fingerprint") == fingerprint:
                     del config["wallet"]["reset_sync_for_fingerprint"]
                     self.log.info("Disabled resync for wallet fingerprint: %s", fingerprint)
             save_config(self.root_path, "config.yaml", config)
 
+    def set_auto_claim(self, auto_claim_config: AutoClaimSettings) -> Dict[str, Any]:
+        if auto_claim_config.batch_size < 1:
+            auto_claim_config = dataclasses.replace(auto_claim_config, batch_size=uint16(50))
+        auto_claim_config_json = auto_claim_config.to_json_dict()
+        if "auto_claim" not in self.config or self.config["auto_claim"] != auto_claim_config_json:
+            # Update in memory config
+            self.config["auto_claim"] = auto_claim_config_json
+            # Update config file
+            with lock_and_load_config(self.root_path, "config.yaml") as config:
+                config["wallet"]["auto_claim"] = self.config["auto_claim"]
+                save_config(self.root_path, "config.yaml", config)
+        return auto_claim_config.to_json_dict()
+
     async def reset_sync_db(self, db_path: Union[Path, str], fingerprint: int) -> bool:
         conn: aiosqlite.Connection
         # are not part of core wallet tables, but might appear later
         ignore_tables = {"lineage_proofs_", "sqlite_"}
         required_tables = [
             "coin_record",
             "transaction_record",
@@ -276,14 +296,17 @@
             "launchers",
             "interested_coins",
             "interested_puzzle_hashes",
             "unacknowledged_asset_tokens",
             "coin_of_interest_to_trade_record",
             "notifications",
             "retry_store",
+            "unacknowledged_asset_token_states",
+            "vc_records",
+            "vc_proofs",
         ]
 
         async with manage_connection(db_path) as conn:
             self.log.info("Resetting wallet sync data...")
             rows = list(await conn.execute_fetchall("SELECT name FROM sqlite_master WHERE type='table'"))
             names = set([x[0] for x in rows])
             names = names - set(required_tables)
@@ -373,17 +396,14 @@
             path,
             self.constants,
             self.server,
             self.root_path,
             self,
         )
 
-        if self.wallet_peers is None:
-            self.initialize_wallet_peers()
-
         if self.state_changed_callback is not None:
             self.wallet_state_manager.set_callback(self.state_changed_callback)
 
         self.last_wallet_tx_resend_time = int(time.time())
         self.wallet_tx_resend_timeout_secs = self.config.get("tx_resend_timeout_secs", 60 * 60)
         self.wallet_state_manager.set_pending_callback(self._pending_tx_handler)
         self._shut_down = False
@@ -399,14 +419,18 @@
             for wallet_id in self.wallet_state_manager.wallets:
                 await self._update_balance_cache(wallet_id)
 
         async with self.wallet_state_manager.puzzle_store.lock:
             index = await self.wallet_state_manager.puzzle_store.get_last_derivation_path()
             if index is None or index < self.wallet_state_manager.initial_num_public_keys - 1:
                 await self.wallet_state_manager.create_more_puzzle_hashes(from_zero=True)
+
+        if self.wallet_peers is None:
+            self.initialize_wallet_peers()
+
         return True
 
     def _close(self) -> None:
         self.log.info("self._close")
         self.log_out()
         self._shut_down = True
         if self._weight_proof_handler is not None:
@@ -561,14 +585,17 @@
                     # This can take a VERY long time, because it might trigger a long sync. It is OK if we miss some
                     # subscriptions or state updates, since all subscriptions and state updates will be handled by
                     # long_sync (up to the target height).
                     new_peak = item.data[0]
                     peer = item.data[1]
                     assert peer is not None
                     await self.new_peak_wallet(new_peak, peer)
+                    # Check if any coin needs auto spending
+                    if self.config.get("auto_claim", {}).get("enabled", False):
+                        await self.wallet_state_manager.auto_claim_coins()
                 else:
                     self.log.debug("Pulled from queue: UNKNOWN %s", item.item_type)
                     assert False
             except asyncio.CancelledError:
                 self.log.info("Queue task cancelled, exiting.")
                 raise
             except Exception as e:
@@ -657,15 +684,15 @@
 
         self.wallet_state_manager.state_changed("close_connection")
 
     async def on_connect(self, peer: WSChiaConnection) -> None:
         if self._wallet_state_manager is None:
             return None
 
-        if Version(peer.protocol_version) < Version("0.0.33"):
+        if peer.protocol_version < Version("0.0.33"):
             self.log.info("Disconnecting, full node running old software")
             await peer.close()
 
         trusted = self.is_trusted(peer)
         if not trusted and self.local_node_synced:
             await peer.close()
 
@@ -750,16 +777,16 @@
         already_checked_ph: Set[bytes32] = set()
         while not self._shut_down:
             await self.wallet_state_manager.create_more_puzzle_hashes()
             all_puzzle_hashes = await self.get_puzzle_hashes_to_subscribe()
             not_checked_puzzle_hashes = set(all_puzzle_hashes) - already_checked_ph
             if not_checked_puzzle_hashes == set():
                 break
-            for chunk in chunks(list(not_checked_puzzle_hashes), 1000):
-                ph_update_res: List[CoinState] = await subscribe_to_phs(chunk, full_node, 0)
+            for batch in to_batches(not_checked_puzzle_hashes, 1000):
+                ph_update_res: List[CoinState] = await subscribe_to_phs(batch.entries, full_node, 0)
                 ph_update_res = list(filter(is_new_state_update, ph_update_res))
                 if not await self.add_states_from_peer(ph_update_res, full_node):
                     # If something goes wrong, abort sync
                     return
             already_checked_ph.update(not_checked_puzzle_hashes)
 
         self.log.info(f"Successfully subscribed and updated {len(already_checked_ph)} puzzle hashes")
@@ -768,16 +795,16 @@
         # sync from 0 every time.
         already_checked_coin_ids: Set[bytes32] = set()
         while not self._shut_down:
             all_coin_ids = await self.get_coin_ids_to_subscribe()
             not_checked_coin_ids = set(all_coin_ids) - already_checked_coin_ids
             if not_checked_coin_ids == set():
                 break
-            for chunk in chunks(list(not_checked_coin_ids), 1000):
-                c_update_res: List[CoinState] = await subscribe_to_coin_updates(chunk, full_node, 0)
+            for batch in to_batches(not_checked_coin_ids, 1000):
+                c_update_res: List[CoinState] = await subscribe_to_coin_updates(batch.entries, full_node, 0)
 
                 if not await self.add_states_from_peer(c_update_res, full_node):
                     # If something goes wrong, abort sync
                     return
             already_checked_coin_ids.update(not_checked_coin_ids)
         self.log.info(f"Successfully subscribed and updated {len(already_checked_coin_ids)} coin ids")
 
@@ -836,15 +863,15 @@
 
         all_tasks: List[asyncio.Task[None]] = []
         target_concurrent_tasks: int = 30
 
         # Ensure the list is sorted
 
         before = len(items_input)
-        items = await self.wallet_state_manager.filter_spam(list(sorted(items_input, key=last_change_height_cs)))
+        items = await self.wallet_state_manager.filter_spam(sort_coin_states(items_input))
         num_filtered = before - len(items)
         if num_filtered > 0:
             self.log.info(f"Filtered {num_filtered} spam transactions")
 
         async def validate_and_add(inner_states: List[CoinState], inner_idx_start: int) -> None:
             try:
                 assert self.validation_semaphore is not None
@@ -871,38 +898,38 @@
                 log_level = logging.DEBUG if peer.closed or self._shut_down else logging.ERROR
                 self.log.log(log_level, f"validate_and_add failed - exception: {e}, traceback: {tb}")
 
         idx = 1
         # Keep chunk size below 1000 just in case, windows has sqlite limits of 999 per query
         # Untrusted has a smaller batch size since validation has to happen which takes a while
         chunk_size: int = 900 if trusted else 10
-        for states in chunks(items, chunk_size):
+        for batch in to_batches(items, chunk_size):
             if self._server is None:
                 self.log.error("No server")
                 await asyncio.gather(*all_tasks)
                 return False
             if peer.peer_node_id not in self.server.all_connections:
                 self.log.error(f"Disconnected from peer {peer.peer_node_id} host {peer.peer_info.host}")
                 await asyncio.gather(*all_tasks)
                 return False
             if trusted:
                 async with self.wallet_state_manager.db_wrapper.writer():
-                    self.log.info(f"new coin state received ({idx}-{idx + len(states) - 1}/ {len(items)})")
-                    if not await self.wallet_state_manager.add_coin_states(states, peer, fork_height):
+                    self.log.info(f"new coin state received ({idx}-{idx + len(batch.entries) - 1}/ {len(items)})")
+                    if not await self.wallet_state_manager.add_coin_states(batch.entries, peer, fork_height):
                         return False
             else:
                 while len(all_tasks) >= target_concurrent_tasks:
                     all_tasks = [task for task in all_tasks if not task.done()]
                     await asyncio.sleep(0.1)
                     if self._shut_down:
                         self.log.info("Terminating receipt and validation due to shut down request")
                         await asyncio.gather(*all_tasks)
                         return False
-                all_tasks.append(asyncio.create_task(validate_and_add(states, idx)))
-            idx += len(states)
+                all_tasks.append(asyncio.create_task(validate_and_add(batch.entries, idx)))
+            idx += len(batch.entries)
 
         still_connected = self._server is not None and peer.peer_node_id in self.server.all_connections
         await asyncio.gather(*all_tasks)
         await self.update_ui()
         return still_connected and self._server is not None and peer.peer_node_id in self.server.all_connections
 
     async def is_peer_synced(self, peer: WSChiaConnection, height: uint32) -> Optional[uint64]:
@@ -1148,20 +1175,20 @@
                 # Edge case, this happens when the peak < WEIGHT_PROOF_RECENT_BLOCKS
                 # we still want to subscribe for all phs and coins.
                 # (Hints are not in filter)
                 all_coin_ids: List[bytes32] = await self.get_coin_ids_to_subscribe()
                 phs: List[bytes32] = await self.get_puzzle_hashes_to_subscribe()
                 ph_updates: List[CoinState] = await subscribe_to_phs(phs, peer, uint32(0))
                 coin_updates: List[CoinState] = await subscribe_to_coin_updates(all_coin_ids, peer, uint32(0))
-                peer_new_peak_height, peer_new_peak_hash = self.node_peaks[peer.peer_node_id]
+                peer_new_peak = self.node_peaks[peer.peer_node_id]
                 success = await self.add_states_from_peer(
                     ph_updates + coin_updates,
                     peer,
-                    height=peer_new_peak_height,
-                    header_hash=peer_new_peak_hash,
+                    height=peer_new_peak.height,
+                    header_hash=peer_new_peak.hash,
                 )
                 if success:
                     self.synced_peers.add(peer.peer_node_id)
             else:
                 if peak_hb is not None and new_peak_hb.weight <= peak_hb.weight:
                     # Don't process blocks at the same weight
                     return False
@@ -1249,15 +1276,15 @@
         block_records = await self._weight_proof_handler.validate_weight_proof(weight_proof, False, old_proof)
 
         await self.wallet_state_manager.blockchain.new_valid_weight_proof(weight_proof, block_records)
 
         return get_wp_fork_point(self.constants, old_proof, weight_proof)
 
     async def get_puzzle_hashes_to_subscribe(self) -> List[bytes32]:
-        all_puzzle_hashes = await self.wallet_state_manager.puzzle_store.get_all_puzzle_hashes()
+        all_puzzle_hashes = await self.wallet_state_manager.puzzle_store.get_all_puzzle_hashes(1)
         # Get all phs from interested store
         interested_puzzle_hashes = [
             t[0] for t in await self.wallet_state_manager.interested_store.get_interested_puzzle_hashes()
         ]
         all_puzzle_hashes.update(interested_puzzle_hashes)
         return list(all_puzzle_hashes)
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_node_api.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_node_api.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,30 +1,29 @@
 from __future__ import annotations
 
+import logging
+
 from chia.protocols import full_node_protocol, introducer_protocol, wallet_protocol
 from chia.server.outbound_message import NodeType
 from chia.server.ws_connection import WSChiaConnection
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.util.api_decorators import api_request
 from chia.util.errors import Err
-from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node import PeerPeak, WalletNode
 
 
 class WalletNodeAPI:
+    log: logging.Logger
     wallet_node: WalletNode
 
     def __init__(self, wallet_node) -> None:
+        self.log = logging.getLogger(__name__)
         self.wallet_node = wallet_node
 
-    @property
-    def log(self):
-        return self.wallet_node.log
-
-    @property
-    def api_ready(self):
+    def ready(self) -> bool:
         return self.wallet_node.logged_in
 
     @api_request(peer_required=True)
     async def respond_removals(self, response: wallet_protocol.RespondRemovals, peer: WSChiaConnection):
         pass
 
     async def reject_removals_request(self, response: wallet_protocol.RejectRemovalsRequest, peer: WSChiaConnection):
@@ -41,15 +40,15 @@
         pass
 
     @api_request(peer_required=True, execute_task=True)
     async def new_peak_wallet(self, peak: wallet_protocol.NewPeakWallet, peer: WSChiaConnection):
         """
         The full node sent as a new peak
         """
-        self.wallet_node.node_peaks[peer.peer_node_id] = (peak.height, peak.header_hash)
+        self.wallet_node.node_peaks[peer.peer_node_id] = PeerPeak(peak.height, peak.header_hash)
         # For trusted peers check if there are untrusted peers, if so make sure to disconnect them if the trusted node
         # is synced.
         if self.wallet_node.is_trusted(peer):
             full_node_connections = self.wallet_node.server.get_connections(NodeType.FULL_NODE)
             untrusted_peers = [
                 peer for peer in full_node_connections if not self.wallet_node.is_trusted(peer) and not peer.closed
             ]
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_pool_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_pool_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -109,7 +109,12 @@
         """
 
         async with self.db_wrapper.writer_maybe_transaction() as conn:
             cursor = await conn.execute(
                 "DELETE FROM pool_state_transitions WHERE height>? AND wallet_id=?", (height, wallet_id_arg)
             )
             await cursor.close()
+
+    async def delete_wallet(self, wallet_id: uint32) -> None:
+        async with self.db_wrapper.writer_maybe_transaction() as conn:
+            cursor = await conn.execute("DELETE FROM pool_state_transitions WHERE wallet_id=?", (wallet_id,))
+            await cursor.close()
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_puzzle_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_puzzle_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -284,21 +284,26 @@
         if row is not None:
             wallet_identifier = WalletIdentifier(uint32(row[1]), WalletType(row[0]))
             self.wallet_identifier_cache.put(puzzle_hash, wallet_identifier)
             return wallet_identifier
 
         return None
 
-    async def get_all_puzzle_hashes(self) -> Set[bytes32]:
+    async def get_all_puzzle_hashes(self, wallet_id: Optional[int] = None) -> Set[bytes32]:
         """
         Return a set containing all puzzle_hashes we generated.
         """
 
         async with self.db_wrapper.reader_no_transaction() as conn:
-            rows = await conn.execute_fetchall("SELECT puzzle_hash FROM derivation_paths")
+            if wallet_id is None:
+                rows = await conn.execute_fetchall("SELECT puzzle_hash FROM derivation_paths")
+            else:
+                rows = await conn.execute_fetchall(
+                    "SELECT puzzle_hash FROM derivation_paths WHERE wallet_id=?", (wallet_id,)
+                )
             return set(bytes32.fromhex(row[0]) for row in rows)
 
     async def get_last_derivation_path(self) -> Optional[uint32]:
         """
         Returns the last derivation path by derivation_index.
         """
         if self.last_derivation_index is not None:
@@ -354,7 +359,28 @@
                 conn, "SELECT MIN(derivation_index) FROM derivation_paths WHERE used=0 AND hardened=0;"
             )
 
         if row is not None and row[0] is not None:
             return uint32(row[0])
 
         return None
+
+    async def delete_wallet(self, wallet_id: uint32) -> None:
+        async with self.db_wrapper.writer_maybe_transaction() as conn:
+            # First fetch all puzzle hashes since we need them to drop them from the cache
+            rows = await conn.execute_fetchall(
+                "SELECT puzzle_hash FROM derivation_paths WHERE wallet_id=?", (wallet_id,)
+            )
+            cursor = await conn.execute("DELETE FROM derivation_paths WHERE wallet_id=?;", (wallet_id,))
+            await cursor.close()
+        # Clear caches
+        puzzle_hashes = set(bytes32.fromhex(row[0]) for row in rows)
+        for puzzle_hash in puzzle_hashes:
+            try:
+                self.wallet_identifier_cache.remove(puzzle_hash)
+            except KeyError:
+                pass
+        try:
+            self.last_wallet_derivation_index.pop(wallet_id)
+        except KeyError:
+            pass
+        self.last_derivation_index = None
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_retry_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_retry_store.py`

 * *Files 8% similar despite different names*

```diff
@@ -51,7 +51,20 @@
             )
             await cursor.close()
 
     async def remove_state(self, state: CoinState) -> None:
         async with self.db_wrapper.writer_maybe_transaction() as conn:
             cursor = await conn.execute("DELETE FROM retry_store where coin_state=?", (bytes(state),))
             await cursor.close()
+
+    async def rollback_to_block(self, height: int) -> None:
+        """
+        Delete all ignored states above a certain height
+        :param height: Reorg height
+        :return None:
+        """
+        async with self.db_wrapper.writer_maybe_transaction() as conn:
+            cursor = await conn.execute(
+                "DELETE from retry_store WHERE fork_height>?",
+                (height,),
+            )
+            await cursor.close()
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_state_manager.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_state_manager.py`

 * *Files 8% similar despite different names*

```diff
@@ -4,59 +4,54 @@
 import logging
 import multiprocessing.context
 import time
 import traceback
 from contextlib import asynccontextmanager
 from pathlib import Path
 from secrets import token_bytes
-from typing import (
-    TYPE_CHECKING,
-    Any,
-    AsyncIterator,
-    Callable,
-    Dict,
-    Iterator,
-    List,
-    Optional,
-    Set,
-    Tuple,
-    Type,
-    TypeVar,
-)
+from typing import TYPE_CHECKING, Any, AsyncIterator, Callable, Dict, Iterator, List, Optional, Set, Type, TypeVar
 
 import aiosqlite
-from blspy import G1Element, PrivateKey
+from blspy import G1Element, G2Element, PrivateKey
 
 from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
 from chia.consensus.coinbase import farmer_parent_id, pool_parent_id
 from chia.consensus.constants import ConsensusConstants
 from chia.data_layer.data_layer_wallet import DataLayerWallet
 from chia.data_layer.dl_wallet_store import DataLayerStore
-from chia.pools.pool_puzzles import SINGLETON_LAUNCHER_HASH, solution_to_pool_state
+from chia.pools.pool_puzzles import (
+    SINGLETON_LAUNCHER_HASH,
+    get_most_recent_singleton_coin_from_coin_spend,
+    solution_to_pool_state,
+)
 from chia.pools.pool_wallet import PoolWallet
 from chia.protocols.wallet_protocol import CoinState, NewPeakWallet
 from chia.rpc.rpc_server import StateChangedProtocol
 from chia.server.outbound_message import NodeType
 from chia.server.server import ChiaServer
 from chia.server.ws_connection import WSChiaConnection
+from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
 from chia.types.coin_spend import CoinSpend, compute_additions
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
+from chia.types.spend_bundle import SpendBundle
 from chia.util.bech32m import encode_puzzle_hash
 from chia.util.db_synchronous import db_synchronous_on
 from chia.util.db_wrapper import DBWrapper2
 from chia.util.errors import Err
+from chia.util.hash import std_hash
 from chia.util.ints import uint32, uint64, uint128
 from chia.util.lru_cache import LRUCache
+from chia.util.misc import UInt32Range, UInt64Range, VersionedBlob
 from chia.util.path import path_from_root
 from chia.wallet.cat_wallet.cat_constants import DEFAULT_CATS
-from chia.wallet.cat_wallet.cat_utils import construct_cat_puzzle, match_cat_puzzle
+from chia.wallet.cat_wallet.cat_utils import CAT_MOD, CAT_MOD_HASH, construct_cat_puzzle, match_cat_puzzle
 from chia.wallet.cat_wallet.cat_wallet import CATWallet
 from chia.wallet.db_wallet.db_wallet_puzzles import MIRROR_PUZZLE_HASH
 from chia.wallet.derivation_record import DerivationRecord
 from chia.wallet.derive_keys import (
     _derive_path,
     _derive_path_unhardened,
     master_sk_to_wallet_sk,
@@ -68,34 +63,42 @@
 from chia.wallet.did_wallet.did_wallet_puzzles import DID_INNERPUZ_MOD, match_did_puzzle
 from chia.wallet.key_val_store import KeyValStore
 from chia.wallet.nft_wallet.nft_puzzles import get_metadata_and_phs, get_new_owner_did
 from chia.wallet.nft_wallet.nft_wallet import NFTWallet
 from chia.wallet.nft_wallet.uncurry_nft import UncurriedNFT
 from chia.wallet.notification_manager import NotificationManager
 from chia.wallet.outer_puzzles import AssetType
+from chia.wallet.payment import Payment
 from chia.wallet.puzzle_drivers import PuzzleInfo
-from chia.wallet.puzzles.cat_loader import CAT_MOD, CAT_MOD_HASH
+from chia.wallet.puzzles.clawback.drivers import generate_clawback_spend_bundle, match_clawback_puzzle
+from chia.wallet.puzzles.clawback.metadata import ClawbackMetadata, ClawbackVersion
 from chia.wallet.singleton import create_singleton_puzzle
 from chia.wallet.trade_manager import TradeManager
 from chia.wallet.trading.trade_status import TradeStatus
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.uncurried_puzzle import uncurry_puzzle
 from chia.wallet.util.address_type import AddressType
 from chia.wallet.util.compute_hints import compute_coin_hints
-from chia.wallet.util.transaction_type import TransactionType
+from chia.wallet.util.compute_memos import compute_memos
+from chia.wallet.util.puzzle_decorator import PuzzleDecoratorManager
+from chia.wallet.util.query_filter import HashFilter
+from chia.wallet.util.transaction_type import CLAWBACK_TRANSACTION_TYPES, TransactionType
 from chia.wallet.util.wallet_sync_utils import (
     PeerRequestException,
     fetch_coin_spend_for_coin_state,
     last_change_height_cs,
 )
-from chia.wallet.util.wallet_types import WalletIdentifier, WalletType
+from chia.wallet.util.wallet_types import CoinType, WalletIdentifier, WalletType
+from chia.wallet.vc_wallet.vc_drivers import VerifiedCredential
+from chia.wallet.vc_wallet.vc_store import VCStore
+from chia.wallet.vc_wallet.vc_wallet import VCWallet
 from chia.wallet.wallet import Wallet
 from chia.wallet.wallet_blockchain import WalletBlockchain
 from chia.wallet.wallet_coin_record import WalletCoinRecord
-from chia.wallet.wallet_coin_store import HashFilter, WalletCoinStore
+from chia.wallet.wallet_coin_store import WalletCoinStore
 from chia.wallet.wallet_info import WalletInfo
 from chia.wallet.wallet_interested_store import WalletInterestedStore
 from chia.wallet.wallet_nft_store import WalletNftStore
 from chia.wallet.wallet_pool_store import WalletPoolStore
 from chia.wallet.wallet_protocol import WalletProtocol
 from chia.wallet.wallet_puzzle_store import WalletPuzzleStore
 from chia.wallet.wallet_retry_store import WalletRetryStore
@@ -114,14 +117,15 @@
 class WalletStateManager:
     constants: ConsensusConstants
     config: Dict[str, Any]
     tx_store: WalletTransactionStore
     puzzle_store: WalletPuzzleStore
     user_store: WalletUserStore
     nft_store: WalletNftStore
+    vc_store: VCStore
     basic_store: KeyValStore
 
     # Makes sure only one asyncio thread is changing the blockchain state at one time
     lock: asyncio.Lock
 
     log: logging.Logger
 
@@ -148,14 +152,15 @@
     root_path: Path
     wallet_node: WalletNode
     pool_store: WalletPoolStore
     dl_store: DataLayerStore
     default_cats: Dict[str, Any]
     asset_to_wallet_map: Dict[AssetType, Any]
     initial_num_public_keys: int
+    decorator_manager: PuzzleDecoratorManager
 
     @staticmethod
     async def create(
         private_key: PrivateKey,
         config: Dict[str, Any],
         db_path: Path,
         constants: ConsensusConstants,
@@ -167,15 +172,15 @@
         self.config = config
         self.constants = constants
         self.server = server
         self.root_path = root_path
         self.log = logging.getLogger(__name__)
         self.lock = asyncio.Lock()
         self.log.debug(f"Starting in db path: {db_path}")
-
+        fingerprint = private_key.get_g1().get_fingerprint()
         sql_log_path: Optional[Path] = None
         if self.config.get("log_sqlite_cmds", False):
             sql_log_path = path_from_root(self.root_path, "log/wallet_sql.log")
             self.log.info(f"logging SQL commands to {sql_log_path}")
 
         self.db_wrapper = await DBWrapper2.create(
             database=db_path,
@@ -190,14 +195,15 @@
             self.initial_num_public_keys = min_num_public_keys
 
         self.coin_store = await WalletCoinStore.create(self.db_wrapper)
         self.tx_store = await WalletTransactionStore.create(self.db_wrapper)
         self.puzzle_store = await WalletPuzzleStore.create(self.db_wrapper)
         self.user_store = await WalletUserStore.create(self.db_wrapper)
         self.nft_store = await WalletNftStore.create(self.db_wrapper)
+        self.vc_store = await VCStore.create(self.db_wrapper)
         self.basic_store = await KeyValStore.create(self.db_wrapper)
         self.trade_manager = await TradeManager.create(self, self.db_wrapper)
         self.notification_manager = await NotificationManager.create(self, self.db_wrapper)
         self.pool_store = await WalletPoolStore.create(self.db_wrapper)
         self.dl_store = await DataLayerStore.create(self.db_wrapper)
         self.interested_store = await WalletInterestedStore.create(self.db_wrapper)
         self.retry_store = await WalletRetryStore.create(self.db_wrapper)
@@ -205,28 +211,30 @@
 
         self.wallet_node = wallet_node
         self._sync_target = None
         self.blockchain = await WalletBlockchain.create(self.basic_store, self.constants)
         self.state_changed_callback = None
         self.pending_tx_callback = None
         self.db_path = db_path
+        puzzle_decorators = self.config.get("puzzle_decorators", {}).get(fingerprint, [])
+        self.decorator_manager = PuzzleDecoratorManager.create(puzzle_decorators)
 
         main_wallet_info = await self.user_store.get_wallet_by_id(1)
         assert main_wallet_info is not None
 
         self.private_key = private_key
         self.main_wallet = await Wallet.create(self, main_wallet_info)
 
         self.wallets = {main_wallet_info.id: self.main_wallet}
 
         self.asset_to_wallet_map = {
             AssetType.CAT: CATWallet,
         }
 
-        wallet = None
+        wallet: Optional[WalletProtocol] = None
         for wallet_info in await self.get_all_wallet_info_entries():
             wallet_type = WalletType(wallet_info.type)
             if wallet_type == WalletType.STANDARD_WALLET:
                 if wallet_info.id == 1:
                     continue
                 wallet = await Wallet.create(self, wallet_info)
             elif wallet_type == WalletType.CAT:
@@ -251,33 +259,35 @@
                 wallet = await PoolWallet.create_from_db(
                     self,
                     self.main_wallet,
                     wallet_info,
                 )
             elif wallet_type == WalletType.DATA_LAYER:
                 wallet = await DataLayerWallet.create(self, wallet_info)
+            elif wallet_type == WalletType.VC:  # pragma: no cover
+                wallet = await VCWallet.create(
+                    self,
+                    self.main_wallet,
+                    wallet_info,
+                )
             if wallet is not None:
                 self.wallets[wallet_info.id] = wallet
 
         return self
 
     def get_public_key_unhardened(self, index: uint32) -> G1Element:
         return master_sk_to_wallet_sk_unhardened(self.private_key, index).get_g1()
 
-    async def get_keys(self, puzzle_hash: bytes32) -> Optional[Tuple[G1Element, PrivateKey]]:
+    async def get_private_key(self, puzzle_hash: bytes32) -> PrivateKey:
         record = await self.puzzle_store.record_for_puzzle_hash(puzzle_hash)
         if record is None:
-            raise ValueError(f"No key for this puzzlehash {puzzle_hash})")
+            raise ValueError(f"No key for puzzle hash: {puzzle_hash.hex()}")
         if record.hardened:
-            private = master_sk_to_wallet_sk(self.private_key, record.index)
-            pubkey = private.get_g1()
-            return pubkey, private
-        private = master_sk_to_wallet_sk_unhardened(self.private_key, record.index)
-        pubkey = private.get_g1()
-        return pubkey, private
+            return master_sk_to_wallet_sk(self.private_key, record.index)
+        return master_sk_to_wallet_sk_unhardened(self.private_key, record.index)
 
     def get_wallet(self, id: uint32, required_type: Type[TWalletType]) -> TWalletType:
         wallet = self.wallets[id]
         if not isinstance(wallet, required_type):
             raise Exception(
                 f"wallet id {id} is of type {type(wallet).__name__} but type {required_type.__name__} is required",
             )
@@ -384,17 +394,18 @@
                             uint32(target_wallet.id()),
                             False,
                         )
                     )
                 self.log.info(f"Done: {creating_msg} Time: {time.time() - start_t} seconds")
             await self.puzzle_store.add_derivation_paths(derivation_paths)
             if len(derivation_paths) > 0:
-                await self.wallet_node.new_peak_queue.subscribe_to_puzzle_hashes(
-                    [record.puzzle_hash for record in derivation_paths]
-                )
+                if wallet_id == self.main_wallet.id():
+                    await self.wallet_node.new_peak_queue.subscribe_to_puzzle_hashes(
+                        [record.puzzle_hash for record in derivation_paths]
+                    )
                 self.state_changed("new_derivation_index", data_object={"index": derivation_paths[-1].index})
         # By default, we'll mark previously generated unused puzzle hashes as used if we have new paths
         if mark_existing_as_used and unused > 0 and new_paths:
             self.log.info(f"Updating last used derivation index: {unused - 1}")
             await self.puzzle_store.set_used_up_to(uint32(unused - 1))
 
     async def update_wallet_puzzle_hashes(self, wallet_id: uint32) -> None:
@@ -653,32 +664,158 @@
         puzzle = Program.from_bytes(bytes(coin_spend.puzzle_reveal))
 
         uncurried = uncurry_puzzle(puzzle)
 
         # Check if the coin is a CAT
         cat_curried_args = match_cat_puzzle(uncurried)
         if cat_curried_args is not None:
-            return await self.handle_cat(cat_curried_args, parent_coin_state, coin_state, coin_spend)
+            return await self.handle_cat(
+                cat_curried_args,
+                parent_coin_state,
+                coin_state,
+                coin_spend,
+                peer,
+                fork_height,
+            )
 
         # Check if the coin is a NFT
         #                                                        hint
         # First spend where 1 mojo coin -> Singleton launcher -> NFT -> NFT
         uncurried_nft = UncurriedNFT.uncurry(uncurried.mod, uncurried.args)
         if uncurried_nft is not None:
             return await self.handle_nft(coin_spend, uncurried_nft, parent_coin_state, coin_state)
 
         # Check if the coin is a DID
         did_curried_args = match_did_puzzle(uncurried.mod, uncurried.args)
         if did_curried_args is not None:
             return await self.handle_did(did_curried_args, parent_coin_state, coin_state, coin_spend, peer)
 
+        # Check if the coin is clawback
+        solution = coin_spend.solution.to_program()
+        clawback_metadata = match_clawback_puzzle(uncurried, puzzle, solution)
+        if clawback_metadata is not None:
+            return await self.handle_clawback(clawback_metadata, coin_state, coin_spend, peer)
+
+        # Check if the coin is a VC
+        is_vc, err_msg = VerifiedCredential.is_vc(uncurried)
+        if is_vc:
+            return await self.handle_vc(coin_spend)
+
         await self.notification_manager.potentially_add_new_notification(coin_state, coin_spend)
 
         return None
 
+    async def auto_claim_coins(self) -> None:
+        # Get unspent clawback coin
+        current_timestamp = self.blockchain.get_latest_timestamp()
+        clawback_coins: Dict[Coin, ClawbackMetadata] = {}
+        tx_fee = uint64(self.config.get("auto_claim", {}).get("tx_fee", 0))
+        min_amount = uint64(self.config.get("auto_claim", {}).get("min_amount", 0))
+        unspent_coins = await self.coin_store.get_coin_records(
+            coin_type=CoinType.CLAWBACK,
+            wallet_type=WalletType.STANDARD_WALLET,
+            spent_range=UInt32Range(stop=uint32(0)),
+            amount_range=UInt64Range(start=uint64(min_amount)),
+        )
+        for coin in unspent_coins.records:
+            try:
+                metadata: ClawbackMetadata = coin.parsed_metadata()
+                if await metadata.is_recipient(self.puzzle_store):
+                    coin_timestamp = await self.wallet_node.get_timestamp_for_height(coin.confirmed_block_height)
+                    if current_timestamp - coin_timestamp >= metadata.time_lock:
+                        clawback_coins[coin.coin] = metadata
+                        if len(clawback_coins) >= self.config.get("auto_claim", {}).get("batch_size", 50):
+                            await self.spend_clawback_coins(clawback_coins, tx_fee)
+                            clawback_coins = {}
+            except Exception as e:
+                self.log.error(f"Failed to claim clawback coin {coin.coin.name().hex()}: %s", e)
+        if len(clawback_coins) > 0:
+            await self.spend_clawback_coins(clawback_coins, tx_fee)
+
+    async def spend_clawback_coins(self, clawback_coins: Dict[Coin, ClawbackMetadata], fee: uint64) -> List[bytes32]:
+        assert len(clawback_coins) > 0
+        coin_spends: List[CoinSpend] = []
+        message: bytes32 = std_hash(b"".join([c.name() for c in clawback_coins.keys()]))
+        now: uint64 = uint64(int(time.time()))
+        derivation_record: Optional[DerivationRecord] = None
+        amount: uint64 = uint64(0)
+        for coin, metadata in clawback_coins.items():
+            try:
+                self.log.info(f"Claiming clawback coin {coin.name().hex()}")
+                # Get incoming tx
+                incoming_tx = await self.tx_store.get_transaction_record(coin.name())
+                assert incoming_tx is not None, f"Cannot find incoming tx for clawback coin {coin.name().hex()}"
+                if incoming_tx.sent > 0:
+                    self.log.error(
+                        f"Clawback coin {coin.name().hex()} is already in a pending spend bundle. {incoming_tx}"
+                    )
+                    continue
+
+                recipient_puzhash: bytes32 = metadata.recipient_puzzle_hash
+                sender_puzhash: bytes32 = metadata.sender_puzzle_hash
+                is_recipient: bool = await metadata.is_recipient(self.puzzle_store)
+                if is_recipient:
+                    derivation_record = await self.puzzle_store.get_derivation_record_for_puzzle_hash(recipient_puzhash)
+                else:
+                    derivation_record = await self.puzzle_store.get_derivation_record_for_puzzle_hash(sender_puzhash)
+                assert derivation_record is not None
+                if self.main_wallet.secret_key_store.secret_key_for_public_key(derivation_record.pubkey) is None:
+                    await self.main_wallet.hack_populate_secret_key_for_puzzle_hash(derivation_record.puzzle_hash)
+                amount = uint64(amount + coin.amount)
+                inner_puzzle: Program = self.main_wallet.puzzle_for_pk(derivation_record.pubkey)
+                inner_solution: Program = self.main_wallet.make_solution(
+                    primaries=[
+                        Payment(
+                            derivation_record.puzzle_hash,
+                            uint64(coin.amount),
+                            []
+                            if len(incoming_tx.memos) == 0
+                            else incoming_tx.memos[0][1],  # Forward memo of the first coin
+                        )
+                    ],
+                    coin_announcements=None if len(coin_spends) > 0 or fee == 0 else {message},
+                )
+                coin_spend: CoinSpend = generate_clawback_spend_bundle(coin, metadata, inner_puzzle, inner_solution)
+                coin_spends.append(coin_spend)
+            except Exception as e:
+                self.log.error(f"Failed to create clawback spend bundle for {coin.name().hex()}: {e}")
+        if len(coin_spends) == 0:
+            return []
+        spend_bundle: SpendBundle = await self.main_wallet.sign_transaction(coin_spends)
+        if fee > 0:
+            chia_tx = await self.main_wallet.create_tandem_xch_tx(
+                fee, Announcement(coin_spends[0].coin.name(), message)
+            )
+            assert chia_tx.spend_bundle is not None
+            spend_bundle = SpendBundle.aggregate([spend_bundle, chia_tx.spend_bundle])
+        assert derivation_record is not None
+        tx_record = TransactionRecord(
+            confirmed_at_height=uint32(0),
+            created_at_time=now,
+            to_puzzle_hash=derivation_record.puzzle_hash,
+            amount=amount,
+            fee_amount=uint64(fee),
+            confirmed=False,
+            sent=uint32(0),
+            spend_bundle=spend_bundle,
+            additions=spend_bundle.additions(),
+            removals=spend_bundle.removals(),
+            wallet_id=uint32(1),
+            sent_to=[],
+            trade_id=None,
+            type=uint32(TransactionType.OUTGOING_CLAWBACK),
+            name=spend_bundle.name(),
+            memos=list(compute_memos(spend_bundle).items()),
+        )
+        await self.add_pending_transaction(tx_record)
+        # Update incoming tx to prevent double spend and mark it is pending
+        for coin_spend in coin_spends:
+            await self.tx_store.increment_sent(coin_spend.coin.name(), "", MempoolInclusionStatus.PENDING, None)
+        return [tx_record.name]
+
     async def filter_spam(self, new_coin_state: List[CoinState]) -> List[CoinState]:
         xch_spam_amount = self.config.get("xch_spam_amount", 1000000)
 
         # No need to filter anything if the filter is set to 1 or 0 mojos
         if xch_spam_amount <= 1:
             return new_coin_state
 
@@ -711,14 +848,16 @@
 
     async def handle_cat(
         self,
         curried_args: Iterator[Program],
         parent_coin_state: CoinState,
         coin_state: CoinState,
         coin_spend: CoinSpend,
+        peer: WSChiaConnection,
+        fork_height: Optional[uint32],
     ) -> Optional[WalletIdentifier]:
         """
         Handle the new coin when it is a CAT
         :param curried_args: Curried arg of the CAT mod
         :param parent_coin_state: Parent coin state
         :param coin_state: Current coin state
         :param coin_spend: New coin spend
@@ -753,14 +892,19 @@
                 # Found unacknowledged CAT, save it in the database.
                 await self.interested_store.add_unacknowledged_token(
                     asset_id,
                     CATWallet.default_wallet_name_for_unknown_cat(asset_id.hex()),
                     None if parent_coin_state.spent_height is None else uint32(parent_coin_state.spent_height),
                     parent_coin_state.coin.puzzle_hash,
                 )
+                await self.interested_store.add_unacknowledged_coin_state(
+                    asset_id,
+                    coin_state,
+                    fork_height,
+                )
                 self.state_changed("added_stray_cat")
                 return None
 
     async def handle_did(
         self,
         curried_args: Iterator[Program],
         parent_coin_state: CoinState,
@@ -933,15 +1077,15 @@
         ] = await self.puzzle_store.get_derivation_record_for_puzzle_hash(old_p2_puzhash)
         if new_derivation_record is None and old_derivation_record is None:
             self.log.debug(
                 "Cannot find a P2 puzzle hash for NFT:%s, this NFT belongs to others.",
                 uncurried_nft.singleton_launcher_id.hex(),
             )
             return wallet_identifier
-        for nft_wallet in self.wallets.values():
+        for nft_wallet in self.wallets.copy().values():
             if not isinstance(nft_wallet, NFTWallet):
                 continue
             if nft_wallet.nft_wallet_info.did_id == old_did_id and old_derivation_record is not None:
                 self.log.info(
                     "Removing old NFT, NFT_ID:%s, DID_ID:%s",
                     uncurried_nft.singleton_launcher_id.hex(),
                     old_did_id,
@@ -978,14 +1122,112 @@
             )
             new_nft_wallet: NFTWallet = await NFTWallet.create_new_nft_wallet(
                 self, self.main_wallet, did_id=new_did_id, name="NFT Wallet"
             )
             wallet_identifier = WalletIdentifier.create(new_nft_wallet)
         return wallet_identifier
 
+    async def handle_clawback(
+        self,
+        metadata: ClawbackMetadata,
+        coin_state: CoinState,
+        coin_spend: CoinSpend,
+        peer: WSChiaConnection,
+    ) -> Optional[WalletIdentifier]:
+        """
+        Handle Clawback coins
+        :param metadata: Clawback metadata for spending the merkle coin
+        :param coin_state: Clawback merkle coin
+        :param coin_spend: Parent coin spend
+        :param peer: Fullnode peer
+        :return:
+        """
+        # Record metadata
+        assert coin_state.created_height is not None
+        is_recipient: Optional[bool] = None
+        # Check if the wallet is the sender
+        sender_derivation_record: Optional[
+            DerivationRecord
+        ] = await self.puzzle_store.get_derivation_record_for_puzzle_hash(metadata.sender_puzzle_hash)
+        # Check if the wallet is the recipient
+        recipient_derivation_record = await self.puzzle_store.get_derivation_record_for_puzzle_hash(
+            metadata.recipient_puzzle_hash
+        )
+        if sender_derivation_record is not None:
+            self.log.info("Found Clawback merkle coin %s as the sender.", coin_state.coin.name().hex())
+            is_recipient = False
+        elif recipient_derivation_record is not None:
+            self.log.info("Found Clawback merkle coin %s as the recipient.", coin_state.coin.name().hex())
+            is_recipient = True
+            # For the recipient we need to manually subscribe the merkle coin
+            await self.add_interested_coin_ids([coin_state.coin.name()])
+        if is_recipient is not None:
+            spend_bundle = SpendBundle([coin_spend], G2Element())
+            memos = compute_memos(spend_bundle)
+            coin_record = WalletCoinRecord(
+                coin_state.coin,
+                uint32(coin_state.created_height),
+                uint32(0),
+                False,
+                False,
+                WalletType.STANDARD_WALLET,
+                1,
+                CoinType.CLAWBACK,
+                VersionedBlob(ClawbackVersion.V1.value, bytes(metadata)),
+            )
+            # Add merkle coin
+            await self.coin_store.add_coin_record(coin_record)
+            # Add tx record
+            created_timestamp = await self.wallet_node.get_timestamp_for_height(uint32(coin_state.created_height))
+            spend_bundle = SpendBundle([coin_spend], G2Element())
+            tx_record = TransactionRecord(
+                confirmed_at_height=uint32(coin_state.created_height),
+                created_at_time=uint64(created_timestamp),
+                to_puzzle_hash=metadata.recipient_puzzle_hash,
+                amount=uint64(coin_state.coin.amount),
+                fee_amount=uint64(0),
+                confirmed=False,
+                sent=uint32(0),
+                spend_bundle=None,
+                additions=[coin_state.coin],
+                removals=[coin_spend.coin],
+                wallet_id=uint32(1),
+                sent_to=[],
+                trade_id=None,
+                type=uint32(
+                    TransactionType.INCOMING_CLAWBACK_RECEIVE
+                    if is_recipient
+                    else TransactionType.INCOMING_CLAWBACK_SEND
+                ),
+                # Use coin ID as the TX ID to mapping with the coin table
+                name=coin_record.coin.name(),
+                memos=list(memos.items()),
+            )
+            await self.tx_store.add_transaction_record(tx_record)
+        return None
+
+    async def handle_vc(self, parent_coin_spend: CoinSpend) -> Optional[WalletIdentifier]:
+        # Check the ownership
+        vc: VerifiedCredential = VerifiedCredential.get_next_from_coin_spend(parent_coin_spend)
+        derivation_record: Optional[DerivationRecord] = await self.puzzle_store.get_derivation_record_for_puzzle_hash(
+            vc.inner_puzzle_hash
+        )
+        if derivation_record is None:
+            self.log.warning(
+                f"Verified credential {vc.launcher_id.hex()} is not belong to the current wallet."
+            )  # pragma: no cover
+            return None  # pragma: no cover
+        self.log.info(f"Found verified credential {vc.launcher_id.hex()}.")
+        for wallet_info in await self.get_all_wallet_info_entries(wallet_type=WalletType.VC):
+            return WalletIdentifier(wallet_info.id, WalletType.VC)
+        else:
+            # Create a new VC wallet
+            vc_wallet = await VCWallet.create_new_vc_wallet(self, self.main_wallet)  # pragma: no cover
+            return WalletIdentifier(vc_wallet.id(), WalletType.VC)  # pragma: no cover
+
     async def _add_coin_states(
         self,
         coin_states: List[CoinState],
         peer: WSChiaConnection,
         fork_height: Optional[uint32],
     ) -> None:
         # TODO: add comment about what this method does
@@ -1206,21 +1448,28 @@
                                         name=bytes32(token_bytes()),
                                         memos=[],
                                     )
 
                                     await self.tx_store.add_transaction_record(tx_record)
                         else:
                             await self.coin_store.set_spent(coin_name, uint32(coin_state.spent_height))
-                            rem_tx_records: List[TransactionRecord] = []
-                            for out_tx_record in all_unconfirmed:
-                                for rem_coin in out_tx_record.removals:
-                                    if rem_coin == coin_state.coin:
-                                        rem_tx_records.append(out_tx_record)
+                            if record.coin_type == CoinType.CLAWBACK:
+                                await self.interested_store.remove_interested_coin_id(coin_state.coin.name())
+                            confirmed_tx_records: List[TransactionRecord] = []
+                            for tx_record in all_unconfirmed:
+                                if tx_record.type in CLAWBACK_TRANSACTION_TYPES:
+                                    for add_coin in tx_record.additions:
+                                        if add_coin == coin_state.coin:
+                                            confirmed_tx_records.append(tx_record)
+                                else:
+                                    for rem_coin in tx_record.removals:
+                                        if rem_coin == coin_state.coin:
+                                            confirmed_tx_records.append(tx_record)
 
-                            for tx_record in rem_tx_records:
+                            for tx_record in confirmed_tx_records:
                                 await self.tx_store.set_confirmed(tx_record.name, uint32(coin_state.spent_height))
                         for unconfirmed_record in all_unconfirmed:
                             for rem_coin in unconfirmed_record.removals:
                                 if rem_coin == coin_state.coin:
                                     self.log.info(f"Setting tx_id: {unconfirmed_record.name} to confirmed")
                                     await self.tx_store.set_confirmed(
                                         unconfirmed_record.name, uint32(coin_state.spent_height)
@@ -1234,15 +1483,15 @@
                                 while curr_coin_state.spent_height is not None:
                                     cs = await fetch_coin_spend_for_coin_state(curr_coin_state, peer)
                                     success = await pool_wallet.apply_state_transition(
                                         cs, uint32(curr_coin_state.spent_height)
                                     )
                                     if not success:
                                         break
-                                    new_singleton_coin: Optional[Coin] = pool_wallet.get_next_interesting_coin(cs)
+                                    new_singleton_coin = get_most_recent_singleton_coin_from_coin_spend(cs)
                                     if new_singleton_coin is None:
                                         # No more singleton (maybe destroyed?)
                                         break
 
                                     coin_name = new_singleton_coin.name()
                                     existing = await self.coin_store.get_coin_record(coin_name)
                                     if existing is None:
@@ -1272,14 +1521,18 @@
                                 uint32(coin_state.spent_height),
                             )
 
                         elif record.wallet_type == WalletType.NFT:
                             if coin_state.spent_height is not None:
                                 nft_wallet = self.get_wallet(id=uint32(record.wallet_id), required_type=NFTWallet)
                                 await nft_wallet.remove_coin(coin_state.coin, uint32(coin_state.spent_height))
+                        elif record.wallet_type == WalletType.VC:
+                            if coin_state.spent_height is not None:
+                                vc_wallet = self.get_wallet(id=uint32(record.wallet_id), required_type=VCWallet)
+                                await vc_wallet.remove_coin(coin_state.coin, uint32(coin_state.spent_height))
 
                         # Check if a child is a singleton launcher
                         for child in children:
                             if child.coin.puzzle_hash != SINGLETON_LAUNCHER_HASH:
                                 continue
                             if await self.have_a_pool_wallet_with_launched_id(child.coin.name()):
                                 continue
@@ -1606,23 +1859,28 @@
         return wallet
 
     async def reorg_rollback(self, height: int) -> List[uint32]:
         """
         Rolls back and updates the coin_store and transaction store. It's possible this height
         is the tip, or even beyond the tip.
         """
+        await self.retry_store.rollback_to_block(height)
         await self.nft_store.rollback_to_block(height)
         await self.coin_store.rollback_to_block(height)
+        await self.interested_store.rollback_to_block(height)
         reorged: List[TransactionRecord] = await self.tx_store.get_transaction_above(height)
         await self.tx_store.rollback_to_block(height)
         for record in reorged:
             if TransactionType(record.type) in [
                 TransactionType.OUTGOING_TX,
                 TransactionType.OUTGOING_TRADE,
                 TransactionType.INCOMING_TRADE,
+                TransactionType.OUTGOING_CLAWBACK,
+                TransactionType.INCOMING_CLAWBACK_SEND,
+                TransactionType.INCOMING_CLAWBACK_RECEIVE,
             ]:
                 await self.tx_store.tx_reorged(record)
 
         # Removes wallets that were created from a blockchain transaction which got reorged.
         remove_ids: List[uint32] = []
         for wallet_id, wallet in self.wallets.items():
             if wallet.type() == WalletType.POOLING_WALLET.value:
@@ -1752,7 +2010,19 @@
         for wallet in self.wallets.values():
             if wallet.type() == WalletType.DATA_LAYER.value:
                 assert isinstance(
                     wallet, DataLayerWallet
                 ), f"WalletType.DATA_LAYER should be a DataLayerWallet instance got: {type(wallet).__name__}"
                 return wallet
         raise ValueError("DataLayerWallet not available")
+
+    async def get_or_create_vc_wallet(self) -> VCWallet:
+        for _, wallet in self.wallets.items():
+            if WalletType(wallet.type()) == WalletType.VC:
+                assert isinstance(wallet, VCWallet)
+                vc_wallet: VCWallet = wallet
+                break
+        else:
+            # Create a new VC wallet
+            vc_wallet = await VCWallet.create_new_vc_wallet(self, self.main_wallet)
+
+        return vc_wallet
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_transaction_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_transaction_store.py`

 * *Files 11% similar despite different names*

```diff
@@ -8,14 +8,15 @@
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.util.db_wrapper import DBWrapper2
 from chia.util.errors import Err
 from chia.util.ints import uint8, uint32
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.transaction_sorting import SortKey
+from chia.wallet.util.query_filter import FilterMode, TransactionTypeFilter
 from chia.wallet.util.transaction_type import TransactionType
 
 log = logging.getLogger(__name__)
 
 
 def filter_ok_mempool_status(sent_to: List[Tuple[str, uint8, Optional[str]]]) -> List[Tuple[str, uint8, Optional[str]]]:
     """Remove SUCCESS and PENDING status records from a TransactionRecord sent_to field"""
@@ -252,15 +253,23 @@
         async with self.db_wrapper.reader_no_transaction() as conn:
             rows = await conn.execute_fetchall(
                 "SELECT transaction_record from transaction_record WHERE confirmed=0 AND wallet_id=?", (wallet_id,)
             )
         return [TransactionRecord.from_bytes(row[0]) for row in rows]
 
     async def get_transactions_between(
-        self, wallet_id: int, start, end, sort_key=None, reverse=False, to_puzzle_hash: Optional[bytes32] = None
+        self,
+        wallet_id: int,
+        start,
+        end,
+        sort_key=None,
+        reverse=False,
+        confirmed: Optional[bool] = None,
+        to_puzzle_hash: Optional[bytes32] = None,
+        type_filter: Optional[TransactionTypeFilter] = None,
     ) -> List[TransactionRecord]:
         """Return a list of transaction between start and end index. List is in reverse chronological order.
         start = 0 is most recent transaction
         """
         limit = end - start
 
         if to_puzzle_hash is None:
@@ -274,28 +283,59 @@
             raise ValueError(f"There is no known sort {sort_key}")
 
         if reverse:
             query_str = SortKey[sort_key].descending()
         else:
             query_str = SortKey[sort_key].ascending()
 
+        confirmed_str = ""
+        if confirmed is not None:
+            confirmed_str = f"AND confirmed={int(confirmed)}"
+
+        if type_filter is None:
+            type_filter_str = ""
+        else:
+            type_filter_str = (
+                f"AND type {'' if type_filter.mode == FilterMode.include else 'NOT'} "
+                f"IN ({','.join([str(x) for x in type_filter.values])})"
+            )
+
         async with self.db_wrapper.reader_no_transaction() as conn:
             rows = await conn.execute_fetchall(
                 f"SELECT transaction_record FROM transaction_record WHERE wallet_id=?{puzz_hash_where}"
-                f" {query_str}, rowid"
+                f" {type_filter_str} {confirmed_str} {query_str}, rowid"
                 f" LIMIT {start}, {limit}",
                 (wallet_id,),
             )
 
         return [TransactionRecord.from_bytes(row[0]) for row in rows]
 
-    async def get_transaction_count_for_wallet(self, wallet_id) -> int:
+    async def get_transaction_count_for_wallet(
+        self,
+        wallet_id: int,
+        confirmed: Optional[bool] = None,
+        type_filter: Optional[TransactionTypeFilter] = None,
+    ) -> int:
+        confirmed_str = ""
+        if confirmed is not None:
+            confirmed_str = f"AND confirmed={int(confirmed)}"
+
+        if type_filter is None:
+            type_filter_str = ""
+        else:
+            type_filter_str = (
+                f"AND type {'' if type_filter.mode == FilterMode.include else 'NOT'} "
+                f"IN ({','.join([str(x) for x in type_filter.values])})"
+            )
         async with self.db_wrapper.reader_no_transaction() as conn:
             rows = list(
-                await conn.execute_fetchall("SELECT COUNT(*) FROM transaction_record where wallet_id=?", (wallet_id,))
+                await conn.execute_fetchall(
+                    f"SELECT COUNT(*) FROM transaction_record where wallet_id=? {type_filter_str} {confirmed_str}",
+                    (wallet_id,),
+                )
             )
         return 0 if len(rows) == 0 else rows[0][0]
 
     async def get_all_transactions_for_wallet(self, wallet_id: int, type: int = None) -> List[TransactionRecord]:
         """
         Returns all stored transactions.
         """
```

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_user_store.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_user_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia/wallet/wallet_weight_proof_handler.py` & `chia-blockchain-2.0.0b3/chia/wallet/wallet_weight_proof_handler.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia_blockchain.egg-info/PKG-INFO` & `chia-blockchain-2.0.0b3/chia_blockchain.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: chia-blockchain
-Version: 2.0.0b1
+Version: 2.0.0b3
 Summary: Chia blockchain full node, farmer, timelord, and wallet.
 Home-page: https://chia.net/
 Author: Mariano Sorgente
 Author-email: mariano@chia.net
 License: Apache License
 Project-URL: Source, https://github.com/Chia-Network/chia-blockchain/
 Project-URL: Changelog, https://github.com/Chia-Network/chia-blockchain/blob/main/CHANGELOG.md
```

### Comparing `chia-blockchain-2.0.0b1/chia_blockchain.egg-info/SOURCES.txt` & `chia-blockchain-2.0.0b3/chia_blockchain.egg-info/SOURCES.txt`

 * *Files 2% similar despite different names*

```diff
@@ -21,19 +21,20 @@
 activated.py
 activated.sh
 install-gui.sh
 install-plotter.sh
 install-timelord.sh
 install.sh
 installhelper.py
-mypy.ini
+manage-mypy.py
+mypy-exclusions.txt
+mypy.ini.template
 pylintrc
 pyproject.toml
 pytest.ini
-run-py-tests.sh
 setup.py
 start-gui.sh
 .github/CODEOWNERS
 .github/PULL_REQUEST_TEMPLATE.md
 .github/dependabot.yml
 .github/release.yml
 .github/ISSUE_TEMPLATE/bug_report.yaml
@@ -73,20 +74,22 @@
 benchmarks/jsonify.py
 benchmarks/mempool-long-lived.py
 benchmarks/mempool.py
 benchmarks/streamable.py
 benchmarks/transaction_height_delta
 benchmarks/utils.py
 build_scripts/__init__.py
+build_scripts/build_license_directory.sh
 build_scripts/build_linux_deb-1-gui.sh
 build_scripts/build_linux_deb-2-installer.sh
 build_scripts/build_linux_rpm-1-gui.sh
 build_scripts/build_linux_rpm-2-installer.sh
 build_scripts/build_macos-1-gui.sh
 build_scripts/build_macos-2-installer.sh
+build_scripts/build_win_license_dir.sh
 build_scripts/build_windows-1-gui.ps1
 build_scripts/build_windows-2-installer.ps1
 build_scripts/check_dependency_artifacts.py
 build_scripts/clean-runner.sh
 build_scripts/installer-version.py
 build_scripts/assets/__init__.py
 build_scripts/assets/deb/__init__.py
@@ -226,15 +229,14 @@
 chia/full_node/fee_tracker.py
 chia/full_node/full_node.py
 chia/full_node/full_node_api.py
 chia/full_node/full_node_store.py
 chia/full_node/generator.py
 chia/full_node/hint_management.py
 chia/full_node/hint_store.py
-chia/full_node/lock_queue.py
 chia/full_node/mempool.py
 chia/full_node/mempool_check_conditions.py
 chia/full_node/mempool_manager.py
 chia/full_node/pending_tx_cache.py
 chia/full_node/signage_point.py
 chia/full_node/subscriptions.py
 chia/full_node/sync_store.py
@@ -305,14 +307,15 @@
 chia/seeder/dns_server.py
 chia/seeder/peer_record.py
 chia/seeder/start_crawler.py
 chia/server/__init__.py
 chia/server/address_manager.py
 chia/server/address_manager_sqlite_store.py
 chia/server/address_manager_store.py
+chia/server/api_protocol.py
 chia/server/capabilities.py
 chia/server/chia_policy.py
 chia/server/introducer_peers.py
 chia/server/node_discovery.py
 chia/server/outbound_message.py
 chia/server/peer_store_resolver.py
 chia/server/rate_limit_numbers.py
@@ -372,19 +375,21 @@
 chia/types/block_protocol.py
 chia/types/clvm_cost.py
 chia/types/coin_record.py
 chia/types/coin_solution.py
 chia/types/coin_spend.py
 chia/types/condition_opcodes.py
 chia/types/condition_with_args.py
+chia/types/eligible_coin_spends.py
 chia/types/end_of_slot_bundle.py
 chia/types/fee_rate.py
 chia/types/full_block.py
 chia/types/generator_types.py
 chia/types/header_block.py
+chia/types/internal_mempool_item.py
 chia/types/mempool_inclusion_status.py
 chia/types/mempool_item.py
 chia/types/mempool_submission_status.py
 chia/types/mojos.py
 chia/types/peer_info.py
 chia/types/signing_mode.py
 chia/types/spend_bundle.py
@@ -412,19 +417,17 @@
 chia/util/bech32m.py
 chia/util/beta_metrics.py
 chia/util/block_cache.py
 chia/util/byte_types.py
 chia/util/cached_bls.py
 chia/util/check_fork_next_block.py
 chia/util/chia_logging.py
-chia/util/chunks.py
 chia/util/collection.py
 chia/util/condition_tools.py
 chia/util/config.py
-chia/util/create_alert_file.py
 chia/util/db_synchronous.py
 chia/util/db_version.py
 chia/util/db_wrapper.py
 chia/util/default_root.py
 chia/util/dump_keyring.py
 chia/util/english.txt
 chia/util/errors.py
@@ -451,25 +454,25 @@
 chia/util/network.py
 chia/util/paginator.py
 chia/util/partial_func.py
 chia/util/path.py
 chia/util/permissions.py
 chia/util/pprint.py
 chia/util/prev_transaction_block.py
+chia/util/priority_mutex.py
 chia/util/profiler.py
 chia/util/recursive_replace.py
 chia/util/safe_cancel_task.py
 chia/util/service_groups.py
 chia/util/setproctitle.py
 chia/util/significant_bits.py
 chia/util/ssl_check.py
 chia/util/streamable.py
 chia/util/struct_stream.py
 chia/util/task_timing.py
-chia/util/validate_alert.py
 chia/util/vdf_prover.py
 chia/util/ws_message.py
 chia/wallet/__init__.py
 chia/wallet/block_record.py
 chia/wallet/chialisp.py
 chia/wallet/coin_selection.py
 chia/wallet/derivation_record.py
@@ -487,15 +490,14 @@
 chia/wallet/singleton.py
 chia/wallet/trade_manager.py
 chia/wallet/trade_record.py
 chia/wallet/transaction_record.py
 chia/wallet/transaction_sorting.py
 chia/wallet/uncurried_puzzle.py
 chia/wallet/wallet.py
-chia/wallet/wallet_action.py
 chia/wallet/wallet_blockchain.py
 chia/wallet/wallet_coin_record.py
 chia/wallet/wallet_coin_store.py
 chia/wallet/wallet_info.py
 chia/wallet/wallet_interested_store.py
 chia/wallet/wallet_nft_store.py
 chia/wallet/wallet_node.py
@@ -528,19 +530,20 @@
 chia/wallet/nft_wallet/nft_puzzles.py
 chia/wallet/nft_wallet/nft_wallet.py
 chia/wallet/nft_wallet/ownership_outer_puzzle.py
 chia/wallet/nft_wallet/singleton_outer_puzzle.py
 chia/wallet/nft_wallet/transfer_program_puzzle.py
 chia/wallet/nft_wallet/uncurry_nft.py
 chia/wallet/puzzles/__init__.py
+chia/wallet/puzzles/augmented_condition.clsp
+chia/wallet/puzzles/augmented_condition.clsp.hex
 chia/wallet/puzzles/block_program_zero.clsp
 chia/wallet/puzzles/block_program_zero.clsp.hex
 chia/wallet/puzzles/calculate_synthetic_public_key.clsp
 chia/wallet/puzzles/calculate_synthetic_public_key.clsp.hex
-chia/wallet/puzzles/cat_loader.py
 chia/wallet/puzzles/cat_truths.clib
 chia/wallet/puzzles/cat_v2.clsp
 chia/wallet/puzzles/cat_v2.clsp.hex
 chia/wallet/puzzles/chialisp_deserialisation.clsp
 chia/wallet/puzzles/chialisp_deserialisation.clsp.hex
 chia/wallet/puzzles/condition_codes.clib
 chia/wallet/puzzles/create-lock-puzzlehash.clib
@@ -580,14 +583,16 @@
 chia/wallet/puzzles/nft_ownership_layer.clsp.hex
 chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp
 chia/wallet/puzzles/nft_ownership_transfer_program_one_way_claim_with_royalties.clsp.hex
 chia/wallet/puzzles/nft_state_layer.clsp
 chia/wallet/puzzles/nft_state_layer.clsp.hex
 chia/wallet/puzzles/notification.clsp
 chia/wallet/puzzles/notification.clsp.hex
+chia/wallet/puzzles/p2_1_of_n.clsp
+chia/wallet/puzzles/p2_1_of_n.clsp.hex
 chia/wallet/puzzles/p2_conditions.clsp
 chia/wallet/puzzles/p2_conditions.clsp.hex
 chia/wallet/puzzles/p2_conditions.py
 chia/wallet/puzzles/p2_delegated_conditions.clsp
 chia/wallet/puzzles/p2_delegated_conditions.clsp.hex
 chia/wallet/puzzles/p2_delegated_conditions.py
 chia/wallet/puzzles/p2_delegated_puzzle.clsp
@@ -637,14 +642,18 @@
 chia/wallet/puzzles/singleton_truths.clib
 chia/wallet/puzzles/tails.py
 chia/wallet/puzzles/test_generator_deserialize.clsp
 chia/wallet/puzzles/test_generator_deserialize.clsp.hex
 chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp
 chia/wallet/puzzles/test_multiple_generator_input_arguments.clsp.hex
 chia/wallet/puzzles/utility_macros.clib
+chia/wallet/puzzles/clawback/__init__.py
+chia/wallet/puzzles/clawback/drivers.py
+chia/wallet/puzzles/clawback/metadata.py
+chia/wallet/puzzles/clawback/puzzle_decorator.py
 chia/wallet/puzzles/prefarm/__init__.py
 chia/wallet/puzzles/prefarm/make_prefarm_ph.py
 chia/wallet/puzzles/prefarm/spend_prefarm.py
 chia/wallet/trading/__init__.py
 chia/wallet/trading/offer.py
 chia/wallet/trading/trade_status.py
 chia/wallet/trading/trade_store.py
@@ -657,17 +666,49 @@
 chia/wallet/util/json_clvm_utils.py
 chia/wallet/util/merkle_tree.py
 chia/wallet/util/merkle_utils.py
 chia/wallet/util/new_peak_queue.py
 chia/wallet/util/notifications.py
 chia/wallet/util/peer_request_cache.py
 chia/wallet/util/puzzle_compression.py
+chia/wallet/util/puzzle_decorator.py
+chia/wallet/util/puzzle_decorator_type.py
+chia/wallet/util/query_filter.py
 chia/wallet/util/transaction_type.py
 chia/wallet/util/wallet_sync_utils.py
 chia/wallet/util/wallet_types.py
+chia/wallet/vc_wallet/__init__.py
+chia/wallet/vc_wallet/cr_cat_drivers.py
+chia/wallet/vc_wallet/vc_drivers.py
+chia/wallet/vc_wallet/vc_store.py
+chia/wallet/vc_wallet/vc_wallet.py
+chia/wallet/vc_wallet/cr_puzzles/__init__.py
+chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp
+chia/wallet/vc_wallet/cr_puzzles/credential_restriction.clsp.hex
+chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp
+chia/wallet/vc_wallet/cr_puzzles/flag_proofs_checker.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/__init__.py
+chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp
+chia/wallet/vc_wallet/vc_puzzles/covenant_layer.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp
+chia/wallet/vc_wallet/vc_puzzles/eml_covenant_morpher.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp
+chia/wallet/vc_wallet/vc_puzzles/eml_transfer_program_covenant_adapter.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp
+chia/wallet/vc_wallet/vc_puzzles/eml_update_metadata_with_DID.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp
+chia/wallet/vc_wallet/vc_puzzles/exigent_metadata_layer.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp
+chia/wallet/vc_wallet/vc_puzzles/p2_announced_delegated_puzzle.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp
+chia/wallet/vc_wallet/vc_puzzles/standard_vc_backdoor_puzzle.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp
+chia/wallet/vc_wallet/vc_puzzles/std_parent_morpher.clsp.hex
+chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp
+chia/wallet/vc_wallet/vc_puzzles/viral_backdoor.clsp.hex
 chia_blockchain.egg-info/PKG-INFO
 chia_blockchain.egg-info/SOURCES.txt
 chia_blockchain.egg-info/dependency_links.txt
 chia_blockchain.egg-info/entry_points.txt
 chia_blockchain.egg-info/not-zip-safe
 chia_blockchain.egg-info/requires.txt
 chia_blockchain.egg-info/top_level.txt
@@ -708,14 +749,15 @@
 tests/core/__init__.py
 tests/core/config.py
 tests/core/large_block.py
 tests/core/make_block_generator.py
 tests/core/node_height.py
 tests/core/test_coins.py
 tests/core/test_cost_calculation.py
+tests/core/test_crawler.py
 tests/core/test_crawler_rpc.py
 tests/core/test_daemon_rpc.py
 tests/core/test_db_conversion.py
 tests/core/test_db_validation.py
 tests/core/test_farmer_harvester_rpc.py
 tests/core/test_filter.py
 tests/core/test_full_node_rpc.py
@@ -788,14 +830,15 @@
 tests/core/server/config.py
 tests/core/server/flood.py
 tests/core/server/serve.py
 tests/core/server/test_capabilities.py
 tests/core/server/test_dos.py
 tests/core/server/test_event_loop.py
 tests/core/server/test_loop.py
+tests/core/server/test_node_discovery.py
 tests/core/server/test_rate_limits.py
 tests/core/server/test_server.py
 tests/core/server/test_upnp.py
 tests/core/ssl/__init__.py
 tests/core/ssl/config.py
 tests/core/ssl/test_ssl.py
 tests/core/util/__init__.py
@@ -823,15 +866,14 @@
 tests/fee_estimation/test_fee_estimation_rpc.py
 tests/fee_estimation/test_fee_estimation_unit_tests.py
 tests/fee_estimation/test_mempoolitem_height_added.py
 tests/generator/__init__.py
 tests/generator/config.py
 tests/generator/test_compression.py
 tests/generator/test_generator_types.py
-tests/generator/test_list_to_batches.py
 tests/generator/test_rom.py
 tests/generator/test_scan.py
 tests/plot_sync/__init__.py
 tests/plot_sync/config.py
 tests/plot_sync/test_delta.py
 tests/plot_sync/test_plot_sync.py
 tests/plot_sync/test_receiver.py
@@ -864,15 +906,14 @@
 tests/tools/__init__.py
 tests/tools/config.py
 tests/tools/test-blockchain-db.sqlite
 tests/tools/test_full_sync.py
 tests/tools/test_legacy_keyring.py
 tests/tools/test_run_block.py
 tests/util/__init__.py
-tests/util/alert_server.py
 tests/util/benchmark_cost.py
 tests/util/bip39_test_vectors.json
 tests/util/blockchain.py
 tests/util/build_network_protocol_files.py
 tests/util/config.py
 tests/util/db_connection.py
 tests/util/gen_ssl_certs.py
@@ -880,28 +921,31 @@
 tests/util/key_tool.py
 tests/util/misc.py
 tests/util/network_protocol_data.py
 tests/util/protocol_messages_bytes-v1.0
 tests/util/protocol_messages_json.py
 tests/util/rpc.py
 tests/util/temp_file.py
-tests/util/test_chunks.py
+tests/util/test_build_network_protocol_files.py
 tests/util/test_collection.py
+tests/util/test_dump_keyring.py
 tests/util/test_full_block_utils.py
 tests/util/test_limited_semaphore.py
-tests/util/test_lock_queue.py
 tests/util/test_logging_filter.py
 tests/util/test_misc.py
 tests/util/test_network.py
 tests/util/test_network_protocol_files.py
 tests/util/test_network_protocol_json.py
 tests/util/test_network_protocol_test.py
 tests/util/test_paginator.py
 tests/util/test_pprint.py
+tests/util/test_priority_mutex.py
 tests/util/test_struct_stream.py
+tests/util/test_testnet_overrides.py
+tests/util/test_tests_misc.py
 tests/util/test_trusted_peer.py
 tests/wallet/__init__.py
 tests/wallet/config.py
 tests/wallet/test_address_type.py
 tests/wallet/test_bech32m.py
 tests/wallet/test_chialisp.py
 tests/wallet/test_coin_selection.py
@@ -920,21 +964,26 @@
 tests/wallet/test_wallet_interested_store.py
 tests/wallet/test_wallet_key_val_store.py
 tests/wallet/test_wallet_node.py
 tests/wallet/test_wallet_retry.py
 tests/wallet/test_wallet_state_manager.py
 tests/wallet/test_wallet_trade_store.py
 tests/wallet/test_wallet_user_store.py
+tests/wallet/test_wallet_utils.py
 tests/wallet/cat_wallet/__init__.py
 tests/wallet/cat_wallet/config.py
 tests/wallet/cat_wallet/test_cat_lifecycle.py
 tests/wallet/cat_wallet/test_cat_outer_puzzle.py
 tests/wallet/cat_wallet/test_cat_wallet.py
 tests/wallet/cat_wallet/test_offer_lifecycle.py
 tests/wallet/cat_wallet/test_trades.py
+tests/wallet/clawback/__init__.py
+tests/wallet/clawback/test_clawback_decorator.py
+tests/wallet/clawback/test_clawback_lifecycle.py
+tests/wallet/clawback/test_clawback_metadata.py
 tests/wallet/dao_wallet/__init__.py
 tests/wallet/db_wallet/__init__.py
 tests/wallet/db_wallet/config.py
 tests/wallet/db_wallet/test_db_graftroot.py
 tests/wallet/db_wallet/test_dl_offers.py
 tests/wallet/db_wallet/test_dl_wallet.py
 tests/wallet/did_wallet/__init__.py
@@ -955,20 +1004,24 @@
 tests/wallet/rpc/test_wallet_rpc.py
 tests/wallet/simple_sync/__init__.py
 tests/wallet/simple_sync/config.py
 tests/wallet/simple_sync/test_simple_sync_protocol.py
 tests/wallet/sync/__init__.py
 tests/wallet/sync/config.py
 tests/wallet/sync/test_wallet_sync.py
+tests/wallet/vc_wallet/__init__.py
+tests/wallet/vc_wallet/test_vc_lifecycle.py
+tests/wallet/vc_wallet/test_vc_wallet.py
 tests/weight_proof/__init__.py
 tests/weight_proof/config.py
 tests/weight_proof/test_weight_proof.py
 tools/__init__.py
 tools/analyze-chain.py
 tools/analyze_memory_profile.py
+tools/chialispp.py
 tools/cpu_utilization.py
 tools/generate_chain.py
 tools/legacy_keyring.py
 tools/manage_clvm.py
 tools/plot-log.gnuplot
 tools/run_benchmark.sh
 tools/run_block.py
```

### Comparing `chia-blockchain-2.0.0b1/chia_blockchain.egg-info/entry_points.txt` & `chia-blockchain-2.0.0b3/chia_blockchain.egg-info/entry_points.txt`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/chia_blockchain.egg-info/requires.txt` & `chia-blockchain-2.0.0b3/chia_blockchain.egg-info/requires.txt`

 * *Files 16% similar despite different names*

```diff
@@ -1,36 +1,36 @@
 aiofiles==23.1.0
-anyio==3.6.2
-boto3==1.26.111
-blspy==1.0.16
+blspy==2.0.0
+anyio==3.7.0
+boto3==1.26.148
 chiavdf==1.0.8
 chiabip158==1.2
 chiapos==1.0.11
 clvm==0.9.7
 clvm_tools==0.4.6
-chia_rs==0.2.7
-clvm-tools-rs==0.1.30
+chia_rs==0.2.8
+clvm-tools-rs==0.1.34
 aiohttp==3.8.4
 aiosqlite==0.19.0
-bitstring==4.0.1
+bitstring==4.0.2
 colorama==0.4.6
 colorlog==6.7.0
-concurrent-log-handler==0.9.23
-cryptography==39.0.1
-filelock==3.12.0
+concurrent-log-handler==0.9.24
+cryptography==41.0.1
+filelock==3.12.2
 keyring==23.13.1
 PyYAML==6.0
 setproctitle==1.3.2
 sortedcontainers==2.4.0
 click==8.1.3
 dnspython==2.3.0
 watchdog==2.2.0
 dnslib==0.9.23
-typing-extensions==4.5.0
-zstd==1.5.4.0
+typing-extensions==4.6.3
+zstd==1.5.5.1
 packaging==23.1
 psutil==5.9.4
 
 [dev]
 build
 coverage>=7.2.4
 diff-cover
@@ -44,15 +44,15 @@
 twine
 isort
 flake8
 mypy
 black==23.3.0
 aiohttp_cors
 ipython
-pyinstaller==5.10.1
+pyinstaller==5.11.0
 types-aiofiles
 types-cryptography
 types-pkg_resources
 types-pyyaml
 types-setuptools
 
 [dev:sys_platform == "linux"]
```

### Comparing `chia-blockchain-2.0.0b1/install-gui.sh` & `chia-blockchain-2.0.0b3/install-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/install-plotter.sh` & `chia-blockchain-2.0.0b3/install-plotter.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/install-timelord.sh` & `chia-blockchain-2.0.0b3/install-timelord.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/install.sh` & `chia-blockchain-2.0.0b3/install.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/installhelper.py` & `chia-blockchain-2.0.0b3/installhelper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/mozilla-ca/cacert.pem` & `chia-blockchain-2.0.0b3/mozilla-ca/cacert.pem`

 * *Files 1% similar despite different names*

```diff
@@ -1,24 +1,24 @@
 ##
 ## Bundle of CA Root Certificates
 ##
-## Certificate data from Mozilla as of: Tue Jan 10 04:12:06 2023 GMT
+## Certificate data from Mozilla as of: Tue May 30 03:12:04 2023 GMT
 ##
 ## This is a bundle of X.509 certificates of public Certificate Authorities
 ## (CA). These were automatically extracted from Mozilla's root certificates
 ## file (certdata.txt).  This file can be found in the mozilla source tree:
 ## https://hg.mozilla.org/releases/mozilla-release/raw-file/default/security/nss/lib/ckfw/builtins/certdata.txt
 ##
 ## It contains the certificates in PEM format and therefore
 ## can be directly used with curl / libcurl / php_curl, or with
 ## an Apache+mod_ssl webserver for SSL client authentication.
 ## Just configure this file as the SSLCACertificateFile.
 ##
 ## Conversion done with mk-ca-bundle.pl version 1.29.
-## SHA256: 90c470e705b4b5f36f09684dc50e2b79c8b86989a848b62cd1a7bd6460ee65f6
+## SHA256: c47475103fb05bb562bbadff0d1e72346b03236154e1448a6ca191b740f83507
 ##
 
 
 GlobalSign Root CA
 ==================
 -----BEGIN CERTIFICATE-----
 MIIDdTCCAl2gAwIBAgILBAAAAAABFUtaw5QwDQYJKoZIhvcNAQEFBQAwVzELMAkGA1UEBhMCQkUx
@@ -599,34 +599,14 @@
 qZw8UQCgwBEIBaeZ5m8BiFRhbvG5GK1Krf6BQCOUL/t1fC8oS2IkgYIL9WHxHG64YTjrgfpioTta
 YtOUZcTh5m2C+C8lcLIhJsFyUR+MLMOEkMNaj7rP9KdlpeuY0fsFskZ1FSNqb4VjMIDw1Z4fKRzC
 bLBQWV2QWzuoDTDPv31/zvGdg73JRm4gpvlhUbohL3u+pRVjodSVh/GeufOJ8z2FuLjbvrW5Kfna
 NwUASZQDhETnv0Mxz3WLJdH0pmT1kvarBes96aULNmLazAZfNou2XjG4Kvte9nHfRCaexOYNkbQu
 dZWAUWpLMKawYqGT8ZvYzsRjdT9ZR7E=
 -----END CERTIFICATE-----
 
-Hongkong Post Root CA 1
-=======================
------BEGIN CERTIFICATE-----
-MIIDMDCCAhigAwIBAgICA+gwDQYJKoZIhvcNAQEFBQAwRzELMAkGA1UEBhMCSEsxFjAUBgNVBAoT
-DUhvbmdrb25nIFBvc3QxIDAeBgNVBAMTF0hvbmdrb25nIFBvc3QgUm9vdCBDQSAxMB4XDTAzMDUx
-NTA1MTMxNFoXDTIzMDUxNTA0NTIyOVowRzELMAkGA1UEBhMCSEsxFjAUBgNVBAoTDUhvbmdrb25n
-IFBvc3QxIDAeBgNVBAMTF0hvbmdrb25nIFBvc3QgUm9vdCBDQSAxMIIBIjANBgkqhkiG9w0BAQEF
-AAOCAQ8AMIIBCgKCAQEArP84tulmAknjorThkPlAj3n54r15/gK97iSSHSL22oVyaf7XPwnU3ZG1
-ApzQjVrhVcNQhrkpJsLj2aDxaQMoIIBFIi1WpztUlVYiWR8o3x8gPW2iNr4joLFutbEnPzlTCeqr
-auh0ssJlXI6/fMN4hM2eFvz1Lk8gKgifd/PFHsSaUmYeSF7jEAaPIpjhZY4bXSNmO7ilMlHIhqqh
-qZ5/dpTCpmy3QfDVyAY45tQM4vM7TG1QjMSDJ8EThFk9nnV0ttgCXjqQesBCNnLsak3c78QA3xMY
-V18meMjWCnl3v/evt3a5pQuEF10Q6m/hq5URX208o1xNg1vysxmKgIsLhwIDAQABoyYwJDASBgNV
-HRMBAf8ECDAGAQH/AgEDMA4GA1UdDwEB/wQEAwIBxjANBgkqhkiG9w0BAQUFAAOCAQEADkbVPK7i
-h9legYsCmEEIjEy82tvuJxuC52pF7BaLT4Wg87JwvVqWuspube5Gi27nKi6Wsxkz67SfqLI37pio
-l7Yutmcn1KZJ/RyTZXaeQi/cImyaT/JaFTmxcdcrUehtHJjA2Sr0oYJ71clBoiMBdDhViw+5Lmei
-IAQ32pwL0xch4I+XeTRvhEgCIDMb5jREn5Fw9IBehEPCKdJsEhTkYY2sEJCehFC78JZvRZ+K88ps
-T/oROhUVRsPNH4NbLUES7VBnQRM9IauUiqpOfMGx+6fWtScvl6tu4B3i0RwsH0Ti/L6RoZz71ilT
-c4afU9hDDl3WY4JxHYB0yvbiAmvZWg==
------END CERTIFICATE-----
-
 SecureSign RootCA11
 ===================
 -----BEGIN CERTIFICATE-----
 MIIDbTCCAlWgAwIBAgIBATANBgkqhkiG9w0BAQUFADBYMQswCQYDVQQGEwJKUDErMCkGA1UEChMi
 SmFwYW4gQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcywgSW5jLjEcMBoGA1UEAxMTU2VjdXJlU2lnbiBS
 b290Q0ExMTAeFw0wOTA0MDgwNDU2NDdaFw0yOTA0MDgwNDU2NDdaMFgxCzAJBgNVBAYTAkpQMSsw
 KQYDVQQKEyJKYXBhbiBDZXJ0aWZpY2F0aW9uIFNlcnZpY2VzLCBJbmMuMRwwGgYDVQQDExNTZWN1
@@ -1257,48 +1237,14 @@
 c41teyWRyu5FrgZLAMzTsVlQ2jqIOylDRl6XK1TOU2+NSueW+r9xDkKLfP0ooNBIytrEgUy7onOT
 JsjrDNYmiLbAJM+7vVvrdX3pCI6GMyx5dwlppYn8s3CQh3aP0yK7Qs69cwsgJirQmz1wHiRszYd2
 qReWt88NkvuOGKmYSdGe/mBEciG5Ge3C9THxOUiIkCR1VBatzvT4aRRkOfujuLpwQMcnHL/EVlP6
 Y2XQ8xwOFvVrhlhNGNTkDY6lnVuR3HYkUD/GKvvZt5y11ubQ2egZixVxSK236thZiNSQvxaz2ems
 WWFUyBy6ysHK4bkgTI86k4mloMy/0/Z1pHWWbVY=
 -----END CERTIFICATE-----
 
-E-Tugra Certification Authority
-===============================
------BEGIN CERTIFICATE-----
-MIIGSzCCBDOgAwIBAgIIamg+nFGby1MwDQYJKoZIhvcNAQELBQAwgbIxCzAJBgNVBAYTAlRSMQ8w
-DQYDVQQHDAZBbmthcmExQDA+BgNVBAoMN0UtVHXEn3JhIEVCRyBCaWxpxZ9pbSBUZWtub2xvamls
-ZXJpIHZlIEhpem1ldGxlcmkgQS7Fni4xJjAkBgNVBAsMHUUtVHVncmEgU2VydGlmaWthc3lvbiBN
-ZXJrZXppMSgwJgYDVQQDDB9FLVR1Z3JhIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTEzMDMw
-NTEyMDk0OFoXDTIzMDMwMzEyMDk0OFowgbIxCzAJBgNVBAYTAlRSMQ8wDQYDVQQHDAZBbmthcmEx
-QDA+BgNVBAoMN0UtVHXEn3JhIEVCRyBCaWxpxZ9pbSBUZWtub2xvamlsZXJpIHZlIEhpem1ldGxl
-cmkgQS7Fni4xJjAkBgNVBAsMHUUtVHVncmEgU2VydGlmaWthc3lvbiBNZXJrZXppMSgwJgYDVQQD
-DB9FLVR1Z3JhIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MIICIjANBgkqhkiG9w0BAQEFAAOCAg8A
-MIICCgKCAgEA4vU/kwVRHoViVF56C/UYB4Oufq9899SKa6VjQzm5S/fDxmSJPZQuVIBSOTkHS0vd
-hQd2h8y/L5VMzH2nPbxHD5hw+IyFHnSOkm0bQNGZDbt1bsipa5rAhDGvykPL6ys06I+XawGb1Q5K
-CKpbknSFQ9OArqGIW66z6l7LFpp3RMih9lRozt6Plyu6W0ACDGQXwLWTzeHxE2bODHnv0ZEoq1+g
-ElIwcxmOj+GMB6LDu0rw6h8VqO4lzKRG+Bsi77MOQ7osJLjFLFzUHPhdZL3Dk14opz8n8Y4e0ypQ
-BaNV2cvnOVPAmJ6MVGKLJrD3fY185MaeZkJVgkfnsliNZvcHfC425lAcP9tDJMW/hkd5s3kc91r0
-E+xs+D/iWR+V7kI+ua2oMoVJl0b+SzGPWsutdEcf6ZG33ygEIqDUD13ieU/qbIWGvaimzuT6w+Gz
-rt48Ue7LE3wBf4QOXVGUnhMMti6lTPk5cDZvlsouDERVxcr6XQKj39ZkjFqzAQqptQpHF//vkUAq
-jqFGOjGY5RH8zLtJVor8udBhmm9lbObDyz51Sf6Pp+KJxWfXnUYTTjF2OySznhFlhqt/7x3U+Lzn
-rFpct1pHXFXOVbQicVtbC/DP3KBhZOqp12gKY6fgDT+gr9Oq0n7vUaDmUStVkhUXU8u3Zg5mTPj5
-dUyQ5xJwx0UCAwEAAaNjMGEwHQYDVR0OBBYEFC7j27JJ0JxUeVz6Jyr+zE7S6E5UMA8GA1UdEwEB
-/wQFMAMBAf8wHwYDVR0jBBgwFoAULuPbsknQnFR5XPonKv7MTtLoTlQwDgYDVR0PAQH/BAQDAgEG
-MA0GCSqGSIb3DQEBCwUAA4ICAQAFNzr0TbdF4kV1JI+2d1LoHNgQk2Xz8lkGpD4eKexd0dCrfOAK
-kEh47U6YA5n+KGCRHTAduGN8qOY1tfrTYXbm1gdLymmasoR6d5NFFxWfJNCYExL/u6Au/U5Mh/jO
-XKqYGwXgAEZKgoClM4so3O0409/lPun++1ndYYRP0lSWE2ETPo+Aab6TR7U1Q9Jauz1c77NCR807
-VRMGsAnb/WP2OogKmW9+4c4bU2pEZiNRCHu8W1Ki/QY3OEBhj0qWuJA3+GbHeJAAFS6LrVE1Uweo
-a2iu+U48BybNCAVwzDk/dr2l02cmAYamU9JgO3xDf1WKvJUawSg5TB9D0pH0clmKuVb8P7Sd2nCc
-dlqMQ1DujjByTd//SffGqWfZbawCEeI6FiWnWAjLb1NBnEg4R2gz0dfHj9R0IdTDBZB6/86WiLEV
-KV0jq9BgoRJP3vQXzTLlyb/IQ639Lo7xr+L0mPoSHyDYwKcMhcWQ9DstliaxLL5Mq+ux0orJ23gT
-Dx4JnW2PAJ8C2sH6H3p6CcRK5ogql5+Ji/03X186zjhZhkuvcQu02PJwT58yE+Owp1fl2tpDy4Q0
-8ijE6m30Ku/Ba3ba+367hTzSU8JNvnHhRdH9I2cNE3X7z2VnIp2usAnRCf8dNL/+I5c30jn6PQ0G
-C7TbO6Orb1wdtn7os4I07QZcJA==
------END CERTIFICATE-----
-
 T-TeleSec GlobalRoot Class 2
 ============================
 -----BEGIN CERTIFICATE-----
 MIIDwzCCAqugAwIBAgIBATANBgkqhkiG9w0BAQsFADCBgjELMAkGA1UEBhMCREUxKzApBgNVBAoM
 IlQtU3lzdGVtcyBFbnRlcnByaXNlIFNlcnZpY2VzIEdtYkgxHzAdBgNVBAsMFlQtU3lzdGVtcyBU
 cnVzdCBDZW50ZXIxJTAjBgNVBAMMHFQtVGVsZVNlYyBHbG9iYWxSb290IENsYXNzIDIwHhcNMDgx
 MDAxMTA0MDE0WhcNMzMxMDAxMjM1OTU5WjCBgjELMAkGA1UEBhMCREUxKzApBgNVBAoMIlQtU3lz
@@ -3366,7 +3312,52 @@
 IgNiAASkpW9gAwPDvTH00xecK4R1rOX9PVdu12O/5gSJko6BnOPpR27KkBLIE+CnnfdldB9sELLo
 5OnvbYUymUSxXv3MdhDYW72ixvnWQuRXdtyQwjWpS4g8EkdtXP9JTxpKULGjQjBAMB0GA1UdDgQW
 BBSGHOf+LaVKiwj+KBH6vqNm+GBZLzAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAK
 BggqhkjOPQQDAwNoADBlAjAVXUI9/Lbu9zuxNuie9sRGKEkz0FhDKmMpzE2xtHqiuQ04pV1IKv3L
 snNdo4gIxwwCMQDAqy0Obe0YottT6SXbVQjgUMzfRGEWgqtJsLKB7HOHeLRMsmIbEvoWTSVLY70e
 N9k=
 -----END CERTIFICATE-----
+
+BJCA Global Root CA1
+====================
+-----BEGIN CERTIFICATE-----
+MIIFdDCCA1ygAwIBAgIQVW9l47TZkGobCdFsPsBsIDANBgkqhkiG9w0BAQsFADBUMQswCQYDVQQG
+EwJDTjEmMCQGA1UECgwdQkVJSklORyBDRVJUSUZJQ0FURSBBVVRIT1JJVFkxHTAbBgNVBAMMFEJK
+Q0EgR2xvYmFsIFJvb3QgQ0ExMB4XDTE5MTIxOTAzMTYxN1oXDTQ0MTIxMjAzMTYxN1owVDELMAkG
+A1UEBhMCQ04xJjAkBgNVBAoMHUJFSUpJTkcgQ0VSVElGSUNBVEUgQVVUSE9SSVRZMR0wGwYDVQQD
+DBRCSkNBIEdsb2JhbCBSb290IENBMTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAPFm
+CL3ZxRVhy4QEQaVpN3cdwbB7+sN3SJATcmTRuHyQNZ0YeYjjlwE8R4HyDqKYDZ4/N+AZspDyRhyS
+sTphzvq3Rp4Dhtczbu33RYx2N95ulpH3134rhxfVizXuhJFyV9xgw8O558dnJCNPYwpj9mZ9S1Wn
+P3hkSWkSl+BMDdMJoDIwOvqfwPKcxRIqLhy1BDPapDgRat7GGPZHOiJBhyL8xIkoVNiMpTAK+BcW
+yqw3/XmnkRd4OJmtWO2y3syJfQOcs4ll5+M7sSKGjwZteAf9kRJ/sGsciQ35uMt0WwfCyPQ10WRj
+eulumijWML3mG90Vr4TqnMfK9Q7q8l0ph49pczm+LiRvRSGsxdRpJQaDrXpIhRMsDQa4bHlW/KNn
+MoH1V6XKV0Jp6VwkYe/iMBhORJhVb3rCk9gZtt58R4oRTklH2yiUAguUSiz5EtBP6DF+bHq/pj+b
+OT0CFqMYs2esWz8sgytnOYFcuX6U1WTdno9uruh8W7TXakdI136z1C2OVnZOz2nxbkRs1CTqjSSh
+GL+9V/6pmTW12xB3uD1IutbB5/EjPtffhZ0nPNRAvQoMvfXnjSXWgXSHRtQpdaJCbPdzied9v3pK
+H9MiyRVVz99vfFXQpIsHETdfg6YmV6YBW37+WGgHqel62bno/1Afq8K0wM7o6v0PvY1NuLxxAgMB
+AAGjQjBAMB0GA1UdDgQWBBTF7+3M2I0hxkjk49cULqcWk+WYATAPBgNVHRMBAf8EBTADAQH/MA4G
+A1UdDwEB/wQEAwIBBjANBgkqhkiG9w0BAQsFAAOCAgEAUoKsITQfI/Ki2Pm4rzc2IInRNwPWaZ+4
+YRC6ojGYWUfo0Q0lHhVBDOAqVdVXUsv45Mdpox1NcQJeXyFFYEhcCY5JEMEE3KliawLwQ8hOnThJ
+dMkycFRtwUf8jrQ2ntScvd0g1lPJGKm1Vrl2i5VnZu69mP6u775u+2D2/VnGKhs/I0qUJDAnyIm8
+60Qkmss9vk/Ves6OF8tiwdneHg56/0OGNFK8YT88X7vZdrRTvJez/opMEi4r89fO4aL/3Xtw+zuh
+TaRjAv04l5U/BXCga99igUOLtFkNSoxUnMW7gZ/NfaXvCyUeOiDbHPwfmGcCCtRzRBPbUYQaVQNW
+4AB+dAb/OMRyHdOoP2gxXdMJxy6MW2Pg6Nwe0uxhHvLe5e/2mXZgLR6UcnHGCyoyx5JO1UbXHfmp
+GQrI+pXObSOYqgs4rZpWDW+N8TEAiMEXnM0ZNjX+VVOg4DwzX5Ze4jLp3zO7Bkqp2IRzznfSxqxx
+4VyjHQy7Ct9f4qNx2No3WqB4K/TUfet27fJhcKVlmtOJNBir+3I+17Q9eVzYH6Eze9mCUAyTF6ps
+3MKCuwJXNq+YJyo5UOGwifUll35HaBC07HPKs5fRJNz2YqAo07WjuGS3iGJCz51TzZm+ZGiPTx4S
+SPfSKcOYKMryMguTjClPPGAyzQWWYezyr/6zcCwupvI=
+-----END CERTIFICATE-----
+
+BJCA Global Root CA2
+====================
+-----BEGIN CERTIFICATE-----
+MIICJTCCAaugAwIBAgIQLBcIfWQqwP6FGFkGz7RK6zAKBggqhkjOPQQDAzBUMQswCQYDVQQGEwJD
+TjEmMCQGA1UECgwdQkVJSklORyBDRVJUSUZJQ0FURSBBVVRIT1JJVFkxHTAbBgNVBAMMFEJKQ0Eg
+R2xvYmFsIFJvb3QgQ0EyMB4XDTE5MTIxOTAzMTgyMVoXDTQ0MTIxMjAzMTgyMVowVDELMAkGA1UE
+BhMCQ04xJjAkBgNVBAoMHUJFSUpJTkcgQ0VSVElGSUNBVEUgQVVUSE9SSVRZMR0wGwYDVQQDDBRC
+SkNBIEdsb2JhbCBSb290IENBMjB2MBAGByqGSM49AgEGBSuBBAAiA2IABJ3LgJGNU2e1uVCxA/jl
+SR9BIgmwUVJY1is0j8USRhTFiy8shP8sbqjV8QnjAyEUxEM9fMEsxEtqSs3ph+B99iK++kpRuDCK
+/eHeGBIK9ke35xe/J4rUQUyWPGCWwf0VHKNCMEAwHQYDVR0OBBYEFNJKsVF/BvDRgh9Obl+rg/xI
+1LCRMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/BAQDAgEGMAoGCCqGSM49BAMDA2gAMGUCMBq8
+W9f+qdJUDkpd0m2xQNz0Q9XSSpkZElaA94M04TVOSG0ED1cxMDAtsaqdAzjbBgIxAMvMh1PLet8g
+UXOQwKhbYdDFUDn9hf7B43j4ptZLvZuHjw/l1lOWqzzIQNph91Oj9w==
+-----END CERTIFICATE-----
```

### Comparing `chia-blockchain-2.0.0b1/mypy.ini` & `chia-blockchain-2.0.0b3/mypy-exclusions.txt`

 * *Files 22% similar despite different names*

```diff
@@ -1,33 +1,170 @@
-[mypy]
-files = benchmarks,build_scripts,chia,tests,tools,*.py
-ignore_missing_imports = True
-show_error_codes = True
-warn_unused_ignores = True
-
-disallow_any_generics = True
-disallow_subclassing_any = True
-disallow_untyped_calls = True
-disallow_untyped_defs = True
-disallow_incomplete_defs = True
-check_untyped_defs = True
-disallow_untyped_decorators = True
-no_implicit_optional = True
-warn_return_any = True
-no_implicit_reexport = True
-strict_equality = True
-warn_redundant_casts = True
-
-# list created by: venv/bin/mypy | sed -n 's/.py:.*//p' | sort | uniq | tr '/' '.' | tr '\n' ','
-[mypy-chia.cmds.passphrase,chia.cmds.passphrase_funcs,chia.cmds.plots,chia.cmds.plotters,chia.cmds.show,chia.cmds.start_funcs,chia.cmds.wallet,chia.cmds.wallet_funcs,chia.daemon.server,chia.farmer.farmer_api,chia.full_node.weight_proof,chia.introducer.introducer,chia.introducer.introducer_api,chia.plotters.bladebit,chia.plotters.chiapos,chia.plotters.madmax,chia.plotters.plotters,chia.plotters.plotters_util,chia.plotting.create_plots,chia.plotting.manager,chia.plotting.util,chia.pools.pool_puzzles,chia.pools.pool_wallet,chia.pools.pool_wallet_info,chia.rpc.full_node_rpc_client,chia.rpc.harvester_rpc_api,chia.rpc.harvester_rpc_client,chia.rpc.rpc_client,chia.rpc.timelord_rpc_api,chia.rpc.util,chia.rpc.wallet_rpc_api,chia.rpc.wallet_rpc_client,chia.seeder.crawler,chia.seeder.crawler_api,chia.seeder.crawl_store,chia.seeder.dns_server,chia.seeder.peer_record,chia.seeder.start_crawler,chia.simulator.full_node_simulator,chia.simulator.start_simulator,chia.ssl.create_ssl,chia.timelord.iters_from_block,chia.timelord.timelord,chia.timelord.timelord_api,chia.timelord.timelord_launcher,chia.timelord.timelord_state,chia.types.blockchain_format.program,chia.util.block_cache,chia.util.check_fork_next_block,chia.util.chia_logging,chia.util.config,chia.util.db_wrapper,chia.util.dump_keyring,chia.util.hash,chia.util.json_util,chia.util.keychain,chia.util.keyring_wrapper,chia.util.log_exceptions,chia.util.make_test_constants,chia.util.merkle_set,chia.util.network,chia.util.partial_func,chia.util.profiler,chia.util.safe_cancel_task,chia.util.service_groups,chia.util.ssl_check,chia.util.validate_alert,chia.wallet.block_record,chia.wallet.chialisp,chia.wallet.did_wallet.did_wallet,chia.wallet.did_wallet.did_wallet_puzzles,chia.wallet.key_val_store,chia.wallet.lineage_proof,chia.wallet.payment,chia.wallet.puzzles.load_clvm,chia.wallet.puzzles.p2_conditions,chia.wallet.puzzles.p2_delegated_conditions,chia.wallet.puzzles.p2_delegated_puzzle,chia.wallet.puzzles.p2_delegated_puzzle_or_hidden_puzzle,chia.wallet.puzzles.p2_m_of_n_delegate_direct,chia.wallet.puzzles.p2_puzzle_hash,chia.wallet.puzzles.prefarm.spend_prefarm,chia.wallet.puzzles.puzzle_utils,chia.wallet.puzzles.singleton_top_layer,chia.wallet.puzzles.tails,chia.wallet.secret_key_store,chia.wallet.trade_record,chia.wallet.trading.trade_store,chia.wallet.transaction_record,chia.wallet.util.debug_spend_bundle,chia.wallet.util.new_peak_queue,chia.wallet.wallet,chia.wallet.wallet_coin_store,chia.wallet.wallet_interested_store,chia.wallet.wallet_node_api,chia.wallet.wallet_pool_store,chia.wallet.wallet_puzzle_store,chia.wallet.wallet_sync_store,chia.wallet.wallet_transaction_store,chia.wallet.wallet_user_store,installhelper,tests.blockchain.blockchain_test_utils,tests.blockchain.test_blockchain,chia.simulator.block_tools,tests.build-init-files,tests.build-workflows,tests.clvm.coin_store,tests.clvm.test_chialisp_deserialization,tests.clvm.test_clvm_compilation,tests.clvm.test_program,tests.clvm.test_puzzle_compression,tests.clvm.test_puzzles,tests.clvm.test_serialized_program,tests.clvm.test_singletons,tests.clvm.test_spend_sim,tests.conftest,tests.connection_utils,tests.core.cmds.test_keys,tests.core.consensus.test_pot_iterations,tests.core.custom_types.test_coin,tests.core.custom_types.test_proof_of_space,tests.core.custom_types.test_spend_bundle,tests.core.daemon.test_daemon,tests.core.full_node.full_sync.test_full_sync,tests.core.full_node.stores.test_block_store,tests.core.full_node.stores.test_coin_store,tests.core.full_node.stores.test_full_node_store,tests.core.full_node.stores.test_hint_store,tests.core.full_node.stores.test_sync_store,tests.core.full_node.test_address_manager,tests.core.full_node.test_block_height_map,tests.core.full_node.test_conditions,tests.core.full_node.test_full_node,tests.core.mempool.test_mempool,tests.core.mempool.test_mempool_performance,tests.core.full_node.test_node_load,tests.core.full_node.test_peer_store_resolver,tests.core.full_node.test_performance,tests.core.full_node.test_transactions,tests.core.make_block_generator,tests.core.node_height,tests.core.server.test_dos,tests.core.server.test_rate_limits,tests.core.ssl.test_ssl,tests.core.test_cost_calculation,tests.core.test_crawler_rpc,tests.core.test_daemon_rpc,tests.core.test_db_conversion,tests.core.test_db_validation,tests.core.test_farmer_harvester_rpc,tests.core.test_filter,tests.core.test_full_node_rpc,tests.core.test_merkle_set,tests.core.test_setproctitle,tests.core.util.test_cached_bls,tests.core.util.test_config,tests.core.util.test_file_keyring_synchronization,tests.core.util.test_files,tests.core.util.test_keychain,tests.core.util.test_keyring_wrapper,tests.core.util.test_lru_cache,tests.core.util.test_significant_bits,tests.farmer_harvester.test_farmer_harvester,tests.generator.test_list_to_batches,tests.generator.test_scan,tests.plotting.test_plot_manager,tests.pools.test_pool_cmdline,tests.pools.test_pool_config,tests.pools.test_pool_puzzles_lifecycle,tests.pools.test_wallet_pool_store,tests.simulation.test_simulation,chia.simulator.time_out_assert,tests.tools.test_full_sync,tests.tools.test_run_block,tests.util.alert_server,tests.util.benchmark_cost,tests.util.build_network_protocol_files,tests.util.db_connection,tests.util.generator_tools_testing,chia.simulator.keyring,tests.util.key_tool,tests.util.test_full_block_utils,tests.util.test_lock_queue,tests.util.test_misc,tests.util.test_network,tests.util.test_network_protocol_files,tests.wallet.cat_wallet.test_cat_lifecycle,tests.wallet.cat_wallet.test_cat_wallet,tests.wallet.cat_wallet.test_offer_lifecycle,tests.wallet.cat_wallet.test_trades,tests.wallet.did_wallet.test_did,tests.wallet.did_wallet.test_did_rpc,tests.wallet.did_wallet.test_nft_rpc,tests.wallet.did_wallet.test_nft_wallet,tests.wallet.rpc.test_wallet_rpc,tests.wallet.simple_sync.test_simple_sync_protocol,tests.wallet.sync.test_wallet_sync,tests.wallet.test_bech32m,tests.wallet.test_chialisp,tests.wallet.test_puzzle_store,tests.wallet.test_singleton,tests.wallet.test_singleton_lifecycle,tests.wallet.test_singleton_lifecycle_fast,tests.wallet.test_taproot,tests.wallet.test_wallet_blockchain,tests.wallet.test_wallet_interested_store,tests.wallet.test_wallet_key_val_store,tests.wallet.test_wallet_user_store,chia.simulator.wallet_tools,tests.weight_proof.test_weight_proof,tools.analyze-chain,tools.run_block,tools.test_full_sync,tests.wallet.nft_wallet.test_nft_wallet,chia.wallet.nft_wallet.nft_puzzles,tests.wallet.nft_wallet.test_nft_puzzles]
-disable_error_code = annotation-unchecked
-disallow_any_generics = False
-disallow_subclassing_any = False
-disallow_untyped_calls = False
-disallow_untyped_defs = False
-disallow_incomplete_defs = False
-check_untyped_defs = False
-disallow_untyped_decorators = False
-no_implicit_optional = False
-warn_return_any = False
-no_implicit_reexport = False
-strict_equality = False
+# File created by: python manage-mypy.py build-exclusions
+chia.cmds.plots
+chia.cmds.plotters
+chia.cmds.start_funcs
+chia.cmds.wallet
+chia.cmds.wallet_funcs
+chia.daemon.server
+chia.introducer.introducer
+chia.introducer.introducer_api
+chia.plotters.bladebit
+chia.plotters.madmax
+chia.plotters.plotters
+chia.plotters.plotters_util
+chia.plotting.manager
+chia.plotting.util
+chia.pools.pool_puzzles
+chia.pools.pool_wallet
+chia.pools.pool_wallet_info
+chia.rpc.rpc_client
+chia.rpc.util
+chia.rpc.wallet_rpc_api
+chia.rpc.wallet_rpc_client
+chia.seeder.crawl_store
+chia.seeder.crawler
+chia.seeder.dns_server
+chia.seeder.peer_record
+chia.seeder.start_crawler
+chia.simulator.full_node_simulator
+chia.simulator.keyring
+chia.simulator.setup_services
+chia.simulator.start_simulator
+chia.simulator.time_out_assert
+chia.simulator.wallet_tools
+chia.ssl.create_ssl
+chia.timelord.timelord_api
+chia.timelord.timelord_launcher
+chia.types.blockchain_format.program
+chia.util.block_cache
+chia.util.chia_logging
+chia.util.config
+chia.util.db_wrapper
+chia.util.hash
+chia.util.json_util
+chia.util.keychain
+chia.util.keyring_wrapper
+chia.util.make_test_constants
+chia.util.merkle_set
+chia.util.partial_func
+chia.util.profiler
+chia.util.service_groups
+chia.util.ssl_check
+chia.wallet.block_record
+chia.wallet.chialisp
+chia.wallet.did_wallet.did_wallet
+chia.wallet.did_wallet.did_wallet_puzzles
+chia.wallet.key_val_store
+chia.wallet.lineage_proof
+chia.wallet.nft_wallet.nft_puzzles
+chia.wallet.payment
+chia.wallet.puzzles.load_clvm
+chia.wallet.puzzles.p2_conditions
+chia.wallet.puzzles.p2_delegated_conditions
+chia.wallet.puzzles.p2_delegated_puzzle
+chia.wallet.puzzles.p2_delegated_puzzle_or_hidden_puzzle
+chia.wallet.puzzles.p2_m_of_n_delegate_direct
+chia.wallet.puzzles.p2_puzzle_hash
+chia.wallet.puzzles.prefarm.spend_prefarm
+chia.wallet.puzzles.singleton_top_layer
+chia.wallet.puzzles.tails
+chia.wallet.trading.trade_store
+chia.wallet.transaction_record
+chia.wallet.util.debug_spend_bundle
+chia.wallet.util.new_peak_queue
+chia.wallet.wallet_coin_store
+chia.wallet.wallet_interested_store
+chia.wallet.wallet_node_api
+chia.wallet.wallet_pool_store
+chia.wallet.wallet_puzzle_store
+chia.wallet.wallet_transaction_store
+chia.wallet.wallet_user_store
+installhelper
+tests.blockchain.blockchain_test_utils
+tests.blockchain.test_blockchain
+tests.build-init-files
+tests.clvm.coin_store
+tests.clvm.test_chialisp_deserialization
+tests.clvm.test_program
+tests.clvm.test_puzzle_compression
+tests.clvm.test_puzzles
+tests.clvm.test_serialized_program
+tests.clvm.test_singletons
+tests.clvm.test_spend_sim
+tests.conftest
+tests.connection_utils
+tests.core.cmds.test_keys
+tests.core.consensus.test_pot_iterations
+tests.core.custom_types.test_coin
+tests.core.custom_types.test_spend_bundle
+tests.core.daemon.test_daemon
+tests.core.full_node.full_sync.test_full_sync
+tests.core.full_node.stores.test_hint_store
+tests.core.full_node.stores.test_sync_store
+tests.core.full_node.test_address_manager
+tests.core.full_node.test_block_height_map
+tests.core.full_node.test_conditions
+tests.core.full_node.test_full_node
+tests.core.full_node.test_node_load
+tests.core.full_node.test_peer_store_resolver
+tests.core.full_node.test_performance
+tests.core.full_node.test_transactions
+tests.core.make_block_generator
+tests.core.mempool.test_mempool
+tests.core.mempool.test_mempool_performance
+tests.core.server.test_dos
+tests.core.server.test_rate_limits
+tests.core.ssl.test_ssl
+tests.core.test_cost_calculation
+tests.core.test_crawler_rpc
+tests.core.test_daemon_rpc
+tests.core.test_db_conversion
+tests.core.test_filter
+tests.core.test_full_node_rpc
+tests.core.test_merkle_set
+tests.core.util.test_cached_bls
+tests.core.util.test_config
+tests.core.util.test_file_keyring_synchronization
+tests.core.util.test_files
+tests.core.util.test_keychain
+tests.core.util.test_keyring_wrapper
+tests.core.util.test_lru_cache
+tests.core.util.test_significant_bits
+tests.generator.test_scan
+tests.plotting.test_plot_manager
+tests.pools.test_pool_cmdline
+tests.pools.test_pool_config
+tests.pools.test_pool_puzzles_lifecycle
+tests.pools.test_wallet_pool_store
+tests.simulation.test_simulation
+tests.tools.test_run_block
+tests.util.benchmark_cost
+tests.util.generator_tools_testing
+tests.util.key_tool
+tests.util.test_full_block_utils
+tests.util.test_misc
+tests.util.test_network
+tests.wallet.cat_wallet.test_cat_lifecycle
+tests.wallet.cat_wallet.test_cat_wallet
+tests.wallet.cat_wallet.test_offer_lifecycle
+tests.wallet.cat_wallet.test_trades
+tests.wallet.did_wallet.test_did
+tests.wallet.nft_wallet.test_nft_puzzles
+tests.wallet.nft_wallet.test_nft_wallet
+tests.wallet.rpc.test_wallet_rpc
+tests.wallet.simple_sync.test_simple_sync_protocol
+tests.wallet.sync.test_wallet_sync
+tests.wallet.test_bech32m
+tests.wallet.test_chialisp
+tests.wallet.test_puzzle_store
+tests.wallet.test_singleton
+tests.wallet.test_singleton_lifecycle
+tests.wallet.test_singleton_lifecycle_fast
+tests.wallet.test_taproot
+tests.wallet.test_wallet_blockchain
+tests.wallet.test_wallet_interested_store
+tests.wallet.test_wallet_key_val_store
+tests.wallet.test_wallet_user_store
+tests.weight_proof.test_weight_proof
+tools.analyze-chain
+tools.run_block
+tools.test_full_sync
```

### Comparing `chia-blockchain-2.0.0b1/pylintrc` & `chia-blockchain-2.0.0b3/pylintrc`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/pytest.ini` & `chia-blockchain-2.0.0b3/pytest.ini`

 * *Files 22% similar despite different names*

```diff
@@ -5,14 +5,18 @@
 log_level = WARNING
 console_output_style = count
 log_format = %(asctime)s %(name)s: %(levelname)s %(message)s
 asyncio_mode = strict
 markers =
     benchmark
     data_layer: Mark as a data layer related test.
+    test_mark_a1: used in testing test utilities
+    test_mark_a2: used in testing test utilities
+    test_mark_b1: used in testing test utilities
+    test_mark_b2: used in testing test utilities
 testpaths = tests
 filterwarnings =
     error
     ignore:ssl_context is deprecated:DeprecationWarning
     ignore:Implicitly cleaning up:ResourceWarning
     ignore:unclosed <socket\.socket:ResourceWarning
     ignore:Unclosed client session:ResourceWarning
```

### Comparing `chia-blockchain-2.0.0b1/setup.py` & `chia-blockchain-2.0.0b3/setup.py`

 * *Files 6% similar despite different names*

```diff
@@ -3,42 +3,42 @@
 import os
 import sys
 
 from setuptools import setup
 
 dependencies = [
     "aiofiles==23.1.0",  # Async IO for files
-    "anyio==3.6.2",
-    "boto3==1.26.111",  # AWS S3 for DL s3 plugin
-    "blspy==1.0.16",  # Signature library
+    "blspy==2.0.0",  # Signature library
+    "anyio==3.7.0",
+    "boto3==1.26.148",  # AWS S3 for DL s3 plugin
     "chiavdf==1.0.8",  # timelord and vdf verification
     "chiabip158==1.2",  # bip158-style wallet filters
     "chiapos==1.0.11",  # proof of space
     "clvm==0.9.7",
     "clvm_tools==0.4.6",  # Currying, Program.to, other conveniences
-    "chia_rs==0.2.7",
-    "clvm-tools-rs==0.1.30",  # Rust implementation of clvm_tools' compiler
+    "chia_rs==0.2.8",
+    "clvm-tools-rs==0.1.34",  # Rust implementation of clvm_tools' compiler
     "aiohttp==3.8.4",  # HTTP server for full node rpc
     "aiosqlite==0.19.0",  # asyncio wrapper for sqlite, to store blocks
-    "bitstring==4.0.1",  # Binary data management library
+    "bitstring==4.0.2",  # Binary data management library
     "colorama==0.4.6",  # Colorizes terminal output
     "colorlog==6.7.0",  # Adds color to logs
-    "concurrent-log-handler==0.9.23",  # Concurrently log and rotate logs
-    "cryptography==39.0.1",  # Python cryptography library for TLS - keyring conflict
-    "filelock==3.12.0",  # For reading and writing config multiprocess and multithread safely  (non-reentrant locks)
+    "concurrent-log-handler==0.9.24",  # Concurrently log and rotate logs
+    "cryptography==41.0.1",  # Python cryptography library for TLS - keyring conflict
+    "filelock==3.12.2",  # For reading and writing config multiprocess and multithread safely  (non-reentrant locks)
     "keyring==23.13.1",  # Store keys in MacOS Keychain, Windows Credential Locker
     "PyYAML==6.0",  # Used for config file format
     "setproctitle==1.3.2",  # Gives the chia processes readable names
     "sortedcontainers==2.4.0",  # For maintaining sorted mempools
     "click==8.1.3",  # For the CLI
     "dnspython==2.3.0",  # Query DNS seeds
     "watchdog==2.2.0",  # Filesystem event watching - watches keyring.yaml
     "dnslib==0.9.23",  # dns lib
-    "typing-extensions==4.5.0",  # typing backports like Protocol and TypedDict
-    "zstd==1.5.4.0",
+    "typing-extensions==4.6.3",  # typing backports like Protocol and TypedDict
+    "zstd==1.5.5.1",
     "packaging==23.1",
     "psutil==5.9.4",
 ]
 
 upnp_dependencies = [
     "miniupnpc==2.2.2",  # Allows users to open ports on their router
 ]
@@ -59,15 +59,15 @@
     "twine",
     "isort",
     "flake8",
     "mypy",
     "black==23.3.0",
     "aiohttp_cors",  # For blackd
     "ipython",  # For asyncio debugging
-    "pyinstaller==5.10.1",
+    "pyinstaller==5.11.0",
     "types-aiofiles",
     "types-cryptography",
     "types-pkg_resources",
     "types-pyyaml",
     "types-setuptools",
 ]
 
@@ -114,19 +114,24 @@
         "chia.simulator",
         "chia.types.blockchain_format",
         "chia.types",
         "chia.util",
         "chia.wallet",
         "chia.wallet.db_wallet",
         "chia.wallet.puzzles",
+        "chia.wallet.puzzles.clawback",
+        "chia.wallet.puzzles.prefarm",
         "chia.wallet.cat_wallet",
         "chia.wallet.did_wallet",
         "chia.wallet.nft_wallet",
         "chia.wallet.trading",
         "chia.wallet.util",
+        "chia.wallet.vc_wallet",
+        "chia.wallet.vc_wallet.vc_puzzles",
+        "chia.wallet.vc_wallet.cr_puzzles",
         "chia.ssl",
         "mozilla-ca",
     ],
     entry_points={
         "console_scripts": [
             "chia = chia.cmds.chia:main",
             "chia_daemon = chia.daemon.server:main",
```

### Comparing `chia-blockchain-2.0.0b1/start-gui.sh` & `chia-blockchain-2.0.0b3/start-gui.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/README.md` & `chia-blockchain-2.0.0b3/tests/README.md`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/blockchain/blockchain_test_utils.py` & `chia-blockchain-2.0.0b3/tests/blockchain/blockchain_test_utils.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,14 +1,16 @@
-from typing import Optional, List
+from __future__ import annotations
 
-from chia.consensus.blockchain import Blockchain, AddBlockResult
+from typing import List, Optional
+
+from chia.consensus.blockchain import AddBlockResult, Blockchain
 from chia.consensus.multiprocess_validation import PreValidationResult
 from chia.types.full_block import FullBlock
 from chia.util.errors import Err
-from chia.util.ints import uint64, uint32
+from chia.util.ints import uint32, uint64
 
 
 async def check_block_store_invariant(bc: Blockchain):
     db_wrapper = bc.block_store.db_wrapper
 
     if db_wrapper.db_version == 1:
         return
```

### Comparing `chia-blockchain-2.0.0b1/tests/blockchain/test_blockchain.py` & `chia-blockchain-2.0.0b3/tests/blockchain/test_blockchain.py`

 * *Files 1% similar despite different names*

```diff
@@ -17,15 +17,15 @@
 from chia.consensus.blockchain import AddBlockResult
 from chia.consensus.coinbase import create_farmer_coin
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.multiprocess_validation import PreValidationResult
 from chia.consensus.pot_iterations import is_overflow_block
 from chia.full_node.bundle_tools import detect_potential_template_generator
 from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions
-from chia.simulator.block_tools import create_block_tools_async, test_constants
+from chia.simulator.block_tools import create_block_tools_async
 from chia.simulator.keyring import TempKeyring
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.blockchain_format.classgroup import ClassgroupElement
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.foliage import TransactionsInfo
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32
@@ -58,50 +58,59 @@
 from tests.util.blockchain import create_blockchain
 
 log = logging.getLogger(__name__)
 bad_element = ClassgroupElement.from_bytes(b"\x00")
 
 
 @asynccontextmanager
-async def make_empty_blockchain(constants: ConsensusConstants = test_constants):
+async def make_empty_blockchain(constants: ConsensusConstants):
     """
     Provides a list of 10 valid blocks, as well as a blockchain with 9 blocks added to it.
     """
 
     bc, db_wrapper, db_path = await create_blockchain(constants, 2)
     yield bc
 
     await db_wrapper.close()
     bc.shut_down()
     db_path.unlink()
 
 
 class TestGenesisBlock:
     @pytest.mark.asyncio
-    async def test_block_tools_proofs_400(self, default_400_blocks):
+    async def test_block_tools_proofs_400(self, default_400_blocks, blockchain_constants):
         vdf, proof = get_vdf_info_and_proof(
-            test_constants, ClassgroupElement.get_default_element(), test_constants.GENESIS_CHALLENGE, uint64(231)
+            blockchain_constants,
+            ClassgroupElement.get_default_element(),
+            blockchain_constants.GENESIS_CHALLENGE,
+            uint64(231),
         )
-        if proof.is_valid(test_constants, ClassgroupElement.get_default_element(), vdf) is False:
+        if proof.is_valid(blockchain_constants, ClassgroupElement.get_default_element(), vdf) is False:
             raise Exception("invalid proof")
 
     @pytest.mark.asyncio
-    async def test_block_tools_proofs_1000(self, default_1000_blocks):
+    async def test_block_tools_proofs_1000(self, default_1000_blocks, blockchain_constants):
         vdf, proof = get_vdf_info_and_proof(
-            test_constants, ClassgroupElement.get_default_element(), test_constants.GENESIS_CHALLENGE, uint64(231)
+            blockchain_constants,
+            ClassgroupElement.get_default_element(),
+            blockchain_constants.GENESIS_CHALLENGE,
+            uint64(231),
         )
-        if proof.is_valid(test_constants, ClassgroupElement.get_default_element(), vdf) is False:
+        if proof.is_valid(blockchain_constants, ClassgroupElement.get_default_element(), vdf) is False:
             raise Exception("invalid proof")
 
     @pytest.mark.asyncio
-    async def test_block_tools_proofs(self):
+    async def test_block_tools_proofs(self, blockchain_constants):
         vdf, proof = get_vdf_info_and_proof(
-            test_constants, ClassgroupElement.get_default_element(), test_constants.GENESIS_CHALLENGE, uint64(231)
+            blockchain_constants,
+            ClassgroupElement.get_default_element(),
+            blockchain_constants.GENESIS_CHALLENGE,
+            uint64(231),
         )
-        if proof.is_valid(test_constants, ClassgroupElement.get_default_element(), vdf) is False:
+        if proof.is_valid(blockchain_constants, ClassgroupElement.get_default_element(), vdf) is False:
             raise Exception("invalid proof")
 
     @pytest.mark.asyncio
     async def test_non_overflow_genesis(self, empty_blockchain, bt):
         assert empty_blockchain.get_peak() is None
         genesis = bt.get_consecutive_blocks(1, force_overflow=False)[0]
         await _validate_and_add_block(empty_blockchain, genesis)
@@ -541,17 +550,17 @@
             ),
         )
         block_0_bad = recursive_replace(
             blocks[0], "finished_sub_slots", [new_finished_ss] + blocks[0].finished_sub_slots[1:]
         )
         await _validate_and_add_block(empty_blockchain, block_0_bad, expected_error=Err.SHOULD_NOT_HAVE_ICC)
 
-    async def do_test_invalid_icc_sub_slot_vdf(self, keychain, db_version):
+    async def do_test_invalid_icc_sub_slot_vdf(self, keychain, db_version, constants: ConsensusConstants):
         bt_high_iters = await create_block_tools_async(
-            constants=test_constants.replace(SUB_SLOT_ITERS_STARTING=(2**12), DIFFICULTY_STARTING=(2**14)),
+            constants=constants.replace(SUB_SLOT_ITERS_STARTING=(2**12), DIFFICULTY_STARTING=(2**14)),
             keychain=keychain,
         )
         bc1, db_wrapper, db_path = await create_blockchain(bt_high_iters.constants, db_version)
         blocks = bt_high_iters.get_consecutive_blocks(10)
         for block in blocks:
             if len(block.finished_sub_slots) > 0 and block.finished_sub_slots[-1].infused_challenge_chain is not None:
                 # Bad iters
@@ -623,29 +632,29 @@
             await _validate_and_add_block(bc1, block)
 
         await db_wrapper.close()
         bc1.shut_down()
         db_path.unlink()
 
     @pytest.mark.asyncio
-    async def test_invalid_icc_sub_slot_vdf(self, db_version):
+    async def test_invalid_icc_sub_slot_vdf(self, db_version, blockchain_constants):
         with TempKeyring() as keychain:
-            await self.do_test_invalid_icc_sub_slot_vdf(keychain, db_version)
+            await self.do_test_invalid_icc_sub_slot_vdf(keychain, db_version, blockchain_constants)
 
     @pytest.mark.asyncio
     async def test_invalid_icc_into_cc(self, empty_blockchain, bt):
         blockchain = empty_blockchain
         blocks = bt.get_consecutive_blocks(1)
         await _validate_and_add_block(blockchain, blocks[0])
         case_1, case_2 = False, False
         while not case_1 or not case_2:
             blocks = bt.get_consecutive_blocks(1, block_list_input=blocks, skip_slots=1)
             block = blocks[-1]
             if len(block.finished_sub_slots) > 0 and block.finished_sub_slots[-1].infused_challenge_chain is not None:
-                if block.finished_sub_slots[-1].reward_chain.deficit == test_constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK:
+                if block.finished_sub_slots[-1].reward_chain.deficit == bt.constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK:
                     # 2g
                     case_1 = True
                     new_finished_ss = recursive_replace(
                         block.finished_sub_slots[-1],
                         "challenge_chain",
                         replace(
                             block.finished_sub_slots[-1].challenge_chain,
@@ -752,16 +761,16 @@
         await _validate_and_add_block(blockchain, block_bad, expected_result=AddBlockResult.INVALID_BLOCK)
 
     @pytest.mark.asyncio
     async def test_empty_sub_slots_epoch(self, empty_blockchain, default_400_blocks, bt):
         # 2m
         # Tests adding an empty sub slot after the sub-epoch / epoch.
         # Also tests overflow block in epoch
-        blocks_base = default_400_blocks[: test_constants.EPOCH_BLOCKS]
-        assert len(blocks_base) == test_constants.EPOCH_BLOCKS
+        blocks_base = default_400_blocks[: bt.constants.EPOCH_BLOCKS]
+        assert len(blocks_base) == bt.constants.EPOCH_BLOCKS
         blocks_1 = bt.get_consecutive_blocks(1, block_list_input=blocks_base, force_overflow=True)
         blocks_2 = bt.get_consecutive_blocks(1, skip_slots=3, block_list_input=blocks_base, force_overflow=True)
         for block in blocks_base:
             await _validate_and_add_block(empty_blockchain, block, skip_prevalidation=True)
         await _validate_and_add_block(
             empty_blockchain, blocks_1[-1], expected_result=AddBlockResult.NEW_PEAK, skip_prevalidation=True
         )
@@ -795,15 +804,15 @@
         found_overflow_slot: bool = False
 
         while not found_overflow_slot:
             blocks = bt.get_consecutive_blocks(1, blocks)
             block = blocks[-1]
             if (
                 len(block.finished_sub_slots)
-                and is_overflow_block(test_constants, block.reward_chain_block.signage_point_index)
+                and is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index)
                 and block.finished_sub_slots[-1].challenge_chain.challenge_chain_end_of_slot_vdf.output
                 != ClassgroupElement.get_default_element()
             ):
                 found_overflow_slot = True
                 # Bad iters
                 new_finished_ss = recursive_replace(
                     block.finished_sub_slots[-1],
@@ -965,15 +974,15 @@
         block = bt.get_consecutive_blocks(1, skip_slots=2)[0]
         new_finished_ss = recursive_replace(
             block.finished_sub_slots[-1],
             "reward_chain",
             recursive_replace(
                 block.finished_sub_slots[-1].reward_chain,
                 "deficit",
-                test_constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK - 1,
+                bt.constants.MIN_BLOCKS_PER_CHALLENGE_BLOCK - 1,
             ),
         )
         block_bad = recursive_replace(block, "finished_sub_slots", block.finished_sub_slots[:-1] + [new_finished_ss])
         await _validate_and_add_block(empty_blockchain, block_bad, expected_error=Err.INVALID_DEFICIT)
 
     @pytest.mark.asyncio
     async def test_reset_deficit(self, empty_blockchain, bt):
@@ -1042,15 +1051,15 @@
         # 3b
         blocks = bt.get_consecutive_blocks(1)
         await _validate_and_add_block(empty_blockchain, blocks[0])
 
         while True:
             blocks = bt.get_consecutive_blocks(1, block_list_input=blocks)
             if len(blocks[-1].finished_sub_slots) > 0 and is_overflow_block(
-                test_constants, blocks[-1].reward_chain_block.signage_point_index
+                bt.constants, blocks[-1].reward_chain_block.signage_point_index
             ):
                 new_finished_ss: EndOfSubSlotBundle = recursive_replace(
                     blocks[-1].finished_sub_slots[0],
                     "challenge_chain",
                     recursive_replace(
                         blocks[-1].finished_sub_slots[0].challenge_chain,
                         "subepoch_summary_hash",
@@ -1127,20 +1136,20 @@
     async def test_bad_signage_point_index(self, empty_blockchain, bt):
         # 6
         blocks = bt.get_consecutive_blocks(2)
         await _validate_and_add_block(empty_blockchain, blocks[0])
 
         with pytest.raises(ValueError):
             block_bad = recursive_replace(
-                blocks[-1], "reward_chain_block.signage_point_index", test_constants.NUM_SPS_SUB_SLOT
+                blocks[-1], "reward_chain_block.signage_point_index", bt.constants.NUM_SPS_SUB_SLOT
             )
             await _validate_and_add_block(empty_blockchain, block_bad, expected_error=Err.INVALID_SP_INDEX)
         with pytest.raises(ValueError):
             block_bad = recursive_replace(
-                blocks[-1], "reward_chain_block.signage_point_index", test_constants.NUM_SPS_SUB_SLOT + 1
+                blocks[-1], "reward_chain_block.signage_point_index", bt.constants.NUM_SPS_SUB_SLOT + 1
             )
             await _validate_and_add_block(empty_blockchain, block_bad, expected_error=Err.INVALID_SP_INDEX)
 
     @pytest.mark.asyncio
     async def test_sp_0_no_sp(self, empty_blockchain, bt):
         # 7
         blocks = []
@@ -1148,15 +1157,15 @@
         while not case_1 or not case_2:
             blocks = bt.get_consecutive_blocks(1, block_list_input=blocks)
             if blocks[-1].reward_chain_block.signage_point_index == 0:
                 case_1 = True
                 block_bad = recursive_replace(blocks[-1], "reward_chain_block.signage_point_index", uint8(1))
                 await _validate_and_add_block(empty_blockchain, block_bad, expected_error=Err.INVALID_SP_INDEX)
 
-            elif not is_overflow_block(test_constants, blocks[-1].reward_chain_block.signage_point_index):
+            elif not is_overflow_block(bt.constants, blocks[-1].reward_chain_block.signage_point_index):
                 case_2 = True
                 block_bad = recursive_replace(blocks[-1], "reward_chain_block.signage_point_index", uint8(0))
                 await _validate_and_add_block_multi_error(
                     empty_blockchain, block_bad, [Err.INVALID_SP_INDEX, Err.INVALID_POSPACE]
                 )
             await _validate_and_add_block(empty_blockchain, blocks[-1])
 
@@ -1489,19 +1498,19 @@
     @pytest.mark.parametrize("with_softfork2", [False, True])
     async def test_bad_timestamp(self, bt, with_softfork2):
         # 26
         if with_softfork2:
             # enable softfork2 at height 0, to make it apply to this test
             # the test constants set MAX_FUTURE_TIME to 10 days, restore it to
             # default for this test
-            constants = test_constants.replace(SOFT_FORK2_HEIGHT=0, MAX_FUTURE_TIME=5 * 60)
-            time_delta = 2 * 60
+            constants = bt.constants.replace(SOFT_FORK2_HEIGHT=0, MAX_FUTURE_TIME=5 * 60)
+            time_delta = 2 * 60 + 1
         else:
-            constants = test_constants.replace(MAX_FUTURE_TIME=5 * 60)
-            time_delta = 5 * 60
+            constants = bt.constants.replace(MAX_FUTURE_TIME=5 * 60)
+            time_delta = 5 * 60 + 1
 
         blocks = bt.get_consecutive_blocks(1)
 
         async with make_empty_blockchain(constants) as b:
             await _validate_and_add_block(b, blocks[0])
             while True:
                 blocks = bt.get_consecutive_blocks(1, block_list_input=blocks)
@@ -1923,17 +1932,17 @@
             (co.ASSERT_BEFORE_SECONDS_ABSOLUTE, 10031, rbr.NEW_PEAK),
             (co.ASSERT_BEFORE_SECONDS_ABSOLUTE, 10032, rbr.NEW_PEAK),
         ],
     )
     async def test_timelock_conditions(self, opcode, lock_value, expected, with_softfork2, bt):
         if with_softfork2:
             # enable softfork2 at height 0, to make it apply to this test
-            constants = test_constants.replace(SOFT_FORK2_HEIGHT=0)
+            constants = bt.constants.replace(SOFT_FORK2_HEIGHT=0)
         else:
-            constants = test_constants
+            constants = bt.constants
 
             # if the softfork is not active in this test, fixup all the
             # tests to instead expect NEW_PEAK unconditionally
             if opcode in [
                 ConditionOpcode.ASSERT_MY_BIRTH_HEIGHT,
                 ConditionOpcode.ASSERT_MY_BIRTH_SECONDS,
                 ConditionOpcode.ASSERT_BEFORE_SECONDS_RELATIVE,
@@ -2113,29 +2122,29 @@
             (co.ASSERT_BEFORE_SECONDS_ABSOLUTE, 10031, rbr.NEW_PEAK),
             (co.ASSERT_BEFORE_SECONDS_ABSOLUTE, 10032, rbr.NEW_PEAK),
         ],
     )
     async def test_ephemeral_timelock(self, opcode, lock_value, expected, with_garbage, with_softfork2, bt):
         if with_softfork2:
             # enable softfork2 at height 0, to make it apply to this test
-            constants = test_constants.replace(SOFT_FORK2_HEIGHT=0)
+            constants = bt.constants.replace(SOFT_FORK2_HEIGHT=0)
 
             # after the softfork, we don't allow any birth assertions, not
             # relative time locks on ephemeral coins. This test is only for
             # ephemeral coins, so these cases should always fail
             if opcode in [
                 ConditionOpcode.ASSERT_MY_BIRTH_HEIGHT,
                 ConditionOpcode.ASSERT_MY_BIRTH_SECONDS,
                 ConditionOpcode.ASSERT_SECONDS_RELATIVE,
                 ConditionOpcode.ASSERT_HEIGHT_RELATIVE,
             ]:
                 expected = AddBlockResult.INVALID_BLOCK
 
         else:
-            constants = test_constants
+            constants = bt.constants
 
             # if the softfork is not active in this test, fixup all the
             # tests to instead expect NEW_PEAK unconditionally
             if opcode in [
                 ConditionOpcode.ASSERT_MY_BIRTH_HEIGHT,
                 ConditionOpcode.ASSERT_MY_BIRTH_SECONDS,
                 ConditionOpcode.ASSERT_BEFORE_HEIGHT_RELATIVE,
@@ -2673,15 +2682,15 @@
     async def test_max_coin_amount(self, db_version, bt):
         # 10
         # TODO: fix, this is not reaching validation. Because we can't create a block with such amounts due to uint64
         # limit in Coin
         pass
         #
         # with TempKeyring() as keychain:
-        #     new_test_constants = test_constants.replace(
+        #     new_test_constants = bt.constants.replace(
         #         **{"GENESIS_PRE_FARM_POOL_PUZZLE_HASH": bt.pool_ph, "GENESIS_PRE_FARM_FARMER_PUZZLE_HASH": bt.pool_ph}
         #     )
         #     b, db_wrapper, db_path = await create_blockchain(new_test_constants, db_version)
         #     bt_2 = await create_block_tools_async(constants=new_test_constants, keychain=keychain)
         #     bt_2.constants = bt_2.constants.replace(
         #         **{"GENESIS_PRE_FARM_POOL_PUZZLE_HASH": bt.pool_ph, "GENESIS_PRE_FARM_FARMER_PUZZLE_HASH": bt.pool_ph}
         #     )
@@ -3130,16 +3139,16 @@
         assert b.get_peak().height == 16
 
     @pytest.mark.asyncio
     async def test_long_reorg(self, empty_blockchain, default_1500_blocks, test_long_reorg_blocks, bt):
         # Reorg longer than a difficulty adjustment
         # Also tests higher weight chain but lower height
         b = empty_blockchain
-        num_blocks_chain_1 = 3 * test_constants.EPOCH_BLOCKS + test_constants.MAX_SUB_SLOT_BLOCKS + 10
-        num_blocks_chain_2_start = test_constants.EPOCH_BLOCKS - 20
+        num_blocks_chain_1 = 3 * bt.constants.EPOCH_BLOCKS + bt.constants.MAX_SUB_SLOT_BLOCKS + 10
+        num_blocks_chain_2_start = bt.constants.EPOCH_BLOCKS - 20
 
         assert num_blocks_chain_1 < 10000
         blocks = default_1500_blocks[:num_blocks_chain_1]
 
         for block in blocks:
             await _validate_and_add_block(b, block, skip_prevalidation=True)
         chain_1_height = b.get_peak().height
```

### Comparing `chia-blockchain-2.0.0b1/tests/blockchain/test_blockchain_transactions.py` & `chia-blockchain-2.0.0b3/tests/blockchain/test_blockchain_transactions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/build-init-files.py` & `chia-blockchain-2.0.0b3/tests/build-init-files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/build-job-matrix.py` & `chia-blockchain-2.0.0b3/tests/build-job-matrix.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/check_pytest_monitor_output.py` & `chia-blockchain-2.0.0b3/tests/check_pytest_monitor_output.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/check_sql_statements.py` & `chia-blockchain-2.0.0b3/tests/check_sql_statements.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/chia-start-sim` & `chia-blockchain-2.0.0b3/tests/chia-start-sim`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/benchmark_costs.py` & `chia-blockchain-2.0.0b3/tests/clvm/benchmark_costs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/coin_store.py` & `chia-blockchain-2.0.0b3/tests/clvm/coin_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -55,15 +55,15 @@
         return coin
 
     def validate_spend_bundle(self, spend_bundle: SpendBundle, now: CoinTimestamp, max_cost: int) -> int:
         # this should use blockchain consensus code
 
         program = simple_solution_generator(spend_bundle)
         # always use the post soft-fork2 semantics
-        result: NPCResult = get_name_puzzle_conditions(program, max_cost, mempool_mode=True, height=uint32(4000000))
+        result: NPCResult = get_name_puzzle_conditions(program, max_cost, mempool_mode=True, height=uint32(3886635))
         if result.error is not None:
             raise BadSpendBundleError(f"condition validation failure {Err(result.error)}")
 
         ephemeral_db = dict(self._db)
         assert result.conds is not None
         for spend in result.conds.spends:
             for puzzle_hash, amount, hint in spend.create_coin:
```

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_chialisp_deserialization.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_chialisp_deserialization.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_clvm_step.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_clvm_step.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_curry_and_treehash.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_curry_and_treehash.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_program.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_puzzle_compression.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_puzzle_compression.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,16 +6,15 @@
 
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.types.spend_bundle import SpendBundle
 from chia.util.ints import uint64
-from chia.wallet.cat_wallet.cat_utils import construct_cat_puzzle
-from chia.wallet.puzzles.cat_loader import CAT_MOD
+from chia.wallet.cat_wallet.cat_utils import CAT_MOD, construct_cat_puzzle
 from chia.wallet.puzzles.p2_delegated_puzzle_or_hidden_puzzle import puzzle_for_pk
 from chia.wallet.trading.offer import OFFER_MOD, OFFER_MOD_OLD
 from chia.wallet.util.puzzle_compression import (
     LATEST_VERSION,
     compress_object_with_puzzles,
     decompress_object_with_puzzles,
     lowest_best_version,
```

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_puzzle_drivers.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_puzzle_drivers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_puzzles.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_puzzles.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,14 +6,15 @@
 from blspy import AugSchemeMPL, BasicSchemeMPL, G1Element, G2Element
 
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.types.spend_bundle import SpendBundle
 from chia.util.hash import std_hash
+from chia.util.ints import uint64
 from chia.wallet.puzzles import (
     p2_conditions,
     p2_delegated_conditions,
     p2_delegated_puzzle,
     p2_delegated_puzzle_or_hidden_puzzle,
     p2_m_of_n_delegate_direct,
     p2_puzzle_hash,
@@ -97,15 +98,15 @@
 ) -> Tuple[List[Tuple[bytes32, int]], Program]:
     # the coin we get from coin_db.farm_coin only has amount 1024, so we can
     # only make small payments to avoid failing with MINTING_COIN
     payments = [
         (throwaway_puzzle_hash(initial_index + 1, key_lookup), initial_index * 10),
         (throwaway_puzzle_hash(initial_index + 2, key_lookup), (initial_index + 1) * 10),
     ]
-    conditions = Program.to([make_create_coin_condition(ph, amount, []) for ph, amount in payments])
+    conditions = Program.to([make_create_coin_condition(ph, uint64(amount), []) for ph, amount in payments])
     return payments, conditions
 
 
 class TestPuzzles(TestCase):
     def test_p2_conditions(self):
         key_lookup = KeyTool()
         payments, conditions = default_payments_and_conditions(1, key_lookup)
```

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_serialized_program.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_serialized_program.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_singletons.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_singletons.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/clvm/test_spend_sim.py` & `chia-blockchain-2.0.0b3/tests/clvm/test_spend_sim.py`

 * *Files 2% similar despite different names*

```diff
@@ -124,14 +124,14 @@
             await sim.farm_block()
             latest_block = sim.block_records[-1]
             additions, removals = await sim_client.get_additions_and_removals(latest_block.header_hash)
             assert additions
             assert removals
 
             # get_puzzle_and_solution
-            coin_solution = await sim_client.get_puzzle_and_solution(spendable_coin.name(), latest_block.height)
-            assert coin_solution
+            coin_spend = await sim_client.get_puzzle_and_solution(spendable_coin.name(), latest_block.height)
+            assert coin_spend == bundle.coin_spends[0]
 
             # get_coin_records_by_parent_ids
             new_coin = next(x.coin for x in additions if x.coin.puzzle_hash == puzzle_hash)
             coin_records = await sim_client.get_coin_records_by_parent_ids([spendable_coin.name()])
             assert coin_records[0].coin.name() == new_coin.name()
```

### Comparing `chia-blockchain-2.0.0b1/tests/cmds/test_sim.py` & `chia-blockchain-2.0.0b3/tests/cmds/test_sim.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,9 +1,10 @@
 from __future__ import annotations
 
+from pathlib import Path
 from shutil import rmtree
 
 from click.testing import CliRunner, Result
 
 from chia.cmds.chia import cli
 from chia.util.default_root import SIMULATOR_ROOT_PATH
 
@@ -11,71 +12,81 @@
     "cup smoke miss park baby say island tomorrow segment lava bitter easily settle gift renew arrive kangaroo dilemma "
     "organ skin design salt history awesome"
 )
 fingerprint = 2640131813
 std_farming_address = "txch1mh4qanzyawn3v4uphgaj2cg6hrjazwyp0sx653fhn9apg6mfajlqtj0ztp"
 burn_address = "txch1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqm6ksh7qddh"  # 0x0...dead
 
+SIMULATOR_ROOT_PATH.mkdir(parents=True, exist_ok=True)  # this simplifies code later
+
+
+def get_profile_path(starting_string: str) -> str:
+    """
+    Returns the name of a profile that does not exist yet.
+    """
+    i = 0
+    while Path(SIMULATOR_ROOT_PATH / (starting_string + str(i))).exists():
+        i += 1
+    return starting_string + str(i)
+
 
 def test_every_simulator_command() -> None:
+    starting_str = "ci_test"
+    simulator_name = get_profile_path(starting_str)
     runner: CliRunner = CliRunner()
     address = std_farming_address
-    start_result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "create", "-bm", mnemonic])
+    start_result: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "create", "-bm", mnemonic])
     assert start_result.exit_code == 0
     assert f"Farming & Prefarm reward address: {address}" in start_result.output
     assert "chia_full_node_simulator: started" in start_result.output
     assert "Genesis block generated, exiting." in start_result.output
     try:
         # run all tests
-        run_all_tests(runner, address)
-    except AssertionError:
-        stop_simulator(runner)
-        raise
-
-    stop_simulator(runner)
+        run_all_tests(runner, address, simulator_name)
+    finally:
+        stop_simulator(runner, simulator_name)
 
 
 def test_custom_farming_address() -> None:
     runner: CliRunner = CliRunner()
     address = burn_address
+    starting_str = "ci_address_test"
+    simulator_name = get_profile_path(starting_str)
     start_result: Result = runner.invoke(
-        cli, ["dev", "sim", "-n", "ci_test", "create", "-bm", mnemonic, "--reward-address", address]
+        cli, ["dev", "sim", "-n", simulator_name, "create", "-bm", mnemonic, "--reward-address", address]
     )
     assert start_result.exit_code == 0
     assert f"Farming & Prefarm reward address: {address}" in start_result.output
     assert "chia_full_node_simulator: started" in start_result.output
     assert "Genesis block generated, exiting." in start_result.output
 
     try:
         # just run status test
-        _test_sim_status(runner, address)
-    except AssertionError:
-        stop_simulator(runner)
-        raise
-
-    stop_simulator(runner)
+        _test_sim_status(runner, address, simulator_name)
+    finally:
+        stop_simulator(runner, simulator_name)
 
 
-def stop_simulator(runner: CliRunner) -> None:
+def stop_simulator(runner: CliRunner, simulator_name: str) -> None:
     """Stop simulator."""
-    result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "-n", "ci_test", "stop", "-d"])
+    result: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "stop", "-d"])
     assert result.exit_code == 0
     assert "chia_full_node_simulator: Stopped\nDaemon stopped\n" == result.output
-    rmtree(SIMULATOR_ROOT_PATH / "ci_test")
+    rmtree(SIMULATOR_ROOT_PATH / simulator_name)
 
 
-def run_all_tests(runner: CliRunner, address: str) -> None:
+def run_all_tests(runner: CliRunner, address: str, simulator_name: str) -> None:
     """Run all tests."""
-    _test_sim_status(runner, address)
-    _test_farm_and_revert_block(runner, address)
+    _test_sim_status(runner, address, simulator_name)
+    _test_farm_and_revert_block(runner, address, simulator_name)
 
 
-def _test_sim_status(runner: CliRunner, address: str) -> None:
+def _test_sim_status(runner: CliRunner, address: str, simulator_name: str) -> None:
     # show everything
-    result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "status", "--show-key", "-cia"])
+    result: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "status", "--show-key", "-cia"])
     assert result.exit_code == 0
     # asserts are grouped by arg
     assert f"Fingerprint: {fingerprint}" and f"Mnemonic seed (24 secret words):\n{mnemonic}" in result.output  # -k
 
     assert "Network: simulator0" and "Current Blockchain Status: Full Node Synced" in result.output  # default
     assert "Height:          1" in result.output  # default
     assert f"Current Farming address: {address}, with a balance of: 21000000.0 TXCH." in result.output  # default
@@ -83,47 +94,49 @@
     assert (
         f"Address: {address} has a balance of: 21000000000000000000 mojo, with a total of: 2 transactions."
         in result.output
     )  # -ia
     assert "Coin Amount: 2625000000000000000 mojo" in result.output  # -ic
 
 
-def _test_farm_and_revert_block(runner: CliRunner, address: str) -> None:
+def _test_farm_and_revert_block(runner: CliRunner, address: str, simulator_name: str) -> None:
     # make 5 blocks
-    five_blocks_result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "farm", "-b", "5", "-a", address])
+    five_blocks_result: Result = runner.invoke(
+        cli, ["dev", "sim", "-n", simulator_name, "farm", "-b", "5", "-a", address]
+    )
     assert five_blocks_result.exit_code == 0
     assert "Farmed 5 Transaction blocks" in five_blocks_result.output
 
     # check that height increased
-    five_blocks_check: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "status"])
+    five_blocks_check: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "status"])
     assert five_blocks_check.exit_code == 0
     assert "Height:          6" in five_blocks_check.output
 
     # do a reorg, 3 blocks back, 2 blocks forward, height now 8
-    reorg_result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "revert", "-b", "3", "-n", "2"])
+    reorg_result: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "revert", "-b", "3", "-n", "2"])
     assert reorg_result.exit_code == 0
     assert "Block: 3 and above " and "Block Height is now: 8" in reorg_result.output
 
     # check that height changed by 2
-    reorg_check: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "status"])
+    reorg_check: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "status"])
     assert reorg_check.exit_code == 0
     assert "Height:          8" in reorg_check.output
 
     # do a forceful reorg 4 blocks back
-    forced_reorg_result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "revert", "-b", "4", "-fd"])
+    forced_reorg_result: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "revert", "-b", "4", "-fd"])
     assert forced_reorg_result.exit_code == 0
     assert "Block: 8 and above were successfully deleted" and "Block Height is now: 4" in forced_reorg_result.output
 
     # check that height changed by 4
-    forced_reorg_check: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "status"])
+    forced_reorg_check: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "status"])
     assert forced_reorg_check.exit_code == 0
     assert "Height:          4" in forced_reorg_check.output
 
     # test chain reset to genesis
-    genesis_reset_result: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "revert", "-fd", "--reset"])
+    genesis_reset_result: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "revert", "-fd", "--reset"])
     assert genesis_reset_result.exit_code == 0
     assert "Block: 2 and above were successfully deleted" and "Block Height is now: 1" in genesis_reset_result.output
 
     # check that height changed to 1
-    genesis_reset_check: Result = runner.invoke(cli, ["dev", "sim", "-n", "ci_test", "status"])
+    genesis_reset_check: Result = runner.invoke(cli, ["dev", "sim", "-n", simulator_name, "status"])
     assert genesis_reset_check.exit_code == 0
     assert "Height:          1" in genesis_reset_check.output
```

### Comparing `chia-blockchain-2.0.0b1/tests/cmds/test_wallet_check.py` & `chia-blockchain-2.0.0b3/tests/cmds/test_wallet_check.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/conftest.py` & `chia-blockchain-2.0.0b3/tests/conftest.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,50 +2,58 @@
 from __future__ import annotations
 
 import datetime
 import multiprocessing
 import os
 import sysconfig
 import tempfile
+from enum import Enum
 from typing import Any, AsyncIterator, Dict, Iterator, List, Tuple, Union
 
 import aiohttp
 import pytest
 import pytest_asyncio
 
 # TODO: update after resolution in https://github.com/pytest-dev/pytest/issues/7469
 from _pytest.fixtures import SubRequest
 
-# Set spawn after stdlib imports, but before other imports
 from chia.clvm.spend_sim import CostLogger
+
+# Set spawn after stdlib imports, but before other imports
+from chia.consensus.constants import ConsensusConstants
 from chia.full_node.full_node import FullNode
 from chia.full_node.full_node_api import FullNodeAPI
 from chia.protocols import full_node_protocol
+from chia.rpc.wallet_rpc_client import WalletRpcClient
+from chia.seeder.crawler import Crawler
+from chia.seeder.crawler_api import CrawlerAPI
 from chia.server.server import ChiaServer
 from chia.server.start_service import Service
 from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.setup_nodes import (
     SimulatorsAndWallets,
+    setup_full_system,
     setup_full_system_connect_to_deamon,
     setup_n_nodes,
     setup_simulators_and_wallets,
     setup_simulators_and_wallets_service,
     setup_two_nodes,
 )
-from chia.simulator.setup_services import setup_daemon, setup_introducer, setup_timelord
+from chia.simulator.setup_services import setup_crawler, setup_daemon, setup_introducer, setup_timelord
 from chia.simulator.time_out_assert import time_out_assert
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.peer_info import PeerInfo
 from chia.util.config import create_default_chia_config, lock_and_load_config
 from chia.util.ints import uint16, uint64
 from chia.util.keychain import Keychain
 from chia.util.task_timing import main as task_instrumentation_main
 from chia.util.task_timing import start_task_instrumentation, stop_task_instrumentation
 from chia.wallet.wallet import Wallet
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 from tests.core.data_layer.util import ChiaRoot
 from tests.core.node_height import node_height_at_least
 from tests.simulation.test_simulation import test_constants_modified
 
 multiprocessing.set_start_method("spawn")
 
 from pathlib import Path
@@ -80,18 +88,34 @@
 @pytest.fixture(scope="session")
 def get_keychain():
     with TempKeyring() as keychain:
         yield keychain
         KeyringWrapper.cleanup_shared_instance()
 
 
+class Mode(Enum):
+    PLAIN = 0
+
+
+@pytest.fixture(scope="session", params=[Mode.PLAIN])
+def consensus_mode(request):
+    return request.param
+
+
+@pytest.fixture(scope="session")
+def blockchain_constants(consensus_mode) -> ConsensusConstants:
+    if consensus_mode == Mode.PLAIN:
+        return test_constants
+    raise AssertionError("Invalid Blockchain mode in simulation")
+
+
 @pytest.fixture(scope="session", name="bt")
-def block_tools_fixture(get_keychain) -> BlockTools:
+def block_tools_fixture(get_keychain, blockchain_constants) -> BlockTools:
     # Note that this causes a lot of CPU and disk traffic - disk, DB, ports, process creation ...
-    _shared_block_tools = create_block_tools(constants=test_constants, keychain=get_keychain)
+    _shared_block_tools = create_block_tools(constants=blockchain_constants, keychain=get_keychain)
     return _shared_block_tools
 
 
 # if you have a system that has an unusual hostname for localhost and you want
 # to run the tests, change the `self_hostname` fixture
 @pytest_asyncio.fixture(scope="session")
 def self_hostname():
@@ -104,22 +128,21 @@
 #       When not there, Python complains since, well, the symlink is not a directory nor points to a directory.
 #
 #       Now that we have removed the global at tests.setup_nodes.bt, we can move the imports out of
 #       the fixtures below. Just be aware of the filesystem modification during bt fixture creation
 
 
 @pytest_asyncio.fixture(scope="function", params=[1, 2])
-async def empty_blockchain(request):
+async def empty_blockchain(request, blockchain_constants):
     """
     Provides a list of 10 valid blocks, as well as a blockchain with 9 blocks added to it.
     """
-    from chia.simulator.setup_nodes import test_constants
     from tests.util.blockchain import create_blockchain
 
-    bc1, db_wrapper, db_path = await create_blockchain(test_constants, request.param)
+    bc1, db_wrapper, db_path = await create_blockchain(blockchain_constants, request.param)
     yield bc1
 
     await db_wrapper.close()
     bc1.shut_down()
     db_path.unlink()
 
 
@@ -129,15 +152,15 @@
 
 
 @pytest.fixture(scope="function", params=[1, 2])
 def db_version(request) -> int:
     return request.param
 
 
-@pytest.fixture(scope="function", params=[1000000, 3630000, 4000000])
+@pytest.fixture(scope="function", params=[1000000, 3886635, 4410000, 5496000])
 def softfork_height(request) -> int:
     return request.param
 
 
 saved_blocks_version = "rc5"
 
 
@@ -259,40 +282,40 @@
     if request:
         params = request.param
     async for (sims, wallets, bt) in setup_simulators_and_wallets(1, 0, {}, **params):
         yield sims[0]
 
 
 @pytest_asyncio.fixture(scope="function")
-async def two_nodes(db_version, self_hostname):
-    async for _ in setup_two_nodes(test_constants, db_version=db_version, self_hostname=self_hostname):
+async def two_nodes(db_version, self_hostname, blockchain_constants):
+    async for _ in setup_two_nodes(blockchain_constants, db_version=db_version, self_hostname=self_hostname):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def setup_two_nodes_fixture(db_version):
     async for _ in setup_simulators_and_wallets(2, 0, {}, db_version=db_version):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
-async def three_nodes(db_version, self_hostname):
-    async for _ in setup_n_nodes(test_constants, 3, db_version=db_version, self_hostname=self_hostname):
+async def three_nodes(db_version, self_hostname, blockchain_constants):
+    async for _ in setup_n_nodes(blockchain_constants, 3, db_version=db_version, self_hostname=self_hostname):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
-async def four_nodes(db_version, self_hostname):
-    async for _ in setup_n_nodes(test_constants, 4, db_version=db_version, self_hostname=self_hostname):
+async def four_nodes(db_version, self_hostname, blockchain_constants):
+    async for _ in setup_n_nodes(blockchain_constants, 4, db_version=db_version, self_hostname=self_hostname):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
-async def five_nodes(db_version, self_hostname):
-    async for _ in setup_n_nodes(test_constants, 5, db_version=db_version, self_hostname=self_hostname):
+async def five_nodes(db_version, self_hostname, blockchain_constants):
+    async for _ in setup_n_nodes(blockchain_constants, 5, db_version=db_version, self_hostname=self_hostname):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def wallet_nodes():
     async_gen = setup_simulators_and_wallets(2, 1, {"MEMPOOL_BLOCK_BUFFER": 1, "MAX_BLOCK_COST_CLVM": 400000000})
     nodes, wallets, bt = await async_gen.__anext__()
@@ -353,15 +376,15 @@
         params = request.param
     async for _ in setup_simulators_and_wallets(1, 2, {}, **params):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def two_wallet_nodes_services() -> AsyncIterator[
-    Tuple[List[Service[FullNode]], List[Service[WalletNode]], BlockTools]
+    Tuple[List[Service[FullNode, FullNodeSimulator]], List[Service[WalletNode, WalletNodeAPI]], BlockTools]
 ]:
     async for _ in setup_simulators_and_wallets_service(1, 2, {}):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def two_wallet_nodes_custom_spam_filtering(spam_filter_after_n_txs, xch_spam_amount):
@@ -558,49 +581,51 @@
     yield full_node_1, full_node_2, server_1, server_2, bt
 
     async for _ in async_gen:
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
-async def farmer_one_harvester(tmp_path: Path, bt: BlockTools) -> AsyncIterator[Tuple[List[Service], Service]]:
-    async for _ in setup_farmer_multi_harvester(bt, 1, tmp_path, test_constants, start_services=True):
+async def farmer_one_harvester(tmp_path: Path, get_b_tools: BlockTools) -> AsyncIterator[Tuple[List[Service], Service]]:
+    async for _ in setup_farmer_multi_harvester(get_b_tools, 1, tmp_path, get_b_tools.constants, start_services=True):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def farmer_one_harvester_not_started(
-    tmp_path: Path, bt: BlockTools
+    tmp_path: Path, get_b_tools: BlockTools
 ) -> AsyncIterator[Tuple[List[Service], Service]]:
-    async for _ in setup_farmer_multi_harvester(bt, 1, tmp_path, test_constants, start_services=False):
+    async for _ in setup_farmer_multi_harvester(get_b_tools, 1, tmp_path, get_b_tools.constants, start_services=False):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def farmer_two_harvester_not_started(
-    tmp_path: Path, bt: BlockTools
+    tmp_path: Path, get_b_tools: BlockTools
 ) -> AsyncIterator[Tuple[List[Service], Service]]:
-    async for _ in setup_farmer_multi_harvester(bt, 2, tmp_path, test_constants, start_services=False):
+    async for _ in setup_farmer_multi_harvester(get_b_tools, 2, tmp_path, get_b_tools.constants, start_services=False):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def farmer_three_harvester_not_started(
-    tmp_path: Path, bt: BlockTools
+    tmp_path: Path, get_b_tools: BlockTools
 ) -> AsyncIterator[Tuple[List[Service], Service]]:
-    async for _ in setup_farmer_multi_harvester(bt, 3, tmp_path, test_constants, start_services=False):
+    async for _ in setup_farmer_multi_harvester(get_b_tools, 3, tmp_path, get_b_tools.constants, start_services=False):
         yield _
 
 
 # TODO: Ideally, the db_version should be the (parameterized) db_version
 # fixture, to test all versions of the database schema. This doesn't work
 # because of a hack in shutting down the full node, which means you cannot run
 # more than one simulations per process.
 @pytest_asyncio.fixture(scope="function")
-async def daemon_simulation(bt, get_b_tools, get_b_tools_1):
+async def daemon_simulation(consensus_mode, bt, get_b_tools, get_b_tools_1):
+    if consensus_mode != Mode.PLAIN:
+        pytest.skip("Skipping this run. This test only supports one running at a time.")
     async for _ in setup_full_system_connect_to_deamon(
         test_constants_modified,
         bt,
         b_tools=get_b_tools,
         b_tools_1=get_b_tools_1,
         db_version=1,
     ):
@@ -653,50 +678,76 @@
                 ssl=get_b_tools.get_daemon_ssl_context(),
                 max_msg_size=52428800,
             ) as ws:
                 yield ws, keychain
 
 
 @pytest_asyncio.fixture(scope="function")
-async def wallets_prefarm(two_wallet_nodes, self_hostname, trusted):
+async def wallets_prefarm_services(two_wallet_nodes_services, self_hostname, trusted):
     """
     Sets up the node with 10 blocks, and returns a payer and payee wallet.
     """
     farm_blocks = 3
     buffer = 1
-    full_nodes, wallets, _ = two_wallet_nodes
-    full_node_api = full_nodes[0]
+    full_nodes, wallets, bt = two_wallet_nodes_services
+    full_node_api = full_nodes[0]._api
     full_node_server = full_node_api.server
-    wallet_node_0, wallet_server_0 = wallets[0]
-    wallet_node_1, wallet_server_1 = wallets[1]
+    wallet_service_0 = wallets[0]
+    wallet_service_1 = wallets[1]
+    wallet_node_0 = wallet_service_0._node
+    wallet_node_1 = wallet_service_1._node
     wallet_0 = wallet_node_0.wallet_state_manager.main_wallet
     wallet_1 = wallet_node_1.wallet_state_manager.main_wallet
 
     if trusted:
         wallet_node_0.config["trusted_peers"] = {full_node_server.node_id.hex(): full_node_server.node_id.hex()}
         wallet_node_1.config["trusted_peers"] = {full_node_server.node_id.hex(): full_node_server.node_id.hex()}
     else:
         wallet_node_0.config["trusted_peers"] = {}
         wallet_node_1.config["trusted_peers"] = {}
 
-    await wallet_server_0.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
-    await wallet_server_1.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
+    wallet_0_rpc_client = await WalletRpcClient.create(
+        bt.config["self_hostname"],
+        wallet_service_0.rpc_server.listen_port,
+        wallet_service_0.root_path,
+        wallet_service_0.config,
+    )
+    wallet_1_rpc_client = await WalletRpcClient.create(
+        bt.config["self_hostname"],
+        wallet_service_1.rpc_server.listen_port,
+        wallet_service_1.root_path,
+        wallet_service_1.config,
+    )
+
+    await wallet_node_0.server.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
+    await wallet_node_1.server.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
 
     wallet_0_rewards = await full_node_api.farm_blocks_to_wallet(count=farm_blocks, wallet=wallet_0)
     wallet_1_rewards = await full_node_api.farm_blocks_to_wallet(count=farm_blocks, wallet=wallet_1)
     await full_node_api.farm_blocks_to_puzzlehash(count=buffer, guarantee_transaction_blocks=True)
 
     await full_node_api.wait_for_wallets_synced(wallet_nodes=[wallet_node_0, wallet_node_1], timeout=30)
 
     assert await wallet_0.get_confirmed_balance() == wallet_0_rewards
     assert await wallet_0.get_unconfirmed_balance() == wallet_0_rewards
     assert await wallet_1.get_confirmed_balance() == wallet_1_rewards
     assert await wallet_1.get_unconfirmed_balance() == wallet_1_rewards
 
-    return (wallet_node_0, wallet_0_rewards), (wallet_node_1, wallet_1_rewards), full_node_api
+    return (
+        (wallet_node_0, wallet_0_rewards),
+        (wallet_node_1, wallet_1_rewards),
+        (wallet_0_rpc_client, wallet_1_rpc_client),
+        (wallet_service_0, wallet_service_1),
+        full_node_api,
+    )
+
+
+@pytest_asyncio.fixture(scope="function")
+async def wallets_prefarm(wallets_prefarm_services):
+    return wallets_prefarm_services[0], wallets_prefarm_services[1], wallets_prefarm_services[4]
 
 
 @pytest_asyncio.fixture(scope="function")
 async def three_wallets_prefarm(three_wallet_nodes, self_hostname, trusted):
     """
     Sets up the node with 10 blocks, and returns a payer and payee wallet.
     """
@@ -757,24 +808,30 @@
 async def introducer_service(bt):
     async for _ in setup_introducer(bt, 0):
         yield _
 
 
 @pytest_asyncio.fixture(scope="function")
 async def timelord(bt):
-    async for service in setup_timelord(uint16(0), False, test_constants, bt):
+    async for service in setup_timelord(uint16(0), False, bt.constants, bt):
         yield service._api, service._node.server
 
 
 @pytest_asyncio.fixture(scope="function")
 async def timelord_service(bt):
-    async for _ in setup_timelord(uint16(0), False, test_constants, bt):
+    async for _ in setup_timelord(uint16(0), False, bt.constants, bt):
         yield _
 
 
+@pytest_asyncio.fixture(scope="function")
+async def crawler_service(bt: BlockTools) -> AsyncIterator[Service[Crawler, CrawlerAPI]]:
+    async for service in setup_crawler(bt):
+        yield service
+
+
 @pytest.fixture(scope="function")
 def tmp_chia_root(tmp_path):
     """
     Create a temp directory and populate it with an empty chia_root directory.
     """
     path: Path = tmp_path / "chia_root"
     path.mkdir(parents=True, exist_ok=True)
@@ -821,7 +878,15 @@
 @pytest.fixture(name="cost_logger", scope="session")
 def cost_logger_fixture() -> Iterator[CostLogger]:
     cost_logger = CostLogger()
     yield cost_logger
     print()
     print()
     print(cost_logger.log_cost_statistics())
+
+
+@pytest_asyncio.fixture(scope="function")
+async def simulation(consensus_mode, bt):
+    if consensus_mode != Mode.PLAIN:
+        pytest.skip("Skipping this run. This test only supports one running at a time.")
+    async for _ in setup_full_system(test_constants_modified, bt, db_version=1):
+        yield _
```

### Comparing `chia-blockchain-2.0.0b1/tests/connection_utils.py` & `chia-blockchain-2.0.0b3/tests/connection_utils.py`

 * *Files 0% similar despite different names*

```diff
@@ -58,15 +58,14 @@
         type,
         ws,
         server.api,
         server._port,
         log,
         True,
         server.received_message_callback,
-        self_hostname,
         None,
         peer_id,
         100,
         30,
         local_capabilities_for_handshake=capabilities,
     )
     await wsc.perform_handshake(server._network_id, protocol_version, dummy_port, NodeType.FULL_NODE)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/cmds/test_beta.py` & `chia-blockchain-2.0.0b3/tests/core/cmds/test_beta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/cmds/test_keys.py` & `chia-blockchain-2.0.0b3/tests/core/cmds/test_keys.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/cmds/test_wallet.py` & `chia-blockchain-2.0.0b3/tests/core/cmds/test_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/consensus/test_pot_iterations.py` & `chia-blockchain-2.0.0b3/tests/core/consensus/test_pot_iterations.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/custom_types/test_coin.py` & `chia-blockchain-2.0.0b3/tests/core/custom_types/test_coin.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/custom_types/test_spend_bundle.py` & `chia-blockchain-2.0.0b3/tests/core/custom_types/test_spend_bundle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/daemon/test_daemon.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_streamable.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,825 +1,898 @@
 from __future__ import annotations
 
-import asyncio
-import json
-import logging
-from dataclasses import dataclass, replace
-from typing import Any, Dict, List, Optional, Tuple, Type, Union, cast
+import io
+import re
+from dataclasses import dataclass, field, fields
+from typing import Any, Callable, Dict, List, Optional, Tuple, Type, get_type_hints
 
-import aiohttp
 import pytest
+from blspy import G1Element
+from clvm_tools import binutils
+from typing_extensions import Literal, get_args
+
+from chia.protocols.wallet_protocol import RespondRemovals
+from chia.simulator.block_tools import BlockTools, test_constants
+from chia.types.blockchain_format.coin import Coin
+from chia.types.blockchain_format.program import Program
+from chia.types.blockchain_format.sized_bytes import bytes4, bytes32
+from chia.types.full_block import FullBlock
+from chia.types.weight_proof import SubEpochChallengeSegment
+from chia.util.ints import uint8, uint32, uint64
+from chia.util.streamable import (
+    ConversionError,
+    DefinitionError,
+    InvalidSizeError,
+    InvalidTypeError,
+    ParameterMissingError,
+    Streamable,
+    UnsupportedType,
+    function_to_parse_one_item,
+    function_to_stream_one_item,
+    is_type_List,
+    is_type_SpecificOptional,
+    is_type_Tuple,
+    parse_bool,
+    parse_bytes,
+    parse_list,
+    parse_optional,
+    parse_size_hints,
+    parse_str,
+    parse_tuple,
+    parse_uint32,
+    recurse_jsonify,
+    streamable,
+    streamable_from_dict,
+    write_uint32,
+)
 
-from chia.daemon.keychain_server import (
-    DeleteLabelRequest,
-    GetKeyRequest,
-    GetKeyResponse,
-    GetKeysResponse,
-    SetLabelRequest,
-)
-from chia.daemon.server import WebSocketServer, service_plotter
-from chia.server.outbound_message import NodeType
-from chia.simulator.time_out_assert import time_out_assert, time_out_assert_custom_interval
-from chia.types.peer_info import PeerInfo
-from chia.util.ints import uint16
-from chia.util.keychain import Keychain, KeyData
-from chia.util.keyring_wrapper import DEFAULT_PASSPHRASE_IF_NO_MASTER_PASSPHRASE
-from chia.util.ws_message import create_payload
-from tests.core.node_height import node_height_at_least
-
-
-# Simple class that responds to a poll() call used by WebSocketServer.is_running()
-@dataclass
-class Service:
-    running: bool
-
-    def poll(self) -> Optional[int]:
-        return None if self.running else 1
-
-
-# Mock daemon server that forwards to WebSocketServer
-@dataclass
-class Daemon:
-    # Instance variables used by WebSocketServer.is_running()
-    services: Dict[str, Union[List[Service], Service]]
-    connections: Dict[str, Optional[List[Any]]]
-
-    def is_service_running(self, service_name: str) -> bool:
-        return WebSocketServer.is_service_running(cast(WebSocketServer, self), service_name)
-
-    async def running_services(self, request: Dict[str, Any]) -> Dict[str, Any]:
-        return await WebSocketServer.running_services(cast(WebSocketServer, self), request)
-
-    async def is_running(self, request: Dict[str, Any]) -> Dict[str, Any]:
-        return await WebSocketServer.is_running(cast(WebSocketServer, self), request)
-
-
-test_key_data = KeyData.from_mnemonic(
-    "grief lock ketchup video day owner torch young work "
-    "another venue evidence spread season bright private "
-    "tomato remind jaguar original blur embody project can"
-)
-test_key_data_no_secrets = replace(test_key_data, secrets=None)
-
-
-success_response_data = {
-    "success": True,
-}
-
-
-def add_private_key_response_data(fingerprint: int) -> Dict[str, object]:
-    return {
-        "success": True,
-        "fingerprint": fingerprint,
-    }
-
-
-def fingerprint_missing_response_data(request_type: Type[object]) -> Dict[str, object]:
-    return {
-        "success": False,
-        "error": "malformed request",
-        "error_details": {"message": f"1 field missing for {request_type.__name__}: fingerprint"},
-    }
-
-
-def fingerprint_not_found_response_data(fingerprint: int) -> Dict[str, object]:
-    return {
-        "success": False,
-        "error": "key not found",
-        "error_details": {
-            "fingerprint": fingerprint,
-        },
-    }
-
-
-def get_key_response_data(key: KeyData) -> Dict[str, object]:
-    return {"success": True, **GetKeyResponse(key=key).to_json_dict()}
-
-
-def get_keys_response_data(keys: List[KeyData]) -> Dict[str, object]:
-    return {"success": True, **GetKeysResponse(keys=keys).to_json_dict()}
-
-
-def label_missing_response_data(request_type: Type[Any]) -> Dict[str, Any]:
-    return {
-        "success": False,
-        "error": "malformed request",
-        "error_details": {"message": f"1 field missing for {request_type.__name__}: label"},
-    }
-
-
-def label_exists_response_data(fingerprint: int, label: str) -> Dict[str, Any]:
-    return {
-        "success": False,
-        "error": "malformed request",
-        "error_details": {"message": f"label {label!r} already exists for fingerprint {str(fingerprint)!r}"},
-    }
-
-
-label_empty_response_data = {
-    "success": False,
-    "error": "malformed request",
-    "error_details": {"message": "label can't be empty or whitespace only"},
-}
-
-label_too_long_response_data = {
-    "success": False,
-    "error": "malformed request",
-    "error_details": {"message": "label exceeds max length: 66/65"},
-}
-
-label_newline_or_tab_response_data = {
-    "success": False,
-    "error": "malformed request",
-    "error_details": {"message": "label can't contain newline or tab"},
-}
-
-
-def assert_response(response: aiohttp.http_websocket.WSMessage, expected_response_data: Dict[str, Any]) -> None:
-    # Expect: JSON response
-    assert response.type == aiohttp.WSMsgType.TEXT
-    message = json.loads(response.data.strip())
-    # Expect: daemon handled the request
-    assert message["ack"] is True
-    # Expect: data matches the expected data
-    assert message["data"] == expected_response_data
-
-
-def assert_running_services_response(response_dict: Dict[str, Any], expected_response_dict: Dict[str, Any]) -> None:
-    for k, v in expected_response_dict.items():
-        if k == "running_services":
-            # Order of services is not guaranteed
-            assert len(response_dict[k]) == len(v)
-            assert set(response_dict[k]) == set(v)
-        else:
-            assert response_dict[k] == v
-
-
-@pytest.fixture(scope="session")
-def mock_lonely_daemon():
-    # Mock daemon server without any registered services/connections
-    return Daemon(services={}, connections={})
-
-
-@pytest.fixture(scope="session")
-def mock_daemon_with_services():
-    # Mock daemon server with a couple running services, a plotter, and one stopped service
-    return Daemon(
-        services={
-            "my_refrigerator": [Service(True)],
-            "the_river": [Service(True)],
-            "your_nose": [Service(False)],
-            "chia_plotter": [Service(True), Service(True)],
-        },
-        connections={},
-    )
-
-
-@pytest.fixture(scope="session")
-def mock_daemon_with_services_and_connections():
-    # Mock daemon server with a couple running services, a plotter, and a couple active connections
-    return Daemon(
-        services={
-            "my_refrigerator": [Service(True)],
-            "chia_plotter": [Service(True), Service(True)],
-            "apple": [Service(True)],
-        },
-        connections={
-            "apple": [1],
-            "banana": [1, 2],
-        },
-    )
-
-
-@pytest.mark.asyncio
-async def test_daemon_simulation(self_hostname, daemon_simulation):
-    deamon_and_nodes, get_b_tools, bt = daemon_simulation
-    node1, node2, _, _, _, _, _, _, _, _, daemon1 = deamon_and_nodes
-    server1 = node1.full_node.server
-    node2_port = node2.full_node.server.get_port()
-    await server1.start_client(PeerInfo(self_hostname, uint16(node2_port)))
-
-    async def num_connections():
-        count = len(node2.server.get_connections(NodeType.FULL_NODE))
-        return count
-
-    await time_out_assert_custom_interval(60, 1, num_connections, 1)
-
-    await time_out_assert(1500, node_height_at_least, True, node2, 1)
-
-    session = aiohttp.ClientSession()
-
-    log = logging.getLogger()
-    log.warning(f"Connecting to daemon on port {daemon1.daemon_port}")
-    ws = await session.ws_connect(
-        f"wss://127.0.0.1:{daemon1.daemon_port}",
-        autoclose=True,
-        autoping=True,
-        ssl_context=get_b_tools.get_daemon_ssl_context(),
-        max_msg_size=100 * 1024 * 1024,
-    )
-    service_name = "test_service_name"
-    data = {"service": service_name}
-    payload = create_payload("register_service", data, service_name, "daemon")
-    await ws.send_str(payload)
-    message_queue = asyncio.Queue()
-
-    async def reader(ws, queue):
-        while True:
-            # ClientWebSocketReponse::receive() internally handles PING, PONG, and CLOSE messages
-            msg = await ws.receive()
-            if msg.type == aiohttp.WSMsgType.TEXT:
-                message = msg.data.strip()
-                message = json.loads(message)
-                await queue.put(message)
-            else:
-                if msg.type == aiohttp.WSMsgType.ERROR:
-                    await ws.close()
-                elif msg.type == aiohttp.WSMsgType.CLOSED:
-                    pass
-
-                break
-
-    read_handler = asyncio.create_task(reader(ws, message_queue))
-    data = {}
-    payload = create_payload("get_blockchain_state", data, service_name, "chia_full_node")
-    await ws.send_str(payload)
-
-    await asyncio.sleep(5)
-    blockchain_state_found = False
-    while not message_queue.empty():
-        message = await message_queue.get()
-        if message["command"] == "get_blockchain_state":
-            blockchain_state_found = True
-
-    await ws.close()
-    read_handler.cancel()
-    assert blockchain_state_found
-
-
-@pytest.mark.parametrize(
-    "service, expected_result",
-    [
-        (
-            "my_refrigerator",
-            False,
-        ),
-        (
-            service_plotter,
-            False,
-        ),
-    ],
-)
-def test_is_service_running_no_services(mock_lonely_daemon, service, expected_result):
-    daemon = mock_lonely_daemon
-    assert daemon.is_service_running(service) == expected_result
-
-
-@pytest.mark.parametrize(
-    "service, expected_result",
-    [
-        (
-            "my_refrigerator",
-            True,
-        ),
-        (
-            service_plotter,
-            True,
-        ),
-        (
-            "your_nose",
-            False,
-        ),
-        (
-            "the_river",
-            True,
-        ),
-        (
-            "the_clock",
-            False,
-        ),
-    ],
-)
-def test_is_service_running_with_services(mock_daemon_with_services, service, expected_result):
-    daemon = mock_daemon_with_services
-    assert daemon.is_service_running(service) == expected_result
-
-
-@pytest.mark.parametrize(
-    "service, expected_result",
-    [
-        (
-            "my_refrigerator",
-            True,
-        ),
-        (
-            service_plotter,
-            True,
-        ),
-        (
-            "apple",
-            True,
-        ),
-        (
-            "banana",
-            True,
-        ),
-        (
-            "orange",
-            False,
-        ),
-    ],
-)
-def test_is_service_running_with_services_and_connections(
-    mock_daemon_with_services_and_connections, service, expected_result
-):
-    daemon = mock_daemon_with_services_and_connections
-    assert daemon.is_service_running(service) == expected_result
-
-
-@pytest.mark.asyncio
-async def test_running_services_no_services(mock_lonely_daemon):
-    daemon = mock_lonely_daemon
-    response = await daemon.running_services({})
-    assert_running_services_response(response, {"success": True, "running_services": []})
-
-
-@pytest.mark.asyncio
-async def test_running_services_with_services(mock_daemon_with_services):
-    daemon = mock_daemon_with_services
-    response = await daemon.running_services({})
-    assert_running_services_response(
-        response, {"success": True, "running_services": ["my_refrigerator", "the_river", service_plotter]}
-    )
-
-
-@pytest.mark.asyncio
-async def test_running_services_with_services_and_connections(mock_daemon_with_services_and_connections):
-    daemon = mock_daemon_with_services_and_connections
-    response = await daemon.running_services({})
-    assert_running_services_response(
-        response, {"success": True, "running_services": ["my_refrigerator", "apple", "banana", service_plotter]}
-    )
-
-
-@pytest.mark.asyncio
-@pytest.mark.parametrize(
-    "service_request, expected_result, expected_exception",
-    [
-        ({}, None, KeyError),
-        (
-            {"service": "my_refrigerator"},
-            {"success": True, "service_name": "my_refrigerator", "is_running": False},
-            None,
-        ),
-    ],
-)
-async def test_is_running_no_services(mock_lonely_daemon, service_request, expected_result, expected_exception):
-    daemon = mock_lonely_daemon
-    if expected_exception is not None:
-        with pytest.raises(expected_exception):
-            await daemon.is_running(service_request)
-    else:
-        response = await daemon.is_running(service_request)
-        assert response == expected_result
-
-
-@pytest.mark.asyncio
-@pytest.mark.parametrize(
-    "service_request, expected_result, expected_exception",
-    [
-        ({}, None, KeyError),
-        (
-            {"service": "my_refrigerator"},
-            {"success": True, "service_name": "my_refrigerator", "is_running": True},
-            None,
-        ),
-        (
-            {"service": "your_nose"},
-            {"success": True, "service_name": "your_nose", "is_running": False},
-            None,
-        ),
-        (
-            {"service": "the_river"},
-            {"success": True, "service_name": "the_river", "is_running": True},
-            None,
-        ),
-        (
-            {"service": service_plotter},
-            {"success": True, "service_name": service_plotter, "is_running": True},
-            None,
-        ),
-    ],
-)
-async def test_is_running_with_services(
-    mock_daemon_with_services, service_request, expected_result, expected_exception
-):
-    daemon = mock_daemon_with_services
-    if expected_exception is not None:
-        with pytest.raises(expected_exception):
-            await daemon.is_running(service_request)
-    else:
-        response = await daemon.is_running(service_request)
-        assert response == expected_result
-
-
-@pytest.mark.asyncio
-@pytest.mark.parametrize(
-    "service_request, expected_result, expected_exception",
-    [
-        ({}, None, KeyError),
-        (
-            {"service": "my_refrigerator"},
-            {"success": True, "service_name": "my_refrigerator", "is_running": True},
-            None,
-        ),
-        (
-            {"service": "your_nose"},
-            {"success": True, "service_name": "your_nose", "is_running": False},
-            None,
-        ),
-        (
-            {"service": "apple"},
-            {"success": True, "service_name": "apple", "is_running": True},
-            None,
-        ),
-        (
-            {"service": "banana"},
-            {"success": True, "service_name": "banana", "is_running": True},
-            None,
-        ),
-        (
-            {"service": "orange"},
-            {"success": True, "service_name": "orange", "is_running": False},
-            None,
-        ),
-    ],
-)
-async def test_is_running_with_services_and_connections(
-    mock_daemon_with_services_and_connections, service_request, expected_result, expected_exception
-):
-    daemon = mock_daemon_with_services_and_connections
-    if expected_exception is not None:
-        with pytest.raises(expected_exception):
-            await daemon.is_running(service_request)
-    else:
-        response = await daemon.is_running(service_request)
-        assert response == expected_result
-
-
-@pytest.mark.asyncio
-async def test_validate_keyring_passphrase_rpc(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-
-    # When: the keychain has a master passphrase set
-    keychain.set_master_passphrase(
-        current_passphrase=DEFAULT_PASSPHRASE_IF_NO_MASTER_PASSPHRASE, new_passphrase="the correct passphrase"
-    )
-
-    bad_passphrase_case_response_data = {
-        "success": False,
-        "error": None,
-    }
-
-    missing_passphrase_response_data = {
-        "success": False,
-        "error": "missing key",
-    }
-
-    empty_passphrase_response_data = {
-        "success": False,
-        "error": None,
-    }
-
-    # When: using the correct passphrase
-    await ws.send_str(
-        create_payload("validate_keyring_passphrase", {"key": "the correct passphrase"}, "test", "daemon")
-    )
-    # Expect: validation succeeds
-    # TODO: unify error responses in the server, sometimes we add `error: None` sometimes not.
-    assert_response(await ws.receive(), {**success_response_data, "error": None})
-
-    # When: using the wrong passphrase
-    await ws.send_str(create_payload("validate_keyring_passphrase", {"key": "the wrong passphrase"}, "test", "daemon"))
-    # Expect: validation failure
-    assert_response(await ws.receive(), bad_passphrase_case_response_data)
-
-    # When: not including the passphrase in the payload
-    await ws.send_str(create_payload("validate_keyring_passphrase", {}, "test", "daemon"))
-    # Expect: validation failure
-    assert_response(await ws.receive(), missing_passphrase_response_data)
-
-    # When: including an empty passphrase in the payload
-    await ws.send_str(create_payload("validate_keyring_passphrase", {"key": ""}, "test", "daemon"))
-    # Expect: validation failure
-    assert_response(await ws.receive(), empty_passphrase_response_data)
-
-
-@pytest.mark.asyncio
-async def test_add_private_key(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-
-    mnemonic_with_typo = f"{test_key_data.mnemonic_str()}xyz"  # intentional typo: can -> canxyz
-    mnemonic_with_missing_word = " ".join(test_key_data.mnemonic_str()[:-1])  # missing last word
-
-    missing_mnemonic_response_data = {
-        "success": False,
-        "error": "malformed request",
-        "error_details": {"message": "missing mnemonic"},
-    }
-
-    mnemonic_with_typo_response_data = {
-        "success": False,
-        "error": "'canxyz' is not in the mnemonic dictionary; may be misspelled",
-    }
-
-    invalid_mnemonic_length_response_data = {
-        "success": False,
-        "error": "Invalid mnemonic length",
-    }
-
-    invalid_mnemonic_response_data = {
-        "success": False,
-        "error": "Invalid order of mnemonic words",
-    }
-
-    # Expect the key hasn't been added yet
-    assert keychain.get_private_key_by_fingerprint(test_key_data.fingerprint) is None
-
-    await ws.send_str(create_payload("add_private_key", {"mnemonic": test_key_data.mnemonic_str()}, "test", "daemon"))
-    # Expect: key was added successfully
-    assert_response(await ws.receive(), add_private_key_response_data(test_key_data.fingerprint))
-
-    # When: missing mnemonic
-    await ws.send_str(create_payload("add_private_key", {}, "test", "daemon"))
-    # Expect: Failure due to missing mnemonic
-    assert_response(await ws.receive(), missing_mnemonic_response_data)
-
-    # When: using a mmnemonic with an incorrect word (typo)
-    await ws.send_str(create_payload("add_private_key", {"mnemonic": mnemonic_with_typo}, "test", "daemon"))
-    # Expect: Failure due to misspelled mnemonic
-    assert_response(await ws.receive(), mnemonic_with_typo_response_data)
-
-    # When: using a mnemonic with an incorrect word count
-    await ws.send_str(create_payload("add_private_key", {"mnemonic": mnemonic_with_missing_word}, "test", "daemon"))
-    # Expect: Failure due to invalid mnemonic
-    assert_response(await ws.receive(), invalid_mnemonic_length_response_data)
-
-    # When: using an incorrect mnemnonic
-    await ws.send_str(create_payload("add_private_key", {"mnemonic": " ".join(["abandon"] * 24)}, "test", "daemon"))
-    # Expect: Failure due to checksum error
-    assert_response(await ws.receive(), invalid_mnemonic_response_data)
-
-
-@pytest.mark.asyncio
-async def test_add_private_key_label(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-
-    async def assert_add_private_key_with_label(
-        key_data: KeyData, request: Dict[str, object], add_private_key_response: Dict[str, object]
-    ) -> None:
-        await ws.send_str(create_payload("add_private_key", request, "test", "daemon"))
-        assert_response(await ws.receive(), add_private_key_response)
-        await ws.send_str(
-            create_payload("get_key", {"fingerprint": key_data.fingerprint, "include_secrets": True}, "test", "daemon")
-        )
-        assert_response(await ws.receive(), get_key_response_data(key_data))
-
-    # without `label` parameter
-    key_data_0 = KeyData.generate()
-    await assert_add_private_key_with_label(
-        key_data_0,
-        {"mnemonic": key_data_0.mnemonic_str()},
-        add_private_key_response_data(key_data_0.fingerprint),
-    )
-    # with `label=None`
-    key_data_1 = KeyData.generate()
-    await assert_add_private_key_with_label(
-        key_data_1,
-        {"mnemonic": key_data_1.mnemonic_str(), "label": None},
-        add_private_key_response_data(key_data_1.fingerprint),
-    )
-    # with `label="key_2"`
-    key_data_2 = KeyData.generate("key_2")
-    await assert_add_private_key_with_label(
-        key_data_1,
-        {"mnemonic": key_data_2.mnemonic_str(), "label": key_data_2.label},
-        add_private_key_response_data(key_data_2.fingerprint),
-    )
-
-
-@pytest.mark.asyncio
-async def test_get_key(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-
-    await ws.send_str(create_payload("get_key", {"fingerprint": test_key_data.fingerprint}, "test", "daemon"))
-    assert_response(await ws.receive(), fingerprint_not_found_response_data(test_key_data.fingerprint))
-
-    keychain.add_private_key(test_key_data.mnemonic_str())
-
-    # without `include_secrets`
-    await ws.send_str(create_payload("get_key", {"fingerprint": test_key_data.fingerprint}, "test", "daemon"))
-    assert_response(await ws.receive(), get_key_response_data(test_key_data_no_secrets))
-
-    # with `include_secrets=False`
-    await ws.send_str(
-        create_payload(
-            "get_key", {"fingerprint": test_key_data.fingerprint, "include_secrets": False}, "test", "daemon"
-        )
-    )
-    assert_response(await ws.receive(), get_key_response_data(test_key_data_no_secrets))
-
-    # with `include_secrets=True`
-    await ws.send_str(
-        create_payload("get_key", {"fingerprint": test_key_data.fingerprint, "include_secrets": True}, "test", "daemon")
-    )
-    assert_response(await ws.receive(), get_key_response_data(test_key_data))
-
-    await ws.send_str(create_payload("get_key", {}, "test", "daemon"))
-    assert_response(await ws.receive(), fingerprint_missing_response_data(GetKeyRequest))
-
-    await ws.send_str(create_payload("get_key", {"fingerprint": 123456}, "test", "daemon"))
-    assert_response(await ws.receive(), fingerprint_not_found_response_data(123456))
-
-
-@pytest.mark.asyncio
-async def test_get_keys(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-
-    # empty keychain
-    await ws.send_str(create_payload("get_keys", {}, "test", "daemon"))
-    assert_response(await ws.receive(), get_keys_response_data([]))
-
-    keys = [KeyData.generate() for _ in range(5)]
-    keys_added = []
-    for key_data in keys:
-        keychain.add_private_key(key_data.mnemonic_str())
-        keys_added.append(key_data)
-
-        get_keys_response_data_without_secrets = get_keys_response_data(
-            [replace(key, secrets=None) for key in keys_added]
-        )
-
-        # without `include_secrets`
-        await ws.send_str(create_payload("get_keys", {}, "test", "daemon"))
-        assert_response(await ws.receive(), get_keys_response_data_without_secrets)
-
-        # with `include_secrets=False`
-        await ws.send_str(create_payload("get_keys", {"include_secrets": False}, "test", "daemon"))
-        assert_response(await ws.receive(), get_keys_response_data_without_secrets)
-
-        # with `include_secrets=True`
-        await ws.send_str(create_payload("get_keys", {"include_secrets": True}, "test", "daemon"))
-        assert_response(await ws.receive(), get_keys_response_data(keys_added))
-
-
-@pytest.mark.asyncio
-async def test_key_renaming(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-    keychain.add_private_key(test_key_data.mnemonic_str())
-    # Rename the key three times
-    for i in range(3):
-        key_data = replace(test_key_data_no_secrets, label=f"renaming_{i}")
-        await ws.send_str(
-            create_payload(
-                "set_label", {"fingerprint": key_data.fingerprint, "label": key_data.label}, "test", "daemon"
-            )
-        )
-        assert_response(await ws.receive(), success_response_data)
-
-        await ws.send_str(create_payload("get_key", {"fingerprint": key_data.fingerprint}, "test", "daemon"))
-        assert_response(
-            await ws.receive(),
-            {
-                "success": True,
-                "key": key_data.to_json_dict(),
-            },
-        )
-
-
-@pytest.mark.asyncio
-async def test_key_label_deletion(daemon_connection_and_temp_keychain):
-    ws, keychain = daemon_connection_and_temp_keychain
-
-    keychain.add_private_key(test_key_data.mnemonic_str(), "key_0")
-    assert keychain.get_key(test_key_data.fingerprint).label == "key_0"
-    await ws.send_str(create_payload("delete_label", {"fingerprint": test_key_data.fingerprint}, "test", "daemon"))
-    assert_response(await ws.receive(), success_response_data)
-    assert keychain.get_key(test_key_data.fingerprint).label is None
-    await ws.send_str(create_payload("delete_label", {"fingerprint": test_key_data.fingerprint}, "test", "daemon"))
-    assert_response(await ws.receive(), fingerprint_not_found_response_data(test_key_data.fingerprint))
-
-
-@pytest.mark.parametrize(
-    "method, parameter, response_data_dict",
-    [
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint, "label": "new_label"},
-            success_response_data,
-        ),
-        (
-            "set_label",
-            {"label": "new_label"},
-            fingerprint_missing_response_data(SetLabelRequest),
-        ),
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint},
-            label_missing_response_data(SetLabelRequest),
-        ),
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint, "label": ""},
-            label_empty_response_data,
-        ),
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint, "label": "a" * 66},
-            label_too_long_response_data,
-        ),
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint, "label": "a\nb"},
-            label_newline_or_tab_response_data,
-        ),
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint, "label": "a\tb"},
-            label_newline_or_tab_response_data,
-        ),
-        (
-            "set_label",
-            {"fingerprint": test_key_data.fingerprint, "label": "key_0"},
-            label_exists_response_data(test_key_data.fingerprint, "key_0"),
-        ),
-        (
-            "delete_label",
-            {"fingerprint": test_key_data.fingerprint},
-            success_response_data,
-        ),
-        (
-            "delete_label",
-            {},
-            fingerprint_missing_response_data(DeleteLabelRequest),
-        ),
-        (
-            "delete_label",
-            {"fingerprint": 123456},
-            fingerprint_not_found_response_data(123456),
-        ),
-    ],
-)
-@pytest.mark.asyncio
-async def test_key_label_methods(
-    daemon_connection_and_temp_keychain, method: str, parameter: Dict[str, Any], response_data_dict: Dict[str, Any]
-) -> None:
-    ws, keychain = daemon_connection_and_temp_keychain
-    keychain.add_private_key(test_key_data.mnemonic_str(), "key_0")
-    await ws.send_str(create_payload(method, parameter, "test", "daemon"))
-    assert_response(await ws.receive(), response_data_dict)
-
-
-@pytest.mark.asyncio
-async def test_bad_json(daemon_connection_and_temp_keychain: Tuple[aiohttp.ClientWebSocketResponse, Keychain]) -> None:
-    ws, _ = daemon_connection_and_temp_keychain
-
-    await ws.send_str("{doo: '12'}")  # send some bad json
-    response = await ws.receive()
-
-    # check for error response
-    assert response.type == aiohttp.WSMsgType.TEXT
-    message = json.loads(response.data.strip())
-    assert message["data"]["success"] is False
-    assert message["data"]["error"].startswith("Expecting property name")
-
-    # properly register a service
-    service_name = "test_service"
-    data = {"service": service_name}
-    payload = create_payload("register_service", data, service_name, "daemon")
-    await ws.send_str(payload)
-    await ws.receive()
-
-    # send some more bad json
-    await ws.send_str("{doo: '12'}")  # send some bad json
-    response = await ws.receive()
-    assert response.type == aiohttp.WSMsgType.TEXT
-    message = json.loads(response.data.strip())
-    assert message["command"] != "register_service"
-    assert message["data"]["success"] is False
-    assert message["data"]["error"].startswith("Expecting property name")
-
-
-@pytest.mark.asyncio
-async def test_unexpected_json(
-    daemon_connection_and_temp_keychain: Tuple[aiohttp.ClientWebSocketResponse, Keychain]
+
+def test_int_not_supported() -> None:
+    with pytest.raises(UnsupportedType):
+
+        @streamable
+        @dataclass(frozen=True)
+        class TestClassInt(Streamable):
+            a: int
+
+
+def test_float_not_supported() -> None:
+    with pytest.raises(UnsupportedType):
+
+        @streamable
+        @dataclass(frozen=True)
+        class TestClassFloat(Streamable):
+            a: float
+
+
+def test_dict_not_suppported() -> None:
+    with pytest.raises(UnsupportedType):
+
+        @streamable
+        @dataclass(frozen=True)
+        class TestClassDict(Streamable):
+            a: Dict[str, str]
+
+
+@dataclass(frozen=True)
+class DataclassOnly:
+    a: uint8
+
+
+def test_pure_dataclass_not_supported() -> None:
+    with pytest.raises(UnsupportedType):
+
+        @streamable
+        @dataclass(frozen=True)
+        class TestClassDataclass(Streamable):
+            a: DataclassOnly
+
+
+class PlainClass:
+    a: uint8
+
+
+def test_plain_class_not_supported() -> None:
+    with pytest.raises(UnsupportedType):
+
+        @streamable
+        @dataclass(frozen=True)
+        class TestClassPlain(Streamable):
+            a: PlainClass
+
+
+@streamable
+@dataclass(frozen=True)
+class StreamableFromDict1(Streamable):
+    a: uint8
+    b: str
+    c: G1Element
+
+
+@streamable
+@dataclass(frozen=True)
+class StreamableFromDict2(Streamable):
+    a: StreamableFromDict1
+    b: StreamableFromDict1
+    c: uint64
+
+
+@streamable
+@dataclass(frozen=True)
+class ConvertTupleFailures(Streamable):
+    a: Tuple[uint8, uint8]
+    b: Tuple[uint8, Tuple[uint8, uint8]]
+
+
+@pytest.mark.parametrize(
+    "input_dict, error",
+    [
+        pytest.param({"a": (1,), "b": (1, (2, 2))}, InvalidSizeError, id="a: item missing"),
+        pytest.param({"a": (1, 1, 1), "b": (1, (2, 2))}, InvalidSizeError, id="a: item too much"),
+        pytest.param({"a": (1, 1), "b": (1, (2,))}, InvalidSizeError, id="b: item missing"),
+        pytest.param({"a": (1, 1), "b": (1, (2, 2, 2))}, InvalidSizeError, id="b: item too much"),
+        pytest.param({"a": "11", "b": (1, (2, 2))}, InvalidTypeError, id="a: invalid type list"),
+        pytest.param({"a": 1, "b": (1, (2, 2))}, InvalidTypeError, id="a: invalid type int"),
+        pytest.param({"a": "11", "b": (1, (2, 2))}, InvalidTypeError, id="a: invalid type str"),
+        pytest.param({"a": (1, 1), "b": (1, "22")}, InvalidTypeError, id="b: invalid type list"),
+        pytest.param({"a": (1, 1), "b": (1, 2)}, InvalidTypeError, id="b: invalid type int"),
+        pytest.param({"a": (1, 1), "b": (1, "22")}, InvalidTypeError, id="b: invalid type str"),
+    ],
+)
+def test_convert_tuple_failures(input_dict: Dict[str, Any], error: Any) -> None:
+    with pytest.raises(error):
+        streamable_from_dict(ConvertTupleFailures, input_dict)
+
+
+@streamable
+@dataclass(frozen=True)
+class ConvertListFailures(Streamable):
+    a: List[uint8]
+    b: List[List[uint8]]
+
+
+@pytest.mark.parametrize(
+    "input_dict, error",
+    [
+        pytest.param({"a": [1, 1], "b": [1, [2, 2]]}, InvalidTypeError, id="a: invalid type list"),
+        pytest.param({"a": 1, "b": [1, [2, 2]]}, InvalidTypeError, id="a: invalid type int"),
+        pytest.param({"a": "11", "b": [1, [2, 2]]}, InvalidTypeError, id="a: invalid type str"),
+        pytest.param({"a": [1, 1], "b": [1, [2, 2]]}, InvalidTypeError, id="b: invalid type list"),
+        pytest.param({"a": [1, 1], "b": [1, 2]}, InvalidTypeError, id="b: invalid type int"),
+        pytest.param({"a": [1, 1], "b": [1, "22"]}, InvalidTypeError, id="b: invalid type str"),
+    ],
+)
+def test_convert_list_failures(input_dict: Dict[str, Any], error: Any) -> None:
+    with pytest.raises(error):
+        streamable_from_dict(ConvertListFailures, input_dict)
+
+
+@streamable
+@dataclass(frozen=True)
+class ConvertByteTypeFailures(Streamable):
+    a: bytes4
+    b: bytes
+
+
+@pytest.mark.parametrize(
+    "input_dict, error",
+    [
+        pytest.param({"a": 0, "b": bytes(0)}, InvalidTypeError, id="a: no string and no bytes"),
+        pytest.param({"a": [], "b": bytes(0)}, InvalidTypeError, id="a: no string and no bytes"),
+        pytest.param({"a": {}, "b": bytes(0)}, InvalidTypeError, id="a: no string and no bytes"),
+        pytest.param({"a": "invalid", "b": bytes(0)}, ConversionError, id="a: invalid hex string"),
+        pytest.param({"a": "000000", "b": bytes(0)}, ConversionError, id="a: hex string too short"),
+        pytest.param({"a": "0000000000", "b": bytes(0)}, ConversionError, id="a: hex string too long"),
+        pytest.param({"a": b"\00\00\00", "b": bytes(0)}, ConversionError, id="a: bytes too short"),
+        pytest.param({"a": b"\00\00\00\00\00", "b": bytes(0)}, ConversionError, id="a: bytes too long"),
+        pytest.param({"a": "00000000", "b": 0}, InvalidTypeError, id="b: no string and no bytes"),
+        pytest.param({"a": "00000000", "b": []}, InvalidTypeError, id="b: no string and no bytes"),
+        pytest.param({"a": "00000000", "b": {}}, InvalidTypeError, id="b: no string and no bytes"),
+        pytest.param({"a": "00000000", "b": "invalid"}, ConversionError, id="b: invalid hex string"),
+    ],
+)
+def test_convert_byte_type_failures(input_dict: Dict[str, Any], error: Any) -> None:
+    with pytest.raises(error):
+        streamable_from_dict(ConvertByteTypeFailures, input_dict)
+
+
+@streamable
+@dataclass(frozen=True)
+class ConvertUnhashableTypeFailures(Streamable):
+    a: G1Element
+
+
+@pytest.mark.parametrize(
+    "input_dict, error",
+    [
+        pytest.param({"a": 0}, InvalidTypeError, id="a: no string and no bytes"),
+        pytest.param({"a": []}, InvalidTypeError, id="a: no string and no bytes"),
+        pytest.param({"a": {}}, InvalidTypeError, id="a: no string and no bytes"),
+        pytest.param({"a": "invalid"}, ConversionError, id="a: invalid hex string"),
+        pytest.param({"a": "00" * (G1Element.SIZE - 1)}, ConversionError, id="a: hex string too short"),
+        pytest.param({"a": "00" * (G1Element.SIZE + 1)}, ConversionError, id="a: hex string too long"),
+        pytest.param({"a": b"\00" * (G1Element.SIZE - 1)}, ConversionError, id="a: bytes too short"),
+        pytest.param({"a": b"\00" * (G1Element.SIZE + 1)}, ConversionError, id="a: bytes too long"),
+        pytest.param({"a": b"\00" * G1Element.SIZE}, ConversionError, id="a: invalid g1 element"),
+    ],
+)
+def test_convert_unhashable_type_failures(input_dict: Dict[str, Any], error: Any) -> None:
+    with pytest.raises(error):
+        streamable_from_dict(ConvertUnhashableTypeFailures, input_dict)
+
+
+class NoStrClass:
+    def __str__(self) -> str:
+        raise RuntimeError("No string")
+
+
+@streamable
+@dataclass(frozen=True)
+class ConvertPrimitiveFailures(Streamable):
+    a: uint8
+    b: uint8
+    c: str
+
+
+@pytest.mark.parametrize(
+    "input_dict, error",
+    [
+        pytest.param({"a": "a", "b": uint8(1), "c": "2"}, ConversionError, id="a: invalid value"),
+        pytest.param({"a": 0, "b": [], "c": "2"}, ConversionError, id="b: invalid value"),
+        pytest.param({"a": 0, "b": uint8(1), "c": NoStrClass()}, ConversionError, id="c: invalid value"),
+    ],
+)
+def test_convert_primitive_failures(input_dict: Dict[str, Any], error: Any) -> None:
+    with pytest.raises(error):
+        streamable_from_dict(ConvertPrimitiveFailures, input_dict)
+
+
+@pytest.mark.parametrize(
+    "test_class, input_dict, error, error_message",
+    [
+        [
+            StreamableFromDict1,
+            {"a": "asdf", "b": "2", "c": G1Element()},
+            ConversionError,
+            "Failed to convert 'asdf' from type str to uint8: ValueError: invalid literal "
+            "for int() with base 10: 'asdf'",
+        ],
+        [StreamableFromDict1, {"a": 1, "b": "2"}, ParameterMissingError, "1 field missing for StreamableFromDict1: c"],
+        [StreamableFromDict1, {"a": 1}, ParameterMissingError, "2 fields missing for StreamableFromDict1: b, c"],
+        [StreamableFromDict1, {}, ParameterMissingError, "3 fields missing for StreamableFromDict1: a, b, c"],
+        [
+            StreamableFromDict1,
+            {"a": 1, "b": "2", "c": "asd"},
+            ConversionError,
+            "Failed to convert 'asd' from type str to bytes: ValueError: non-hexadecimal number found in fromhex() arg "
+            "at position 1",
+        ],
+        [
+            StreamableFromDict1,
+            {"a": 1, "b": "2", "c": "00" * G1Element.SIZE},
+            ConversionError,
+            f"Failed to convert {bytes.fromhex('00' * G1Element.SIZE)!r} from type bytes to G1Element: ValueError: "
+            "Given G1 non-infinity element must start with 0b10",
+        ],
+        [
+            StreamableFromDict1,
+            {"a": [], "b": "2", "c": G1Element()},
+            ConversionError,
+            "Failed to convert [] from type list to uint8: TypeError: int() argument",
+        ],
+        [
+            StreamableFromDict1,
+            {"a": {}, "b": "2", "c": G1Element()},
+            ConversionError,
+            "Failed to convert {} from type dict to uint8: TypeError: int() argument",
+        ],
+        [
+            StreamableFromDict2,
+            {"a": "asdf", "b": 12345, "c": 12345},
+            InvalidTypeError,
+            "Invalid type: Expected dict, Actual: str",
+        ],
+        [
+            StreamableFromDict2,
+            {"a": 12345, "b": {"a": 1, "b": "2"}, "c": 12345},
+            InvalidTypeError,
+            "Invalid type: Expected dict, Actual: int",
+        ],
+        [
+            StreamableFromDict2,
+            {"a": {"a": 1, "b": "2", "c": G1Element()}, "b": {"a": 1, "b": "2"}},
+            ParameterMissingError,
+            "1 field missing for StreamableFromDict1: c",
+        ],
+        [
+            StreamableFromDict2,
+            {"a": {"a": 1, "b": "2"}, "b": {"a": 1, "b": "2"}, "c": 12345},
+            ParameterMissingError,
+            "1 field missing for StreamableFromDict1: c",
+        ],
+    ],
+)
+def test_streamable_from_dict_failures(
+    test_class: Type[Streamable], input_dict: Dict[str, Any], error: Any, error_message: str
 ) -> None:
-    ws, _ = daemon_connection_and_temp_keychain
+    with pytest.raises(error, match=re.escape(error_message)):
+        streamable_from_dict(test_class, input_dict)
+
+
+@streamable
+@dataclass(frozen=True)
+class TestFromJsonDictDefaultValues(Streamable):
+    a: uint64 = uint64(1)
+    b: str = "default"
+    c: List[uint64] = field(default_factory=list)
+
+
+@pytest.mark.parametrize(
+    "input_dict, output_dict",
+    [
+        [{}, {"a": 1, "b": "default", "c": []}],
+        [{"a": 2}, {"a": 2, "b": "default", "c": []}],
+        [{"b": "not_default"}, {"a": 1, "b": "not_default", "c": []}],
+        [{"c": [1, 2]}, {"a": 1, "b": "default", "c": [1, 2]}],
+        [{"a": 2, "b": "not_default", "c": [1, 2]}, {"a": 2, "b": "not_default", "c": [1, 2]}],
+    ],
+)
+def test_from_json_dict_default_values(input_dict: Dict[str, object], output_dict: Dict[str, object]) -> None:
+    assert str(TestFromJsonDictDefaultValues.from_json_dict(input_dict).to_json_dict()) == str(output_dict)
+
+
+def test_basic_list() -> None:
+    a = [1, 2, 3]
+    assert is_type_List(type(a))
+    assert is_type_List(List)
+    assert is_type_List(List[int])
+    assert is_type_List(List[uint8])
+    assert is_type_List(list)
+    assert not is_type_List(type(Tuple))
+    assert not is_type_List(tuple)
+    assert not is_type_List(dict)
+
+
+def test_not_lists() -> None:
+    assert not is_type_List(Dict)
+
+
+def test_basic_optional() -> None:
+    assert is_type_SpecificOptional(Optional[int])
+    assert is_type_SpecificOptional(Optional[Optional[int]])
+    assert not is_type_SpecificOptional(List[int])
+
+
+@streamable
+@dataclass(frozen=True)
+class PostInitTestClassBasic(Streamable):
+    a: uint8
+    b: str
+    c: bytes
+    d: bytes32
+    e: G1Element
+
+
+@streamable
+@dataclass(frozen=True)
+class PostInitTestClassBad(Streamable):
+    a: uint8
+    b = 0
+
+
+@streamable
+@dataclass(frozen=True)
+class PostInitTestClassOptional(Streamable):
+    a: Optional[uint8]
+    b: Optional[uint8]
+    c: Optional[Optional[uint8]]
+    d: Optional[Optional[uint8]]
+
+
+@streamable
+@dataclass(frozen=True)
+class PostInitTestClassList(Streamable):
+    a: List[uint8]
+    b: List[List[G1Element]]
+
+
+@streamable
+@dataclass(frozen=True)
+class PostInitTestClassTuple(Streamable):
+    a: Tuple[uint8, str]
+    b: Tuple[Tuple[uint8, str], bytes32]
+
+
+@pytest.mark.parametrize(
+    "test_class, args",
+    [
+        (PostInitTestClassBasic, (24, 99, 300, b"\12" * 32, bytes(G1Element()))),
+        (PostInitTestClassBasic, (24, "test", b"\00\01", b"\x1a" * 32, G1Element())),
+        (PostInitTestClassBad, (25,)),
+        (PostInitTestClassList, ([1, 2, 3], [[G1Element(), bytes(G1Element())], [bytes(G1Element())]])),
+        (PostInitTestClassTuple, ((1, "test"), ((200, "test_2"), b"\xba" * 32))),
+        (PostInitTestClassOptional, (12, None, 13, None)),
+    ],
+)
+def test_post_init_valid(test_class: Type[Any], args: Tuple[Any, ...]) -> None:
+    def validate_item_type(type_in: Type[Any], item: object) -> bool:
+        if is_type_SpecificOptional(type_in):
+            return item is None or validate_item_type(get_args(type_in)[0], item)
+        if is_type_Tuple(type_in):
+            assert type(item) == tuple
+            types = get_args(type_in)
+            return all(validate_item_type(tuple_type, tuple_item) for tuple_type, tuple_item in zip(types, item))
+        if is_type_List(type_in):
+            list_type = get_args(type_in)[0]
+            assert type(item) == list
+            return all(validate_item_type(list_type, list_item) for list_item in item)
+        return isinstance(item, type_in)
+
+    test_object = test_class(*args)
+    hints = get_type_hints(test_class)
+    test_fields = {field.name: hints.get(field.name, field.type) for field in fields(test_class)}
+    for field_name, field_type in test_fields.items():
+        assert validate_item_type(field_type, test_object.__dict__[field_name])
+
+
+@pytest.mark.parametrize(
+    "test_class, args, expected_exception",
+    [
+        (PostInitTestClassBasic, (None, "test", b"\00\01", b"\12" * 32, G1Element()), TypeError),
+        (PostInitTestClassBasic, (1, "test", None, b"\12" * 32, G1Element()), AttributeError),
+        (PostInitTestClassBasic, (1, "test", b"\00\01", b"\12" * 31, G1Element()), ValueError),
+        (PostInitTestClassBasic, (1, "test", b"\00\01", b"\12" * 32, b"\12" * 10), ValueError),
+        (PostInitTestClassBad, (1, 2), TypeError),
+        (PostInitTestClassList, ({"1": 1}, [[uint8(200), uint8(25)], [uint8(25)]]), InvalidTypeError),
+        (PostInitTestClassList, (("1", 1), [[uint8(200), uint8(25)], [uint8(25)]]), InvalidTypeError),
+        (PostInitTestClassList, ([1, 2, 3], [uint8(200), uint8(25)]), InvalidTypeError),
+        (PostInitTestClassTuple, ((1,), ((200, "test_2"), b"\xba" * 32)), InvalidSizeError),
+        (PostInitTestClassTuple, ((1, "test", 1), ((200, "test_2"), b"\xba" * 32)), InvalidSizeError),
+        (PostInitTestClassTuple, ((1, "test"), ({"a": 2}, b"\xba" * 32)), InvalidTypeError),
+        (PostInitTestClassTuple, ((1, "test"), (G1Element(), b"\xba" * 32)), InvalidTypeError),
+        (PostInitTestClassOptional, ([], None, None, None), ValueError),
+    ],
+)
+def test_post_init_failures(test_class: Type[Any], args: Tuple[Any, ...], expected_exception: Type[Exception]) -> None:
+    with pytest.raises(expected_exception):
+        test_class(*args)
+
+
+def test_basic() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClass(Streamable):
+        a: uint32
+        b: uint32
+        c: List[uint32]
+        d: List[List[uint32]]
+        e: Optional[uint32]
+        f: Optional[uint32]
+        g: Tuple[uint32, str, bytes]
+
+    # we want to test invalid here, hence the ignore.
+    a = TestClass(24, 352, [1, 2, 4], [[1, 2, 3], [3, 4]], 728, None, (383, "hello", b"goodbye"))  # type: ignore[arg-type,list-item] # noqa: E501
+
+    b: bytes = bytes(a)
+    assert a == TestClass.from_bytes(b)
+
+
+def test_variable_size() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClass2(Streamable):
+        a: uint32
+        b: uint32
+        c: bytes
+
+    a = TestClass2(uint32(1), uint32(2), b"3")
+    bytes(a)
+
+    with pytest.raises(UnsupportedType):
+
+        @streamable
+        @dataclass(frozen=True)
+        class TestClass3(Streamable):
+            a: int
+
+
+def test_json(bt: BlockTools) -> None:
+    block = bt.create_genesis_block(test_constants, bytes32([0] * 32), uint64(0))
+    dict_block = block.to_json_dict()
+    assert FullBlock.from_json_dict(dict_block) == block
+
+
+@streamable
+@dataclass(frozen=True)
+class OptionalTestClass(Streamable):
+    a: Optional[str]
+    b: Optional[bool]
+    c: Optional[List[Optional[str]]]
+
+
+@pytest.mark.parametrize(
+    "a, b, c",
+    [
+        ("", True, ["1"]),
+        ("1", False, ["1"]),
+        ("1", True, []),
+        ("1", True, [""]),
+        ("1", True, ["1"]),
+        (None, None, None),
+    ],
+)
+def test_optional_json(a: Optional[str], b: Optional[bool], c: Optional[List[Optional[str]]]) -> None:
+    obj: OptionalTestClass = OptionalTestClass.from_json_dict({"a": a, "b": b, "c": c})
+    assert obj.a == a
+    assert obj.b == b
+    assert obj.c == c
+
+
+@streamable
+@dataclass(frozen=True)
+class TestClassRecursive1(Streamable):
+    a: List[uint32]
+
+
+@streamable
+@dataclass(frozen=True)
+class TestClassRecursive2(Streamable):
+    a: uint32
+    b: List[Optional[List[TestClassRecursive1]]]
+    c: bytes32
+
+
+def test_recursive_json() -> None:
+    tc1_a = TestClassRecursive1([uint32(1), uint32(2)])
+    tc1_b = TestClassRecursive1([uint32(4), uint32(5)])
+    tc1_c = TestClassRecursive1([uint32(7), uint32(8)])
 
-    await ws.send_str('{"this": "is valid but not expected"}')  # send some valid but unexpected json
-    response = await ws.receive()
+    tc2 = TestClassRecursive2(uint32(5), [[tc1_a], [tc1_b, tc1_c], None], bytes32(bytes([1] * 32)))
+    assert TestClassRecursive2.from_json_dict(tc2.to_json_dict()) == tc2
 
-    # check for error response
-    assert response.type == aiohttp.WSMsgType.TEXT
-    message = json.loads(response.data.strip())
-    assert message["data"]["success"] is False
-    assert message["data"]["error"].startswith("'command'")
+
+def test_recursive_types() -> None:
+    coin: Optional[Coin] = None
+    l1 = [(bytes32([2] * 32), coin)]
+    rr = RespondRemovals(uint32(1), bytes32([1] * 32), l1, None)
+    RespondRemovals(rr.height, rr.header_hash, rr.coins, rr.proofs)
+
+
+def test_ambiguous_deserialization_optionals() -> None:
+    with pytest.raises(AssertionError):
+        SubEpochChallengeSegment.from_bytes(b"\x00\x00\x00\x03\xff\xff\xff\xff")
+
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassOptional(Streamable):
+        a: Optional[uint8]
+
+    # Does not have the required elements
+    with pytest.raises(AssertionError):
+        TestClassOptional.from_bytes(bytes([]))
+
+    TestClassOptional.from_bytes(bytes([0]))
+    TestClassOptional.from_bytes(bytes([1, 2]))
+
+
+def test_ambiguous_deserialization_int() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassUint(Streamable):
+        a: uint32
+
+    # Does not have the required uint size
+    with pytest.raises(ValueError):
+        TestClassUint.from_bytes(b"\x00\x00")
+
+
+def test_ambiguous_deserialization_list() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassList(Streamable):
+        a: List[uint8]
+
+    # Does not have the required elements
+    with pytest.raises(ValueError):
+        TestClassList.from_bytes(bytes([0, 0, 100, 24]))
+
+
+def test_ambiguous_deserialization_tuple() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassTuple(Streamable):
+        a: Tuple[uint8, str]
+
+    # Does not have the required elements
+    with pytest.raises(AssertionError):
+        TestClassTuple.from_bytes(bytes([0, 0, 100, 24]))
+
+
+def test_ambiguous_deserialization_str() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassStr(Streamable):
+        a: str
+
+    # Does not have the required str size
+    with pytest.raises(AssertionError):
+        TestClassStr.from_bytes(bytes([0, 0, 100, 24, 52]))
+
+
+def test_ambiguous_deserialization_bytes() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassBytes(Streamable):
+        a: bytes
+
+    # Does not have the required str size
+    with pytest.raises(AssertionError):
+        TestClassBytes.from_bytes(bytes([0, 0, 100, 24, 52]))
+
+    with pytest.raises(AssertionError):
+        TestClassBytes.from_bytes(bytes([0, 0, 0, 1]))
+
+    TestClassBytes.from_bytes(bytes([0, 0, 0, 1, 52]))
+    TestClassBytes.from_bytes(bytes([0, 0, 0, 2, 52, 21]))
+
+
+def test_ambiguous_deserialization_bool() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassBool(Streamable):
+        a: bool
+
+    # Does not have the required str size
+    with pytest.raises(AssertionError):
+        TestClassBool.from_bytes(bytes([]))
+
+    TestClassBool.from_bytes(bytes([0]))
+    TestClassBool.from_bytes(bytes([1]))
+
+
+def test_ambiguous_deserialization_program() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class TestClassProgram(Streamable):
+        a: Program
+
+    program = Program.to(binutils.assemble("()"))  # type: ignore[no-untyped-call]  # TODO, add typing in clvm_tools
+
+    TestClassProgram.from_bytes(bytes(program))
+
+    with pytest.raises(AssertionError):
+        TestClassProgram.from_bytes(bytes(program) + b"9")
+
+
+def test_streamable_empty() -> None:
+    @streamable
+    @dataclass(frozen=True)
+    class A(Streamable):
+        pass
+
+    assert A.from_bytes(bytes(A())) == A()
+
+
+def test_parse_bool() -> None:
+    assert not parse_bool(io.BytesIO(b"\x00"))
+    assert parse_bool(io.BytesIO(b"\x01"))
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_bool(io.BytesIO(b""))
+
+    with pytest.raises(ValueError):
+        parse_bool(io.BytesIO(b"\xff"))
+
+    with pytest.raises(ValueError):
+        parse_bool(io.BytesIO(b"\x02"))
+
+
+def test_uint32() -> None:
+    assert parse_uint32(io.BytesIO(b"\x00\x00\x00\x00")) == 0
+    assert parse_uint32(io.BytesIO(b"\x00\x00\x00\x01")) == 1
+    assert parse_uint32(io.BytesIO(b"\x00\x00\x00\x01"), "little") == 16777216
+    assert parse_uint32(io.BytesIO(b"\x01\x00\x00\x00")) == 16777216
+    assert parse_uint32(io.BytesIO(b"\x01\x00\x00\x00"), "little") == 1
+    assert parse_uint32(io.BytesIO(b"\xff\xff\xff\xff"), "little") == 4294967295
+
+    def test_write(value: int, byteorder: Literal["little", "big"]) -> None:
+        f = io.BytesIO()
+        write_uint32(f, uint32(value), byteorder)
+        f.seek(0)
+        assert parse_uint32(f, byteorder) == value
+
+    test_write(1, "big")
+    test_write(1, "little")
+    test_write(4294967295, "big")
+    test_write(4294967295, "little")
+
+    with pytest.raises(AssertionError):
+        parse_uint32(io.BytesIO(b""))
+    with pytest.raises(AssertionError):
+        parse_uint32(io.BytesIO(b"\x00"))
+    with pytest.raises(AssertionError):
+        parse_uint32(io.BytesIO(b"\x00\x00"))
+    with pytest.raises(AssertionError):
+        parse_uint32(io.BytesIO(b"\x00\x00\x00"))
+
+
+def test_parse_optional() -> None:
+    assert parse_optional(io.BytesIO(b"\x00"), parse_bool) is None
+    assert parse_optional(io.BytesIO(b"\x01\x01"), parse_bool)
+    assert not parse_optional(io.BytesIO(b"\x01\x00"), parse_bool)
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_optional(io.BytesIO(b"\x01"), parse_bool)
+
+    # optional must be 0 or 1
+    with pytest.raises(ValueError):
+        parse_optional(io.BytesIO(b"\x02\x00"), parse_bool)
+
+    with pytest.raises(ValueError):
+        parse_optional(io.BytesIO(b"\xff\x00"), parse_bool)
+
+
+def test_parse_bytes() -> None:
+    assert parse_bytes(io.BytesIO(b"\x00\x00\x00\x00")) == b""
+    assert parse_bytes(io.BytesIO(b"\x00\x00\x00\x01\xff")) == b"\xff"
+
+    # 512 bytes
+    assert parse_bytes(io.BytesIO(b"\x00\x00\x02\x00" + b"a" * 512)) == b"a" * 512
+
+    # 255 bytes
+    assert parse_bytes(io.BytesIO(b"\x00\x00\x00\xff" + b"b" * 255)) == b"b" * 255
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_bytes(io.BytesIO(b"\x00\x00\x00\xff\x01\x02\x03"))
+
+    with pytest.raises(AssertionError):
+        parse_bytes(io.BytesIO(b"\xff\xff\xff\xff"))
+
+    with pytest.raises(AssertionError):
+        parse_bytes(io.BytesIO(b"\xff\xff\xff\xff" + b"a" * 512))
+
+    # EOF off by one
+    with pytest.raises(AssertionError):
+        parse_bytes(io.BytesIO(b"\x00\x00\x02\x01" + b"a" * 512))
+
+
+def test_parse_list() -> None:
+    assert parse_list(io.BytesIO(b"\x00\x00\x00\x00"), parse_bool) == []
+    assert parse_list(io.BytesIO(b"\x00\x00\x00\x01\x01"), parse_bool) == [True]
+    assert parse_list(io.BytesIO(b"\x00\x00\x00\x03\x01\x00\x01"), parse_bool) == [True, False, True]
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_list(io.BytesIO(b"\x00\x00\x00\x01"), parse_bool)
+
+    with pytest.raises(AssertionError):
+        parse_list(io.BytesIO(b"\x00\x00\x00\xff\x00\x00"), parse_bool)
+
+    with pytest.raises(AssertionError):
+        parse_list(io.BytesIO(b"\xff\xff\xff\xff\x00\x00"), parse_bool)
+
+    # failure to parser internal type
+    with pytest.raises(ValueError):
+        parse_list(io.BytesIO(b"\x00\x00\x00\x01\x02"), parse_bool)
+
+
+def test_parse_tuple() -> None:
+    assert parse_tuple(io.BytesIO(b""), []) == ()
+    assert parse_tuple(io.BytesIO(b"\x00\x00"), [parse_bool, parse_bool]) == (False, False)
+    assert parse_tuple(io.BytesIO(b"\x00\x01"), [parse_bool, parse_bool]) == (False, True)
+
+    # error in parsing internal type
+    with pytest.raises(ValueError):
+        parse_tuple(io.BytesIO(b"\x00\x02"), [parse_bool, parse_bool])
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_tuple(io.BytesIO(b"\x00"), [parse_bool, parse_bool])
+
+
+class TestFromBytes:
+    b: bytes
+
+    @classmethod
+    def from_bytes(cls, b: bytes) -> TestFromBytes:
+        ret = TestFromBytes()
+        ret.b = b
+        return ret
+
+
+class FailFromBytes:
+    @classmethod
+    def from_bytes(cls, b: bytes) -> FailFromBytes:
+        raise ValueError()
+
+
+def test_parse_size_hints() -> None:
+    assert parse_size_hints(io.BytesIO(b"1337"), TestFromBytes, 4, False).b == b"1337"
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_size_hints(io.BytesIO(b"133"), TestFromBytes, 4, False)
+
+    # error in underlying type
+    with pytest.raises(ValueError):
+        parse_size_hints(io.BytesIO(b"1337"), FailFromBytes, 4, False)
+
+
+def test_parse_str() -> None:
+    assert parse_str(io.BytesIO(b"\x00\x00\x00\x00")) == ""
+    assert parse_str(io.BytesIO(b"\x00\x00\x00\x01a")) == "a"
+
+    # 512 bytes
+    assert parse_str(io.BytesIO(b"\x00\x00\x02\x00" + b"a" * 512)) == "a" * 512
+
+    # 255 bytes
+    assert parse_str(io.BytesIO(b"\x00\x00\x00\xff" + b"b" * 255)) == "b" * 255
+
+    # EOF
+    with pytest.raises(AssertionError):
+        parse_str(io.BytesIO(b"\x00\x00\x00\xff\x01\x02\x03"))
+
+    with pytest.raises(AssertionError):
+        parse_str(io.BytesIO(b"\xff\xff\xff\xff"))
+
+    with pytest.raises(AssertionError):
+        parse_str(io.BytesIO(b"\xff\xff\xff\xff" + b"a" * 512))
+
+    # EOF off by one
+    with pytest.raises(AssertionError):
+        parse_str(io.BytesIO(b"\x00\x00\x02\x01" + b"a" * 512))
+
+
+def test_wrong_decorator_order() -> None:
+    with pytest.raises(DefinitionError):
+
+        @dataclass(frozen=True)
+        @streamable
+        class WrongDecoratorOrder(Streamable):
+            pass
+
+
+def test_dataclass_not_frozen() -> None:
+    with pytest.raises(DefinitionError):
+
+        @streamable
+        @dataclass(frozen=False)
+        class DataclassNotFrozen(Streamable):
+            pass
+
+
+def test_dataclass_missing() -> None:
+    with pytest.raises(DefinitionError):
+
+        @streamable
+        class DataclassMissing(Streamable):
+            pass
+
+
+def test_streamable_inheritance_missing() -> None:
+    with pytest.raises(DefinitionError):
+        # we want to test invalid here, hence the ignore.
+        @streamable
+        @dataclass(frozen=True)
+        class StreamableInheritanceMissing:  # type: ignore[type-var]
+            pass
+
+
+@pytest.mark.parametrize(
+    "method, input_type",
+    [
+        (function_to_parse_one_item, float),
+        (function_to_parse_one_item, int),
+        (function_to_parse_one_item, dict),
+        (function_to_stream_one_item, float),
+        (function_to_stream_one_item, int),
+        (function_to_stream_one_item, dict),
+        (recurse_jsonify, 1.0),
+        (recurse_jsonify, recurse_jsonify),
+    ],
+)
+def test_unsupported_types(method: Callable[[object], object], input_type: object) -> None:
+    with pytest.raises(UnsupportedType):
+        method(input_type)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/daemon/test_daemon_register.py` & `chia-blockchain-2.0.0b3/tests/core/daemon/test_daemon_register.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/daemon/test_keychain_proxy.py` & `chia-blockchain-2.0.0b3/tests/core/daemon/test_keychain_proxy.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/conftest.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/conftest.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_cli.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_cli.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_layer_util.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_layer_util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_rpc.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_rpc.py`

 * *Files 0% similar despite different names*

```diff
@@ -29,25 +29,29 @@
 from chia.util.byte_types import hexstr_to_bytes
 from chia.util.config import save_config
 from chia.util.ints import uint16, uint32
 from chia.wallet.trading.offer import Offer as TradingOffer
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.wallet import Wallet
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 
 pytestmark = pytest.mark.data_layer
 nodes = Tuple[WalletNode, FullNodeSimulator]
 nodes_with_port_bt_ph = Tuple[WalletRpcApi, FullNodeSimulator, uint16, bytes32, BlockTools]
 wallet_and_port_tuple = Tuple[WalletNode, uint16]
 two_wallets_with_port = Tuple[Tuple[wallet_and_port_tuple, wallet_and_port_tuple], FullNodeSimulator, BlockTools]
 
 
 @contextlib.asynccontextmanager
 async def init_data_layer(
-    wallet_rpc_port: uint16, bt: BlockTools, db_path: Path, wallet_service: Optional[Service[WalletNode]] = None
+    wallet_rpc_port: uint16,
+    bt: BlockTools,
+    db_path: Path,
+    wallet_service: Optional[Service[WalletNode, WalletNodeAPI]] = None,
 ) -> AsyncIterator[DataLayer]:
     config = bt.config
     config["data_layer"]["wallet_peer"]["port"] = int(wallet_rpc_port)
     # TODO: running the data server causes the RPC tests to hang at the end
     config["data_layer"]["run_server"] = False
     config["data_layer"]["port"] = 0
     config["data_layer"]["rpc_port"] = 0
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_store.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/test_data_store_schema.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/test_data_store_schema.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/data_layer/util.py` & `chia-blockchain-2.0.0b3/tests/core/data_layer/util.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/conftest.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/conftest.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/full_sync/test_full_sync.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/full_sync/test_full_sync.py`

 * *Files 2% similar despite different names*

```diff
@@ -8,15 +8,14 @@
 from unittest.mock import MagicMock
 
 import pytest
 
 from chia.full_node.full_node_api import FullNodeAPI
 from chia.protocols import full_node_protocol
 from chia.protocols.shared_protocol import Capability
-from chia.simulator.block_tools import test_constants
 from chia.simulator.time_out_assert import time_out_assert
 from chia.types.blockchain_format.sub_epoch_summary import SubEpochSummary
 from chia.types.full_block import FullBlock
 from chia.types.peer_info import PeerInfo
 from chia.util.hash import std_hash
 from chia.util.ints import uint16
 from tests.core.node_height import node_height_between, node_height_exactly
@@ -34,52 +33,50 @@
         server_1 = full_node_1.full_node.server
         server_2 = full_node_2.full_node.server
         server_3 = full_node_3.full_node.server
         server_4 = full_node_4.full_node.server
         server_5 = full_node_5.full_node.server
 
         # If this constant is changed, update the tests to use more blocks
-        assert test_constants.WEIGHT_PROOF_RECENT_BLOCKS < 400
+        assert bt.constants.WEIGHT_PROOF_RECENT_BLOCKS < 400
 
         # Syncs up less than recent blocks
-        for block in blocks[: test_constants.WEIGHT_PROOF_RECENT_BLOCKS - 5]:
+        for block in blocks[: bt.constants.WEIGHT_PROOF_RECENT_BLOCKS - 5]:
             await full_node_1.full_node.add_block(block)
 
         await server_2.start_client(
             PeerInfo(self_hostname, uint16(server_1._port)), on_connect=full_node_2.full_node.on_connect
         )
 
         timeout_seconds = 250
 
         # The second node should eventually catch up to the first one
         await time_out_assert(
-            timeout_seconds, node_height_exactly, True, full_node_2, test_constants.WEIGHT_PROOF_RECENT_BLOCKS - 5 - 1
+            timeout_seconds, node_height_exactly, True, full_node_2, bt.constants.WEIGHT_PROOF_RECENT_BLOCKS - 5 - 1
         )
 
-        for block in blocks[
-            test_constants.WEIGHT_PROOF_RECENT_BLOCKS - 5 : test_constants.WEIGHT_PROOF_RECENT_BLOCKS + 5
-        ]:
+        for block in blocks[bt.constants.WEIGHT_PROOF_RECENT_BLOCKS - 5 : bt.constants.WEIGHT_PROOF_RECENT_BLOCKS + 5]:
             await full_node_1.full_node.add_block(block)
 
         await server_3.start_client(
             PeerInfo(self_hostname, uint16(server_1._port)), on_connect=full_node_3.full_node.on_connect
         )
 
         # Node 3 and Node 2 sync up to node 1
         await time_out_assert(
-            timeout_seconds, node_height_exactly, True, full_node_2, test_constants.WEIGHT_PROOF_RECENT_BLOCKS + 5 - 1
+            timeout_seconds, node_height_exactly, True, full_node_2, bt.constants.WEIGHT_PROOF_RECENT_BLOCKS + 5 - 1
         )
         await time_out_assert(
-            timeout_seconds, node_height_exactly, True, full_node_3, test_constants.WEIGHT_PROOF_RECENT_BLOCKS + 5 - 1
+            timeout_seconds, node_height_exactly, True, full_node_3, bt.constants.WEIGHT_PROOF_RECENT_BLOCKS + 5 - 1
         )
 
         cons = list(server_1.all_connections.values())[:]
         for con in cons:
             await con.close()
-        for block in blocks[test_constants.WEIGHT_PROOF_RECENT_BLOCKS + 5 :]:
+        for block in blocks[bt.constants.WEIGHT_PROOF_RECENT_BLOCKS + 5 :]:
             await full_node_1.full_node.add_block(block)
 
         await server_2.start_client(
             PeerInfo(self_hostname, uint16(server_1._port)), on_connect=full_node_2.full_node.on_connect
         )
         await server_3.start_client(
             PeerInfo(self_hostname, uint16(server_1._port)), on_connect=full_node_3.full_node.on_connect
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/ram_db.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/ram_db.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_block_store.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_block_store.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,45 +1,47 @@
 from __future__ import annotations
 
 import asyncio
 import dataclasses
 import logging
 import random
 import sqlite3
+from pathlib import Path
+from typing import List
 
 import pytest
 from clvm.casts import int_to_bytes
 
 from chia.consensus.blockchain import Blockchain
 from chia.consensus.default_constants import DEFAULT_CONSTANTS
 from chia.consensus.full_block_to_block_record import header_block_to_sub_block_record
 from chia.full_node.block_store import BlockStore
 from chia.full_node.coin_store import CoinStore
-from chia.simulator.block_tools import test_constants
+from chia.simulator.block_tools import BlockTools
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.blockchain_format.vdf import VDFProof
 from chia.types.full_block import FullBlock
-from chia.util.ints import uint8
+from chia.util.ints import uint8, uint32, uint64
 from tests.blockchain.blockchain_test_utils import _validate_and_add_block
 from tests.util.db_connection import DBConnection
 
 log = logging.getLogger(__name__)
 
 
 @pytest.mark.asyncio
-async def test_block_store(tmp_dir, db_version, bt):
+async def test_block_store(tmp_dir: Path, db_version: int, bt: BlockTools) -> None:
     assert sqlite3.threadsafety >= 1
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(db_version) as db_wrapper, DBConnection(db_version) as db_wrapper_2:
         # Use a different file for the blockchain
         coin_store_2 = await CoinStore.create(db_wrapper_2)
         store_2 = await BlockStore.create(db_wrapper_2)
-        bc = await Blockchain.create(coin_store_2, store_2, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store_2, store_2, bt.constants, tmp_dir, 2)
 
         store = await BlockStore.create(db_wrapper)
         await BlockStore.create(db_wrapper_2)
 
         # Save/get block
         for block in blocks:
             await _validate_and_add_block(bc, block)
@@ -50,17 +52,17 @@
             assert block == await store.get_full_block(block.header_hash)
             assert block == await store.get_full_block(block.header_hash)
             assert block_record == (await store.get_block_record(block_record_hh))
             await store.set_in_chain([(block_record.header_hash,)])
             await store.set_peak(block_record.header_hash)
             await store.set_peak(block_record.header_hash)
 
-        assert len(await store.get_full_blocks_at([1])) == 1
-        assert len(await store.get_full_blocks_at([0])) == 1
-        assert len(await store.get_full_blocks_at([100])) == 0
+        assert len(await store.get_full_blocks_at([uint32(1)])) == 1
+        assert len(await store.get_full_blocks_at([uint32(0)])) == 1
+        assert len(await store.get_full_blocks_at([uint32(100)])) == 0
 
         # get_block_records_in_range
         block_record_records = await store.get_block_records_in_range(0, 0xFFFFFFFF)
         assert len(block_record_records) == len(blocks)
         for b in blocks:
             assert block_record_records[b.header_hash].header_hash == b.header_hash
 
@@ -75,31 +77,31 @@
         block_records = await store.get_block_records_by_hash([b.header_hash for b in blocks])
         assert len(block_records) == len(blocks)
         for br, b in zip(block_records, blocks):
             assert br.header_hash == b.header_hash
 
 
 @pytest.mark.asyncio
-async def test_deadlock(tmp_dir, db_version, bt):
+async def test_deadlock(tmp_dir: Path, db_version: int, bt: BlockTools) -> None:
     """
     This test was added because the store was deadlocking in certain situations, when fetching and
     adding blocks repeatedly. The issue was patched.
     """
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(db_version) as wrapper, DBConnection(db_version) as wrapper_2:
         store = await BlockStore.create(wrapper)
         coin_store_2 = await CoinStore.create(wrapper_2)
         store_2 = await BlockStore.create(wrapper_2)
-        bc = await Blockchain.create(coin_store_2, store_2, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store_2, store_2, bt.constants, tmp_dir, 2)
         block_records = []
         for block in blocks:
             await _validate_and_add_block(bc, block)
             block_records.append(bc.block_record(block.header_hash))
-        tasks = []
+        tasks: List[asyncio.Task[object]] = []
 
         for i in range(10000):
             rand_i = random.randint(0, 9)
             if random.random() < 0.5:
                 tasks.append(
                     asyncio.create_task(
                         store.add_full_block(blocks[rand_i].header_hash, blocks[rand_i], block_records[rand_i])
@@ -107,22 +109,22 @@
                 )
             if random.random() < 0.5:
                 tasks.append(asyncio.create_task(store.get_full_block(blocks[rand_i].header_hash)))
         await asyncio.gather(*tasks)
 
 
 @pytest.mark.asyncio
-async def test_rollback(bt, tmp_dir):
+async def test_rollback(bt: BlockTools, tmp_dir: Path) -> None:
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(2) as db_wrapper:
         # Use a different file for the blockchain
         coin_store = await CoinStore.create(db_wrapper)
         block_store = await BlockStore.create(db_wrapper)
-        bc = await Blockchain.create(coin_store, block_store, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store, block_store, bt.constants, tmp_dir, 2)
 
         # insert all blocks
         count = 0
         for block in blocks:
             await _validate_and_add_block(bc, block)
             count += 1
             ret = await block_store.get_random_not_compactified(count)
@@ -131,77 +133,77 @@
             assert len(set(ret)) == count
 
         async with db_wrapper.reader_no_transaction() as conn:
             for block in blocks:
                 async with conn.execute(
                     "SELECT in_main_chain FROM full_blocks WHERE header_hash=?", (block.header_hash,)
                 ) as cursor:
-                    rows = await cursor.fetchall()
+                    rows = list(await cursor.fetchall())
                     assert len(rows) == 1
                     assert rows[0][0]
 
         await block_store.rollback(5)
 
         count = 0
         async with db_wrapper.reader_no_transaction() as conn:
             for block in blocks:
                 async with conn.execute(
                     "SELECT in_main_chain FROM full_blocks WHERE header_hash=? ORDER BY height",
                     (block.header_hash,),
                 ) as cursor:
-                    rows = await cursor.fetchall()
+                    rows = list(await cursor.fetchall())
                     print(count, rows)
                     assert len(rows) == 1
                     assert rows[0][0] == (count <= 5)
                 count += 1
 
 
 @pytest.mark.asyncio
-async def test_count_compactified_blocks(bt, tmp_dir, db_version):
+async def test_count_compactified_blocks(bt: BlockTools, tmp_dir: Path, db_version: int) -> None:
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(db_version) as db_wrapper:
         coin_store = await CoinStore.create(db_wrapper)
         block_store = await BlockStore.create(db_wrapper)
-        bc = await Blockchain.create(coin_store, block_store, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store, block_store, bt.constants, tmp_dir, 2)
 
         count = await block_store.count_compactified_blocks()
         assert count == 0
 
         for block in blocks:
             await _validate_and_add_block(bc, block)
 
         count = await block_store.count_compactified_blocks()
         assert count == 0
 
 
 @pytest.mark.asyncio
-async def test_count_uncompactified_blocks(bt, tmp_dir, db_version):
+async def test_count_uncompactified_blocks(bt: BlockTools, tmp_dir: Path, db_version: int) -> None:
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(db_version) as db_wrapper:
         coin_store = await CoinStore.create(db_wrapper)
         block_store = await BlockStore.create(db_wrapper)
-        bc = await Blockchain.create(coin_store, block_store, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store, block_store, bt.constants, tmp_dir, 2)
 
         count = await block_store.count_uncompactified_blocks()
         assert count == 0
 
         for block in blocks:
             await _validate_and_add_block(bc, block)
 
         count = await block_store.count_uncompactified_blocks()
         assert count == 10
 
 
 @pytest.mark.asyncio
-async def test_replace_proof(bt, tmp_dir, db_version):
+async def test_replace_proof(bt: BlockTools, tmp_dir: Path, db_version: int) -> None:
     blocks = bt.get_consecutive_blocks(10)
 
-    def rand_bytes(num) -> bytes:
+    def rand_bytes(num: int) -> bytes:
         ret = bytearray(num)
         for i in range(num):
             ret[i] = random.getrandbits(8)
         return bytes(ret)
 
     def rand_vdf_proof() -> VDFProof:
         return VDFProof(
@@ -209,92 +211,95 @@
             rand_bytes(32),  # witness
             bool(random.randint(0, 1)),  # normalized_to_identity
         )
 
     async with DBConnection(db_version) as db_wrapper:
         coin_store = await CoinStore.create(db_wrapper)
         block_store = await BlockStore.create(db_wrapper)
-        bc = await Blockchain.create(coin_store, block_store, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store, block_store, bt.constants, tmp_dir, 2)
         for block in blocks:
             await _validate_and_add_block(bc, block)
 
         replaced = []
 
         for block in blocks:
             assert block.challenge_chain_ip_proof is not None
             proof = rand_vdf_proof()
             replaced.append(proof)
             new_block = dataclasses.replace(block, challenge_chain_ip_proof=proof)
             await block_store.replace_proof(block.header_hash, new_block)
 
         for block, proof in zip(blocks, replaced):
             b = await block_store.get_full_block(block.header_hash)
+            assert b is not None
             assert b.challenge_chain_ip_proof == proof
 
             # make sure we get the same result when we hit the database
             # itself (and not just the block cache)
             block_store.rollback_cache_block(block.header_hash)
             b = await block_store.get_full_block(block.header_hash)
+            assert b is not None
             assert b.challenge_chain_ip_proof == proof
 
 
 @pytest.mark.asyncio
-async def test_get_generator(bt, db_version):
+async def test_get_generator(bt: BlockTools, db_version: int) -> None:
     blocks = bt.get_consecutive_blocks(10)
 
     def generator(i: int) -> SerializedProgram:
         return SerializedProgram.from_bytes(int_to_bytes(i))
 
     async with DBConnection(db_version) as db_wrapper:
         store = await BlockStore.create(db_wrapper)
 
         new_blocks = []
         for i, block in enumerate(blocks):
             block = dataclasses.replace(block, transactions_generator=generator(i))
             block_record = header_block_to_sub_block_record(
-                DEFAULT_CONSTANTS, 0, block, 0, False, 0, max(0, block.height - 1), None
+                DEFAULT_CONSTANTS, uint64(0), block, uint64(0), False, uint8(0), uint32(max(0, block.height - 1)), None
             )
             await store.add_full_block(block.header_hash, block, block_record)
             await store.set_in_chain([(block_record.header_hash,)])
             await store.set_peak(block_record.header_hash)
             new_blocks.append(block)
 
         if db_version == 2:
             expected_generators = list(map(lambda x: x.transactions_generator, new_blocks[1:10]))
-            generators = await store.get_generators_at(range(1, 10))
+            generators = await store.get_generators_at([uint32(x) for x in range(1, 10)])
             assert generators == expected_generators
 
             # test out-of-order heights
             expected_generators = list(map(lambda x: x.transactions_generator, [new_blocks[i] for i in [4, 8, 3, 9]]))
-            generators = await store.get_generators_at([4, 8, 3, 9])
+            generators = await store.get_generators_at([uint32(4), uint32(8), uint32(3), uint32(9)])
             assert generators == expected_generators
 
             with pytest.raises(KeyError):
-                await store.get_generators_at([100])
+                await store.get_generators_at([uint32(100)])
 
         assert await store.get_generator(blocks[2].header_hash) == new_blocks[2].transactions_generator
         assert await store.get_generator(blocks[4].header_hash) == new_blocks[4].transactions_generator
         assert await store.get_generator(blocks[6].header_hash) == new_blocks[6].transactions_generator
         assert await store.get_generator(blocks[7].header_hash) == new_blocks[7].transactions_generator
 
 
 @pytest.mark.asyncio
-async def test_get_blocks_by_hash(tmp_dir, bt, db_version):
+async def test_get_blocks_by_hash(tmp_dir: Path, bt: BlockTools, db_version: int) -> None:
     assert sqlite3.threadsafety >= 1
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(db_version) as db_wrapper, DBConnection(db_version) as db_wrapper_2:
         # Use a different file for the blockchain
         coin_store_2 = await CoinStore.create(db_wrapper_2)
         store_2 = await BlockStore.create(db_wrapper_2)
-        bc = await Blockchain.create(coin_store_2, store_2, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store_2, store_2, bt.constants, tmp_dir, 2)
 
         store = await BlockStore.create(db_wrapper)
         await BlockStore.create(db_wrapper_2)
 
+        print("starting test")
         hashes = []
         # Save/get block
         for block in blocks:
             await _validate_and_add_block(bc, block)
             block_record = bc.block_record(block.header_hash)
             await store.add_full_block(block.header_hash, block, block_record)
             hashes.append(block.header_hash)
@@ -311,23 +316,23 @@
             await store.get_block_bytes_by_hash([bytes32.from_bytes(b"yolo" * 8)])
 
         with pytest.raises(AssertionError):
             await store.get_block_bytes_by_hash([bytes32.from_bytes(b"yolo" * 8)] * 1000)
 
 
 @pytest.mark.asyncio
-async def test_get_block_bytes_in_range(tmp_dir, bt, db_version):
+async def test_get_block_bytes_in_range(tmp_dir: Path, bt: BlockTools, db_version: int) -> None:
     assert sqlite3.threadsafety >= 1
     blocks = bt.get_consecutive_blocks(10)
 
     async with DBConnection(db_version) as db_wrapper_2:
         # Use a different file for the blockchain
         coin_store_2 = await CoinStore.create(db_wrapper_2)
         store_2 = await BlockStore.create(db_wrapper_2)
-        bc = await Blockchain.create(coin_store_2, store_2, test_constants, tmp_dir, 2)
+        bc = await Blockchain.create(coin_store_2, store_2, bt.constants, tmp_dir, 2)
 
         await BlockStore.create(db_wrapper_2)
 
         # Save/get block
         for block in blocks:
             await _validate_and_add_block(bc, block)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_coin_store.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_coin_store.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,21 +1,22 @@
 from __future__ import annotations
 
 import logging
+from pathlib import Path
 from typing import List, Optional, Set, Tuple
 
 import pytest
 
 from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
 from chia.consensus.blockchain import AddBlockResult, Blockchain
 from chia.consensus.coinbase import create_farmer_coin, create_pool_coin
 from chia.full_node.block_store import BlockStore
 from chia.full_node.coin_store import CoinStore
 from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions
-from chia.simulator.block_tools import test_constants
+from chia.simulator.block_tools import BlockTools, test_constants
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
 from chia.types.full_block import FullBlock
 from chia.types.generator_types import BlockGenerator
 from chia.util.generator_tools import tx_removals_and_additions
@@ -47,15 +48,15 @@
         constants.GENESIS_CHALLENGE,
     )
     return pool_coin, farmer_coin
 
 
 class TestCoinStoreWithBlocks:
     @pytest.mark.asyncio
-    async def test_basic_coin_store(self, db_version, softfork_height, bt):
+    async def test_basic_coin_store(self, db_version: int, softfork_height: uint32, bt: BlockTools) -> None:
         wallet_a = WALLET_A
         reward_ph = wallet_a.get_new_puzzlehash()
 
         # Generate some coins
         blocks = bt.get_consecutive_blocks(
             10,
             [],
@@ -131,19 +132,21 @@
                         assert record is not None
                         assert not record.spent
                         assert record.coin == expected_coin
                         all_records.add(record)
                     for coin_name in tx_removals:
                         # Check that the removed coins are set to spent
                         record = await coin_store.get_coin_record(coin_name)
+                        assert record is not None
                         assert record.spent
                         all_records.add(record)
                     for coin in tx_additions:
                         # Check that the added coins are added
                         record = await coin_store.get_coin_record(coin.name())
+                        assert record is not None
                         assert not record.spent
                         assert coin == record.coin
                         all_records.add(record)
 
                     db_records = await coin_store.get_coin_records(
                         [c.name() for c in list(should_be_included_prev) + tx_additions] + tx_removals
                     )
@@ -152,15 +155,15 @@
                     for record in db_records:
                         assert record in all_records
 
                     should_be_included_prev = should_be_included.copy()
                     should_be_included = set()
 
     @pytest.mark.asyncio
-    async def test_set_spent(self, db_version, bt):
+    async def test_set_spent(self, db_version: int, bt: BlockTools) -> None:
         blocks = bt.get_consecutive_blocks(9, [])
 
         async with DBConnection(db_version) as db_wrapper:
             coin_store = await CoinStore.create(db_wrapper)
 
             # Save/get block
             for block in blocks:
@@ -177,31 +180,33 @@
                                 additions,
                                 removals,
                             )
 
                         coins = block.get_included_reward_coins()
                         records = [await coin_store.get_coin_record(coin.name()) for coin in coins]
 
-                    await coin_store._set_spent([r.name for r in records], block.height)
+                    await coin_store._set_spent([r.name for r in records if r is not None], block.height)
 
                     if len(records) > 0:
                         for r in records:
+                            assert r is not None
                             assert (await coin_store.get_coin_record(r.name)) is not None
 
                         # Check that we can't spend a coin twice in DB
                         with pytest.raises(ValueError, match="Invalid operation to set spent"):
-                            await coin_store._set_spent([r.name for r in records], block.height)
+                            await coin_store._set_spent([r.name for r in records if r is not None], block.height)
 
                     records = [await coin_store.get_coin_record(coin.name()) for coin in coins]
                     for record in records:
+                        assert record is not None
                         assert record.spent
                         assert record.spent_block_index == block.height
 
     @pytest.mark.asyncio
-    async def test_num_unspent(self, bt, db_version):
+    async def test_num_unspent(self, bt: BlockTools, db_version: int) -> None:
         blocks = bt.get_consecutive_blocks(37, [])
 
         expect_unspent = 0
         test_excercised = False
 
         async with DBConnection(db_version) as db_wrapper:
             coin_store = await CoinStore.create(db_wrapper)
@@ -225,15 +230,15 @@
                     expect_unspent += len(block.get_included_reward_coins())
                     assert await coin_store.num_unspent() == expect_unspent
                     test_excercised = expect_unspent > 0
 
         assert test_excercised
 
     @pytest.mark.asyncio
-    async def test_rollback(self, db_version, bt):
+    async def test_rollback(self, db_version: int, bt: BlockTools) -> None:
         blocks = bt.get_consecutive_blocks(20)
 
         async with DBConnection(db_version) as db_wrapper:
             coin_store = await CoinStore.create(db_wrapper)
 
             selected_coin: Optional[CoinRecord] = None
             all_coins: List[Coin] = []
@@ -247,24 +252,24 @@
                     await coin_store.new_block(
                         block.height,
                         block.foliage_transaction_block.timestamp,
                         block.get_included_reward_coins(),
                         additions,
                         removals,
                     )
-                    coins = list(block.get_included_reward_coins())
-                    records: List[CoinRecord] = [await coin_store.get_coin_record(coin.name()) for coin in coins]
+                    coins = block.get_included_reward_coins()
+                    records = [await coin_store.get_coin_record(coin.name()) for coin in coins]
 
                     spend_selected_coin = selected_coin is not None
                     if block.height != 0 and selected_coin is None:
                         # Select the first CoinRecord which will be spent at the next transaction block.
                         selected_coin = records[0]
-                        await coin_store._set_spent([r.name for r in records[1:]], block.height)
+                        await coin_store._set_spent([r.name for r in records[1:] if r is not None], block.height)
                     else:
-                        await coin_store._set_spent([r.name for r in records], block.height)
+                        await coin_store._set_spent([r.name for r in records if r is not None], block.height)
 
                     if spend_selected_coin:
                         assert selected_coin is not None
                         await coin_store._set_spent([selected_coin.name], block.height)
 
                     records = [await coin_store.get_coin_record(coin.name()) for coin in coins]  # update coin records
                     for record in records:
@@ -282,22 +287,23 @@
                     if spend_selected_coin:
                         break
 
             assert selected_coin is not None
             reorg_index = selected_coin.confirmed_block_index
 
             # Get all CoinRecords.
-            all_records: List[CoinRecord] = [await coin_store.get_coin_record(coin.name()) for coin in all_coins]
+            all_records = [await coin_store.get_coin_record(coin.name()) for coin in all_coins]
 
             # The reorg will revert the creation and spend of many coins. It will also revert the spend (but not the
             # creation) of the selected coin.
             changed_records = await coin_store.rollback_to_block(reorg_index)
             changed_coin_records = [cr.coin for cr in changed_records]
             assert selected_coin in changed_records
             for coin_record in all_records:
+                assert coin_record is not None
                 if coin_record.confirmed_block_index > reorg_index:
                     assert coin_record.coin in changed_coin_records
                 if coin_record.spent_block_index > reorg_index:
                     assert coin_record.coin in changed_coin_records
 
             for block in blocks:
                 if block.is_transaction_block():
@@ -309,22 +315,22 @@
                             assert record is not None
                             assert record.spent == (record.name != selected_coin.name)
                     else:
                         for record in records:
                             assert record is None
 
     @pytest.mark.asyncio
-    async def test_basic_reorg(self, tmp_dir, db_version, bt):
+    async def test_basic_reorg(self, tmp_dir: Path, db_version: int, bt: BlockTools) -> None:
         async with DBConnection(db_version) as db_wrapper:
             initial_block_count = 30
             reorg_length = 15
             blocks = bt.get_consecutive_blocks(initial_block_count)
             coin_store = await CoinStore.create(db_wrapper)
             store = await BlockStore.create(db_wrapper)
-            b: Blockchain = await Blockchain.create(coin_store, store, test_constants, tmp_dir, 2)
+            b: Blockchain = await Blockchain.create(coin_store, store, bt.constants, tmp_dir, 2)
             try:
                 records: List[Optional[CoinRecord]] = []
 
                 for block in blocks:
                     await _validate_and_add_block(b, block)
                 peak = b.get_peak()
                 assert peak is not None
@@ -362,28 +368,28 @@
                 peak = b.get_peak()
                 assert peak is not None
                 assert peak.height == initial_block_count - 10 + reorg_length - 1
             finally:
                 b.shut_down()
 
     @pytest.mark.asyncio
-    async def test_get_puzzle_hash(self, tmp_dir, db_version, bt):
+    async def test_get_puzzle_hash(self, tmp_dir: Path, db_version: int, bt: BlockTools) -> None:
         async with DBConnection(db_version) as db_wrapper:
             num_blocks = 20
             farmer_ph = bytes32(32 * b"0")
             pool_ph = bytes32(32 * b"1")
             blocks = bt.get_consecutive_blocks(
                 num_blocks,
                 farmer_reward_puzzle_hash=farmer_ph,
                 pool_reward_puzzle_hash=pool_ph,
                 guarantee_transaction_block=True,
             )
             coin_store = await CoinStore.create(db_wrapper)
             store = await BlockStore.create(db_wrapper)
-            b: Blockchain = await Blockchain.create(coin_store, store, test_constants, tmp_dir, 2)
+            b: Blockchain = await Blockchain.create(coin_store, store, bt.constants, tmp_dir, 2)
             for block in blocks:
                 await _validate_and_add_block(b, block)
             peak = b.get_peak()
             assert peak is not None
             assert peak.height == num_blocks - 1
 
             coins_farmer = await coin_store.get_coin_records_by_puzzle_hash(True, pool_ph)
@@ -391,15 +397,15 @@
 
             assert len(coins_farmer) == num_blocks - 2
             assert len(coins_pool) == num_blocks - 2
 
             b.shut_down()
 
     @pytest.mark.asyncio
-    async def test_get_coin_states(self, tmp_dir, db_version):
+    async def test_get_coin_states(self, db_version: int) -> None:
         async with DBConnection(db_version) as db_wrapper:
             crs = [
                 CoinRecord(
                     Coin(std_hash(i.to_bytes(4, byteorder="big")), std_hash(b"2"), uint64(100)),
                     uint32(i),
                     uint32(2 * i),
                     False,
@@ -416,40 +422,66 @@
                     uint64(12321312),
                 )
                 for i in range(1, 301)
             ]
             coin_store = await CoinStore.create(db_wrapper)
             await coin_store._add_coin_records(crs)
 
-            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, [std_hash(b"2")], 0)) == 300
-            assert len(await coin_store.get_coin_states_by_puzzle_hashes(False, [std_hash(b"2")], 0)) == 0
-            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, [std_hash(b"2")], 300)) == 151
-            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, [std_hash(b"2")], 603)) == 0
-            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, [std_hash(b"1")], 0)) == 0
+            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, {std_hash(b"2")}, uint32(0))) == 300
+            assert len(await coin_store.get_coin_states_by_puzzle_hashes(False, {std_hash(b"2")}, uint32(0))) == 0
+            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, {std_hash(b"2")}, uint32(300))) == 151
+            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, {std_hash(b"2")}, uint32(603))) == 0
+            assert len(await coin_store.get_coin_states_by_puzzle_hashes(True, {std_hash(b"1")}, uint32(0))) == 0
 
             # test max_items limit
             for limit in [0, 1, 42, 300]:
                 assert (
-                    len(await coin_store.get_coin_states_by_puzzle_hashes(True, [std_hash(b"2")], 0, max_items=limit))
+                    len(
+                        await coin_store.get_coin_states_by_puzzle_hashes(
+                            True, {std_hash(b"2")}, uint32(0), max_items=limit
+                        )
+                    )
                     == limit
                 )
 
             # if the limit is very high, we should get all of them
             assert (
-                len(await coin_store.get_coin_states_by_puzzle_hashes(True, [std_hash(b"2")], 0, max_items=10000))
+                len(
+                    await coin_store.get_coin_states_by_puzzle_hashes(
+                        True, {std_hash(b"2")}, uint32(0), max_items=10000
+                    )
+                )
                 == 300
             )
 
-            coins = [cr.coin.name() for cr in crs]
-            bad_coins = [std_hash(cr.coin.name()) for cr in crs]
-            assert len(await coin_store.get_coin_states_by_ids(True, coins, 0)) == 600
-            assert len(await coin_store.get_coin_states_by_ids(False, coins, 0)) == 0
-            assert len(await coin_store.get_coin_states_by_ids(True, coins, 300)) == 302
-            assert len(await coin_store.get_coin_states_by_ids(True, coins, 603)) == 0
-            assert len(await coin_store.get_coin_states_by_ids(True, bad_coins, 0)) == 0
+            coins = {cr.coin.name() for cr in crs}
+            bad_coins = {std_hash(cr.coin.name()) for cr in crs}
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(0))) == 600
+            assert len(await coin_store.get_coin_states_by_ids(False, coins, uint32(0))) == 0
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300))) == 302
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(603))) == 0
+            assert len(await coin_store.get_coin_states_by_ids(True, bad_coins, uint32(0))) == 0
+            # Test max_height
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(603))) == 600
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(602))) == 600
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(599))) == 598
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(400))) == 400
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(301))) == 300
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(300))) == 300
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(299))) == 298
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, max_height=uint32(0))) == 0
+            # Test min_height + max_height
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(603))) == 302
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(602))) == 302
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(599))) == 300
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(400))) == 102
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(301))) == 2
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(300))) == 2
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(299))) == 0
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(300), max_height=uint32(0))) == 0
 
             # test max_items limit
             for limit in [0, 1, 42, 300]:
-                assert len(await coin_store.get_coin_states_by_ids(True, coins, 0, max_items=limit)) == limit
+                assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(0), max_items=limit)) == limit
 
             # if the limit is very high, we should get all of them
-            assert len(await coin_store.get_coin_states_by_ids(True, coins, 0, max_items=10000)) == 600
+            assert len(await coin_store.get_coin_states_by_ids(True, coins, uint32(0), max_items=10000)) == 600
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_full_node_store.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_full_node_store.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,77 +1,90 @@
 from __future__ import annotations
 
 import logging
 from secrets import token_bytes
-from typing import List, Optional
+from typing import AsyncIterator, List, Optional
 
 import pytest
 import pytest_asyncio
 
-from chia.consensus.blockchain import AddBlockResult
+# TODO: update after resolution in https://github.com/pytest-dev/pytest/issues/7469
+from _pytest.fixtures import SubRequest
+
+from chia.consensus.blockchain import AddBlockResult, Blockchain
+from chia.consensus.constants import ConsensusConstants
 from chia.consensus.find_fork_point import find_fork_point_in_chain
 from chia.consensus.multiprocess_validation import PreValidationResult
 from chia.consensus.pot_iterations import is_overflow_block
 from chia.full_node.full_node_store import FullNodeStore
 from chia.full_node.signage_point import SignagePoint
 from chia.protocols import timelord_protocol
 from chia.protocols.timelord_protocol import NewInfusionPointVDF
-from chia.simulator.block_tools import create_block_tools_async, get_signage_point
-from chia.simulator.block_tools import test_constants as test_constants_original
+from chia.simulator.block_tools import BlockTools, create_block_tools_async, get_signage_point
 from chia.simulator.keyring import TempKeyring
 from chia.types.blockchain_format.sized_bytes import bytes32
+from chia.types.full_block import FullBlock
 from chia.types.unfinished_block import UnfinishedBlock
 from chia.util.block_cache import BlockCache
 from chia.util.hash import std_hash
 from chia.util.ints import uint8, uint32, uint64, uint128
 from tests.blockchain.blockchain_test_utils import _validate_and_add_block, _validate_and_add_block_no_error
 from tests.util.blockchain import create_blockchain
 
-test_constants = test_constants_original.replace(**{"DISCRIMINANT_SIZE_BITS": 32, "SUB_SLOT_ITERS_STARTING": 2**12})
 log = logging.getLogger(__name__)
 
 
 @pytest_asyncio.fixture(scope="function")
-async def custom_block_tools():
+async def custom_block_tools(blockchain_constants: ConsensusConstants) -> AsyncIterator[BlockTools]:
     with TempKeyring() as keychain:
-        yield await create_block_tools_async(constants=test_constants, keychain=keychain)
+        patched_constants = blockchain_constants.replace(
+            **{"DISCRIMINANT_SIZE_BITS": 32, "SUB_SLOT_ITERS_STARTING": 2**12}
+        )
+        yield await create_block_tools_async(constants=patched_constants, keychain=keychain)
 
 
 @pytest_asyncio.fixture(scope="function", params=[1, 2])
-async def empty_blockchain(request):
-    bc1, db_wrapper, db_path = await create_blockchain(test_constants, request.param)
+async def empty_blockchain(request: SubRequest, blockchain_constants: ConsensusConstants) -> AsyncIterator[Blockchain]:
+    patched_constants = blockchain_constants.replace(
+        **{"DISCRIMINANT_SIZE_BITS": 32, "SUB_SLOT_ITERS_STARTING": 2**12}
+    )
+    bc1, db_wrapper, db_path = await create_blockchain(patched_constants, request.param)
     yield bc1
     await db_wrapper.close()
     bc1.shut_down()
     db_path.unlink()
 
 
 @pytest_asyncio.fixture(scope="function", params=[1, 2])
-async def empty_blockchain_with_original_constants(request):
-    bc1, db_wrapper, db_path = await create_blockchain(test_constants_original, request.param)
+async def empty_blockchain_with_original_constants(
+    request: SubRequest, blockchain_constants: ConsensusConstants
+) -> AsyncIterator[Blockchain]:
+    bc1, db_wrapper, db_path = await create_blockchain(blockchain_constants, request.param)
     yield bc1
     await db_wrapper.close()
     bc1.shut_down()
     db_path.unlink()
 
 
 class TestFullNodeStore:
     @pytest.mark.asyncio
-    async def test_basic_store(self, empty_blockchain, custom_block_tools, normalized_to_identity: bool = False):
+    async def test_basic_store(
+        self, empty_blockchain: Blockchain, custom_block_tools: BlockTools, normalized_to_identity: bool = False
+    ) -> None:
         blockchain = empty_blockchain
         blocks = custom_block_tools.get_consecutive_blocks(
             10,
             seed=b"1234",
             normalized_to_identity_cc_eos=normalized_to_identity,
             normalized_to_identity_icc_eos=normalized_to_identity,
             normalized_to_identity_cc_ip=normalized_to_identity,
             normalized_to_identity_cc_sp=normalized_to_identity,
         )
 
-        store = FullNodeStore(test_constants)
+        store = FullNodeStore(empty_blockchain.constants)
 
         unfinished_blocks = []
         for block in blocks:
             unfinished_blocks.append(
                 UnfinishedBlock(
                     block.finished_sub_slots,
                     block.reward_chain_block.get_unfinished(),
@@ -130,15 +143,15 @@
                 BlockCache({}),
                 None,
                 sub_slots[0].challenge_chain.challenge_chain_end_of_slot_vdf.challenge,
             )
             == []
         )
         # Test adding non-connecting sub-slots genesis
-        assert store.get_sub_slot(test_constants.GENESIS_CHALLENGE) is None
+        assert store.get_sub_slot(empty_blockchain.constants.GENESIS_CHALLENGE) is None
         assert store.get_sub_slot(sub_slots[0].challenge_chain.get_hash()) is None
         assert store.get_sub_slot(sub_slots[1].challenge_chain.get_hash()) is None
         assert store.new_finished_sub_slot(sub_slots[1], blockchain, None, None) is None
         assert store.new_finished_sub_slot(sub_slots[2], blockchain, None, None) is None
 
         # Test adding sub-slots after genesis
         assert store.new_finished_sub_slot(sub_slots[0], blockchain, None, None) is not None
@@ -160,15 +173,17 @@
             store.get_finished_sub_slots(BlockCache({}), None, sub_slots[-2].challenge_chain.get_hash())
             == sub_slots[:-1]
         )
 
         # Test adding genesis peak
         await _validate_and_add_block(blockchain, blocks[0])
         peak = blockchain.get_peak()
+        assert peak is not None
         peak_full_block = await blockchain.get_full_peak()
+        assert peak_full_block is not None
         if peak.overflow:
             store.new_peak(peak, peak_full_block, sub_slots[-2], sub_slots[-1], None, blockchain)
         else:
             store.new_peak(peak, peak_full_block, None, sub_slots[-1], None, blockchain)
 
         assert store.get_sub_slot(sub_slots[0].challenge_chain.get_hash()) is None
         assert store.get_sub_slot(sub_slots[1].challenge_chain.get_hash()) is None
@@ -209,15 +224,17 @@
             normalized_to_identity_icc_eos=normalized_to_identity,
             normalized_to_identity_cc_ip=normalized_to_identity,
             normalized_to_identity_cc_sp=normalized_to_identity,
         )
         for block in blocks:
             await _validate_and_add_block_no_error(blockchain, block)
             sb = blockchain.block_record(block.header_hash)
-            sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+            result = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+            assert result is not None
+            sp_sub_slot, ip_sub_slot = result
             res = store.new_peak(sb, block, sp_sub_slot, ip_sub_slot, None, blockchain)
             assert res.added_eos is None
 
         # Add reorg blocks
         blocks_reorg = custom_block_tools.get_consecutive_blocks(
             20,
             normalized_to_identity_cc_eos=normalized_to_identity,
@@ -227,22 +244,26 @@
         )
         for block in blocks_reorg:
             peak = blockchain.get_peak()
             assert peak is not None
 
             await _validate_and_add_block_no_error(blockchain, block)
 
-            if blockchain.get_peak().header_hash == block.header_hash:
+            peak_here = blockchain.get_peak()
+            assert peak_here is not None
+            if peak_here.header_hash == block.header_hash:
                 sb = blockchain.block_record(block.header_hash)
                 fork = find_fork_point_in_chain(blockchain, peak, blockchain.block_record(sb.header_hash))
                 if fork > 0:
-                    fork_block = blockchain.height_to_block_record(fork)
+                    fork_block = blockchain.height_to_block_record(uint32(fork))
                 else:
                     fork_block = None
-                sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+                result = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+                assert result is not None
+                sp_sub_slot, ip_sub_slot = result
                 res = store.new_peak(sb, block, sp_sub_slot, ip_sub_slot, fork_block, blockchain)
                 assert res.added_eos is None
 
         # Add slots to the end
         blocks_2 = custom_block_tools.get_consecutive_blocks(
             1,
             block_list_input=blocks_reorg,
@@ -256,18 +277,21 @@
             store.new_finished_sub_slot(slot, blockchain, blockchain.get_peak(), await blockchain.get_full_peak())
 
         assert store.get_sub_slot(sub_slots[3].challenge_chain.get_hash()) is None
         assert store.get_sub_slot(sub_slots[4].challenge_chain.get_hash()) is None
 
         # Test adding signage point
         peak = blockchain.get_peak()
-        ss_start_iters = peak.ip_sub_slot_total_iters(test_constants)
-        for i in range(1, test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA):
+        assert peak is not None
+        ss_start_iters = peak.ip_sub_slot_total_iters(custom_block_tools.constants)
+        for i in range(
+            1, custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA
+        ):
             sp = get_signage_point(
-                test_constants,
+                custom_block_tools.constants,
                 blockchain,
                 peak,
                 ss_start_iters,
                 uint8(i),
                 [],
                 peak.sub_slot_iters,
             )
@@ -280,30 +304,35 @@
                 block_list_input=blocks,
                 normalized_to_identity_cc_eos=normalized_to_identity,
                 normalized_to_identity_icc_eos=normalized_to_identity,
                 normalized_to_identity_cc_ip=normalized_to_identity,
                 normalized_to_identity_cc_sp=normalized_to_identity,
             )
             await _validate_and_add_block(blockchain, blocks[-1])
-            if blockchain.get_peak().header_hash == blocks[-1].header_hash:
+            peak_here = blockchain.get_peak()
+            assert peak_here is not None
+            if peak_here.header_hash == blocks[-1].header_hash:
                 sb = blockchain.block_record(blocks[-1].header_hash)
                 fork = find_fork_point_in_chain(blockchain, peak, blockchain.block_record(sb.header_hash))
                 if fork > 0:
-                    fork_block = blockchain.height_to_block_record(fork)
+                    fork_block = blockchain.height_to_block_record(uint32(fork))
                 else:
                     fork_block = None
-                sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(blocks[-1].header_hash)
+                result = await blockchain.get_sp_and_ip_sub_slots(blocks[-1].header_hash)
+                assert result is not None
+                sp_sub_slot, ip_sub_slot = result
 
                 res = store.new_peak(sb, blocks[-1], sp_sub_slot, ip_sub_slot, fork_block, blockchain)
                 assert res.added_eos is None
                 if sb.overflow and sp_sub_slot is not None:
                     assert sp_sub_slot != ip_sub_slot
                     break
 
         peak = blockchain.get_peak()
+        assert peak is not None
         assert peak.overflow
         # Overflow peak should result in 2 finished sub slots
         assert len(store.finished_sub_slots) == 2
 
         # Add slots to the end, except for the last one, which we will use to test invalid SP
         blocks_2 = custom_block_tools.get_consecutive_blocks(
             1,
@@ -316,72 +345,81 @@
         )
         for slot in blocks_2[-1].finished_sub_slots[:-1]:
             store.new_finished_sub_slot(slot, blockchain, blockchain.get_peak(), await blockchain.get_full_peak())
         finished_sub_slots = blocks_2[-1].finished_sub_slots
         assert len(store.finished_sub_slots) == 4
 
         # Test adding signage points for overflow blocks (sp_sub_slot)
-        ss_start_iters = peak.sp_sub_slot_total_iters(test_constants)
-        # for i in range(peak.signage_point_index, test_constants.NUM_SPS_SUB_SLOT):
+        ss_start_iters = peak.sp_sub_slot_total_iters(custom_block_tools.constants)
+        # for i in range(peak.signage_point_index, custom_block_tools.constants.NUM_SPS_SUB_SLOT):
         #     if i < peak.signage_point_index:
         #         continue
         #     latest = peak
-        #     while latest.total_iters > peak.sp_total_iters(test_constants):
+        #     while latest.total_iters > peak.sp_total_iters(custom_block_tools.constants):
         #         latest = blockchain.blocks[latest.prev_hash]
         #     sp = get_signage_point(
-        #         test_constants,
+        #         custom_block_tools.constants,
         #         blockchain.blocks,
         #         latest,
         #         ss_start_iters,
         #         uint8(i),
         #         [],
         #         peak.sub_slot_iters,
         #     )
         #     assert store.new_signage_point(i, blockchain.blocks, peak, peak.sub_slot_iters, sp)
 
         # Test adding signage points for overflow blocks (ip_sub_slot)
-        for i in range(1, test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA):
+        for i in range(
+            1, custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA
+        ):
             sp = get_signage_point(
-                test_constants,
+                custom_block_tools.constants,
                 blockchain,
                 peak,
-                peak.ip_sub_slot_total_iters(test_constants),
+                peak.ip_sub_slot_total_iters(custom_block_tools.constants),
                 uint8(i),
                 [],
                 peak.sub_slot_iters,
             )
             assert store.new_signage_point(uint8(i), blockchain, peak, peak.sub_slot_iters, sp)
 
         # Test adding future signage point, a few slots forward (good)
         saved_sp_hash = None
         for slot_offset in range(1, len(finished_sub_slots)):
             for i in range(
                 1,
-                test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA,
+                custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA,
             ):
                 sp = get_signage_point(
-                    test_constants,
+                    custom_block_tools.constants,
                     blockchain,
                     peak,
-                    peak.ip_sub_slot_total_iters(test_constants) + slot_offset * peak.sub_slot_iters,
+                    uint128(
+                        peak.ip_sub_slot_total_iters(custom_block_tools.constants) + slot_offset * peak.sub_slot_iters
+                    ),
                     uint8(i),
                     finished_sub_slots[:slot_offset],
                     peak.sub_slot_iters,
                 )
                 assert sp.cc_vdf is not None
                 saved_sp_hash = sp.cc_vdf.output.get_hash()
                 assert store.new_signage_point(uint8(i), blockchain, peak, peak.sub_slot_iters, sp)
 
         # Test adding future signage point (bad)
-        for i in range(1, test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA):
+        for i in range(
+            1, custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA
+        ):
             sp = get_signage_point(
-                test_constants,
+                custom_block_tools.constants,
                 blockchain,
                 peak,
-                peak.ip_sub_slot_total_iters(test_constants) + len(finished_sub_slots) * peak.sub_slot_iters,
+                uint128(
+                    peak.ip_sub_slot_total_iters(custom_block_tools.constants)
+                    + len(finished_sub_slots) * peak.sub_slot_iters
+                ),
                 uint8(i),
                 finished_sub_slots[: len(finished_sub_slots)],
                 peak.sub_slot_iters,
             )
             assert not store.new_signage_point(uint8(i), blockchain, peak, peak.sub_slot_iters, sp)
 
         # Test adding past signage point
@@ -391,15 +429,17 @@
             blocks[1].reward_chain_block.reward_chain_sp_vdf,
             blocks[1].reward_chain_sp_proof,
         )
         assert not store.new_signage_point(
             blocks[1].reward_chain_block.signage_point_index,
             blockchain,
             peak,
-            blockchain.block_record(blocks[1].header_hash).sp_sub_slot_total_iters(test_constants),
+            uint64(
+                blockchain.block_record(blocks[1].header_hash).sp_sub_slot_total_iters(custom_block_tools.constants)
+            ),
             sp,
         )
 
         # Get signage point by index
         assert (
             store.get_signage_point_by_index(
                 finished_sub_slots[0].challenge_chain.get_hash(),
@@ -418,17 +458,19 @@
         assert saved_sp_hash is not None
         assert store.get_signage_point(saved_sp_hash) is not None
         assert store.get_signage_point(std_hash(b"2")) is None
 
         # Test adding signage points before genesis
         store.initialize_genesis_sub_slot()
         assert len(store.finished_sub_slots) == 1
-        for i in range(1, test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA):
+        for i in range(
+            1, custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA
+        ):
             sp = get_signage_point(
-                test_constants,
+                custom_block_tools.constants,
                 BlockCache({}, {}),
                 None,
                 uint128(0),
                 uint8(i),
                 [],
                 peak.sub_slot_iters,
             )
@@ -446,21 +488,21 @@
             store.new_finished_sub_slot(slot, blockchain, None, None)
         assert len(store.finished_sub_slots) == 3
         finished_sub_slots = blocks_3[-1].finished_sub_slots
 
         for slot_offset in range(1, len(finished_sub_slots) + 1):
             for i in range(
                 1,
-                test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA,
+                custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA,
             ):
                 sp = get_signage_point(
-                    test_constants,
+                    custom_block_tools.constants,
                     BlockCache({}, {}),
                     None,
-                    slot_offset * peak.sub_slot_iters,
+                    uint128(slot_offset * peak.sub_slot_iters),
                     uint8(i),
                     finished_sub_slots[:slot_offset],
                     peak.sub_slot_iters,
                 )
                 assert store.new_signage_point(uint8(i), blockchain, None, peak.sub_slot_iters, sp)
 
         # Test adding signage points after genesis
@@ -480,31 +522,31 @@
             normalized_to_identity_cc_ip=normalized_to_identity,
             normalized_to_identity_cc_sp=normalized_to_identity,
         )
 
         # If this is not the case, fix test to find a block that is
         assert (
             blocks_4[-1].reward_chain_block.signage_point_index
-            < test_constants.NUM_SPS_SUB_SLOT - test_constants.NUM_SP_INTERVALS_EXTRA
+            < custom_block_tools.constants.NUM_SPS_SUB_SLOT - custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA
         )
         await _validate_and_add_block(blockchain, blocks_4[-1], expected_result=AddBlockResult.ADDED_AS_ORPHAN)
 
         sb = blockchain.block_record(blocks_4[-1].header_hash)
         store.new_peak(sb, blocks_4[-1], None, None, None, blockchain)
         for i in range(
-            sb.signage_point_index + test_constants.NUM_SP_INTERVALS_EXTRA,
-            test_constants.NUM_SPS_SUB_SLOT,
+            sb.signage_point_index + custom_block_tools.constants.NUM_SP_INTERVALS_EXTRA,
+            custom_block_tools.constants.NUM_SPS_SUB_SLOT,
         ):
-            if is_overflow_block(test_constants, uint8(i)):
+            if is_overflow_block(custom_block_tools.constants, uint8(i)):
                 finished_sub_slots = blocks_5[-1].finished_sub_slots
             else:
                 finished_sub_slots = []
 
             sp = get_signage_point(
-                test_constants,
+                custom_block_tools.constants,
                 blockchain,
                 sb,
                 uint128(0),
                 uint8(i),
                 finished_sub_slots,
                 peak.sub_slot_iters,
             )
@@ -532,46 +574,53 @@
             await _validate_and_add_block_no_error(blockchain, blocks[-1])
             sb = blockchain.block_record(blocks[-1].header_hash)
             if sb.first_in_sub_slot:
                 break
         assert len(blocks) >= 2
         dependant_sub_slots = blocks[-1].finished_sub_slots
         peak = blockchain.get_peak()
+        assert peak is not None
         peak_full_block = await blockchain.get_full_peak()
         for block in blocks[:-2]:
             sb = blockchain.block_record(block.header_hash)
-            sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+            result = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+            assert result is not None
+            sp_sub_slot, ip_sub_slot = result
             peak = sb
             peak_full_block = block
             res = store.new_peak(sb, block, sp_sub_slot, ip_sub_slot, None, blockchain)
             assert res.added_eos is None
 
         assert store.new_finished_sub_slot(dependant_sub_slots[0], blockchain, peak, peak_full_block) is None
         block = blocks[-2]
         sb = blockchain.block_record(block.header_hash)
-        sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+        result = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+        assert result is not None
+        sp_sub_slot, ip_sub_slot = result
         res = store.new_peak(sb, block, sp_sub_slot, ip_sub_slot, None, blockchain)
         assert res.added_eos == dependant_sub_slots[0]
-        assert res.new_signage_points == res.new_infusion_points == []
+        assert res.new_signage_points == []
+        assert res.new_infusion_points == []
 
         # Test future IP cache
         store.initialize_genesis_sub_slot()
         blocks = custom_block_tools.get_consecutive_blocks(
             60,
             normalized_to_identity_cc_ip=normalized_to_identity,
             normalized_to_identity_cc_sp=normalized_to_identity,
             normalized_to_identity_cc_eos=normalized_to_identity,
             normalized_to_identity_icc_eos=normalized_to_identity,
         )
 
         for block in blocks[:5]:
             await _validate_and_add_block_no_error(blockchain, block)
             sb = blockchain.block_record(block.header_hash)
-
-            sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+            result = await blockchain.get_sp_and_ip_sub_slots(block.header_hash)
+            assert result is not None
+            sp_sub_slot, ip_sub_slot = result
             res = store.new_peak(sb, block, sp_sub_slot, ip_sub_slot, None, blockchain)
             assert res.added_eos is None
 
         case_0, case_1 = False, False
         for i in range(5, len(blocks) - 1):
             prev_block = blocks[i]
             block = blocks[i + 1]
@@ -583,15 +632,17 @@
                 block.reward_chain_ip_proof,
                 block.reward_chain_block.infused_challenge_chain_ip_vdf,
                 block.infused_challenge_chain_ip_proof,
             )
             store.add_to_future_ip(new_ip)
 
             await _validate_and_add_block_no_error(blockchain, prev_block)
-            sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(prev_block.header_hash)
+            result = await blockchain.get_sp_and_ip_sub_slots(prev_block.header_hash)
+            assert result is not None
+            sp_sub_slot, ip_sub_slot = result
             sb = blockchain.block_record(prev_block.header_hash)
             res = store.new_peak(sb, prev_block, sp_sub_slot, ip_sub_slot, None, blockchain)
             if len(block.finished_sub_slots) == 0:
                 case_0 = True
                 assert res.new_infusion_points == [new_ip]
             else:
                 case_1 = True
@@ -616,79 +667,85 @@
 
         log.warning("Starting loop")
         while True:
             log.warning("Looping")
             blocks = custom_block_tools.get_consecutive_blocks(1, block_list_input=blocks, skip_slots=1)
             await _validate_and_add_block_no_error(blockchain, blocks[-1])
             peak = blockchain.get_peak()
-            sub_slots = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
-            store.new_peak(peak, blocks[-1], sub_slots[0], sub_slots[1], None, blockchain)
+            assert peak is not None
+            result = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
+            assert result is not None
+            sp_sub_slot, ip_sub_slot = result
+            store.new_peak(peak, blocks[-1], sp_sub_slot, ip_sub_slot, None, blockchain)
 
             blocks = custom_block_tools.get_consecutive_blocks(
                 2, block_list_input=blocks, guarantee_transaction_block=True
             )
 
             i3 = blocks[-3].reward_chain_block.signage_point_index
             i2 = blocks[-2].reward_chain_block.signage_point_index
             i1 = blocks[-1].reward_chain_block.signage_point_index
             if (
                 len(blocks[-2].finished_sub_slots) == len(blocks[-1].finished_sub_slots) == 0
-                and not is_overflow_block(test_constants, signage_point_index=i2)
-                and not is_overflow_block(test_constants, signage_point_index=i1)
+                and not is_overflow_block(custom_block_tools.constants, signage_point_index=i2)
+                and not is_overflow_block(custom_block_tools.constants, signage_point_index=i1)
                 and i2 > i3 + 3
                 and i1 > (i2 + 3)
             ):
                 # We hit all the conditions that we want
-                all_sps: List[Optional[SignagePoint]] = [None] * test_constants.NUM_SPS_SUB_SLOT
+                all_sps: List[Optional[SignagePoint]] = [None] * custom_block_tools.constants.NUM_SPS_SUB_SLOT
 
-                def assert_sp_none(sp_index: int, is_none: bool):
+                def assert_sp_none(sp_index: int, is_none: bool) -> None:
                     sp_to_check: Optional[SignagePoint] = all_sps[sp_index]
                     assert sp_to_check is not None
                     assert sp_to_check.cc_vdf is not None
                     fetched = store.get_signage_point(sp_to_check.cc_vdf.output.get_hash())
                     assert (fetched is None) == is_none
                     if fetched is not None:
                         assert fetched == sp_to_check
 
-                for i in range(i3 + 1, test_constants.NUM_SPS_SUB_SLOT - 3):
+                for i in range(i3 + 1, custom_block_tools.constants.NUM_SPS_SUB_SLOT - 3):
                     finished_sub_slots = []
                     sp = get_signage_point(
-                        test_constants,
+                        custom_block_tools.constants,
                         blockchain,
                         peak,
                         uint128(peak.ip_sub_slot_total_iters(custom_block_tools.constants)),
                         uint8(i),
                         finished_sub_slots,
                         peak.sub_slot_iters,
                     )
                     all_sps[i] = sp
                     assert store.new_signage_point(uint8(i), blockchain, peak, peak.sub_slot_iters, sp)
 
                 # Adding a new peak clears all SPs after that peak
                 await _validate_and_add_block_no_error(blockchain, blocks[-2])
                 peak = blockchain.get_peak()
-                sub_slots = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
-                store.new_peak(peak, blocks[-2], sub_slots[0], sub_slots[1], None, blockchain)
+                assert peak is not None
+                result = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
+                assert result is not None
+                sp_sub_slot, ip_sub_slot = result
+                store.new_peak(peak, blocks[-2], sp_sub_slot, ip_sub_slot, None, blockchain)
 
                 assert_sp_none(i2, False)
                 assert_sp_none(i2 + 1, False)
                 assert_sp_none(i1, True)
                 assert_sp_none(i1 + 1, True)
                 assert_sp_none(i1 + 4, True)
 
-                for i in range(i2, test_constants.NUM_SPS_SUB_SLOT):
-                    if is_overflow_block(test_constants, uint8(i)):
+                for i in range(i2, custom_block_tools.constants.NUM_SPS_SUB_SLOT):
+                    if is_overflow_block(custom_block_tools.constants, uint8(i)):
                         blocks_alt = custom_block_tools.get_consecutive_blocks(
                             1, block_list_input=blocks[:-1], skip_slots=1
                         )
                         finished_sub_slots = blocks_alt[-1].finished_sub_slots
                     else:
                         finished_sub_slots = []
                     sp = get_signage_point(
-                        test_constants,
+                        custom_block_tools.constants,
                         blockchain,
                         peak,
                         uint128(peak.ip_sub_slot_total_iters(custom_block_tools.constants)),
                         uint8(i),
                         finished_sub_slots,
                         peak.sub_slot_iters,
                     )
@@ -699,22 +756,25 @@
                 assert_sp_none(i2 + 1, False)
                 assert_sp_none(i1, False)
                 assert_sp_none(i1 + 1, False)
                 assert_sp_none(i1 + 4, False)
 
                 await _validate_and_add_block_no_error(blockchain, blocks[-1])
                 peak = blockchain.get_peak()
-                sub_slots = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
+                assert peak is not None
+                result = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
+                assert result is not None
+                sp_sub_slot, ip_sub_slot = result
 
                 # Do a reorg, which should remove everything after B2
                 store.new_peak(
                     peak,
                     blocks[-1],
-                    sub_slots[0],
-                    sub_slots[1],
+                    sp_sub_slot,
+                    ip_sub_slot,
                     (await blockchain.get_block_records_at([blocks[-2].height]))[0],
                     blockchain,
                 )
 
                 assert_sp_none(i2, False)
                 assert_sp_none(i2 + 1, False)
                 assert_sp_none(i1, True)
@@ -722,25 +782,32 @@
                 assert_sp_none(i1 + 4, True)
                 break
             else:
                 for block in blocks[-2:]:
                     await _validate_and_add_block_no_error(blockchain, block)
 
     @pytest.mark.asyncio
-    async def test_basic_store_compact_blockchain(self, empty_blockchain, custom_block_tools):
+    async def test_basic_store_compact_blockchain(
+        self, empty_blockchain: Blockchain, custom_block_tools: BlockTools
+    ) -> None:
         await self.test_basic_store(empty_blockchain, custom_block_tools, True)
 
     @pytest.mark.asyncio
-    async def test_long_chain_slots(self, empty_blockchain_with_original_constants, default_1000_blocks):
+    async def test_long_chain_slots(
+        self, empty_blockchain_with_original_constants: Blockchain, default_1000_blocks: List[FullBlock]
+    ) -> None:
         blockchain = empty_blockchain_with_original_constants
-        store = FullNodeStore(test_constants_original)
-        blocks = default_1000_blocks
+        store = FullNodeStore(blockchain.constants)
         peak = None
         peak_full_block = None
-        for block in blocks:
+        for block in default_1000_blocks:
             for sub_slot in block.finished_sub_slots:
                 assert store.new_finished_sub_slot(sub_slot, blockchain, peak, peak_full_block) is not None
             await _validate_and_add_block(blockchain, block)
             peak = blockchain.get_peak()
+            assert peak is not None
             peak_full_block = await blockchain.get_full_peak()
-            sp_sub_slot, ip_sub_slot = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
+            assert peak_full_block is not None
+            result = await blockchain.get_sp_and_ip_sub_slots(peak.header_hash)
+            assert result is not None
+            sp_sub_slot, ip_sub_slot = result
             store.new_peak(peak, peak_full_block, sp_sub_slot, ip_sub_slot, None, blockchain)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_hint_store.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_hint_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/stores/test_sync_store.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/stores/test_sync_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_address_manager.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_address_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_block_height_map.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_block_height_map.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_conditions.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_conditions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_full_node.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_full_node.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 from __future__ import annotations
 
 import asyncio
 import dataclasses
 import random
 import time
 from secrets import token_bytes
-from typing import Dict, List, Optional, Tuple
+from typing import Dict, List, Optional, Tuple, cast
 
 import pytest
 from blspy import AugSchemeMPL, G2Element, PrivateKey
 from clvm.casts import int_to_bytes
 
 from chia.consensus.pot_iterations import is_overflow_block
 from chia.full_node.bundle_tools import detect_potential_template_generator
@@ -21,15 +21,18 @@
 from chia.protocols.full_node_protocol import RespondTransaction
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.protocols.shared_protocol import Capability, capabilities
 from chia.protocols.wallet_protocol import SendTransaction, TransactionAck
 from chia.server.address_manager import AddressManager
 from chia.server.outbound_message import Message, NodeType
 from chia.server.server import ChiaServer
-from chia.simulator.block_tools import BlockTools, get_signage_point, test_constants
+from chia.simulator.block_tools import BlockTools, create_block_tools_async, get_signage_point
+from chia.simulator.full_node_simulator import FullNodeSimulator
+from chia.simulator.keyring import TempKeyring
+from chia.simulator.setup_services import setup_full_node
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol
 from chia.simulator.time_out_assert import time_out_assert, time_out_assert_custom_interval, time_out_messages
 from chia.types.blockchain_format.classgroup import ClassgroupElement
 from chia.types.blockchain_format.foliage import Foliage, FoliageTransactionBlock, TransactionsInfo
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.proof_of_space import ProofOfSpace, calculate_plot_id_pk, calculate_pos_challenge
 from chia.types.blockchain_format.reward_chain_block import RewardChainBlockUnfinished
@@ -42,14 +45,15 @@
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.types.peer_info import PeerInfo, TimestampedPeerInfo
 from chia.types.spend_bundle import SpendBundle
 from chia.types.unfinished_block import UnfinishedBlock
 from chia.util.errors import ConsensusError, Err
 from chia.util.hash import std_hash
 from chia.util.ints import uint8, uint16, uint32, uint64
+from chia.util.limited_semaphore import LimitedSemaphore
 from chia.util.recursive_replace import recursive_replace
 from chia.util.vdf_prover import get_vdf_info_and_proof
 from chia.wallet.transaction_record import TransactionRecord
 from tests.blockchain.blockchain_test_utils import _validate_and_add_block, _validate_and_add_block_no_error
 from tests.connection_utils import add_dummy_connection, connect_and_get_peer
 from tests.core.full_node.stores.test_coin_store import get_future_reward_coins
 from tests.core.make_block_generator import make_spend_bundle
@@ -587,15 +591,15 @@
 
         peer = await connect_and_get_peer(server_1, server_2, self_hostname)
         blocks = await full_node_1.get_all_full_blocks()
 
         # Create empty slots
         blocks = bt.get_consecutive_blocks(1, block_list_input=blocks, skip_slots=6)
         block = blocks[-1]
-        if is_overflow_block(test_constants, block.reward_chain_block.signage_point_index):
+        if is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index):
             finished_ss = block.finished_sub_slots[:-1]
         else:
             finished_ss = block.finished_sub_slots
 
         unf = UnfinishedBlock(
             finished_ss,
             block.reward_chain_block.get_unfinished(),
@@ -619,15 +623,15 @@
 
         # Do the same thing but with non-genesis
         await full_node_1.full_node.add_block(block)
         blocks = bt.get_consecutive_blocks(1, block_list_input=blocks, skip_slots=3)
 
         block = blocks[-1]
 
-        if is_overflow_block(test_constants, block.reward_chain_block.signage_point_index):
+        if is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index):
             finished_ss = block.finished_sub_slots[:-1]
         else:
             finished_ss = block.finished_sub_slots
         unf = UnfinishedBlock(
             finished_ss,
             block.reward_chain_block.get_unfinished(),
             block.challenge_chain_sp_proof,
@@ -1163,15 +1167,15 @@
         full_node_1, full_node_2, server_1, server_2, wallet_a, wallet_receiver, bt = wallet_nodes
         blocks = await full_node_1.get_all_full_blocks()
 
         peer = await connect_and_get_peer(server_1, server_2, self_hostname)
 
         blocks = bt.get_consecutive_blocks(1, block_list_input=blocks)
         block: FullBlock = blocks[-1]
-        overflow = is_overflow_block(test_constants, block.reward_chain_block.signage_point_index)
+        overflow = is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index)
         unf = UnfinishedBlock(
             block.finished_sub_slots[:] if not overflow else block.finished_sub_slots[:-1],
             block.reward_chain_block.get_unfinished(),
             block.challenge_chain_sp_proof,
             block.reward_chain_sp_proof,
             block.foliage,
             block.foliage_transaction_block,
@@ -1207,15 +1211,15 @@
         full_node_1, full_node_2, server_1, server_2, wallet_a, wallet_receiver, bt = wallet_nodes
         blocks = await full_node_1.get_all_full_blocks()
 
         peer = await connect_and_get_peer(server_1, server_2, self_hostname)
 
         blocks = bt.get_consecutive_blocks(1, block_list_input=blocks)
         block: FullBlock = blocks[0]
-        overflow = is_overflow_block(test_constants, block.reward_chain_block.signage_point_index)
+        overflow = is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index)
 
         replaced_generator = SerializedProgram.from_bytes(b"\x80")
 
         if committment > 0:
             tr = block.transactions_info
             transactions_info = TransactionsInfo(
                 std_hash(bytes(replaced_generator)),
@@ -1359,15 +1363,15 @@
         tx: SpendBundle = wallet_a.generate_signed_transaction(10000, wallet_receiver.get_new_puzzlehash(), coin)
 
         blocks = bt.get_consecutive_blocks(
             1, block_list_input=blocks, guarantee_transaction_block=True, transaction_data=tx
         )
 
         block: FullBlock = blocks[-1]
-        overflow = is_overflow_block(test_constants, block.reward_chain_block.signage_point_index)
+        overflow = is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index)
         unf: UnfinishedBlock = UnfinishedBlock(
             block.finished_sub_slots[:] if not overflow else block.finished_sub_slots[:-1],
             block.reward_chain_block.get_unfinished(),
             block.challenge_chain_sp_proof,
             block.reward_chain_sp_proof,
             block.foliage,
             block.foliage_transaction_block,
@@ -1396,15 +1400,15 @@
         full_node_1, full_node_2, server_1, server_2, wallet_a, wallet_receiver, bt = wallet_nodes
         blocks = await full_node_1.get_all_full_blocks()
         peer = await connect_and_get_peer(server_1, server_2, self_hostname)
         blocks = bt.get_consecutive_blocks(10, block_list_input=blocks, seed=b"12345")
         for block in blocks[:-1]:
             await full_node_1.full_node.add_block(block)
         block: FullBlock = blocks[-1]
-        overflow = is_overflow_block(test_constants, block.reward_chain_block.signage_point_index)
+        overflow = is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index)
         unf = UnfinishedBlock(
             block.finished_sub_slots[:] if not overflow else block.finished_sub_slots[:-1],
             block.reward_chain_block.get_unfinished(),
             block.challenge_chain_sp_proof,
             block.reward_chain_sp_proof,
             block.foliage,
             block.foliage_transaction_block,
@@ -1431,18 +1435,18 @@
         await full_node_1.full_node.add_block(blocks[-2])
         await full_node_1.full_node.add_block(blocks[-1])
 
         blockchain = full_node_1.full_node.blockchain
         peak = blockchain.get_peak()
 
         sp = get_signage_point(
-            test_constants,
+            bt.constants,
             blockchain,
             peak,
-            peak.ip_sub_slot_total_iters(test_constants),
+            peak.ip_sub_slot_total_iters(bt.constants),
             uint8(11),
             [],
             peak.sub_slot_iters,
         )
 
         peer = await connect_and_get_peer(server_1, server_2, self_hostname)
         res = await full_node_1.new_signage_point_or_end_of_sub_slot(
@@ -1497,18 +1501,18 @@
         second_blockchain = empty_blockchain
         for block in blocks:
             await _validate_and_add_block(second_blockchain, block)
 
         # Creates a signage point based on the last block
         peak_2 = second_blockchain.get_peak()
         sp: SignagePoint = get_signage_point(
-            test_constants,
+            bt.constants,
             blockchain,
             peak_2,
-            peak_2.ip_sub_slot_total_iters(test_constants),
+            peak_2.ip_sub_slot_total_iters(bt.constants),
             uint8(4),
             [],
             peak_2.sub_slot_iters,
         )
 
         # Submits the signage point, cannot add because don't have block
         await full_node_1.respond_signage_point(
@@ -1567,15 +1571,15 @@
         block = blocks[0]
         for b in blocks:
             await full_node_1.full_node.add_block(b)
         timelord_protocol_finished = []
         cc_eos_count = 0
         for sub_slot in block.finished_sub_slots:
             vdf_info, vdf_proof = get_vdf_info_and_proof(
-                test_constants,
+                bt.constants,
                 ClassgroupElement.get_default_element(),
                 sub_slot.challenge_chain.challenge_chain_end_of_slot_vdf.challenge,
                 sub_slot.challenge_chain.challenge_chain_end_of_slot_vdf.number_of_iterations,
                 True,
             )
             cc_eos_count += 1
             timelord_protocol_finished.append(
@@ -1592,15 +1596,15 @@
         for b in blocks_2[-11:]:
             await full_node_1.full_node.add_block(b)
         icc_eos_count = 0
         for sub_slot in block.finished_sub_slots:
             if sub_slot.infused_challenge_chain is not None:
                 icc_eos_count += 1
                 vdf_info, vdf_proof = get_vdf_info_and_proof(
-                    test_constants,
+                    bt.constants,
                     ClassgroupElement.get_default_element(),
                     sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf.challenge,
                     sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf.number_of_iterations,
                     True,
                 )
                 timelord_protocol_finished.append(
                     timelord_protocol.RespondCompactProofOfTime(
@@ -1609,15 +1613,15 @@
                         block.header_hash,
                         block.height,
                         CompressibleVDFField.ICC_EOS_VDF,
                     )
                 )
         assert block.reward_chain_block.challenge_chain_sp_vdf is not None
         vdf_info, vdf_proof = get_vdf_info_and_proof(
-            test_constants,
+            bt.constants,
             ClassgroupElement.get_default_element(),
             block.reward_chain_block.challenge_chain_sp_vdf.challenge,
             block.reward_chain_block.challenge_chain_sp_vdf.number_of_iterations,
             True,
         )
         timelord_protocol_finished.append(
             timelord_protocol.RespondCompactProofOfTime(
@@ -1625,15 +1629,15 @@
                 vdf_proof,
                 block.header_hash,
                 block.height,
                 CompressibleVDFField.CC_SP_VDF,
             )
         )
         vdf_info, vdf_proof = get_vdf_info_and_proof(
-            test_constants,
+            bt.constants,
             ClassgroupElement.get_default_element(),
             block.reward_chain_block.challenge_chain_ip_vdf.challenge,
             block.reward_chain_block.challenge_chain_ip_vdf.number_of_iterations,
             True,
         )
         timelord_protocol_finished.append(
             timelord_protocol.RespondCompactProofOfTime(
@@ -1685,26 +1689,26 @@
         blocks_2 = bt.get_consecutive_blocks(num_blocks=3, block_list_input=blocks, skip_slots=3)
         for block in blocks_2[:2]:
             await full_node_1.full_node.add_block(block)
         assert full_node_1.full_node.blockchain.get_peak().height == 1
         # (wrong_vdf_info, wrong_vdf_proof) pair verifies, but it's not present in the blockchain at all.
         block = blocks_2[2]
         wrong_vdf_info, wrong_vdf_proof = get_vdf_info_and_proof(
-            test_constants,
+            bt.constants,
             ClassgroupElement.get_default_element(),
             block.reward_chain_block.challenge_chain_ip_vdf.challenge,
             block.reward_chain_block.challenge_chain_ip_vdf.number_of_iterations,
             True,
         )
         timelord_protocol_invalid_messages = []
         full_node_protocol_invalid_messaages = []
         for block in blocks_2[:2]:
             for sub_slot in block.finished_sub_slots:
                 vdf_info, correct_vdf_proof = get_vdf_info_and_proof(
-                    test_constants,
+                    bt.constants,
                     ClassgroupElement.get_default_element(),
                     sub_slot.challenge_chain.challenge_chain_end_of_slot_vdf.challenge,
                     sub_slot.challenge_chain.challenge_chain_end_of_slot_vdf.number_of_iterations,
                     True,
                 )
                 assert wrong_vdf_proof != correct_vdf_proof
                 timelord_protocol_invalid_messages.append(
@@ -1723,15 +1727,15 @@
                         CompressibleVDFField.CC_EOS_VDF,
                         vdf_info,
                         wrong_vdf_proof,
                     )
                 )
                 if sub_slot.infused_challenge_chain is not None:
                     vdf_info, correct_vdf_proof = get_vdf_info_and_proof(
-                        test_constants,
+                        bt.constants,
                         ClassgroupElement.get_default_element(),
                         sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf.challenge,
                         sub_slot.infused_challenge_chain.infused_challenge_chain_end_of_slot_vdf.number_of_iterations,
                         True,
                     )
                     assert wrong_vdf_proof != correct_vdf_proof
                     timelord_protocol_invalid_messages.append(
@@ -1751,15 +1755,15 @@
                             vdf_info,
                             wrong_vdf_proof,
                         )
                     )
 
             if block.reward_chain_block.challenge_chain_sp_vdf is not None:
                 vdf_info, correct_vdf_proof = get_vdf_info_and_proof(
-                    test_constants,
+                    bt.constants,
                     ClassgroupElement.get_default_element(),
                     block.reward_chain_block.challenge_chain_sp_vdf.challenge,
                     block.reward_chain_block.challenge_chain_sp_vdf.number_of_iterations,
                     True,
                 )
                 sp_vdf_proof = wrong_vdf_proof
                 if wrong_vdf_proof == correct_vdf_proof:
@@ -1781,15 +1785,15 @@
                         CompressibleVDFField.CC_SP_VDF,
                         vdf_info,
                         sp_vdf_proof,
                     )
                 )
 
             vdf_info, correct_vdf_proof = get_vdf_info_and_proof(
-                test_constants,
+                bt.constants,
                 ClassgroupElement.get_default_element(),
                 block.reward_chain_block.challenge_chain_ip_vdf.challenge,
                 block.reward_chain_block.challenge_chain_ip_vdf.number_of_iterations,
                 True,
             )
             ip_vdf_proof = wrong_vdf_proof
             if wrong_vdf_proof == correct_vdf_proof:
@@ -1899,14 +1903,69 @@
                 assert not sub_slot.proofs.challenge_chain_slot_proof.normalized_to_identity
                 if sub_slot.proofs.infused_challenge_chain_slot_proof is not None:
                     assert not sub_slot.proofs.infused_challenge_chain_slot_proof.normalized_to_identity
             if block.challenge_chain_sp_proof is not None:
                 assert not block.challenge_chain_sp_proof.normalized_to_identity
             assert not block.challenge_chain_ip_proof.normalized_to_identity
 
+    @pytest.mark.asyncio
+    async def test_respond_compact_proof_message_limit(self, setup_two_nodes_fixture):
+        nodes, _, bt = setup_two_nodes_fixture
+        full_node_1 = nodes[0]
+        full_node_2 = nodes[1]
+        NUM_BLOCKS = 20
+        # We don't compactify the last 5 blocks.
+        EXPECTED_COMPACTIFIED = NUM_BLOCKS - 5
+        blocks = bt.get_consecutive_blocks(num_blocks=NUM_BLOCKS)
+        finished_compact_proofs = []
+        for block in blocks:
+            await full_node_1.full_node.add_block(block)
+            await full_node_2.full_node.add_block(block)
+            vdf_info, vdf_proof = get_vdf_info_and_proof(
+                bt.constants,
+                ClassgroupElement.get_default_element(),
+                block.reward_chain_block.challenge_chain_ip_vdf.challenge,
+                block.reward_chain_block.challenge_chain_ip_vdf.number_of_iterations,
+                True,
+            )
+            finished_compact_proofs.append(
+                timelord_protocol.RespondCompactProofOfTime(
+                    vdf_info,
+                    vdf_proof,
+                    block.header_hash,
+                    block.height,
+                    CompressibleVDFField.CC_IP_VDF,
+                )
+            )
+
+        async def coro(full_node, compact_proof):
+            await full_node.respond_compact_proof_of_time(compact_proof)
+
+        full_node_1.full_node._compact_vdf_sem = LimitedSemaphore.create(active_limit=1, waiting_limit=2)
+        tasks = asyncio.gather(
+            *[coro(full_node_1, respond_compact_proof) for respond_compact_proof in finished_compact_proofs]
+        )
+        await tasks
+        stored_blocks = await full_node_1.get_all_full_blocks()
+        compactified = 0
+        for block in stored_blocks:
+            if block.challenge_chain_ip_proof.normalized_to_identity:
+                compactified += 1
+        assert compactified == 3
+
+        # The other full node receives the compact messages one at a time.
+        for respond_compact_proof in finished_compact_proofs:
+            await full_node_2.full_node.add_compact_proof_of_time(respond_compact_proof)
+        stored_blocks = await full_node_2.get_all_full_blocks()
+        compactified = 0
+        for block in stored_blocks:
+            if block.challenge_chain_ip_proof.normalized_to_identity:
+                compactified += 1
+        assert compactified == EXPECTED_COMPACTIFIED
+
     @pytest.mark.parametrize(
         argnames=["custom_capabilities", "expect_success"],
         argvalues=[
             # standard
             [capabilities, True],
             # an additional enabled but unknown capability
             [[*capabilities, (uint16(max(Capability) + 1), "1")], True],
@@ -1936,7 +1995,36 @@
             bt,
         ] = two_nodes
 
         initiating_server._local_capabilities_for_handshake = custom_capabilities
 
         connected = await initiating_server.start_client(PeerInfo(self_hostname, uint16(listening_server._port)), None)
         assert connected == expect_success, custom_capabilities
+
+
+@pytest.mark.asyncio
+async def test_node_start_with_existing_blocks(db_version: int) -> None:
+    with TempKeyring(populate=True) as keychain:
+        block_tools = await create_block_tools_async(keychain=keychain)
+
+        blocks_per_cycle = 5
+        expected_height = 0
+
+        for cycle in range(2):
+            async for service in setup_full_node(
+                consensus_constants=block_tools.constants,
+                db_name="node_restart_test.db",
+                self_hostname=block_tools.config["self_hostname"],
+                local_bt=block_tools,
+                simulator=True,
+                db_version=db_version,
+                reuse_db=True,
+            ):
+                simulator_api = cast(FullNodeSimulator, service._api)
+                await simulator_api.farm_blocks_to_puzzlehash(count=blocks_per_cycle)
+
+                expected_height += blocks_per_cycle
+                assert simulator_api.full_node._blockchain is not None
+                block_record = simulator_api.full_node._blockchain.get_peak()
+
+                assert block_record is not None, f"block_record is None on cycle {cycle + 1}"
+                assert block_record.height == expected_height, f"wrong height on cycle {cycle + 1}"
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_generator_tools.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_generator_tools.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_hint_management.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_hint_management.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_node_load.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_node_load.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_peer_store_resolver.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_peer_store_resolver.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_performance.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_performance.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_subscriptions.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_subscriptions.py`

 * *Files 0% similar despite different names*

```diff
@@ -20,22 +20,22 @@
 def test_has_ph_sub() -> None:
     sub = PeerSubscriptions()
 
     assert sub.has_ph_subscription(ph1) is False
     assert sub.has_ph_subscription(ph2) is False
 
     ret = sub.add_ph_subscriptions(peer1, [ph1], 100)
-    assert ret == [ph1]
+    assert ret == {ph1}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is False
 
     ret = sub.add_ph_subscriptions(peer1, [ph1, ph2], 100)
     # we have already subscribed to ph1, it's filtered in the returned list
-    assert ret == [ph2]
+    assert ret == {ph2}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
 
     # note that this is technically a type error as well.
     # we can remove these asserts once we have type checking
     assert sub.has_coin_subscription(coin1) is False
@@ -123,31 +123,31 @@
     assert sub.has_ph_subscription(ph2) is False
 
     assert sub.peers_for_puzzle_hash(ph1) == set()
     assert sub.peers_for_puzzle_hash(ph2) == set()
 
     # subscribed to different phs
     ret = sub.add_ph_subscriptions(peer1, [ph1], 100)
-    assert ret == [ph1]
+    assert ret == {ph1}
 
     assert sub.peers_for_puzzle_hash(ph1) == {peer1}
     assert sub.peers_for_puzzle_hash(ph2) == set()
 
     ret = sub.add_ph_subscriptions(peer2, [ph2], 100)
-    assert ret == [ph2]
+    assert ret == {ph2}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
 
     assert sub.peers_for_puzzle_hash(ph1) == {peer1}
     assert sub.peers_for_puzzle_hash(ph2) == {peer2}
 
     # peer1 is now subscribing to both phs
     ret = sub.add_ph_subscriptions(peer1, [ph2], 100)
-    assert ret == [ph2]
+    assert ret == {ph2}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
 
     assert sub.peers_for_puzzle_hash(ph1) == {peer1}
     assert sub.peers_for_puzzle_hash(ph2) == {peer1, peer2}
 
@@ -167,42 +167,42 @@
     assert sub.has_ph_subscription(ph1) is False
     assert sub.has_ph_subscription(ph2) is False
     assert sub.has_ph_subscription(ph2) is False
     assert sub.has_ph_subscription(ph3) is False
 
     ret = sub.add_ph_subscriptions(peer1, [ph1, ph2, ph3, ph4], 3)
     # we only ended up subscribing to 3 puzzle hashes because of the limit
-    assert ret == [ph1, ph2, ph3]
+    assert ret == {ph1, ph2, ph3}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
     assert sub.has_ph_subscription(ph3) is True
     assert sub.has_ph_subscription(ph4) is False
 
     assert sub.peers_for_puzzle_hash(ph1) == {peer1}
     assert sub.peers_for_puzzle_hash(ph2) == {peer1}
     assert sub.peers_for_puzzle_hash(ph3) == {peer1}
     assert sub.peers_for_puzzle_hash(ph4) == set()
 
     # peer1 should still be limited
     ret = sub.add_ph_subscriptions(peer1, [ph4], 3)
-    assert ret == []
+    assert ret == set()
 
     assert sub.has_ph_subscription(ph4) is False
     assert sub.peers_for_puzzle_hash(ph4) == set()
 
     # peer1 is also limied on coin subscriptions
     sub.add_coin_subscriptions(peer1, [coin1], 3)
 
     assert sub.has_coin_subscription(coin1) is False
     assert sub.peers_for_coin_id(coin1) == set()
 
     # peer2 is has its own limit
     ret = sub.add_ph_subscriptions(peer2, [ph4], 3)
-    assert ret == [ph4]
+    assert ret == {ph4}
 
     assert sub.has_ph_subscription(ph4) is True
     assert sub.peers_for_puzzle_hash(ph4) == {peer2}
 
     sub.remove_peer(peer1)
     sub.remove_peer(peer2)
 
@@ -212,29 +212,29 @@
 
     assert sub.has_ph_subscription(ph1) is False
     assert sub.has_ph_subscription(ph2) is False
     assert sub.has_ph_subscription(ph2) is False
     assert sub.has_ph_subscription(ph3) is False
 
     ret = sub.add_ph_subscriptions(peer1, [ph1], 2)
-    assert ret == [ph1]
+    assert ret == {ph1}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is False
     assert sub.has_ph_subscription(ph3) is False
     assert sub.has_ph_subscription(ph4) is False
 
     assert sub.peers_for_puzzle_hash(ph1) == {peer1}
     assert sub.peers_for_puzzle_hash(ph2) == set()
     assert sub.peers_for_puzzle_hash(ph3) == set()
     assert sub.peers_for_puzzle_hash(ph4) == set()
 
     # this will cross the limit. Only ph2 will be added
     ret = sub.add_ph_subscriptions(peer1, [ph2, ph3], 2)
-    assert ret == [ph2]
+    assert ret == {ph2}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
     assert sub.has_ph_subscription(ph3) is False
     assert sub.has_ph_subscription(ph4) is False
 
     assert sub.peers_for_puzzle_hash(ph1) == {peer1}
@@ -269,15 +269,15 @@
     sub.add_coin_subscriptions(peer1, [coin4], 3)
 
     assert sub.has_coin_subscription(coin4) is False
     assert sub.peers_for_coin_id(coin4) == set()
 
     # peer1 is also limied on ph subscriptions
     ret = sub.add_ph_subscriptions(peer1, [ph1], 3)
-    assert ret == []
+    assert ret == set()
 
     assert sub.has_ph_subscription(ph1) is False
     assert sub.peers_for_puzzle_hash(ph1) == set()
 
     # peer2 is has its own limit
     sub.add_coin_subscriptions(peer2, [coin4], 3)
 
@@ -329,24 +329,24 @@
 
     assert sub.has_ph_subscription(ph1) is False
     assert sub.has_ph_subscription(ph2) is False
     assert sub.has_ph_subscription(ph3) is False
     assert sub.has_ph_subscription(ph4) is False
 
     ret = sub.add_ph_subscriptions(peer1, [ph1, ph2, ph3], 100)
-    assert ret == [ph1, ph2, ph3]
+    assert ret == {ph1, ph2, ph3}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
     assert sub.has_ph_subscription(ph3) is True
     assert sub.has_ph_subscription(ph4) is False
 
     # only ph4 is new, the others are duplicates and ignored
     ret = sub.add_ph_subscriptions(peer1, [ph1, ph2, ph3, ph4], 100)
-    assert ret == [ph4]
+    assert ret == {ph4}
 
     assert sub.has_ph_subscription(ph1) is True
     assert sub.has_ph_subscription(ph2) is True
     assert sub.has_ph_subscription(ph3) is True
     assert sub.has_ph_subscription(ph4) is True
 
     sub.remove_peer(peer1)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_transactions.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_transactions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/full_node/test_tx_processing_queue.py` & `chia-blockchain-2.0.0b3/tests/core/full_node/test_tx_processing_queue.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/large_block.py` & `chia-blockchain-2.0.0b3/tests/core/large_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/make_block_generator.py` & `chia-blockchain-2.0.0b3/tests/core/make_block_generator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool.py` & `chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool.py`

 * *Files 3% similar despite different names*

```diff
@@ -12,15 +12,15 @@
 
 from chia.consensus.condition_costs import ConditionCost
 from chia.consensus.cost_calculator import NPCResult
 from chia.full_node.bitcoin_fee_estimator import create_bitcoin_fee_estimator
 from chia.full_node.fee_estimation import EmptyMempoolInfo, MempoolInfo
 from chia.full_node.full_node_api import FullNodeAPI
 from chia.full_node.mempool import Mempool
-from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions
+from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions, get_puzzle_and_solution_for_coin
 from chia.full_node.mempool_manager import MEMPOOL_MIN_FEE_INCREASE
 from chia.full_node.pending_tx_cache import ConflictTxCache, PendingTxCache
 from chia.protocols import full_node_protocol, wallet_protocol
 from chia.protocols.wallet_protocol import TransactionAck
 from chia.server.outbound_message import Message
 from chia.server.ws_connection import WSChiaConnection
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol
@@ -31,29 +31,37 @@
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32, bytes48
 from chia.types.clvm_cost import CLVMCost
 from chia.types.coin_spend import CoinSpend
 from chia.types.condition_opcodes import ConditionOpcode
 from chia.types.condition_with_args import ConditionWithArgs
+from chia.types.eligible_coin_spends import run_for_cost
 from chia.types.fee_rate import FeeRate
 from chia.types.generator_types import BlockGenerator
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.types.mempool_item import MempoolItem
 from chia.types.spend_bundle import SpendBundle
 from chia.types.spend_bundle_conditions import Spend, SpendBundleConditions
 from chia.util.api_decorators import api_request
 from chia.util.condition_tools import parse_sexp_to_conditions, pkm_pairs, pkm_pairs_for_conditions_dict
 from chia.util.errors import ConsensusError, Err
 from chia.util.hash import std_hash
 from chia.util.ints import uint32, uint64
 from chia.util.recursive_replace import recursive_replace
 from tests.blockchain.blockchain_test_utils import _validate_and_add_block
 from tests.connection_utils import add_dummy_connection, connect_and_get_peer
-from tests.core.mempool.test_mempool_manager import make_test_coins, mk_item
+from tests.core.mempool.test_mempool_manager import (
+    IDENTITY_PUZZLE_HASH,
+    TEST_COIN,
+    make_test_coins,
+    mempool_item_from_spendbundle,
+    mk_item,
+    spend_bundle_from_conditions,
+)
 from tests.core.node_height import node_height_at_least
 from tests.util.misc import assert_runtime
 
 BURN_PUZZLE_HASH = bytes32(b"0" * 32)
 BURN_PUZZLE_HASH_2 = bytes32(b"1" * 32)
 
 log = logging.getLogger(__name__)
@@ -2448,15 +2456,15 @@
     def test_create_coin_duplicates(self, request: pytest.FixtureRequest, softfork_height):
         # CREATE_COIN
         # this program will emit 6000 identical CREATE_COIN conditions. However,
         # we'll just end up looking at two of them, and fail at the first
         # duplicate
         condition = CREATE_COIN.format(num=600000)
 
-        with assert_runtime(seconds=0.8, label=request.node.name):
+        with assert_runtime(seconds=1, label=request.node.name):
             npc_result = generator_condition_tester(condition, quote=False, height=softfork_height)
 
         assert npc_result.error == Err.DUPLICATE_OUTPUT.value
         assert npc_result.conds is None
 
     @pytest.mark.benchmark
     def test_many_create_coin(self, request, softfork_height):
@@ -2513,29 +2521,29 @@
     h2 = bytes32(b"b" * 32)
     h3 = bytes32(b"c" * 32)
     h4 = bytes32(b"d" * 32)
 
     pk1 = G1Element.generator()
     pk2 = G1Element.generator()
 
-    def test_empty_list(self, softfork):
+    def test_empty_list(self):
         conds = SpendBundleConditions([], 0, 0, 0, None, None, [], 0, 0, 0)
-        pks, msgs = pkm_pairs(conds, b"foobar", soft_fork=softfork)
+        pks, msgs = pkm_pairs(conds, b"foobar")
         assert pks == []
         assert msgs == []
 
-    def test_no_agg_sigs(self, softfork):
+    def test_no_agg_sigs(self):
         # one create coin: h1 amount: 1 and not hint
         spends = [Spend(self.h3, self.h4, None, None, None, None, None, None, [(self.h1, 1, b"")], [], 0)]
         conds = SpendBundleConditions(spends, 0, 0, 0, None, None, [], 0, 0, 0)
-        pks, msgs = pkm_pairs(conds, b"foobar", soft_fork=softfork)
+        pks, msgs = pkm_pairs(conds, b"foobar")
         assert pks == []
         assert msgs == []
 
-    def test_agg_sig_me(self, softfork):
+    def test_agg_sig_me(self):
         spends = [
             Spend(
                 self.h1,
                 self.h2,
                 None,
                 None,
                 None,
@@ -2544,56 +2552,48 @@
                 None,
                 [],
                 [(bytes48(self.pk1), b"msg1"), (bytes48(self.pk2), b"msg2")],
                 0,
             )
         ]
         conds = SpendBundleConditions(spends, 0, 0, 0, None, None, [], 0, 0, 0)
-        pks, msgs = pkm_pairs(conds, b"foobar", soft_fork=softfork)
+        pks, msgs = pkm_pairs(conds, b"foobar")
         assert [bytes(pk) for pk in pks] == [bytes(self.pk1), bytes(self.pk2)]
         assert msgs == [b"msg1" + self.h1 + b"foobar", b"msg2" + self.h1 + b"foobar"]
 
-    def test_agg_sig_unsafe(self, softfork):
+    def test_agg_sig_unsafe(self):
         conds = SpendBundleConditions(
             [], 0, 0, 0, None, None, [(bytes48(self.pk1), b"msg1"), (bytes48(self.pk2), b"msg2")], 0, 0, 0
         )
-        pks, msgs = pkm_pairs(conds, b"foobar", soft_fork=softfork)
+        pks, msgs = pkm_pairs(conds, b"foobar")
         assert [bytes(pk) for pk in pks] == [bytes(self.pk1), bytes(self.pk2)]
         assert msgs == [b"msg1", b"msg2"]
 
-    def test_agg_sig_mixed(self, softfork):
+    def test_agg_sig_mixed(self):
         spends = [Spend(self.h1, self.h2, None, None, None, None, None, None, [], [(bytes48(self.pk1), b"msg1")], 0)]
         conds = SpendBundleConditions(spends, 0, 0, 0, None, None, [(bytes48(self.pk2), b"msg2")], 0, 0, 0)
-        pks, msgs = pkm_pairs(conds, b"foobar", soft_fork=softfork)
+        pks, msgs = pkm_pairs(conds, b"foobar")
         assert [bytes(pk) for pk in pks] == [bytes(self.pk2), bytes(self.pk1)]
         assert msgs == [b"msg2", b"msg1" + self.h1 + b"foobar"]
 
     def test_agg_sig_unsafe_restriction(self) -> None:
         conds = SpendBundleConditions(
             [], 0, 0, 0, None, None, [(bytes48(self.pk1), b"msg1"), (bytes48(self.pk2), b"msg2")], 0, 0, 0
         )
-        pks, msgs = pkm_pairs(conds, b"msg1", soft_fork=False)
-        assert [bytes(pk) for pk in pks] == [bytes(self.pk1), bytes(self.pk2)]
-        assert msgs == [b"msg1", b"msg2"]
-
-        pks, msgs = pkm_pairs(conds, b"msg2", soft_fork=False)
-        assert [bytes(pk) for pk in pks] == [bytes(self.pk1), bytes(self.pk2)]
-        assert msgs == [b"msg1", b"msg2"]
-
         with pytest.raises(ConsensusError, match="INVALID_CONDITION"):
-            pkm_pairs(conds, b"msg1", soft_fork=True)
+            pkm_pairs(conds, b"msg1")
 
         with pytest.raises(ConsensusError, match="INVALID_CONDITION"):
-            pkm_pairs(conds, b"sg1", soft_fork=True)
+            pkm_pairs(conds, b"sg1")
 
         with pytest.raises(ConsensusError, match="INVALID_CONDITION"):
-            pkm_pairs(conds, b"msg2", soft_fork=True)
+            pkm_pairs(conds, b"msg2")
 
         with pytest.raises(ConsensusError, match="INVALID_CONDITION"):
-            pkm_pairs(conds, b"g2", soft_fork=True)
+            pkm_pairs(conds, b"g2")
 
 
 class TestPkmPairsForConditionDict:
     h1 = bytes32(b"a" * 32)
 
     pk1 = G1Element.generator()
     pk2 = G1Element.generator()
@@ -2866,7 +2866,82 @@
         CLVMCost(uint64(11000000000)),
     )
     mempool = Mempool(mempool_info, fee_estimator)
     for i in items:
         mempool.add_to_pool(i)
     result = mempool.get_items_by_coin_ids(coin_ids)
     assert set(result) == set(expected)
+
+
+def test_aggregating_on_a_solution_then_a_more_cost_saving_one_appears() -> None:
+    def always(_: bytes32) -> bool:
+        return True
+
+    def make_test_spendbundle(coin: Coin, *, fee: int = 0, with_higher_cost: bool = False) -> SpendBundle:
+        conditions = []
+        actual_fee = fee
+        if with_higher_cost:
+            conditions.extend([[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, i] for i in range(3)])
+            actual_fee += 3
+        conditions.append([ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, coin.amount - actual_fee])
+        sb = spend_bundle_from_conditions(conditions, coin)
+        return sb
+
+    def agg_and_add_sb_returning_cost_info(mempool: Mempool, spend_bundles: List[SpendBundle]) -> uint64:
+        sb = SpendBundle.aggregate(spend_bundles)
+        mi = mempool_item_from_spendbundle(sb)
+        mempool.add_to_pool(mi)
+        saved_cost = run_for_cost(
+            sb.coin_spends[0].puzzle_reveal, sb.coin_spends[0].solution, len(mi.additions), mi.cost
+        )
+        return saved_cost
+
+    fee_estimator = create_bitcoin_fee_estimator(uint64(11000000000))
+    mempool_info = MempoolInfo(
+        CLVMCost(uint64(11000000000 * 3)),
+        FeeRate(uint64(1000000)),
+        CLVMCost(uint64(11000000000)),
+    )
+    mempool = Mempool(mempool_info, fee_estimator)
+    coins = [
+        Coin(IDENTITY_PUZZLE_HASH, IDENTITY_PUZZLE_HASH, uint64(amount)) for amount in range(2000000000, 2000000010)
+    ]
+    # Create a ~10 FPC item that spends the eligible coin[0]
+    sb_A = make_test_spendbundle(coins[0])
+    highest_fee = 58282830
+    sb_high_rate = make_test_spendbundle(coins[1], fee=highest_fee)
+    agg_and_add_sb_returning_cost_info(mempool, [sb_A, sb_high_rate])
+    # Create a ~2 FPC item that spends the eligible coin using the same solution A
+    sb_low_rate = make_test_spendbundle(coins[2], fee=highest_fee // 5)
+    saved_cost_on_solution_A = agg_and_add_sb_returning_cost_info(mempool, [sb_A, sb_low_rate])
+    result = mempool.create_bundle_from_mempool_items(always)
+    assert result is not None
+    agg, _ = result
+    # Make sure both items would be processed
+    assert [c.coin for c in agg.coin_spends] == [coins[0], coins[1], coins[2]]
+    # Now let's add 3 x ~3 FPC items that spend the eligible coin differently
+    # (solution B). It creates a higher (saved) cost than solution A
+    sb_B = make_test_spendbundle(coins[0], with_higher_cost=True)
+    for i in range(3, 6):
+        # We're picking this fee to get a ~3 FPC, and get picked after sb_A1
+        # (which has ~10 FPC) but before sb_A2 (which has ~2 FPC)
+        sb_mid_rate = make_test_spendbundle(coins[i], fee=38004852 - i)
+        saved_cost_on_solution_B = agg_and_add_sb_returning_cost_info(mempool, [sb_B, sb_mid_rate])
+    # We'd save more cost if we went with solution B instead of A
+    assert saved_cost_on_solution_B > saved_cost_on_solution_A
+    # If we process everything now, the 3 x ~3 FPC items get skipped because
+    # sb_A1 gets picked before them (~10 FPC), so from then on only sb_A2 (~2 FPC)
+    # would get picked
+    result = mempool.create_bundle_from_mempool_items(always)
+    assert result is not None
+    agg, _ = result
+    # The 3 items got skipped here
+    # We ran with solution A and missed bigger savings on solution B
+    assert mempool.size() == 5
+    assert [c.coin for c in agg.coin_spends] == [coins[0], coins[1], coins[2]]
+
+
+def test_get_puzzle_and_solution_for_coin_failure():
+    with pytest.raises(
+        ValueError, match=f"Failed to get puzzle and solution for coin {TEST_COIN}, error: failed to fill whole buffer"
+    ):
+        get_puzzle_and_solution_for_coin(BlockGenerator(SerializedProgram(), [], []), TEST_COIN)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_fee_estimator.py` & `chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_fee_estimator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_fee_protocol.py` & `chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_fee_protocol.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_manager.py` & `chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_manager.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,44 +1,58 @@
 from __future__ import annotations
 
 from dataclasses import dataclass
-from typing import Any, Awaitable, Callable, Dict, List, Optional, Tuple
+from typing import Any, Awaitable, Callable, Dict, List, Optional, Set, Tuple
 
 import pytest
 from blspy import G1Element, G2Element
+from chia_rs import ELIGIBLE_FOR_DEDUP
 from chiabip158 import PyBIP158
 
 from chia.consensus.constants import ConsensusConstants
 from chia.consensus.cost_calculator import NPCResult
 from chia.consensus.default_constants import DEFAULT_CONSTANTS
-from chia.full_node.mempool_check_conditions import mempool_check_time_locks
+from chia.full_node.bundle_tools import simple_solution_generator
+from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions, mempool_check_time_locks
 from chia.full_node.mempool_manager import (
     MEMPOOL_MIN_FEE_INCREASE,
     MempoolManager,
     TimelockConditions,
     can_replace,
     compute_assert_height,
     optional_max,
     optional_min,
 )
+from chia.protocols import wallet_protocol
+from chia.protocols.protocol_message_types import ProtocolMessageTypes
+from chia.simulator.full_node_simulator import FullNodeSimulator
+from chia.simulator.setup_nodes import SimulatorsAndWallets
+from chia.simulator.simulator_protocol import FarmNewBlockProtocol
+from chia.types.announcement import Announcement
 from chia.types.blockchain_format.coin import Coin
-from chia.types.blockchain_format.program import Program
+from chia.types.blockchain_format.program import INFINITE_COST, Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_record import CoinRecord
 from chia.types.coin_spend import CoinSpend
 from chia.types.condition_opcodes import ConditionOpcode
+from chia.types.eligible_coin_spends import DedupCoinSpend, EligibleCoinSpends, run_for_cost
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
-from chia.types.mempool_item import MempoolItem
+from chia.types.mempool_item import BundleCoinSpend, MempoolItem
+from chia.types.peer_info import PeerInfo
 from chia.types.spend_bundle import SpendBundle
 from chia.types.spend_bundle_conditions import Spend, SpendBundleConditions
 from chia.util.errors import Err, ValidationError
-from chia.util.ints import uint32, uint64
+from chia.util.ints import uint16, uint32, uint64
+from chia.wallet.payment import Payment
+from chia.wallet.wallet import Wallet
+from chia.wallet.wallet_coin_record import WalletCoinRecord
+from chia.wallet.wallet_node import WalletNode
 
-IDENTITY_PUZZLE = Program.to(1)
+IDENTITY_PUZZLE = SerializedProgram.from_program(Program.to(1))
 IDENTITY_PUZZLE_HASH = IDENTITY_PUZZLE.get_tree_hash()
 
 TEST_TIMESTAMP = uint64(10040)
 TEST_COIN_AMOUNT = uint64(1000000000)
 TEST_COIN = Coin(IDENTITY_PUZZLE_HASH, IDENTITY_PUZZLE_HASH, TEST_COIN_AMOUNT)
 TEST_COIN_ID = TEST_COIN.name()
 TEST_COIN_RECORD = CoinRecord(TEST_COIN, uint32(0), uint32(0), False, TEST_TIMESTAMP)
@@ -321,14 +335,54 @@
 ) -> Tuple[SpendBundle, bytes32, Tuple[Optional[uint64], MempoolInclusionStatus, Optional[Err]]]:
     sb = spend_bundle_from_conditions(conditions, coin)
     sb_name = sb.name()
     result = await add_spendbundle(mempool_manager, sb, sb_name)
     return (sb, sb_name, result)
 
 
+def make_bundle_spends_map_and_fee(
+    spend_bundle: SpendBundle, npc_result: NPCResult
+) -> Tuple[Dict[bytes32, BundleCoinSpend], uint64]:
+    bundle_coin_spends: Dict[bytes32, BundleCoinSpend] = {}
+    eligibility_and_additions: Dict[bytes32, Tuple[bool, List[Coin]]] = {}
+    removals_amount = 0
+    additions_amount = 0
+    assert npc_result.conds is not None
+    for spend in npc_result.conds.spends:
+        coin_id = bytes32(spend.coin_id)
+        spend_additions = []
+        for puzzle_hash, amount, _ in spend.create_coin:
+            spend_additions.append(Coin(coin_id, puzzle_hash, amount))
+            additions_amount += amount
+        eligibility_and_additions[coin_id] = (bool(spend.flags & ELIGIBLE_FOR_DEDUP), spend_additions)
+    for coin_spend in spend_bundle.coin_spends:
+        coin_id = coin_spend.coin.name()
+        removals_amount += coin_spend.coin.amount
+        eligible_for_dedup, spend_additions = eligibility_and_additions.get(coin_id, (False, []))
+        bundle_coin_spends[coin_id] = BundleCoinSpend(coin_spend, eligible_for_dedup, spend_additions)
+    fee = uint64(removals_amount - additions_amount)
+    return bundle_coin_spends, fee
+
+
+def mempool_item_from_spendbundle(spend_bundle: SpendBundle) -> MempoolItem:
+    generator = simple_solution_generator(spend_bundle)
+    npc_result = get_name_puzzle_conditions(
+        generator=generator, max_cost=INFINITE_COST, mempool_mode=True, height=uint32(0)
+    )
+    bundle_coin_spends, fee = make_bundle_spends_map_and_fee(spend_bundle, npc_result)
+    return MempoolItem(
+        spend_bundle=spend_bundle,
+        fee=fee,
+        npc_result=npc_result,
+        spend_bundle_name=spend_bundle.name(),
+        height_added_to_mempool=TEST_HEIGHT,
+        bundle_coin_spends=bundle_coin_spends,
+    )
+
+
 @pytest.mark.asyncio
 async def test_empty_spend_bundle() -> None:
     mempool_manager = await instantiate_mempool_manager(zero_calls_get_coin_record)
     sb = SpendBundle([], G2Element())
     with pytest.raises(ValidationError, match="INVALID_SPEND_BUNDLE"):
         await mempool_manager.pre_validate_spendbundle(sb, None, sb.name())
 
@@ -983,19 +1037,18 @@
             assert item.assert_before_seconds == expect_limit
         elif opcode in [co.ASSERT_BEFORE_HEIGHT_ABSOLUTE, co.ASSERT_BEFORE_HEIGHT_RELATIVE]:
             assert item.assert_before_height == expect_limit
         else:
             assert False
 
 
-def make_test_spendbundle(coin: Coin, *, fee: int = 0) -> SpendBundle:
-    conditions = [
-        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, uint64(coin.amount - fee)],
-        [ConditionOpcode.AGG_SIG_UNSAFE, G1Element(), IDENTITY_PUZZLE_HASH],
-    ]
+def make_test_spendbundle(coin: Coin, *, fee: int = 0, eligible_spend: bool = False) -> SpendBundle:
+    conditions = [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, uint64(coin.amount - fee)]]
+    if not eligible_spend:
+        conditions.append([ConditionOpcode.AGG_SIG_UNSAFE, G1Element(), IDENTITY_PUZZLE_HASH])
     return spend_bundle_from_conditions(conditions, coin)
 
 
 async def send_spendbundle(
     mempool_manager: MempoolManager,
     sb: SpendBundle,
     expected_result: Tuple[MempoolInclusionStatus, Optional[Err]] = (MempoolInclusionStatus.SUCCESS, None),
@@ -1111,7 +1164,399 @@
     # into the mempool
     sb4 = make_test_spendbundle(coins[3], fee=MEMPOOL_MIN_FEE_INCREASE * 3)
     sb1234 = SpendBundle.aggregate([sb12, sb3, sb4])
     await send_spendbundle(mempool_manager, sb1234)
     assert_sb_in_pool(mempool_manager, sb1234)
     assert_sb_not_in_pool(mempool_manager, sb12)
     assert_sb_not_in_pool(mempool_manager, sb3)
+
+
+@pytest.mark.asyncio
+async def test_replace_with_extra_eligible_coin() -> None:
+    mempool_manager, coins = await setup_mempool_with_coins(coin_amounts=list(range(1000000000, 1000000010)))
+    sb1234 = SpendBundle.aggregate([make_test_spendbundle(coins[i]) for i in range(4)])
+    await send_spendbundle(mempool_manager, sb1234)
+    assert_sb_in_pool(mempool_manager, sb1234)
+    # Replace sb1234 with sb1234_2 which spends an eligible coin additionally
+    eligible_sb = make_test_spendbundle(coins[4], fee=MEMPOOL_MIN_FEE_INCREASE, eligible_spend=True)
+    sb1234_2 = SpendBundle.aggregate([sb1234, eligible_sb])
+    await send_spendbundle(mempool_manager, sb1234_2)
+    assert_sb_not_in_pool(mempool_manager, sb1234)
+    assert_sb_in_pool(mempool_manager, sb1234_2)
+
+
+@pytest.mark.asyncio
+async def test_replacing_one_with_an_eligible_coin() -> None:
+    mempool_manager, coins = await setup_mempool_with_coins(coin_amounts=list(range(1000000000, 1000000010)))
+    sb123 = SpendBundle.aggregate([make_test_spendbundle(coins[i]) for i in range(3)])
+    eligible_sb = make_test_spendbundle(coins[3], eligible_spend=True)
+    sb123e = SpendBundle.aggregate([sb123, eligible_sb])
+    await send_spendbundle(mempool_manager, sb123e)
+    assert_sb_in_pool(mempool_manager, sb123e)
+    # Replace sb123e with sb123e4
+    sb4 = make_test_spendbundle(coins[4], fee=MEMPOOL_MIN_FEE_INCREASE)
+    sb123e4 = SpendBundle.aggregate([sb123e, sb4])
+    await send_spendbundle(mempool_manager, sb123e4)
+    assert_sb_not_in_pool(mempool_manager, sb123e)
+    assert_sb_in_pool(mempool_manager, sb123e4)
+
+
+@pytest.mark.parametrize("amount", [0, 1])
+def test_run_for_cost(amount: int) -> None:
+    conditions = [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, amount]]
+    solution = Program.to(conditions)
+    cost = run_for_cost(IDENTITY_PUZZLE, solution, additions_count=1, max_cost=uint64(10000000))
+    assert cost == uint64(1800044)
+
+
+def test_run_for_cost_max_cost() -> None:
+    conditions = [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 1]]
+    solution = Program.to(conditions)
+    with pytest.raises(ValueError, match="('cost exceeded', '2b')"):
+        run_for_cost(IDENTITY_PUZZLE, solution, additions_count=1, max_cost=uint64(43))
+
+
+def test_dedup_info_nothing_to_do() -> None:
+    # No eligible coins, nothing to deduplicate, item gets considered normally
+    conditions = [
+        [ConditionOpcode.AGG_SIG_UNSAFE, G1Element(), IDENTITY_PUZZLE_HASH],
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 1],
+    ]
+    sb = spend_bundle_from_conditions(conditions, TEST_COIN)
+    mempool_item = mempool_item_from_spendbundle(sb)
+    eligible_coin_spends = EligibleCoinSpends()
+    unique_coin_spends, cost_saving, unique_additions = eligible_coin_spends.get_deduplication_info(
+        bundle_coin_spends=mempool_item.bundle_coin_spends, max_cost=mempool_item.npc_result.cost
+    )
+    assert unique_coin_spends == sb.coin_spends
+    assert cost_saving == 0
+    assert unique_additions == [Coin(TEST_COIN_ID, IDENTITY_PUZZLE_HASH, 1)]
+    assert eligible_coin_spends == EligibleCoinSpends()
+
+
+def test_dedup_info_eligible_1st_time() -> None:
+    # Eligible coin encountered for the first time
+    conditions = [
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 1],
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 2],
+    ]
+    sb = spend_bundle_from_conditions(conditions, TEST_COIN)
+    mempool_item = mempool_item_from_spendbundle(sb)
+    eligible_coin_spends = EligibleCoinSpends()
+    solution = SerializedProgram.from_program(Program.to(conditions))
+    unique_coin_spends, cost_saving, unique_additions = eligible_coin_spends.get_deduplication_info(
+        bundle_coin_spends=mempool_item.bundle_coin_spends, max_cost=mempool_item.npc_result.cost
+    )
+    assert unique_coin_spends == sb.coin_spends
+    assert cost_saving == 0
+    assert set(unique_additions) == {
+        Coin(TEST_COIN_ID, IDENTITY_PUZZLE_HASH, 1),
+        Coin(TEST_COIN_ID, IDENTITY_PUZZLE_HASH, 2),
+    }
+    assert eligible_coin_spends == EligibleCoinSpends({TEST_COIN_ID: DedupCoinSpend(solution=solution, cost=None)})
+
+
+def test_dedup_info_eligible_but_different_solution() -> None:
+    # Eligible coin but different solution from the one we encountered
+    initial_conditions = [
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 1],
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 2],
+    ]
+    initial_solution = SerializedProgram.from_program(Program.to(initial_conditions))
+    eligible_coin_spends = EligibleCoinSpends({TEST_COIN_ID: DedupCoinSpend(solution=initial_solution, cost=None)})
+    conditions = [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 2]]
+    sb = spend_bundle_from_conditions(conditions, TEST_COIN)
+    mempool_item = mempool_item_from_spendbundle(sb)
+    with pytest.raises(ValueError, match="Solution is different from what we're deduplicating on"):
+        eligible_coin_spends.get_deduplication_info(
+            bundle_coin_spends=mempool_item.bundle_coin_spends, max_cost=mempool_item.npc_result.cost
+        )
+
+
+def test_dedup_info_eligible_2nd_time_and_another_1st_time() -> None:
+    # Eligible coin encountered a second time, and another for the first time
+    initial_conditions = [
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 1],
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 2],
+    ]
+    initial_solution = SerializedProgram.from_program(Program.to(initial_conditions))
+    eligible_coin_spends = EligibleCoinSpends({TEST_COIN_ID: DedupCoinSpend(solution=initial_solution, cost=None)})
+    sb1 = spend_bundle_from_conditions(initial_conditions, TEST_COIN)
+    second_conditions = [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 3]]
+    second_solution = SerializedProgram.from_program(Program.to(second_conditions))
+    sb2 = spend_bundle_from_conditions(second_conditions, TEST_COIN2)
+    sb = SpendBundle.aggregate([sb1, sb2])
+    mempool_item = mempool_item_from_spendbundle(sb)
+    unique_coin_spends, cost_saving, unique_additions = eligible_coin_spends.get_deduplication_info(
+        bundle_coin_spends=mempool_item.bundle_coin_spends, max_cost=mempool_item.npc_result.cost
+    )
+    # Only the eligible one that we encountered more than once gets deduplicated
+    assert unique_coin_spends == sb2.coin_spends
+    saved_cost = uint64(3600044)
+    assert cost_saving == saved_cost
+    assert unique_additions == [Coin(TEST_COIN_ID2, IDENTITY_PUZZLE_HASH, 3)]
+    # The coin we encountered a second time has its cost and additions properly updated
+    # The coin we encountered for the first time gets cost None and an empty set of additions
+    expected_eligible_spends = EligibleCoinSpends(
+        {
+            TEST_COIN_ID: DedupCoinSpend(solution=initial_solution, cost=saved_cost),
+            TEST_COIN_ID2: DedupCoinSpend(solution=second_solution, cost=None),
+        }
+    )
+    assert eligible_coin_spends == expected_eligible_spends
+
+
+def test_dedup_info_eligible_3rd_time_another_2nd_time_and_one_non_eligible() -> None:
+    # Eligible coin encountered a third time, another for the second time and one non eligible
+    initial_conditions = [
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 1],
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 2],
+    ]
+    initial_solution = SerializedProgram.from_program(Program.to(initial_conditions))
+    second_conditions = [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 3]]
+    second_solution = SerializedProgram.from_program(Program.to(second_conditions))
+    saved_cost = uint64(3600044)
+    eligible_coin_spends = EligibleCoinSpends(
+        {
+            TEST_COIN_ID: DedupCoinSpend(solution=initial_solution, cost=saved_cost),
+            TEST_COIN_ID2: DedupCoinSpend(solution=second_solution, cost=None),
+        }
+    )
+    sb1 = spend_bundle_from_conditions(initial_conditions, TEST_COIN)
+    sb2 = spend_bundle_from_conditions(second_conditions, TEST_COIN2)
+    sb3_conditions = [
+        [ConditionOpcode.AGG_SIG_UNSAFE, G1Element(), IDENTITY_PUZZLE_HASH],
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 4],
+    ]
+    sb3 = spend_bundle_from_conditions(sb3_conditions, TEST_COIN3)
+    sb = SpendBundle.aggregate([sb1, sb2, sb3])
+    mempool_item = mempool_item_from_spendbundle(sb)
+    unique_coin_spends, cost_saving, unique_additions = eligible_coin_spends.get_deduplication_info(
+        bundle_coin_spends=mempool_item.bundle_coin_spends, max_cost=mempool_item.npc_result.cost
+    )
+    assert unique_coin_spends == sb3.coin_spends
+    saved_cost2 = uint64(1800044)
+    assert cost_saving == saved_cost + saved_cost2
+    assert unique_additions == [Coin(TEST_COIN_ID3, IDENTITY_PUZZLE_HASH, 4)]
+    expected_eligible_spends = EligibleCoinSpends(
+        {
+            TEST_COIN_ID: DedupCoinSpend(initial_solution, saved_cost),
+            TEST_COIN_ID2: DedupCoinSpend(second_solution, saved_cost2),
+        }
+    )
+    assert eligible_coin_spends == expected_eligible_spends
+
+
+@pytest.mark.asyncio
+@pytest.mark.parametrize("new_height_step", [1, 2, -1])
+async def test_coin_spending_different_ways_then_finding_it_spent_in_new_peak(new_height_step: int) -> None:
+    # This test makes sure all mempool items that spend a coin (in different ways)
+    # that shows up as spent in a block, get removed properly.
+    # NOTE: this test's parameter allows us to cover both the optimized and
+    # the reorg code paths
+    new_height = uint32(TEST_HEIGHT + new_height_step)
+    coin = Coin(IDENTITY_PUZZLE_HASH, IDENTITY_PUZZLE_HASH, 100)
+    coin_id = coin.name()
+    test_coin_records = {coin_id: CoinRecord(coin, uint32(0), uint32(0), False, uint64(0))}
+
+    async def get_coin_record(coin_id: bytes32) -> Optional[CoinRecord]:
+        return test_coin_records.get(coin_id)
+
+    mempool_manager = await instantiate_mempool_manager(get_coin_record)
+    # Create a bunch of mempool items that spend the coin in different ways
+    for i in range(3):
+        _, _, result = await generate_and_add_spendbundle(
+            mempool_manager, [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, i]], coin
+        )
+        assert result[1] == MempoolInclusionStatus.SUCCESS
+    assert len(mempool_manager.mempool.get_items_by_coin_id(coin_id)) == 3
+    assert mempool_manager.mempool.size() == 3
+    assert len(list(mempool_manager.mempool.items_by_feerate())) == 3
+    # Setup a new peak where the incoming block has spent the coin
+    # Mark this coin as spent
+    test_coin_records = {coin_id: CoinRecord(coin, uint32(0), TEST_HEIGHT, False, uint64(0))}
+    block_record = create_test_block_record(height=new_height)
+    npc_result = NPCResult(None, make_test_conds(spend_ids=[coin_id]), uint64(0))
+    await mempool_manager.new_peak(block_record, npc_result)
+    # As the coin was a spend in all the mempool items we had, nothing should be left now
+    assert len(mempool_manager.mempool.get_items_by_coin_id(coin_id)) == 0
+    assert mempool_manager.mempool.size() == 0
+    assert len(list(mempool_manager.mempool.items_by_feerate())) == 0
+
+
+@pytest.mark.asyncio
+async def test_bundle_coin_spends() -> None:
+    # This tests the construction of bundle_coin_spends map for mempool items
+    # We're creating sb123e with 4 coins, one of them being eligible
+    mempool_manager, coins = await setup_mempool_with_coins(coin_amounts=list(range(1000000000, 1000000005)))
+    sb123 = SpendBundle.aggregate([make_test_spendbundle(coins[i]) for i in range(3)])
+    eligible_sb = make_test_spendbundle(coins[3], eligible_spend=True)
+    sb123e = SpendBundle.aggregate([sb123, eligible_sb])
+    await send_spendbundle(mempool_manager, sb123e)
+    mi123e = mempool_manager.get_mempool_item(sb123e.name())
+    assert mi123e is not None
+    for i in range(3):
+        assert mi123e.bundle_coin_spends[coins[i].name()] == BundleCoinSpend(
+            coin_spend=sb123.coin_spends[i],
+            eligible_for_dedup=False,
+            additions=[Coin(coins[i].name(), IDENTITY_PUZZLE_HASH, coins[i].amount)],
+        )
+    assert mi123e.bundle_coin_spends[coins[3].name()] == BundleCoinSpend(
+        coin_spend=eligible_sb.coin_spends[0],
+        eligible_for_dedup=True,
+        additions=[Coin(coins[3].name(), IDENTITY_PUZZLE_HASH, coins[3].amount)],
+    )
+
+
+@pytest.mark.asyncio
+async def test_identical_spend_aggregation_e2e(simulator_and_wallet: SimulatorsAndWallets, self_hostname: str) -> None:
+    def get_sb_names_by_coin_id(
+        full_node_api: FullNodeSimulator,
+        spent_coin_id: bytes32,
+    ) -> Set[bytes32]:
+        return set(
+            i.spend_bundle_name
+            for i in full_node_api.full_node.mempool_manager.mempool.get_items_by_coin_id(spent_coin_id)
+        )
+
+    async def send_to_mempool(
+        full_node: FullNodeSimulator, spend_bundle: SpendBundle, *, expecting_conflict: bool = False
+    ) -> None:
+        res = await full_node.send_transaction(wallet_protocol.SendTransaction(spend_bundle))
+        assert res is not None and ProtocolMessageTypes(res.type) == ProtocolMessageTypes.transaction_ack
+        res_parsed = wallet_protocol.TransactionAck.from_bytes(res.data)
+        if expecting_conflict:
+            assert res_parsed.status == MempoolInclusionStatus.PENDING.value
+            assert res_parsed.error == "MEMPOOL_CONFLICT"
+        else:
+            assert res_parsed.status == MempoolInclusionStatus.SUCCESS.value
+
+    async def farm_a_block(full_node_api: FullNodeSimulator, wallet_node: WalletNode, ph: bytes32) -> None:
+        await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.wait_for_wallet_synced(wallet_node=wallet_node, timeout=30)
+
+    async def make_setup_and_coins(
+        full_node_api: FullNodeSimulator, wallet_node: WalletNode
+    ) -> Tuple[Wallet, list[WalletCoinRecord], bytes32]:
+        wallet = wallet_node.wallet_state_manager.main_wallet
+        ph = await wallet.get_new_puzzlehash()
+        phs = [await wallet.get_new_puzzlehash() for _ in range(3)]
+        for _ in range(2):
+            await farm_a_block(full_node_api, wallet_node, ph)
+        other_recipients = [Payment(puzzle_hash=p, amount=uint64(200), memos=[]) for p in phs[1:]]
+        tx = await wallet.generate_signed_transaction(uint64(200), phs[0], primaries=other_recipients)
+        assert tx.spend_bundle is not None
+        await send_to_mempool(full_node_api, tx.spend_bundle)
+        await farm_a_block(full_node_api, wallet_node, ph)
+        coins = list(await wallet_node.wallet_state_manager.coin_store.get_unspent_coins_for_wallet(1))
+        # Two blocks farmed plus 3 transactions
+        assert len(coins) == 7
+        return (wallet, coins, ph)
+
+    [[full_node_api], [[wallet_node, wallet_server]], _] = simulator_and_wallet
+    server = full_node_api.full_node.server
+    await wallet_server.start_client(PeerInfo(self_hostname, uint16(server._port)), None)
+    wallet, coins, ph = await make_setup_and_coins(full_node_api, wallet_node)
+
+    # Make sure spending AB then BC would generate a conflict for the latter
+
+    tx_a = await wallet.generate_signed_transaction(uint64(30), ph, coins={coins[0].coin})
+    tx_b = await wallet.generate_signed_transaction(uint64(30), ph, coins={coins[1].coin})
+    tx_c = await wallet.generate_signed_transaction(uint64(30), ph, coins={coins[2].coin})
+    assert tx_a.spend_bundle is not None
+    assert tx_b.spend_bundle is not None
+    assert tx_c.spend_bundle is not None
+    ab_bundle = SpendBundle.aggregate([tx_a.spend_bundle, tx_b.spend_bundle])
+    await send_to_mempool(full_node_api, ab_bundle)
+    # BC should conflict here (on B)
+    bc_bundle = SpendBundle.aggregate([tx_b.spend_bundle, tx_c.spend_bundle])
+    await send_to_mempool(full_node_api, bc_bundle, expecting_conflict=True)
+    await farm_a_block(full_node_api, wallet_node, ph)
+
+    # Make sure DE and EF would aggregate on E when E is eligible for deduplication
+
+    # Create a coin with the identity puzzle hash
+    tx = await wallet.generate_signed_transaction(uint64(200), IDENTITY_PUZZLE_HASH, coins={coins[3].coin})
+    assert tx.spend_bundle is not None
+    await send_to_mempool(full_node_api, tx.spend_bundle)
+    await farm_a_block(full_node_api, wallet_node, ph)
+    # Grab the coin we created and make an eligible coin out of it
+    coins_with_identity_ph = await full_node_api.full_node.coin_store.get_coin_records_by_puzzle_hash(
+        False, IDENTITY_PUZZLE_HASH
+    )
+    sb = spend_bundle_from_conditions(
+        [[ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 110]], coins_with_identity_ph[0].coin
+    )
+    await send_to_mempool(full_node_api, sb)
+    await farm_a_block(full_node_api, wallet_node, ph)
+    # Grab the eligible coin to spend as E in DE and EF transactions
+    e_coin = (await full_node_api.full_node.coin_store.get_coin_records_by_puzzle_hash(False, IDENTITY_PUZZLE_HASH))[
+        0
+    ].coin
+    e_coin_id = e_coin.name()
+    # Restrict spending E with an announcement to consume
+    message = b"Identical spend aggregation test"
+    e_announcement = Announcement(e_coin_id, message)
+    # Create transactions D and F that consume an announcement created by E
+    tx_d = await wallet.generate_signed_transaction(
+        uint64(100), ph, fee=uint64(0), coins={coins[4].coin}, coin_announcements_to_consume={e_announcement}
+    )
+    tx_f = await wallet.generate_signed_transaction(
+        uint64(150), ph, fee=uint64(0), coins={coins[5].coin}, coin_announcements_to_consume={e_announcement}
+    )
+    assert tx_d.spend_bundle is not None
+    assert tx_f.spend_bundle is not None
+    # Create transaction E now that spends e_coin to create another eligible
+    # coin as well as the announcement consumed by D and F
+    conditions: List[List[Any]] = [
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, 42],
+        [ConditionOpcode.CREATE_COIN_ANNOUNCEMENT, message],
+    ]
+    sb_e = spend_bundle_from_conditions(conditions, e_coin)
+    # Send DE and EF combinations to the mempool
+    sb_de = SpendBundle.aggregate([tx_d.spend_bundle, sb_e])
+    sb_de_name = sb_de.name()
+    await send_to_mempool(full_node_api, sb_de)
+    sb_ef = SpendBundle.aggregate([sb_e, tx_f.spend_bundle])
+    sb_ef_name = sb_ef.name()
+    await send_to_mempool(full_node_api, sb_ef)
+    # Send also a transaction EG that spends E differently from DE and EF,
+    # so that it doesn't get deduplicated on E with them
+    conditions = [
+        [ConditionOpcode.CREATE_COIN, IDENTITY_PUZZLE_HASH, e_coin.amount - 1],
+        [ConditionOpcode.CREATE_COIN_ANNOUNCEMENT, message],
+    ]
+    sb_e2 = spend_bundle_from_conditions(conditions, e_coin)
+    g_coin = coins[6].coin
+    g_coin_id = g_coin.name()
+    tx_g = await wallet.generate_signed_transaction(
+        uint64(13), ph, coins={g_coin}, coin_announcements_to_consume={e_announcement}
+    )
+    assert tx_g.spend_bundle is not None
+    sb_e2g = SpendBundle.aggregate([sb_e2, tx_g.spend_bundle])
+    sb_e2g_name = sb_e2g.name()
+    await send_to_mempool(full_node_api, sb_e2g)
+
+    # Make sure our coin IDs to spend bundles mappings are correct
+    assert get_sb_names_by_coin_id(full_node_api, coins[4].coin.name()) == {sb_de_name}
+    assert get_sb_names_by_coin_id(full_node_api, e_coin_id) == {sb_de_name, sb_ef_name, sb_e2g_name}
+    assert get_sb_names_by_coin_id(full_node_api, coins[5].coin.name()) == {sb_ef_name}
+    assert get_sb_names_by_coin_id(full_node_api, g_coin_id) == {sb_e2g_name}
+
+    await farm_a_block(full_node_api, wallet_node, ph)
+
+    # Make sure sb_de and sb_ef coins, including the deduplicated one, are removed
+    # from the coin IDs to spend bundles mappings with the creation of a new block
+    assert get_sb_names_by_coin_id(full_node_api, coins[4].coin.name()) == set()
+    assert get_sb_names_by_coin_id(full_node_api, e_coin_id) == set()
+    assert get_sb_names_by_coin_id(full_node_api, coins[5].coin.name()) == set()
+    assert get_sb_names_by_coin_id(full_node_api, g_coin_id) == set()
+
+    # Make sure coin G remains because E2G was removed as E got spent differently (by DE and EF)
+    coins_set = await wallet_node.wallet_state_manager.coin_store.get_unspent_coins_for_wallet(1)
+    assert g_coin in (c.coin for c in coins_set)
+    # Only the newly created eligible coin is left now
+    eligible_coins = await full_node_api.full_node.coin_store.get_coin_records_by_puzzle_hash(
+        False, IDENTITY_PUZZLE_HASH
+    )
+    assert len(eligible_coins) == 1
+    assert eligible_coins[0].coin.amount == 42
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/mempool/test_mempool_performance.py` & `chia-blockchain-2.0.0b3/tests/core/mempool/test_mempool_performance.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/flood.py` & `chia-blockchain-2.0.0b3/tests/core/server/flood.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/serve.py` & `chia-blockchain-2.0.0b3/tests/core/server/serve.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/test_capabilities.py` & `chia-blockchain-2.0.0b3/tests/core/server/test_capabilities.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/test_dos.py` & `chia-blockchain-2.0.0b3/tests/core/server/test_dos.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/test_event_loop.py` & `chia-blockchain-2.0.0b3/tests/core/server/test_event_loop.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/test_loop.py` & `chia-blockchain-2.0.0b3/tests/core/server/test_loop.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/server/test_rate_limits.py` & `chia-blockchain-2.0.0b3/tests/core/server/test_rate_limits.py`

 * *Files 0% similar despite different names*

```diff
@@ -9,20 +9,18 @@
 from chia.protocols.shared_protocol import Capability
 from chia.server.outbound_message import make_msg
 from chia.server.rate_limit_numbers import compose_rate_limits, get_rate_limits_to_use
 from chia.server.rate_limit_numbers import rate_limits as rl_numbers
 from chia.server.rate_limits import RateLimiter
 from chia.server.server import ChiaServer
 from chia.server.ws_connection import WSChiaConnection
-from chia.simulator.block_tools import test_constants
 from chia.types.peer_info import PeerInfo
 from chia.util.ints import uint16
 from tests.conftest import node_with_params
 
-constants = test_constants
 rl_v2 = [Capability.BASE, Capability.BLOCK_HEADERS, Capability.RATE_LIMITS_V2]
 rl_v1 = [Capability.BASE]
 node_with_params_b = node_with_params
 test_different_versions_results: List[int] = []
 
 
 class TestRateLimits:
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/ssl/test_ssl.py` & `chia-blockchain-2.0.0b3/tests/core/ssl/test_ssl.py`

 * *Files 0% similar despite different names*

```diff
@@ -24,15 +24,14 @@
             NodeType.FULL_NODE,
             ws,
             server.api,
             server._port,
             server.log,
             True,
             server.received_message_callback,
-            self_hostname,
             None,
             bytes32(b"\x00" * 32),
             100,
             30,
             local_capabilities_for_handshake=capabilities,
         )
         await wsc.perform_handshake(server._network_id, protocol_version, dummy_port, NodeType.FULL_NODE)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_coins.py` & `chia-blockchain-2.0.0b3/tests/core/test_coins.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_cost_calculation.py` & `chia-blockchain-2.0.0b3/tests/core/test_cost_calculation.py`

 * *Files 5% similar despite different names*

```diff
@@ -73,40 +73,39 @@
             BURN_PUZZLE_HASH,
             coinbase,
         )
         assert spend_bundle is not None
         program: BlockGenerator = simple_solution_generator(spend_bundle)
 
         npc_result: NPCResult = get_name_puzzle_conditions(
-            program, test_constants.MAX_BLOCK_COST_CLVM, mempool_mode=False, height=softfork_height
+            program, bt.constants.MAX_BLOCK_COST_CLVM, mempool_mode=False, height=softfork_height
         )
 
         assert npc_result.error is None
         assert len(bytes(program.program)) == 433
 
         coin_spend = spend_bundle.coin_spends[0]
         assert coin_spend.coin.name() == npc_result.conds.spends[0].coin_id
-        error, puzzle, solution = get_puzzle_and_solution_for_coin(program, coin_spend.coin)
-        assert error is None
-        assert puzzle == coin_spend.puzzle_reveal
-        assert solution == coin_spend.solution
+        spend_info = get_puzzle_and_solution_for_coin(program, coin_spend.coin)
+        assert spend_info.puzzle == coin_spend.puzzle_reveal
+        assert spend_info.solution == coin_spend.solution
 
         clvm_cost = 404560
-        byte_cost = len(bytes(program.program)) * test_constants.COST_PER_BYTE
+        byte_cost = len(bytes(program.program)) * bt.constants.COST_PER_BYTE
         assert (
             npc_result.conds.cost
             == ConditionCost.CREATE_COIN.value + ConditionCost.AGG_SIG.value + clvm_cost + byte_cost
         )
 
         # Create condition + agg_sig_condition + length + cpu_cost
         assert (
             npc_result.cost
             == ConditionCost.CREATE_COIN.value
             + ConditionCost.AGG_SIG.value
-            + len(bytes(program.program)) * test_constants.COST_PER_BYTE
+            + len(bytes(program.program)) * bt.constants.COST_PER_BYTE
             + clvm_cost
         )
 
     @pytest.mark.asyncio
     async def test_mempool_mode(self, softfork_height, bt):
         wallet_tool = bt.get_pool_wallet_tool()
         ph = wallet_tool.get_new_puzzlehash()
@@ -139,29 +138,29 @@
             binutils.assemble(
                 f"(q ((0x3d2331635a58c0d49912bc1427d7db51afe3f20a7b4bcaffa17ee250dcbcbfaa {disassembly} 300"
                 f"  (() (q . (({unknown_opcode} '00000000000000000000000000000000' 0x0cbba106e000))) ()))))"
             ).as_bin()
         )
         generator = BlockGenerator(program, [], [])
         npc_result: NPCResult = get_name_puzzle_conditions(
-            generator, test_constants.MAX_BLOCK_COST_CLVM, mempool_mode=True, height=softfork_height
+            generator, bt.constants.MAX_BLOCK_COST_CLVM, mempool_mode=True, height=softfork_height
         )
         assert npc_result.error is not None
         npc_result = get_name_puzzle_conditions(
-            generator, test_constants.MAX_BLOCK_COST_CLVM, mempool_mode=False, height=softfork_height
+            generator, bt.constants.MAX_BLOCK_COST_CLVM, mempool_mode=False, height=softfork_height
         )
         assert npc_result.error is None
 
         coin = Coin(
             bytes32.fromhex("3d2331635a58c0d49912bc1427d7db51afe3f20a7b4bcaffa17ee250dcbcbfaa"),
             bytes32.fromhex("14947eb0e69ee8fc8279190fc2d38cb4bbb61ba28f1a270cfd643a0e8d759576"),
             300,
         )
-        error, puzzle, solution = get_puzzle_and_solution_for_coin(generator, coin)
-        assert error is None
+        spend_info = get_puzzle_and_solution_for_coin(generator, coin)
+        assert spend_info.puzzle.to_program() == puzzle
 
     @pytest.mark.asyncio
     async def test_clvm_mempool_mode(self, softfork_height):
         block = Program.from_bytes(bytes(SMALL_BLOCK_GENERATOR.program))
         disassembly = binutils.disassemble(block)
         # this is a valid generator program except the first clvm
         # if-condition, that depends on executing an unknown operator
@@ -270,10 +269,9 @@
 
     # benchmark the function to pick out the puzzle and solution for a specific
     # coin
     generator = BlockGenerator(LARGE_BLOCK.transactions_generator, [], [])
     with assert_runtime(seconds=7, label="get_puzzle_and_solution_for_coin"):
         for i in range(3):
             for c in spends:
-                err, puzzle, solution = get_puzzle_and_solution_for_coin(generator, c)
-                assert err is None
-                assert puzzle.get_tree_hash() == c.puzzle_hash
+                spend_info = get_puzzle_and_solution_for_coin(generator, c)
+                assert spend_info.puzzle.get_tree_hash() == c.puzzle_hash
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_crawler_rpc.py` & `chia-blockchain-2.0.0b3/tests/core/test_crawler_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_daemon_rpc.py` & `chia-blockchain-2.0.0b3/tests/core/test_daemon_rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_db_conversion.py` & `chia-blockchain-2.0.0b3/tests/core/test_db_conversion.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_db_validation.py` & `chia-blockchain-2.0.0b3/tests/core/test_db_validation.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_farmer_harvester_rpc.py` & `chia-blockchain-2.0.0b3/tests/core/test_farmer_harvester_rpc.py`

 * *Files 4% similar despite different names*

```diff
@@ -5,129 +5,134 @@
 import operator
 import sys
 import time
 from math import ceil
 from os import mkdir
 from pathlib import Path
 from shutil import copy
-from typing import Any, Awaitable, Callable, Dict, List, Union, cast
+from typing import Any, AsyncIterator, Awaitable, Callable, Dict, List, Tuple, Union, cast
 
 import pytest
 import pytest_asyncio
 
 from chia.consensus.coinbase import create_puzzlehash_for_pk
 from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
+from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
 from chia.plot_sync.receiver import Receiver
 from chia.plotting.util import add_plot_directory
 from chia.protocols import farmer_protocol
 from chia.protocols.harvester_protocol import Plot
 from chia.rpc.farmer_rpc_api import (
     FilterItem,
     PaginatedRequestData,
     PlotInfoRequestData,
     PlotPathRequestData,
     plot_matches_filter,
 )
 from chia.rpc.farmer_rpc_client import FarmerRpcClient
 from chia.rpc.harvester_rpc_client import HarvesterRpcClient
-from chia.simulator.block_tools import get_plot_dir
+from chia.server.start_service import Service
+from chia.simulator.block_tools import BlockTools, get_plot_dir
 from chia.simulator.time_out_assert import time_out_assert, time_out_assert_custom_interval
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.bech32m import decode_puzzle_hash, encode_puzzle_hash
-from chia.util.byte_types import hexstr_to_bytes
 from chia.util.config import load_config, lock_and_load_config, save_config
 from chia.util.hash import std_hash
 from chia.util.ints import uint8, uint32, uint64
 from chia.util.misc import get_list_or_len
 from chia.wallet.derive_keys import master_sk_to_wallet_sk, master_sk_to_wallet_sk_unhardened
 from tests.plot_sync.test_delta import dummy_plot
 from tests.util.misc import assert_rpc_error
 from tests.util.rpc import validate_get_routes
 
 log = logging.getLogger(__name__)
 
 
 async def wait_for_plot_sync(receiver: Receiver, previous_last_sync_id: uint64) -> None:
-    def wait():
+    def wait() -> bool:
         current_last_sync_id = receiver.last_sync().sync_id
         return current_last_sync_id != 0 and current_last_sync_id != previous_last_sync_id
 
     await time_out_assert(30, wait)
 
 
 async def wait_for_synced_receiver(farmer: Farmer, harvester_id: bytes32) -> None:
-    def wait():
+    def wait() -> bool:
         return (
             harvester_id in farmer.plot_sync_receivers and not farmer.plot_sync_receivers[harvester_id].initial_sync()
         )
 
     await time_out_assert(30, wait)
 
 
+HarvesterFarmerEnvironment = Tuple[
+    Service[Farmer, FarmerAPI], FarmerRpcClient, Service[Harvester, HarvesterAPI], HarvesterRpcClient, BlockTools
+]
+
+
 @pytest_asyncio.fixture(scope="function")
-async def harvester_farmer_environment(farmer_one_harvester, self_hostname):
+async def harvester_farmer_environment(
+    farmer_one_harvester: Tuple[List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools],
+    self_hostname: str,
+) -> AsyncIterator[HarvesterFarmerEnvironment]:
     harvesters, farmer_service, bt = farmer_one_harvester
     harvester_service = harvesters[0]
 
+    assert farmer_service.rpc_server is not None
     farmer_rpc_cl = await FarmerRpcClient.create(
         self_hostname, farmer_service.rpc_server.listen_port, farmer_service.root_path, farmer_service.config
     )
+    assert harvester_service.rpc_server is not None
     harvester_rpc_cl = await HarvesterRpcClient.create(
         self_hostname, harvester_service.rpc_server.listen_port, harvester_service.root_path, harvester_service.config
     )
 
-    async def have_connections():
+    async def have_connections() -> bool:
         return len(await farmer_rpc_cl.get_connections()) > 0
 
     await time_out_assert(15, have_connections, True)
 
     yield farmer_service, farmer_rpc_cl, harvester_service, harvester_rpc_cl, bt
 
     farmer_rpc_cl.close()
     harvester_rpc_cl.close()
     await farmer_rpc_cl.await_closed()
     await harvester_rpc_cl.await_closed()
 
 
 @pytest.mark.asyncio
-async def test_get_routes(harvester_farmer_environment):
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
+async def test_get_routes(harvester_farmer_environment: HarvesterFarmerEnvironment) -> None:
+    farmer_service, farmer_rpc_client, harvester_service, harvester_rpc_client, _ = harvester_farmer_environment
+    assert farmer_service.rpc_server is not None
+    assert harvester_service.rpc_server is not None
     await validate_get_routes(farmer_rpc_client, farmer_service.rpc_server.rpc_api)
     await validate_get_routes(harvester_rpc_client, harvester_service.rpc_server.rpc_api)
 
 
 @pytest.mark.parametrize("endpoint", ["get_harvesters", "get_harvesters_summary"])
 @pytest.mark.asyncio
-async def test_farmer_get_harvesters_and_summary(harvester_farmer_environment, endpoint: str):
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
+async def test_farmer_get_harvesters_and_summary(
+    harvester_farmer_environment: HarvesterFarmerEnvironment, endpoint: str
+) -> None:
+    _, farmer_rpc_client, harvester_service, harvester_rpc_client, _ = harvester_farmer_environment
     harvester = harvester_service._node
 
     harvester_plots = []
 
     async def non_zero_plots() -> bool:
         res = await harvester_rpc_client.get_plots()
         nonlocal harvester_plots
         harvester_plots = res["plots"]
         return len(harvester_plots) > 0
 
     await time_out_assert(10, non_zero_plots)
 
-    async def test_get_harvesters():
+    async def test_get_harvesters() -> bool:
         nonlocal harvester_plots
         harvester.plot_manager.trigger_refresh()
         await time_out_assert(5, harvester.plot_manager.needs_refresh, value=False)
         farmer_res = await getattr(farmer_rpc_client, endpoint)()
 
         if len(list(farmer_res["harvesters"])) != 1:
             log.error(f"test_get_harvesters: invalid harvesters {list(farmer_res['harvesters'])}")
@@ -151,48 +156,36 @@
 
         return True
 
     await time_out_assert_custom_interval(30, 1, test_get_harvesters)
 
 
 @pytest.mark.asyncio
-async def test_farmer_signage_point_endpoints(harvester_farmer_environment):
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
+async def test_farmer_signage_point_endpoints(harvester_farmer_environment: HarvesterFarmerEnvironment) -> None:
+    farmer_service, farmer_rpc_client, _, _, _ = harvester_farmer_environment
     farmer_api = farmer_service._api
 
     assert (await farmer_rpc_client.get_signage_point(std_hash(b"2"))) is None
     assert len(await farmer_rpc_client.get_signage_points()) == 0
 
-    async def have_signage_points():
+    async def have_signage_points() -> bool:
         return len(await farmer_rpc_client.get_signage_points()) > 0
 
     sp = farmer_protocol.NewSignagePoint(
         std_hash(b"1"), std_hash(b"2"), std_hash(b"3"), uint64(1), uint64(1000000), uint8(2)
     )
     await farmer_api.new_signage_point(sp)
 
     await time_out_assert(5, have_signage_points, True)
     assert (await farmer_rpc_client.get_signage_point(std_hash(b"2"))) is not None
 
 
 @pytest.mark.asyncio
-async def test_farmer_reward_target_endpoints(harvester_farmer_environment):
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        bt,
-    ) = harvester_farmer_environment
+async def test_farmer_reward_target_endpoints(harvester_farmer_environment: HarvesterFarmerEnvironment) -> None:
+    farmer_service, farmer_rpc_client, _, _, bt = harvester_farmer_environment
     farmer_api = farmer_service._api
 
     targets_1 = await farmer_rpc_client.get_reward_targets(False)
     assert "have_pool_sk" not in targets_1
     assert "have_farmer_sk" not in targets_1
     targets_2 = await farmer_rpc_client.get_reward_targets(True, 2)
     assert targets_2["have_pool_sk"] and targets_2["have_farmer_sk"]
@@ -237,22 +230,18 @@
 
     replaced_char = new_ph_2_encoded[0:-1] + "a"
     with pytest.raises(ValueError):
         await farmer_rpc_client.set_reward_targets(None, replaced_char)
 
 
 @pytest.mark.asyncio
-async def test_farmer_get_pool_state(harvester_farmer_environment, self_hostname):
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
+async def test_farmer_get_pool_state(
+    harvester_farmer_environment: HarvesterFarmerEnvironment, self_hostname: str
+) -> None:
+    farmer_service, farmer_rpc_client, _, _, _ = harvester_farmer_environment
     farmer_api = farmer_service._api
 
     assert len((await farmer_rpc_client.get_pool_state())["pool_state"]) == 0
     pool_list = [
         {
             "launcher_id": "ae4ef3b9bfe68949691281a015a9c16630fc8f66d48c19ca548fb80768791afa",
             "owner_public_key": "aa11e92274c0f6a2449fd0c7cfab4a38f943289dbe2214c808b36390c34eacfaa1d4c8f3c6ec582ac502ff32228679a0",  # noqa
@@ -272,15 +261,15 @@
     pool_state = (await farmer_rpc_client.get_pool_state())["pool_state"]
     assert len(pool_state) == 1
     assert (
         pool_state[0]["pool_config"]["payout_instructions"]
         == "c2b08e41d766da4116e388357ed957d04ad754623a915f3fd65188a8746cf3e8"
     )
     await farmer_rpc_client.set_payout_instructions(
-        hexstr_to_bytes(pool_state[0]["pool_config"]["launcher_id"]), "1234vy"
+        bytes32.from_hexstr(pool_state[0]["pool_config"]["launcher_id"]), "1234vy"
     )
     await farmer_api.farmer.update_pool_state()
     pool_state = (await farmer_rpc_client.get_pool_state())["pool_state"]
     assert pool_state[0]["pool_config"]["payout_instructions"] == "1234vy"
 
     now = time.time()
     # Big arbitrary numbers used to be unlikely to accidentally collide.
@@ -298,27 +287,25 @@
     client_pool_state = await farmer_rpc_client.get_pool_state()
     for pool_dict in client_pool_state["pool_state"]:
         for key in ["points_found_24h", "points_acknowledged_24h"]:
             assert pool_dict[key][0] == list(since_24h)
 
 
 @pytest.mark.asyncio
-async def test_farmer_get_pool_state_plot_count(harvester_farmer_environment, self_hostname: str) -> None:
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
+async def test_farmer_get_pool_state_plot_count(
+    harvester_farmer_environment: HarvesterFarmerEnvironment, self_hostname: str
+) -> None:
+    farmer_service, farmer_rpc_client, harvester_service, _, _ = harvester_farmer_environment
     farmer_api = farmer_service._api
 
     async def wait_for_plot_sync() -> bool:
         try:
-            return (await farmer_rpc_client.get_harvesters_summary())["harvesters"][0]["plots"] > 0
+            farmer_res = await farmer_rpc_client.get_harvesters_summary()
+            plots: int = farmer_res["harvesters"][0]["plots"]
+            return plots > 0
         except Exception:
             return False
 
     await time_out_assert(15, wait_for_plot_sync, True)
 
     assert len((await farmer_rpc_client.get_pool_state())["pool_state"]) == 0
 
@@ -338,29 +325,29 @@
 
     root_path = farmer_api.farmer._root_path
     with lock_and_load_config(root_path, "config.yaml") as config:
         config["pool"]["pool_list"] = pool_list
         save_config(root_path, "config.yaml", config)
     await farmer_api.farmer.update_pool_state()
 
-    pool_plot_count = (await farmer_rpc_client.get_pool_state())["pool_state"][0]["plot_count"]
+    pool_plot_count: int = (await farmer_rpc_client.get_pool_state())["pool_state"][0]["plot_count"]
     assert pool_plot_count == 5
 
     # TODO: Maybe improve this to not remove from Receiver directly but instead from the harvester and then wait for
     #       plot sync event.
     async def remove_all_and_validate() -> bool:
         nonlocal pool_plot_count
         receiver = farmer_api.farmer.plot_sync_receivers[harvester_service._server.node_id]
         for path, plot in receiver.plots().copy().items():
             if plot.pool_contract_puzzle_hash == pool_contract_puzzle_hash:
                 del receiver.plots()[path]
                 pool_plot_count -= 1
-        plot_count = (await farmer_rpc_client.get_pool_state())["pool_state"][0]["plot_count"]
+        plot_count: int = (await farmer_rpc_client.get_pool_state())["pool_state"][0]["plot_count"]
         assert plot_count == pool_plot_count
-        return plot_count
+        return plot_count > 0
 
     await time_out_assert(15, remove_all_and_validate, False)
     assert (await farmer_rpc_client.get_pool_state())["pool_state"][0]["plot_count"] == 0
 
 
 @pytest.mark.parametrize(
     "filter_item, match",
@@ -372,15 +359,15 @@
         (FilterItem("filename", "23"), True),
         (FilterItem("filename", "3"), True),
         (FilterItem("filename", "0123"), False),
         (FilterItem("pool_contract_puzzle_hash", None), True),
         (FilterItem("pool_contract_puzzle_hash", "1"), False),
     ],
 )
-def test_plot_matches_filter(filter_item: FilterItem, match: bool):
+def test_plot_matches_filter(filter_item: FilterItem, match: bool) -> None:
     assert plot_matches_filter(dummy_plot("123"), filter_item) == match
 
 
 @pytest.mark.parametrize(
     "endpoint, filtering, sort_key, reverse, expected_plot_count",
     [
         (FarmerRpcClient.get_harvester_plots_valid, [], "filename", False, 20),
@@ -407,29 +394,22 @@
         (FarmerRpcClient.get_harvester_plots_duplicates, [], None, True, 7),
         (FarmerRpcClient.get_harvester_plots_duplicates, ["duplicates_0"], None, False, 3),
     ],
 )
 @pytest.mark.asyncio
 @pytest.mark.skipif(sys.platform == "win32", reason="avoiding crashes on windows until we fix this (crashing workers)")
 async def test_farmer_get_harvester_plots_endpoints(
-    harvester_farmer_environment: Any,
+    harvester_farmer_environment: HarvesterFarmerEnvironment,
     endpoint: Callable[[FarmerRpcClient, PaginatedRequestData], Awaitable[Dict[str, Any]]],
     filtering: Union[List[FilterItem], List[str]],
     sort_key: str,
     reverse: bool,
     expected_plot_count: int,
 ) -> None:
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
-
+    farmer_service, farmer_rpc_client, harvester_service, harvester_rpc_client, _ = harvester_farmer_environment
     harvester = harvester_service._node
     harvester_id = harvester_service._server.node_id
     receiver = farmer_service._api.farmer.plot_sync_receivers[harvester_id]
 
     if receiver.initial_sync():
         await wait_for_plot_sync(receiver, receiver.last_sync().sync_id)
 
@@ -496,18 +476,18 @@
 
     harvester.plot_manager.trigger_refresh()
     harvester.plot_manager.start_refreshing()
 
     await wait_for_plot_sync(receiver, last_sync_id)
 
     for page_size in [1, int(total_count / 2), total_count - 1, total_count, total_count + 1, 100]:
-        request = dataclasses.replace(request, page_size=uint32(page_size))  # type: ignore[type-var]
+        request = dataclasses.replace(request, page_size=uint32(page_size))
         expected_page_count = ceil(total_count / page_size)
         for page in range(expected_page_count):
-            request = dataclasses.replace(request, page=uint32(page))  # type: ignore[type-var]
+            request = dataclasses.replace(request, page=uint32(page))
             await wait_for_synced_receiver(farmer_service._api.farmer, harvester_id)
             page_result = await endpoint(farmer_rpc_client, request)
             offset = page * page_size
             expected_plots = plots[offset : offset + page_size]
             assert page_result == {
                 "success": True,
                 "node_id": harvester_id.hex(),
@@ -516,22 +496,16 @@
                 "total_count": total_count,
                 "plots": expected_plots,
             }
 
 
 @pytest.mark.asyncio
 @pytest.mark.skip("This test causes hangs occasionally. TODO: fix this.")
-async def test_harvester_add_plot_directory(harvester_farmer_environment) -> None:
-    (
-        farmer_service,
-        farmer_rpc_client,
-        harvester_service,
-        harvester_rpc_client,
-        _,
-    ) = harvester_farmer_environment
+async def test_harvester_add_plot_directory(harvester_farmer_environment: HarvesterFarmerEnvironment) -> None:
+    _, _, harvester_service, harvester_rpc_client, _ = harvester_farmer_environment
 
     async def assert_added(path: Path) -> None:
         assert await harvester_rpc_client.add_plot_directory(str(path))
         with lock_and_load_config(root_path, "config.yaml") as config:
             assert str(path) in config["harvester"]["plot_directories"]
 
     # Test without the required parameter: dirname
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_filter.py` & `chia-blockchain-2.0.0b3/tests/core/test_filter.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_full_node_rpc.py` & `chia-blockchain-2.0.0b3/tests/core/test_full_node_rpc.py`

 * *Files 1% similar despite different names*

```diff
@@ -8,15 +8,15 @@
 from clvm.casts import int_to_bytes
 
 from chia.consensus.pot_iterations import is_overflow_block
 from chia.full_node.signage_point import SignagePoint
 from chia.protocols import full_node_protocol
 from chia.rpc.full_node_rpc_client import FullNodeRpcClient
 from chia.server.outbound_message import NodeType
-from chia.simulator.block_tools import get_signage_point, test_constants
+from chia.simulator.block_tools import get_signage_point
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol, ReorgProtocol
 from chia.simulator.time_out_assert import time_out_assert
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.coin_spend import compute_additions
 from chia.types.condition_opcodes import ConditionOpcode
 from chia.types.condition_with_args import ConditionWithArgs
 from chia.types.full_block import FullBlock
@@ -55,15 +55,15 @@
 
             blocks = bt.get_consecutive_blocks(num_blocks)
             blocks = bt.get_consecutive_blocks(num_blocks, block_list_input=blocks, guarantee_transaction_block=True)
 
             assert len(await client.get_unfinished_block_headers()) == 0
             assert len((await client.get_block_records(0, 100))) == 0
             for block in blocks:
-                if is_overflow_block(test_constants, block.reward_chain_block.signage_point_index):
+                if is_overflow_block(bt.constants, block.reward_chain_block.signage_point_index):
                     finished_ss = block.finished_sub_slots[:-1]
                 else:
                     finished_ss = block.finished_sub_slots
 
                 unf = UnfinishedBlock(
                     finished_ss,
                     block.reward_chain_block.get_unfinished(),
@@ -343,18 +343,18 @@
 
             for block in blocks:
                 await _validate_and_add_block(second_blockchain, block)
 
             # Creates a signage point based on the last block
             peak_2 = second_blockchain.get_peak()
             sp: SignagePoint = get_signage_point(
-                test_constants,
+                bt.constants,
                 blockchain,
                 peak_2,
-                peak_2.ip_sub_slot_total_iters(test_constants),
+                peak_2.ip_sub_slot_total_iters(bt.constants),
                 uint8(4),
                 [],
                 peak_2.sub_slot_iters,
             )
 
             # Don't have SP yet
             res = await client.get_recent_signage_point_or_eos(sp.cc_vdf.output.get_hash(), None)
```

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_merkle_set.py` & `chia-blockchain-2.0.0b3/tests/core/test_merkle_set.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/test_services.py` & `chia-blockchain-2.0.0b3/tests/core/test_services.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_cached_bls.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_cached_bls.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_config.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_file_keyring_synchronization.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_file_keyring_synchronization.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_files.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_files.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_jsonify.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_jsonify.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_keychain.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_keychain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_keyring_wrapper.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_keyring_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_lockfile.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_lockfile.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_log_exceptions.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_log_exceptions.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_lru_cache.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_lru_cache.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/core/util/test_significant_bits.py` & `chia-blockchain-2.0.0b3/tests/core/util/test_significant_bits.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/db/test_db_wrapper.py` & `chia-blockchain-2.0.0b3/tests/db/test_db_wrapper.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/farmer_harvester/test_farmer_harvester.py` & `chia-blockchain-2.0.0b3/tests/farmer_harvester/test_farmer_harvester.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,29 +1,40 @@
 from __future__ import annotations
 
 import asyncio
+from typing import List, Tuple
 
 import pytest
 
 from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
+from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
+from chia.server.start_service import Service
+from chia.simulator.block_tools import BlockTools
 from chia.simulator.time_out_assert import time_out_assert
 from chia.types.peer_info import UnresolvedPeerInfo
 from chia.util.keychain import generate_mnemonic
 
 
-def farmer_is_started(farmer):
+def farmer_is_started(farmer: Farmer) -> bool:
     return farmer.started
 
 
 @pytest.mark.asyncio
-async def test_start_with_empty_keychain(farmer_one_harvester_not_started):
+async def test_start_with_empty_keychain(
+    farmer_one_harvester_not_started: Tuple[
+        List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools
+    ]
+) -> None:
     _, farmer_service, bt = farmer_one_harvester_not_started
     farmer: Farmer = farmer_service._node
     farmer_service.reconnect_retry_seconds = 1
     # First remove all keys from the keychain
+    assert bt.local_keychain is not None
     bt.local_keychain.delete_all_keys()
     # Make sure the farmer service is not initialized yet
     assert not farmer.started
     # Start it, wait 5 seconds and make sure it still isn't initialized (since the keychain is empty)
     await farmer_service.start()
     await asyncio.sleep(5)
     assert not farmer.started
@@ -33,34 +44,39 @@
     # Stop it and wait for `Farmer.initialized` to become reset
     farmer_service.stop()
     await farmer_service.wait_closed()
     assert not farmer.started
 
 
 @pytest.mark.asyncio
-async def test_harvester_handshake(farmer_one_harvester_not_started):
+async def test_harvester_handshake(
+    farmer_one_harvester_not_started: Tuple[
+        List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools
+    ]
+) -> None:
     harvesters, farmer_service, bt = farmer_one_harvester_not_started
     harvester_service = harvesters[0]
     harvester = harvester_service._node
     farmer = farmer_service._node
 
     farmer_service.reconnect_retry_seconds = 1
     harvester_service.reconnect_retry_seconds = 1
 
-    def farmer_has_connections():
+    def farmer_has_connections() -> bool:
         return len(farmer.server.get_connections()) > 0
 
-    def handshake_task_active():
+    def handshake_task_active() -> bool:
         return farmer.harvester_handshake_task is not None
 
     async def handshake_done() -> bool:
         await asyncio.sleep(1)
         return harvester.plot_manager._refresh_thread is not None and len(harvester.plot_manager.farmer_public_keys) > 0
 
     # First remove all keys from the keychain
+    assert bt.local_keychain is not None
     bt.local_keychain.delete_all_keys()
     # Handshake task and plot manager thread should not be running yet
     assert farmer.harvester_handshake_task is None
     assert harvester.plot_manager._refresh_thread is None
     # Start both services and wait a bit
     await farmer_service.start()
     await harvester_service.start()
```

### Comparing `chia-blockchain-2.0.0b1/tests/fee_estimation/cmdline_test.py` & `chia-blockchain-2.0.0b3/tests/fee_estimation/cmdline_test.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/fee_estimation/test_fee_estimation_integration.py` & `chia-blockchain-2.0.0b3/tests/fee_estimation/test_fee_estimation_integration.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/fee_estimation/test_fee_estimation_rpc.py` & `chia-blockchain-2.0.0b3/tests/fee_estimation/test_fee_estimation_rpc.py`

 * *Files 2% similar despite different names*

```diff
@@ -7,31 +7,35 @@
 import pytest_asyncio
 
 from chia.full_node.full_node import FullNode
 from chia.rpc.full_node_rpc_api import FullNodeRpcApi
 from chia.rpc.full_node_rpc_client import FullNodeRpcClient
 from chia.server.start_service import Service
 from chia.simulator.block_tools import BlockTools
+from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.spend_bundle import SpendBundle
 from chia.util.ints import uint64
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 
 
 @pytest_asyncio.fixture(scope="function")
 async def setup_node_and_rpc(
-    two_wallet_nodes_services: Tuple[List[Service[FullNode]], List[Service[WalletNode]], BlockTools],
+    two_wallet_nodes_services: Tuple[
+        List[Service[FullNode, FullNodeSimulator]], List[Service[WalletNode, WalletNodeAPI]], BlockTools
+    ],
 ) -> Tuple[FullNodeRpcClient, FullNodeRpcApi]:
     full_nodes, wallets, bt = two_wallet_nodes_services
     wallet = wallets[0]._node.wallet_state_manager.main_wallet
     full_node_apis = [full_node_service._api for full_node_service in full_nodes]
-    full_node_api = full_node_apis[0]
+    full_node_api: FullNodeSimulator = full_node_apis[0]
     full_node_service_1 = full_nodes[0]
     assert full_node_service_1.rpc_server is not None
     client = await FullNodeRpcClient.create(
         bt.config["self_hostname"],
         full_node_service_1.rpc_server.listen_port,
         full_node_service_1.root_path,
         full_node_service_1.config,
@@ -44,19 +48,19 @@
         await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
 
     return client, full_node_rpc_api
 
 
 @pytest_asyncio.fixture(scope="function")
 async def one_node_no_blocks(
-    one_node: Tuple[List[Service[FullNode]], List[Service[WalletNode]], BlockTools]
+    one_node: Tuple[List[Service[FullNode, FullNodeSimulator]], List[Service[WalletNode, WalletNodeAPI]], BlockTools]
 ) -> Tuple[FullNodeRpcClient, FullNodeRpcApi]:
     full_nodes, wallets, bt = one_node
     full_node_apis = [full_node_service._api for full_node_service in full_nodes]
-    full_node_api = full_node_apis[0]
+    full_node_api: FullNodeSimulator = full_node_apis[0]
     full_node_service_1 = full_nodes[0]
     assert full_node_service_1.rpc_server is not None
     client = await FullNodeRpcClient.create(
         bt.config["self_hostname"],
         full_node_service_1.rpc_server.listen_port,
         full_node_service_1.root_path,
         full_node_service_1.config,
```

### Comparing `chia-blockchain-2.0.0b1/tests/fee_estimation/test_fee_estimation_unit_tests.py` & `chia-blockchain-2.0.0b3/tests/fee_estimation/test_fee_estimation_unit_tests.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/fee_estimation/test_mempoolitem_height_added.py` & `chia-blockchain-2.0.0b3/tests/fee_estimation/test_mempoolitem_height_added.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/generator/test_compression.py` & `chia-blockchain-2.0.0b3/tests/generator/test_compression.py`

 * *Files 2% similar despite different names*

```diff
@@ -154,48 +154,37 @@
         sb: SpendBundle = make_spend_bundle(1)
         match = match_standard_transaction_at_any_index(original_generator)
         assert match is not None
         start, end = match
         ca = CompressorArg(uint32(0), SerializedProgram.from_bytes(original_generator), start, end)
         c = compressed_spend_bundle_solution(ca, sb)
         removal = sb.coin_spends[0].coin
-        error, puzzle, solution = get_puzzle_and_solution_for_coin(c, removal)
-        assert error is None
-        assert puzzle is not None
-        assert solution is not None
-        assert bytes(puzzle) == bytes(sb.coin_spends[0].puzzle_reveal)
-        assert bytes(solution) == bytes(sb.coin_spends[0].solution)
+        spend_info = get_puzzle_and_solution_for_coin(c, removal)
+        assert bytes(spend_info.puzzle) == bytes(sb.coin_spends[0].puzzle_reveal)
+        assert bytes(spend_info.solution) == bytes(sb.coin_spends[0].solution)
         # Test non compressed generator as well
         s = simple_solution_generator(sb)
-        error, puzzle, solution = get_puzzle_and_solution_for_coin(s, removal)
-        assert error is None
-        assert puzzle is not None
-        assert solution is not None
-        assert bytes(puzzle) == bytes(sb.coin_spends[0].puzzle_reveal)
-        assert bytes(solution) == bytes(sb.coin_spends[0].solution)
+        spend_info = get_puzzle_and_solution_for_coin(s, removal)
+        assert bytes(spend_info.puzzle) == bytes(sb.coin_spends[0].puzzle_reveal)
+        assert bytes(spend_info.solution) == bytes(sb.coin_spends[0].solution)
 
     def test_spend_byndle_coin_spend(self) -> None:
         for i in range(0, 10):
             sb: SpendBundle = make_spend_bundle(i)
             cs1 = SExp.to(spend_bundle_to_coin_spend_entry_list(sb)).as_bin()  # pylint: disable=E1101
             cs2 = spend_bundle_to_serialized_coin_spend_entry_list(sb)
             assert cs1 == cs2
 
 
 class TestDecompression:
-    def __init__(self) -> None:
-        self.maxDiff = None
-
     def test_deserialization(self) -> None:
-        self.maxDiff = None
         cost, out = DESERIALIZE_MOD.run_with_cost(INFINITE_COST, [bytes(Program.to("hello"))])
         assert out == Program.to("hello")
 
     def test_deserialization_as_argument(self) -> None:
-        self.maxDiff = None
         cost, out = TEST_GEN_DESERIALIZE.run_with_cost(
             INFINITE_COST, [DESERIALIZE_MOD, Nil, bytes(Program.to("hello"))]
         )
         print(bytes(Program.to("hello")))
         print()
         print(out)
         assert out == Program.to("hello")
@@ -241,15 +230,14 @@
         )
 
         print()
         print(out)
 
     def test_block_program_zero(self) -> None:
         "Decompress a list of CSEs"
-        self.maxDiff = None
         cse1 = binutils.assemble(  # type: ignore[no-untyped-call]
             "(((0x0000000000000000000000000000000000000000000000000000000000000000 0x0186a0) (0xb081963921826355dcb6c355ccf9c2637c18adf7d38ee44d803ea9ca41587e48c913d8d46896eb830aeadfc13144a8eac3 (() (q (51 0x6b7a83babea1eec790c947db4464ab657dbe9b887fe9acc247062847b8c2a8a9 0x0186a0)) ()))))"
         )
         cse2 = binutils.assemble(  # type: ignore[no-untyped-call]
             """
 (
   ((0x0000000000000000000000000000000000000000000000000000000000000000 0x0186a0)
@@ -283,15 +271,14 @@
             ],
         )
 
         print()
         print(out)
 
     def test_block_program_zero_with_curry(self) -> None:
-        self.maxDiff = None
         cse1 = binutils.assemble(  # type: ignore[no-untyped-call]
             "(((0x0000000000000000000000000000000000000000000000000000000000000000 0x0186a0) (0xb081963921826355dcb6c355ccf9c2637c18adf7d38ee44d803ea9ca41587e48c913d8d46896eb830aeadfc13144a8eac3 (() (q (51 0x6b7a83babea1eec790c947db4464ab657dbe9b887fe9acc247062847b8c2a8a9 0x0186a0)) ()))))"
         )
         cse2 = binutils.assemble(  # type: ignore[no-untyped-call]
             """
 (
   ((0x0000000000000000000000000000000000000000000000000000000000000000 0x0186a0)
```

### Comparing `chia-blockchain-2.0.0b1/tests/generator/test_generator_types.py` & `chia-blockchain-2.0.0b3/tests/generator/test_generator_types.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/generator/test_rom.py` & `chia-blockchain-2.0.0b3/tests/generator/test_rom.py`

 * *Files 6% similar despite different names*

```diff
@@ -36,33 +36,18 @@
        (second-block deserialize-mod historical-generators)
     ))
     (go deserialize-mod historical-generators)
 )
 """
 
 
-COMPILED_GENERATOR_CODE = bytes.fromhex(
-    "ff02ffff01ff04ffff02ff04ffff04ff02ffff04ff05ffff04ff0bff8080808080ffff02"
-    "ff06ffff04ff02ffff04ff05ffff04ff0bff808080808080ffff04ffff01ffff02ff05ff"
-    "1380ff02ff05ff2b80ff018080"
-)
-
 COMPILED_GENERATOR_CODE = bytes(Program.to(compile_clvm_text(GENERATOR_CODE, [])))  # type: ignore[no-untyped-call]
 
 FIRST_GENERATOR = Program.to(
     binutils.assemble(  # type: ignore[no-untyped-call]
-        '((parent_id (c 1 (q "puzzle blob")) 50000 "solution is here" extra data for coin))'
-    )
-).as_bin()
-
-SECOND_GENERATOR = Program.to(binutils.assemble("(extra data for block)")).as_bin()  # type: ignore[no-untyped-call]
-
-
-FIRST_GENERATOR = Program.to(
-    binutils.assemble(  # type: ignore[no-untyped-call]
         """
         ((0x0000000000000000000000000000000000000000000000000000000000000000 1 50000
         ((51 0x0000000000000000000000000000000000000000000000000000000000000001 500))
         "extra" "data" "for" "coin" ))"""
     )
 ).as_bin()
```

### Comparing `chia-blockchain-2.0.0b1/tests/generator/test_scan.py` & `chia-blockchain-2.0.0b3/tests/generator/test_scan.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/plot_sync/test_delta.py` & `chia-blockchain-2.0.0b3/tests/plot_sync/test_delta.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/plot_sync/test_plot_sync.py` & `chia-blockchain-2.0.0b3/tests/plot_sync/test_plot_sync.py`

 * *Files 1% similar despite different names*

```diff
@@ -7,16 +7,18 @@
 from shutil import copy
 from typing import Any, Callable, List, Optional, Tuple
 
 import pytest
 import pytest_asyncio
 from blspy import G1Element
 
-from chia.farmer.farmer_api import Farmer
+from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
 from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
 from chia.plot_sync.delta import Delta, PathListDelta, PlotListDelta
 from chia.plot_sync.receiver import Receiver
 from chia.plot_sync.sender import Sender
 from chia.plot_sync.util import Constants, State
 from chia.plotting.manager import PlotManager
 from chia.plotting.util import add_plot_directory, remove_plot_directory
 from chia.protocols.harvester_protocol import Plot
@@ -104,16 +106,16 @@
         self.duplicates_count -= len(list_paths)
         self.duplicates_delta.removals += [str(x) for x in list_paths]
 
 
 @dataclass
 class Environment:
     root_path: Path
-    harvester_services: List[Service[Harvester]]
-    farmer_service: Service[Farmer]
+    harvester_services: List[Service[Harvester, HarvesterAPI]]
+    farmer_service: Service[Farmer, FarmerAPI]
     harvesters: List[Harvester]
     farmer: Farmer
     dir_1: Directory
     dir_2: Directory
     dir_3: Directory
     dir_4: Directory
     dir_invalid: Directory
@@ -268,15 +270,18 @@
             self.harvesters[index].plot_manager._refresh_thread is not None
             and len(self.harvesters[index].plot_manager.farmer_public_keys) > 0
         )
 
 
 @pytest_asyncio.fixture(scope="function")
 async def environment(
-    tmp_path: Path, farmer_two_harvester_not_started: Tuple[List[Service[Harvester]], Service[Farmer], BlockTools]
+    tmp_path: Path,
+    farmer_two_harvester_not_started: Tuple[
+        List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools
+    ],
 ) -> Environment:
     def new_test_dir(name: str, plot_list: List[Path]) -> Directory:
         return Directory(tmp_path / "plots" / name, plot_list)
 
     plots: List[Path] = get_test_plots()
     plots_invalid: List[Path] = get_test_plots()[0:3]
     plots_keys_missing: List[Path] = get_test_plots("not_in_keychain")
@@ -554,15 +559,15 @@
         assert len(plot_manager.failed_to_open_filenames) == len(receiver.invalid()) == expected.invalid_count
         assert len(plot_manager.no_key_filenames) == len(receiver.keys_missing()) == expected.keys_missing_count
         assert len(plot_manager.get_duplicates()) == len(receiver.duplicates()) == expected.duplicates_count
 
 
 @pytest.mark.asyncio
 async def test_sync_start_and_disconnect_while_sync_is_active(
-    farmer_one_harvester: Tuple[List[Service[Harvester]], Service[Farmer], BlockTools]
+    farmer_one_harvester: Tuple[List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools]
 ) -> None:
     harvesters, farmer_service, _ = farmer_one_harvester
     harvester_service = harvesters[0]
     harvester = harvester_service._node
     farmer: Farmer = farmer_service._node
     Constants.message_timeout = 3
```

### Comparing `chia-blockchain-2.0.0b1/tests/plot_sync/test_receiver.py` & `chia-blockchain-2.0.0b3/tests/plot_sync/test_receiver.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/plot_sync/test_sender.py` & `chia-blockchain-2.0.0b3/tests/plot_sync/test_sender.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/plot_sync/test_sync_simulated.py` & `chia-blockchain-2.0.0b3/tests/plot_sync/test_sync_simulated.py`

 * *Files 2% similar despite different names*

```diff
@@ -9,31 +9,33 @@
 from pathlib import Path
 from secrets import token_bytes
 from typing import Any, Dict, List, Optional, Set, Tuple
 
 import pytest
 from blspy import G1Element
 
-from chia.farmer.farmer_api import Farmer
+from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
 from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
 from chia.plot_sync.receiver import Receiver
 from chia.plot_sync.sender import Sender
 from chia.plot_sync.util import Constants
 from chia.plotting.manager import PlotManager
 from chia.plotting.util import PlotInfo
 from chia.protocols.harvester_protocol import PlotSyncError, PlotSyncResponse
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.server.outbound_message import make_msg
 from chia.server.start_service import Service
 from chia.server.ws_connection import WSChiaConnection
 from chia.simulator.block_tools import BlockTools
 from chia.simulator.time_out_assert import time_out_assert
 from chia.types.blockchain_format.sized_bytes import bytes32
-from chia.util.generator_tools import list_to_batches
 from chia.util.ints import int16, uint64
+from chia.util.misc import to_batches
 from tests.plot_sync.util import start_harvester_service
 
 log = logging.getLogger(__name__)
 
 
 class ErrorSimulation(Enum):
     DropEveryFourthMessage = 1
@@ -103,16 +105,16 @@
         def run_internal() -> None:
             nonlocal sync_id
             # Simulate one plot manager refresh cycle by calling the methods directly.
             self.harvester.plot_sync_sender.sync_start(len(loaded), initial)
             sync_id = self.plot_sync_sender._sync_id
             if len(loaded) == 0:
                 self.harvester.plot_sync_sender.process_batch([], 0)
-            for remaining, batch in list_to_batches(loaded, batch_size):
-                self.harvester.plot_sync_sender.process_batch(batch, remaining)
+            for batch in to_batches(loaded, batch_size):
+                self.harvester.plot_sync_sender.process_batch(batch.entries, batch.remaining)
             self.harvester.plot_sync_sender.sync_done(removed_paths, 0)
 
         await self.event_loop.run_in_executor(None, run_internal)
 
         async def sync_done() -> bool:
             assert sync_id is not None
             return self.plot_sync_receiver.last_sync().sync_id == self.plot_sync_sender._last_sync_id == sync_id
@@ -235,16 +237,16 @@
 ) -> None:
     if await skip_processing(self, peer, message_type, message):
         return
     await self.original_process(peer, message_type, message)
 
 
 async def create_test_runner(
-    harvester_services: List[Service[Harvester]],
-    farmer_service: Service[Farmer],
+    harvester_services: List[Service[Harvester, HarvesterAPI]],
+    farmer_service: Service[Farmer, FarmerAPI],
     event_loop: asyncio.events.AbstractEventLoop,
 ) -> TestRunner:
     await farmer_service.start()
     farmer: Farmer = farmer_service._node
     assert len(farmer.plot_sync_receivers) == 0
     harvesters: List[Harvester] = [
         await start_harvester_service(service, farmer_service) for service in harvester_services
@@ -284,15 +286,17 @@
         )
         for x in range(0, count)
     ]
 
 
 @pytest.mark.asyncio
 async def test_sync_simulated(
-    farmer_three_harvester_not_started: Tuple[List[Service[Harvester]], Service[Farmer], BlockTools],
+    farmer_three_harvester_not_started: Tuple[
+        List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools
+    ],
     event_loop: asyncio.events.AbstractEventLoop,
 ) -> None:
     harvester_services, farmer_service, _ = farmer_three_harvester_not_started
     farmer: Farmer = farmer_service._node
     test_runner: TestRunner = await create_test_runner(harvester_services, farmer_service, event_loop)
     plots = create_example_plots(31000)
 
@@ -363,15 +367,17 @@
         ErrorSimulation.DropThreeMessages,
         ErrorSimulation.RespondTooLateEveryFourthMessage,
         ErrorSimulation.RespondTwice,
     ],
 )
 @pytest.mark.asyncio
 async def test_farmer_error_simulation(
-    farmer_one_harvester_not_started: Tuple[List[Service[Harvester]], Service[Farmer], BlockTools],
+    farmer_one_harvester_not_started: Tuple[
+        List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools
+    ],
     event_loop: asyncio.events.AbstractEventLoop,
     simulate_error: ErrorSimulation,
 ) -> None:
     Constants.message_timeout = 5
     harvester_services, farmer_service, _ = farmer_one_harvester_not_started
     test_runner: TestRunner = await create_test_runner(harvester_services, farmer_service, event_loop)
     batch_size = test_runner.test_data[0].harvester.plot_manager.refresh_parameter.batch_size
@@ -388,15 +394,17 @@
         initial=True,
     )
 
 
 @pytest.mark.parametrize("simulate_error", [ErrorSimulation.NonRecoverableError, ErrorSimulation.NotConnected])
 @pytest.mark.asyncio
 async def test_sync_reset_cases(
-    farmer_one_harvester_not_started: Tuple[List[Service[Harvester]], Service[Farmer], BlockTools],
+    farmer_one_harvester_not_started: Tuple[
+        List[Service[Harvester, HarvesterAPI]], Service[Farmer, FarmerAPI], BlockTools
+    ],
     event_loop: asyncio.events.AbstractEventLoop,
     simulate_error: ErrorSimulation,
 ) -> None:
     harvester_services, farmer_service, _ = farmer_one_harvester_not_started
     test_runner: TestRunner = await create_test_runner(harvester_services, farmer_service, event_loop)
     test_data: TestData = test_runner.test_data[0]
     plot_manager: PlotManager = test_data.harvester.plot_manager
```

### Comparing `chia-blockchain-2.0.0b1/tests/plot_sync/util.py` & `chia-blockchain-2.0.0b3/tests/plot_sync/util.py`

 * *Files 7% similar despite different names*

```diff
@@ -2,15 +2,17 @@
 
 import time
 from dataclasses import dataclass
 from secrets import token_bytes
 from typing import Optional
 
 from chia.farmer.farmer import Farmer
+from chia.farmer.farmer_api import FarmerAPI
 from chia.harvester.harvester import Harvester
+from chia.harvester.harvester_api import HarvesterAPI
 from chia.plot_sync.sender import Sender
 from chia.protocols.harvester_protocol import PlotSyncIdentifier
 from chia.server.outbound_message import Message, NodeType
 from chia.server.start_service import Service
 from chia.simulator.time_out_assert import time_out_assert
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.peer_info import PeerInfo, UnresolvedPeerInfo
@@ -32,15 +34,17 @@
     return WSChiaConnectionDummy(node_type, bytes32(token_bytes(32)) if peer_id is None else peer_id)
 
 
 def plot_sync_identifier(current_sync_id: uint64, message_id: uint64) -> PlotSyncIdentifier:
     return PlotSyncIdentifier(uint64(int(time.time())), current_sync_id, message_id)
 
 
-async def start_harvester_service(harvester_service: Service[Harvester], farmer_service: Service[Farmer]) -> Harvester:
+async def start_harvester_service(
+    harvester_service: Service[Harvester, HarvesterAPI], farmer_service: Service[Farmer, FarmerAPI]
+) -> Harvester:
     # Set the `last_refresh_time` of the plot manager to avoid initial plot loading
     harvester: Harvester = harvester_service._node
     harvester.plot_manager.last_refresh_time = time.time()
     harvester_service.reconnect_retry_seconds = 1
     await harvester_service.start()
     harvester_service.add_peer(UnresolvedPeerInfo(str(farmer_service.self_hostname), farmer_service._server.get_port()))
     harvester.plot_manager.stop_refreshing()
```

### Comparing `chia-blockchain-2.0.0b1/tests/plotting/test_plot_manager.py` & `chia-blockchain-2.0.0b3/tests/plotting/test_plot_manager.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/pools/test_pool_cmdline.py` & `chia-blockchain-2.0.0b3/tests/pools/test_pool_cmdline.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/pools/test_pool_config.py` & `chia-blockchain-2.0.0b3/tests/pools/test_pool_config.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/pools/test_pool_puzzles_lifecycle.py` & `chia-blockchain-2.0.0b3/tests/pools/test_pool_puzzles_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/pools/test_pool_rpc.py` & `chia-blockchain-2.0.0b3/tests/pools/test_pool_rpc.py`

 * *Files 1% similar despite different names*

```diff
@@ -32,14 +32,15 @@
 from chia.util.byte_types import hexstr_to_bytes
 from chia.util.config import load_config
 from chia.util.ints import uint16, uint32, uint64
 from chia.wallet.derive_keys import find_authentication_sk, find_owner_sk
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet_node import WalletNode
+from chia.wallet.wallet_node_api import WalletNodeAPI
 
 # TODO: Compare deducted fees in all tests against reported total_fee
 
 log = logging.getLogger(__name__)
 FEE_AMOUNT = uint64(29_000)
 MAX_WAIT_SECS = 30  # A high value for WAIT_SECS is useful when paused in the debugger
 
@@ -132,15 +133,17 @@
 
 
 Setup = Tuple[FullNodeSimulator, WalletNode, bytes32, int, WalletRpcClient]
 
 
 @pytest_asyncio.fixture(scope="function")
 async def setup(
-    one_wallet_and_one_simulator_services: Tuple[List[Service[FullNode]], List[Service[WalletNode]], BlockTools],
+    one_wallet_and_one_simulator_services: Tuple[
+        List[Service[FullNode, FullNodeSimulator]], List[Service[WalletNode, WalletNodeAPI]], BlockTools
+    ],
     trusted: bool,
     self_hostname: str,
 ) -> AsyncIterator[Setup]:
     rmtree(get_pool_plot_dir(), ignore_errors=True)
     [full_node_service], [wallet_service], bt = one_wallet_and_one_simulator_services
     full_node_api: FullNodeSimulator = full_node_service._api
     wallet_node = wallet_service._node
```

### Comparing `chia-blockchain-2.0.0b1/tests/pools/test_pool_wallet.py` & `chia-blockchain-2.0.0b3/tests/pools/test_pool_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/pools/test_wallet_pool_store.py` & `chia-blockchain-2.0.0b3/tests/pools/test_wallet_pool_store.py`

 * *Files 23% similar despite different names*

```diff
@@ -1,41 +1,64 @@
 from __future__ import annotations
 
+from dataclasses import dataclass, field
 from secrets import token_bytes
-from typing import Optional
+from typing import Dict, List, Optional
 
 import pytest
 from clvm_tools import binutils
 
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend, compute_additions
-from chia.util.ints import uint64
+from chia.util.ints import uint32, uint64
 from chia.wallet.wallet_pool_store import WalletPoolStore
 from tests.util.db_connection import DBConnection
 
 
-def make_child_solution(coin_spend: CoinSpend, new_coin: Optional[Coin] = None) -> CoinSpend:
+def make_child_solution(coin_spend: Optional[CoinSpend], new_coin: Optional[Coin] = None) -> CoinSpend:
     new_puzzle_hash: bytes32 = bytes32(token_bytes(32))
     solution = "()"
     puzzle = f"(q . ((51 0x{new_puzzle_hash.hex()} 1)))"
     puzzle_prog = Program.to(binutils.assemble(puzzle))
     solution_prog = Program.to(binutils.assemble(solution))
     if new_coin is None:
+        assert coin_spend is not None
         new_coin = compute_additions(coin_spend)[0]
     sol: CoinSpend = CoinSpend(
         new_coin,
         SerializedProgram.from_program(puzzle_prog),
         SerializedProgram.from_program(solution_prog),
     )
     return sol
 
 
+async def assert_db_spends(store: WalletPoolStore, wallet_id: int, spends: List[CoinSpend]) -> None:
+    db_spends = await store.get_spends_for_wallet(wallet_id)
+    assert len(db_spends) == len(spends)
+    for spend, (_, db_spend) in zip(spends, db_spends):
+        assert spend == db_spend
+
+
+@dataclass
+class DummySpends:
+    spends_per_wallet: Dict[int, List[CoinSpend]] = field(default_factory=dict)
+
+    def generate(self, wallet_id: int, count: int) -> None:
+        current = self.spends_per_wallet.setdefault(wallet_id, [])
+        for _ in range(count):
+            coin = None
+            last_spend = None if len(current) == 0 else current[-1]
+            if last_spend is None:
+                coin = Coin(token_bytes(32), token_bytes(32), uint64(12312))
+            current.append(make_child_solution(last_spend, coin))
+
+
 class TestWalletPoolStore:
     @pytest.mark.asyncio
     async def test_store(self):
         async with DBConnection(1) as db_wrapper:
             store = await WalletPoolStore.create(db_wrapper)
 
             try:
@@ -103,7 +126,27 @@
                 await store.add_spend(1, solution_1, 105)
 
             await store.add_spend(1, solution_4, 105)
             solution_5: CoinSpend = make_child_solution(solution_4)
             await store.add_spend(1, solution_5, 105)
             await store.rollback(99, 1)
             assert await store.get_spends_for_wallet(1) == []
+
+
+@pytest.mark.asyncio
+async def test_delete_wallet() -> None:
+    dummy_spends = DummySpends()
+    for i in range(5):
+        dummy_spends.generate(i, i * 5)
+    async with DBConnection(1) as db_wrapper:
+        store = await WalletPoolStore.create(db_wrapper)
+        # Add the spends per wallet and verify them
+        for wallet_id, spends in dummy_spends.spends_per_wallet.items():
+            for i, spend in enumerate(spends):
+                await store.add_spend(wallet_id, spend, uint32(i + wallet_id))
+            await assert_db_spends(store, wallet_id, spends)
+        # Remove one wallet after the other and verify before and after each
+        for wallet_id, spends in dummy_spends.spends_per_wallet.items():
+            # Assert the existence again here to make sure the previous removals did not affect other wallet_ids
+            await assert_db_spends(store, wallet_id, spends)
+            await store.delete_wallet(wallet_id)
+            await assert_db_spends(store, wallet_id, [])
```

### Comparing `chia-blockchain-2.0.0b1/tests/simulation/test_simulation.py` & `chia-blockchain-2.0.0b3/tests/simulation/test_simulation.py`

 * *Files 1% similar despite different names*

```diff
@@ -11,15 +11,15 @@
 from chia.full_node.full_node import FullNode
 from chia.server.outbound_message import NodeType
 from chia.server.server import ChiaServer
 from chia.server.start_service import Service
 from chia.simulator.block_tools import BlockTools, create_block_tools_async, test_constants
 from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.keyring import TempKeyring
-from chia.simulator.setup_nodes import SimulatorsAndWallets, setup_full_system
+from chia.simulator.setup_nodes import SimulatorsAndWallets
 from chia.simulator.setup_services import setup_full_node
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol, GetAllCoinsProtocol, ReorgProtocol
 from chia.simulator.time_out_assert import time_out_assert
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.peer_info import PeerInfo
 from chia.util.ints import uint16, uint32, uint64
 from chia.wallet.wallet_node import WalletNode
@@ -54,20 +54,14 @@
             self_hostname,
             b_tools,
             db_version=1,
         ):
             yield service._api
 
 
-@pytest_asyncio.fixture(scope="function")
-async def simulation(bt):
-    async for _ in setup_full_system(test_constants_modified, bt, db_version=1):
-        yield _
-
-
 class TestSimulation:
     @pytest.mark.asyncio
     async def test_simulation_1(self, simulation, extra_node, self_hostname):
         node1, node2, _, _, _, _, _, _, _, sanitizer_server = simulation
         server1: ChiaServer = node1.full_node.server
 
         node1_port: uint16 = server1.get_port()
```

### Comparing `chia-blockchain-2.0.0b1/tests/simulation/test_simulator.py` & `chia-blockchain-2.0.0b3/tests/simulation/test_simulator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/simulation/test_start_simulator.py` & `chia-blockchain-2.0.0b3/tests/simulation/test_start_simulator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/1315537.json` & `chia-blockchain-2.0.0b3/tests/tools/1315537.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/1315544.json` & `chia-blockchain-2.0.0b3/tests/tools/1315544.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/1315630.json` & `chia-blockchain-2.0.0b3/tests/tools/1315630.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/300000.json` & `chia-blockchain-2.0.0b3/tests/tools/300000.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/442734.json` & `chia-blockchain-2.0.0b3/tests/tools/442734.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/466212.json` & `chia-blockchain-2.0.0b3/tests/tools/466212.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/test-blockchain-db.sqlite` & `chia-blockchain-2.0.0b3/tests/tools/test-blockchain-db.sqlite`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/test_full_sync.py` & `chia-blockchain-2.0.0b3/tests/tools/test_full_sync.py`

 * *Files 24% similar despite different names*

```diff
@@ -8,15 +8,15 @@
 
 import pytest
 
 from tools.test_full_sync import run_sync_test
 
 
 @pytest.mark.parametrize("keep_up", [True, False])
-def test_full_sync_test(keep_up: bool):
+def test_full_sync_test(keep_up: bool) -> None:
     file_path = os.path.realpath(__file__)
     db_file = Path(file_path).parent / "test-blockchain-db.sqlite"
     asyncio.run(
         run_sync_test(
             db_file,
             db_version=2,
             profile=False,
```

### Comparing `chia-blockchain-2.0.0b1/tests/tools/test_legacy_keyring.py` & `chia-blockchain-2.0.0b3/tests/tools/test_legacy_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/tools/test_run_block.py` & `chia-blockchain-2.0.0b3/tests/tools/test_run_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/benchmark_cost.py` & `chia-blockchain-2.0.0b3/tests/util/benchmark_cost.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/bip39_test_vectors.json` & `chia-blockchain-2.0.0b3/tests/util/bip39_test_vectors.json`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/blockchain.py` & `chia-blockchain-2.0.0b3/tests/util/blockchain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/build_network_protocol_files.py` & `chia-blockchain-2.0.0b3/tests/util/build_network_protocol_files.py`

 * *Files 2% similar despite different names*

```diff
@@ -15,15 +15,15 @@
 tests_dir = Path(__file__).resolve().parent
 
 
 def get_network_protocol_filename() -> Path:
     return tests_dir / Path("protocol_messages_bytes-v" + version)
 
 
-def encode_data(data) -> bytes:
+def encode_data(data: Any) -> bytes:
     data_bytes = bytes(data)
     size = uint32(len(data_bytes))
     return size.to_bytes(4, "big") + data_bytes
 
 
 def visit_farmer_protocol(visitor: Callable[[Any, str], None]) -> None:
     visitor(new_signage_point, "new_signage_point")
@@ -160,19 +160,22 @@
 
     return result
 
 
 def build_protocol_test() -> str:
     result = """# this file is generated by build_network_protocol_files.py
 
-from typing import Tuple
+from __future__ import annotations
+
 from pathlib import Path
+from typing import Tuple
+
+from tests.util.build_network_protocol_files import get_network_protocol_filename
 from tests.util.network_protocol_data import *  # noqa: F403
 from tests.util.protocol_messages_json import *  # noqa: F403
-from tests.util.build_network_protocol_files import get_network_protocol_filename
 
 
 def parse_blob(input_bytes: bytes) -> Tuple[bytes, bytes]:
     size_bytes = input_bytes[:4]
     input_bytes = input_bytes[4:]
     size = int.from_bytes(size_bytes, "big")
     message_bytes = input_bytes[:size]
@@ -185,31 +188,37 @@
     filename: Path = get_network_protocol_filename()
     assert filename.exists()
     with open(filename, "rb") as f:
         input_bytes = f.read()
 
 """
 
+    counter = 0
+
     def visitor(obj: Any, name: str) -> None:
         nonlocal result
+        nonlocal counter
         result += f"""    message_bytes, input_bytes = parse_blob(input_bytes)
-    message = type({name}).from_bytes(message_bytes)
-    assert message == {name}
-    assert bytes(message) == bytes({name})
+    message_{counter} = type({name}).from_bytes(message_bytes)
+    assert message_{counter} == {name}
+    assert bytes(message_{counter}) == bytes({name})
 
 """
+        counter += 1
 
     visit_all_messages(visitor)
 
     result += '    assert input_bytes == b""\n'
     return result
 
 
 def get_protocol_json() -> str:
     result = """# this file is generated by build_network_protocol_files.py
+from __future__ import annotations
+
 from typing import Any, Dict
 """
     counter = 0
 
     def visitor(obj: Any, name: str) -> None:
         nonlocal result
         nonlocal counter
@@ -220,14 +229,16 @@
 
     return result
 
 
 def build_json_test() -> str:
     result = """# this file is generated by build_network_protocol_files.py
 
+from __future__ import annotations
+
 from tests.util.network_protocol_data import *  # noqa: F403
 from tests.util.protocol_messages_json import *  # noqa: F403
 
 
 def test_protocol_json() -> None:
 """
     counter = 0
@@ -240,15 +251,15 @@
         counter += 1
 
     visit_all_messages(visitor)
 
     return result
 
 
-if __name__ == "__main__":
+def main() -> None:
     get_network_protocol_filename().write_bytes(get_protocol_bytes())
 
     name_to_function = {
         "test_network_protocol_files.py": build_protocol_test,
         "protocol_messages_json.py": get_protocol_json,
         "test_network_protocol_json.py": build_json_test,
     }
@@ -260,7 +271,11 @@
         path.write_text(function())
         # black seems to have trouble when run as a module so not using `python -m black`
         subprocess.run(
             [scripts_path.joinpath("black"), os.fspath(path.relative_to(tests_dir))],
             check=True,
             cwd=tests_dir,
         )
+
+
+if __name__ == "__main__":
+    main()
```

### Comparing `chia-blockchain-2.0.0b1/tests/util/gen_ssl_certs.py` & `chia-blockchain-2.0.0b3/tests/util/gen_ssl_certs.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/generator_tools_testing.py` & `chia-blockchain-2.0.0b3/tests/util/generator_tools_testing.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/key_tool.py` & `chia-blockchain-2.0.0b3/tests/util/key_tool.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/misc.py` & `chia-blockchain-2.0.0b3/tests/util/misc.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,26 +1,27 @@
 from __future__ import annotations
 
 import contextlib
 import dataclasses
 import enum
+import functools
 import gc
 import math
 import os
 import subprocess
 from concurrent.futures import Future
 from inspect import getframeinfo, stack
 from statistics import mean
 from textwrap import dedent
 from time import thread_time
 from types import TracebackType
-from typing import Any, Callable, Iterator, List, Optional, Type, Union
+from typing import Any, Callable, Collection, Iterator, List, Optional, Type, Union
 
 import pytest
-from typing_extensions import final
+from typing_extensions import Protocol, final
 
 from tests.core.data_layer.util import ChiaRoot
 
 
 class GcMode(enum.Enum):
     nothing = enum.auto
     precollect = enum.auto
@@ -299,7 +300,35 @@
             yield process
         finally:
             process.terminate()
             try:
                 process.wait(timeout=10)
             except subprocess.TimeoutExpired:
                 process.kill()
+
+
+# https://github.com/pytest-dev/pytest/blob/7.3.1/src/_pytest/mark/__init__.py#L45
+Marks = Union[pytest.MarkDecorator, Collection[Union[pytest.MarkDecorator, pytest.Mark]]]
+
+
+class DataCase(Protocol):
+    marks: Marks
+
+    @property
+    def id(self) -> str:
+        ...
+
+
+def datacases(*cases: DataCase, _name: str = "case") -> pytest.MarkDecorator:
+    return pytest.mark.parametrize(
+        argnames=_name,
+        argvalues=[pytest.param(case, id=case.id, marks=case.marks) for case in cases],
+    )
+
+
+class DataCasesDecorator(Protocol):
+    def __call__(self, *cases: DataCase, _name: str = "case") -> pytest.MarkDecorator:
+        ...
+
+
+def named_datacases(name: str) -> DataCasesDecorator:
+    return functools.partial(datacases, _name=name)
```

### Comparing `chia-blockchain-2.0.0b1/tests/util/network_protocol_data.py` & `chia-blockchain-2.0.0b3/tests/util/network_protocol_data.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/protocol_messages_bytes-v1.0` & `chia-blockchain-2.0.0b3/tests/util/protocol_messages_bytes-v1.0`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/protocol_messages_json.py` & `chia-blockchain-2.0.0b3/tests/util/protocol_messages_json.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/rpc.py` & `chia-blockchain-2.0.0b3/tests/util/rpc.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_full_block_utils.py` & `chia-blockchain-2.0.0b3/tests/util/test_full_block_utils.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_limited_semaphore.py` & `chia-blockchain-2.0.0b3/tests/util/test_limited_semaphore.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_logging_filter.py` & `chia-blockchain-2.0.0b3/tests/util/test_logging_filter.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_network.py` & `chia-blockchain-2.0.0b3/tests/util/test_network.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_network_protocol_files.py` & `chia-blockchain-2.0.0b3/tests/util/test_network_protocol_files.py`

 * *Files 0% similar despite different names*

```diff
@@ -12,15 +12,15 @@
 
 def parse_blob(input_bytes: bytes) -> Tuple[bytes, bytes]:
     size_bytes = input_bytes[:4]
     input_bytes = input_bytes[4:]
     size = int.from_bytes(size_bytes, "big")
     message_bytes = input_bytes[:size]
     input_bytes = input_bytes[size:]
-    return message_bytes, input_bytes
+    return (message_bytes, input_bytes)
 
 
 def test_protocol_bytes() -> None:
     filename: Path = get_network_protocol_filename()
     assert filename.exists()
     with open(filename, "rb") as f:
         input_bytes = f.read()
```

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_network_protocol_json.py` & `chia-blockchain-2.0.0b3/tests/util/test_network_protocol_json.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_network_protocol_test.py` & `chia-blockchain-2.0.0b3/tests/util/test_network_protocol_test.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_paginator.py` & `chia-blockchain-2.0.0b3/tests/util/test_paginator.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_pprint.py` & `chia-blockchain-2.0.0b3/tests/util/test_pprint.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_struct_stream.py` & `chia-blockchain-2.0.0b3/tests/util/test_struct_stream.py`

 * *Files 15% similar despite different names*

```diff
@@ -37,58 +37,58 @@
 @dataclass(frozen=True)
 class Good:
     name: str
     cls: Type[StructStream]
     size: int
     bits: int
     signed: bool
-    maximum_exclusive: int
+    maximum: int
     minimum: int
 
     @classmethod
     def create(
         cls,
         name: str,
         size: int,
         signed: bool,
-        maximum_exclusive: int,
+        maximum: int,
         minimum: int,
     ) -> Good:
         raw_class: Type[StructStream] = type(name, (StructStream,), {})
         parsed_cls = parse_metadata_from_name(raw_class)
         return cls(
             name=name,
             cls=parsed_cls,
             size=size,
             bits=size * 8,
             signed=signed,
-            maximum_exclusive=maximum_exclusive,
+            maximum=maximum,
             minimum=minimum,
         )
 
 
 good_classes = [
-    Good.create(name="uint8", size=1, signed=False, maximum_exclusive=0xFF + 1, minimum=0),
-    Good.create(name="int8", size=1, signed=True, maximum_exclusive=0x80, minimum=-0x80),
-    Good.create(name="uint16", size=2, signed=False, maximum_exclusive=0xFFFF + 1, minimum=0),
-    Good.create(name="int16", size=2, signed=True, maximum_exclusive=0x8000, minimum=-0x8000),
-    Good.create(name="uint24", size=3, signed=False, maximum_exclusive=0xFFFFFF + 1, minimum=0),
-    Good.create(name="int24", size=3, signed=True, maximum_exclusive=0x800000, minimum=-0x800000),
+    Good.create(name="uint8", size=1, signed=False, maximum=0xFF, minimum=0),
+    Good.create(name="int8", size=1, signed=True, maximum=0x7F, minimum=-0x80),
+    Good.create(name="uint16", size=2, signed=False, maximum=0xFFFF, minimum=0),
+    Good.create(name="int16", size=2, signed=True, maximum=0x7FFF, minimum=-0x8000),
+    Good.create(name="uint24", size=3, signed=False, maximum=0xFFFFFF, minimum=0),
+    Good.create(name="int24", size=3, signed=True, maximum=0x7FFFFF, minimum=-0x800000),
     Good.create(
         name="uint128",
         size=16,
         signed=False,
-        maximum_exclusive=0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF + 1,
+        maximum=0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,
         minimum=0,
     ),
     Good.create(
         name="int128",
         size=16,
         signed=True,
-        maximum_exclusive=0x80000000000000000000000000000000,
+        maximum=0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,
         minimum=-0x80000000000000000000000000000000,
     ),
 ]
 
 
 @pytest.fixture(
     name="good",
@@ -141,14 +141,17 @@
             assert bytes_io.getvalue() == struct.pack(struct_format, upper_boundary)
 
             with pytest.raises(struct.error):
                 struct.pack(struct_format, lower_boundary - 1)
             with pytest.raises(struct.error):
                 struct.pack(struct_format, upper_boundary + 1)
 
+        assert type(cls.MINIMUM) == cls
+        assert type(cls.MAXIMUM) == cls
+
     def test_int512(self) -> None:
         # int512 is special. it uses 65 bytes to allow positive and negative
         # "uint512"
         self._test_impl(
             int512,
             0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,  # noqa: E501
             -0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF,  # noqa: E501
@@ -241,15 +244,15 @@
     def test_uint32_from_str(self) -> None:
         assert uint32("43") == 43
 
     def test_uint32_from_bytes(self) -> None:
         assert uint32(b"273") == 273
 
     def test_struct_stream_cannot_be_instantiated_directly(self) -> None:
-        with pytest.raises(ValueError, match="does not fit"):
+        with pytest.raises(AttributeError, match="object has no attribute"):
             StructStream(0)
 
     @pytest.mark.parametrize(
         argnames="bad_name",
         argvalues=dataclass_parameters(
             instances=[
                 BadName(name="uint", error="expected integer suffix but got: ''"),
@@ -277,11 +280,11 @@
     def test_parse_metadata_from_name_correct_bits(self, good: Good) -> None:
         assert good.cls.BITS == good.bits
 
     def test_parse_metadata_from_name_correct_signedness(self, good: Good) -> None:
         assert good.cls.SIGNED == good.signed
 
     def test_parse_metadata_from_name_correct_maximum(self, good: Good) -> None:
-        assert good.cls.MAXIMUM_EXCLUSIVE == good.maximum_exclusive
+        assert good.cls.MAXIMUM == good.maximum
 
     def test_parse_metadata_from_name_correct_minimum(self, good: Good) -> None:
         assert good.cls.MINIMUM == good.minimum
```

### Comparing `chia-blockchain-2.0.0b1/tests/util/test_trusted_peer.py` & `chia-blockchain-2.0.0b3/tests/util/test_trusted_peer.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_cat_lifecycle.py` & `chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_cat_lifecycle.py`

 * *Files 1% similar despite different names*

```diff
@@ -12,20 +12,20 @@
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.types.spend_bundle import SpendBundle
 from chia.util.errors import Err
 from chia.util.ints import uint64
 from chia.wallet.cat_wallet.cat_utils import (
+    CAT_MOD,
     SpendableCAT,
     construct_cat_puzzle,
     unsigned_spend_bundle_for_spendable_cats,
 )
 from chia.wallet.lineage_proof import LineageProof
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.puzzles.tails import DelegatedLimitations, EverythingWithSig, GenesisById, GenesisByPuzhash
 from tests.clvm.benchmark_costs import cost_of_spend_bundle
 from tests.clvm.test_puzzles import secret_exponent_for_index
 
 acs = Program.to(1)
 acs_ph = acs.get_tree_hash()
 NO_LINEAGE_PROOF = LineageProof()
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_cat_outer_puzzle.py` & `chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_cat_outer_puzzle.py`

 * *Files 1% similar despite different names*

```diff
@@ -7,18 +7,17 @@
 
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.serialized_program import SerializedProgram
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.util.ints import uint64
-from chia.wallet.cat_wallet.cat_utils import construct_cat_puzzle
+from chia.wallet.cat_wallet.cat_utils import CAT_MOD, construct_cat_puzzle
 from chia.wallet.outer_puzzles import construct_puzzle, get_inner_puzzle, get_inner_solution, match_puzzle, solve_puzzle
 from chia.wallet.puzzle_drivers import PuzzleInfo, Solver
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.uncurried_puzzle import uncurry_puzzle
 
 
 def test_cat_outer_puzzle() -> None:
     ACS = Program.to(1)
     tail = bytes32([0] * 32)
     cat_puzzle: Program = construct_cat_puzzle(CAT_MOD, tail, ACS)
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_cat_wallet.py` & `chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_cat_wallet.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,40 +1,44 @@
 from __future__ import annotations
 
 import asyncio
+import tempfile
+from pathlib import Path
 from typing import List
 
 import pytest
 
 from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
+from chia.protocols.wallet_protocol import CoinState
 from chia.rpc.wallet_rpc_api import WalletRpcApi
 from chia.rpc.wallet_rpc_client import WalletRpcClient
 from chia.simulator.full_node_simulator import FullNodeSimulator
 from chia.simulator.setup_nodes import SimulatorsAndWalletsServices
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol, ReorgProtocol
 from chia.simulator.time_out_assert import time_out_assert, time_out_assert_not_none
 from chia.types.blockchain_format.coin import Coin, coin_as_list
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.types.peer_info import PeerInfo
 from chia.util.bech32m import encode_puzzle_hash
+from chia.util.db_wrapper import DBWrapper2
 from chia.util.ints import uint16, uint32, uint64
 from chia.wallet.cat_wallet.cat_constants import DEFAULT_CATS
 from chia.wallet.cat_wallet.cat_info import LegacyCATInfo
-from chia.wallet.cat_wallet.cat_utils import construct_cat_puzzle
+from chia.wallet.cat_wallet.cat_utils import CAT_MOD, construct_cat_puzzle
 from chia.wallet.cat_wallet.cat_wallet import CATWallet
 from chia.wallet.derivation_record import DerivationRecord
 from chia.wallet.derive_keys import _derive_path_unhardened, master_sk_to_wallet_sk_unhardened_intermediate
 from chia.wallet.lineage_proof import LineageProof
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.puzzles.p2_delegated_puzzle_or_hidden_puzzle import puzzle_hash_for_pk
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet_info import WalletInfo
+from chia.wallet.wallet_interested_store import WalletInterestedStore
 
 
 class TestCATWallet:
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
@@ -996,7 +1000,52 @@
         async def check_wallets(node):
             return len(node.wallet_state_manager.wallets.keys())
 
         await time_out_assert(20, check_wallets, 2, wallet_node_0)
         cat_wallet = wallet_node_0.wallet_state_manager.wallets[uint32(2)]
         await time_out_assert(20, cat_wallet.get_confirmed_balance, cat_amount_1)
         assert not full_node_api.full_node.subscriptions.has_ph_subscription(puzzlehash_unhardened)
+
+
+@pytest.mark.asyncio
+async def test_unacknowledged_cat_table() -> None:
+    db_name = Path(tempfile.TemporaryDirectory().name).joinpath("test.sqlite")
+    db_name.parent.mkdir(parents=True, exist_ok=True)
+    db_wrapper = await DBWrapper2.create(
+        database=db_name,
+    )
+    try:
+        interested_store = await WalletInterestedStore.create(db_wrapper)
+
+        def asset_id(i: int) -> bytes32:
+            return bytes32([i] * 32)
+
+        def coin_state(i: int) -> CoinState:
+            return CoinState(Coin(bytes32([0] * 32), bytes32([0] * 32), uint64(i)), None, None)
+
+        await interested_store.add_unacknowledged_coin_state(
+            asset_id(0),
+            coin_state(0),
+            None,
+        )
+        await interested_store.add_unacknowledged_coin_state(
+            asset_id(1),
+            coin_state(1),
+            100,
+        )
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(0)) == [(coin_state(0), 0)]
+        await interested_store.add_unacknowledged_coin_state(
+            asset_id(0),
+            coin_state(0),
+            None,
+        )
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(0)) == [(coin_state(0), 0)]
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(1)) == [(coin_state(1), 100)]
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(2)) == []
+        await interested_store.rollback_to_block(50)
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(1)) == []
+        await interested_store.delete_unacknowledged_states_for_asset_id(asset_id(1))
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(0)) == [(coin_state(0), 0)]
+        await interested_store.delete_unacknowledged_states_for_asset_id(asset_id(0))
+        assert await interested_store.get_unacknowledged_states_for_asset_id(asset_id(0)) == []
+    finally:
+        await db_wrapper.close()
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_offer_lifecycle.py` & `chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_offer_lifecycle.py`

 * *Files 2% similar despite different names*

```diff
@@ -12,22 +12,22 @@
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import CoinSpend
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.types.spend_bundle import SpendBundle
 from chia.util.ints import uint64
 from chia.wallet.cat_wallet.cat_utils import (
+    CAT_MOD,
     SpendableCAT,
     construct_cat_puzzle,
     unsigned_spend_bundle_for_spendable_cats,
 )
 from chia.wallet.outer_puzzles import AssetType
 from chia.wallet.payment import Payment
 from chia.wallet.puzzle_drivers import PuzzleInfo
-from chia.wallet.puzzles.cat_loader import CAT_MOD
 from chia.wallet.trading.offer import OFFER_MOD, NotarizedPayment, Offer
 
 acs = Program.to(1)
 acs_ph = acs.get_tree_hash()
 
 
 # Some methods mapping strings to CATs
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/cat_wallet/test_trades.py` & `chia-blockchain-2.0.0b3/tests/wallet/cat_wallet/test_trades.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 from __future__ import annotations
 
 import asyncio
 import dataclasses
 import sys
+import time
 from secrets import token_bytes
-from typing import Dict, List
+from typing import Dict, List, Tuple
 
 import pytest
 from blspy import G2Element
 
 from chia.consensus.cost_calculator import NPCResult
 from chia.full_node.bundle_tools import simple_solution_generator
 from chia.full_node.mempool_check_conditions import get_name_puzzle_conditions
@@ -16,35 +17,56 @@
 from chia.simulator.time_out_assert import time_out_assert
 from chia.types.blockchain_format.program import INFINITE_COST
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.ints import uint32, uint64
 from chia.wallet.cat_wallet.cat_wallet import CATWallet
 from chia.wallet.outer_puzzles import AssetType
 from chia.wallet.puzzle_drivers import PuzzleInfo
+from chia.wallet.trade_record import TradeRecord
 from chia.wallet.trading.offer import Offer
 from chia.wallet.trading.trade_status import TradeStatus
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.transaction_type import TransactionType
 
 buffer_blocks = 4
 
 
+def create_tr_for_offer(offer: Offer) -> Tuple[TradeRecord, Offer]:
+    now = uint64(int(time.time()))
+    return (
+        TradeRecord(
+            confirmed_at_index=uint32(0),
+            accepted_at_time=None,
+            created_at_time=now,
+            is_my_offer=True,
+            sent=uint32(0),
+            offer=bytes(offer),
+            taken_offer=None,
+            coins_of_interest=offer.get_involved_coins(),
+            trade_id=offer.name(),
+            status=uint32(TradeStatus.PENDING_ACCEPT.value),
+            sent_to=[],
+        ),
+        offer,
+    )
+
+
 @pytest.mark.parametrize(
     "trusted",
     [True, False],
 )
 class TestCATTrades:
     @pytest.mark.asyncio
     @pytest.mark.parametrize(
-        "forwards_compat",
-        [True, False],
-    )
-    @pytest.mark.parametrize(
-        "reuse_puzhash",
-        [True, False],
+        "forwards_compat,reuse_puzhash",
+        [
+            (True, False),
+            (False, True),
+            (False, False),
+        ],
     )
     async def test_cat_trades(
         self, wallets_prefarm, forwards_compat: bool, reuse_puzhash: bool, softfork_height: uint32
     ):
         (
             [wallet_node_maker, initial_maker_balance],
             [wallet_node_taker, initial_taker_balance],
@@ -146,14 +168,15 @@
                 )
             else:
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "0000000200000000000000000000000000000000000000000000000000000000000000008e724dc57c44ef0247e6d9e4b045304cc06d1b0205bc90bc2d5953e1f63631690000000000000000ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0b2847c2a1428be2af434b78ab85b08c46f13cb4dfd686ac21e7ee484504bebacffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff0180808080ffffa05dd3364e78b4362d07eb167bd9777a27198ea20f2d365a8b99d1f7ee9480678cffffa066f9d0199a23435445559963348176a0f30cd62bb94e39076478947da01fae2aff02ffffa066f9d0199a23435445559963348176a0f30cd62bb94e39076478947da01fae2a808080809563629e653a9fc3c65f55947883a47e062e6b67394091228ec01352ff78f333e4fb5940aef16e2c6cfed28ea3934dada96f4ce2b629b17cd482eb31f6a6c5590000003a3529439cff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b080399dec21ec7ab66ed0b43811652c2c27c16e2f304b8e2900d7f510448675ef9d8be70ba19e6b6675c4d9bb5f75ced4ff018080ff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0180ffff33ffa0846b58db3bd246785e202eeddfbb46acaf267f011307437cd4e0841f3da751f6ff853a3529439a80ffff34ff0180ffff3cffa0ec3b67cd6f44441d032e61df625b5d2cd7a68723fac63c63519f67e2441bf83f80ffff3fffa03926f78396e6fb73243eeb599c8622bb79cd9c896b762fafd61c3afa23d7676f8080ff8080b709a8b602665d0605d41f8d06b63aff4ea8dffde4ef8ef365cd779095d06d3a875120cb43f8eba83233ff8d872400c71616dcf0eb7baafdf36950b8424ab9264984847eeea3bcd5799c0c0be601464d56432ef0461ca6c93d82386928fb05d6"  # noqa: E501
                     )
                 )
+            await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
         else:
             # chia_for_cat
             success, trade_make, error = await trade_manager_maker.create_offer_for_ids(
                 chia_for_cat, fee=uint64(1), reuse_puzhash=reuse_puzhash
             )
             await asyncio.sleep(1)
             assert error is None
@@ -161,15 +184,15 @@
             assert trade_make is not None
 
         peer = wallet_node_taker.get_full_node_peer()
         trade_take, tx_records = await trade_manager_taker.respond_to_offer(
             old_maker_offer if forwards_compat else Offer.from_bytes(trade_make.offer),
             peer,
             fee=uint64(1),
-            reuse_puzhash=reuse_puzhash and not forwards_compat,
+            reuse_puzhash=reuse_puzhash,
         )
         assert trade_take is not None
         assert tx_records is not None
 
         first_offer = Offer.from_bytes(trade_take.offer)
 
         MAKER_CHIA_BALANCE -= 2  # -1 and -1 for fee
@@ -242,26 +265,28 @@
 
         if not forwards_compat:
             await time_out_assert(15, assert_trade_tx_number, True, wallet_node_maker, trade_make.trade_id, 1)
         await time_out_assert(15, assert_trade_tx_number, True, wallet_node_taker, trade_take.trade_id, 3)
 
         # cat_for_chia
         if forwards_compat:
+            await wallet_node_maker.wallet_state_manager.create_more_puzzle_hashes(num_additional_phs=12)
             if sys.version_info < (3, 8):
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "000000020000000000000000000000000000000000000000000000000000000000000000bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f790000000000000000ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffffa0e4d5088ed85532bb9be77dc78d023dc85d29f2293256dec58c2c6cbed4bd72a8ffffa0b48f3fccb3bbfe6a91496634bede07814b8e5a96a8c4779785398f0ca15f63dbff03ff80808080cdbd013d4289b66a84cf34e03052fb7ccc7fd9a38d0f6d982d74072d221501c0568d4921565822057f9adc5bcae451f1d8c8a512a46b79bb7d5c181b6e7a12fd0000000000000064ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0606c1f60685cbac498d622594578f07a313ebb5387a6ac82e5c0ce9a9990037bffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0a3b0219722055ac0a66cd9de5cd3e86962d8c8ec6abb801b57e5c77ed98453b02ceae0e19548f6d4fc20b3a2ec82aa90ff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff04ffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa08a66292fde9ef08198d996eae0ea21677eb478afeabed8030b1bf42c728f7dccff6080ffff3cffa0b86bb20dab8734322a2096fb5902812f6726b701fdabfa518e77c409f7b372d680ffff3fffa05a0868a77a62d8a16eacd9df77a93c37c3a6a9123023b2486df9d50d87fa4ab18080ff8080ffffa01ef743aa7bd56cec3a65115eb37b6e2b969377eca8c9099337381471efe26e78ffa0e25b0ff7a50e4afae386cdab538c70983db7f04fa835b45855114f9d790c414aff6480ffa0b4614606929261e29ef99bab7a040b9265affd2a7ec6c1bada8346acf1ba1d3bffffa0cdbd013d4289b66a84cf34e03052fb7ccc7fd9a38d0f6d982d74072d221501c0ffa0568d4921565822057f9adc5bcae451f1d8c8a512a46b79bb7d5c181b6e7a12fdff6480ffffa0cdbd013d4289b66a84cf34e03052fb7ccc7fd9a38d0f6d982d74072d221501c0ffa0e25b0ff7a50e4afae386cdab538c70983db7f04fa835b45855114f9d790c414aff6480ff80ff8080ab57b396668d2e091283f0cd859a64d0a7e66a0dd66a7d5c5b27afb8ef867ce202815bafbf16b8483f126da572fbc014144473b6c9ffb923672510716f60c9edb5f5081524191aa1813676876f24d2a37aadad7e8fc4ee9185f56954ff9c7962"  # noqa: E501
                     )
                 )
             else:
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "000000020000000000000000000000000000000000000000000000000000000000000000bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f790000000000000000ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffffa03497b02d65f50332c4487752ecc453ffa1fa42fba0f6abb754601256a9903236ffffa0b48f3fccb3bbfe6a91496634bede07814b8e5a96a8c4779785398f0ca15f63dbff03ff808080805b3d6fb444a4df10d803a5adb1ffead5194bd10045bdd255152b3618fdedb2408e8d06353c85fdaf10cbe6cec859be7dc7a50ba9d6298f3a722a0b5e546f66c40000000000000064ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0a3b0219722055ac0a66cd9de5cd3e86962d8c8ec6abb801b57e5c77ed98453b02ceae0e19548f6d4fc20b3a2ec82aa90ff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff04ffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa08a66292fde9ef08198d996eae0ea21677eb478afeabed8030b1bf42c728f7dccff6080ffff3cffa03190ad13862e2398bbb9f7c155dfb384eb5c424493d195d73d6cd40a3df562c080ffff3fffa0d513fefce0d8db6c574721b80cd69a1adcdeffd3688d56250021ccf6d48513208080ff8080ffffa09563629e653a9fc3c65f55947883a47e062e6b67394091228ec01352ff78f333ffa0e25b0ff7a50e4afae386cdab538c70983db7f04fa835b45855114f9d790c414aff6480ffa061dca0a1ff65361076854ce0613885d1aa17a2f9164d329d848a6813865ed37cffffa05b3d6fb444a4df10d803a5adb1ffead5194bd10045bdd255152b3618fdedb240ffa08e8d06353c85fdaf10cbe6cec859be7dc7a50ba9d6298f3a722a0b5e546f66c4ff6480ffffa05b3d6fb444a4df10d803a5adb1ffead5194bd10045bdd255152b3618fdedb240ffa0e25b0ff7a50e4afae386cdab538c70983db7f04fa835b45855114f9d790c414aff6480ff80ff8080a5521cd7bd121c7f11ac9d7f90b9b93768aadd0db4230e7569e31654d13451a3aac2393241a7b6bc78aa9d49def699cc0c9e5accbeba8d6c909e9e2a6bc781a175b2a1f92df2a9957947a0bdb4fd38a5267d3a780c9e613b30d3c4ace032e2ec"  # noqa: E501
                     )
                 )
+            await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
         else:
             success, trade_make, error = await trade_manager_maker.create_offer_for_ids(cat_for_chia)
             assert error is None
             assert success is True
             assert trade_make is not None
 
         trade_take, tx_records = await trade_manager_taker.respond_to_offer(
@@ -317,26 +342,27 @@
                 )
             else:
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "0000000200000000000000000000000000000000000000000000000000000000000000008e724dc57c44ef0247e6d9e4b045304cc06d1b0205bc90bc2d5953e1f63631690000000000000000ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0b2847c2a1428be2af434b78ab85b08c46f13cb4dfd686ac21e7ee484504bebacffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff0180808080ffffa0c6957fc1b7b21646349a054f11dc526cddece3ac27d770b14eaebf1c3fadd577ffffa0c842b1a384b8633ac25d0f12bd7b614f86a77642ab6426418750f2b0b86bab2aff06ffffa0c842b1a384b8633ac25d0f12bd7b614f86a77642ab6426418750f2b0b86bab2a8080808061dca0a1ff65361076854ce0613885d1aa17a2f9164d329d848a6813865ed37c9735c711d157d4044b39a4b6984bb9a1e1b6d10185f9ae02ab397e4683404d7d0000000000000060ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0a2f05885f8b91c6efdc78a17a9271bc88e2e26eded036b43f07656c6618c67501db0f2b1067d8d527e64d465d4275a83ff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff05ffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa0b2c07a0db065bab49a07e8fe8e1c084eb95f644c977abb096228e7926caf04d1ff5b80ffff3cffa0f15118ddf44c345e7b00c35ac9e770ceb75834916cb0d6d80164929eac70a02680ffff3fffa0a04a90f9ab34aa8c3865064e31635f84862847d668460db7e5ee5e5f1fdd530c8080ff8080ffffa05b3d6fb444a4df10d803a5adb1ffead5194bd10045bdd255152b3618fdedb240ffa0e25b0ff7a50e4afae386cdab538c70983db7f04fa835b45855114f9d790c414aff6480ffa024bfb62519ba6212f06f2f6ecd4cc57e5adb98ddc8870a45a7e722d161e5e5efffffa061dca0a1ff65361076854ce0613885d1aa17a2f9164d329d848a6813865ed37cffa09735c711d157d4044b39a4b6984bb9a1e1b6d10185f9ae02ab397e4683404d7dff6080ffffa061dca0a1ff65361076854ce0613885d1aa17a2f9164d329d848a6813865ed37cffa08a66292fde9ef08198d996eae0ea21677eb478afeabed8030b1bf42c728f7dccff6080ff80ff80808058ad594d05e32e9fe60d4589c6d5a16664ce65f8f997a6138588eef87fe59bdd7027826af4a7683200452bbd5257460d3ac884c2a92542d9d58f6d546293c084edebf6836cc732d36b1fe1f01d479b5ac28d1b9c3dd2383aa702bb2dc83926"  # noqa: E501
                     )
                 )
+            await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
         else:
             success, trade_make, error = await trade_manager_maker.create_offer_for_ids(
                 cat_for_cat, reuse_puzhash=reuse_puzhash
             )
             await asyncio.sleep(1)
             assert error is None
             assert success is True
             assert trade_make is not None
         trade_take, tx_records = await trade_manager_taker.respond_to_offer(
             old_maker_offer if forwards_compat else Offer.from_bytes(trade_make.offer),
             peer,
-            reuse_puzhash=reuse_puzhash and not forwards_compat,
+            reuse_puzhash=reuse_puzhash,
         )
         await time_out_assert(15, full_node.txs_in_mempool, True, tx_records)
         assert trade_take is not None
         assert tx_records is not None
 
         second_offer = Offer.from_bytes(trade_take.offer)
 
@@ -408,14 +434,15 @@
                 )
             else:
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "000000030000000000000000000000000000000000000000000000000000000000000000fe11a6f7b14ab167adaeed8ad7b33bfae414416e27438d92a3f866d9cb93b0980000000000000000ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff0180808080ffffa0d90069a5288e3b39bffba69ff2daf20e8528a282b108c8c09723506f1bd700b1ffffa06e7173e86f07d4efcd6c8c2950224f6717bdc05810f02ff8d12377e39c3cb7e5ff08ffffa06e7173e86f07d4efcd6c8c2950224f6717bdc05810f02ff8d12377e39c3cb7e58080808000000000000000000000000000000000000000000000000000000000000000008e724dc57c44ef0247e6d9e4b045304cc06d1b0205bc90bc2d5953e1f63631690000000000000000ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0b2847c2a1428be2af434b78ab85b08c46f13cb4dfd686ac21e7ee484504bebacffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff0180808080ffffa0d90069a5288e3b39bffba69ff2daf20e8528a282b108c8c09723506f1bd700b1ffffa0f0cb2e0193774c6d4caee9e23cd63870ef983abbf5b1888a6433c0c7d16ee8bbff09ffffa0f0cb2e0193774c6d4caee9e23cd63870ef983abbf5b1888a6433c0c7d16ee8bb80808080ddb663ae31d065b045f000fa24eae990022b71b0adfb509b15bb6e639f418f17846b58db3bd246785e202eeddfbb46acaf267f011307437cd4e0841f3da751f60000003a3529439aff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0a6e7261e597db3f409aa18b1e07a6c086d9326d191d80317242e2052d636567a37f764780bcf4c0bb1c93c2bd8dd3582ff018080ff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0780ffff33ffa0e518a3d0a83ef7d930e6e285d34bf9e434f58e2c81ef8fdc86ccafabc103ea26ff853a3529439380ffff3cffa0424ac85452b508f54b4bed34ba53ca97bd5ba42a17802f151dd590d224148bd480ffff3fffa085aecdebcf16730a9d13272efe1c5b9882469140e8530d9bdaa5b1925559a8ca80ffff3fffa049f5921bf38511541ebbc8e0bc92f68d69a1190f961b363e31c3fbcde662afc28080ff80808a100a01501b64b135838f14dad4215cb9e9287bfc2adf9af42e7d1c3fb241b92d5c9fe6ff9ba06e5e424d6568102f0702cd59834e4a3362632bd98a10a58f1f6fcf2463c64c59aff86bed70d06455ba472a85c500b420597176dac00ba3eba9"  # noqa: E501
                     )
                 )
+            await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
         else:
             success, trade_make, error = await trade_manager_maker.create_offer_for_ids(
                 chia_for_multiple_cat,
                 driver_dict=driver_dict,
             )
             await asyncio.sleep(1)
             assert error is None
@@ -467,14 +494,15 @@
                 )
             else:
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "000000040000000000000000000000000000000000000000000000000000000000000000bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f790000000000000000ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffffa0d3bc0decc18b909cd1c2ed5b40b1b9322bf9a8fa294936dcbf256351eeabdb2affffa0406a91d7e86d85e8220551cf84d3e287fc29adbb4e3ab8fff304c4c3b36e1c49ff0aff8080808024bfb62519ba6212f06f2f6ecd4cc57e5adb98ddc8870a45a7e722d161e5e5ef6d58da4101462d98242f629279d15241e630d527818026461e0db0e89ac22a1f000000000000005bff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0aff1c51f43f3503c08bba243c1236eb542a799bd4510085c39ec5184e9d162242d86e04bebbb9e05ac25c427e0bf1299ff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0bffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa0ef48bab9e780b7fecd895a2a77387b2d28bc8cfaa94755cffe3709772091b870ff5080ffff3cffa08f9659a72871b6a9af9faa36327cbafcc841296991419acf3d86c86ea3f9296180ffff3fffa04a51cf0e0a3fa72c9898da0ff01ec7c097f64313d242691b7836635057f118008080ff8080ffffa061dca0a1ff65361076854ce0613885d1aa17a2f9164d329d848a6813865ed37cffa08a66292fde9ef08198d996eae0ea21677eb478afeabed8030b1bf42c728f7dccff6080ffa0368d77420a7d84705ed32f0b194924daeb597835b91cca98e34123f6f9f2a768ffffa024bfb62519ba6212f06f2f6ecd4cc57e5adb98ddc8870a45a7e722d161e5e5efffa06d58da4101462d98242f629279d15241e630d527818026461e0db0e89ac22a1fff5b80ffffa024bfb62519ba6212f06f2f6ecd4cc57e5adb98ddc8870a45a7e722d161e5e5efffa0b2c07a0db065bab49a07e8fe8e1c084eb95f644c977abb096228e7926caf04d1ff5b80ff80ff80808c95992793719d17d4d13126c2bf630955a676f65360ba965cd42eeb525ce8690804c4d60e0e24c67cecb979fc525279c6ce27793a1bc991d5c4f3a18bcecdef0000000000000006ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0b2847c2a1428be2af434b78ab85b08c46f13cb4dfd686ac21e7ee484504bebacffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0948cf8e4d91aaa31a81350894649b5a818e14fce7a20027f8bb12b8bb867ecf63fd579e619445d02562935026d84b41bff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0cffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa0d05f25f6590eea61b1bf9be715e84907b69a23cc8be3e66f83557d4eac8202c6ff0380ffff3cffa0e8c9e63e7b83253bde6458d9b6ec97f255d3ac4d0c990d3c33fae4646e80066080ffff3fffa04a51cf0e0a3fa72c9898da0ff01ec7c097f64313d242691b7836635057f118008080ff8080ffffa03ceb129d48969bab59d2147aa0ac1c0f94da3a02f40c0b403ebbcc377e7aeaadffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0680ffa0b5711626854d68479eb54bff41d6231c183143eab7854607218f80873b8f7363ffffa08c95992793719d17d4d13126c2bf630955a676f65360ba965cd42eeb525ce869ffa00804c4d60e0e24c67cecb979fc525279c6ce27793a1bc991d5c4f3a18bcecdefff0680ffffa0325c2c2573edada949fd67c8fdafe8580c36cf90aa91607dda1c7e053ed4d855ffa0f0cb2e0193774c6d4caee9e23cd63870ef983abbf5b1888a6433c0c7d16ee8bbff0980ff09ff8080325c2c2573edada949fd67c8fdafe8580c36cf90aa91607dda1c7e053ed4d855ce98fff9d9c73cacdd183ce351ccc1cac9a46ea274d07244c4c4fcaf743db98c0000000000000009ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0b2847c2a1428be2af434b78ab85b08c46f13cb4dfd686ac21e7ee484504bebacffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0a9db3b42e1c7e8da0a374a9ae2babeafc63890aa18eaad9e00344015493437420e87c6219c764871b44bdf535d4bda32ff018080ff0180808080ffff80ffff01ffff3dffa0a949c1a1e9d504420f5a9540bdf044f7f97dac268f07206139308ed6a799a65c8080ff8080ffffa0c8f884033eca71b4dfc5aa2af6be55874e15687f3c869448175e60d7fdc00433ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0980ffa0327144225e2fb644d0f482ed4e6821124b72c8e5dca192da870f816d7ffd5c24ffffa0325c2c2573edada949fd67c8fdafe8580c36cf90aa91607dda1c7e053ed4d855ffa0ce98fff9d9c73cacdd183ce351ccc1cac9a46ea274d07244c4c4fcaf743db98cff0980ffffa08c95992793719d17d4d13126c2bf630955a676f65360ba965cd42eeb525ce869ffa0c842b1a384b8633ac25d0f12bd7b614f86a77642ab6426418750f2b0b86bab2aff0680ff80ff8080b47e590b0f7395ca67ca72a41ce6b013c88c74f18d1b8eddc6e0e98d1c48b4403abd5a9a3cb7fdca0e314ef5f619b80b1989c2db3dc13066e8e908d8425dfa5df1929146c3d380d7a94d5679a7b2ca66d42da97f2e8115e2a804902d3bc215fc"  # noqa: E501
                     )
                 )
+            await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
         else:
             success, trade_make, error = await trade_manager_maker.create_offer_for_ids(
                 multiple_cat_for_chia,
             )
             await asyncio.sleep(1)
             assert error is None
             assert success is True
@@ -524,14 +552,15 @@
                 )
             else:
                 old_maker_offer = Offer.from_bytes(
                     bytes.fromhex(
                         "0000000400000000000000000000000000000000000000000000000000000000000000008e724dc57c44ef0247e6d9e4b045304cc06d1b0205bc90bc2d5953e1f63631690000000000000000ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a0b2847c2a1428be2af434b78ab85b08c46f13cb4dfd686ac21e7ee484504bebacffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff0180808080ffffa0c5d4c9b5b76a48f4606a8652a520e4b0a38f373b70d6f2ff0415aa592ee89f3cffffa0c1e8e5623857c49159b0d8be0112d69962b69f0722d5d6b63cc0778389071c35ff0fffffa0c1e8e5623857c49159b0d8be0112d69962b69f0722d5d6b63cc0778389071c3580808080760dd5fbf9d78dbca68d67f5d23fa63224373a134b58bb60f16fccf1def3b3a7b48f3fccb3bbfe6a91496634bede07814b8e5a96a8c4779785398f0ca15f63db0000000000000003ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b08acbcdc220408ab0065b3d77eab2d15ea7ab6de0765287f64d97b203ff9823d4cc8dde13239531d199de4269ba7e04f6ff018080ff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0d80ffff3cffa05c2d9d34e08ab97f974cce7eb5ca002d8e3a7fc41ea4b986aaba1d3f688fb3bc80ffff3fffa076dae81747980a1fc41c80049e3b302ef9682b06001bbfdebd4b23185572daf98080ff8080ab74200ab9b5055d92daf866728037ca940a63fb55de5cf73e917cb2f32ff393406a91d7e86d85e8220551cf84d3e287fc29adbb4e3ab8fff304c4c3b36e1c49000000000000000aff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b08e48dad53cfbd55b33db1336228213396e97d466625a9d976d3f8e8e54a617670a2a506c2a357c132c65fece3abcb640ff018080ff80ffff01ffff3dffa03966d995822bfe789ff0d5d39debf4185a49bedb9cb683a2dd3d8a1de24decdc8080ff8080368d77420a7d84705ed32f0b194924daeb597835b91cca98e34123f6f9f2a76802bef2335f0896b019fb0fed4c01ab28c9ad1c45d3287eec5c22deedcf8c2d4a0000000000000050ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0aaf251346741279b3f8562f0bb2e396dc7441a8d7a4bb92e32927e937930eb212eefc66ba307d7e1e35d38293f9772a2ff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff0effffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa0877d898fb52b14d2fc329ac06237801d980698472c13ba058dcb2bd97884cbbeff4280ffff3cffa09a4546d23c692b5420d1aad7f1a967bb44f630acf26b8cd059149b82218d160680ffff3fffa076dae81747980a1fc41c80049e3b302ef9682b06001bbfdebd4b23185572daf98080ff8080ffffa024bfb62519ba6212f06f2f6ecd4cc57e5adb98ddc8870a45a7e722d161e5e5efffa0b2c07a0db065bab49a07e8fe8e1c084eb95f644c977abb096228e7926caf04d1ff5b80ffa0d02a3c08ea794684007215d3646100b61af5c0f241f0401820aabe6391a7e920ffffa0368d77420a7d84705ed32f0b194924daeb597835b91cca98e34123f6f9f2a768ffa002bef2335f0896b019fb0fed4c01ab28c9ad1c45d3287eec5c22deedcf8c2d4aff5080ffffa0368d77420a7d84705ed32f0b194924daeb597835b91cca98e34123f6f9f2a768ffa0ef48bab9e780b7fecd895a2a77387b2d28bc8cfaa94755cffe3709772091b870ff5080ff80ff80809815f1d300672eb4b066318bcf2ab2e8ce89659d830c5f3678df66e9f9510b770ddc992af14e60eb7f65f5447dead948148a40b779b12c17cb21aee23957ff114a5b897e7992cb3ea7885994f8164f44c88012ba83f3cdb6a0257e7b732a05fa"  # noqa: E501
                     )
                 )
+            await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
         else:
             success, trade_make, error = await trade_manager_maker.create_offer_for_ids(
                 chia_and_cat_for_cat,
             )
             await asyncio.sleep(1)
             assert error is None
             assert success is True
@@ -846,15 +875,15 @@
         assert success is True
         assert trade_make is not None
         peer = wallet_node_taker.get_full_node_peer()
         offer = Offer.from_bytes(trade_make.offer)
         bundle = dataclasses.replace(offer._bundle, aggregated_signature=G2Element())
         offer = dataclasses.replace(offer, _bundle=bundle)
         tr1, txs1 = await trade_manager_taker.respond_to_offer(offer, peer, fee=uint64(10))
-        wallet_node_taker.wallet_tx_resend_timeout_secs = 1  # don't wait for resend
+        wallet_node_taker.wallet_tx_resend_timeout_secs = 0  # don't wait for resend
         await wallet_node_taker._resend_queue()
         await wallet_node_taker._resend_queue()
         await wallet_node_taker._resend_queue()
         await wallet_node_taker._resend_queue()
         await wallet_node_taker._resend_queue()
         await wallet_node_taker._resend_queue()
         offer_tx_records: List[TransactionRecord] = await wallet_node_maker.wallet_state_manager.tx_store.get_not_sent()
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/db_wallet/test_db_graftroot.py` & `chia-blockchain-2.0.0b3/tests/wallet/db_wallet/test_db_graftroot.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/db_wallet/test_dl_offers.py` & `chia-blockchain-2.0.0b3/tests/wallet/db_wallet/test_dl_offers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/db_wallet/test_dl_wallet.py` & `chia-blockchain-2.0.0b3/tests/wallet/db_wallet/test_dl_wallet.py`

 * *Files 0% similar despite different names*

```diff
@@ -2,14 +2,15 @@
 
 import asyncio
 import dataclasses
 from typing import Any, List
 
 import pytest
 
+from chia.data_layer.data_layer_errors import LauncherCoinNotFoundError
 from chia.data_layer.data_layer_wallet import DataLayerWallet, Mirror
 from chia.simulator.setup_nodes import SimulatorsAndWallets
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol
 from chia.simulator.time_out_assert import adjusted_timeout, time_out_assert
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
@@ -168,14 +169,20 @@
 
         async with wallet_node_0.wallet_state_manager.lock:
             dl_wallet_0 = await DataLayerWallet.create_new_dl_wallet(wallet_node_0.wallet_state_manager)
 
         async with wallet_node_1.wallet_state_manager.lock:
             dl_wallet_1 = await DataLayerWallet.create_new_dl_wallet(wallet_node_1.wallet_state_manager)
 
+        peer = wallet_node_1.get_full_node_peer()
+
+        # Test tracking a launcher id that does not exist
+        with pytest.raises(LauncherCoinNotFoundError):
+            await dl_wallet_0.track_new_launcher_id(bytes32([1] * 32), peer)
+
         nodes = [Program.to("thing").get_tree_hash(), Program.to([8]).get_tree_hash()]
         current_tree = MerkleTree(nodes)
         current_root = current_tree.calculate_root()
 
         dl_record, std_record, launcher_id = await dl_wallet_0.generate_new_reporter(current_root)
 
         assert await dl_wallet_0.get_latest_singleton(launcher_id) is not None
@@ -183,15 +190,14 @@
         await wallet_node_0.wallet_state_manager.add_pending_transaction(dl_record)
         await wallet_node_0.wallet_state_manager.add_pending_transaction(std_record)
         await full_node_api.process_transaction_records(records=[dl_record, std_record])
 
         await time_out_assert(15, is_singleton_confirmed, True, dl_wallet_0, launcher_id)
         await asyncio.sleep(0.5)
 
-        peer = wallet_node_1.get_full_node_peer()
         await dl_wallet_1.track_new_launcher_id(launcher_id, peer)
         await time_out_assert(15, is_singleton_confirmed, True, dl_wallet_1, launcher_id)
         await asyncio.sleep(0.5)
 
         for i in range(0, 5):
             new_root = MerkleTree([Program.to("root").get_tree_hash()]).calculate_root()
             txs = await dl_wallet_0.create_update_state_spend(launcher_id, new_root)
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/did_wallet/test_did.py` & `chia-blockchain-2.0.0b3/tests/wallet/did_wallet/test_did.py`

 * *Files 6% similar despite different names*

```diff
@@ -3,27 +3,25 @@
 import dataclasses
 import json
 from typing import Optional
 
 import pytest
 from blspy import AugSchemeMPL, G1Element, G2Element
 
-from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
 from chia.rpc.wallet_rpc_api import WalletRpcApi
 from chia.simulator.setup_nodes import SimulatorsAndWallets
-from chia.simulator.simulator_protocol import FarmNewBlockProtocol
 from chia.simulator.time_out_assert import time_out_assert, time_out_assert_not_none
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.condition_opcodes import ConditionOpcode
 from chia.types.peer_info import PeerInfo
 from chia.types.spend_bundle import SpendBundle
 from chia.util.bech32m import decode_puzzle_hash, encode_puzzle_hash
 from chia.util.condition_tools import conditions_dict_for_solution
-from chia.util.ints import uint16, uint32, uint64
+from chia.util.ints import uint16, uint64
 from chia.wallet.did_wallet.did_wallet import DIDWallet
 from chia.wallet.singleton import create_singleton_puzzle
 from chia.wallet.util.address_type import AddressType
 from chia.wallet.util.wallet_types import WalletType
 from chia.wallet.wallet import CHIP_0002_SIGN_MESSAGE_PREFIX
 
 
@@ -44,34 +42,28 @@
     async def test_creation_from_coin_spend(
         self, self_hostname, two_nodes_two_wallets_with_same_keys: SimulatorsAndWallets, trusted
     ):
         """
         Verify that DIDWallet.create_new_did_wallet_from_coin_spend() is called after Singleton creation on
         the blockchain, and that the wallet is created in the second wallet node.
         """
-        num_blocks = 5
         full_nodes, wallets, _ = two_nodes_two_wallets_with_same_keys
         full_node_api = full_nodes[0]
         full_node_server = full_node_api.server
         wallet_node_0, server_0 = wallets[0]
         wallet_node_1, server_1 = wallets[1]
 
         wallet_0 = wallet_node_0.wallet_state_manager.main_wallet
         wallet_1 = wallet_node_1.wallet_state_manager.main_wallet
 
         ph0 = await wallet_0.get_new_puzzlehash()
         ph1 = await wallet_1.get_new_puzzlehash()
 
-        keys0 = await wallet_node_0.wallet_state_manager.get_keys(ph0)
-        keys1 = await wallet_node_1.wallet_state_manager.get_keys(ph1)
-        assert keys0
-        assert keys1
-        pk0, sk0 = keys0
-        pk1, sk1 = keys1
-        assert pk0 == pk1
+        sk0 = await wallet_node_0.wallet_state_manager.get_private_key(ph0)
+        sk1 = await wallet_node_1.wallet_state_manager.get_private_key(ph1)
         assert sk0 == sk1
 
         if trusted:
             wallet_node_0.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_1.config["trusted_peers"] = {
@@ -80,28 +72,16 @@
 
         else:
             wallet_node_0.config["trusted_peers"] = {}
             wallet_node_1.config["trusted_peers"] = {}
         await server_0.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
         await server_1.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph0))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(10, wallet_0.get_unconfirmed_balance, funds)
-        await time_out_assert(10, wallet_0.get_confirmed_balance, funds)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph1))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
+        await full_node_api.farm_blocks_to_wallet(1, wallet_1)
 
         # Wallet1 sets up DIDWallet1 without any backup set
         async with wallet_node_0.wallet_state_manager.lock:
             did_wallet_0: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node_0.wallet_state_manager, wallet_0, uint64(101)
             )
 
@@ -109,23 +89,21 @@
             did_wallet_0.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         assert spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph0))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         await time_out_assert(15, did_wallet_0.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_0.get_unconfirmed_balance, 101)
         await time_out_assert(15, did_wallet_0.get_pending_change_balance, 0)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph0))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         #######################
         all_node_0_wallets = await wallet_node_0.wallet_state_manager.user_store.get_all_wallet_info_entries()
         print(f"Node 0: {all_node_0_wallets}")
         all_node_1_wallets = await wallet_node_1.wallet_state_manager.user_store.get_all_wallet_info_entries()
         print(f"Node 1: {all_node_1_wallets}")
         assert (
@@ -135,28 +113,24 @@
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_creation_from_backup_file(self, self_hostname, three_wallet_nodes, trusted):
-        num_blocks = 5
         full_nodes, wallets, _ = three_wallet_nodes
         full_node_api = full_nodes[0]
         full_node_server = full_node_api.server
         wallet_node_0, server_0 = wallets[0]
         wallet_node_1, server_1 = wallets[1]
         wallet_node_2, server_2 = wallets[2]
         wallet_0 = wallet_node_0.wallet_state_manager.main_wallet
         wallet_1 = wallet_node_1.wallet_state_manager.main_wallet
         wallet_2 = wallet_node_2.wallet_state_manager.main_wallet
 
-        ph = await wallet_0.get_new_puzzlehash()
-        ph1 = await wallet_1.get_new_puzzlehash()
-        ph2 = await wallet_2.get_new_puzzlehash()
         if trusted:
             wallet_node_0.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_1.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
@@ -167,46 +141,32 @@
             wallet_node_0.config["trusted_peers"] = {}
             wallet_node_1.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
         await server_0.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
         await server_1.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
         await server_2.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(10, wallet_0.get_unconfirmed_balance, funds)
-        await time_out_assert(10, wallet_0.get_confirmed_balance, funds)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph1))
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
+        await full_node_api.farm_blocks_to_wallet(1, wallet_1)
+        await full_node_api.farm_blocks_to_wallet(1, wallet_2)
 
         # Wallet1 sets up DIDWallet1 without any backup set
         async with wallet_node_0.wallet_state_manager.lock:
             did_wallet_0: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node_0.wallet_state_manager, wallet_0, uint64(101)
             )
 
         spend_bundle_list = await wallet_node_0.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_0.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         await time_out_assert(15, did_wallet_0.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_0.get_unconfirmed_balance, 101)
         await time_out_assert(15, did_wallet_0.get_pending_change_balance, 0)
         # Wallet1 sets up DIDWallet_1 with DIDWallet_0 as backup
         backup_ids = [bytes.fromhex(did_wallet_0.get_my_DID())]
 
@@ -218,16 +178,15 @@
         spend_bundle_list = await wallet_node_1.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_1.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         await time_out_assert(15, did_wallet_1.get_confirmed_balance, 201)
         await time_out_assert(15, did_wallet_1.get_unconfirmed_balance, 201)
         await time_out_assert(15, did_wallet_1.get_pending_change_balance, 0)
 
         backup_data = did_wallet_1.create_backup()
 
@@ -249,16 +208,15 @@
         spend_bundle_list = await wallet_node_0.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_0.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         (
             test_info_list,
             test_message_spend_bundle,
         ) = await did_wallet_2.load_attest_files_for_recovery_spend([attest_data])
         assert message_spend_bundle == test_message_spend_bundle
 
@@ -268,97 +226,87 @@
             test_info_list,
             pubkey,
             test_message_spend_bundle,
         )
 
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         await time_out_assert(45, did_wallet_2.get_confirmed_balance, 201)
         await time_out_assert(45, did_wallet_2.get_unconfirmed_balance, 201)
 
+        for wallet in [did_wallet_0, did_wallet_1, did_wallet_2]:
+            assert wallet.wallet_state_manager.wallets[wallet.id()] == wallet
+
         some_ph = 32 * b"\2"
         await did_wallet_2.create_exit_spend(some_ph)
 
         spend_bundle_list = await wallet_node_2.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_2.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         async def get_coins_with_ph():
             coins = await full_node_api.full_node.coin_store.get_coin_records_by_puzzle_hash(True, some_ph)
             if len(coins) == 1:
                 return True
             return False
 
         await time_out_assert(15, get_coins_with_ph, True)
         await time_out_assert(45, did_wallet_2.get_confirmed_balance, 0)
         await time_out_assert(45, did_wallet_2.get_unconfirmed_balance, 0)
 
+        for wallet in [did_wallet_0, did_wallet_1]:
+            assert wallet.wallet_state_manager.wallets[wallet.id()] == wallet
+
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_did_recovery_with_multiple_backup_dids(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 5
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
         wallet2 = wallet_node_2.wallet_state_manager.main_wallet
 
-        ph = await wallet.get_new_puzzlehash()
         if trusted:
             wallet_node.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_2.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager, wallet, uint64(101)
             )
         assert did_wallet.get_name() == "Profile 1"
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        ph = await wallet2.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 101)
 
         recovery_list = [bytes.fromhex(did_wallet.get_my_DID())]
 
         async with wallet_node_2.wallet_state_manager.lock:
@@ -369,16 +317,15 @@
         spend_bundle_list = await wallet_node_2.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_2.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         await time_out_assert(15, did_wallet_2.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_2.get_unconfirmed_balance, 101)
 
         assert did_wallet_2.did_info.backup_ids == recovery_list
 
         recovery_list.append(bytes.fromhex(did_wallet_2.get_my_DID()))
@@ -391,17 +338,15 @@
         spend_bundle_list = await wallet_node_2.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_3.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        ph2 = await wallet.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         assert did_wallet_3.did_info.backup_ids == recovery_list
         await time_out_assert(15, did_wallet_3.get_confirmed_balance, 201)
         await time_out_assert(15, did_wallet_3.get_unconfirmed_balance, 201)
         coins = await did_wallet_3.select_coins(1)
         coin = coins.pop()
 
@@ -435,41 +380,41 @@
 
         (
             test_info_list,
             test_message_spend_bundle,
         ) = await did_wallet_4.load_attest_files_for_recovery_spend([attest1, attest2])
         assert message_spend_bundle == test_message_spend_bundle
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
         await time_out_assert(15, did_wallet_4.get_confirmed_balance, 0)
         await time_out_assert(15, did_wallet_4.get_unconfirmed_balance, 0)
         await did_wallet_4.recovery_spend(coin, new_ph, test_info_list, pubkey, message_spend_bundle)
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_4.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         await time_out_assert(15, did_wallet_4.get_confirmed_balance, 201)
         await time_out_assert(15, did_wallet_4.get_unconfirmed_balance, 201)
         await time_out_assert(15, did_wallet_3.get_confirmed_balance, 0)
         await time_out_assert(15, did_wallet_3.get_unconfirmed_balance, 0)
 
+        for wallet in [did_wallet, did_wallet_2, did_wallet_3, did_wallet_4]:
+            assert wallet.wallet_state_manager.wallets[wallet.id()] == wallet
+
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_did_recovery_with_empty_set(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 5
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
 
@@ -483,38 +428,27 @@
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager, wallet, uint64(101)
             )
 
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 101)
         coins = await did_wallet.select_coins(1)
         coin = coins.pop()
         info = Program.to([])
         pubkey = (await did_wallet.wallet_state_manager.get_unused_derivation_record(did_wallet.wallet_info.id)).pubkey
@@ -530,59 +464,45 @@
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_did_find_lost_did(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 5
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
         wallet2 = wallet_node_2.wallet_state_manager.main_wallet
         api_0 = WalletRpcApi(wallet_node)
-        ph = await wallet.get_new_puzzlehash()
         if trusted:
             wallet_node.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_2.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager, wallet, uint64(101)
             )
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(15, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph2 = await wallet2.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 101)
         # Delete the coin and wallet
         coins = await did_wallet.select_coins(uint64(1))
         coin = coins.pop()
         await wallet_node.wallet_state_manager.coin_store.delete_coin_record(coin.name())
@@ -606,16 +526,15 @@
         recovery_list = [bytes32.fromhex(did_wallet.get_my_DID())]
         await did_wallet.update_recovery_list(recovery_list, uint64(1))
         assert did_wallet.did_info.backup_ids == recovery_list
         await did_wallet.create_update_spend()
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 101)
         # Delete the coin and change inner puzzle
         coins = await did_wallet.select_coins(uint64(1))
         coin = coins.pop()
         await wallet_node.wallet_state_manager.coin_store.delete_coin_record(coin.name())
@@ -630,58 +549,44 @@
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_did_attest_after_recovery(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 5
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
         wallet2 = wallet_node_2.wallet_state_manager.main_wallet
-        ph = await wallet.get_new_puzzlehash()
         if trusted:
             wallet_node.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_2.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager, wallet, uint64(101)
             )
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(15, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph2 = await wallet2.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 101)
         recovery_list = [bytes.fromhex(did_wallet.get_my_DID())]
 
         async with wallet_node_2.wallet_state_manager.lock:
             did_wallet_2: DIDWallet = await DIDWallet.create_new_did_wallet(
@@ -689,17 +594,15 @@
             )
         spend_bundle_list = await wallet_node_2.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_2.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph = await wallet.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
         await time_out_assert(25, did_wallet_2.get_confirmed_balance, 101)
         await time_out_assert(25, did_wallet_2.get_unconfirmed_balance, 101)
         assert did_wallet_2.did_info.backup_ids == recovery_list
 
         # Update coin with new ID info
         recovery_list = [bytes.fromhex(did_wallet_2.get_my_DID())]
         await did_wallet.update_recovery_list(recovery_list, uint64(1))
@@ -707,16 +610,15 @@
         await did_wallet.create_update_spend()
 
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 101)
 
         # DID Wallet 2 recovers into DID Wallet 3 with new innerpuz
         backup_data = did_wallet_2.create_backup()
 
@@ -734,31 +636,29 @@
         ).pubkey
         await time_out_assert(15, did_wallet.get_confirmed_balance, 101)
         attest_data = (await did_wallet.create_attestment(coin.name(), new_ph, pubkey))[1]
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(did_wallet.id())
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
 
         (
             info,
             message_spend_bundle,
         ) = await did_wallet_3.load_attest_files_for_recovery_spend([attest_data])
         await did_wallet_3.recovery_spend(coin, new_ph, info, pubkey, message_spend_bundle)
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_3.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         await time_out_assert(15, did_wallet_3.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_3.get_unconfirmed_balance, 101)
 
         # DID Wallet 1 recovery spends into DID Wallet 4
         backup_data = did_wallet.create_backup()
 
@@ -777,49 +677,49 @@
         attest1 = (await did_wallet_3.create_attestment(coin.name(), new_ph, pubkey))[1]
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_3.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
         await time_out_assert(15, wallet.get_pending_change_balance, 0)
         (
             test_info_list,
             test_message_spend_bundle,
         ) = await did_wallet_4.load_attest_files_for_recovery_spend([attest1])
         await did_wallet_4.recovery_spend(coin, new_ph, test_info_list, pubkey, test_message_spend_bundle)
 
         spend_bundle_list = await wallet_node_2.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_4.id()
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(15, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         await time_out_assert(15, did_wallet_4.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_4.get_unconfirmed_balance, 101)
         await time_out_assert(15, did_wallet.get_confirmed_balance, 0)
         await time_out_assert(15, did_wallet.get_unconfirmed_balance, 0)
 
+        for wallet in [did_wallet, did_wallet_3, did_wallet_4]:
+            assert wallet.wallet_state_manager.wallets[wallet.id()] == wallet
+
     @pytest.mark.parametrize(
         "with_recovery",
         [True, False],
     )
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_did_transfer(self, self_hostname, two_wallet_nodes, with_recovery, trusted):
-        num_blocks = 5
         fee = uint64(1000)
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
@@ -835,25 +735,15 @@
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
 
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet_1: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager,
                 wallet,
                 uint64(101),
                 [bytes(ph)],
@@ -863,34 +753,26 @@
             )
         assert did_wallet_1.get_name() == "Profile 1"
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_1.id()
         )
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph2 = await wallet2.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
         await time_out_assert(15, did_wallet_1.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_1.get_unconfirmed_balance, 101)
-        await time_out_assert(15, wallet.get_confirmed_balance, 7999999998899)
-        await time_out_assert(15, wallet.get_unconfirmed_balance, 7999999998899)
         # Transfer DID
         new_puzhash = await wallet2.get_new_puzzlehash()
         await did_wallet_1.transfer_did(new_puzhash, fee, with_recovery)
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_1.id()
         )
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph2 = await wallet2.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
-        await time_out_assert(15, wallet.get_confirmed_balance, 7999999997899)
-        await time_out_assert(15, wallet.get_unconfirmed_balance, 7999999997899)
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
         # Check if the DID wallet is created in the wallet2
 
         await time_out_assert(30, get_wallet_num, 2, wallet_node_2.wallet_state_manager)
         await time_out_assert(30, get_wallet_num, 1, wallet_node.wallet_state_manager)
         # Get the new DID wallet
         did_wallets = list(
             filter(
@@ -910,15 +792,14 @@
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_update_recovery_list(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 5
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
         ph = await wallet.get_new_puzzlehash()
@@ -932,45 +813,31 @@
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
 
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet_1: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager, wallet, uint64(101), []
             )
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_1.id()
         )
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph2 = await wallet.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
         await time_out_assert(15, did_wallet_1.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_1.get_unconfirmed_balance, 101)
         await did_wallet_1.update_recovery_list([bytes(ph)], 1)
         await did_wallet_1.create_update_spend()
-        ph2 = await wallet.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
         await time_out_assert(15, did_wallet_1.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_1.get_unconfirmed_balance, 101)
         assert did_wallet_1.did_info.backup_ids[0] == bytes(ph)
         assert did_wallet_1.did_info.num_of_backup_ids_needed == 1
 
     @pytest.mark.parametrize(
         "trusted",
@@ -1038,15 +905,15 @@
         odd_amount = uint64(1)
         coin_1 = (await wallet.select_coins(odd_amount, exclude=[coin])).pop()
         assert coin_1.amount % 2 == 0
         tx = await wallet.generate_signed_transaction(
             odd_amount,
             ph1,
             fee,
-            exclude_coins=set([coin]),
+            excluded_coins=set([coin]),
         )
         await wallet.push_transaction(tx)
         await full_node_api.process_transaction_records(records=[tx])
         await full_node_api.wait_for_wallet_synced(wallet_node=wallet_node_2, timeout=15)
 
         assert await wallet1.get_confirmed_balance() == odd_amount
         try:
@@ -1058,62 +925,49 @@
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_message_spend(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 3
         fee = uint64(1000)
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
         wallet1 = wallet_node_2.wallet_state_manager.main_wallet
-        ph = await wallet.get_new_puzzlehash()
-        ph1 = await wallet1.get_new_puzzlehash()
         api_0 = WalletRpcApi(wallet_node)
         if trusted:
             wallet_node.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_2.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
 
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
 
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet_1: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager, wallet, uint64(101), [], fee=fee
             )
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_1.id()
         )
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph1))
+        await full_node_api.farm_blocks_to_wallet(1, wallet1)
         await time_out_assert(15, did_wallet_1.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_1.get_unconfirmed_balance, 101)
         response = await api_0.did_message_spend(
             {"wallet_id": did_wallet_1.wallet_id, "coin_announcements": ["0abc"], "puzzle_announcements": ["0def"]}
         )
         assert "spend_bundle" in response
         spend = response["spend_bundle"].coin_spends[0]
@@ -1200,15 +1054,14 @@
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
     async def test_did_sign_message(self, self_hostname, two_wallet_nodes, trusted):
-        num_blocks = 5
         fee = uint64(1000)
         full_nodes, wallets, _ = two_wallet_nodes
         full_node_api = full_nodes[0]
         server_1 = full_node_api.server
         wallet_node, server_2 = wallets[0]
         wallet_node_2, server_3 = wallets[1]
         wallet = wallet_node.wallet_state_manager.main_wallet
@@ -1225,25 +1078,15 @@
             }
         else:
             wallet_node.config["trusted_peers"] = {}
             wallet_node_2.config["trusted_peers"] = {}
 
         await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
         await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(15, wallet.get_confirmed_balance, funds)
+        await full_node_api.farm_blocks_to_wallet(1, wallet)
 
         async with wallet_node.wallet_state_manager.lock:
             did_wallet_1: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node.wallet_state_manager,
                 wallet,
                 uint64(101),
                 [bytes(ph)],
@@ -1253,17 +1096,15 @@
             )
         assert did_wallet_1.get_name() == "Profile 1"
         spend_bundle_list = await wallet_node.wallet_state_manager.tx_store.get_unconfirmed_for_wallet(
             did_wallet_1.id()
         )
         spend_bundle = spend_bundle_list[0].spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
-        ph2 = await wallet2.get_new_puzzlehash()
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph2))
+        await full_node_api.farm_blocks_to_wallet(1, wallet2)
         await time_out_assert(15, did_wallet_1.get_confirmed_balance, 101)
         # Test general string
         message = "Hello World"
         response = await api_0.sign_message_by_id(
             {
                 "id": encode_puzzle_hash(did_wallet_1.did_info.origin_coin.name(), AddressType.DID.value),
                 "message": message,
@@ -1302,34 +1143,28 @@
         A DID is created on-chain in client0, causing a DID Wallet to be created in client1, which shares the same key.
         This can happen if someone uses the same key on multiple computers, or is syncing a wallet from scratch.
 
         For this test, we assign a recovery list hash at DID creation time, but the recovery list is not yet available
         to the wallet_node that the DID Wallet is being created in (client1).
 
         """
-        num_blocks = 5
         full_nodes, wallets, _ = two_nodes_two_wallets_with_same_keys
         full_node_api = full_nodes[0]
         full_node_server = full_node_api.server
         wallet_node_0, server_0 = wallets[0]
         wallet_node_1, server_1 = wallets[1]
 
         wallet_0 = wallet_node_0.wallet_state_manager.main_wallet
         wallet_1 = wallet_node_1.wallet_state_manager.main_wallet
 
         ph0 = await wallet_0.get_new_puzzlehash()
         ph1 = await wallet_1.get_new_puzzlehash()
 
-        keys0 = await wallet_node_0.wallet_state_manager.get_keys(ph0)
-        keys1 = await wallet_node_1.wallet_state_manager.get_keys(ph1)
-        assert keys0
-        assert keys1
-        pk0, sk0 = keys0
-        pk1, sk1 = keys1
-        assert pk0 == pk1
+        sk0 = await wallet_node_0.wallet_state_manager.get_private_key(ph0)
+        sk1 = await wallet_node_1.wallet_state_manager.get_private_key(ph1)
         assert sk0 == sk1
 
         if trusted:
             wallet_node_0.config["trusted_peers"] = {
                 full_node_api.full_node.server.node_id.hex(): full_node_api.full_node.server.node_id.hex()
             }
             wallet_node_1.config["trusted_peers"] = {
@@ -1338,28 +1173,16 @@
 
         else:
             wallet_node_0.config["trusted_peers"] = {}
             wallet_node_1.config["trusted_peers"] = {}
         await server_0.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
         await server_1.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph0))
-
-        funds = sum(
-            [
-                calculate_pool_reward(uint32(i)) + calculate_base_farmer_reward(uint32(i))
-                for i in range(1, num_blocks - 1)
-            ]
-        )
-
-        await time_out_assert(10, wallet_0.get_unconfirmed_balance, funds)
-        await time_out_assert(10, wallet_0.get_confirmed_balance, funds)
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph1))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
+        await full_node_api.farm_blocks_to_wallet(1, wallet_1)
 
         # Node 0 sets up a DID Wallet with a backup set, but num_of_backup_ids_needed=0
         # (a malformed solution, but legal for the clvm puzzle)
         recovery_list = [bytes.fromhex("00" * 32)]
         async with wallet_node_0.wallet_state_manager.lock:
             did_wallet_0: DIDWallet = await DIDWallet.create_new_did_wallet(
                 wallet_node_0.wallet_state_manager,
@@ -1374,23 +1197,21 @@
         )
 
         spend_bundle = spend_bundle_list[0].spend_bundle
         assert spend_bundle
         await time_out_assert_not_none(5, full_node_api.full_node.mempool_manager.get_spendbundle, spend_bundle.name())
 
         # Node 1 creates the DID Wallet with create_new_did_wallet_from_coin_spend
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph0))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         await time_out_assert(15, did_wallet_0.get_confirmed_balance, 101)
         await time_out_assert(15, did_wallet_0.get_unconfirmed_balance, 101)
         await time_out_assert(15, did_wallet_0.get_pending_change_balance, 0)
 
-        for i in range(1, num_blocks):
-            await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(ph0))
+        await full_node_api.farm_blocks_to_wallet(1, wallet_0)
 
         #######################
         all_node_0_wallets = await wallet_node_0.wallet_state_manager.user_store.get_all_wallet_info_entries()
         print(f"Node 0: {all_node_0_wallets}")
         all_node_1_wallets = await wallet_node_1.wallet_state_manager.user_store.get_all_wallet_info_entries()
         print(f"Node 1: {all_node_1_wallets}")
         assert len(all_node_0_wallets) == len(all_node_1_wallets)
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_1_offers.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_1_offers.py`

 * *Files 0% similar despite different names*

```diff
@@ -21,14 +21,15 @@
 from chia.wallet.nft_wallet.nft_wallet import NFTWallet
 from chia.wallet.outer_puzzles import create_asset_id, match_puzzle
 from chia.wallet.puzzle_drivers import PuzzleInfo
 from chia.wallet.trading.offer import Offer
 from chia.wallet.trading.trade_status import TradeStatus
 from chia.wallet.uncurried_puzzle import uncurry_puzzle
 from chia.wallet.util.compute_memos import compute_memos
+from tests.wallet.cat_wallet.test_trades import create_tr_for_offer
 
 # from clvm_tools.binutils import disassemble
 
 logging.getLogger("aiosqlite").setLevel(logging.INFO)  # Too much logging on debug level
 
 
 def mempool_not_empty(fnapi: FullNodeSimulator) -> bool:
@@ -975,14 +976,16 @@
             )
         else:
             old_maker_offer = Offer.from_bytes(
                 bytes.fromhex(
                     "000000040000000000000000000000000000000000000000000000000000000000000000ef08c35c6f7a7f1161f38b5f37a03bb66aa0c2bbe0e25c848115e273cac012a20000000000000000ff02ffff01ff02ffff01ff02ffff03ffff18ff2fff3480ffff01ff04ffff04ff20ffff04ff2fff808080ffff04ffff02ff3effff04ff02ffff04ff05ffff04ffff02ff2affff04ff02ffff04ff27ffff04ffff02ffff03ff77ffff01ff02ff36ffff04ff02ffff04ff09ffff04ff57ffff04ffff02ff2effff04ff02ffff04ff05ff80808080ff808080808080ffff011d80ff0180ffff04ffff02ffff03ff77ffff0181b7ffff015780ff0180ff808080808080ffff04ff77ff808080808080ffff02ff3affff04ff02ffff04ff05ffff04ffff02ff0bff5f80ffff01ff8080808080808080ffff01ff088080ff0180ffff04ffff01ffffffff4947ff0233ffff0401ff0102ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff3cffff0bff34ff2480ffff0bff3cffff0bff3cffff0bff34ff2c80ff0980ffff0bff3cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ff02ffff03ff0bffff01ff02ffff03ffff02ff26ffff04ff02ffff04ff13ff80808080ffff01ff02ffff03ffff20ff1780ffff01ff02ffff03ffff09ff81b3ffff01818f80ffff01ff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff34ff808080808080ffff01ff04ffff04ff23ffff04ffff02ff36ffff04ff02ffff04ff09ffff04ff53ffff04ffff02ff2effff04ff02ffff04ff05ff80808080ff808080808080ff738080ffff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff34ff8080808080808080ff0180ffff01ff088080ff0180ffff01ff04ff13ffff02ff3affff04ff02ffff04ff05ffff04ff1bffff04ff17ff8080808080808080ff0180ffff01ff02ffff03ff17ff80ffff01ff088080ff018080ff0180ffffff02ffff03ffff09ff09ff3880ffff01ff02ffff03ffff18ff2dffff010180ffff01ff0101ff8080ff0180ff8080ff0180ff0bff3cffff0bff34ff2880ffff0bff3cffff0bff3cffff0bff34ff2c80ff0580ffff0bff3cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ffff21ff17ffff09ff0bff158080ffff01ff04ff30ffff04ff0bff808080ffff01ff088080ff0180ff018080ffff04ffff01ffa07faa3253bfddd1e0decb0906b2dc6247bbc4cf608f58345d173adb63e8b47c9fffa070ddb91bded411b2b9d272af482e7c8e5b1b63a748cbc6c9a605f0fca8a35aafa0eff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9ffff04ffff01ff02ffff01ff02ffff01ff02ff3effff04ff02ffff04ff05ffff04ffff02ff2fff5f80ffff04ff80ffff04ffff04ffff04ff0bffff04ff17ff808080ffff01ff808080ffff01ff8080808080808080ffff04ffff01ffffff0233ff04ff0101ffff02ff02ffff03ff05ffff01ff02ff1affff04ff02ffff04ff0dffff04ffff0bff12ffff0bff2cff1480ffff0bff12ffff0bff12ffff0bff2cff3c80ff0980ffff0bff12ff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff0bff12ffff0bff2cff1080ffff0bff12ffff0bff12ffff0bff2cff3c80ff0580ffff0bff12ffff02ff1affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ff0bffff01ff02ffff03ffff09ff23ff1880ffff01ff02ffff03ffff18ff81b3ff2c80ffff01ff02ffff03ffff20ff1780ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff33ffff04ff2fffff04ff5fff8080808080808080ffff01ff088080ff0180ffff01ff04ff13ffff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ff2fffff04ff5fff80808080808080808080ff0180ffff01ff02ffff03ffff09ff23ffff0181e880ffff01ff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ffff02ffff03ffff22ffff09ffff02ff2effff04ff02ffff04ff53ff80808080ff82014f80ffff20ff5f8080ffff01ff02ff53ffff04ff818fffff04ff82014fffff04ff81b3ff8080808080ffff01ff088080ff0180ffff04ff2cff8080808080808080ffff01ff04ff13ffff02ff3effff04ff02ffff04ff05ffff04ff1bffff04ff17ffff04ff2fffff04ff5fff80808080808080808080ff018080ff0180ffff01ff04ffff04ff18ffff04ffff02ff16ffff04ff02ffff04ff05ffff04ff27ffff04ffff0bff2cff82014f80ffff04ffff02ff2effff04ff02ffff04ff818fff80808080ffff04ffff0bff2cff0580ff8080808080808080ff378080ff81af8080ff0180ff018080ffff04ffff01a0a04d9f57764f54a43e4030befb4d80026e870519aaa66334aef8304f5d0393c2ffff04ffff01ffff75ffaf68747470733a2f2f7777772e636869612e6e65742f696d672f6272616e64696e672f636869612d6c6f676f2e73766780ffff68a23078443435383441443436333133394641384330443946363846344235394631383580ffff04ffff01a0fe8a4b4e27a2e29a4d3fc7ce9d527adbcaccbab6ada3903ccf3ba9a769d2d78bffff04ffff01ff02ffff01ff02ffff01ff02ff26ffff04ff02ffff04ff05ffff04ff17ffff04ff0bffff04ffff02ff2fff5f80ff80808080808080ffff04ffff01ffffff82ad4cff0233ffff3e04ff81f601ffffff0102ffff02ffff03ff05ffff01ff02ff2affff04ff02ffff04ff0dffff04ffff0bff32ffff0bff3cff3480ffff0bff32ffff0bff32ffff0bff3cff2280ff0980ffff0bff32ff0bffff0bff3cff8080808080ff8080808080ffff010b80ff0180ff04ffff04ff38ffff04ffff02ff36ffff04ff02ffff04ff05ffff04ff27ffff04ffff02ff2effff04ff02ffff04ffff02ffff03ff81afffff0181afffff010b80ff0180ff80808080ffff04ffff0bff3cff4f80ffff04ffff0bff3cff0580ff8080808080808080ff378080ff82016f80ffffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff2fffff01ff80ff808080808080808080ff0bff32ffff0bff3cff2880ffff0bff32ffff0bff32ffff0bff3cff2280ff0580ffff0bff32ffff02ff2affff04ff02ffff04ff07ffff04ffff0bff3cff3c80ff8080808080ffff0bff3cff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff02ffff03ff5fffff01ff02ffff03ffff09ff82011fff3880ffff01ff02ffff03ffff09ffff18ff82059f80ff3c80ffff01ff02ffff03ffff20ff81bf80ffff01ff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff82019fffff04ff82017fff80808080808080808080ffff01ff088080ff0180ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff808080808080808080808080ff0180ffff01ff02ffff03ffff09ff82011fff2c80ffff01ff02ffff03ffff20ff82017f80ffff01ff04ffff04ff24ffff04ffff0eff10ffff02ff2effff04ff02ffff04ff82019fff8080808080ff808080ffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ffff02ff0bffff04ff17ffff04ff2fffff04ff82019fff8080808080ff8080808080808080808080ffff01ff088080ff0180ffff01ff02ffff03ffff09ff82011fff2480ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0122ffff0dff82029f8080ffff01ff02ffff03ffff09ffff0cff82029fff80ffff010280ff1080ffff01ff0101ff8080ff0180ff8080ff018080ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff8080808080808080808080ffff01ff088080ff0180ffff01ff04ff819fffff02ff3effff04ff02ffff04ff05ffff04ff0bffff04ff17ffff04ff2fffff04ff81dfffff04ff81bfffff04ff82017fff808080808080808080808080ff018080ff018080ff0180ffff01ff02ff3affff04ff02ffff04ff05ffff04ff0bffff04ff81bfffff04ffff02ffff03ff82017fffff0182017fffff01ff02ff0bffff04ff17ffff04ff2fffff01ff808080808080ff0180ff8080808080808080ff0180ff018080ffff04ffff01a0c5abea79afaa001b5427dfa0c8cf42ca6f38f5841b78f9b3c252733eb2de2726ffff04ffff0180ffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff81bfffff01ff04ff82013fffff04ff80ffff04ffff02ffff03ffff22ff82013fffff20ffff09ff82013fff2f808080ffff01ff04ffff04ff10ffff04ffff0bffff02ff2effff04ff02ffff04ff09ffff04ff8205bfffff04ffff02ff3effff04ff02ffff04ffff04ff09ffff04ff82013fff1d8080ff80808080ff808080808080ff1580ff808080ffff02ff16ffff04ff02ffff04ff0bffff04ff17ffff04ff8202bfffff04ff15ff8080808080808080ffff01ff02ff16ffff04ff02ffff04ff0bffff04ff17ffff04ff8202bfffff04ff15ff8080808080808080ff0180ff80808080ffff01ff04ff2fffff01ff80ff80808080ff0180ffff04ffff01ffffff3f02ff04ff0101ffff822710ff02ff02ffff03ff05ffff01ff02ff3affff04ff02ffff04ff0dffff04ffff0bff2affff0bff2cff1480ffff0bff2affff0bff2affff0bff2cff3c80ff0980ffff0bff2aff0bffff0bff2cff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ff17ffff01ff04ffff04ff10ffff04ffff0bff81a7ffff02ff3effff04ff02ffff04ffff04ff2fffff04ffff04ff05ffff04ffff05ffff14ffff12ff47ff0b80ff128080ffff04ffff04ff05ff8080ff80808080ff808080ff8080808080ff808080ffff02ff16ffff04ff02ffff04ff05ffff04ff0bffff04ff37ffff04ff2fff8080808080808080ff8080ff0180ffff0bff2affff0bff2cff1880ffff0bff2affff0bff2affff0bff2cff3c80ff0580ffff0bff2affff02ff3affff04ff02ffff04ff07ffff04ffff0bff2cff2c80ff8080808080ffff0bff2cff8080808080ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff3effff04ff02ffff04ff09ff80808080ffff02ff3effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01ffa07faa3253bfddd1e0decb0906b2dc6247bbc4cf608f58345d173adb63e8b47c9fffa070ddb91bded411b2b9d272af482e7c8e5b1b63a748cbc6c9a605f0fca8a35aafa0eff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9ffff04ffff01a0be0a40552c563b41601c145653140f97d23dd8cc5219b9c8495d2030732d930bffff04ffff01821388ff0180808080ffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff018080808080ff018080808080ff01808080ffffa022bc8aa311bd79f278be600940f916dd28625cbb05b018d2319a98996bd9130dffffa08a66292fde9ef08198d996eae0ea21677eb478afeabed8030b1bf42c728f7dccff01ffffa08a66292fde9ef08198d996eae0ea21677eb478afeabed8030b1bf42c728f7dcc808080805a57f38a32692d5650280455d12834f31d574f37bd0b09e5fc849d4e6999b16277e01b66aceeced509b7fc53d1045fdca8db774fc7e755fb710ff5f64a98b6b00000000000004e20ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0a6e7261e597db3f409aa18b1e07a6c086d9326d191d80317242e2052d636567a37f764780bcf4c0bb1c93c2bd8dd3582ff018080ff0180808080ffff80ffff01ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff822710ffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff821388ffffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f798080ffff33ffa0c842b1a384b8633ac25d0f12bd7b614f86a77642ab6426418750f2b0b86bab2aff82138880ffff3cffa0b9dd63822695e7ff30a5a20946b0cf6a6a52c995da862799a5160891b8b095f080ffff3fffa0a9741d1d07c82dd605417c468415a6cb313a28ae8c2f1b2abb7da1493fa0e96680ffff3fffa09f9a55a697604bca0e9b976a5f94f4b7030ab16ba16d6a589271e5881ef9bb5c8080ff8080ffffa0d33666514194537eb192c22b39da069743ae8caadbb953830bdb55ad9acf5aa1ffa0e25b0ff7a50e4afae386cdab538c70983db7f04fa835b45855114f9d790c414aff830186a080ffa09afbe0796f7fd066b1b7fb319eb50484da25ab715f7225480a837ccc62060662ffffa05a57f38a32692d5650280455d12834f31d574f37bd0b09e5fc849d4e6999b162ffa077e01b66aceeced509b7fc53d1045fdca8db774fc7e755fb710ff5f64a98b6b0ff824e2080ffffa05a57f38a32692d5650280455d12834f31d574f37bd0b09e5fc849d4e6999b162ffa0846b58db3bd246785e202eeddfbb46acaf267f011307437cd4e0841f3da751f6ff824e2080ff80ff80809563629e653a9fc3c65f55947883a47e062e6b67394091228ec01352ff78f333e4fb5940aef16e2c6cfed28ea3934dada96f4ce2b629b17cd482eb31f6a6c5590000003a3527bd60ff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b080399dec21ec7ab66ed0b43811652c2c27c16e2f304b8e2900d7f510448675ef9d8be70ba19e6b6675c4d9bb5f75ced4ff018080ff80ffff01ffff33ffa06e7173e86f07d4efcd6c8c2950224f6717bdc05810f02ff8d12377e39c3cb7e5ff853a3527bbaf80ffff34ff8201b180ffff3cffa025d8ac4f9d5e441298697b371b918081b084e62b9b0a3350ef2ae95f3c30ada380ffff3dffa03df2fbb189d83a40ef0ab98f30ca043f1ef81b28483afefb79aa57c92807e8818080ff80809afbe0796f7fd066b1b7fb319eb50484da25ab715f7225480a837ccc62060662fe11a6f7b14ab167adaeed8ad7b33bfae414416e27438d92a3f866d9cb93b0980000000000001388ff02ffff01ff02ffff01ff02ff5effff04ff02ffff04ffff04ff05ffff04ffff0bff34ff0580ffff04ff0bff80808080ffff04ffff02ff17ff2f80ffff04ff5fffff04ffff02ff2effff04ff02ffff04ff17ff80808080ffff04ffff02ff2affff04ff02ffff04ff82027fffff04ff82057fffff04ff820b7fff808080808080ffff04ff81bfffff04ff82017fffff04ff8202ffffff04ff8205ffffff04ff820bffff80808080808080808080808080ffff04ffff01ffffffff3d46ff02ff333cffff0401ff01ff81cb02ffffff20ff02ffff03ff05ffff01ff02ff32ffff04ff02ffff04ff0dffff04ffff0bff7cffff0bff34ff2480ffff0bff7cffff0bff7cffff0bff34ff2c80ff0980ffff0bff7cff0bffff0bff34ff8080808080ff8080808080ffff010b80ff0180ffff02ffff03ffff22ffff09ffff0dff0580ff2280ffff09ffff0dff0b80ff2280ffff15ff17ffff0181ff8080ffff01ff0bff05ff0bff1780ffff01ff088080ff0180ffff02ffff03ff0bffff01ff02ffff03ffff09ffff02ff2effff04ff02ffff04ff13ff80808080ff820b9f80ffff01ff02ff56ffff04ff02ffff04ffff02ff13ffff04ff5fffff04ff17ffff04ff2fffff04ff81bfffff04ff82017fffff04ff1bff8080808080808080ffff04ff82017fff8080808080ffff01ff088080ff0180ffff01ff02ffff03ff17ffff01ff02ffff03ffff20ff81bf80ffff0182017fffff01ff088080ff0180ffff01ff088080ff018080ff0180ff04ffff04ff05ff2780ffff04ffff10ff0bff5780ff778080ffffff02ffff03ff05ffff01ff02ffff03ffff09ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff01818f80ffff01ff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ffff04ff81b9ff82017980ff808080808080ffff01ff02ff7affff04ff02ffff04ffff02ffff03ffff09ff11ff5880ffff01ff04ff58ffff04ffff02ff76ffff04ff02ffff04ff13ffff04ff29ffff04ffff0bff34ff5b80ffff04ff2bff80808080808080ff398080ffff01ff02ffff03ffff09ff11ff7880ffff01ff02ffff03ffff20ffff02ffff03ffff09ffff0121ffff0dff298080ffff01ff02ffff03ffff09ffff0cff29ff80ff3480ff5c80ffff01ff0101ff8080ff0180ff8080ff018080ffff0109ffff01ff088080ff0180ffff010980ff018080ff0180ffff04ffff02ffff03ffff09ff11ff5880ffff0159ff8080ff0180ffff04ffff02ff26ffff04ff02ffff04ff0dffff04ff0bffff04ff17ff808080808080ff80808080808080ff0180ffff01ff04ff80ffff04ff80ff17808080ff0180ffff02ffff03ff05ffff01ff04ff09ffff02ff56ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff0bff7cffff0bff34ff2880ffff0bff7cffff0bff7cffff0bff34ff2c80ff0580ffff0bff7cffff02ff32ffff04ff02ffff04ff07ffff04ffff0bff34ff3480ff8080808080ffff0bff34ff8080808080ffff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff2effff04ff02ffff04ff09ff80808080ffff02ff2effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ffff04ffff04ff30ffff04ff5fff808080ffff02ff7effff04ff02ffff04ffff04ffff04ff2fff0580ffff04ff5fff82017f8080ffff04ffff02ff26ffff04ff02ffff04ff0bffff04ff05ffff01ff808080808080ffff04ff17ffff04ff81bfffff04ff82017fffff04ffff02ff2affff04ff02ffff04ff8204ffffff04ffff02ff76ffff04ff02ffff04ff09ffff04ff820affffff04ffff0bff34ff2d80ffff04ff15ff80808080808080ffff04ff8216ffff808080808080ffff04ff8205ffffff04ff820bffff808080808080808080808080ff02ff5affff04ff02ffff04ff5fffff04ff3bffff04ffff02ffff03ff17ffff01ff09ff2dffff02ff2affff04ff02ffff04ff27ffff04ffff02ff76ffff04ff02ffff04ff29ffff04ff57ffff04ffff0bff34ff81b980ffff04ff59ff80808080808080ffff04ff81b7ff80808080808080ff8080ff0180ffff04ff17ffff04ff05ffff04ff8202ffffff04ffff04ffff04ff78ffff04ffff0eff5cffff02ff2effff04ff02ffff04ffff04ff2fffff04ff82017fff808080ff8080808080ff808080ffff04ffff04ff20ffff04ffff0bff81bfff5cffff02ff2effff04ff02ffff04ffff04ff15ffff04ffff10ff82017fffff11ff8202dfff2b80ff8202ff80ff808080ff8080808080ff808080ff138080ff80808080808080808080ff018080ffff04ffff01a037bef360ee858133b69d595a906dc45d01af50379dad515eb9518abb7c1d2a7affff04ffff01a01154a99859ed28c863878e885f8e9fbd3ceb5753182d6b3d12d4087fafef410bffff04ffff01ff02ffff01ff02ff0affff04ff02ffff04ff03ff80808080ffff04ffff01ffff333effff02ffff03ff05ffff01ff04ffff04ff0cffff04ffff02ff1effff04ff02ffff04ff09ff80808080ff808080ffff02ff16ffff04ff02ffff04ff19ffff04ffff02ff0affff04ff02ffff04ff0dff80808080ff808080808080ff8080ff0180ffff02ffff03ff05ffff01ff04ffff04ff08ff0980ffff02ff16ffff04ff02ffff04ff0dffff04ff0bff808080808080ffff010b80ff0180ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff1effff04ff02ffff04ff09ff80808080ffff02ff1effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ff0180808080ffffffa070ddb91bded411b2b9d272af482e7c8e5b1b63a748cbc6c9a605f0fca8a35aafffffa0be0a40552c563b41601c145653140f97d23dd8cc5219b9c8495d2030732d930bff821388ffffa0be0a40552c563b41601c145653140f97d23dd8cc5219b9c8495d2030732d930b80808080ffffa05a57f38a32692d5650280455d12834f31d574f37bd0b09e5fc849d4e6999b162ffa0846b58db3bd246785e202eeddfbb46acaf267f011307437cd4e0841f3da751f6ff824e2080ffa03c137c60b1294a645098a30f1319276c8e4da5e1980bb72f83cdc54c25f6c7e8ffffa09afbe0796f7fd066b1b7fb319eb50484da25ab715f7225480a837ccc62060662ffa0fe11a6f7b14ab167adaeed8ad7b33bfae414416e27438d92a3f866d9cb93b098ff82138880ffffa09afbe0796f7fd066b1b7fb319eb50484da25ab715f7225480a837ccc62060662ffa0bae24162efbd568f89bc7a340798a6118df0189eb9e3f8697bcea27af99f8f79ff82138880ff80ff80808c72a4b73dc1a882c053bc7622df80c3ae95c75c517b3fe2672c4c9f7eb5c13c899fe1caf92b8d2f7087976e48562630152279cc54d0323c5b570a84dcb34de0cea2cc35bceb580df7663c8b465b6c426d4d4cacb5a658d13a05dd463fe47f00"  # noqa: E501
                 )
             )
+
+        await trade_manager_maker.save_trade(*create_tr_for_offer(old_maker_offer))
     else:
         success, trade_make, error = await trade_manager_maker.create_offer_for_ids(
             offer_dict, driver_dict, fee=maker_fee
         )
         assert success is True
         assert error is None
         assert trade_make is not None
@@ -1681,10 +1684,10 @@
     await time_out_assert(
         30,
         get_cat_wallet_and_check_balance,
         maker_cat_funds_taker + CAT_REQUESTED,
         cat_wallet_maker.get_asset_id(),
         wsm_taker,
     )
-    assert await basic_nft_wallet_maker.get_nft_count() == 3
-    assert await basic_nft_wallet_taker.get_nft_count() == 0
+    await time_out_assert(20, get_nft_count, 3, basic_nft_wallet_maker)
+    await time_out_assert(20, get_nft_count, 0, basic_nft_wallet_taker)
     assert await basic_nft_wallet_maker.nft_store.get_nft_by_id(nft_to_offer_asset_id_maker) is not None
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_bulk_mint.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_bulk_mint.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_lifecycle.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_offers.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_offers.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_puzzles.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_puzzles.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_nft_wallet.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_nft_wallet.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/nft_wallet/test_ownership_outer_puzzle.py` & `chia-blockchain-2.0.0b3/tests/wallet/nft_wallet/test_ownership_outer_puzzle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/rpc/test_dl_wallet_rpc.py` & `chia-blockchain-2.0.0b3/tests/wallet/rpc/test_dl_wallet_rpc.py`

 * *Files 1% similar despite different names*

```diff
@@ -107,14 +107,18 @@
             new_singleton_record = await client.dl_latest_singleton(launcher_id)
             assert new_singleton_record is not None
             assert new_singleton_record.root == new_root
             assert new_singleton_record.confirmed
 
             assert await client.dl_history(launcher_id) == [new_singleton_record, singleton_record]
 
+            # Test tracking a launcher id that does not exist
+            with pytest.raises(ValueError):
+                await client_2.dl_track_new(bytes32([1] * 32))
+
             await client_2.dl_track_new(launcher_id)
 
             async def is_singleton_generation(rpc_client: WalletRpcClient, lid: bytes32, generation: int) -> bool:
                 if await is_singleton_confirmed(rpc_client, lid):
                     rec = await rpc_client.dl_latest_singleton(lid)
                     if rec is None:
                         raise Exception("No latest singleton for: {lid!r}")
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/rpc/test_wallet_rpc.py` & `chia-blockchain-2.0.0b3/tests/wallet/rpc/test_wallet_rpc.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,4666 +1,6151 @@
 00000000: 6672 6f6d 205f 5f66 7574 7572 655f 5f20  from __future__ 
 00000010: 696d 706f 7274 2061 6e6e 6f74 6174 696f  import annotatio
-00000020: 6e73 0a0a 696d 706f 7274 2064 6174 6163  ns..import datac
-00000030: 6c61 7373 6573 0a69 6d70 6f72 7420 6a73  lasses.import js
-00000040: 6f6e 0a69 6d70 6f72 7420 6c6f 6767 696e  on.import loggin
-00000050: 670a 6672 6f6d 206f 7065 7261 746f 7220  g.from operator 
-00000060: 696d 706f 7274 2061 7474 7267 6574 7465  import attrgette
-00000070: 720a 6672 6f6d 2074 7970 696e 6720 696d  r.from typing im
-00000080: 706f 7274 2041 6e79 2c20 4469 6374 2c20  port Any, Dict, 
-00000090: 4c69 7374 2c20 4f70 7469 6f6e 616c 2c20  List, Optional, 
-000000a0: 5475 706c 652c 2063 6173 740a 0a69 6d70  Tuple, cast..imp
-000000b0: 6f72 7420 6169 6f73 716c 6974 650a 696d  ort aiosqlite.im
-000000c0: 706f 7274 2070 7974 6573 740a 696d 706f  port pytest.impo
-000000d0: 7274 2070 7974 6573 745f 6173 796e 6369  rt pytest_asynci
-000000e0: 6f0a 6672 6f6d 2062 6c73 7079 2069 6d70  o.from blspy imp
-000000f0: 6f72 7420 4732 456c 656d 656e 740a 0a66  ort G2Element..f
-00000100: 726f 6d20 6368 6961 2e63 6f6e 7365 6e73  rom chia.consens
-00000110: 7573 2e62 6c6f 636b 5f72 6577 6172 6473  us.block_rewards
-00000120: 2069 6d70 6f72 7420 6361 6c63 756c 6174   import calculat
-00000130: 655f 6261 7365 5f66 6172 6d65 725f 7265  e_base_farmer_re
-00000140: 7761 7264 2c20 6361 6c63 756c 6174 655f  ward, calculate_
-00000150: 706f 6f6c 5f72 6577 6172 640a 6672 6f6d  pool_reward.from
-00000160: 2063 6869 612e 636f 6e73 656e 7375 732e   chia.consensus.
-00000170: 636f 696e 6261 7365 2069 6d70 6f72 7420  coinbase import 
-00000180: 6372 6561 7465 5f70 757a 7a6c 6568 6173  create_puzzlehas
-00000190: 685f 666f 725f 706b 0a66 726f 6d20 6368  h_for_pk.from ch
-000001a0: 6961 2e72 7063 2e66 756c 6c5f 6e6f 6465  ia.rpc.full_node
-000001b0: 5f72 7063 5f63 6c69 656e 7420 696d 706f  _rpc_client impo
-000001c0: 7274 2046 756c 6c4e 6f64 6552 7063 436c  rt FullNodeRpcCl
-000001d0: 6965 6e74 0a66 726f 6d20 6368 6961 2e72  ient.from chia.r
-000001e0: 7063 2e72 7063 5f73 6572 7665 7220 696d  pc.rpc_server im
-000001f0: 706f 7274 2052 7063 5365 7276 6572 0a66  port RpcServer.f
-00000200: 726f 6d20 6368 6961 2e72 7063 2e77 616c  rom chia.rpc.wal
-00000210: 6c65 745f 7270 635f 6170 6920 696d 706f  let_rpc_api impo
-00000220: 7274 2057 616c 6c65 7452 7063 4170 690a  rt WalletRpcApi.
-00000230: 6672 6f6d 2063 6869 612e 7270 632e 7761  from chia.rpc.wa
-00000240: 6c6c 6574 5f72 7063 5f63 6c69 656e 7420  llet_rpc_client 
-00000250: 696d 706f 7274 2057 616c 6c65 7452 7063  import WalletRpc
-00000260: 436c 6965 6e74 0a66 726f 6d20 6368 6961  Client.from chia
-00000270: 2e73 6572 7665 722e 7365 7276 6572 2069  .server.server i
-00000280: 6d70 6f72 7420 4368 6961 5365 7276 6572  mport ChiaServer
-00000290: 0a66 726f 6d20 6368 6961 2e73 6572 7665  .from chia.serve
-000002a0: 722e 7374 6172 745f 7365 7276 6963 6520  r.start_service 
-000002b0: 696d 706f 7274 2053 6572 7669 6365 0a66  import Service.f
-000002c0: 726f 6d20 6368 6961 2e73 696d 756c 6174  rom chia.simulat
-000002d0: 6f72 2e66 756c 6c5f 6e6f 6465 5f73 696d  or.full_node_sim
-000002e0: 756c 6174 6f72 2069 6d70 6f72 7420 4675  ulator import Fu
-000002f0: 6c6c 4e6f 6465 5369 6d75 6c61 746f 720a  llNodeSimulator.
-00000300: 6672 6f6d 2063 6869 612e 7369 6d75 6c61  from chia.simula
-00000310: 746f 722e 7369 6d75 6c61 746f 725f 7072  tor.simulator_pr
-00000320: 6f74 6f63 6f6c 2069 6d70 6f72 7420 4661  otocol import Fa
-00000330: 726d 4e65 7742 6c6f 636b 5072 6f74 6f63  rmNewBlockProtoc
-00000340: 6f6c 0a66 726f 6d20 6368 6961 2e73 696d  ol.from chia.sim
-00000350: 756c 6174 6f72 2e74 696d 655f 6f75 745f  ulator.time_out_
-00000360: 6173 7365 7274 2069 6d70 6f72 7420 7469  assert import ti
-00000370: 6d65 5f6f 7574 5f61 7373 6572 740a 6672  me_out_assert.fr
-00000380: 6f6d 2063 6869 612e 7479 7065 732e 616e  om chia.types.an
-00000390: 6e6f 756e 6365 6d65 6e74 2069 6d70 6f72  nouncement impor
-000003a0: 7420 416e 6e6f 756e 6365 6d65 6e74 0a66  t Announcement.f
-000003b0: 726f 6d20 6368 6961 2e74 7970 6573 2e62  rom chia.types.b
-000003c0: 6c6f 636b 6368 6169 6e5f 666f 726d 6174  lockchain_format
-000003d0: 2e63 6f69 6e20 696d 706f 7274 2043 6f69  .coin import Coi
-000003e0: 6e2c 2063 6f69 6e5f 6173 5f6c 6973 740a  n, coin_as_list.
-000003f0: 6672 6f6d 2063 6869 612e 7479 7065 732e  from chia.types.
-00000400: 626c 6f63 6b63 6861 696e 5f66 6f72 6d61  blockchain_forma
-00000410: 742e 7072 6f67 7261 6d20 696d 706f 7274  t.program import
-00000420: 2050 726f 6772 616d 0a66 726f 6d20 6368   Program.from ch
-00000430: 6961 2e74 7970 6573 2e62 6c6f 636b 6368  ia.types.blockch
-00000440: 6169 6e5f 666f 726d 6174 2e73 697a 6564  ain_format.sized
-00000450: 5f62 7974 6573 2069 6d70 6f72 7420 6279  _bytes import by
-00000460: 7465 7333 320a 6672 6f6d 2063 6869 612e  tes32.from chia.
-00000470: 7479 7065 732e 636f 696e 5f72 6563 6f72  types.coin_recor
-00000480: 6420 696d 706f 7274 2043 6f69 6e52 6563  d import CoinRec
-00000490: 6f72 640a 6672 6f6d 2063 6869 612e 7479  ord.from chia.ty
-000004a0: 7065 732e 636f 696e 5f73 7065 6e64 2069  pes.coin_spend i
-000004b0: 6d70 6f72 7420 436f 696e 5370 656e 640a  mport CoinSpend.
-000004c0: 6672 6f6d 2063 6869 612e 7479 7065 732e  from chia.types.
-000004d0: 7065 6572 5f69 6e66 6f20 696d 706f 7274  peer_info import
-000004e0: 2050 6565 7249 6e66 6f0a 6672 6f6d 2063   PeerInfo.from c
-000004f0: 6869 612e 7479 7065 732e 7369 676e 696e  hia.types.signin
-00000500: 675f 6d6f 6465 2069 6d70 6f72 7420 5369  g_mode import Si
-00000510: 676e 696e 674d 6f64 650a 6672 6f6d 2063  gningMode.from c
-00000520: 6869 612e 7479 7065 732e 7370 656e 645f  hia.types.spend_
-00000530: 6275 6e64 6c65 2069 6d70 6f72 7420 5370  bundle import Sp
-00000540: 656e 6442 756e 646c 650a 6672 6f6d 2063  endBundle.from c
-00000550: 6869 612e 7574 696c 2e62 6563 6833 326d  hia.util.bech32m
-00000560: 2069 6d70 6f72 7420 6465 636f 6465 5f70   import decode_p
-00000570: 757a 7a6c 655f 6861 7368 2c20 656e 636f  uzzle_hash, enco
-00000580: 6465 5f70 757a 7a6c 655f 6861 7368 0a66  de_puzzle_hash.f
-00000590: 726f 6d20 6368 6961 2e75 7469 6c2e 636f  rom chia.util.co
-000005a0: 6e66 6967 2069 6d70 6f72 7420 6c6f 6164  nfig import load
-000005b0: 5f63 6f6e 6669 672c 206c 6f63 6b5f 616e  _config, lock_an
-000005c0: 645f 6c6f 6164 5f63 6f6e 6669 672c 2073  d_load_config, s
-000005d0: 6176 655f 636f 6e66 6967 0a66 726f 6d20  ave_config.from 
-000005e0: 6368 6961 2e75 7469 6c2e 6462 5f77 7261  chia.util.db_wra
-000005f0: 7070 6572 2069 6d70 6f72 7420 4442 5772  pper import DBWr
-00000600: 6170 7065 7232 0a66 726f 6d20 6368 6961  apper2.from chia
-00000610: 2e75 7469 6c2e 6861 7368 2069 6d70 6f72  .util.hash impor
-00000620: 7420 7374 645f 6861 7368 0a66 726f 6d20  t std_hash.from 
-00000630: 6368 6961 2e75 7469 6c2e 696e 7473 2069  chia.util.ints i
-00000640: 6d70 6f72 7420 7569 6e74 3136 2c20 7569  mport uint16, ui
-00000650: 6e74 3332 2c20 7569 6e74 3634 0a66 726f  nt32, uint64.fro
-00000660: 6d20 6368 6961 2e77 616c 6c65 742e 6361  m chia.wallet.ca
-00000670: 745f 7761 6c6c 6574 2e63 6174 5f63 6f6e  t_wallet.cat_con
-00000680: 7374 616e 7473 2069 6d70 6f72 7420 4445  stants import DE
-00000690: 4641 554c 545f 4341 5453 0a66 726f 6d20  FAULT_CATS.from 
-000006a0: 6368 6961 2e77 616c 6c65 742e 6361 745f  chia.wallet.cat_
-000006b0: 7761 6c6c 6574 2e63 6174 5f75 7469 6c73  wallet.cat_utils
-000006c0: 2069 6d70 6f72 7420 636f 6e73 7472 7563   import construc
-000006d0: 745f 6361 745f 7075 7a7a 6c65 0a66 726f  t_cat_puzzle.fro
-000006e0: 6d20 6368 6961 2e77 616c 6c65 742e 6361  m chia.wallet.ca
-000006f0: 745f 7761 6c6c 6574 2e63 6174 5f77 616c  t_wallet.cat_wal
-00000700: 6c65 7420 696d 706f 7274 2043 4154 5761  let import CATWa
-00000710: 6c6c 6574 0a66 726f 6d20 6368 6961 2e77  llet.from chia.w
-00000720: 616c 6c65 742e 6465 7269 7665 5f6b 6579  allet.derive_key
-00000730: 7320 696d 706f 7274 206d 6173 7465 725f  s import master_
-00000740: 736b 5f74 6f5f 7761 6c6c 6574 5f73 6b2c  sk_to_wallet_sk,
-00000750: 206d 6173 7465 725f 736b 5f74 6f5f 7761   master_sk_to_wa
-00000760: 6c6c 6574 5f73 6b5f 756e 6861 7264 656e  llet_sk_unharden
-00000770: 6564 0a66 726f 6d20 6368 6961 2e77 616c  ed.from chia.wal
-00000780: 6c65 742e 6469 645f 7761 6c6c 6574 2e64  let.did_wallet.d
-00000790: 6964 5f77 616c 6c65 7420 696d 706f 7274  id_wallet import
-000007a0: 2044 4944 5761 6c6c 6574 0a66 726f 6d20   DIDWallet.from 
-000007b0: 6368 6961 2e77 616c 6c65 742e 6e66 745f  chia.wallet.nft_
-000007c0: 7761 6c6c 6574 2e6e 6674 5f77 616c 6c65  wallet.nft_walle
-000007d0: 7420 696d 706f 7274 204e 4654 5761 6c6c  t import NFTWall
-000007e0: 6574 0a66 726f 6d20 6368 6961 2e77 616c  et.from chia.wal
-000007f0: 6c65 742e 7075 7a7a 6c65 732e 6361 745f  let.puzzles.cat_
-00000800: 6c6f 6164 6572 2069 6d70 6f72 7420 4341  loader import CA
-00000810: 545f 4d4f 440a 6672 6f6d 2063 6869 612e  T_MOD.from chia.
-00000820: 7761 6c6c 6574 2e74 7261 6469 6e67 2e74  wallet.trading.t
-00000830: 7261 6465 5f73 7461 7475 7320 696d 706f  rade_status impo
-00000840: 7274 2054 7261 6465 5374 6174 7573 0a66  rt TradeStatus.f
-00000850: 726f 6d20 6368 6961 2e77 616c 6c65 742e  rom chia.wallet.
-00000860: 7472 616e 7361 6374 696f 6e5f 7265 636f  transaction_reco
-00000870: 7264 2069 6d70 6f72 7420 5472 616e 7361  rd import Transa
-00000880: 6374 696f 6e52 6563 6f72 640a 6672 6f6d  ctionRecord.from
-00000890: 2063 6869 612e 7761 6c6c 6574 2e74 7261   chia.wallet.tra
-000008a0: 6e73 6163 7469 6f6e 5f73 6f72 7469 6e67  nsaction_sorting
-000008b0: 2069 6d70 6f72 7420 536f 7274 4b65 790a   import SortKey.
-000008c0: 6672 6f6d 2063 6869 612e 7761 6c6c 6574  from chia.wallet
-000008d0: 2e75 6e63 7572 7269 6564 5f70 757a 7a6c  .uncurried_puzzl
-000008e0: 6520 696d 706f 7274 2075 6e63 7572 7279  e import uncurry
-000008f0: 5f70 757a 7a6c 650a 6672 6f6d 2063 6869  _puzzle.from chi
-00000900: 612e 7761 6c6c 6574 2e75 7469 6c2e 6164  a.wallet.util.ad
-00000910: 6472 6573 735f 7479 7065 2069 6d70 6f72  dress_type impor
-00000920: 7420 4164 6472 6573 7354 7970 650a 6672  t AddressType.fr
-00000930: 6f6d 2063 6869 612e 7761 6c6c 6574 2e75  om chia.wallet.u
-00000940: 7469 6c2e 636f 6d70 7574 655f 6d65 6d6f  til.compute_memo
-00000950: 7320 696d 706f 7274 2063 6f6d 7075 7465  s import compute
-00000960: 5f6d 656d 6f73 0a66 726f 6d20 6368 6961  _memos.from chia
-00000970: 2e77 616c 6c65 742e 7574 696c 2e77 616c  .wallet.util.wal
-00000980: 6c65 745f 7479 7065 7320 696d 706f 7274  let_types import
-00000990: 2057 616c 6c65 7454 7970 650a 6672 6f6d   WalletType.from
-000009a0: 2063 6869 612e 7761 6c6c 6574 2e77 616c   chia.wallet.wal
-000009b0: 6c65 7420 696d 706f 7274 2057 616c 6c65  let import Walle
-000009c0: 740a 6672 6f6d 2063 6869 612e 7761 6c6c  t.from chia.wall
-000009d0: 6574 2e77 616c 6c65 745f 6e6f 6465 2069  et.wallet_node i
-000009e0: 6d70 6f72 7420 5761 6c6c 6574 4e6f 6465  mport WalletNode
-000009f0: 0a66 726f 6d20 6368 6961 2e77 616c 6c65  .from chia.walle
-00000a00: 742e 7761 6c6c 6574 5f70 726f 746f 636f  t.wallet_protoco
-00000a10: 6c20 696d 706f 7274 2057 616c 6c65 7450  l import WalletP
-00000a20: 726f 746f 636f 6c0a 0a6c 6f67 203d 206c  rotocol..log = l
-00000a30: 6f67 6769 6e67 2e67 6574 4c6f 6767 6572  ogging.getLogger
-00000a40: 285f 5f6e 616d 655f 5f29 0a0a 0a40 6461  (__name__)...@da
-00000a50: 7461 636c 6173 7365 732e 6461 7461 636c  taclasses.datacl
-00000a60: 6173 730a 636c 6173 7320 5761 6c6c 6574  ass.class Wallet
-00000a70: 4275 6e64 6c65 3a0a 2020 2020 7365 7276  Bundle:.    serv
-00000a80: 6963 653a 2053 6572 7669 6365 0a20 2020  ice: Service.   
-00000a90: 206e 6f64 653a 2057 616c 6c65 744e 6f64   node: WalletNod
-00000aa0: 650a 2020 2020 7270 635f 636c 6965 6e74  e.    rpc_client
-00000ab0: 3a20 5761 6c6c 6574 5270 6343 6c69 656e  : WalletRpcClien
-00000ac0: 740a 2020 2020 7761 6c6c 6574 3a20 5761  t.    wallet: Wa
-00000ad0: 6c6c 6574 0a0a 0a40 6461 7461 636c 6173  llet...@dataclas
-00000ae0: 7365 732e 6461 7461 636c 6173 730a 636c  ses.dataclass.cl
-00000af0: 6173 7320 4675 6c6c 4e6f 6465 4275 6e64  ass FullNodeBund
-00000b00: 6c65 3a0a 2020 2020 7365 7276 6572 3a20  le:.    server: 
-00000b10: 4368 6961 5365 7276 6572 0a20 2020 2061  ChiaServer.    a
-00000b20: 7069 3a20 4675 6c6c 4e6f 6465 5369 6d75  pi: FullNodeSimu
-00000b30: 6c61 746f 720a 2020 2020 7270 635f 636c  lator.    rpc_cl
-00000b40: 6965 6e74 3a20 4675 6c6c 4e6f 6465 5270  ient: FullNodeRp
-00000b50: 6343 6c69 656e 740a 0a0a 4064 6174 6163  cClient...@datac
-00000b60: 6c61 7373 6573 2e64 6174 6163 6c61 7373  lasses.dataclass
-00000b70: 0a63 6c61 7373 2057 616c 6c65 7452 7063  .class WalletRpc
-00000b80: 5465 7374 456e 7669 726f 6e6d 656e 743a  TestEnvironment:
-00000b90: 0a20 2020 2077 616c 6c65 745f 313a 2057  .    wallet_1: W
-00000ba0: 616c 6c65 7442 756e 646c 650a 2020 2020  alletBundle.    
-00000bb0: 7761 6c6c 6574 5f32 3a20 5761 6c6c 6574  wallet_2: Wallet
-00000bc0: 4275 6e64 6c65 0a20 2020 2066 756c 6c5f  Bundle.    full_
-00000bd0: 6e6f 6465 3a20 4675 6c6c 4e6f 6465 4275  node: FullNodeBu
-00000be0: 6e64 6c65 0a0a 0a61 7379 6e63 2064 6566  ndle...async def
-00000bf0: 2066 6172 6d5f 7472 616e 7361 6374 696f   farm_transactio
-00000c00: 6e5f 626c 6f63 6b28 6675 6c6c 5f6e 6f64  n_block(full_nod
-00000c10: 655f 6170 693a 2046 756c 6c4e 6f64 6553  e_api: FullNodeS
-00000c20: 696d 756c 6174 6f72 2c20 7761 6c6c 6574  imulator, wallet
-00000c30: 5f6e 6f64 653a 2057 616c 6c65 744e 6f64  _node: WalletNod
-00000c40: 6529 3a0a 2020 2020 6177 6169 7420 6675  e):.    await fu
-00000c50: 6c6c 5f6e 6f64 655f 6170 692e 6661 726d  ll_node_api.farm
-00000c60: 5f6e 6577 5f74 7261 6e73 6163 7469 6f6e  _new_transaction
-00000c70: 5f62 6c6f 636b 2846 6172 6d4e 6577 426c  _block(FarmNewBl
-00000c80: 6f63 6b50 726f 746f 636f 6c28 6279 7465  ockProtocol(byte
-00000c90: 7333 3228 6222 5c30 3022 202a 2033 3229  s32(b"\00" * 32)
-00000ca0: 2929 0a20 2020 2061 7761 6974 2066 756c  )).    await ful
-00000cb0: 6c5f 6e6f 6465 5f61 7069 2e77 6169 745f  l_node_api.wait_
-00000cc0: 666f 725f 7761 6c6c 6574 5f73 796e 6365  for_wallet_synce
-00000cd0: 6428 7761 6c6c 6574 5f6e 6f64 653d 7761  d(wallet_node=wa
-00000ce0: 6c6c 6574 5f6e 6f64 652c 2074 696d 656f  llet_node, timeo
-00000cf0: 7574 3d32 3029 0a0a 0a64 6566 2063 6865  ut=20)...def che
-00000d00: 636b 5f6d 656d 706f 6f6c 5f73 7065 6e64  ck_mempool_spend
-00000d10: 5f63 6f75 6e74 2866 756c 6c5f 6e6f 6465  _count(full_node
-00000d20: 5f61 7069 3a20 4675 6c6c 4e6f 6465 5369  _api: FullNodeSi
-00000d30: 6d75 6c61 746f 722c 206e 756d 5f6f 665f  mulator, num_of_
-00000d40: 7370 656e 6473 293a 0a20 2020 2072 6574  spends):.    ret
-00000d50: 7572 6e20 6675 6c6c 5f6e 6f64 655f 6170  urn full_node_ap
-00000d60: 692e 6675 6c6c 5f6e 6f64 652e 6d65 6d70  i.full_node.memp
-00000d70: 6f6f 6c5f 6d61 6e61 6765 722e 6d65 6d70  ool_manager.memp
-00000d80: 6f6f 6c2e 7369 7a65 2829 203d 3d20 6e75  ool.size() == nu
-00000d90: 6d5f 6f66 5f73 7065 6e64 730a 0a0a 6173  m_of_spends...as
-00000da0: 796e 6320 6465 6620 6661 726d 5f74 7261  ync def farm_tra
-00000db0: 6e73 6163 7469 6f6e 2866 756c 6c5f 6e6f  nsaction(full_no
-00000dc0: 6465 5f61 7069 3a20 4675 6c6c 4e6f 6465  de_api: FullNode
-00000dd0: 5369 6d75 6c61 746f 722c 2077 616c 6c65  Simulator, walle
-00000de0: 745f 6e6f 6465 3a20 5761 6c6c 6574 4e6f  t_node: WalletNo
-00000df0: 6465 2c20 7370 656e 645f 6275 6e64 6c65  de, spend_bundle
-00000e00: 3a20 5370 656e 6442 756e 646c 6529 3a0a  : SpendBundle):.
-00000e10: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
-00000e20: 7574 5f61 7373 6572 7428 0a20 2020 2020  ut_assert(.     
-00000e30: 2020 2032 302c 2066 756c 6c5f 6e6f 6465     20, full_node
-00000e40: 5f61 7069 2e66 756c 6c5f 6e6f 6465 2e6d  _api.full_node.m
-00000e50: 656d 706f 6f6c 5f6d 616e 6167 6572 2e67  empool_manager.g
-00000e60: 6574 5f73 7065 6e64 6275 6e64 6c65 2c20  et_spendbundle, 
-00000e70: 7370 656e 645f 6275 6e64 6c65 2c20 7370  spend_bundle, sp
-00000e80: 656e 645f 6275 6e64 6c65 2e6e 616d 6528  end_bundle.name(
-00000e90: 290a 2020 2020 290a 2020 2020 6177 6169  ).    ).    awai
-00000ea0: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
-00000eb0: 6f6e 5f62 6c6f 636b 2866 756c 6c5f 6e6f  on_block(full_no
-00000ec0: 6465 5f61 7069 2c20 7761 6c6c 6574 5f6e  de_api, wallet_n
-00000ed0: 6f64 6529 0a20 2020 2061 7373 6572 7420  ode).    assert 
-00000ee0: 6675 6c6c 5f6e 6f64 655f 6170 692e 6675  full_node_api.fu
-00000ef0: 6c6c 5f6e 6f64 652e 6d65 6d70 6f6f 6c5f  ll_node.mempool_
-00000f00: 6d61 6e61 6765 722e 6765 745f 7370 656e  manager.get_spen
-00000f10: 6462 756e 646c 6528 7370 656e 645f 6275  dbundle(spend_bu
-00000f20: 6e64 6c65 2e6e 616d 6528 2929 2069 7320  ndle.name()) is 
-00000f30: 4e6f 6e65 0a0a 0a61 7379 6e63 2064 6566  None...async def
-00000f40: 2067 656e 6572 6174 655f 6675 6e64 7328   generate_funds(
-00000f50: 6675 6c6c 5f6e 6f64 655f 6170 693a 2046  full_node_api: F
-00000f60: 756c 6c4e 6f64 6553 696d 756c 6174 6f72  ullNodeSimulator
-00000f70: 2c20 7761 6c6c 6574 5f62 756e 646c 653a  , wallet_bundle:
-00000f80: 2057 616c 6c65 7442 756e 646c 652c 206e   WalletBundle, n
-00000f90: 756d 5f62 6c6f 636b 733a 2069 6e74 203d  um_blocks: int =
-00000fa0: 2031 293a 0a20 2020 2077 616c 6c65 745f   1):.    wallet_
-00000fb0: 6964 203d 2031 0a20 2020 2069 6e69 7469  id = 1.    initi
-00000fc0: 616c 5f62 616c 616e 6365 7320 3d20 6177  al_balances = aw
-00000fd0: 6169 7420 7761 6c6c 6574 5f62 756e 646c  ait wallet_bundl
-00000fe0: 652e 7270 635f 636c 6965 6e74 2e67 6574  e.rpc_client.get
-00000ff0: 5f77 616c 6c65 745f 6261 6c61 6e63 6528  _wallet_balance(
-00001000: 7761 6c6c 6574 5f69 6429 0a20 2020 2070  wallet_id).    p
-00001010: 683a 2062 7974 6573 3332 203d 2064 6563  h: bytes32 = dec
-00001020: 6f64 655f 7075 7a7a 6c65 5f68 6173 6828  ode_puzzle_hash(
-00001030: 6177 6169 7420 7761 6c6c 6574 5f62 756e  await wallet_bun
-00001040: 646c 652e 7270 635f 636c 6965 6e74 2e67  dle.rpc_client.g
-00001050: 6574 5f6e 6578 745f 6164 6472 6573 7328  et_next_address(
-00001060: 7761 6c6c 6574 5f69 642c 2054 7275 6529  wallet_id, True)
-00001070: 290a 2020 2020 6765 6e65 7261 7465 645f  ).    generated_
-00001080: 6675 6e64 7320 3d20 300a 2020 2020 666f  funds = 0.    fo
-00001090: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-000010a0: 6e75 6d5f 626c 6f63 6b73 293a 0a20 2020  num_blocks):.   
-000010b0: 2020 2020 2061 7761 6974 2066 756c 6c5f       await full_
-000010c0: 6e6f 6465 5f61 7069 2e66 6172 6d5f 6e65  node_api.farm_ne
-000010d0: 775f 7472 616e 7361 6374 696f 6e5f 626c  w_transaction_bl
-000010e0: 6f63 6b28 4661 726d 4e65 7742 6c6f 636b  ock(FarmNewBlock
-000010f0: 5072 6f74 6f63 6f6c 2870 6829 290a 2020  Protocol(ph)).  
-00001100: 2020 2020 2020 7065 616b 5f68 6569 6768        peak_heigh
-00001110: 7420 3d20 6675 6c6c 5f6e 6f64 655f 6170  t = full_node_ap
-00001120: 692e 6675 6c6c 5f6e 6f64 652e 626c 6f63  i.full_node.bloc
-00001130: 6b63 6861 696e 2e67 6574 5f70 6561 6b5f  kchain.get_peak_
-00001140: 6865 6967 6874 2829 0a20 2020 2020 2020  height().       
-00001150: 2061 7373 6572 7420 7065 616b 5f68 6569   assert peak_hei
-00001160: 6768 7420 6973 206e 6f74 204e 6f6e 650a  ght is not None.
-00001170: 2020 2020 2020 2020 6765 6e65 7261 7465          generate
-00001180: 645f 6675 6e64 7320 2b3d 2063 616c 6375  d_funds += calcu
-00001190: 6c61 7465 5f70 6f6f 6c5f 7265 7761 7264  late_pool_reward
-000011a0: 2870 6561 6b5f 6865 6967 6874 2920 2b20  (peak_height) + 
-000011b0: 6361 6c63 756c 6174 655f 6261 7365 5f66  calculate_base_f
-000011c0: 6172 6d65 725f 7265 7761 7264 2870 6561  armer_reward(pea
-000011d0: 6b5f 6865 6967 6874 290a 0a20 2020 2023  k_height)..    #
-000011e0: 2046 6172 6d20 6120 6475 6d6d 7920 626c   Farm a dummy bl
-000011f0: 6f63 6b20 746f 2063 6f6e 6669 726d 2074  ock to confirm t
-00001200: 6865 2063 7265 6174 6564 2066 756e 6473  he created funds
-00001210: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
-00001220: 7472 616e 7361 6374 696f 6e5f 626c 6f63  transaction_bloc
-00001230: 6b28 6675 6c6c 5f6e 6f64 655f 6170 692c  k(full_node_api,
-00001240: 2077 616c 6c65 745f 6275 6e64 6c65 2e6e   wallet_bundle.n
-00001250: 6f64 6529 0a0a 2020 2020 6578 7065 6374  ode)..    expect
-00001260: 6564 5f63 6f6e 6669 726d 6564 203d 2069  ed_confirmed = i
-00001270: 6e69 7469 616c 5f62 616c 616e 6365 735b  nitial_balances[
-00001280: 2263 6f6e 6669 726d 6564 5f77 616c 6c65  "confirmed_walle
-00001290: 745f 6261 6c61 6e63 6522 5d20 2b20 6765  t_balance"] + ge
-000012a0: 6e65 7261 7465 645f 6675 6e64 730a 2020  nerated_funds.  
-000012b0: 2020 6578 7065 6374 6564 5f75 6e63 6f6e    expected_uncon
-000012c0: 6669 726d 6564 203d 2069 6e69 7469 616c  firmed = initial
-000012d0: 5f62 616c 616e 6365 735b 2275 6e63 6f6e  _balances["uncon
-000012e0: 6669 726d 6564 5f77 616c 6c65 745f 6261  firmed_wallet_ba
-000012f0: 6c61 6e63 6522 5d20 2b20 6765 6e65 7261  lance"] + genera
-00001300: 7465 645f 6675 6e64 730a 2020 2020 6177  ted_funds.    aw
-00001310: 6169 7420 7469 6d65 5f6f 7574 5f61 7373  ait time_out_ass
-00001320: 6572 7428 3230 2c20 6765 745f 636f 6e66  ert(20, get_conf
-00001330: 6972 6d65 645f 6261 6c61 6e63 652c 2065  irmed_balance, e
-00001340: 7870 6563 7465 645f 636f 6e66 6972 6d65  xpected_confirme
-00001350: 642c 2077 616c 6c65 745f 6275 6e64 6c65  d, wallet_bundle
-00001360: 2e72 7063 5f63 6c69 656e 742c 2077 616c  .rpc_client, wal
-00001370: 6c65 745f 6964 290a 2020 2020 6177 6169  let_id).    awai
-00001380: 7420 7469 6d65 5f6f 7574 5f61 7373 6572  t time_out_asser
-00001390: 7428 3230 2c20 6765 745f 756e 636f 6e66  t(20, get_unconf
-000013a0: 6972 6d65 645f 6261 6c61 6e63 652c 2065  irmed_balance, e
-000013b0: 7870 6563 7465 645f 756e 636f 6e66 6972  xpected_unconfir
-000013c0: 6d65 642c 2077 616c 6c65 745f 6275 6e64  med, wallet_bund
-000013d0: 6c65 2e72 7063 5f63 6c69 656e 742c 2077  le.rpc_client, w
-000013e0: 616c 6c65 745f 6964 290a 2020 2020 6177  allet_id).    aw
-000013f0: 6169 7420 7469 6d65 5f6f 7574 5f61 7373  ait time_out_ass
-00001400: 6572 7428 3230 2c20 7761 6c6c 6574 5f62  ert(20, wallet_b
-00001410: 756e 646c 652e 7270 635f 636c 6965 6e74  undle.rpc_client
-00001420: 2e67 6574 5f73 796e 6365 6429 0a0a 2020  .get_synced)..  
-00001430: 2020 7265 7475 726e 2067 656e 6572 6174    return generat
-00001440: 6564 5f66 756e 6473 0a0a 0a40 7079 7465  ed_funds...@pyte
-00001450: 7374 5f61 7379 6e63 696f 2e66 6978 7475  st_asyncio.fixtu
-00001460: 7265 2873 636f 7065 3d22 6675 6e63 7469  re(scope="functi
-00001470: 6f6e 222c 2070 6172 616d 733d 5b54 7275  on", params=[Tru
-00001480: 652c 2046 616c 7365 5d29 0a61 7379 6e63  e, False]).async
-00001490: 2064 6566 2077 616c 6c65 745f 7270 635f   def wallet_rpc_
-000014a0: 656e 7669 726f 6e6d 656e 7428 7477 6f5f  environment(two_
-000014b0: 7761 6c6c 6574 5f6e 6f64 6573 5f73 6572  wallet_nodes_ser
-000014c0: 7669 6365 732c 2072 6571 7565 7374 2c20  vices, request, 
-000014d0: 7365 6c66 5f68 6f73 746e 616d 6529 3a0a  self_hostname):.
-000014e0: 2020 2020 6675 6c6c 5f6e 6f64 652c 2077      full_node, w
-000014f0: 616c 6c65 7473 2c20 6274 203d 2074 776f  allets, bt = two
-00001500: 5f77 616c 6c65 745f 6e6f 6465 735f 7365  _wallet_nodes_se
-00001510: 7276 6963 6573 0a20 2020 2066 756c 6c5f  rvices.    full_
-00001520: 6e6f 6465 5f73 6572 7669 6365 203d 2066  node_service = f
-00001530: 756c 6c5f 6e6f 6465 5b30 5d0a 2020 2020  ull_node[0].    
-00001540: 6675 6c6c 5f6e 6f64 655f 6170 6920 3d20  full_node_api = 
-00001550: 6675 6c6c 5f6e 6f64 655f 7365 7276 6963  full_node_servic
-00001560: 652e 5f61 7069 0a20 2020 2066 756c 6c5f  e._api.    full_
-00001570: 6e6f 6465 5f73 6572 7665 7220 3d20 6675  node_server = fu
-00001580: 6c6c 5f6e 6f64 655f 6170 692e 6675 6c6c  ll_node_api.full
-00001590: 5f6e 6f64 652e 7365 7276 6572 0a20 2020  _node.server.   
-000015a0: 2077 616c 6c65 745f 7365 7276 6963 6520   wallet_service 
-000015b0: 3d20 7761 6c6c 6574 735b 305d 0a20 2020  = wallets[0].   
-000015c0: 2077 616c 6c65 745f 7365 7276 6963 655f   wallet_service_
-000015d0: 3220 3d20 7761 6c6c 6574 735b 315d 0a20  2 = wallets[1]. 
-000015e0: 2020 2077 616c 6c65 745f 6e6f 6465 203d     wallet_node =
-000015f0: 2077 616c 6c65 745f 7365 7276 6963 652e   wallet_service.
-00001600: 5f6e 6f64 650a 2020 2020 7761 6c6c 6574  _node.    wallet
-00001610: 5f6e 6f64 655f 3220 3d20 7761 6c6c 6574  _node_2 = wallet
-00001620: 5f73 6572 7669 6365 5f32 2e5f 6e6f 6465  _service_2._node
-00001630: 0a20 2020 2077 616c 6c65 7420 3d20 7761  .    wallet = wa
-00001640: 6c6c 6574 5f6e 6f64 652e 7761 6c6c 6574  llet_node.wallet
-00001650: 5f73 7461 7465 5f6d 616e 6167 6572 2e6d  _state_manager.m
-00001660: 6169 6e5f 7761 6c6c 6574 0a20 2020 2077  ain_wallet.    w
-00001670: 616c 6c65 745f 3220 3d20 7761 6c6c 6574  allet_2 = wallet
-00001680: 5f6e 6f64 655f 322e 7761 6c6c 6574 5f73  _node_2.wallet_s
-00001690: 7461 7465 5f6d 616e 6167 6572 2e6d 6169  tate_manager.mai
-000016a0: 6e5f 7761 6c6c 6574 0a0a 2020 2020 636f  n_wallet..    co
-000016b0: 6e66 6967 203d 2062 742e 636f 6e66 6967  nfig = bt.config
-000016c0: 0a20 2020 2068 6f73 746e 616d 6520 3d20  .    hostname = 
-000016d0: 636f 6e66 6967 5b22 7365 6c66 5f68 6f73  config["self_hos
-000016e0: 746e 616d 6522 5d0a 0a20 2020 2069 6620  tname"]..    if 
-000016f0: 7265 7175 6573 742e 7061 7261 6d3a 0a20  request.param:. 
-00001700: 2020 2020 2020 2077 616c 6c65 745f 6e6f         wallet_no
-00001710: 6465 2e63 6f6e 6669 675b 2274 7275 7374  de.config["trust
-00001720: 6564 5f70 6565 7273 225d 203d 207b 6675  ed_peers"] = {fu
-00001730: 6c6c 5f6e 6f64 655f 7365 7276 6572 2e6e  ll_node_server.n
-00001740: 6f64 655f 6964 2e68 6578 2829 3a20 6675  ode_id.hex(): fu
-00001750: 6c6c 5f6e 6f64 655f 7365 7276 6572 2e6e  ll_node_server.n
-00001760: 6f64 655f 6964 2e68 6578 2829 7d0a 2020  ode_id.hex()}.  
-00001770: 2020 2020 2020 7761 6c6c 6574 5f6e 6f64        wallet_nod
-00001780: 655f 322e 636f 6e66 6967 5b22 7472 7573  e_2.config["trus
-00001790: 7465 645f 7065 6572 7322 5d20 3d20 7b66  ted_peers"] = {f
-000017a0: 756c 6c5f 6e6f 6465 5f73 6572 7665 722e  ull_node_server.
-000017b0: 6e6f 6465 5f69 642e 6865 7828 293a 2066  node_id.hex(): f
-000017c0: 756c 6c5f 6e6f 6465 5f73 6572 7665 722e  ull_node_server.
-000017d0: 6e6f 6465 5f69 642e 6865 7828 297d 0a20  node_id.hex()}. 
-000017e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000017f0: 2077 616c 6c65 745f 6e6f 6465 2e63 6f6e   wallet_node.con
-00001800: 6669 675b 2274 7275 7374 6564 5f70 6565  fig["trusted_pee
-00001810: 7273 225d 203d 207b 7d0a 2020 2020 2020  rs"] = {}.      
-00001820: 2020 7761 6c6c 6574 5f6e 6f64 655f 322e    wallet_node_2.
-00001830: 636f 6e66 6967 5b22 7472 7573 7465 645f  config["trusted_
-00001840: 7065 6572 7322 5d20 3d20 7b7d 0a0a 2020  peers"] = {}..  
-00001850: 2020 6177 6169 7420 7761 6c6c 6574 5f6e    await wallet_n
-00001860: 6f64 652e 7365 7276 6572 2e73 7461 7274  ode.server.start
-00001870: 5f63 6c69 656e 7428 5065 6572 496e 666f  _client(PeerInfo
-00001880: 2873 656c 665f 686f 7374 6e61 6d65 2c20  (self_hostname, 
-00001890: 7569 6e74 3136 2866 756c 6c5f 6e6f 6465  uint16(full_node
-000018a0: 5f73 6572 7665 722e 5f70 6f72 7429 292c  _server._port)),
-000018b0: 204e 6f6e 6529 0a20 2020 2061 7761 6974   None).    await
-000018c0: 2077 616c 6c65 745f 6e6f 6465 5f32 2e73   wallet_node_2.s
-000018d0: 6572 7665 722e 7374 6172 745f 636c 6965  erver.start_clie
-000018e0: 6e74 2850 6565 7249 6e66 6f28 7365 6c66  nt(PeerInfo(self
-000018f0: 5f68 6f73 746e 616d 652c 2075 696e 7431  _hostname, uint1
-00001900: 3628 6675 6c6c 5f6e 6f64 655f 7365 7276  6(full_node_serv
-00001910: 6572 2e5f 706f 7274 2929 2c20 4e6f 6e65  er._port)), None
-00001920: 290a 0a20 2020 2063 6c69 656e 7420 3d20  )..    client = 
-00001930: 6177 6169 7420 5761 6c6c 6574 5270 6343  await WalletRpcC
-00001940: 6c69 656e 742e 6372 6561 7465 280a 2020  lient.create(.  
-00001950: 2020 2020 2020 686f 7374 6e61 6d65 2c20        hostname, 
-00001960: 7761 6c6c 6574 5f73 6572 7669 6365 2e72  wallet_service.r
-00001970: 7063 5f73 6572 7665 722e 6c69 7374 656e  pc_server.listen
-00001980: 5f70 6f72 742c 2077 616c 6c65 745f 7365  _port, wallet_se
-00001990: 7276 6963 652e 726f 6f74 5f70 6174 682c  rvice.root_path,
-000019a0: 2077 616c 6c65 745f 7365 7276 6963 652e   wallet_service.
-000019b0: 636f 6e66 6967 0a20 2020 2029 0a20 2020  config.    ).   
-000019c0: 2063 6c69 656e 745f 3220 3d20 6177 6169   client_2 = awai
-000019d0: 7420 5761 6c6c 6574 5270 6343 6c69 656e  t WalletRpcClien
-000019e0: 742e 6372 6561 7465 280a 2020 2020 2020  t.create(.      
-000019f0: 2020 686f 7374 6e61 6d65 2c20 7761 6c6c    hostname, wall
-00001a00: 6574 5f73 6572 7669 6365 5f32 2e72 7063  et_service_2.rpc
-00001a10: 5f73 6572 7665 722e 6c69 7374 656e 5f70  _server.listen_p
-00001a20: 6f72 742c 2077 616c 6c65 745f 7365 7276  ort, wallet_serv
-00001a30: 6963 655f 322e 726f 6f74 5f70 6174 682c  ice_2.root_path,
-00001a40: 2077 616c 6c65 745f 7365 7276 6963 655f   wallet_service_
-00001a50: 322e 636f 6e66 6967 0a20 2020 2029 0a20  2.config.    ). 
-00001a60: 2020 2063 6c69 656e 745f 6e6f 6465 203d     client_node =
-00001a70: 2061 7761 6974 2046 756c 6c4e 6f64 6552   await FullNodeR
-00001a80: 7063 436c 6965 6e74 2e63 7265 6174 6528  pcClient.create(
-00001a90: 0a20 2020 2020 2020 2068 6f73 746e 616d  .        hostnam
-00001aa0: 652c 2066 756c 6c5f 6e6f 6465 5f73 6572  e, full_node_ser
-00001ab0: 7669 6365 2e72 7063 5f73 6572 7665 722e  vice.rpc_server.
-00001ac0: 6c69 7374 656e 5f70 6f72 742c 2066 756c  listen_port, ful
-00001ad0: 6c5f 6e6f 6465 5f73 6572 7669 6365 2e72  l_node_service.r
-00001ae0: 6f6f 745f 7061 7468 2c20 6675 6c6c 5f6e  oot_path, full_n
-00001af0: 6f64 655f 7365 7276 6963 652e 636f 6e66  ode_service.conf
-00001b00: 6967 0a20 2020 2029 0a0a 2020 2020 7761  ig.    )..    wa
-00001b10: 6c6c 6574 5f62 756e 646c 655f 313a 2057  llet_bundle_1: W
-00001b20: 616c 6c65 7442 756e 646c 6520 3d20 5761  alletBundle = Wa
-00001b30: 6c6c 6574 4275 6e64 6c65 2877 616c 6c65  lletBundle(walle
-00001b40: 745f 7365 7276 6963 652c 2077 616c 6c65  t_service, walle
-00001b50: 745f 6e6f 6465 2c20 636c 6965 6e74 2c20  t_node, client, 
-00001b60: 7761 6c6c 6574 290a 2020 2020 7761 6c6c  wallet).    wall
-00001b70: 6574 5f62 756e 646c 655f 323a 2057 616c  et_bundle_2: Wal
-00001b80: 6c65 7442 756e 646c 6520 3d20 5761 6c6c  letBundle = Wall
-00001b90: 6574 4275 6e64 6c65 2877 616c 6c65 745f  etBundle(wallet_
-00001ba0: 7365 7276 6963 655f 322c 2077 616c 6c65  service_2, walle
-00001bb0: 745f 6e6f 6465 5f32 2c20 636c 6965 6e74  t_node_2, client
-00001bc0: 5f32 2c20 7761 6c6c 6574 5f32 290a 2020  _2, wallet_2).  
-00001bd0: 2020 6e6f 6465 5f62 756e 646c 653a 2046    node_bundle: F
-00001be0: 756c 6c4e 6f64 6542 756e 646c 6520 3d20  ullNodeBundle = 
-00001bf0: 4675 6c6c 4e6f 6465 4275 6e64 6c65 2866  FullNodeBundle(f
-00001c00: 756c 6c5f 6e6f 6465 5f73 6572 7665 722c  ull_node_server,
-00001c10: 2066 756c 6c5f 6e6f 6465 5f61 7069 2c20   full_node_api, 
-00001c20: 636c 6965 6e74 5f6e 6f64 6529 0a0a 2020  client_node)..  
-00001c30: 2020 7969 656c 6420 5761 6c6c 6574 5270    yield WalletRp
-00001c40: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
-00001c50: 2877 616c 6c65 745f 6275 6e64 6c65 5f31  (wallet_bundle_1
-00001c60: 2c20 7761 6c6c 6574 5f62 756e 646c 655f  , wallet_bundle_
-00001c70: 322c 206e 6f64 655f 6275 6e64 6c65 290a  2, node_bundle).
-00001c80: 0a20 2020 2023 2043 6865 636b 7320 7468  .    # Checks th
-00001c90: 6174 2074 6865 2052 5043 206d 616e 6167  at the RPC manag
-00001ca0: 6573 2074 6f20 7374 6f70 2074 6865 206e  es to stop the n
-00001cb0: 6f64 650a 2020 2020 636c 6965 6e74 2e63  ode.    client.c
-00001cc0: 6c6f 7365 2829 0a20 2020 2063 6c69 656e  lose().    clien
-00001cd0: 745f 322e 636c 6f73 6528 290a 2020 2020  t_2.close().    
-00001ce0: 636c 6965 6e74 5f6e 6f64 652e 636c 6f73  client_node.clos
-00001cf0: 6528 290a 2020 2020 6177 6169 7420 636c  e().    await cl
-00001d00: 6965 6e74 2e61 7761 6974 5f63 6c6f 7365  ient.await_close
-00001d10: 6428 290a 2020 2020 6177 6169 7420 636c  d().    await cl
-00001d20: 6965 6e74 5f32 2e61 7761 6974 5f63 6c6f  ient_2.await_clo
-00001d30: 7365 6428 290a 2020 2020 6177 6169 7420  sed().    await 
-00001d40: 636c 6965 6e74 5f6e 6f64 652e 6177 6169  client_node.awai
-00001d50: 745f 636c 6f73 6564 2829 0a0a 0a61 7379  t_closed()...asy
-00001d60: 6e63 2064 6566 2063 7265 6174 655f 7478  nc def create_tx
-00001d70: 5f6f 7574 7075 7473 2877 616c 6c65 743a  _outputs(wallet:
-00001d80: 2057 616c 6c65 742c 206f 7574 7075 745f   Wallet, output_
-00001d90: 6172 6773 3a20 4c69 7374 5b54 7570 6c65  args: List[Tuple
-00001da0: 5b69 6e74 2c20 4f70 7469 6f6e 616c 5b4c  [int, Optional[L
-00001db0: 6973 745b 7374 725d 5d5d 5d29 202d 3e20  ist[str]]]]) -> 
-00001dc0: 4c69 7374 5b44 6963 745b 7374 722c 2041  List[Dict[str, A
-00001dd0: 6e79 5d5d 3a0a 2020 2020 6f75 7470 7574  ny]]:.    output
-00001de0: 7320 3d20 5b5d 0a20 2020 2066 6f72 2061  s = [].    for a
-00001df0: 7267 7320 696e 206f 7574 7075 745f 6172  rgs in output_ar
-00001e00: 6773 3a0a 2020 2020 2020 2020 6f75 7470  gs:.        outp
-00001e10: 7574 203d 207b 2261 6d6f 756e 7422 3a20  ut = {"amount": 
-00001e20: 7569 6e74 3634 2861 7267 735b 305d 292c  uint64(args[0]),
-00001e30: 2022 7075 7a7a 6c65 5f68 6173 6822 3a20   "puzzle_hash": 
-00001e40: 6177 6169 7420 7761 6c6c 6574 2e67 6574  await wallet.get
-00001e50: 5f6e 6577 5f70 757a 7a6c 6568 6173 6828  _new_puzzlehash(
-00001e60: 297d 0a20 2020 2020 2020 2069 6620 6172  )}.        if ar
-00001e70: 6773 5b31 5d20 6973 206e 6f74 204e 6f6e  gs[1] is not Non
-00001e80: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
-00001e90: 7373 6572 7420 6c65 6e28 6172 6773 5b31  ssert len(args[1
-00001ea0: 5d29 203e 2030 0a20 2020 2020 2020 2020  ]) > 0.         
-00001eb0: 2020 206f 7574 7075 745b 226d 656d 6f73     output["memos
-00001ec0: 225d 203d 2061 7267 735b 315d 0a20 2020  "] = args[1].   
-00001ed0: 2020 2020 206f 7574 7075 7473 2e61 7070       outputs.app
-00001ee0: 656e 6428 6f75 7470 7574 290a 2020 2020  end(output).    
-00001ef0: 7265 7475 726e 206f 7574 7075 7473 0a0a  return outputs..
-00001f00: 0a61 7379 6e63 2064 6566 2061 7373 6572  .async def asser
-00001f10: 745f 7761 6c6c 6574 5f74 7970 6573 2863  t_wallet_types(c
-00001f20: 6c69 656e 743a 2057 616c 6c65 7452 7063  lient: WalletRpc
-00001f30: 436c 6965 6e74 2c20 6578 7065 6374 6564  Client, expected
-00001f40: 3a20 4469 6374 5b57 616c 6c65 7454 7970  : Dict[WalletTyp
-00001f50: 652c 2069 6e74 5d29 202d 3e20 4e6f 6e65  e, int]) -> None
-00001f60: 3a0a 2020 2020 666f 7220 7761 6c6c 6574  :.    for wallet
-00001f70: 5f74 7970 6520 696e 2057 616c 6c65 7454  _type in WalletT
-00001f80: 7970 653a 0a20 2020 2020 2020 2077 616c  ype:.        wal
-00001f90: 6c65 7473 203d 2061 7761 6974 2063 6c69  lets = await cli
-00001fa0: 656e 742e 6765 745f 7761 6c6c 6574 7328  ent.get_wallets(
-00001fb0: 7761 6c6c 6574 5f74 7970 6529 0a20 2020  wallet_type).   
-00001fc0: 2020 2020 2077 616c 6c65 745f 636f 756e       wallet_coun
-00001fd0: 7420 3d20 6c65 6e28 7761 6c6c 6574 7329  t = len(wallets)
-00001fe0: 0a20 2020 2020 2020 2069 6620 7761 6c6c  .        if wall
-00001ff0: 6574 5f74 7970 6520 696e 2065 7870 6563  et_type in expec
-00002000: 7465 643a 0a20 2020 2020 2020 2020 2020  ted:.           
-00002010: 2061 7373 6572 7420 7761 6c6c 6574 5f63   assert wallet_c
-00002020: 6f75 6e74 203d 3d20 6578 7065 6374 6564  ount == expected
-00002030: 2e67 6574 2877 616c 6c65 745f 7479 7065  .get(wallet_type
-00002040: 2c20 3029 0a20 2020 2020 2020 2020 2020  , 0).           
-00002050: 2066 6f72 2077 616c 6c65 7420 696e 2077   for wallet in w
-00002060: 616c 6c65 7473 3a0a 2020 2020 2020 2020  allets:.        
-00002070: 2020 2020 2020 2020 6173 7365 7274 2077          assert w
-00002080: 616c 6c65 745b 2274 7970 6522 5d20 3d3d  allet["type"] ==
-00002090: 2077 616c 6c65 745f 7479 7065 2e76 616c   wallet_type.val
-000020a0: 7565 0a0a 0a64 6566 2061 7373 6572 745f  ue...def assert_
-000020b0: 7478 5f61 6d6f 756e 7473 280a 2020 2020  tx_amounts(.    
-000020c0: 7478 3a20 5472 616e 7361 6374 696f 6e52  tx: TransactionR
-000020d0: 6563 6f72 642c 0a20 2020 206f 7574 7075  ecord,.    outpu
-000020e0: 7473 3a20 4c69 7374 5b44 6963 745b 7374  ts: List[Dict[st
-000020f0: 722c 2041 6e79 5d5d 2c0a 2020 2020 2a2c  r, Any]],.    *,
-00002100: 0a20 2020 2061 6d6f 756e 745f 6665 653a  .    amount_fee:
-00002110: 2075 696e 7436 342c 0a20 2020 2063 6861   uint64,.    cha
-00002120: 6e67 655f 6578 7065 6374 6564 3a20 626f  nge_expected: bo
-00002130: 6f6c 2c0a 2020 2020 6973 5f63 6174 3a20  ol,.    is_cat: 
-00002140: 626f 6f6c 203d 2046 616c 7365 2c0a 2920  bool = False,.) 
-00002150: 2d3e 204e 6f6e 653a 0a20 2020 2061 7373  -> None:.    ass
-00002160: 6572 7420 7478 2e66 6565 5f61 6d6f 756e  ert tx.fee_amoun
-00002170: 7420 3d3d 2061 6d6f 756e 745f 6665 650a  t == amount_fee.
-00002180: 2020 2020 6173 7365 7274 2074 782e 616d      assert tx.am
-00002190: 6f75 6e74 203d 3d20 7375 6d28 6f75 7470  ount == sum(outp
-000021a0: 7574 5b22 616d 6f75 6e74 225d 2066 6f72  ut["amount"] for
-000021b0: 206f 7574 7075 7420 696e 206f 7574 7075   output in outpu
-000021c0: 7473 290a 2020 2020 6578 7065 6374 6564  ts).    expected
-000021d0: 5f61 6464 6974 696f 6e73 203d 206c 656e  _additions = len
-000021e0: 286f 7574 7075 7473 2920 6966 2063 6861  (outputs) if cha
-000021f0: 6e67 655f 6578 7065 6374 6564 2069 7320  nge_expected is 
-00002200: 4e6f 6e65 2065 6c73 6520 6c65 6e28 6f75  None else len(ou
-00002210: 7470 7574 7329 202b 2031 0a20 2020 2069  tputs) + 1.    i
-00002220: 6620 6973 5f63 6174 2061 6e64 2061 6d6f  f is_cat and amo
-00002230: 756e 745f 6665 653a 0a20 2020 2020 2020  unt_fee:.       
-00002240: 2065 7870 6563 7465 645f 6164 6469 7469   expected_additi
-00002250: 6f6e 7320 2b3d 2031 0a20 2020 2061 7373  ons += 1.    ass
-00002260: 6572 7420 6c65 6e28 7478 2e61 6464 6974  ert len(tx.addit
-00002270: 696f 6e73 2920 3d3d 2065 7870 6563 7465  ions) == expecte
-00002280: 645f 6164 6469 7469 6f6e 730a 2020 2020  d_additions.    
-00002290: 6164 6469 7469 6f6e 5f61 6d6f 756e 7473  addition_amounts
-000022a0: 203d 205b 6164 6469 7469 6f6e 2e61 6d6f   = [addition.amo
-000022b0: 756e 7420 666f 7220 6164 6469 7469 6f6e  unt for addition
-000022c0: 2069 6e20 7478 2e61 6464 6974 696f 6e73   in tx.additions
-000022d0: 5d0a 2020 2020 7265 6d6f 7661 6c5f 616d  ].    removal_am
-000022e0: 6f75 6e74 7320 3d20 5b72 656d 6f76 616c  ounts = [removal
-000022f0: 2e61 6d6f 756e 7420 666f 7220 7265 6d6f  .amount for remo
-00002300: 7661 6c20 696e 2074 782e 7265 6d6f 7661  val in tx.remova
-00002310: 6c73 5d0a 2020 2020 666f 7220 6f75 7470  ls].    for outp
-00002320: 7574 2069 6e20 6f75 7470 7574 733a 0a20  ut in outputs:. 
-00002330: 2020 2020 2020 2061 7373 6572 7420 6f75         assert ou
-00002340: 7470 7574 5b22 616d 6f75 6e74 225d 2069  tput["amount"] i
-00002350: 6e20 6164 6469 7469 6f6e 5f61 6d6f 756e  n addition_amoun
-00002360: 7473 0a20 2020 2061 7373 6572 7420 2873  ts.    assert (s
-00002370: 756d 2872 656d 6f76 616c 5f61 6d6f 756e  um(removal_amoun
-00002380: 7473 2920 2d20 7375 6d28 6164 6469 7469  ts) - sum(additi
-00002390: 6f6e 5f61 6d6f 756e 7473 2929 203d 3d20  on_amounts)) == 
-000023a0: 616d 6f75 6e74 5f66 6565 0a0a 0a61 7379  amount_fee...asy
-000023b0: 6e63 2064 6566 2061 7373 6572 745f 7075  nc def assert_pu
-000023c0: 7368 5f74 785f 6572 726f 7228 6e6f 6465  sh_tx_error(node
-000023d0: 5f72 7063 3a20 4675 6c6c 4e6f 6465 5270  _rpc: FullNodeRp
-000023e0: 6343 6c69 656e 742c 2074 783a 2054 7261  cClient, tx: Tra
-000023f0: 6e73 6163 7469 6f6e 5265 636f 7264 293a  nsactionRecord):
-00002400: 0a20 2020 2073 7065 6e64 5f62 756e 646c  .    spend_bundl
-00002410: 6520 3d20 7478 2e73 7065 6e64 5f62 756e  e = tx.spend_bun
-00002420: 646c 650a 2020 2020 6173 7365 7274 2073  dle.    assert s
-00002430: 7065 6e64 5f62 756e 646c 6520 6973 206e  pend_bundle is n
-00002440: 6f74 204e 6f6e 650a 2020 2020 2320 6368  ot None.    # ch
-00002450: 6563 6b20 6572 726f 7220 666f 7220 6120  eck error for a 
-00002460: 4153 5345 5254 5f41 4e4e 4f55 4e43 455f  ASSERT_ANNOUNCE_
-00002470: 434f 4e53 554d 4544 5f46 4149 4c45 4420  CONSUMED_FAILED 
-00002480: 616e 6420 6966 2074 6865 2065 7272 6f72  and if the error
-00002490: 2069 7320 6e6f 7420 7468 6572 6520 7468   is not there th
-000024a0: 726f 7720 6120 7661 6c75 6520 6572 726f  row a value erro
-000024b0: 720a 2020 2020 7472 793a 0a20 2020 2020  r.    try:.     
-000024c0: 2020 2061 7761 6974 206e 6f64 655f 7270     await node_rp
-000024d0: 632e 7075 7368 5f74 7828 7370 656e 645f  c.push_tx(spend_
-000024e0: 6275 6e64 6c65 290a 2020 2020 6578 6365  bundle).    exce
-000024f0: 7074 2056 616c 7565 4572 726f 7220 6173  pt ValueError as
-00002500: 2065 7272 6f72 3a0a 2020 2020 2020 2020   error:.        
-00002510: 6572 726f 725f 7374 7269 6e67 203d 2065  error_string = e
-00002520: 7272 6f72 2e61 7267 735b 305d 5b22 6572  rror.args[0]["er
-00002530: 726f 7222 5d20 2023 206e 6f71 613a 2020  ror"]  # noqa:  
-00002540: 2320 7079 6c69 6e74 3a20 6469 7361 626c  # pylint: disabl
-00002550: 653d 4531 3132 360a 2020 2020 2020 2020  e=E1126.        
-00002560: 6966 2065 7272 6f72 5f73 7472 696e 672e  if error_string.
-00002570: 6669 6e64 2822 4153 5345 5254 5f41 4e4e  find("ASSERT_ANN
-00002580: 4f55 4e43 455f 434f 4e53 554d 4544 5f46  OUNCE_CONSUMED_F
-00002590: 4149 4c45 4422 2920 3d3d 202d 313a 0a20  AILED") == -1:. 
-000025a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000025b0: 2056 616c 7565 4572 726f 7220 6672 6f6d   ValueError from
-000025c0: 2065 7272 6f72 0a0a 0a61 7379 6e63 2064   error...async d
-000025d0: 6566 2061 7373 6572 745f 6765 745f 6261  ef assert_get_ba
-000025e0: 6c61 6e63 6528 7270 635f 636c 6965 6e74  lance(rpc_client
-000025f0: 3a20 5761 6c6c 6574 5270 6343 6c69 656e  : WalletRpcClien
-00002600: 742c 2077 616c 6c65 745f 6e6f 6465 3a20  t, wallet_node: 
-00002610: 5761 6c6c 6574 4e6f 6465 2c20 7761 6c6c  WalletNode, wall
-00002620: 6574 3a20 5761 6c6c 6574 5072 6f74 6f63  et: WalletProtoc
-00002630: 6f6c 2920 2d3e 204e 6f6e 653a 0a20 2020  ol) -> None:.   
-00002640: 2065 7870 6563 7465 645f 6261 6c61 6e63   expected_balanc
-00002650: 6520 3d20 6177 6169 7420 7761 6c6c 6574  e = await wallet
-00002660: 5f6e 6f64 652e 6765 745f 6261 6c61 6e63  _node.get_balanc
-00002670: 6528 7761 6c6c 6574 2e69 6428 2929 0a20  e(wallet.id()). 
-00002680: 2020 2065 7870 6563 7465 645f 6261 6c61     expected_bala
-00002690: 6e63 655f 6469 6374 203d 2065 7870 6563  nce_dict = expec
-000026a0: 7465 645f 6261 6c61 6e63 652e 746f 5f6a  ted_balance.to_j
-000026b0: 736f 6e5f 6469 6374 2829 0a20 2020 2065  son_dict().    e
-000026c0: 7870 6563 7465 645f 6261 6c61 6e63 655f  xpected_balance_
-000026d0: 6469 6374 5b22 7761 6c6c 6574 5f69 6422  dict["wallet_id"
-000026e0: 5d20 3d20 7761 6c6c 6574 2e69 6428 290a  ] = wallet.id().
-000026f0: 2020 2020 6578 7065 6374 6564 5f62 616c      expected_bal
-00002700: 616e 6365 5f64 6963 745b 2277 616c 6c65  ance_dict["walle
-00002710: 745f 7479 7065 225d 203d 2077 616c 6c65  t_type"] = walle
-00002720: 742e 7479 7065 2829 0a20 2020 2065 7870  t.type().    exp
-00002730: 6563 7465 645f 6261 6c61 6e63 655f 6469  ected_balance_di
-00002740: 6374 5b22 6669 6e67 6572 7072 696e 7422  ct["fingerprint"
-00002750: 5d20 3d20 7761 6c6c 6574 5f6e 6f64 652e  ] = wallet_node.
-00002760: 6c6f 6767 6564 5f69 6e5f 6669 6e67 6572  logged_in_finger
-00002770: 7072 696e 740a 2020 2020 6966 2077 616c  print.    if wal
-00002780: 6c65 742e 7479 7065 2829 203d 3d20 5761  let.type() == Wa
-00002790: 6c6c 6574 5479 7065 2e43 4154 3a0a 2020  lletType.CAT:.  
-000027a0: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-000027b0: 6e73 7461 6e63 6528 7761 6c6c 6574 2c20  nstance(wallet, 
-000027c0: 4341 5457 616c 6c65 7429 0a20 2020 2020  CATWallet).     
-000027d0: 2020 2065 7870 6563 7465 645f 6261 6c61     expected_bala
-000027e0: 6e63 655f 6469 6374 5b22 6173 7365 745f  nce_dict["asset_
-000027f0: 6964 225d 203d 2077 616c 6c65 742e 6765  id"] = wallet.ge
-00002800: 745f 6173 7365 745f 6964 2829 0a20 2020  t_asset_id().   
-00002810: 2061 7373 6572 7420 6177 6169 7420 7270   assert await rp
-00002820: 635f 636c 6965 6e74 2e67 6574 5f77 616c  c_client.get_wal
-00002830: 6c65 745f 6261 6c61 6e63 6528 7761 6c6c  let_balance(wall
-00002840: 6574 2e69 6428 2929 203d 3d20 6578 7065  et.id()) == expe
-00002850: 6374 6564 5f62 616c 616e 6365 5f64 6963  cted_balance_dic
-00002860: 740a 0a0a 6173 796e 6320 6465 6620 7478  t...async def tx
-00002870: 5f69 6e5f 6d65 6d70 6f6f 6c28 636c 6965  _in_mempool(clie
-00002880: 6e74 3a20 5761 6c6c 6574 5270 6343 6c69  nt: WalletRpcCli
-00002890: 656e 742c 2074 7261 6e73 6163 7469 6f6e  ent, transaction
-000028a0: 5f69 643a 2062 7974 6573 3332 293a 0a20  _id: bytes32):. 
-000028b0: 2020 2074 7820 3d20 6177 6169 7420 636c     tx = await cl
-000028c0: 6965 6e74 2e67 6574 5f74 7261 6e73 6163  ient.get_transac
-000028d0: 7469 6f6e 2831 2c20 7472 616e 7361 6374  tion(1, transact
-000028e0: 696f 6e5f 6964 290a 2020 2020 7265 7475  ion_id).    retu
-000028f0: 726e 2074 782e 6973 5f69 6e5f 6d65 6d70  rn tx.is_in_memp
-00002900: 6f6f 6c28 290a 0a0a 6173 796e 6320 6465  ool()...async de
-00002910: 6620 6765 745f 636f 6e66 6972 6d65 645f  f get_confirmed_
-00002920: 6261 6c61 6e63 6528 636c 6965 6e74 3a20  balance(client: 
-00002930: 5761 6c6c 6574 5270 6343 6c69 656e 742c  WalletRpcClient,
-00002940: 2077 616c 6c65 745f 6964 3a20 696e 7429   wallet_id: int)
-00002950: 3a0a 2020 2020 7265 7475 726e 2028 6177  :.    return (aw
-00002960: 6169 7420 636c 6965 6e74 2e67 6574 5f77  ait client.get_w
-00002970: 616c 6c65 745f 6261 6c61 6e63 6528 7761  allet_balance(wa
-00002980: 6c6c 6574 5f69 6429 295b 2263 6f6e 6669  llet_id))["confi
-00002990: 726d 6564 5f77 616c 6c65 745f 6261 6c61  rmed_wallet_bala
-000029a0: 6e63 6522 5d0a 0a0a 6173 796e 6320 6465  nce"]...async de
-000029b0: 6620 6765 745f 756e 636f 6e66 6972 6d65  f get_unconfirme
-000029c0: 645f 6261 6c61 6e63 6528 636c 6965 6e74  d_balance(client
-000029d0: 3a20 5761 6c6c 6574 5270 6343 6c69 656e  : WalletRpcClien
-000029e0: 742c 2077 616c 6c65 745f 6964 3a20 696e  t, wallet_id: in
-000029f0: 7429 3a0a 2020 2020 7265 7475 726e 2028  t):.    return (
-00002a00: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
-00002a10: 5f77 616c 6c65 745f 6261 6c61 6e63 6528  _wallet_balance(
-00002a20: 7761 6c6c 6574 5f69 6429 295b 2275 6e63  wallet_id))["unc
-00002a30: 6f6e 6669 726d 6564 5f77 616c 6c65 745f  onfirmed_wallet_
-00002a40: 6261 6c61 6e63 6522 5d0a 0a0a 6465 6620  balance"]...def 
-00002a50: 7570 6461 7465 5f76 6572 6966 795f 7369  update_verify_si
-00002a60: 676e 6174 7572 655f 7265 7175 6573 7428  gnature_request(
-00002a70: 7265 7175 6573 743a 2044 6963 745b 7374  request: Dict[st
-00002a80: 722c 2041 6e79 5d2c 2070 7265 6669 785f  r, Any], prefix_
-00002a90: 6865 785f 7661 6c75 6573 3a20 626f 6f6c  hex_values: bool
-00002aa0: 293a 0a20 2020 2075 7064 6174 6564 5f72  ):.    updated_r
-00002ab0: 6571 7565 7374 203d 2072 6571 7565 7374  equest = request
-00002ac0: 2e63 6f70 7928 290a 2020 2020 7570 6461  .copy().    upda
-00002ad0: 7465 645f 7265 7175 6573 745b 2270 7562  ted_request["pub
-00002ae0: 6b65 7922 5d20 3d20 2822 3078 2220 6966  key"] = ("0x" if
-00002af0: 2070 7265 6669 785f 6865 785f 7661 6c75   prefix_hex_valu
-00002b00: 6573 2065 6c73 6520 2222 2920 2b20 7570  es else "") + up
-00002b10: 6461 7465 645f 7265 7175 6573 745b 2270  dated_request["p
-00002b20: 7562 6b65 7922 5d0a 2020 2020 7570 6461  ubkey"].    upda
-00002b30: 7465 645f 7265 7175 6573 745b 2273 6967  ted_request["sig
-00002b40: 6e61 7475 7265 225d 203d 2028 2230 7822  nature"] = ("0x"
-00002b50: 2069 6620 7072 6566 6978 5f68 6578 5f76   if prefix_hex_v
-00002b60: 616c 7565 7320 656c 7365 2022 2229 202b  alues else "") +
-00002b70: 2075 7064 6174 6564 5f72 6571 7565 7374   updated_request
-00002b80: 5b22 7369 676e 6174 7572 6522 5d0a 2020  ["signature"].  
-00002b90: 2020 7265 7475 726e 2075 7064 6174 6564    return updated
-00002ba0: 5f72 6571 7565 7374 0a0a 0a40 7079 7465  _request...@pyte
-00002bb0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
-00002bc0: 6173 796e 6320 6465 6620 7465 7374 5f73  async def test_s
-00002bd0: 656e 645f 7472 616e 7361 6374 696f 6e28  end_transaction(
-00002be0: 7761 6c6c 6574 5f72 7063 5f65 6e76 6972  wallet_rpc_envir
-00002bf0: 6f6e 6d65 6e74 3a20 5761 6c6c 6574 5270  onment: WalletRp
-00002c00: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
-00002c10: 293a 0a20 2020 2065 6e76 3a20 5761 6c6c  ):.    env: Wall
-00002c20: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
-00002c30: 6d65 6e74 203d 2077 616c 6c65 745f 7270  ment = wallet_rp
-00002c40: 635f 656e 7669 726f 6e6d 656e 740a 0a20  c_environment.. 
-00002c50: 2020 2077 616c 6c65 745f 323a 2057 616c     wallet_2: Wal
-00002c60: 6c65 7420 3d20 656e 762e 7761 6c6c 6574  let = env.wallet
-00002c70: 5f32 2e77 616c 6c65 740a 2020 2020 7761  _2.wallet.    wa
-00002c80: 6c6c 6574 5f6e 6f64 653a 2057 616c 6c65  llet_node: Walle
-00002c90: 744e 6f64 6520 3d20 656e 762e 7761 6c6c  tNode = env.wall
-00002ca0: 6574 5f31 2e6e 6f64 650a 2020 2020 6675  et_1.node.    fu
-00002cb0: 6c6c 5f6e 6f64 655f 6170 693a 2046 756c  ll_node_api: Ful
-00002cc0: 6c4e 6f64 6553 696d 756c 6174 6f72 203d  lNodeSimulator =
-00002cd0: 2065 6e76 2e66 756c 6c5f 6e6f 6465 2e61   env.full_node.a
-00002ce0: 7069 0a20 2020 2063 6c69 656e 743a 2057  pi.    client: W
-00002cf0: 616c 6c65 7452 7063 436c 6965 6e74 203d  alletRpcClient =
-00002d00: 2065 6e76 2e77 616c 6c65 745f 312e 7270   env.wallet_1.rp
-00002d10: 635f 636c 6965 6e74 0a0a 2020 2020 6765  c_client..    ge
-00002d20: 6e65 7261 7465 645f 6675 6e64 7320 3d20  nerated_funds = 
-00002d30: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
-00002d40: 756e 6473 2866 756c 6c5f 6e6f 6465 5f61  unds(full_node_a
-00002d50: 7069 2c20 656e 762e 7761 6c6c 6574 5f31  pi, env.wallet_1
-00002d60: 290a 0a20 2020 2061 6464 7220 3d20 656e  )..    addr = en
-00002d70: 636f 6465 5f70 757a 7a6c 655f 6861 7368  code_puzzle_hash
-00002d80: 2861 7761 6974 2077 616c 6c65 745f 322e  (await wallet_2.
-00002d90: 6765 745f 6e65 775f 7075 7a7a 6c65 6861  get_new_puzzleha
-00002da0: 7368 2829 2c20 2274 7863 6822 290a 2020  sh(), "txch").  
-00002db0: 2020 7478 5f61 6d6f 756e 7420 3d20 7569    tx_amount = ui
-00002dc0: 6e74 3634 2831 3536 3030 3030 3029 0a20  nt64(15600000). 
-00002dd0: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
-00002de0: 6169 7365 7328 5661 6c75 6545 7272 6f72  aises(ValueError
-00002df0: 293a 0a20 2020 2020 2020 2061 7761 6974  ):.        await
-00002e00: 2063 6c69 656e 742e 7365 6e64 5f74 7261   client.send_tra
-00002e10: 6e73 6163 7469 6f6e 2831 2c20 7569 6e74  nsaction(1, uint
-00002e20: 3634 2831 3030 3030 3030 3030 3030 3030  64(1000000000000
-00002e30: 3030 3030 3129 2c20 6164 6472 290a 0a20  00001), addr).. 
-00002e40: 2020 2023 2054 6573 7473 2073 656e 6469     # Tests sendi
-00002e50: 6e67 2061 2062 6173 6963 2074 7261 6e73  ng a basic trans
-00002e60: 6163 7469 6f6e 0a20 2020 2074 7820 3d20  action.    tx = 
-00002e70: 6177 6169 7420 636c 6965 6e74 2e73 656e  await client.sen
-00002e80: 645f 7472 616e 7361 6374 696f 6e28 312c  d_transaction(1,
-00002e90: 2074 785f 616d 6f75 6e74 2c20 6164 6472   tx_amount, addr
-00002ea0: 2c20 6d65 6d6f 733d 5b22 7468 6973 2069  , memos=["this i
-00002eb0: 7320 6120 6261 7369 6320 7478 225d 290a  s a basic tx"]).
-00002ec0: 2020 2020 7472 616e 7361 6374 696f 6e5f      transaction_
-00002ed0: 6964 203d 2074 782e 6e61 6d65 0a0a 2020  id = tx.name..  
-00002ee0: 2020 7370 656e 645f 6275 6e64 6c65 203d    spend_bundle =
-00002ef0: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
-00002f00: 0a20 2020 2061 7373 6572 7420 7370 656e  .    assert spen
-00002f10: 645f 6275 6e64 6c65 2069 7320 6e6f 7420  d_bundle is not 
-00002f20: 4e6f 6e65 0a0a 2020 2020 6177 6169 7420  None..    await 
-00002f30: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
-00002f40: 3230 2c20 7478 5f69 6e5f 6d65 6d70 6f6f  20, tx_in_mempoo
-00002f50: 6c2c 2054 7275 652c 2063 6c69 656e 742c  l, True, client,
-00002f60: 2074 7261 6e73 6163 7469 6f6e 5f69 6429   transaction_id)
-00002f70: 0a20 2020 2061 7761 6974 2074 696d 655f  .    await time_
-00002f80: 6f75 745f 6173 7365 7274 2832 302c 2067  out_assert(20, g
-00002f90: 6574 5f75 6e63 6f6e 6669 726d 6564 5f62  et_unconfirmed_b
-00002fa0: 616c 616e 6365 2c20 6765 6e65 7261 7465  alance, generate
-00002fb0: 645f 6675 6e64 7320 2d20 7478 5f61 6d6f  d_funds - tx_amo
-00002fc0: 756e 742c 2063 6c69 656e 742c 2031 290a  unt, client, 1).
-00002fd0: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
-00002fe0: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
-00002ff0: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
-00003000: 745f 6e6f 6465 2c20 7370 656e 645f 6275  t_node, spend_bu
-00003010: 6e64 6c65 290a 0a20 2020 2023 2043 6865  ndle)..    # Che
-00003020: 636b 7320 7468 6174 2074 6865 206d 656d  cks that the mem
-00003030: 6f20 6361 6e20 6265 2072 6574 7269 6576  o can be retriev
-00003040: 6564 0a20 2020 2074 785f 636f 6e66 6972  ed.    tx_confir
-00003050: 6d65 6420 3d20 6177 6169 7420 636c 6965  med = await clie
-00003060: 6e74 2e67 6574 5f74 7261 6e73 6163 7469  nt.get_transacti
-00003070: 6f6e 2831 2c20 7472 616e 7361 6374 696f  on(1, transactio
-00003080: 6e5f 6964 290a 2020 2020 6173 7365 7274  n_id).    assert
-00003090: 2074 785f 636f 6e66 6972 6d65 642e 636f   tx_confirmed.co
-000030a0: 6e66 6972 6d65 640a 2020 2020 6173 7365  nfirmed.    asse
-000030b0: 7274 206c 656e 2874 785f 636f 6e66 6972  rt len(tx_confir
-000030c0: 6d65 642e 6765 745f 6d65 6d6f 7328 2929  med.get_memos())
-000030d0: 203d 3d20 310a 2020 2020 6173 7365 7274   == 1.    assert
-000030e0: 205b 6222 7468 6973 2069 7320 6120 6261   [b"this is a ba
-000030f0: 7369 6320 7478 225d 2069 6e20 7478 5f63  sic tx"] in tx_c
-00003100: 6f6e 6669 726d 6564 2e67 6574 5f6d 656d  onfirmed.get_mem
-00003110: 6f73 2829 2e76 616c 7565 7328 290a 2020  os().values().  
-00003120: 2020 6173 7365 7274 206c 6973 7428 7478    assert list(tx
-00003130: 5f63 6f6e 6669 726d 6564 2e67 6574 5f6d  _confirmed.get_m
-00003140: 656d 6f73 2829 2e6b 6579 7328 2929 5b30  emos().keys())[0
-00003150: 5d20 696e 205b 612e 6e61 6d65 2829 2066  ] in [a.name() f
-00003160: 6f72 2061 2069 6e20 7370 656e 645f 6275  or a in spend_bu
-00003170: 6e64 6c65 2e61 6464 6974 696f 6e73 2829  ndle.additions()
-00003180: 5d0a 0a20 2020 2061 7761 6974 2074 696d  ]..    await tim
-00003190: 655f 6f75 745f 6173 7365 7274 2832 302c  e_out_assert(20,
-000031a0: 2067 6574 5f63 6f6e 6669 726d 6564 5f62   get_confirmed_b
-000031b0: 616c 616e 6365 2c20 6765 6e65 7261 7465  alance, generate
-000031c0: 645f 6675 6e64 7320 2d20 7478 5f61 6d6f  d_funds - tx_amo
-000031d0: 756e 742c 2063 6c69 656e 742c 2031 290a  unt, client, 1).
-000031e0: 0a0a 4070 7974 6573 742e 6d61 726b 2e61  ..@pytest.mark.a
-000031f0: 7379 6e63 696f 0a61 7379 6e63 2064 6566  syncio.async def
-00003200: 2074 6573 745f 7075 7368 5f74 7261 6e73   test_push_trans
-00003210: 6163 7469 6f6e 7328 7761 6c6c 6574 5f72  actions(wallet_r
-00003220: 7063 5f65 6e76 6972 6f6e 6d65 6e74 3a20  pc_environment: 
-00003230: 5761 6c6c 6574 5270 6354 6573 7445 6e76  WalletRpcTestEnv
-00003240: 6972 6f6e 6d65 6e74 293a 0a20 2020 2065  ironment):.    e
-00003250: 6e76 3a20 5761 6c6c 6574 5270 6354 6573  nv: WalletRpcTes
-00003260: 7445 6e76 6972 6f6e 6d65 6e74 203d 2077  tEnvironment = w
-00003270: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
-00003280: 6e6d 656e 740a 0a20 2020 2077 616c 6c65  nment..    walle
-00003290: 743a 2057 616c 6c65 7420 3d20 656e 762e  t: Wallet = env.
-000032a0: 7761 6c6c 6574 5f31 2e77 616c 6c65 740a  wallet_1.wallet.
-000032b0: 2020 2020 7761 6c6c 6574 5f6e 6f64 653a      wallet_node:
-000032c0: 2057 616c 6c65 744e 6f64 6520 3d20 656e   WalletNode = en
-000032d0: 762e 7761 6c6c 6574 5f31 2e6e 6f64 650a  v.wallet_1.node.
-000032e0: 2020 2020 6675 6c6c 5f6e 6f64 655f 6170      full_node_ap
-000032f0: 693a 2046 756c 6c4e 6f64 6553 696d 756c  i: FullNodeSimul
-00003300: 6174 6f72 203d 2065 6e76 2e66 756c 6c5f  ator = env.full_
-00003310: 6e6f 6465 2e61 7069 0a20 2020 2063 6c69  node.api.    cli
-00003320: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
-00003330: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
-00003340: 745f 312e 7270 635f 636c 6965 6e74 0a0a  t_1.rpc_client..
-00003350: 2020 2020 6177 6169 7420 6765 6e65 7261      await genera
-00003360: 7465 5f66 756e 6473 2866 756c 6c5f 6e6f  te_funds(full_no
-00003370: 6465 5f61 7069 2c20 656e 762e 7761 6c6c  de_api, env.wall
-00003380: 6574 5f31 290a 0a20 2020 206f 7574 7075  et_1)..    outpu
-00003390: 7473 203d 2061 7761 6974 2063 7265 6174  ts = await creat
-000033a0: 655f 7478 5f6f 7574 7075 7473 2877 616c  e_tx_outputs(wal
-000033b0: 6c65 742c 205b 2831 3233 3433 3231 2c20  let, [(1234321, 
-000033c0: 4e6f 6e65 295d 290a 0a20 2020 2074 7820  None)])..    tx 
-000033d0: 3d20 6177 6169 7420 636c 6965 6e74 2e63  = await client.c
-000033e0: 7265 6174 655f 7369 676e 6564 5f74 7261  reate_signed_tra
-000033f0: 6e73 6163 7469 6f6e 280a 2020 2020 2020  nsaction(.      
-00003400: 2020 6f75 7470 7574 732c 0a20 2020 2020    outputs,.     
-00003410: 2020 2066 6565 3d75 696e 7436 3428 3130     fee=uint64(10
-00003420: 3029 2c0a 2020 2020 290a 0a20 2020 2061  0),.    )..    a
-00003430: 7761 6974 2063 6c69 656e 742e 7075 7368  wait client.push
-00003440: 5f74 7261 6e73 6163 7469 6f6e 7328 5b74  _transactions([t
-00003450: 785d 290a 0a20 2020 2073 7065 6e64 5f62  x])..    spend_b
-00003460: 756e 646c 6520 3d20 7478 2e73 7065 6e64  undle = tx.spend
-00003470: 5f62 756e 646c 650a 2020 2020 6173 7365  _bundle.    asse
-00003480: 7274 2073 7065 6e64 5f62 756e 646c 6520  rt spend_bundle 
-00003490: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-000034a0: 6177 6169 7420 6661 726d 5f74 7261 6e73  await farm_trans
-000034b0: 6163 7469 6f6e 2866 756c 6c5f 6e6f 6465  action(full_node
-000034c0: 5f61 7069 2c20 7761 6c6c 6574 5f6e 6f64  _api, wallet_nod
-000034d0: 652c 2073 7065 6e64 5f62 756e 646c 6529  e, spend_bundle)
-000034e0: 0a0a 2020 2020 7478 203d 2061 7761 6974  ..    tx = await
-000034f0: 2063 6c69 656e 742e 6765 745f 7472 616e   client.get_tran
-00003500: 7361 6374 696f 6e28 312c 2074 7261 6e73  saction(1, trans
-00003510: 6163 7469 6f6e 5f69 643d 7478 2e6e 616d  action_id=tx.nam
-00003520: 6529 0a20 2020 2061 7373 6572 7420 7478  e).    assert tx
-00003530: 2e63 6f6e 6669 726d 6564 0a0a 0a40 7079  .confirmed...@py
-00003540: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
-00003550: 6f0a 6173 796e 6320 6465 6620 7465 7374  o.async def test
-00003560: 5f67 6574 5f62 616c 616e 6365 2877 616c  _get_balance(wal
-00003570: 6c65 745f 7270 635f 656e 7669 726f 6e6d  let_rpc_environm
-00003580: 656e 743a 2057 616c 6c65 7452 7063 5465  ent: WalletRpcTe
-00003590: 7374 456e 7669 726f 6e6d 656e 7429 3a0a  stEnvironment):.
-000035a0: 2020 2020 656e 7620 3d20 7761 6c6c 6574      env = wallet
-000035b0: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
-000035c0: 0a20 2020 2077 616c 6c65 743a 2057 616c  .    wallet: Wal
-000035d0: 6c65 7420 3d20 656e 762e 7761 6c6c 6574  let = env.wallet
-000035e0: 5f31 2e77 616c 6c65 740a 2020 2020 7761  _1.wallet.    wa
-000035f0: 6c6c 6574 5f6e 6f64 653a 2057 616c 6c65  llet_node: Walle
-00003600: 744e 6f64 6520 3d20 656e 762e 7761 6c6c  tNode = env.wall
-00003610: 6574 5f31 2e6e 6f64 650a 2020 2020 6675  et_1.node.    fu
-00003620: 6c6c 5f6e 6f64 655f 6170 693a 2046 756c  ll_node_api: Ful
-00003630: 6c4e 6f64 6553 696d 756c 6174 6f72 203d  lNodeSimulator =
-00003640: 2065 6e76 2e66 756c 6c5f 6e6f 6465 2e61   env.full_node.a
-00003650: 7069 0a20 2020 2077 616c 6c65 745f 7270  pi.    wallet_rp
-00003660: 635f 636c 6965 6e74 203d 2065 6e76 2e77  c_client = env.w
-00003670: 616c 6c65 745f 312e 7270 635f 636c 6965  allet_1.rpc_clie
-00003680: 6e74 0a20 2020 2061 7761 6974 2066 756c  nt.    await ful
-00003690: 6c5f 6e6f 6465 5f61 7069 2e66 6172 6d5f  l_node_api.farm_
-000036a0: 626c 6f63 6b73 5f74 6f5f 7761 6c6c 6574  blocks_to_wallet
-000036b0: 2832 2c20 7761 6c6c 6574 290a 2020 2020  (2, wallet).    
-000036c0: 6173 796e 6320 7769 7468 2077 616c 6c65  async with walle
-000036d0: 745f 6e6f 6465 2e77 616c 6c65 745f 7374  t_node.wallet_st
-000036e0: 6174 655f 6d61 6e61 6765 722e 6c6f 636b  ate_manager.lock
-000036f0: 3a0a 2020 2020 2020 2020 6361 745f 7761  :.        cat_wa
-00003700: 6c6c 6574 3a20 4341 5457 616c 6c65 7420  llet: CATWallet 
-00003710: 3d20 6177 6169 7420 4341 5457 616c 6c65  = await CATWalle
-00003720: 742e 6372 6561 7465 5f6e 6577 5f63 6174  t.create_new_cat
-00003730: 5f77 616c 6c65 7428 0a20 2020 2020 2020  _wallet(.       
-00003740: 2020 2020 2077 616c 6c65 745f 6e6f 6465       wallet_node
-00003750: 2e77 616c 6c65 745f 7374 6174 655f 6d61  .wallet_state_ma
-00003760: 6e61 6765 722c 2077 616c 6c65 742c 207b  nager, wallet, {
-00003770: 2269 6465 6e74 6966 6965 7222 3a20 2267  "identifier": "g
-00003780: 656e 6573 6973 5f62 795f 6964 227d 2c20  enesis_by_id"}, 
-00003790: 7569 6e74 3634 2831 3030 290a 2020 2020  uint64(100).    
-000037a0: 2020 2020 290a 2020 2020 6177 6169 7420      ).    await 
-000037b0: 6173 7365 7274 5f67 6574 5f62 616c 616e  assert_get_balan
-000037c0: 6365 2877 616c 6c65 745f 7270 635f 636c  ce(wallet_rpc_cl
-000037d0: 6965 6e74 2c20 7761 6c6c 6574 5f6e 6f64  ient, wallet_nod
-000037e0: 652c 2077 616c 6c65 7429 0a20 2020 2061  e, wallet).    a
-000037f0: 7761 6974 2061 7373 6572 745f 6765 745f  wait assert_get_
-00003800: 6261 6c61 6e63 6528 7761 6c6c 6574 5f72  balance(wallet_r
-00003810: 7063 5f63 6c69 656e 742c 2077 616c 6c65  pc_client, walle
-00003820: 745f 6e6f 6465 2c20 6361 745f 7761 6c6c  t_node, cat_wall
-00003830: 6574 290a 0a0a 4070 7974 6573 742e 6d61  et)...@pytest.ma
-00003840: 726b 2e61 7379 6e63 696f 0a61 7379 6e63  rk.asyncio.async
-00003850: 2064 6566 2074 6573 745f 6765 745f 7469   def test_get_ti
-00003860: 6d65 7374 616d 705f 666f 725f 6865 6967  mestamp_for_heig
-00003870: 6874 2877 616c 6c65 745f 7270 635f 656e  ht(wallet_rpc_en
-00003880: 7669 726f 6e6d 656e 743a 2057 616c 6c65  vironment: Walle
-00003890: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
-000038a0: 656e 7429 3a0a 2020 2020 656e 763a 2057  ent):.    env: W
-000038b0: 616c 6c65 7452 7063 5465 7374 456e 7669  alletRpcTestEnvi
-000038c0: 726f 6e6d 656e 7420 3d20 7761 6c6c 6574  ronment = wallet
-000038d0: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
-000038e0: 0a0a 2020 2020 6675 6c6c 5f6e 6f64 655f  ..    full_node_
-000038f0: 6170 693a 2046 756c 6c4e 6f64 6553 696d  api: FullNodeSim
-00003900: 756c 6174 6f72 203d 2065 6e76 2e66 756c  ulator = env.ful
-00003910: 6c5f 6e6f 6465 2e61 7069 0a20 2020 2063  l_node.api.    c
-00003920: 6c69 656e 743a 2057 616c 6c65 7452 7063  lient: WalletRpc
-00003930: 436c 6965 6e74 203d 2065 6e76 2e77 616c  Client = env.wal
-00003940: 6c65 745f 312e 7270 635f 636c 6965 6e74  let_1.rpc_client
-00003950: 0a0a 2020 2020 6177 6169 7420 6765 6e65  ..    await gene
-00003960: 7261 7465 5f66 756e 6473 2866 756c 6c5f  rate_funds(full_
-00003970: 6e6f 6465 5f61 7069 2c20 656e 762e 7761  node_api, env.wa
-00003980: 6c6c 6574 5f31 290a 0a20 2020 2023 2054  llet_1)..    # T
-00003990: 6869 7320 7465 7374 7320 7468 6174 2074  his tests that t
-000039a0: 6865 2063 6c69 656e 7420 7265 7475 726e  he client return
-000039b0: 7320 6120 7569 6e74 3634 2c20 7261 7468  s a uint64, rath
-000039c0: 6572 2074 6861 6e20 7261 6973 696e 6720  er than raising 
-000039d0: 6f72 2072 6574 7572 6e69 6e67 2073 6f6d  or returning som
-000039e0: 6574 6869 6e67 2075 6e65 7870 6563 7465  ething unexpecte
-000039f0: 640a 2020 2020 7569 6e74 3634 2861 7761  d.    uint64(awa
-00003a00: 6974 2063 6c69 656e 742e 6765 745f 7469  it client.get_ti
-00003a10: 6d65 7374 616d 705f 666f 725f 6865 6967  mestamp_for_heig
-00003a20: 6874 2875 696e 7433 3228 3129 2929 0a0a  ht(uint32(1)))..
-00003a30: 0a40 7079 7465 7374 2e6d 6172 6b2e 7061  .@pytest.mark.pa
-00003a40: 7261 6d65 7472 697a 6528 0a20 2020 2022  rametrize(.    "
-00003a50: 6f75 7470 7574 5f61 7267 732c 2066 6565  output_args, fee
-00003a60: 2c20 7365 6c65 6374 5f63 6f69 6e2c 2069  , select_coin, i
-00003a70: 735f 6361 7422 2c0a 2020 2020 5b0a 2020  s_cat",.    [.  
-00003a80: 2020 2020 2020 285b 2833 3438 3032 362c        ([(348026,
-00003a90: 204e 6f6e 6529 5d2c 2030 2c20 4661 6c73   None)], 0, Fals
-00003aa0: 652c 2046 616c 7365 292c 0a20 2020 2020  e, False),.     
-00003ab0: 2020 2028 5b28 3132 3730 3439 3532 3330     ([(1270495230
-00003ac0: 2c20 5b22 6d65 6d6f 5f31 225d 292c 2028  , ["memo_1"]), (
-00003ad0: 3930 3233 3437 2c20 5b22 6d65 6d6f 5f32  902347, ["memo_2
-00003ae0: 225d 295d 2c20 312c 2054 7275 652c 2046  "])], 1, True, F
-00003af0: 616c 7365 292c 0a20 2020 2020 2020 2028  alse),.        (
-00003b00: 5b28 3834 3932 302c 205b 226d 656d 6f5f  [(84920, ["memo_
-00003b10: 315f 3022 2c20 226d 656d 6f5f 315f 3122  1_0", "memo_1_1"
-00003b20: 5d29 2c20 2831 2c20 5b22 6d65 6d6f 5f32  ]), (1, ["memo_2
-00003b30: 5f30 225d 295d 2c20 302c 2046 616c 7365  _0"])], 0, False
-00003b40: 2c20 4661 6c73 6529 2c0a 2020 2020 2020  , False),.      
-00003b50: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-00003b60: 5b28 3332 3035 3837 3130 2c20 5b22 6d65  [(32058710, ["me
-00003b70: 6d6f 5f31 5f30 222c 2022 6d65 6d6f 5f31  mo_1_0", "memo_1
-00003b80: 5f31 225d 292c 2028 312c 205b 226d 656d  _1"]), (1, ["mem
-00003b90: 6f5f 325f 3022 5d29 2c20 2839 3233 2c20  o_2_0"]), (923, 
-00003ba0: 5b22 6d65 6d6f 5f33 5f30 222c 2022 6d65  ["memo_3_0", "me
-00003bb0: 6d6f 5f33 5f31 225d 295d 2c0a 2020 2020  mo_3_1"])],.    
-00003bc0: 2020 2020 2020 2020 3332 3830 342c 0a20          32804,. 
-00003bd0: 2020 2020 2020 2020 2020 2054 7275 652c             True,
-00003be0: 0a20 2020 2020 2020 2020 2020 2046 616c  .            Fal
-00003bf0: 7365 2c0a 2020 2020 2020 2020 292c 0a20  se,.        ),. 
-00003c00: 2020 2020 2020 2028 5b28 3133 3337 2c20         ([(1337, 
-00003c10: 5b22 4c45 4554 225d 292c 2028 3831 3030  ["LEET"]), (8100
-00003c20: 302c 205b 2270 696e 6777 6569 225d 295d  0, ["pingwei"])]
-00003c30: 2c20 3831 372c 2046 616c 7365 2c20 5472  , 817, False, Tr
-00003c40: 7565 292c 0a20 2020 205d 2c0a 290a 4070  ue),.    ],.).@p
-00003c50: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
-00003c60: 696f 0a61 7379 6e63 2064 6566 2074 6573  io.async def tes
-00003c70: 745f 6372 6561 7465 5f73 6967 6e65 645f  t_create_signed_
-00003c80: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
-00003c90: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
-00003ca0: 726f 6e6d 656e 743a 2057 616c 6c65 7452  ronment: WalletR
-00003cb0: 7063 5465 7374 456e 7669 726f 6e6d 656e  pcTestEnvironmen
-00003cc0: 742c 0a20 2020 206f 7574 7075 745f 6172  t,.    output_ar
-00003cd0: 6773 3a20 4c69 7374 5b54 7570 6c65 5b69  gs: List[Tuple[i
-00003ce0: 6e74 2c20 4f70 7469 6f6e 616c 5b4c 6973  nt, Optional[Lis
-00003cf0: 745b 7374 725d 5d5d 5d2c 0a20 2020 2066  t[str]]]],.    f
-00003d00: 6565 3a20 696e 742c 0a20 2020 2073 656c  ee: int,.    sel
-00003d10: 6563 745f 636f 696e 3a20 626f 6f6c 2c0a  ect_coin: bool,.
-00003d20: 2020 2020 6973 5f63 6174 3a20 626f 6f6c      is_cat: bool
-00003d30: 2c0a 293a 0a20 2020 2065 6e76 3a20 5761  ,.):.    env: Wa
-00003d40: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
-00003d50: 6f6e 6d65 6e74 203d 2077 616c 6c65 745f  onment = wallet_
-00003d60: 7270 635f 656e 7669 726f 6e6d 656e 740a  rpc_environment.
-00003d70: 0a20 2020 2077 616c 6c65 745f 323a 2057  .    wallet_2: W
-00003d80: 616c 6c65 7420 3d20 656e 762e 7761 6c6c  allet = env.wall
-00003d90: 6574 5f32 2e77 616c 6c65 740a 2020 2020  et_2.wallet.    
-00003da0: 7761 6c6c 6574 5f31 5f6e 6f64 653a 2057  wallet_1_node: W
-00003db0: 616c 6c65 744e 6f64 6520 3d20 656e 762e  alletNode = env.
-00003dc0: 7761 6c6c 6574 5f31 2e6e 6f64 650a 2020  wallet_1.node.  
-00003dd0: 2020 7761 6c6c 6574 5f31 5f72 7063 3a20    wallet_1_rpc: 
-00003de0: 5761 6c6c 6574 5270 6343 6c69 656e 7420  WalletRpcClient 
-00003df0: 3d20 656e 762e 7761 6c6c 6574 5f31 2e72  = env.wallet_1.r
-00003e00: 7063 5f63 6c69 656e 740a 2020 2020 6675  pc_client.    fu
-00003e10: 6c6c 5f6e 6f64 655f 6170 693a 2046 756c  ll_node_api: Ful
-00003e20: 6c4e 6f64 6553 696d 756c 6174 6f72 203d  lNodeSimulator =
-00003e30: 2065 6e76 2e66 756c 6c5f 6e6f 6465 2e61   env.full_node.a
-00003e40: 7069 0a20 2020 2066 756c 6c5f 6e6f 6465  pi.    full_node
-00003e50: 5f72 7063 3a20 4675 6c6c 4e6f 6465 5270  _rpc: FullNodeRp
-00003e60: 6343 6c69 656e 7420 3d20 656e 762e 6675  cClient = env.fu
-00003e70: 6c6c 5f6e 6f64 652e 7270 635f 636c 6965  ll_node.rpc_clie
-00003e80: 6e74 0a0a 2020 2020 6765 6e65 7261 7465  nt..    generate
-00003e90: 645f 6675 6e64 7320 3d20 6177 6169 7420  d_funds = await 
-00003ea0: 6765 6e65 7261 7465 5f66 756e 6473 2866  generate_funds(f
-00003eb0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 656e  ull_node_api, en
-00003ec0: 762e 7761 6c6c 6574 5f31 290a 0a20 2020  v.wallet_1)..   
-00003ed0: 2077 616c 6c65 745f 6964 203d 2031 0a20   wallet_id = 1. 
-00003ee0: 2020 2069 6620 6973 5f63 6174 3a0a 2020     if is_cat:.  
-00003ef0: 2020 2020 2020 6765 6e65 7261 7465 645f        generated_
-00003f00: 6675 6e64 7320 3d20 3130 2a2a 390a 0a20  funds = 10**9.. 
-00003f10: 2020 2020 2020 2072 6573 203d 2061 7761         res = awa
-00003f20: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
-00003f30: 6372 6561 7465 5f6e 6577 5f63 6174 5f61  create_new_cat_a
-00003f40: 6e64 5f77 616c 6c65 7428 7569 6e74 3634  nd_wallet(uint64
-00003f50: 2867 656e 6572 6174 6564 5f66 756e 6473  (generated_funds
-00003f60: 2929 0a20 2020 2020 2020 2061 7373 6572  )).        asser
-00003f70: 7420 7265 735b 2273 7563 6365 7373 225d  t res["success"]
-00003f80: 0a20 2020 2020 2020 2077 616c 6c65 745f  .        wallet_
-00003f90: 6964 203d 2072 6573 5b22 7761 6c6c 6574  id = res["wallet
-00003fa0: 5f69 6422 5d0a 0a20 2020 2020 2020 2061  _id"]..        a
-00003fb0: 7761 6974 2074 696d 655f 6f75 745f 6173  wait time_out_as
-00003fc0: 7365 7274 2835 2c20 6368 6563 6b5f 6d65  sert(5, check_me
-00003fd0: 6d70 6f6f 6c5f 7370 656e 645f 636f 756e  mpool_spend_coun
-00003fe0: 742c 2054 7275 652c 2066 756c 6c5f 6e6f  t, True, full_no
-00003ff0: 6465 5f61 7069 2c20 3129 0a20 2020 2020  de_api, 1).     
-00004000: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00004010: 6528 3529 3a0a 2020 2020 2020 2020 2020  e(5):.          
-00004020: 2020 6966 2063 6865 636b 5f6d 656d 706f    if check_mempo
-00004030: 6f6c 5f73 7065 6e64 5f63 6f75 6e74 2866  ol_spend_count(f
-00004040: 756c 6c5f 6e6f 6465 5f61 7069 2c20 3029  ull_node_api, 0)
-00004050: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00004060: 2020 6272 6561 6b0a 2020 2020 2020 2020    break.        
-00004070: 2020 2020 6177 6169 7420 6661 726d 5f74      await farm_t
-00004080: 7261 6e73 6163 7469 6f6e 5f62 6c6f 636b  ransaction_block
-00004090: 2866 756c 6c5f 6e6f 6465 5f61 7069 2c20  (full_node_api, 
-000040a0: 7761 6c6c 6574 5f31 5f6e 6f64 6529 0a0a  wallet_1_node)..
-000040b0: 2020 2020 6f75 7470 7574 7320 3d20 6177      outputs = aw
-000040c0: 6169 7420 6372 6561 7465 5f74 785f 6f75  ait create_tx_ou
-000040d0: 7470 7574 7328 7761 6c6c 6574 5f32 2c20  tputs(wallet_2, 
-000040e0: 6f75 7470 7574 5f61 7267 7329 0a20 2020  output_args).   
-000040f0: 2061 6d6f 756e 745f 6f75 7470 7574 7320   amount_outputs 
-00004100: 3d20 7375 6d28 6f75 7470 7574 5b22 616d  = sum(output["am
-00004110: 6f75 6e74 225d 2066 6f72 206f 7574 7075  ount"] for outpu
-00004120: 7420 696e 206f 7574 7075 7473 290a 2020  t in outputs).  
-00004130: 2020 616d 6f75 6e74 5f66 6565 203d 2075    amount_fee = u
-00004140: 696e 7436 3428 6665 6529 0a0a 2020 2020  int64(fee)..    
-00004150: 6966 2069 735f 6361 743a 0a20 2020 2020  if is_cat:.     
-00004160: 2020 2061 6d6f 756e 745f 746f 7461 6c20     amount_total 
-00004170: 3d20 616d 6f75 6e74 5f6f 7574 7075 7473  = amount_outputs
-00004180: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00004190: 2020 2061 6d6f 756e 745f 746f 7461 6c20     amount_total 
-000041a0: 3d20 616d 6f75 6e74 5f6f 7574 7075 7473  = amount_outputs
-000041b0: 202b 2061 6d6f 756e 745f 6665 650a 0a20   + amount_fee.. 
-000041c0: 2020 2073 656c 6563 7465 645f 636f 696e     selected_coin
-000041d0: 203d 204e 6f6e 650a 2020 2020 6966 2073   = None.    if s
-000041e0: 656c 6563 745f 636f 696e 3a0a 2020 2020  elect_coin:.    
-000041f0: 2020 2020 7365 6c65 6374 6564 5f63 6f69      selected_coi
-00004200: 6e20 3d20 6177 6169 7420 7761 6c6c 6574  n = await wallet
-00004210: 5f31 5f72 7063 2e73 656c 6563 745f 636f  _1_rpc.select_co
-00004220: 696e 7328 616d 6f75 6e74 3d61 6d6f 756e  ins(amount=amoun
-00004230: 745f 746f 7461 6c2c 2077 616c 6c65 745f  t_total, wallet_
-00004240: 6964 3d77 616c 6c65 745f 6964 290a 2020  id=wallet_id).  
-00004250: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
-00004260: 2873 656c 6563 7465 645f 636f 696e 2920  (selected_coin) 
-00004270: 3d3d 2031 0a0a 2020 2020 7478 203d 2061  == 1..    tx = a
-00004280: 7761 6974 2077 616c 6c65 745f 315f 7270  wait wallet_1_rp
-00004290: 632e 6372 6561 7465 5f73 6967 6e65 645f  c.create_signed_
-000042a0: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
-000042b0: 2020 2020 206f 7574 7075 7473 2c0a 2020       outputs,.  
-000042c0: 2020 2020 2020 636f 696e 733d 7365 6c65        coins=sele
-000042d0: 6374 6564 5f63 6f69 6e2c 0a20 2020 2020  cted_coin,.     
-000042e0: 2020 2066 6565 3d61 6d6f 756e 745f 6665     fee=amount_fe
-000042f0: 652c 0a20 2020 2020 2020 2077 616c 6c65  e,.        walle
-00004300: 745f 6964 3d77 616c 6c65 745f 6964 2c0a  t_id=wallet_id,.
-00004310: 2020 2020 290a 2020 2020 6173 7365 7274      ).    assert
-00004320: 5f74 785f 616d 6f75 6e74 7328 7478 2c20  _tx_amounts(tx, 
-00004330: 6f75 7470 7574 732c 2061 6d6f 756e 745f  outputs, amount_
-00004340: 6665 653d 616d 6f75 6e74 5f66 6565 2c20  fee=amount_fee, 
-00004350: 6368 616e 6765 5f65 7870 6563 7465 643d  change_expected=
-00004360: 6e6f 7420 7365 6c65 6374 5f63 6f69 6e2c  not select_coin,
-00004370: 2069 735f 6361 743d 6973 5f63 6174 290a   is_cat=is_cat).
-00004380: 0a20 2020 2023 2046 6172 6d20 7468 6520  .    # Farm the 
-00004390: 7472 616e 7361 6374 696f 6e20 616e 6420  transaction and 
-000043a0: 6d61 6b65 2073 7572 6520 7468 6520 7761  make sure the wa
-000043b0: 6c6c 6574 2062 616c 616e 6365 2072 6566  llet balance ref
-000043c0: 6c65 6374 7320 6974 2063 6f72 7265 6374  lects it correct
-000043d0: 0a20 2020 2073 7065 6e64 5f62 756e 646c  .    spend_bundl
-000043e0: 6520 3d20 7478 2e73 7065 6e64 5f62 756e  e = tx.spend_bun
-000043f0: 646c 650a 2020 2020 6173 7365 7274 2073  dle.    assert s
-00004400: 7065 6e64 5f62 756e 646c 6520 6973 206e  pend_bundle is n
-00004410: 6f74 204e 6f6e 650a 2020 2020 7075 7368  ot None.    push
-00004420: 5f72 6573 203d 2061 7761 6974 2066 756c  _res = await ful
-00004430: 6c5f 6e6f 6465 5f72 7063 2e70 7573 685f  l_node_rpc.push_
-00004440: 7478 2873 7065 6e64 5f62 756e 646c 6529  tx(spend_bundle)
-00004450: 0a20 2020 2061 7373 6572 7420 7075 7368  .    assert push
-00004460: 5f72 6573 5b22 7375 6363 6573 7322 5d0a  _res["success"].
-00004470: 2020 2020 6177 6169 7420 6661 726d 5f74      await farm_t
-00004480: 7261 6e73 6163 7469 6f6e 2866 756c 6c5f  ransaction(full_
-00004490: 6e6f 6465 5f61 7069 2c20 7761 6c6c 6574  node_api, wallet
-000044a0: 5f31 5f6e 6f64 652c 2073 7065 6e64 5f62  _1_node, spend_b
-000044b0: 756e 646c 6529 0a20 2020 2061 7761 6974  undle).    await
-000044c0: 2074 696d 655f 6f75 745f 6173 7365 7274   time_out_assert
-000044d0: 2832 302c 2067 6574 5f63 6f6e 6669 726d  (20, get_confirm
-000044e0: 6564 5f62 616c 616e 6365 2c20 6765 6e65  ed_balance, gene
-000044f0: 7261 7465 645f 6675 6e64 7320 2d20 616d  rated_funds - am
-00004500: 6f75 6e74 5f74 6f74 616c 2c20 7761 6c6c  ount_total, wall
-00004510: 6574 5f31 5f72 7063 2c20 7761 6c6c 6574  et_1_rpc, wallet
-00004520: 5f69 6429 0a0a 2020 2020 2320 5661 6c69  _id)..    # Vali
-00004530: 6461 7465 2074 6865 206d 656d 6f73 0a20  date the memos. 
-00004540: 2020 2066 6f72 206f 7574 7075 7420 696e     for output in
-00004550: 206f 7574 7075 7473 3a0a 2020 2020 2020   outputs:.      
-00004560: 2020 6966 2022 6d65 6d6f 7322 2069 6e20    if "memos" in 
-00004570: 6f75 7470 7574 733a 0a20 2020 2020 2020  outputs:.       
-00004580: 2020 2020 2066 6f75 6e64 3a20 626f 6f6c       found: bool
-00004590: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
-000045a0: 2020 2020 2066 6f72 2061 6464 6974 696f       for additio
-000045b0: 6e20 696e 2073 7065 6e64 5f62 756e 646c  n in spend_bundl
-000045c0: 652e 6164 6469 7469 6f6e 7328 293a 0a20  e.additions():. 
-000045d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000045e0: 6620 6164 6469 7469 6f6e 2e61 6d6f 756e  f addition.amoun
-000045f0: 7420 3d3d 206f 7574 7075 745b 2261 6d6f  t == output["amo
-00004600: 756e 7422 5d20 616e 6420 6164 6469 7469  unt"] and additi
-00004610: 6f6e 2e70 757a 7a6c 655f 6861 7368 2e68  on.puzzle_hash.h
-00004620: 6578 2829 203d 3d20 6f75 7470 7574 5b22  ex() == output["
-00004630: 7075 7a7a 6c65 5f68 6173 6822 5d3a 0a20  puzzle_hash"]:. 
-00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004650: 2020 2063 723a 204f 7074 696f 6e61 6c5b     cr: Optional[
-00004660: 436f 696e 5265 636f 7264 5d20 3d20 6177  CoinRecord] = aw
-00004670: 6169 7420 6675 6c6c 5f6e 6f64 655f 7270  ait full_node_rp
-00004680: 632e 6765 745f 636f 696e 5f72 6563 6f72  c.get_coin_recor
-00004690: 645f 6279 5f6e 616d 6528 6164 6469 7469  d_by_name(additi
-000046a0: 6f6e 2e6e 616d 6528 2929 0a20 2020 2020  on.name()).     
-000046b0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000046c0: 7373 6572 7420 6372 2069 7320 6e6f 7420  ssert cr is not 
-000046d0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-000046e0: 2020 2020 2020 2020 2073 7065 6e64 3a20           spend: 
-000046f0: 4f70 7469 6f6e 616c 5b43 6f69 6e53 7065  Optional[CoinSpe
-00004700: 6e64 5d20 3d20 6177 6169 7420 6675 6c6c  nd] = await full
-00004710: 5f6e 6f64 655f 7270 632e 6765 745f 7075  _node_rpc.get_pu
-00004720: 7a7a 6c65 5f61 6e64 5f73 6f6c 7574 696f  zzle_and_solutio
-00004730: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-00004740: 2020 2020 2020 2020 2020 2061 6464 6974             addit
-00004750: 696f 6e2e 7061 7265 6e74 5f63 6f69 6e5f  ion.parent_coin_
-00004760: 696e 666f 2c20 6372 2e63 6f6e 6669 726d  info, cr.confirm
-00004770: 6564 5f62 6c6f 636b 5f69 6e64 6578 0a20  ed_block_index. 
-00004780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004790: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000047a0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-000047b0: 7370 656e 6420 6973 206e 6f74 204e 6f6e  spend is not Non
-000047c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000047d0: 2020 2020 2020 7362 3a20 5370 656e 6442        sb: SpendB
-000047e0: 756e 646c 6520 3d20 5370 656e 6442 756e  undle = SpendBun
-000047f0: 646c 6528 5b73 7065 6e64 5d2c 2047 3245  dle([spend], G2E
-00004800: 6c65 6d65 6e74 2829 290a 2020 2020 2020  lement()).      
-00004810: 2020 2020 2020 2020 2020 2020 2020 6173                as
-00004820: 7365 7274 2063 6f6d 7075 7465 5f6d 656d  sert compute_mem
-00004830: 6f73 2873 6229 203d 3d20 7b61 6464 6974  os(sb) == {addit
-00004840: 696f 6e2e 6e61 6d65 2829 3a20 5b6d 656d  ion.name(): [mem
-00004850: 6f2e 656e 636f 6465 2829 2066 6f72 206d  o.encode() for m
-00004860: 656d 6f20 696e 206f 7574 7075 745b 226d  emo in output["m
-00004870: 656d 6f73 225d 5d7d 0a20 2020 2020 2020  emos"]]}.       
-00004880: 2020 2020 2020 2020 2020 2020 2066 6f75               fou
-00004890: 6e64 203d 2054 7275 650a 2020 2020 2020  nd = True.      
-000048a0: 2020 2020 2020 6173 7365 7274 2066 6f75        assert fou
-000048b0: 6e64 0a0a 0a40 7079 7465 7374 2e6d 6172  nd...@pytest.mar
-000048c0: 6b2e 6173 796e 6369 6f0a 6173 796e 6320  k.asyncio.async 
-000048d0: 6465 6620 7465 7374 5f63 7265 6174 655f  def test_create_
-000048e0: 7369 676e 6564 5f74 7261 6e73 6163 7469  signed_transacti
-000048f0: 6f6e 5f77 6974 685f 636f 696e 5f61 6e6e  on_with_coin_ann
-00004900: 6f75 6e63 656d 656e 7428 7761 6c6c 6574  ouncement(wallet
-00004910: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
-00004920: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
-00004930: 6e76 6972 6f6e 6d65 6e74 293a 0a20 2020  nvironment):.   
-00004940: 2065 6e76 3a20 5761 6c6c 6574 5270 6354   env: WalletRpcT
-00004950: 6573 7445 6e76 6972 6f6e 6d65 6e74 203d  estEnvironment =
-00004960: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
-00004970: 726f 6e6d 656e 740a 0a20 2020 2077 616c  ronment..    wal
-00004980: 6c65 745f 323a 2057 616c 6c65 7420 3d20  let_2: Wallet = 
-00004990: 656e 762e 7761 6c6c 6574 5f32 2e77 616c  env.wallet_2.wal
-000049a0: 6c65 740a 2020 2020 6675 6c6c 5f6e 6f64  let.    full_nod
-000049b0: 655f 6170 693a 2046 756c 6c4e 6f64 6553  e_api: FullNodeS
-000049c0: 696d 756c 6174 6f72 203d 2065 6e76 2e66  imulator = env.f
-000049d0: 756c 6c5f 6e6f 6465 2e61 7069 0a20 2020  ull_node.api.   
-000049e0: 2063 6c69 656e 743a 2057 616c 6c65 7452   client: WalletR
-000049f0: 7063 436c 6965 6e74 203d 2065 6e76 2e77  pcClient = env.w
-00004a00: 616c 6c65 745f 312e 7270 635f 636c 6965  allet_1.rpc_clie
-00004a10: 6e74 0a20 2020 2063 6c69 656e 745f 6e6f  nt.    client_no
-00004a20: 6465 3a20 4675 6c6c 4e6f 6465 5270 6343  de: FullNodeRpcC
-00004a30: 6c69 656e 7420 3d20 656e 762e 6675 6c6c  lient = env.full
-00004a40: 5f6e 6f64 652e 7270 635f 636c 6965 6e74  _node.rpc_client
-00004a50: 0a0a 2020 2020 6177 6169 7420 6765 6e65  ..    await gene
-00004a60: 7261 7465 5f66 756e 6473 2866 756c 6c5f  rate_funds(full_
-00004a70: 6e6f 6465 5f61 7069 2c20 656e 762e 7761  node_api, env.wa
-00004a80: 6c6c 6574 5f31 290a 0a20 2020 2073 6967  llet_1)..    sig
-00004a90: 6e65 645f 7478 5f61 6d6f 756e 7420 3d20  ned_tx_amount = 
-00004aa0: 7569 6e74 3634 2838 3838 3030 3029 0a20  uint64(888000). 
-00004ab0: 2020 2074 785f 636f 696e 5f61 6e6e 6f75     tx_coin_annou
-00004ac0: 6e63 656d 656e 7473 203d 205b 0a20 2020  ncements = [.   
-00004ad0: 2020 2020 2041 6e6e 6f75 6e63 656d 656e       Announcemen
-00004ae0: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-00004af0: 7464 5f68 6173 6828 6222 636f 696e 5f69  td_hash(b"coin_i
-00004b00: 645f 3122 292c 0a20 2020 2020 2020 2020  d_1"),.         
-00004b10: 2020 2073 7464 5f68 6173 6828 6222 6d65     std_hash(b"me
-00004b20: 7373 6167 6522 292c 0a20 2020 2020 2020  ssage"),.       
-00004b30: 2020 2020 2062 225c 7863 6122 2c0a 2020       b"\xca",.  
-00004b40: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
-00004b50: 2041 6e6e 6f75 6e63 656d 656e 7428 0a20   Announcement(. 
-00004b60: 2020 2020 2020 2020 2020 2073 7464 5f68             std_h
-00004b70: 6173 6828 6222 636f 696e 5f69 645f 3222  ash(b"coin_id_2"
-00004b80: 292c 0a20 2020 2020 2020 2020 2020 2062  ),.            b
-00004b90: 7974 6573 2850 726f 6772 616d 2e74 6f28  ytes(Program.to(
-00004ba0: 2261 2073 7472 696e 6722 2929 2c0a 2020  "a string")),.  
-00004bb0: 2020 2020 2020 292c 0a20 2020 205d 0a20        ),.    ]. 
-00004bc0: 2020 206f 7574 7075 7473 203d 2061 7761     outputs = awa
-00004bd0: 6974 2063 7265 6174 655f 7478 5f6f 7574  it create_tx_out
-00004be0: 7075 7473 2877 616c 6c65 745f 322c 205b  puts(wallet_2, [
-00004bf0: 2873 6967 6e65 645f 7478 5f61 6d6f 756e  (signed_tx_amoun
-00004c00: 742c 204e 6f6e 6529 5d29 0a20 2020 2074  t, None)]).    t
-00004c10: 785f 7265 733a 2054 7261 6e73 6163 7469  x_res: Transacti
-00004c20: 6f6e 5265 636f 7264 203d 2061 7761 6974  onRecord = await
-00004c30: 2063 6c69 656e 742e 6372 6561 7465 5f73   client.create_s
-00004c40: 6967 6e65 645f 7472 616e 7361 6374 696f  igned_transactio
-00004c50: 6e28 0a20 2020 2020 2020 206f 7574 7075  n(.        outpu
-00004c60: 7473 2c20 636f 696e 5f61 6e6e 6f75 6e63  ts, coin_announc
-00004c70: 656d 656e 7473 3d74 785f 636f 696e 5f61  ements=tx_coin_a
-00004c80: 6e6e 6f75 6e63 656d 656e 7473 0a20 2020  nnouncements.   
-00004c90: 2029 0a20 2020 2061 7373 6572 745f 7478   ).    assert_tx
-00004ca0: 5f61 6d6f 756e 7473 2874 785f 7265 732c  _amounts(tx_res,
-00004cb0: 206f 7574 7075 7473 2c20 616d 6f75 6e74   outputs, amount
-00004cc0: 5f66 6565 3d75 696e 7436 3428 3029 2c20  _fee=uint64(0), 
-00004cd0: 6368 616e 6765 5f65 7870 6563 7465 643d  change_expected=
-00004ce0: 4661 6c73 6529 0a20 2020 2061 7761 6974  False).    await
-00004cf0: 2061 7373 6572 745f 7075 7368 5f74 785f   assert_push_tx_
-00004d00: 6572 726f 7228 636c 6965 6e74 5f6e 6f64  error(client_nod
-00004d10: 652c 2074 785f 7265 7329 0a0a 0a40 7079  e, tx_res)...@py
-00004d20: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
-00004d30: 6f0a 6173 796e 6320 6465 6620 7465 7374  o.async def test
-00004d40: 5f63 7265 6174 655f 7369 676e 6564 5f74  _create_signed_t
-00004d50: 7261 6e73 6163 7469 6f6e 5f77 6974 685f  ransaction_with_
-00004d60: 7075 7a7a 6c65 5f61 6e6e 6f75 6e63 656d  puzzle_announcem
-00004d70: 656e 7428 7761 6c6c 6574 5f72 7063 5f65  ent(wallet_rpc_e
-00004d80: 6e76 6972 6f6e 6d65 6e74 3a20 5761 6c6c  nvironment: Wall
-00004d90: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
-00004da0: 6d65 6e74 293a 0a20 2020 2065 6e76 3a20  ment):.    env: 
-00004db0: 5761 6c6c 6574 5270 6354 6573 7445 6e76  WalletRpcTestEnv
-00004dc0: 6972 6f6e 6d65 6e74 203d 2077 616c 6c65  ironment = walle
-00004dd0: 745f 7270 635f 656e 7669 726f 6e6d 656e  t_rpc_environmen
-00004de0: 740a 0a20 2020 2077 616c 6c65 745f 323a  t..    wallet_2:
-00004df0: 2057 616c 6c65 7420 3d20 656e 762e 7761   Wallet = env.wa
-00004e00: 6c6c 6574 5f32 2e77 616c 6c65 740a 2020  llet_2.wallet.  
-00004e10: 2020 6675 6c6c 5f6e 6f64 655f 6170 693a    full_node_api:
-00004e20: 2046 756c 6c4e 6f64 6553 696d 756c 6174   FullNodeSimulat
-00004e30: 6f72 203d 2065 6e76 2e66 756c 6c5f 6e6f  or = env.full_no
-00004e40: 6465 2e61 7069 0a20 2020 2063 6c69 656e  de.api.    clien
-00004e50: 743a 2057 616c 6c65 7452 7063 436c 6965  t: WalletRpcClie
-00004e60: 6e74 203d 2065 6e76 2e77 616c 6c65 745f  nt = env.wallet_
-00004e70: 312e 7270 635f 636c 6965 6e74 0a20 2020  1.rpc_client.   
-00004e80: 2063 6c69 656e 745f 6e6f 6465 3a20 4675   client_node: Fu
-00004e90: 6c6c 4e6f 6465 5270 6343 6c69 656e 7420  llNodeRpcClient 
-00004ea0: 3d20 656e 762e 6675 6c6c 5f6e 6f64 652e  = env.full_node.
-00004eb0: 7270 635f 636c 6965 6e74 0a0a 2020 2020  rpc_client..    
-00004ec0: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
-00004ed0: 756e 6473 2866 756c 6c5f 6e6f 6465 5f61  unds(full_node_a
-00004ee0: 7069 2c20 656e 762e 7761 6c6c 6574 5f31  pi, env.wallet_1
-00004ef0: 290a 0a20 2020 2073 6967 6e65 645f 7478  )..    signed_tx
-00004f00: 5f61 6d6f 756e 7420 3d20 7569 6e74 3634  _amount = uint64
-00004f10: 2838 3838 3030 3029 0a20 2020 2074 785f  (888000).    tx_
-00004f20: 7075 7a7a 6c65 5f61 6e6e 6f75 6e63 656d  puzzle_announcem
-00004f30: 656e 7473 203d 205b 0a20 2020 2020 2020  ents = [.       
-00004f40: 2041 6e6e 6f75 6e63 656d 656e 7428 0a20   Announcement(. 
-00004f50: 2020 2020 2020 2020 2020 2073 7464 5f68             std_h
-00004f60: 6173 6828 6222 7075 7a7a 6c65 5f68 6173  ash(b"puzzle_has
-00004f70: 685f 3122 292c 0a20 2020 2020 2020 2020  h_1"),.         
-00004f80: 2020 2062 226d 6573 7361 6765 222c 0a20     b"message",. 
-00004f90: 2020 2020 2020 2020 2020 2062 225c 7863             b"\xc
-00004fa0: 6122 2c0a 2020 2020 2020 2020 292c 0a20  a",.        ),. 
-00004fb0: 2020 2020 2020 2041 6e6e 6f75 6e63 656d         Announcem
-00004fc0: 656e 7428 0a20 2020 2020 2020 2020 2020  ent(.           
-00004fd0: 2073 7464 5f68 6173 6828 6222 7075 7a7a   std_hash(b"puzz
-00004fe0: 6c65 5f68 6173 685f 3222 292c 0a20 2020  le_hash_2"),.   
-00004ff0: 2020 2020 2020 2020 2062 7974 6573 2850           bytes(P
-00005000: 726f 6772 616d 2e74 6f28 2261 2073 7472  rogram.to("a str
-00005010: 696e 6722 2929 2c0a 2020 2020 2020 2020  ing")),.        
-00005020: 292c 0a20 2020 205d 0a20 2020 206f 7574  ),.    ].    out
-00005030: 7075 7473 203d 2061 7761 6974 2063 7265  puts = await cre
-00005040: 6174 655f 7478 5f6f 7574 7075 7473 2877  ate_tx_outputs(w
-00005050: 616c 6c65 745f 322c 205b 2873 6967 6e65  allet_2, [(signe
-00005060: 645f 7478 5f61 6d6f 756e 742c 204e 6f6e  d_tx_amount, Non
-00005070: 6529 5d29 0a20 2020 2074 785f 7265 7320  e)]).    tx_res 
-00005080: 3d20 6177 6169 7420 636c 6965 6e74 2e63  = await client.c
-00005090: 7265 6174 655f 7369 676e 6564 5f74 7261  reate_signed_tra
-000050a0: 6e73 6163 7469 6f6e 286f 7574 7075 7473  nsaction(outputs
-000050b0: 2c20 7075 7a7a 6c65 5f61 6e6e 6f75 6e63  , puzzle_announc
-000050c0: 656d 656e 7473 3d74 785f 7075 7a7a 6c65  ements=tx_puzzle
-000050d0: 5f61 6e6e 6f75 6e63 656d 656e 7473 290a  _announcements).
-000050e0: 2020 2020 6173 7365 7274 5f74 785f 616d      assert_tx_am
-000050f0: 6f75 6e74 7328 7478 5f72 6573 2c20 6f75  ounts(tx_res, ou
-00005100: 7470 7574 732c 2061 6d6f 756e 745f 6665  tputs, amount_fe
-00005110: 653d 7569 6e74 3634 2830 292c 2063 6861  e=uint64(0), cha
-00005120: 6e67 655f 6578 7065 6374 6564 3d54 7275  nge_expected=Tru
-00005130: 6529 0a20 2020 2061 7761 6974 2061 7373  e).    await ass
-00005140: 6572 745f 7075 7368 5f74 785f 6572 726f  ert_push_tx_erro
-00005150: 7228 636c 6965 6e74 5f6e 6f64 652c 2074  r(client_node, t
-00005160: 785f 7265 7329 0a0a 0a40 7079 7465 7374  x_res)...@pytest
-00005170: 2e6d 6172 6b2e 6173 796e 6369 6f0a 6173  .mark.asyncio.as
-00005180: 796e 6320 6465 6620 7465 7374 5f63 7265  ync def test_cre
-00005190: 6174 655f 7369 676e 6564 5f74 7261 6e73  ate_signed_trans
-000051a0: 6163 7469 6f6e 5f77 6974 685f 6578 636c  action_with_excl
-000051b0: 7564 655f 636f 696e 7328 7761 6c6c 6574  ude_coins(wallet
-000051c0: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
-000051d0: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
-000051e0: 6e76 6972 6f6e 6d65 6e74 2920 2d3e 204e  nvironment) -> N
-000051f0: 6f6e 653a 0a20 2020 2065 6e76 3a20 5761  one:.    env: Wa
-00005200: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
-00005210: 6f6e 6d65 6e74 203d 2077 616c 6c65 745f  onment = wallet_
-00005220: 7270 635f 656e 7669 726f 6e6d 656e 740a  rpc_environment.
-00005230: 2020 2020 7761 6c6c 6574 5f31 3a20 5761      wallet_1: Wa
-00005240: 6c6c 6574 203d 2065 6e76 2e77 616c 6c65  llet = env.walle
-00005250: 745f 312e 7761 6c6c 6574 0a20 2020 2077  t_1.wallet.    w
-00005260: 616c 6c65 745f 315f 7270 633a 2057 616c  allet_1_rpc: Wal
-00005270: 6c65 7452 7063 436c 6965 6e74 203d 2065  letRpcClient = e
-00005280: 6e76 2e77 616c 6c65 745f 312e 7270 635f  nv.wallet_1.rpc_
-00005290: 636c 6965 6e74 0a20 2020 2066 756c 6c5f  client.    full_
-000052a0: 6e6f 6465 5f61 7069 3a20 4675 6c6c 4e6f  node_api: FullNo
-000052b0: 6465 5369 6d75 6c61 746f 7220 3d20 656e  deSimulator = en
-000052c0: 762e 6675 6c6c 5f6e 6f64 652e 6170 690a  v.full_node.api.
-000052d0: 2020 2020 6675 6c6c 5f6e 6f64 655f 7270      full_node_rp
-000052e0: 633a 2046 756c 6c4e 6f64 6552 7063 436c  c: FullNodeRpcCl
-000052f0: 6965 6e74 203d 2065 6e76 2e66 756c 6c5f  ient = env.full_
-00005300: 6e6f 6465 2e72 7063 5f63 6c69 656e 740a  node.rpc_client.
-00005310: 2020 2020 6177 6169 7420 6765 6e65 7261      await genera
-00005320: 7465 5f66 756e 6473 2866 756c 6c5f 6e6f  te_funds(full_no
-00005330: 6465 5f61 7069 2c20 656e 762e 7761 6c6c  de_api, env.wall
-00005340: 6574 5f31 290a 0a20 2020 2061 7379 6e63  et_1)..    async
-00005350: 2064 6566 2069 745f 646f 6573 5f6e 6f74   def it_does_not
-00005360: 5f69 6e63 6c75 6465 5f74 6865 5f65 7863  _include_the_exc
-00005370: 6c75 6465 645f 636f 696e 7328 2920 2d3e  luded_coins() ->
-00005380: 204e 6f6e 653a 0a20 2020 2020 2020 2073   None:.        s
-00005390: 656c 6563 7465 645f 636f 696e 7320 3d20  elected_coins = 
-000053a0: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
-000053b0: 7063 2e73 656c 6563 745f 636f 696e 7328  pc.select_coins(
-000053c0: 616d 6f75 6e74 3d32 3530 3030 3030 3030  amount=250000000
-000053d0: 3030 302c 2077 616c 6c65 745f 6964 3d31  000, wallet_id=1
-000053e0: 290a 2020 2020 2020 2020 6173 7365 7274  ).        assert
-000053f0: 206c 656e 2873 656c 6563 7465 645f 636f   len(selected_co
-00005400: 696e 7329 203d 3d20 310a 2020 2020 2020  ins) == 1.      
-00005410: 2020 6f75 7470 7574 7320 3d20 6177 6169    outputs = awai
-00005420: 7420 6372 6561 7465 5f74 785f 6f75 7470  t create_tx_outp
-00005430: 7574 7328 7761 6c6c 6574 5f31 2c20 5b28  uts(wallet_1, [(
-00005440: 7569 6e74 3634 2832 3530 3030 3030 3030  uint64(250000000
-00005450: 3030 3029 2c20 4e6f 6e65 295d 290a 0a20  000), None)]).. 
-00005460: 2020 2020 2020 2074 7820 3d20 6177 6169         tx = awai
-00005470: 7420 7761 6c6c 6574 5f31 5f72 7063 2e63  t wallet_1_rpc.c
-00005480: 7265 6174 655f 7369 676e 6564 5f74 7261  reate_signed_tra
-00005490: 6e73 6163 7469 6f6e 286f 7574 7075 7473  nsaction(outputs
-000054a0: 2c20 6578 636c 7564 655f 636f 696e 733d  , exclude_coins=
-000054b0: 7365 6c65 6374 6564 5f63 6f69 6e73 290a  selected_coins).
-000054c0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
-000054d0: 6c65 6e28 7478 2e72 656d 6f76 616c 7329  len(tx.removals)
-000054e0: 203d 3d20 310a 2020 2020 2020 2020 6173   == 1.        as
-000054f0: 7365 7274 2074 782e 7265 6d6f 7661 6c73  sert tx.removals
-00005500: 5b30 5d20 213d 2073 656c 6563 7465 645f  [0] != selected_
-00005510: 636f 696e 735b 305d 0a20 2020 2020 2020  coins[0].       
-00005520: 2061 7373 6572 7420 7478 2e72 656d 6f76   assert tx.remov
-00005530: 616c 735b 305d 2e61 6d6f 756e 7420 3d3d  als[0].amount ==
-00005540: 2075 696e 7436 3428 3137 3530 3030 3030   uint64(17500000
-00005550: 3030 3030 3029 0a20 2020 2020 2020 2061  00000).        a
-00005560: 7761 6974 2061 7373 6572 745f 7075 7368  wait assert_push
-00005570: 5f74 785f 6572 726f 7228 6675 6c6c 5f6e  _tx_error(full_n
-00005580: 6f64 655f 7270 632c 2074 7829 0a0a 2020  ode_rpc, tx)..  
-00005590: 2020 6173 796e 6320 6465 6620 6974 5f74    async def it_t
-000055a0: 6872 6f77 735f 616e 5f65 7272 6f72 5f77  hrows_an_error_w
-000055b0: 6865 6e5f 616c 6c5f 7370 656e 6461 626c  hen_all_spendabl
-000055c0: 655f 636f 696e 735f 6172 655f 6578 636c  e_coins_are_excl
-000055d0: 7564 6564 2829 202d 3e20 4e6f 6e65 3a0a  uded() -> None:.
-000055e0: 2020 2020 2020 2020 7365 6c65 6374 6564          selected
-000055f0: 5f63 6f69 6e73 203d 2061 7761 6974 2077  _coins = await w
-00005600: 616c 6c65 745f 315f 7270 632e 7365 6c65  allet_1_rpc.sele
-00005610: 6374 5f63 6f69 6e73 2861 6d6f 756e 743d  ct_coins(amount=
-00005620: 3137 3530 3030 3030 3030 3030 302c 2077  1750000000000, w
-00005630: 616c 6c65 745f 6964 3d31 290a 2020 2020  allet_id=1).    
-00005640: 2020 2020 6173 7365 7274 206c 656e 2873      assert len(s
-00005650: 656c 6563 7465 645f 636f 696e 7329 203d  elected_coins) =
-00005660: 3d20 310a 2020 2020 2020 2020 6f75 7470  = 1.        outp
-00005670: 7574 7320 3d20 6177 6169 7420 6372 6561  uts = await crea
-00005680: 7465 5f74 785f 6f75 7470 7574 7328 7761  te_tx_outputs(wa
-00005690: 6c6c 6574 5f31 2c20 5b28 7569 6e74 3634  llet_1, [(uint64
-000056a0: 2831 3735 3030 3030 3030 3030 3030 292c  (1750000000000),
-000056b0: 204e 6f6e 6529 5d29 0a0a 2020 2020 2020   None)])..      
-000056c0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-000056d0: 6973 6573 2856 616c 7565 4572 726f 7229  ises(ValueError)
-000056e0: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
-000056f0: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
-00005700: 2e63 7265 6174 655f 7369 676e 6564 5f74  .create_signed_t
-00005710: 7261 6e73 6163 7469 6f6e 286f 7574 7075  ransaction(outpu
-00005720: 7473 2c20 6578 636c 7564 655f 636f 696e  ts, exclude_coin
-00005730: 733d 7365 6c65 6374 6564 5f63 6f69 6e73  s=selected_coins
-00005740: 290a 0a20 2020 2061 7761 6974 2069 745f  )..    await it_
-00005750: 646f 6573 5f6e 6f74 5f69 6e63 6c75 6465  does_not_include
-00005760: 5f74 6865 5f65 7863 6c75 6465 645f 636f  _the_excluded_co
-00005770: 696e 7328 290a 2020 2020 6177 6169 7420  ins().    await 
-00005780: 6974 5f74 6872 6f77 735f 616e 5f65 7272  it_throws_an_err
-00005790: 6f72 5f77 6865 6e5f 616c 6c5f 7370 656e  or_when_all_spen
-000057a0: 6461 626c 655f 636f 696e 735f 6172 655f  dable_coins_are_
-000057b0: 6578 636c 7564 6564 2829 0a0a 0a40 7079  excluded()...@py
-000057c0: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
-000057d0: 6f0a 6173 796e 6320 6465 6620 7465 7374  o.async def test
-000057e0: 5f73 656e 645f 7472 616e 7361 6374 696f  _send_transactio
-000057f0: 6e5f 6d75 6c74 6928 7761 6c6c 6574 5f72  n_multi(wallet_r
-00005800: 7063 5f65 6e76 6972 6f6e 6d65 6e74 3a20  pc_environment: 
-00005810: 5761 6c6c 6574 5270 6354 6573 7445 6e76  WalletRpcTestEnv
-00005820: 6972 6f6e 6d65 6e74 293a 0a20 2020 2065  ironment):.    e
-00005830: 6e76 3a20 5761 6c6c 6574 5270 6354 6573  nv: WalletRpcTes
-00005840: 7445 6e76 6972 6f6e 6d65 6e74 203d 2077  tEnvironment = w
-00005850: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
-00005860: 6e6d 656e 740a 0a20 2020 2077 616c 6c65  nment..    walle
-00005870: 745f 323a 2057 616c 6c65 7420 3d20 656e  t_2: Wallet = en
-00005880: 762e 7761 6c6c 6574 5f32 2e77 616c 6c65  v.wallet_2.walle
-00005890: 740a 2020 2020 7761 6c6c 6574 5f6e 6f64  t.    wallet_nod
-000058a0: 653a 2057 616c 6c65 744e 6f64 6520 3d20  e: WalletNode = 
-000058b0: 656e 762e 7761 6c6c 6574 5f31 2e6e 6f64  env.wallet_1.nod
-000058c0: 650a 2020 2020 6675 6c6c 5f6e 6f64 655f  e.    full_node_
-000058d0: 6170 693a 2046 756c 6c4e 6f64 6553 696d  api: FullNodeSim
-000058e0: 756c 6174 6f72 203d 2065 6e76 2e66 756c  ulator = env.ful
-000058f0: 6c5f 6e6f 6465 2e61 7069 0a20 2020 2063  l_node.api.    c
-00005900: 6c69 656e 743a 2057 616c 6c65 7452 7063  lient: WalletRpc
-00005910: 436c 6965 6e74 203d 2065 6e76 2e77 616c  Client = env.wal
-00005920: 6c65 745f 312e 7270 635f 636c 6965 6e74  let_1.rpc_client
-00005930: 0a0a 2020 2020 6765 6e65 7261 7465 645f  ..    generated_
-00005940: 6675 6e64 7320 3d20 6177 6169 7420 6765  funds = await ge
-00005950: 6e65 7261 7465 5f66 756e 6473 2866 756c  nerate_funds(ful
-00005960: 6c5f 6e6f 6465 5f61 7069 2c20 656e 762e  l_node_api, env.
-00005970: 7761 6c6c 6574 5f31 290a 0a20 2020 2072  wallet_1)..    r
-00005980: 656d 6f76 616c 7320 3d20 6177 6169 7420  emovals = await 
-00005990: 636c 6965 6e74 2e73 656c 6563 745f 636f  client.select_co
-000059a0: 696e 7328 3137 3530 3030 3030 3030 3030  ins(175000000000
-000059b0: 302c 2077 616c 6c65 745f 6964 3d31 2920  0, wallet_id=1) 
-000059c0: 2023 2077 6520 7761 6e74 2061 2063 6f69   # we want a coi
-000059d0: 6e20 7468 6174 2077 6f6e 2774 2062 6520  n that won't be 
-000059e0: 7365 6c65 6374 6564 2062 7920 6465 6661  selected by defa
-000059f0: 756c 740a 2020 2020 6f75 7470 7574 7320  ult.    outputs 
-00005a00: 3d20 6177 6169 7420 6372 6561 7465 5f74  = await create_t
-00005a10: 785f 6f75 7470 7574 7328 7761 6c6c 6574  x_outputs(wallet
-00005a20: 5f32 2c20 5b28 7569 6e74 3634 2831 292c  _2, [(uint64(1),
-00005a30: 205b 226d 656d 6f5f 3122 5d29 2c20 2875   ["memo_1"]), (u
-00005a40: 696e 7436 3428 3229 2c20 5b22 6d65 6d6f  int64(2), ["memo
-00005a50: 5f32 225d 295d 290a 2020 2020 616d 6f75  _2"])]).    amou
-00005a60: 6e74 5f6f 7574 7075 7473 203d 2073 756d  nt_outputs = sum
-00005a70: 286f 7574 7075 745b 2261 6d6f 756e 7422  (output["amount"
-00005a80: 5d20 666f 7220 6f75 7470 7574 2069 6e20  ] for output in 
-00005a90: 6f75 7470 7574 7329 0a20 2020 2061 6d6f  outputs).    amo
-00005aa0: 756e 745f 6665 6520 3d20 7569 6e74 3634  unt_fee = uint64
-00005ab0: 2861 6d6f 756e 745f 6f75 7470 7574 7320  (amount_outputs 
-00005ac0: 2b20 3129 0a0a 2020 2020 7365 6e64 5f74  + 1)..    send_t
-00005ad0: 785f 7265 733a 2054 7261 6e73 6163 7469  x_res: Transacti
-00005ae0: 6f6e 5265 636f 7264 203d 2061 7761 6974  onRecord = await
-00005af0: 2063 6c69 656e 742e 7365 6e64 5f74 7261   client.send_tra
-00005b00: 6e73 6163 7469 6f6e 5f6d 756c 7469 280a  nsaction_multi(.
-00005b10: 2020 2020 2020 2020 312c 0a20 2020 2020          1,.     
-00005b20: 2020 206f 7574 7075 7473 2c0a 2020 2020     outputs,.    
-00005b30: 2020 2020 636f 696e 733d 7265 6d6f 7661      coins=remova
-00005b40: 6c73 2c0a 2020 2020 2020 2020 6665 653d  ls,.        fee=
-00005b50: 616d 6f75 6e74 5f66 6565 2c0a 2020 2020  amount_fee,.    
-00005b60: 290a 2020 2020 7370 656e 645f 6275 6e64  ).    spend_bund
-00005b70: 6c65 203d 2073 656e 645f 7478 5f72 6573  le = send_tx_res
-00005b80: 2e73 7065 6e64 5f62 756e 646c 650a 2020  .spend_bundle.  
-00005b90: 2020 6173 7365 7274 2073 7065 6e64 5f62    assert spend_b
-00005ba0: 756e 646c 6520 6973 206e 6f74 204e 6f6e  undle is not Non
-00005bb0: 650a 2020 2020 6173 7365 7274 2073 656e  e.    assert sen
-00005bc0: 645f 7478 5f72 6573 2069 7320 6e6f 7420  d_tx_res is not 
-00005bd0: 4e6f 6e65 0a0a 2020 2020 6173 7365 7274  None..    assert
-00005be0: 5f74 785f 616d 6f75 6e74 7328 7365 6e64  _tx_amounts(send
-00005bf0: 5f74 785f 7265 732c 206f 7574 7075 7473  _tx_res, outputs
-00005c00: 2c20 616d 6f75 6e74 5f66 6565 3d61 6d6f  , amount_fee=amo
-00005c10: 756e 745f 6665 652c 2063 6861 6e67 655f  unt_fee, change_
-00005c20: 6578 7065 6374 6564 3d54 7275 6529 0a20  expected=True). 
-00005c30: 2020 2061 7373 6572 7420 7365 6e64 5f74     assert send_t
-00005c40: 785f 7265 732e 7265 6d6f 7661 6c73 203d  x_res.removals =
-00005c50: 3d20 7265 6d6f 7661 6c73 0a0a 2020 2020  = removals..    
-00005c60: 6177 6169 7420 6661 726d 5f74 7261 6e73  await farm_trans
-00005c70: 6163 7469 6f6e 2866 756c 6c5f 6e6f 6465  action(full_node
-00005c80: 5f61 7069 2c20 7761 6c6c 6574 5f6e 6f64  _api, wallet_nod
-00005c90: 652c 2073 7065 6e64 5f62 756e 646c 6529  e, spend_bundle)
-00005ca0: 0a0a 2020 2020 6177 6169 7420 7469 6d65  ..    await time
-00005cb0: 5f6f 7574 5f61 7373 6572 7428 3230 2c20  _out_assert(20, 
-00005cc0: 6765 745f 636f 6e66 6972 6d65 645f 6261  get_confirmed_ba
-00005cd0: 6c61 6e63 652c 2067 656e 6572 6174 6564  lance, generated
-00005ce0: 5f66 756e 6473 202d 2061 6d6f 756e 745f  _funds - amount_
-00005cf0: 6f75 7470 7574 7320 2d20 616d 6f75 6e74  outputs - amount
-00005d00: 5f66 6565 2c20 636c 6965 6e74 2c20 3129  _fee, client, 1)
-00005d10: 0a0a 2020 2020 2320 4368 6563 6b73 2074  ..    # Checks t
-00005d20: 6861 7420 7468 6520 6d65 6d6f 2063 616e  hat the memo can
-00005d30: 2062 6520 7265 7472 6965 7665 640a 2020   be retrieved.  
-00005d40: 2020 7478 5f63 6f6e 6669 726d 6564 203d    tx_confirmed =
-00005d50: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
-00005d60: 745f 7472 616e 7361 6374 696f 6e28 312c  t_transaction(1,
-00005d70: 2073 656e 645f 7478 5f72 6573 2e6e 616d   send_tx_res.nam
-00005d80: 6529 0a20 2020 2061 7373 6572 7420 7478  e).    assert tx
-00005d90: 5f63 6f6e 6669 726d 6564 2e63 6f6e 6669  _confirmed.confi
-00005da0: 726d 6564 0a20 2020 206d 656d 6f73 203d  rmed.    memos =
-00005db0: 2074 785f 636f 6e66 6972 6d65 642e 6765   tx_confirmed.ge
-00005dc0: 745f 6d65 6d6f 7328 290a 2020 2020 6173  t_memos().    as
-00005dd0: 7365 7274 206c 656e 286d 656d 6f73 2920  sert len(memos) 
-00005de0: 3d3d 206c 656e 286f 7574 7075 7473 290a  == len(outputs).
-00005df0: 2020 2020 666f 7220 6f75 7470 7574 2069      for output i
-00005e00: 6e20 6f75 7470 7574 733a 0a20 2020 2020  n outputs:.     
-00005e10: 2020 2061 7373 6572 7420 5b6f 7574 7075     assert [outpu
-00005e20: 745b 226d 656d 6f73 225d 5b30 5d2e 656e  t["memos"][0].en
-00005e30: 636f 6465 2829 5d20 696e 206d 656d 6f73  code()] in memos
-00005e40: 2e76 616c 7565 7328 290a 2020 2020 7370  .values().    sp
-00005e50: 656e 645f 6275 6e64 6c65 203d 2073 656e  end_bundle = sen
-00005e60: 645f 7478 5f72 6573 2e73 7065 6e64 5f62  d_tx_res.spend_b
-00005e70: 756e 646c 650a 2020 2020 6173 7365 7274  undle.    assert
-00005e80: 2073 7065 6e64 5f62 756e 646c 6520 6973   spend_bundle is
-00005e90: 206e 6f74 204e 6f6e 650a 2020 2020 666f   not None.    fo
-00005ea0: 7220 6b65 7920 696e 206d 656d 6f73 2e6b  r key in memos.k
-00005eb0: 6579 7328 293a 0a20 2020 2020 2020 2061  eys():.        a
-00005ec0: 7373 6572 7420 6b65 7920 696e 205b 612e  ssert key in [a.
-00005ed0: 6e61 6d65 2829 2066 6f72 2061 2069 6e20  name() for a in 
-00005ee0: 7370 656e 645f 6275 6e64 6c65 2e61 6464  spend_bundle.add
-00005ef0: 6974 696f 6e73 2829 5d0a 0a0a 4070 7974  itions()]...@pyt
-00005f00: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
-00005f10: 0a61 7379 6e63 2064 6566 2074 6573 745f  .async def test_
-00005f20: 6765 745f 7472 616e 7361 6374 696f 6e73  get_transactions
-00005f30: 2877 616c 6c65 745f 7270 635f 656e 7669  (wallet_rpc_envi
-00005f40: 726f 6e6d 656e 743a 2057 616c 6c65 7452  ronment: WalletR
-00005f50: 7063 5465 7374 456e 7669 726f 6e6d 656e  pcTestEnvironmen
-00005f60: 7429 3a0a 2020 2020 656e 763a 2057 616c  t):.    env: Wal
-00005f70: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
-00005f80: 6e6d 656e 7420 3d20 7761 6c6c 6574 5f72  nment = wallet_r
-00005f90: 7063 5f65 6e76 6972 6f6e 6d65 6e74 0a0a  pc_environment..
-00005fa0: 2020 2020 7761 6c6c 6574 3a20 5761 6c6c      wallet: Wall
-00005fb0: 6574 203d 2065 6e76 2e77 616c 6c65 745f  et = env.wallet_
-00005fc0: 312e 7761 6c6c 6574 0a20 2020 2077 616c  1.wallet.    wal
-00005fd0: 6c65 745f 6e6f 6465 3a20 5761 6c6c 6574  let_node: Wallet
-00005fe0: 4e6f 6465 203d 2065 6e76 2e77 616c 6c65  Node = env.walle
-00005ff0: 745f 312e 6e6f 6465 0a20 2020 2066 756c  t_1.node.    ful
-00006000: 6c5f 6e6f 6465 5f61 7069 3a20 4675 6c6c  l_node_api: Full
-00006010: 4e6f 6465 5369 6d75 6c61 746f 7220 3d20  NodeSimulator = 
-00006020: 656e 762e 6675 6c6c 5f6e 6f64 652e 6170  env.full_node.ap
-00006030: 690a 2020 2020 636c 6965 6e74 3a20 5761  i.    client: Wa
-00006040: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
-00006050: 656e 762e 7761 6c6c 6574 5f31 2e72 7063  env.wallet_1.rpc
-00006060: 5f63 6c69 656e 740a 0a20 2020 2061 7761  _client..    awa
-00006070: 6974 2067 656e 6572 6174 655f 6675 6e64  it generate_fund
-00006080: 7328 6675 6c6c 5f6e 6f64 655f 6170 692c  s(full_node_api,
-00006090: 2065 6e76 2e77 616c 6c65 745f 312c 2035   env.wallet_1, 5
-000060a0: 290a 0a20 2020 2061 6c6c 5f74 7261 6e73  )..    all_trans
-000060b0: 6163 7469 6f6e 7320 3d20 6177 6169 7420  actions = await 
-000060c0: 636c 6965 6e74 2e67 6574 5f74 7261 6e73  client.get_trans
-000060d0: 6163 7469 6f6e 7328 3129 0a20 2020 2061  actions(1).    a
-000060e0: 7373 6572 7420 6c65 6e28 616c 6c5f 7472  ssert len(all_tr
-000060f0: 616e 7361 6374 696f 6e73 2920 3e3d 2031  ansactions) >= 1
-00006100: 300a 2020 2020 2320 5465 7374 2074 7261  0.    # Test tra
-00006110: 6e73 6163 7469 6f6e 2070 6167 696e 6174  nsaction paginat
-00006120: 696f 6e0a 2020 2020 736f 6d65 5f74 7261  ion.    some_tra
-00006130: 6e73 6163 7469 6f6e 7320 3d20 6177 6169  nsactions = awai
-00006140: 7420 636c 6965 6e74 2e67 6574 5f74 7261  t client.get_tra
-00006150: 6e73 6163 7469 6f6e 7328 312c 2030 2c20  nsactions(1, 0, 
-00006160: 3529 0a20 2020 2073 6f6d 655f 7472 616e  5).    some_tran
-00006170: 7361 6374 696f 6e73 5f32 203d 2061 7761  sactions_2 = awa
-00006180: 6974 2063 6c69 656e 742e 6765 745f 7472  it client.get_tr
-00006190: 616e 7361 6374 696f 6e73 2831 2c20 352c  ansactions(1, 5,
-000061a0: 2031 3029 0a20 2020 2061 7373 6572 7420   10).    assert 
-000061b0: 736f 6d65 5f74 7261 6e73 6163 7469 6f6e  some_transaction
-000061c0: 7320 3d3d 2061 6c6c 5f74 7261 6e73 6163  s == all_transac
-000061d0: 7469 6f6e 735b 303a 355d 0a20 2020 2061  tions[0:5].    a
-000061e0: 7373 6572 7420 736f 6d65 5f74 7261 6e73  ssert some_trans
-000061f0: 6163 7469 6f6e 735f 3220 3d3d 2061 6c6c  actions_2 == all
-00006200: 5f74 7261 6e73 6163 7469 6f6e 735b 353a  _transactions[5:
-00006210: 3130 5d0a 0a20 2020 2023 2054 6573 7469  10]..    # Testi
-00006220: 6e67 2073 6f72 7473 0a20 2020 2023 2054  ng sorts.    # T
-00006230: 6573 7420 7468 6520 6465 6661 756c 7420  est the default 
-00006240: 736f 7274 2028 434f 4e46 4952 4d45 445f  sort (CONFIRMED_
-00006250: 4154 5f48 4549 4748 5429 0a20 2020 2061  AT_HEIGHT).    a
-00006260: 7373 6572 7420 616c 6c5f 7472 616e 7361  ssert all_transa
-00006270: 6374 696f 6e73 203d 3d20 736f 7274 6564  ctions == sorted
-00006280: 2861 6c6c 5f74 7261 6e73 6163 7469 6f6e  (all_transaction
-00006290: 732c 206b 6579 3d61 7474 7267 6574 7465  s, key=attrgette
-000062a0: 7228 2263 6f6e 6669 726d 6564 5f61 745f  r("confirmed_at_
-000062b0: 6865 6967 6874 2229 290a 2020 2020 616c  height")).    al
-000062c0: 6c5f 7472 616e 7361 6374 696f 6e73 203d  l_transactions =
-000062d0: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
-000062e0: 745f 7472 616e 7361 6374 696f 6e73 2831  t_transactions(1
-000062f0: 2c20 7265 7665 7273 653d 5472 7565 290a  , reverse=True).
-00006300: 2020 2020 6173 7365 7274 2061 6c6c 5f74      assert all_t
-00006310: 7261 6e73 6163 7469 6f6e 7320 3d3d 2073  ransactions == s
-00006320: 6f72 7465 6428 616c 6c5f 7472 616e 7361  orted(all_transa
-00006330: 6374 696f 6e73 2c20 6b65 793d 6174 7472  ctions, key=attr
-00006340: 6765 7474 6572 2822 636f 6e66 6972 6d65  getter("confirme
-00006350: 645f 6174 5f68 6569 6768 7422 292c 2072  d_at_height"), r
-00006360: 6576 6572 7365 3d54 7275 6529 0a0a 2020  everse=True)..  
-00006370: 2020 2320 5465 7374 2052 454c 4556 414e    # Test RELEVAN
-00006380: 4345 0a20 2020 2061 7761 6974 2063 6c69  CE.    await cli
-00006390: 656e 742e 7365 6e64 5f74 7261 6e73 6163  ent.send_transac
-000063a0: 7469 6f6e 280a 2020 2020 2020 2020 312c  tion(.        1,
-000063b0: 2075 696e 7436 3428 3129 2c20 656e 636f   uint64(1), enco
-000063c0: 6465 5f70 757a 7a6c 655f 6861 7368 2861  de_puzzle_hash(a
-000063d0: 7761 6974 2077 616c 6c65 742e 6765 745f  wait wallet.get_
-000063e0: 6e65 775f 7075 7a7a 6c65 6861 7368 2829  new_puzzlehash()
-000063f0: 2c20 2274 7863 6822 290a 2020 2020 2920  , "txch").    ) 
-00006400: 2023 2043 7265 6174 6520 6120 7065 6e64   # Create a pend
-00006410: 696e 6720 7478 0a0a 2020 2020 616c 6c5f  ing tx..    all_
-00006420: 7472 616e 7361 6374 696f 6e73 203d 2061  transactions = a
-00006430: 7761 6974 2063 6c69 656e 742e 6765 745f  wait client.get_
-00006440: 7472 616e 7361 6374 696f 6e73 2831 2c20  transactions(1, 
-00006450: 736f 7274 5f6b 6579 3d53 6f72 744b 6579  sort_key=SortKey
-00006460: 2e52 454c 4556 414e 4345 290a 2020 2020  .RELEVANCE).    
-00006470: 736f 7274 6564 5f74 7261 6e73 6163 7469  sorted_transacti
-00006480: 6f6e 7320 3d20 736f 7274 6564 2861 6c6c  ons = sorted(all
-00006490: 5f74 7261 6e73 6163 7469 6f6e 732c 206b  _transactions, k
-000064a0: 6579 3d61 7474 7267 6574 7465 7228 2263  ey=attrgetter("c
-000064b0: 7265 6174 6564 5f61 745f 7469 6d65 2229  reated_at_time")
-000064c0: 2c20 7265 7665 7273 653d 5472 7565 290a  , reverse=True).
-000064d0: 2020 2020 736f 7274 6564 5f74 7261 6e73      sorted_trans
-000064e0: 6163 7469 6f6e 7320 3d20 736f 7274 6564  actions = sorted
-000064f0: 2873 6f72 7465 645f 7472 616e 7361 6374  (sorted_transact
-00006500: 696f 6e73 2c20 6b65 793d 6174 7472 6765  ions, key=attrge
-00006510: 7474 6572 2822 636f 6e66 6972 6d65 645f  tter("confirmed_
-00006520: 6174 5f68 6569 6768 7422 292c 2072 6576  at_height"), rev
-00006530: 6572 7365 3d54 7275 6529 0a20 2020 2073  erse=True).    s
-00006540: 6f72 7465 645f 7472 616e 7361 6374 696f  orted_transactio
-00006550: 6e73 203d 2073 6f72 7465 6428 736f 7274  ns = sorted(sort
-00006560: 6564 5f74 7261 6e73 6163 7469 6f6e 732c  ed_transactions,
-00006570: 206b 6579 3d61 7474 7267 6574 7465 7228   key=attrgetter(
-00006580: 2263 6f6e 6669 726d 6564 2229 290a 2020  "confirmed")).  
-00006590: 2020 6173 7365 7274 2061 6c6c 5f74 7261    assert all_tra
-000065a0: 6e73 6163 7469 6f6e 7320 3d3d 2073 6f72  nsactions == sor
-000065b0: 7465 645f 7472 616e 7361 6374 696f 6e73  ted_transactions
-000065c0: 0a0a 2020 2020 616c 6c5f 7472 616e 7361  ..    all_transa
-000065d0: 6374 696f 6e73 203d 2061 7761 6974 2063  ctions = await c
-000065e0: 6c69 656e 742e 6765 745f 7472 616e 7361  lient.get_transa
-000065f0: 6374 696f 6e73 2831 2c20 736f 7274 5f6b  ctions(1, sort_k
-00006600: 6579 3d53 6f72 744b 6579 2e52 454c 4556  ey=SortKey.RELEV
-00006610: 414e 4345 2c20 7265 7665 7273 653d 5472  ANCE, reverse=Tr
-00006620: 7565 290a 2020 2020 736f 7274 6564 5f74  ue).    sorted_t
-00006630: 7261 6e73 6163 7469 6f6e 7320 3d20 736f  ransactions = so
-00006640: 7274 6564 2861 6c6c 5f74 7261 6e73 6163  rted(all_transac
-00006650: 7469 6f6e 732c 206b 6579 3d61 7474 7267  tions, key=attrg
-00006660: 6574 7465 7228 2263 7265 6174 6564 5f61  etter("created_a
-00006670: 745f 7469 6d65 2229 290a 2020 2020 736f  t_time")).    so
-00006680: 7274 6564 5f74 7261 6e73 6163 7469 6f6e  rted_transaction
-00006690: 7320 3d20 736f 7274 6564 2873 6f72 7465  s = sorted(sorte
-000066a0: 645f 7472 616e 7361 6374 696f 6e73 2c20  d_transactions, 
-000066b0: 6b65 793d 6174 7472 6765 7474 6572 2822  key=attrgetter("
-000066c0: 636f 6e66 6972 6d65 645f 6174 5f68 6569  confirmed_at_hei
-000066d0: 6768 7422 2929 0a20 2020 2073 6f72 7465  ght")).    sorte
-000066e0: 645f 7472 616e 7361 6374 696f 6e73 203d  d_transactions =
-000066f0: 2073 6f72 7465 6428 736f 7274 6564 5f74   sorted(sorted_t
-00006700: 7261 6e73 6163 7469 6f6e 732c 206b 6579  ransactions, key
-00006710: 3d61 7474 7267 6574 7465 7228 2263 6f6e  =attrgetter("con
-00006720: 6669 726d 6564 2229 2c20 7265 7665 7273  firmed"), revers
-00006730: 653d 5472 7565 290a 2020 2020 6173 7365  e=True).    asse
-00006740: 7274 2061 6c6c 5f74 7261 6e73 6163 7469  rt all_transacti
-00006750: 6f6e 7320 3d3d 2073 6f72 7465 645f 7472  ons == sorted_tr
-00006760: 616e 7361 6374 696f 6e73 0a0a 2020 2020  ansactions..    
-00006770: 2320 5465 7374 2067 6574 5f74 7261 6e73  # Test get_trans
-00006780: 6163 7469 6f6e 7320 746f 2061 6464 7265  actions to addre
-00006790: 7373 0a20 2020 2070 685f 6279 5f61 6464  ss.    ph_by_add
-000067a0: 7220 3d20 6177 6169 7420 7761 6c6c 6574  r = await wallet
-000067b0: 2e67 6574 5f6e 6577 5f70 757a 7a6c 6568  .get_new_puzzleh
-000067c0: 6173 6828 290a 2020 2020 6177 6169 7420  ash().    await 
-000067d0: 636c 6965 6e74 2e73 656e 645f 7472 616e  client.send_tran
-000067e0: 7361 6374 696f 6e28 312c 2075 696e 7436  saction(1, uint6
-000067f0: 3428 3129 2c20 656e 636f 6465 5f70 757a  4(1), encode_puz
-00006800: 7a6c 655f 6861 7368 2870 685f 6279 5f61  zle_hash(ph_by_a
-00006810: 6464 722c 2022 7478 6368 2229 290a 2020  ddr, "txch")).  
-00006820: 2020 6177 6169 7420 636c 6965 6e74 2e66    await client.f
-00006830: 6172 6d5f 626c 6f63 6b28 656e 636f 6465  arm_block(encode
-00006840: 5f70 757a 7a6c 655f 6861 7368 2870 685f  _puzzle_hash(ph_
-00006850: 6279 5f61 6464 722c 2022 7478 6368 2229  by_addr, "txch")
-00006860: 290a 2020 2020 6177 6169 7420 6675 6c6c  ).    await full
-00006870: 5f6e 6f64 655f 6170 692e 7761 6974 5f66  _node_api.wait_f
-00006880: 6f72 5f77 616c 6c65 745f 7379 6e63 6564  or_wallet_synced
-00006890: 2877 616c 6c65 745f 6e6f 6465 3d77 616c  (wallet_node=wal
-000068a0: 6c65 745f 6e6f 6465 2c20 7469 6d65 6f75  let_node, timeou
-000068b0: 743d 3230 290a 0a20 2020 2074 785f 666f  t=20)..    tx_fo
-000068c0: 725f 6164 6472 6573 7320 3d20 6177 6169  r_address = awai
-000068d0: 7420 636c 6965 6e74 2e67 6574 5f74 7261  t client.get_tra
-000068e0: 6e73 6163 7469 6f6e 7328 312c 2074 6f5f  nsactions(1, to_
-000068f0: 6164 6472 6573 733d 656e 636f 6465 5f70  address=encode_p
-00006900: 757a 7a6c 655f 6861 7368 2870 685f 6279  uzzle_hash(ph_by
-00006910: 5f61 6464 722c 2022 7478 6368 2229 290a  _addr, "txch")).
-00006920: 2020 2020 6173 7365 7274 206c 656e 2874      assert len(t
-00006930: 785f 666f 725f 6164 6472 6573 7329 203d  x_for_address) =
-00006940: 3d20 310a 2020 2020 6173 7365 7274 2074  = 1.    assert t
-00006950: 785f 666f 725f 6164 6472 6573 735b 305d  x_for_address[0]
-00006960: 2e74 6f5f 7075 7a7a 6c65 5f68 6173 6820  .to_puzzle_hash 
-00006970: 3d3d 2070 685f 6279 5f61 6464 720a 0a0a  == ph_by_addr...
-00006980: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-00006990: 6e63 696f 0a61 7379 6e63 2064 6566 2074  ncio.async def t
-000069a0: 6573 745f 6765 745f 7472 616e 7361 6374  est_get_transact
-000069b0: 696f 6e5f 636f 756e 7428 7761 6c6c 6574  ion_count(wallet
-000069c0: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
-000069d0: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
-000069e0: 6e76 6972 6f6e 6d65 6e74 293a 0a20 2020  nvironment):.   
-000069f0: 2065 6e76 3a20 5761 6c6c 6574 5270 6354   env: WalletRpcT
-00006a00: 6573 7445 6e76 6972 6f6e 6d65 6e74 203d  estEnvironment =
-00006a10: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
-00006a20: 726f 6e6d 656e 740a 0a20 2020 2066 756c  ronment..    ful
-00006a30: 6c5f 6e6f 6465 5f61 7069 3a20 4675 6c6c  l_node_api: Full
-00006a40: 4e6f 6465 5369 6d75 6c61 746f 7220 3d20  NodeSimulator = 
-00006a50: 656e 762e 6675 6c6c 5f6e 6f64 652e 6170  env.full_node.ap
-00006a60: 690a 2020 2020 636c 6965 6e74 3a20 5761  i.    client: Wa
-00006a70: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
-00006a80: 656e 762e 7761 6c6c 6574 5f31 2e72 7063  env.wallet_1.rpc
-00006a90: 5f63 6c69 656e 740a 0a20 2020 2061 7761  _client..    awa
-00006aa0: 6974 2067 656e 6572 6174 655f 6675 6e64  it generate_fund
-00006ab0: 7328 6675 6c6c 5f6e 6f64 655f 6170 692c  s(full_node_api,
-00006ac0: 2065 6e76 2e77 616c 6c65 745f 3129 0a0a   env.wallet_1)..
-00006ad0: 2020 2020 616c 6c5f 7472 616e 7361 6374      all_transact
-00006ae0: 696f 6e73 203d 2061 7761 6974 2063 6c69  ions = await cli
-00006af0: 656e 742e 6765 745f 7472 616e 7361 6374  ent.get_transact
-00006b00: 696f 6e73 2831 290a 2020 2020 6173 7365  ions(1).    asse
-00006b10: 7274 206c 656e 2861 6c6c 5f74 7261 6e73  rt len(all_trans
-00006b20: 6163 7469 6f6e 7329 203e 2030 0a20 2020  actions) > 0.   
-00006b30: 2074 7261 6e73 6163 7469 6f6e 5f63 6f75   transaction_cou
-00006b40: 6e74 203d 2061 7761 6974 2063 6c69 656e  nt = await clien
-00006b50: 742e 6765 745f 7472 616e 7361 6374 696f  t.get_transactio
-00006b60: 6e5f 636f 756e 7428 3129 0a20 2020 2061  n_count(1).    a
-00006b70: 7373 6572 7420 7472 616e 7361 6374 696f  ssert transactio
-00006b80: 6e5f 636f 756e 7420 3d3d 206c 656e 2861  n_count == len(a
-00006b90: 6c6c 5f74 7261 6e73 6163 7469 6f6e 7329  ll_transactions)
-00006ba0: 0a0a 0a40 7079 7465 7374 2e6d 6172 6b2e  ...@pytest.mark.
-00006bb0: 6173 796e 6369 6f0a 6173 796e 6320 6465  asyncio.async de
-00006bc0: 6620 7465 7374 5f63 6174 5f65 6e64 706f  f test_cat_endpo
-00006bd0: 696e 7473 2877 616c 6c65 745f 7270 635f  ints(wallet_rpc_
-00006be0: 656e 7669 726f 6e6d 656e 743a 2057 616c  environment: Wal
-00006bf0: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
-00006c00: 6e6d 656e 7429 3a0a 2020 2020 656e 763a  nment):.    env:
-00006c10: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
-00006c20: 7669 726f 6e6d 656e 7420 3d20 7761 6c6c  vironment = wall
-00006c30: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
-00006c40: 6e74 0a0a 2020 2020 7761 6c6c 6574 5f6e  nt..    wallet_n
-00006c50: 6f64 653a 2057 616c 6c65 744e 6f64 6520  ode: WalletNode 
-00006c60: 3d20 656e 762e 7761 6c6c 6574 5f31 2e6e  = env.wallet_1.n
-00006c70: 6f64 650a 0a20 2020 2063 6c69 656e 743a  ode..    client:
-00006c80: 2057 616c 6c65 7452 7063 436c 6965 6e74   WalletRpcClient
-00006c90: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
-00006ca0: 7270 635f 636c 6965 6e74 0a20 2020 2063  rpc_client.    c
-00006cb0: 6c69 656e 745f 323a 2057 616c 6c65 7452  lient_2: WalletR
-00006cc0: 7063 436c 6965 6e74 203d 2065 6e76 2e77  pcClient = env.w
-00006cd0: 616c 6c65 745f 322e 7270 635f 636c 6965  allet_2.rpc_clie
-00006ce0: 6e74 0a0a 2020 2020 6675 6c6c 5f6e 6f64  nt..    full_nod
-00006cf0: 655f 6170 693a 2046 756c 6c4e 6f64 6553  e_api: FullNodeS
-00006d00: 696d 756c 6174 6f72 203d 2065 6e76 2e66  imulator = env.f
-00006d10: 756c 6c5f 6e6f 6465 2e61 7069 0a0a 2020  ull_node.api..  
-00006d20: 2020 6177 6169 7420 6765 6e65 7261 7465    await generate
-00006d30: 5f66 756e 6473 2866 756c 6c5f 6e6f 6465  _funds(full_node
-00006d40: 5f61 7069 2c20 656e 762e 7761 6c6c 6574  _api, env.wallet
-00006d50: 5f31 2c20 3129 0a20 2020 2061 7761 6974  _1, 1).    await
-00006d60: 2067 656e 6572 6174 655f 6675 6e64 7328   generate_funds(
-00006d70: 6675 6c6c 5f6e 6f64 655f 6170 692c 2065  full_node_api, e
-00006d80: 6e76 2e77 616c 6c65 745f 322c 2031 290a  nv.wallet_2, 1).
-00006d90: 0a20 2020 2023 2043 7265 6174 6573 2061  .    # Creates a
-00006da0: 2043 4154 2077 616c 6c65 7420 7769 7468   CAT wallet with
-00006db0: 2031 3030 206d 6f6a 6f73 2061 6e64 2061   100 mojos and a
-00006dc0: 2043 4154 2077 6974 6820 3230 206d 6f6a   CAT with 20 moj
-00006dd0: 6f73 0a20 2020 2061 7761 6974 2063 6c69  os.    await cli
-00006de0: 656e 742e 6372 6561 7465 5f6e 6577 5f63  ent.create_new_c
-00006df0: 6174 5f61 6e64 5f77 616c 6c65 7428 7569  at_and_wallet(ui
-00006e00: 6e74 3634 2831 3030 2929 0a20 2020 2061  nt64(100)).    a
-00006e10: 7761 6974 2074 696d 655f 6f75 745f 6173  wait time_out_as
-00006e20: 7365 7274 2832 302c 2063 6c69 656e 742e  sert(20, client.
-00006e30: 6765 745f 7379 6e63 6564 290a 0a20 2020  get_synced)..   
-00006e40: 2072 6573 203d 2061 7761 6974 2063 6c69   res = await cli
-00006e50: 656e 742e 6372 6561 7465 5f6e 6577 5f63  ent.create_new_c
-00006e60: 6174 5f61 6e64 5f77 616c 6c65 7428 7569  at_and_wallet(ui
-00006e70: 6e74 3634 2832 3029 290a 2020 2020 6173  nt64(20)).    as
-00006e80: 7365 7274 2072 6573 5b22 7375 6363 6573  sert res["succes
-00006e90: 7322 5d0a 2020 2020 6361 745f 305f 6964  s"].    cat_0_id
-00006ea0: 203d 2072 6573 5b22 7761 6c6c 6574 5f69   = res["wallet_i
-00006eb0: 6422 5d0a 2020 2020 6173 7365 745f 6964  d"].    asset_id
-00006ec0: 203d 2062 7974 6573 3332 2e66 726f 6d68   = bytes32.fromh
-00006ed0: 6578 2872 6573 5b22 6173 7365 745f 6964  ex(res["asset_id
-00006ee0: 225d 290a 2020 2020 6173 7365 7274 206c  "]).    assert l
-00006ef0: 656e 2861 7373 6574 5f69 6429 203e 2030  en(asset_id) > 0
-00006f00: 0a0a 2020 2020 6177 6169 7420 6173 7365  ..    await asse
-00006f10: 7274 5f77 616c 6c65 745f 7479 7065 7328  rt_wallet_types(
-00006f20: 636c 6965 6e74 2c20 7b57 616c 6c65 7454  client, {WalletT
-00006f30: 7970 652e 5354 414e 4441 5244 5f57 414c  ype.STANDARD_WAL
-00006f40: 4c45 543a 2031 2c20 5761 6c6c 6574 5479  LET: 1, WalletTy
-00006f50: 7065 2e43 4154 3a20 327d 290a 2020 2020  pe.CAT: 2}).    
-00006f60: 6177 6169 7420 6173 7365 7274 5f77 616c  await assert_wal
-00006f70: 6c65 745f 7479 7065 7328 636c 6965 6e74  let_types(client
-00006f80: 5f32 2c20 7b57 616c 6c65 7454 7970 652e  _2, {WalletType.
-00006f90: 5354 414e 4441 5244 5f57 414c 4c45 543a  STANDARD_WALLET:
-00006fa0: 2031 7d29 0a0a 2020 2020 6261 6c5f 3020   1})..    bal_0 
-00006fb0: 3d20 6177 6169 7420 636c 6965 6e74 2e67  = await client.g
-00006fc0: 6574 5f77 616c 6c65 745f 6261 6c61 6e63  et_wallet_balanc
-00006fd0: 6528 6361 745f 305f 6964 290a 2020 2020  e(cat_0_id).    
-00006fe0: 6173 7365 7274 2062 616c 5f30 5b22 636f  assert bal_0["co
-00006ff0: 6e66 6972 6d65 645f 7761 6c6c 6574 5f62  nfirmed_wallet_b
-00007000: 616c 616e 6365 225d 203d 3d20 300a 2020  alance"] == 0.  
-00007010: 2020 6173 7365 7274 2062 616c 5f30 5b22    assert bal_0["
-00007020: 7065 6e64 696e 675f 636f 696e 5f72 656d  pending_coin_rem
-00007030: 6f76 616c 5f63 6f75 6e74 225d 203d 3d20  oval_count"] == 
-00007040: 310a 2020 2020 636f 6c20 3d20 6177 6169  1.    col = awai
-00007050: 7420 636c 6965 6e74 2e67 6574 5f63 6174  t client.get_cat
-00007060: 5f61 7373 6574 5f69 6428 6361 745f 305f  _asset_id(cat_0_
-00007070: 6964 290a 2020 2020 6173 7365 7274 2063  id).    assert c
-00007080: 6f6c 203d 3d20 6173 7365 745f 6964 0a20  ol == asset_id. 
-00007090: 2020 2061 7373 6572 7420 2861 7761 6974     assert (await
-000070a0: 2063 6c69 656e 742e 6765 745f 6361 745f   client.get_cat_
-000070b0: 6e61 6d65 2863 6174 5f30 5f69 6429 2920  name(cat_0_id)) 
-000070c0: 3d3d 2043 4154 5761 6c6c 6574 2e64 6566  == CATWallet.def
-000070d0: 6175 6c74 5f77 616c 6c65 745f 6e61 6d65  ault_wallet_name
-000070e0: 5f66 6f72 5f75 6e6b 6e6f 776e 5f63 6174  _for_unknown_cat
-000070f0: 2861 7373 6574 5f69 642e 6865 7828 2929  (asset_id.hex())
-00007100: 0a20 2020 2061 7761 6974 2063 6c69 656e  .    await clien
-00007110: 742e 7365 745f 6361 745f 6e61 6d65 2863  t.set_cat_name(c
-00007120: 6174 5f30 5f69 642c 2022 4d79 2063 6174  at_0_id, "My cat
-00007130: 2229 0a20 2020 2061 7373 6572 7420 2861  ").    assert (a
-00007140: 7761 6974 2063 6c69 656e 742e 6765 745f  wait client.get_
-00007150: 6361 745f 6e61 6d65 2863 6174 5f30 5f69  cat_name(cat_0_i
-00007160: 6429 2920 3d3d 2022 4d79 2063 6174 220a  d)) == "My cat".
-00007170: 2020 2020 7265 7375 6c74 203d 2061 7761      result = awa
-00007180: 6974 2063 6c69 656e 742e 6361 745f 6173  it client.cat_as
-00007190: 7365 745f 6964 5f74 6f5f 6e61 6d65 2863  set_id_to_name(c
-000071a0: 6f6c 290a 2020 2020 6173 7365 7274 2072  ol).    assert r
-000071b0: 6573 756c 7420 6973 206e 6f74 204e 6f6e  esult is not Non
-000071c0: 650a 2020 2020 7769 642c 206e 616d 6520  e.    wid, name 
-000071d0: 3d20 7265 7375 6c74 0a20 2020 2061 7373  = result.    ass
-000071e0: 6572 7420 7769 6420 3d3d 2063 6174 5f30  ert wid == cat_0
-000071f0: 5f69 640a 2020 2020 6173 7365 7274 206e  _id.    assert n
-00007200: 616d 6520 3d3d 2022 4d79 2063 6174 220a  ame == "My cat".
-00007210: 2020 2020 7265 7375 6c74 203d 2061 7761      result = awa
-00007220: 6974 2063 6c69 656e 742e 6361 745f 6173  it client.cat_as
-00007230: 7365 745f 6964 5f74 6f5f 6e61 6d65 2862  set_id_to_name(b
-00007240: 7974 6573 3332 285b 305d 202a 2033 3229  ytes32([0] * 32)
-00007250: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
-00007260: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
-00007270: 7665 7269 6669 6564 5f61 7373 6574 5f69  verified_asset_i
-00007280: 6420 3d20 6e65 7874 2869 7465 7228 4445  d = next(iter(DE
-00007290: 4641 554c 545f 4341 5453 2e69 7465 6d73  FAULT_CATS.items
-000072a0: 2829 2929 5b31 5d5b 2261 7373 6574 5f69  ()))[1]["asset_i
-000072b0: 6422 5d0a 2020 2020 7265 7375 6c74 203d  d"].    result =
-000072c0: 2061 7761 6974 2063 6c69 656e 742e 6361   await client.ca
-000072d0: 745f 6173 7365 745f 6964 5f74 6f5f 6e61  t_asset_id_to_na
-000072e0: 6d65 2862 7974 6573 3332 2e66 726f 6d5f  me(bytes32.from_
-000072f0: 6865 7873 7472 2876 6572 6966 6965 645f  hexstr(verified_
-00007300: 6173 7365 745f 6964 2929 0a20 2020 2061  asset_id)).    a
-00007310: 7373 6572 7420 7265 7375 6c74 2069 7320  ssert result is 
-00007320: 6e6f 7420 4e6f 6e65 0a20 2020 2073 686f  not None.    sho
-00007330: 756c 645f 6265 5f6e 6f6e 652c 206e 616d  uld_be_none, nam
-00007340: 6520 3d20 7265 7375 6c74 0a20 2020 2061  e = result.    a
-00007350: 7373 6572 7420 7368 6f75 6c64 5f62 655f  ssert should_be_
-00007360: 6e6f 6e65 2069 7320 4e6f 6e65 0a20 2020  none is None.   
-00007370: 2061 7373 6572 7420 6e61 6d65 203d 3d20   assert name == 
-00007380: 6e65 7874 2869 7465 7228 4445 4641 554c  next(iter(DEFAUL
-00007390: 545f 4341 5453 2e69 7465 6d73 2829 2929  T_CATS.items()))
-000073a0: 5b31 5d5b 226e 616d 6522 5d0a 0a20 2020  [1]["name"]..   
-000073b0: 2023 206d 616b 6520 7375 7265 2073 7065   # make sure spe
-000073c0: 6e64 2069 7320 696e 206d 656d 706f 6f6c  nd is in mempool
-000073d0: 2062 6566 6f72 6520 6661 726d 696e 6720   before farming 
-000073e0: 7478 2062 6c6f 636b 0a20 2020 2061 7761  tx block.    awa
-000073f0: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
-00007400: 7274 2835 2c20 6368 6563 6b5f 6d65 6d70  rt(5, check_memp
-00007410: 6f6f 6c5f 7370 656e 645f 636f 756e 742c  ool_spend_count,
-00007420: 2054 7275 652c 2066 756c 6c5f 6e6f 6465   True, full_node
-00007430: 5f61 7069 2c20 3229 0a20 2020 2066 6f72  _api, 2).    for
-00007440: 2069 2069 6e20 7261 6e67 6528 3529 3a0a   i in range(5):.
-00007450: 2020 2020 2020 2020 6966 2063 6865 636b          if check
-00007460: 5f6d 656d 706f 6f6c 5f73 7065 6e64 5f63  _mempool_spend_c
-00007470: 6f75 6e74 2866 756c 6c5f 6e6f 6465 5f61  ount(full_node_a
-00007480: 7069 2c20 3029 3a0a 2020 2020 2020 2020  pi, 0):.        
-00007490: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
-000074a0: 2020 6177 6169 7420 6661 726d 5f74 7261    await farm_tra
-000074b0: 6e73 6163 7469 6f6e 5f62 6c6f 636b 2866  nsaction_block(f
-000074c0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
-000074d0: 6c6c 6574 5f6e 6f64 6529 0a0a 2020 2020  llet_node)..    
-000074e0: 2320 6368 6563 6b20 7468 6174 2077 6520  # check that we 
-000074f0: 6661 726d 6564 2074 6865 2074 7261 6e73  farmed the trans
-00007500: 6163 7469 6f6e 0a20 2020 2061 7373 6572  action.    asser
-00007510: 7420 6368 6563 6b5f 6d65 6d70 6f6f 6c5f  t check_mempool_
-00007520: 7370 656e 645f 636f 756e 7428 6675 6c6c  spend_count(full
-00007530: 5f6e 6f64 655f 6170 692c 2030 290a 2020  _node_api, 0).  
-00007540: 2020 6177 6169 7420 6675 6c6c 5f6e 6f64    await full_nod
-00007550: 655f 6170 692e 7761 6974 5f66 6f72 5f77  e_api.wait_for_w
-00007560: 616c 6c65 745f 7379 6e63 6564 2877 616c  allet_synced(wal
-00007570: 6c65 745f 6e6f 6465 3d77 616c 6c65 745f  let_node=wallet_
-00007580: 6e6f 6465 2c20 7469 6d65 6f75 743d 3529  node, timeout=5)
-00007590: 0a0a 2020 2020 6177 6169 7420 7469 6d65  ..    await time
-000075a0: 5f6f 7574 5f61 7373 6572 7428 352c 2067  _out_assert(5, g
-000075b0: 6574 5f63 6f6e 6669 726d 6564 5f62 616c  et_confirmed_bal
-000075c0: 616e 6365 2c20 3230 2c20 636c 6965 6e74  ance, 20, client
-000075d0: 2c20 6361 745f 305f 6964 290a 2020 2020  , cat_0_id).    
-000075e0: 6261 6c5f 3020 3d20 6177 6169 7420 636c  bal_0 = await cl
-000075f0: 6965 6e74 2e67 6574 5f77 616c 6c65 745f  ient.get_wallet_
-00007600: 6261 6c61 6e63 6528 6361 745f 305f 6964  balance(cat_0_id
-00007610: 290a 2020 2020 6173 7365 7274 2062 616c  ).    assert bal
-00007620: 5f30 5b22 7065 6e64 696e 675f 636f 696e  _0["pending_coin
-00007630: 5f72 656d 6f76 616c 5f63 6f75 6e74 225d  _removal_count"]
-00007640: 203d 3d20 300a 2020 2020 6173 7365 7274   == 0.    assert
-00007650: 2062 616c 5f30 5b22 756e 7370 656e 745f   bal_0["unspent_
-00007660: 636f 696e 5f63 6f75 6e74 225d 203d 3d20  coin_count"] == 
-00007670: 310a 0a20 2020 2023 2043 7265 6174 6573  1..    # Creates
-00007680: 2061 2073 6563 6f6e 6420 7761 6c6c 6574   a second wallet
-00007690: 2077 6974 6820 7468 6520 7361 6d65 2043   with the same C
-000076a0: 4154 0a20 2020 2072 6573 203d 2061 7761  AT.    res = awa
-000076b0: 6974 2063 6c69 656e 745f 322e 6372 6561  it client_2.crea
-000076c0: 7465 5f77 616c 6c65 745f 666f 725f 6578  te_wallet_for_ex
-000076d0: 6973 7469 6e67 5f63 6174 2861 7373 6574  isting_cat(asset
-000076e0: 5f69 6429 0a20 2020 2061 7373 6572 7420  _id).    assert 
-000076f0: 7265 735b 2273 7563 6365 7373 225d 0a20  res["success"]. 
-00007700: 2020 2063 6174 5f31 5f69 6420 3d20 7265     cat_1_id = re
-00007710: 735b 2277 616c 6c65 745f 6964 225d 0a20  s["wallet_id"]. 
-00007720: 2020 2063 6174 5f31 5f61 7373 6574 5f69     cat_1_asset_i
-00007730: 6420 3d20 6279 7465 732e 6672 6f6d 6865  d = bytes.fromhe
-00007740: 7828 7265 735b 2261 7373 6574 5f69 6422  x(res["asset_id"
-00007750: 5d29 0a20 2020 2061 7373 6572 7420 6361  ]).    assert ca
-00007760: 745f 315f 6173 7365 745f 6964 203d 3d20  t_1_asset_id == 
-00007770: 6173 7365 745f 6964 0a0a 2020 2020 6177  asset_id..    aw
-00007780: 6169 7420 6173 7365 7274 5f77 616c 6c65  ait assert_walle
-00007790: 745f 7479 7065 7328 636c 6965 6e74 2c20  t_types(client, 
-000077a0: 7b57 616c 6c65 7454 7970 652e 5354 414e  {WalletType.STAN
-000077b0: 4441 5244 5f57 414c 4c45 543a 2031 2c20  DARD_WALLET: 1, 
-000077c0: 5761 6c6c 6574 5479 7065 2e43 4154 3a20  WalletType.CAT: 
-000077d0: 327d 290a 2020 2020 6177 6169 7420 6173  2}).    await as
-000077e0: 7365 7274 5f77 616c 6c65 745f 7479 7065  sert_wallet_type
-000077f0: 7328 636c 6965 6e74 5f32 2c20 7b57 616c  s(client_2, {Wal
-00007800: 6c65 7454 7970 652e 5354 414e 4441 5244  letType.STANDARD
-00007810: 5f57 414c 4c45 543a 2031 2c20 5761 6c6c  _WALLET: 1, Wall
-00007820: 6574 5479 7065 2e43 4154 3a20 317d 290a  etType.CAT: 1}).
-00007830: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
-00007840: 7472 616e 7361 6374 696f 6e5f 626c 6f63  transaction_bloc
-00007850: 6b28 6675 6c6c 5f6e 6f64 655f 6170 692c  k(full_node_api,
-00007860: 2077 616c 6c65 745f 6e6f 6465 290a 0a20   wallet_node).. 
-00007870: 2020 2062 616c 5f31 203d 2061 7761 6974     bal_1 = await
-00007880: 2063 6c69 656e 745f 322e 6765 745f 7761   client_2.get_wa
-00007890: 6c6c 6574 5f62 616c 616e 6365 2863 6174  llet_balance(cat
-000078a0: 5f31 5f69 6429 0a20 2020 2061 7373 6572  _1_id).    asser
-000078b0: 7420 6261 6c5f 315b 2263 6f6e 6669 726d  t bal_1["confirm
-000078c0: 6564 5f77 616c 6c65 745f 6261 6c61 6e63  ed_wallet_balanc
-000078d0: 6522 5d20 3d3d 2030 0a0a 2020 2020 6164  e"] == 0..    ad
-000078e0: 6472 5f30 203d 2061 7761 6974 2063 6c69  dr_0 = await cli
-000078f0: 656e 742e 6765 745f 6e65 7874 5f61 6464  ent.get_next_add
-00007900: 7265 7373 2863 6174 5f30 5f69 642c 2046  ress(cat_0_id, F
-00007910: 616c 7365 290a 2020 2020 6164 6472 5f31  alse).    addr_1
-00007920: 203d 2061 7761 6974 2063 6c69 656e 745f   = await client_
-00007930: 322e 6765 745f 6e65 7874 5f61 6464 7265  2.get_next_addre
-00007940: 7373 2863 6174 5f31 5f69 642c 2046 616c  ss(cat_1_id, Fal
-00007950: 7365 290a 0a20 2020 2061 7373 6572 7420  se)..    assert 
-00007960: 6164 6472 5f30 2021 3d20 6164 6472 5f31  addr_0 != addr_1
-00007970: 0a0a 2020 2020 2320 5465 7374 2043 4154  ..    # Test CAT
-00007980: 2073 7065 6e64 2077 6974 686f 7574 2061   spend without a
-00007990: 2066 6565 0a20 2020 2074 785f 7265 7320   fee.    tx_res 
-000079a0: 3d20 6177 6169 7420 636c 6965 6e74 2e63  = await client.c
-000079b0: 6174 5f73 7065 6e64 2863 6174 5f30 5f69  at_spend(cat_0_i
-000079c0: 642c 2075 696e 7436 3428 3429 2c20 6164  d, uint64(4), ad
-000079d0: 6472 5f31 2c20 7569 6e74 3634 2830 292c  dr_1, uint64(0),
-000079e0: 205b 2274 6865 2063 6174 206d 656d 6f22   ["the cat memo"
-000079f0: 5d29 0a20 2020 2061 7373 6572 7420 7478  ]).    assert tx
-00007a00: 5f72 6573 2e77 616c 6c65 745f 6964 203d  _res.wallet_id =
-00007a10: 3d20 6361 745f 305f 6964 0a20 2020 2073  = cat_0_id.    s
-00007a20: 7065 6e64 5f62 756e 646c 6520 3d20 7478  pend_bundle = tx
-00007a30: 5f72 6573 2e73 7065 6e64 5f62 756e 646c  _res.spend_bundl
-00007a40: 650a 2020 2020 6173 7365 7274 2073 7065  e.    assert spe
-00007a50: 6e64 5f62 756e 646c 6520 6973 206e 6f74  nd_bundle is not
-00007a60: 204e 6f6e 650a 2020 2020 6173 7365 7274   None.    assert
-00007a70: 2075 6e63 7572 7279 5f70 757a 7a6c 6528   uncurry_puzzle(
-00007a80: 7370 656e 645f 6275 6e64 6c65 2e63 6f69  spend_bundle.coi
-00007a90: 6e5f 7370 656e 6473 5b30 5d2e 7075 7a7a  n_spends[0].puzz
-00007aa0: 6c65 5f72 6576 6561 6c2e 746f 5f70 726f  le_reveal.to_pro
-00007ab0: 6772 616d 2829 292e 6d6f 6420 3d3d 2043  gram()).mod == C
-00007ac0: 4154 5f4d 4f44 0a20 2020 2061 7761 6974  AT_MOD.    await
-00007ad0: 2066 6172 6d5f 7472 616e 7361 6374 696f   farm_transactio
-00007ae0: 6e28 6675 6c6c 5f6e 6f64 655f 6170 692c  n(full_node_api,
-00007af0: 2077 616c 6c65 745f 6e6f 6465 2c20 7370   wallet_node, sp
-00007b00: 656e 645f 6275 6e64 6c65 290a 0a20 2020  end_bundle)..   
-00007b10: 2061 7761 6974 2066 6172 6d5f 7472 616e   await farm_tran
-00007b20: 7361 6374 696f 6e5f 626c 6f63 6b28 6675  saction_block(fu
-00007b30: 6c6c 5f6e 6f64 655f 6170 692c 2077 616c  ll_node_api, wal
-00007b40: 6c65 745f 6e6f 6465 290a 0a20 2020 2023  let_node)..    #
-00007b50: 2054 6573 7420 4341 5420 7370 656e 6420   Test CAT spend 
-00007b60: 7769 7468 2061 2066 6565 0a20 2020 2074  with a fee.    t
-00007b70: 785f 7265 7320 3d20 6177 6169 7420 636c  x_res = await cl
-00007b80: 6965 6e74 2e63 6174 5f73 7065 6e64 2863  ient.cat_spend(c
-00007b90: 6174 5f30 5f69 642c 2075 696e 7436 3428  at_0_id, uint64(
-00007ba0: 3129 2c20 6164 6472 5f31 2c20 7569 6e74  1), addr_1, uint
-00007bb0: 3634 2835 5f30 3030 5f30 3030 292c 205b  64(5_000_000), [
-00007bc0: 2274 6865 2063 6174 206d 656d 6f22 5d29  "the cat memo"])
-00007bd0: 0a20 2020 2061 7373 6572 7420 7478 5f72  .    assert tx_r
-00007be0: 6573 2e77 616c 6c65 745f 6964 203d 3d20  es.wallet_id == 
-00007bf0: 6361 745f 305f 6964 0a20 2020 2073 7065  cat_0_id.    spe
-00007c00: 6e64 5f62 756e 646c 6520 3d20 7478 5f72  nd_bundle = tx_r
-00007c10: 6573 2e73 7065 6e64 5f62 756e 646c 650a  es.spend_bundle.
-00007c20: 2020 2020 6173 7365 7274 2073 7065 6e64      assert spend
-00007c30: 5f62 756e 646c 6520 6973 206e 6f74 204e  _bundle is not N
-00007c40: 6f6e 650a 2020 2020 6173 7365 7274 2075  one.    assert u
-00007c50: 6e63 7572 7279 5f70 757a 7a6c 6528 7370  ncurry_puzzle(sp
-00007c60: 656e 645f 6275 6e64 6c65 2e63 6f69 6e5f  end_bundle.coin_
-00007c70: 7370 656e 6473 5b30 5d2e 7075 7a7a 6c65  spends[0].puzzle
-00007c80: 5f72 6576 6561 6c2e 746f 5f70 726f 6772  _reveal.to_progr
-00007c90: 616d 2829 292e 6d6f 6420 3d3d 2043 4154  am()).mod == CAT
-00007ca0: 5f4d 4f44 0a20 2020 2061 7761 6974 2066  _MOD.    await f
-00007cb0: 6172 6d5f 7472 616e 7361 6374 696f 6e28  arm_transaction(
-00007cc0: 6675 6c6c 5f6e 6f64 655f 6170 692c 2077  full_node_api, w
-00007cd0: 616c 6c65 745f 6e6f 6465 2c20 7370 656e  allet_node, spen
-00007ce0: 645f 6275 6e64 6c65 290a 0a20 2020 2023  d_bundle)..    #
-00007cf0: 2054 6573 7420 4341 5420 7370 656e 6420   Test CAT spend 
-00007d00: 7769 7468 2061 2066 6565 2061 6e64 2070  with a fee and p
-00007d10: 7265 2d73 7065 6369 6669 6564 2072 656d  re-specified rem
-00007d20: 6f76 616c 7320 2f20 636f 696e 730a 2020  ovals / coins.  
-00007d30: 2020 7265 6d6f 7661 6c73 203d 2061 7761    removals = awa
-00007d40: 6974 2063 6c69 656e 742e 7365 6c65 6374  it client.select
-00007d50: 5f63 6f69 6e73 2861 6d6f 756e 743d 7569  _coins(amount=ui
-00007d60: 6e74 3634 2832 292c 2077 616c 6c65 745f  nt64(2), wallet_
-00007d70: 6964 3d63 6174 5f30 5f69 6429 0a20 2020  id=cat_0_id).   
-00007d80: 2074 785f 7265 7320 3d20 6177 6169 7420   tx_res = await 
-00007d90: 636c 6965 6e74 2e63 6174 5f73 7065 6e64  client.cat_spend
-00007da0: 2863 6174 5f30 5f69 642c 2075 696e 7436  (cat_0_id, uint6
-00007db0: 3428 3129 2c20 6164 6472 5f31 2c20 7569  4(1), addr_1, ui
-00007dc0: 6e74 3634 2835 5f30 3030 5f30 3030 292c  nt64(5_000_000),
-00007dd0: 205b 2274 6865 2063 6174 206d 656d 6f22   ["the cat memo"
-00007de0: 5d2c 2072 656d 6f76 616c 733d 7265 6d6f  ], removals=remo
-00007df0: 7661 6c73 290a 2020 2020 6173 7365 7274  vals).    assert
-00007e00: 2074 785f 7265 732e 7761 6c6c 6574 5f69   tx_res.wallet_i
-00007e10: 6420 3d3d 2063 6174 5f30 5f69 640a 2020  d == cat_0_id.  
-00007e20: 2020 7370 656e 645f 6275 6e64 6c65 203d    spend_bundle =
-00007e30: 2074 785f 7265 732e 7370 656e 645f 6275   tx_res.spend_bu
-00007e40: 6e64 6c65 0a20 2020 2061 7373 6572 7420  ndle.    assert 
-00007e50: 7370 656e 645f 6275 6e64 6c65 2069 7320  spend_bundle is 
-00007e60: 6e6f 7420 4e6f 6e65 0a20 2020 2061 7373  not None.    ass
-00007e70: 6572 7420 7265 6d6f 7661 6c73 5b30 5d20  ert removals[0] 
-00007e80: 696e 2074 785f 7265 732e 7265 6d6f 7661  in tx_res.remova
-00007e90: 6c73 0a20 2020 2061 7373 6572 7420 756e  ls.    assert un
-00007ea0: 6375 7272 795f 7075 7a7a 6c65 2873 7065  curry_puzzle(spe
-00007eb0: 6e64 5f62 756e 646c 652e 636f 696e 5f73  nd_bundle.coin_s
-00007ec0: 7065 6e64 735b 305d 2e70 757a 7a6c 655f  pends[0].puzzle_
-00007ed0: 7265 7665 616c 2e74 6f5f 7072 6f67 7261  reveal.to_progra
-00007ee0: 6d28 2929 2e6d 6f64 203d 3d20 4341 545f  m()).mod == CAT_
-00007ef0: 4d4f 440a 2020 2020 6177 6169 7420 6661  MOD.    await fa
-00007f00: 726d 5f74 7261 6e73 6163 7469 6f6e 2866  rm_transaction(f
-00007f10: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
-00007f20: 6c6c 6574 5f6e 6f64 652c 2073 7065 6e64  llet_node, spend
-00007f30: 5f62 756e 646c 6529 0a0a 2020 2020 2320  _bundle)..    # 
-00007f40: 5465 7374 2075 6e61 636b 6e6f 776c 6564  Test unacknowled
-00007f50: 6765 6420 4341 540a 2020 2020 6177 6169  ged CAT.    awai
-00007f60: 7420 7761 6c6c 6574 5f6e 6f64 652e 7761  t wallet_node.wa
-00007f70: 6c6c 6574 5f73 7461 7465 5f6d 616e 6167  llet_state_manag
-00007f80: 6572 2e69 6e74 6572 6573 7465 645f 7374  er.interested_st
-00007f90: 6f72 652e 6164 645f 756e 6163 6b6e 6f77  ore.add_unacknow
-00007fa0: 6c65 6467 6564 5f74 6f6b 656e 280a 2020  ledged_token(.  
-00007fb0: 2020 2020 2020 6173 7365 745f 6964 2c20        asset_id, 
-00007fc0: 2255 6e6b 6e6f 776e 222c 2075 696e 7433  "Unknown", uint3
-00007fd0: 3228 3130 3030 3029 2c20 6279 7465 7333  2(10000), bytes3
-00007fe0: 3228 6222 5c30 3022 202a 2033 3229 0a20  2(b"\00" * 32). 
-00007ff0: 2020 2029 0a20 2020 2063 6174 7320 3d20     ).    cats = 
-00008000: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
-00008010: 5f73 7472 6179 5f63 6174 7328 290a 2020  _stray_cats().  
-00008020: 2020 6173 7365 7274 206c 656e 2863 6174    assert len(cat
-00008030: 7329 203d 3d20 310a 0a20 2020 2061 7761  s) == 1..    awa
-00008040: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
-00008050: 7274 2832 302c 2067 6574 5f63 6f6e 6669  rt(20, get_confi
-00008060: 726d 6564 5f62 616c 616e 6365 2c20 3134  rmed_balance, 14
-00008070: 2c20 636c 6965 6e74 2c20 6361 745f 305f  , client, cat_0_
-00008080: 6964 290a 2020 2020 6177 6169 7420 7469  id).    await ti
-00008090: 6d65 5f6f 7574 5f61 7373 6572 7428 3230  me_out_assert(20
-000080a0: 2c20 6765 745f 636f 6e66 6972 6d65 645f  , get_confirmed_
-000080b0: 6261 6c61 6e63 652c 2036 2c20 636c 6965  balance, 6, clie
-000080c0: 6e74 5f32 2c20 6361 745f 315f 6964 290a  nt_2, cat_1_id).
-000080d0: 0a20 2020 2023 2054 6573 7420 4341 5420  .    # Test CAT 
-000080e0: 636f 696e 2073 656c 6563 7469 6f6e 0a20  coin selection. 
-000080f0: 2020 2073 656c 6563 7465 645f 636f 696e     selected_coin
-00008100: 7320 3d20 6177 6169 7420 636c 6965 6e74  s = await client
-00008110: 2e73 656c 6563 745f 636f 696e 7328 616d  .select_coins(am
-00008120: 6f75 6e74 3d31 2c20 7761 6c6c 6574 5f69  ount=1, wallet_i
-00008130: 643d 6361 745f 305f 6964 290a 2020 2020  d=cat_0_id).    
-00008140: 6173 7365 7274 206c 656e 2873 656c 6563  assert len(selec
-00008150: 7465 645f 636f 696e 7329 203e 2030 0a0a  ted_coins) > 0..
-00008160: 0a40 7079 7465 7374 2e6d 6172 6b2e 6173  .@pytest.mark.as
-00008170: 796e 6369 6f0a 6173 796e 6320 6465 6620  yncio.async def 
-00008180: 7465 7374 5f6f 6666 6572 5f65 6e64 706f  test_offer_endpo
-00008190: 696e 7473 2877 616c 6c65 745f 7270 635f  ints(wallet_rpc_
-000081a0: 656e 7669 726f 6e6d 656e 743a 2057 616c  environment: Wal
-000081b0: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
-000081c0: 6e6d 656e 7429 3a0a 2020 2020 656e 763a  nment):.    env:
-000081d0: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
-000081e0: 7669 726f 6e6d 656e 7420 3d20 7761 6c6c  vironment = wall
-000081f0: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
-00008200: 6e74 0a0a 2020 2020 7761 6c6c 6574 5f6e  nt..    wallet_n
-00008210: 6f64 653a 2057 616c 6c65 744e 6f64 6520  ode: WalletNode 
-00008220: 3d20 656e 762e 7761 6c6c 6574 5f31 2e6e  = env.wallet_1.n
-00008230: 6f64 650a 2020 2020 7761 6c6c 6574 5f31  ode.    wallet_1
-00008240: 5f72 7063 3a20 5761 6c6c 6574 5270 6343  _rpc: WalletRpcC
-00008250: 6c69 656e 7420 3d20 656e 762e 7761 6c6c  lient = env.wall
-00008260: 6574 5f31 2e72 7063 5f63 6c69 656e 740a  et_1.rpc_client.
-00008270: 2020 2020 7761 6c6c 6574 5f32 5f72 7063      wallet_2_rpc
-00008280: 3a20 5761 6c6c 6574 5270 6343 6c69 656e  : WalletRpcClien
-00008290: 7420 3d20 656e 762e 7761 6c6c 6574 5f32  t = env.wallet_2
-000082a0: 2e72 7063 5f63 6c69 656e 740a 2020 2020  .rpc_client.    
-000082b0: 6675 6c6c 5f6e 6f64 655f 6170 693a 2046  full_node_api: F
-000082c0: 756c 6c4e 6f64 6553 696d 756c 6174 6f72  ullNodeSimulator
-000082d0: 203d 2065 6e76 2e66 756c 6c5f 6e6f 6465   = env.full_node
-000082e0: 2e61 7069 0a0a 2020 2020 6177 6169 7420  .api..    await 
-000082f0: 6765 6e65 7261 7465 5f66 756e 6473 2866  generate_funds(f
-00008300: 756c 6c5f 6e6f 6465 5f61 7069 2c20 656e  ull_node_api, en
-00008310: 762e 7761 6c6c 6574 5f31 2c20 3129 0a20  v.wallet_1, 1). 
-00008320: 2020 2061 7761 6974 2067 656e 6572 6174     await generat
-00008330: 655f 6675 6e64 7328 6675 6c6c 5f6e 6f64  e_funds(full_nod
-00008340: 655f 6170 692c 2065 6e76 2e77 616c 6c65  e_api, env.walle
-00008350: 745f 322c 2031 290a 0a20 2020 2023 2043  t_2, 1)..    # C
-00008360: 7265 6174 6573 2061 2043 4154 2077 616c  reates a CAT wal
-00008370: 6c65 7420 7769 7468 2032 3020 6d6f 6a6f  let with 20 mojo
-00008380: 730a 2020 2020 7265 7320 3d20 6177 6169  s.    res = awai
-00008390: 7420 7761 6c6c 6574 5f31 5f72 7063 2e63  t wallet_1_rpc.c
-000083a0: 7265 6174 655f 6e65 775f 6361 745f 616e  reate_new_cat_an
-000083b0: 645f 7761 6c6c 6574 2875 696e 7436 3428  d_wallet(uint64(
-000083c0: 3230 2929 0a20 2020 2061 7373 6572 7420  20)).    assert 
-000083d0: 7265 735b 2273 7563 6365 7373 225d 0a20  res["success"]. 
-000083e0: 2020 2063 6174 5f77 616c 6c65 745f 6964     cat_wallet_id
-000083f0: 203d 2072 6573 5b22 7761 6c6c 6574 5f69   = res["wallet_i
-00008400: 6422 5d0a 2020 2020 6361 745f 6173 7365  d"].    cat_asse
-00008410: 745f 6964 203d 2062 7974 6573 3332 2e66  t_id = bytes32.f
-00008420: 726f 6d68 6578 2872 6573 5b22 6173 7365  romhex(res["asse
-00008430: 745f 6964 225d 290a 2020 2020 6177 6169  t_id"]).    awai
-00008440: 7420 7469 6d65 5f6f 7574 5f61 7373 6572  t time_out_asser
-00008450: 7428 352c 2063 6865 636b 5f6d 656d 706f  t(5, check_mempo
-00008460: 6f6c 5f73 7065 6e64 5f63 6f75 6e74 2c20  ol_spend_count, 
-00008470: 5472 7565 2c20 6675 6c6c 5f6e 6f64 655f  True, full_node_
-00008480: 6170 692c 2031 290a 2020 2020 6177 6169  api, 1).    awai
-00008490: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
-000084a0: 6f6e 5f62 6c6f 636b 2866 756c 6c5f 6e6f  on_block(full_no
-000084b0: 6465 5f61 7069 2c20 7761 6c6c 6574 5f6e  de_api, wallet_n
-000084c0: 6f64 6529 0a20 2020 2061 7761 6974 2066  ode).    await f
-000084d0: 756c 6c5f 6e6f 6465 5f61 7069 2e77 6169  ull_node_api.wai
-000084e0: 745f 666f 725f 7761 6c6c 6574 5f73 796e  t_for_wallet_syn
-000084f0: 6365 6428 7761 6c6c 6574 5f6e 6f64 653d  ced(wallet_node=
-00008500: 7761 6c6c 6574 5f6e 6f64 652c 2074 696d  wallet_node, tim
-00008510: 656f 7574 3d35 290a 0a20 2020 2061 7761  eout=5)..    awa
-00008520: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
-00008530: 7274 2835 2c20 6765 745f 636f 6e66 6972  rt(5, get_confir
-00008540: 6d65 645f 6261 6c61 6e63 652c 2032 302c  med_balance, 20,
-00008550: 2077 616c 6c65 745f 315f 7270 632c 2063   wallet_1_rpc, c
-00008560: 6174 5f77 616c 6c65 745f 6964 290a 0a20  at_wallet_id).. 
-00008570: 2020 2023 2043 7265 6174 6573 2061 2077     # Creates a w
-00008580: 616c 6c65 7420 666f 7220 7468 6520 7361  allet for the sa
-00008590: 6d65 2043 4154 206f 6e20 7761 6c6c 6574  me CAT on wallet
-000085a0: 5f32 2061 6e64 2073 656e 6420 3420 4341  _2 and send 4 CA
-000085b0: 5420 6672 6f6d 2077 616c 6c65 745f 3120  T from wallet_1 
-000085c0: 746f 2069 740a 2020 2020 6177 6169 7420  to it.    await 
-000085d0: 7761 6c6c 6574 5f32 5f72 7063 2e63 7265  wallet_2_rpc.cre
-000085e0: 6174 655f 7761 6c6c 6574 5f66 6f72 5f65  ate_wallet_for_e
-000085f0: 7869 7374 696e 675f 6361 7428 6361 745f  xisting_cat(cat_
-00008600: 6173 7365 745f 6964 290a 2020 2020 7761  asset_id).    wa
-00008610: 6c6c 6574 5f32 5f61 6464 7265 7373 203d  llet_2_address =
-00008620: 2061 7761 6974 2077 616c 6c65 745f 325f   await wallet_2_
-00008630: 7270 632e 6765 745f 6e65 7874 5f61 6464  rpc.get_next_add
-00008640: 7265 7373 2863 6174 5f77 616c 6c65 745f  ress(cat_wallet_
-00008650: 6964 2c20 4661 6c73 6529 0a20 2020 2061  id, False).    a
-00008660: 6464 7320 3d20 5b7b 2270 757a 7a6c 655f  dds = [{"puzzle_
-00008670: 6861 7368 223a 2064 6563 6f64 655f 7075  hash": decode_pu
-00008680: 7a7a 6c65 5f68 6173 6828 7761 6c6c 6574  zzle_hash(wallet
-00008690: 5f32 5f61 6464 7265 7373 292c 2022 616d  _2_address), "am
-000086a0: 6f75 6e74 223a 2075 696e 7436 3428 3429  ount": uint64(4)
-000086b0: 2c20 226d 656d 6f73 223a 205b 2274 6865  , "memos": ["the
-000086c0: 2063 6174 206d 656d 6f22 5d7d 5d0a 2020   cat memo"]}].  
-000086d0: 2020 7478 5f72 6573 203d 2061 7761 6974    tx_res = await
-000086e0: 2077 616c 6c65 745f 315f 7270 632e 7365   wallet_1_rpc.se
-000086f0: 6e64 5f74 7261 6e73 6163 7469 6f6e 5f6d  nd_transaction_m
-00008700: 756c 7469 2863 6174 5f77 616c 6c65 745f  ulti(cat_wallet_
-00008710: 6964 2c20 6164 6469 7469 6f6e 733d 6164  id, additions=ad
-00008720: 6473 2c20 6665 653d 7569 6e74 3634 2830  ds, fee=uint64(0
-00008730: 2929 0a20 2020 2073 7065 6e64 5f62 756e  )).    spend_bun
-00008740: 646c 6520 3d20 7478 5f72 6573 2e73 7065  dle = tx_res.spe
-00008750: 6e64 5f62 756e 646c 650a 2020 2020 6173  nd_bundle.    as
-00008760: 7365 7274 2073 7065 6e64 5f62 756e 646c  sert spend_bundl
-00008770: 6520 6973 206e 6f74 204e 6f6e 650a 2020  e is not None.  
-00008780: 2020 6177 6169 7420 6661 726d 5f74 7261    await farm_tra
-00008790: 6e73 6163 7469 6f6e 2866 756c 6c5f 6e6f  nsaction(full_no
-000087a0: 6465 5f61 7069 2c20 7761 6c6c 6574 5f6e  de_api, wallet_n
-000087b0: 6f64 652c 2073 7065 6e64 5f62 756e 646c  ode, spend_bundl
-000087c0: 6529 0a20 2020 2061 7761 6974 2074 696d  e).    await tim
-000087d0: 655f 6f75 745f 6173 7365 7274 2835 2c20  e_out_assert(5, 
-000087e0: 6765 745f 636f 6e66 6972 6d65 645f 6261  get_confirmed_ba
-000087f0: 6c61 6e63 652c 2034 2c20 7761 6c6c 6574  lance, 4, wallet
-00008800: 5f32 5f72 7063 2c20 6361 745f 7761 6c6c  _2_rpc, cat_wall
-00008810: 6574 5f69 6429 0a20 2020 2074 6573 745f  et_id).    test_
-00008820: 6372 733a 204c 6973 745b 436f 696e 5265  crs: List[CoinRe
-00008830: 636f 7264 5d20 3d20 6177 6169 7420 7761  cord] = await wa
-00008840: 6c6c 6574 5f31 5f72 7063 2e67 6574 5f63  llet_1_rpc.get_c
-00008850: 6f69 6e5f 7265 636f 7264 735f 6279 5f6e  oin_records_by_n
-00008860: 616d 6573 280a 2020 2020 2020 2020 5b61  ames(.        [a
-00008870: 2e6e 616d 6528 2920 666f 7220 6120 696e  .name() for a in
-00008880: 2073 7065 6e64 5f62 756e 646c 652e 6164   spend_bundle.ad
-00008890: 6469 7469 6f6e 7328 2920 6966 2061 2e61  ditions() if a.a
-000088a0: 6d6f 756e 7420 213d 2034 5d0a 2020 2020  mount != 4].    
-000088b0: 290a 2020 2020 666f 7220 6372 2069 6e20  ).    for cr in 
-000088c0: 7465 7374 5f63 7273 3a0a 2020 2020 2020  test_crs:.      
-000088d0: 2020 6173 7365 7274 2063 722e 636f 696e    assert cr.coin
-000088e0: 2069 6e20 7370 656e 645f 6275 6e64 6c65   in spend_bundle
-000088f0: 2e61 6464 6974 696f 6e73 2829 0a20 2020  .additions().   
-00008900: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
-00008910: 7365 7328 5661 6c75 6545 7272 6f72 293a  ses(ValueError):
-00008920: 0a20 2020 2020 2020 2061 7761 6974 2077  .        await w
-00008930: 616c 6c65 745f 315f 7270 632e 6765 745f  allet_1_rpc.get_
-00008940: 636f 696e 5f72 6563 6f72 6473 5f62 795f  coin_records_by_
-00008950: 6e61 6d65 7328 5b61 2e6e 616d 6528 2920  names([a.name() 
-00008960: 666f 7220 6120 696e 2073 7065 6e64 5f62  for a in spend_b
-00008970: 756e 646c 652e 6164 6469 7469 6f6e 7328  undle.additions(
-00008980: 2920 6966 2061 2e61 6d6f 756e 7420 3d3d  ) if a.amount ==
-00008990: 2034 5d29 0a20 2020 2023 2043 7265 6174   4]).    # Creat
-000089a0: 6520 616e 206f 6666 6572 206f 6620 3520  e an offer of 5 
-000089b0: 6368 6961 2066 6f72 206f 6e65 2043 4154  chia for one CAT
-000089c0: 0a20 2020 206f 6666 6572 2c20 7472 6164  .    offer, trad
-000089d0: 655f 7265 636f 7264 203d 2061 7761 6974  e_record = await
-000089e0: 2077 616c 6c65 745f 315f 7270 632e 6372   wallet_1_rpc.cr
-000089f0: 6561 7465 5f6f 6666 6572 5f66 6f72 5f69  eate_offer_for_i
-00008a00: 6473 280a 2020 2020 2020 2020 7b75 696e  ds(.        {uin
-00008a10: 7433 3228 3129 3a20 2d35 2c20 6361 745f  t32(1): -5, cat_
-00008a20: 6173 7365 745f 6964 2e68 6578 2829 3a20  asset_id.hex(): 
-00008a30: 317d 2c20 7661 6c69 6461 7465 5f6f 6e6c  1}, validate_onl
-00008a40: 793d 5472 7565 0a20 2020 2029 0a20 2020  y=True.    ).   
-00008a50: 2061 6c6c 5f6f 6666 6572 7320 3d20 6177   all_offers = aw
-00008a60: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
-00008a70: 2e67 6574 5f61 6c6c 5f6f 6666 6572 7328  .get_all_offers(
-00008a80: 290a 2020 2020 6173 7365 7274 206c 656e  ).    assert len
-00008a90: 2861 6c6c 5f6f 6666 6572 7329 203d 3d20  (all_offers) == 
-00008aa0: 300a 2020 2020 6173 7365 7274 206f 6666  0.    assert off
-00008ab0: 6572 2069 7320 4e6f 6e65 0a0a 2020 2020  er is None..    
-00008ac0: 6472 6976 6572 5f64 6963 743a 2044 6963  driver_dict: Dic
-00008ad0: 745b 7374 722c 2041 6e79 5d20 3d20 7b63  t[str, Any] = {c
-00008ae0: 6174 5f61 7373 6574 5f69 642e 6865 7828  at_asset_id.hex(
-00008af0: 293a 207b 2274 7970 6522 3a20 2243 4154  ): {"type": "CAT
-00008b00: 222c 2022 7461 696c 223a 2022 3078 2220  ", "tail": "0x" 
-00008b10: 2b20 6361 745f 6173 7365 745f 6964 2e68  + cat_asset_id.h
-00008b20: 6578 2829 7d7d 0a0a 2020 2020 6f66 6665  ex()}}..    offe
-00008b30: 722c 2074 7261 6465 5f72 6563 6f72 6420  r, trade_record 
-00008b40: 3d20 6177 6169 7420 7761 6c6c 6574 5f31  = await wallet_1
-00008b50: 5f72 7063 2e63 7265 6174 655f 6f66 6665  _rpc.create_offe
-00008b60: 725f 666f 725f 6964 7328 0a20 2020 2020  r_for_ids(.     
-00008b70: 2020 207b 7569 6e74 3332 2831 293a 202d     {uint32(1): -
-00008b80: 352c 2063 6174 5f61 7373 6574 5f69 642e  5, cat_asset_id.
-00008b90: 6865 7828 293a 2031 7d2c 0a20 2020 2020  hex(): 1},.     
-00008ba0: 2020 2064 7269 7665 725f 6469 6374 3d64     driver_dict=d
-00008bb0: 7269 7665 725f 6469 6374 2c0a 2020 2020  river_dict,.    
-00008bc0: 2020 2020 6665 653d 7569 6e74 3634 2831      fee=uint64(1
-00008bd0: 292c 0a20 2020 2029 0a20 2020 2061 7373  ),.    ).    ass
-00008be0: 6572 7420 6f66 6665 7220 6973 206e 6f74  ert offer is not
-00008bf0: 204e 6f6e 650a 0a20 2020 2069 642c 2073   None..    id, s
-00008c00: 756d 6d61 7279 203d 2061 7761 6974 2077  ummary = await w
-00008c10: 616c 6c65 745f 315f 7270 632e 6765 745f  allet_1_rpc.get_
-00008c20: 6f66 6665 725f 7375 6d6d 6172 7928 6f66  offer_summary(of
-00008c30: 6665 7229 0a20 2020 2061 7373 6572 7420  fer).    assert 
-00008c40: 6964 203d 3d20 6f66 6665 722e 6e61 6d65  id == offer.name
-00008c50: 2829 0a20 2020 2069 642c 2061 6476 616e  ().    id, advan
-00008c60: 6365 645f 7375 6d6d 6172 7920 3d20 6177  ced_summary = aw
-00008c70: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
-00008c80: 2e67 6574 5f6f 6666 6572 5f73 756d 6d61  .get_offer_summa
-00008c90: 7279 286f 6666 6572 2c20 6164 7661 6e63  ry(offer, advanc
-00008ca0: 6564 3d54 7275 6529 0a20 2020 2061 7373  ed=True).    ass
-00008cb0: 6572 7420 6964 203d 3d20 6f66 6665 722e  ert id == offer.
-00008cc0: 6e61 6d65 2829 0a20 2020 2061 7373 6572  name().    asser
-00008cd0: 7420 7375 6d6d 6172 7920 3d3d 207b 226f  t summary == {"o
-00008ce0: 6666 6572 6564 223a 207b 2278 6368 223a  ffered": {"xch":
-00008cf0: 2035 7d2c 2022 7265 7175 6573 7465 6422   5}, "requested"
-00008d00: 3a20 7b63 6174 5f61 7373 6574 5f69 642e  : {cat_asset_id.
-00008d10: 6865 7828 293a 2031 7d2c 2022 696e 666f  hex(): 1}, "info
-00008d20: 7322 3a20 6472 6976 6572 5f64 6963 742c  s": driver_dict,
-00008d30: 2022 6665 6573 223a 2031 7d0a 2020 2020   "fees": 1}.    
-00008d40: 6173 7365 7274 2061 6476 616e 6365 645f  assert advanced_
-00008d50: 7375 6d6d 6172 7920 3d3d 2073 756d 6d61  summary == summa
-00008d60: 7279 0a0a 2020 2020 6964 2c20 7661 6c69  ry..    id, vali
-00008d70: 6420 3d20 6177 6169 7420 7761 6c6c 6574  d = await wallet
-00008d80: 5f31 5f72 7063 2e63 6865 636b 5f6f 6666  _1_rpc.check_off
-00008d90: 6572 5f76 616c 6964 6974 7928 6f66 6665  er_validity(offe
-00008da0: 7229 0a20 2020 2061 7373 6572 7420 6964  r).    assert id
-00008db0: 203d 3d20 6f66 6665 722e 6e61 6d65 2829   == offer.name()
-00008dc0: 0a0a 2020 2020 616c 6c5f 6f66 6665 7273  ..    all_offers
-00008dd0: 203d 2061 7761 6974 2077 616c 6c65 745f   = await wallet_
-00008de0: 315f 7270 632e 6765 745f 616c 6c5f 6f66  1_rpc.get_all_of
-00008df0: 6665 7273 2866 696c 655f 636f 6e74 656e  fers(file_conten
-00008e00: 7473 3d54 7275 6529 0a20 2020 2061 7373  ts=True).    ass
-00008e10: 6572 7420 6c65 6e28 616c 6c5f 6f66 6665  ert len(all_offe
-00008e20: 7273 2920 3d3d 2031 0a20 2020 2061 7373  rs) == 1.    ass
-00008e30: 6572 7420 5472 6164 6553 7461 7475 7328  ert TradeStatus(
-00008e40: 616c 6c5f 6f66 6665 7273 5b30 5d2e 7374  all_offers[0].st
-00008e50: 6174 7573 2920 3d3d 2054 7261 6465 5374  atus) == TradeSt
-00008e60: 6174 7573 2e50 454e 4449 4e47 5f41 4343  atus.PENDING_ACC
-00008e70: 4550 540a 2020 2020 6173 7365 7274 2061  EPT.    assert a
-00008e80: 6c6c 5f6f 6666 6572 735b 305d 2e6f 6666  ll_offers[0].off
-00008e90: 6572 203d 3d20 6279 7465 7328 6f66 6665  er == bytes(offe
-00008ea0: 7229 0a0a 2020 2020 7472 6164 655f 7265  r)..    trade_re
-00008eb0: 636f 7264 203d 2061 7761 6974 2077 616c  cord = await wal
-00008ec0: 6c65 745f 325f 7270 632e 7461 6b65 5f6f  let_2_rpc.take_o
-00008ed0: 6666 6572 286f 6666 6572 2c20 6665 653d  ffer(offer, fee=
-00008ee0: 7569 6e74 3634 2831 2929 0a20 2020 2061  uint64(1)).    a
-00008ef0: 7373 6572 7420 5472 6164 6553 7461 7475  ssert TradeStatu
-00008f00: 7328 7472 6164 655f 7265 636f 7264 2e73  s(trade_record.s
-00008f10: 7461 7475 7329 203d 3d20 5472 6164 6553  tatus) == TradeS
-00008f20: 7461 7475 732e 5045 4e44 494e 475f 434f  tatus.PENDING_CO
-00008f30: 4e46 4952 4d0a 0a20 2020 2061 7761 6974  NFIRM..    await
-00008f40: 2077 616c 6c65 745f 315f 7270 632e 6361   wallet_1_rpc.ca
-00008f50: 6e63 656c 5f6f 6666 6572 286f 6666 6572  ncel_offer(offer
-00008f60: 2e6e 616d 6528 292c 2073 6563 7572 653d  .name(), secure=
-00008f70: 4661 6c73 6529 0a0a 2020 2020 7472 6164  False)..    trad
-00008f80: 655f 7265 636f 7264 203d 2061 7761 6974  e_record = await
-00008f90: 2077 616c 6c65 745f 315f 7270 632e 6765   wallet_1_rpc.ge
-00008fa0: 745f 6f66 6665 7228 6f66 6665 722e 6e61  t_offer(offer.na
-00008fb0: 6d65 2829 2c20 6669 6c65 5f63 6f6e 7465  me(), file_conte
-00008fc0: 6e74 733d 5472 7565 290a 2020 2020 6173  nts=True).    as
-00008fd0: 7365 7274 2074 7261 6465 5f72 6563 6f72  sert trade_recor
-00008fe0: 642e 6f66 6665 7220 3d3d 2062 7974 6573  d.offer == bytes
-00008ff0: 286f 6666 6572 290a 2020 2020 6173 7365  (offer).    asse
-00009000: 7274 2054 7261 6465 5374 6174 7573 2874  rt TradeStatus(t
-00009010: 7261 6465 5f72 6563 6f72 642e 7374 6174  rade_record.stat
-00009020: 7573 2920 3d3d 2054 7261 6465 5374 6174  us) == TradeStat
-00009030: 7573 2e43 414e 4345 4c4c 4544 0a0a 2020  us.CANCELLED..  
-00009040: 2020 6177 6169 7420 7761 6c6c 6574 5f31    await wallet_1
-00009050: 5f72 7063 2e63 616e 6365 6c5f 6f66 6665  _rpc.cancel_offe
-00009060: 7228 6f66 6665 722e 6e61 6d65 2829 2c20  r(offer.name(), 
-00009070: 6665 653d 7569 6e74 3634 2831 292c 2073  fee=uint64(1), s
-00009080: 6563 7572 653d 5472 7565 290a 0a20 2020  ecure=True)..   
-00009090: 2074 7261 6465 5f72 6563 6f72 6420 3d20   trade_record = 
-000090a0: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
-000090b0: 7063 2e67 6574 5f6f 6666 6572 286f 6666  pc.get_offer(off
-000090c0: 6572 2e6e 616d 6528 2929 0a20 2020 2061  er.name()).    a
-000090d0: 7373 6572 7420 5472 6164 6553 7461 7475  ssert TradeStatu
-000090e0: 7328 7472 6164 655f 7265 636f 7264 2e73  s(trade_record.s
-000090f0: 7461 7475 7329 203d 3d20 5472 6164 6553  tatus) == TradeS
-00009100: 7461 7475 732e 5045 4e44 494e 475f 4341  tatus.PENDING_CA
-00009110: 4e43 454c 0a0a 2020 2020 6e65 775f 6f66  NCEL..    new_of
-00009120: 6665 722c 206e 6577 5f74 7261 6465 5f72  fer, new_trade_r
-00009130: 6563 6f72 6420 3d20 6177 6169 7420 7761  ecord = await wa
-00009140: 6c6c 6574 5f31 5f72 7063 2e63 7265 6174  llet_1_rpc.creat
-00009150: 655f 6f66 6665 725f 666f 725f 6964 7328  e_offer_for_ids(
-00009160: 0a20 2020 2020 2020 207b 7569 6e74 3332  .        {uint32
-00009170: 2831 293a 202d 352c 2063 6174 5f77 616c  (1): -5, cat_wal
-00009180: 6c65 745f 6964 3a20 317d 2c20 6665 653d  let_id: 1}, fee=
-00009190: 7569 6e74 3634 2831 290a 2020 2020 290a  uint64(1).    ).
-000091a0: 2020 2020 616c 6c5f 6f66 6665 7273 203d      all_offers =
-000091b0: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
-000091c0: 7270 632e 6765 745f 616c 6c5f 6f66 6665  rpc.get_all_offe
-000091d0: 7273 2829 0a20 2020 2061 7373 6572 7420  rs().    assert 
-000091e0: 6c65 6e28 616c 6c5f 6f66 6665 7273 2920  len(all_offers) 
-000091f0: 3d3d 2032 0a0a 2020 2020 6177 6169 7420  == 2..    await 
-00009200: 6661 726d 5f74 7261 6e73 6163 7469 6f6e  farm_transaction
-00009210: 5f62 6c6f 636b 2866 756c 6c5f 6e6f 6465  _block(full_node
-00009220: 5f61 7069 2c20 7761 6c6c 6574 5f6e 6f64  _api, wallet_nod
-00009230: 6529 0a0a 2020 2020 6173 796e 6320 6465  e)..    async de
-00009240: 6620 6973 5f74 7261 6465 5f63 6f6e 6669  f is_trade_confi
-00009250: 726d 6564 2863 6c69 656e 742c 2074 7261  rmed(client, tra
-00009260: 6465 2920 2d3e 2062 6f6f 6c3a 0a20 2020  de) -> bool:.   
-00009270: 2020 2020 2074 7261 6465 5f72 6563 6f72       trade_recor
-00009280: 6420 3d20 6177 6169 7420 636c 6965 6e74  d = await client
-00009290: 2e67 6574 5f6f 6666 6572 2874 7261 6465  .get_offer(trade
-000092a0: 2e6e 616d 6528 2929 0a20 2020 2020 2020  .name()).       
-000092b0: 2072 6574 7572 6e20 5472 6164 6553 7461   return TradeSta
-000092c0: 7475 7328 7472 6164 655f 7265 636f 7264  tus(trade_record
-000092d0: 2e73 7461 7475 7329 203d 3d20 5472 6164  .status) == Trad
-000092e0: 6553 7461 7475 732e 434f 4e46 4952 4d45  eStatus.CONFIRME
-000092f0: 440a 0a20 2020 2061 7761 6974 2074 696d  D..    await tim
-00009300: 655f 6f75 745f 6173 7365 7274 2831 352c  e_out_assert(15,
-00009310: 2069 735f 7472 6164 655f 636f 6e66 6972   is_trade_confir
-00009320: 6d65 642c 2054 7275 652c 2077 616c 6c65  med, True, walle
-00009330: 745f 315f 7270 632c 206f 6666 6572 290a  t_1_rpc, offer).
-00009340: 0a20 2020 2023 2054 6573 7420 7472 6164  .    # Test trad
-00009350: 6520 736f 7274 696e 670a 2020 2020 6465  e sorting.    de
-00009360: 6620 6f6e 6c79 5f69 6473 2874 7261 6465  f only_ids(trade
-00009370: 7329 3a0a 2020 2020 2020 2020 7265 7475  s):.        retu
-00009380: 726e 205b 742e 7472 6164 655f 6964 2066  rn [t.trade_id f
-00009390: 6f72 2074 2069 6e20 7472 6164 6573 5d0a  or t in trades].
-000093a0: 0a20 2020 2074 7261 6465 5f72 6563 6f72  .    trade_recor
-000093b0: 6420 3d20 6177 6169 7420 7761 6c6c 6574  d = await wallet
-000093c0: 5f31 5f72 7063 2e67 6574 5f6f 6666 6572  _1_rpc.get_offer
-000093d0: 286f 6666 6572 2e6e 616d 6528 2929 0a20  (offer.name()). 
-000093e0: 2020 2061 6c6c 5f6f 6666 6572 7320 3d20     all_offers = 
-000093f0: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
-00009400: 7063 2e67 6574 5f61 6c6c 5f6f 6666 6572  pc.get_all_offer
-00009410: 7328 696e 636c 7564 655f 636f 6d70 6c65  s(include_comple
-00009420: 7465 643d 5472 7565 2920 2023 2063 6f6e  ted=True)  # con
-00009430: 6669 726d 6564 2061 7420 696e 6465 7820  firmed at index 
-00009440: 6465 7363 656e 6469 6e67 0a20 2020 2061  descending.    a
-00009450: 7373 6572 7420 6c65 6e28 616c 6c5f 6f66  ssert len(all_of
-00009460: 6665 7273 2920 3d3d 2032 0a20 2020 2061  fers) == 2.    a
-00009470: 7373 6572 7420 6f6e 6c79 5f69 6473 2861  ssert only_ids(a
-00009480: 6c6c 5f6f 6666 6572 7329 203d 3d20 6f6e  ll_offers) == on
-00009490: 6c79 5f69 6473 285b 7472 6164 655f 7265  ly_ids([trade_re
-000094a0: 636f 7264 2c20 6e65 775f 7472 6164 655f  cord, new_trade_
-000094b0: 7265 636f 7264 5d29 0a20 2020 2061 6c6c  record]).    all
-000094c0: 5f6f 6666 6572 7320 3d20 6177 6169 7420  _offers = await 
-000094d0: 7761 6c6c 6574 5f31 5f72 7063 2e67 6574  wallet_1_rpc.get
-000094e0: 5f61 6c6c 5f6f 6666 6572 7328 696e 636c  _all_offers(incl
-000094f0: 7564 655f 636f 6d70 6c65 7465 643d 5472  ude_completed=Tr
-00009500: 7565 2c20 7265 7665 7273 653d 5472 7565  ue, reverse=True
-00009510: 2920 2023 2063 6f6e 6669 726d 6564 2061  )  # confirmed a
-00009520: 7420 696e 6465 7820 6173 6365 6e64 696e  t index ascendin
-00009530: 670a 2020 2020 6173 7365 7274 206f 6e6c  g.    assert onl
-00009540: 795f 6964 7328 616c 6c5f 6f66 6665 7273  y_ids(all_offers
-00009550: 2920 3d3d 206f 6e6c 795f 6964 7328 5b6e  ) == only_ids([n
-00009560: 6577 5f74 7261 6465 5f72 6563 6f72 642c  ew_trade_record,
-00009570: 2074 7261 6465 5f72 6563 6f72 645d 290a   trade_record]).
-00009580: 2020 2020 616c 6c5f 6f66 6665 7273 203d      all_offers =
-00009590: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
-000095a0: 7270 632e 6765 745f 616c 6c5f 6f66 6665  rpc.get_all_offe
-000095b0: 7273 2869 6e63 6c75 6465 5f63 6f6d 706c  rs(include_compl
-000095c0: 6574 6564 3d54 7275 652c 2073 6f72 745f  eted=True, sort_
-000095d0: 6b65 793d 2252 454c 4556 414e 4345 2229  key="RELEVANCE")
-000095e0: 2020 2320 6d6f 7374 2072 656c 6576 616e    # most relevan
-000095f0: 740a 2020 2020 6173 7365 7274 206f 6e6c  t.    assert onl
-00009600: 795f 6964 7328 616c 6c5f 6f66 6665 7273  y_ids(all_offers
-00009610: 2920 3d3d 206f 6e6c 795f 6964 7328 5b6e  ) == only_ids([n
-00009620: 6577 5f74 7261 6465 5f72 6563 6f72 642c  ew_trade_record,
-00009630: 2074 7261 6465 5f72 6563 6f72 645d 290a   trade_record]).
-00009640: 2020 2020 616c 6c5f 6f66 6665 7273 203d      all_offers =
-00009650: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
-00009660: 7270 632e 6765 745f 616c 6c5f 6f66 6665  rpc.get_all_offe
-00009670: 7273 280a 2020 2020 2020 2020 696e 636c  rs(.        incl
-00009680: 7564 655f 636f 6d70 6c65 7465 643d 5472  ude_completed=Tr
-00009690: 7565 2c20 736f 7274 5f6b 6579 3d22 5245  ue, sort_key="RE
-000096a0: 4c45 5641 4e43 4522 2c20 7265 7665 7273  LEVANCE", revers
-000096b0: 653d 5472 7565 0a20 2020 2029 2020 2320  e=True.    )  # 
-000096c0: 6c65 6173 7420 7265 6c65 7661 6e74 0a20  least relevant. 
-000096d0: 2020 2061 7373 6572 7420 6f6e 6c79 5f69     assert only_i
-000096e0: 6473 2861 6c6c 5f6f 6666 6572 7329 203d  ds(all_offers) =
-000096f0: 3d20 6f6e 6c79 5f69 6473 285b 7472 6164  = only_ids([trad
-00009700: 655f 7265 636f 7264 2c20 6e65 775f 7472  e_record, new_tr
-00009710: 6164 655f 7265 636f 7264 5d29 0a20 2020  ade_record]).   
-00009720: 2023 2054 6573 7420 7061 6769 6e61 7469   # Test paginati
-00009730: 6f6e 0a20 2020 2061 6c6c 5f6f 6666 6572  on.    all_offer
-00009740: 7320 3d20 6177 6169 7420 7761 6c6c 6574  s = await wallet
-00009750: 5f31 5f72 7063 2e67 6574 5f61 6c6c 5f6f  _1_rpc.get_all_o
-00009760: 6666 6572 7328 696e 636c 7564 655f 636f  ffers(include_co
-00009770: 6d70 6c65 7465 643d 5472 7565 2c20 7374  mpleted=True, st
-00009780: 6172 743d 302c 2065 6e64 3d31 290a 2020  art=0, end=1).  
-00009790: 2020 6173 7365 7274 206c 656e 2861 6c6c    assert len(all
-000097a0: 5f6f 6666 6572 7329 203d 3d20 310a 2020  _offers) == 1.  
-000097b0: 2020 616c 6c5f 6f66 6665 7273 203d 2061    all_offers = a
-000097c0: 7761 6974 2077 616c 6c65 745f 315f 7270  wait wallet_1_rp
-000097d0: 632e 6765 745f 616c 6c5f 6f66 6665 7273  c.get_all_offers
-000097e0: 2869 6e63 6c75 6465 5f63 6f6d 706c 6574  (include_complet
-000097f0: 6564 3d54 7275 652c 2073 7461 7274 3d35  ed=True, start=5
-00009800: 3029 0a20 2020 2061 7373 6572 7420 6c65  0).    assert le
-00009810: 6e28 616c 6c5f 6f66 6665 7273 2920 3d3d  n(all_offers) ==
-00009820: 2030 0a20 2020 2061 6c6c 5f6f 6666 6572   0.    all_offer
-00009830: 7320 3d20 6177 6169 7420 7761 6c6c 6574  s = await wallet
-00009840: 5f31 5f72 7063 2e67 6574 5f61 6c6c 5f6f  _1_rpc.get_all_o
-00009850: 6666 6572 7328 696e 636c 7564 655f 636f  ffers(include_co
-00009860: 6d70 6c65 7465 643d 5472 7565 2c20 7374  mpleted=True, st
-00009870: 6172 743d 302c 2065 6e64 3d35 3029 0a20  art=0, end=50). 
-00009880: 2020 2061 7373 6572 7420 6c65 6e28 616c     assert len(al
-00009890: 6c5f 6f66 6665 7273 2920 3d3d 2032 0a0a  l_offers) == 2..
-000098a0: 2020 2020 2323 230a 2020 2020 2320 5468      ###.    # Th
-000098b0: 6973 2069 7320 7465 6d70 6f72 6172 7920  is is temporary 
-000098c0: 636f 6465 2c20 6465 6c65 7465 2069 7420  code, delete it 
-000098d0: 7768 656e 2077 6520 6e6f 206c 6f6e 6765  when we no longe
-000098e0: 7220 6361 7265 2061 626f 7574 2069 6e63  r care about inc
-000098f0: 6f72 7265 6374 6c79 2070 6172 7369 6e67  orrectly parsing
-00009900: 2043 4154 3173 0a20 2020 2023 2054 6865   CAT1s.    # The
-00009910: 7265 2773 2061 6c73 6f20 7465 6d70 2063  re's also temp c
-00009920: 6f64 6520 696e 2077 616c 6c65 745f 7270  ode in wallet_rp
-00009930: 635f 6170 692e 7079 2061 6e64 2077 616c  c_api.py and wal
-00009940: 6c65 745f 6675 6e63 732e 7079 0a20 2020  let_funcs.py.   
-00009950: 2077 6974 6820 7079 7465 7374 2e72 6169   with pytest.rai
-00009960: 7365 7328 5661 6c75 6545 7272 6f72 2c20  ses(ValueError, 
-00009970: 6d61 7463 683d 2243 4154 3173 2061 7265  match="CAT1s are
-00009980: 206e 6f20 6c6f 6e67 6572 2073 7570 706f   no longer suppo
-00009990: 7274 6564 2229 3a0a 2020 2020 2020 2020  rted"):.        
-000099a0: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
-000099b0: 7063 2e66 6574 6368 280a 2020 2020 2020  pc.fetch(.      
-000099c0: 2020 2020 2020 2267 6574 5f6f 6666 6572        "get_offer
-000099d0: 5f73 756d 6d61 7279 222c 0a20 2020 2020  _summary",.     
-000099e0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-000099f0: 2020 2020 2020 2020 2022 6f66 6665 7222           "offer"
-00009a00: 3a20 226f 6666 6572 3171 7170 3833 7737  : "offer1qqp83w7
-00009a10: 3677 7a72 7536 636d 7176 7073 7879 6771  6wzru6cmqvpsxygq
-00009a20: 7134 6339 3661 6c37 6d77 3061 3865 7335  q4c96al7mw0a8es5
-00009a30: 7434 7270 3830 676e 3866 656d 6a36 6d6b  t4rp80gn8femj6mk
-00009a40: 6a6c 386c 7576 3777 726c 6467 3837 6468  jl8luv7wrldg87dh
-00009a50: 6b71 3665 6a79 6c76 6338 6622 0a20 2020  kq6ejylvc8f".   
-00009a60: 2020 2020 2020 2020 2020 2020 2022 7674               "vt
-00009a70: 7072 6b6b 7777 336c 7468 7267 3835 6d34  prkkww3lthrg85m4
-00009a80: 346e 7564 3665 6573 7868 7730 7378 396d  4nud6eesxhw0sx9m
-00009a90: 3670 3239 3775 387a 6664 306d 746a 756d  6p297u8zfd0mtjum
-00009aa0: 6336 6b38 3573 7a33 3835 3336 7a36 6838  c6k85sz38536z6h8
-00009ab0: 3834 7278 756a 7732 7a66 6537 3034 7375  84rxujw2zfe704su
-00009ac0: 726b 736d 6d34 6d22 0a20 2020 2020 2020  rksmm4m".       
-00009ad0: 2020 2020 2020 2020 2022 3775 7379 3475           "7usy4u
-00009ae0: 3438 746d 6166 6361 6a63 3464 6330 646d  48tmafcajc4dc0dm
-00009af0: 7161 3468 397a 3566 3237 6533 716e 757a  qa4h9z5f27e3qnuz
-00009b00: 6633 3779 7237 3873 6c36 6b73 6c74 7339  f37yr78sl6kslts9
-00009b10: 6175 6135 7a66 6467 3372 376b 6e6e 636a  aua5zfdg3r7knncj
-00009b20: 3738 707a 6734 6e76 726e 3061 3664 6b6a  78pzg4nvrn0a6dkj
-00009b30: 766d 6d65 3722 0a20 2020 2020 2020 2020  vmme7".         
-00009b40: 2020 2020 2020 2022 6a6a 7a7a 3732 786d         "jjzz72xm
-00009b50: 6c72 7575 686d 6177 6d30 6565 646c 3766  lruuhmawm0eedl7f
-00009b60: 7066 6a6b 686e 6637 3061 6c32 7477 3334  pfjkhnf70al2tw34
-00009b70: 7064 6771 6a65 306d 3877 7436 7638 7561  pdgqje0m8wt6v8ua
-00009b80: 7877 3867 746a 6c6b 667a 6c77 3434 3437  xw8gtjlkfzlw4447
-00009b90: 666b 3432 3966 3432 746d 6e39 7836 6c34  fk429f42tmn9x6l4
-00009ba0: 716d 3975 220a 2020 2020 2020 2020 2020  qm9u".          
-00009bb0: 2020 2020 2020 2232 6e34 3034 6a37 346c        "2n404j74l
-00009bc0: 7335 7976 3267 7274 3074 7a73 746d 326c  s5yv2grt0tzstm2l
-00009bd0: 3868 756b 6778 3476 3668 3432 3930 3870  8hukgx4v6h42908p
-00009be0: 7838 6468 3061 767a 6864 6c78 7737 7275  x8dh0avzhdlxw7ru
-00009bf0: 6a35 7435 3365 7463 3964 7432 6e32 776d  j5t53etc9dt2n2wm
-00009c00: 3730 3938 6b73 3839 7761 6575 6e6e 6665  7098ks89waeunnfe
-00009c10: 7864 6e22 0a20 2020 2020 2020 2020 2020  xdn".           
-00009c20: 2020 2020 2022 646d 6866 3564 6d68 796a       "dmhf5dmhyj
-00009c30: 7336 7776 6a7a 7676 6c6a 3073 6364 6833  s6wvjzvvlj0scdh3
-00009c40: 6e70 366d 676d 7572 366d 326a 6a32 7934  np6mgmur6m2jj2y4
-00009c50: 3734 6377 7561 7572 7068 3074 7132 3865  74cwuaurph0tq28e
-00009c60: 6536 7933 6878 6168 686b 6b66 717a 6c63  e6y3hxahhkkfqzlc
-00009c70: 3867 3768 6d33 6c6c 6c76 726c 326e 686c  8g7hm3lllvrl2nhl
-00009c80: 6d37 220a 2020 2020 2020 2020 2020 2020  m7".            
-00009c90: 2020 2020 2232 6867 6175 396c 6764 756d      "2hgau9lgdum
-00009ca0: 7939 6d39 3968 7937 3864 7635 7577 6472  y9m99hy78dv5uwdr
-00009cb0: 3639 6a66 6b76 7536 6135 7163 306a 6c7a  69jfkvu6a5qc0jlz
-00009cc0: 6b61 7336 6372 7933 7a68 3768 6173 6477  kas6cry3zh7hasdw
-00009cd0: 6737 3835 6e6d 6868 736c 3638 306d 3466  g785nmhhsl680m4f
-00009ce0: 7864 7365 6176 7a64 6b38 6d67 3933 6461  xdseavzdk8mg93da
-00009cf0: 6e6b 220a 2020 2020 2020 2020 2020 2020  nk".            
-00009d00: 2020 2020 2238 3875 6532 686e 6564 3474      "88ue2hned4t
-00009d10: 6172 6e30 616c 3767 6c34 7771 3663 7434  arn0al7gl4wq6ct4
-00009d20: 6764 3363 3371 3561 366c 3267 6a6c 7664  gd3c3q5a6l2gjlvd
-00009d30: 3866 7474 6564 6466 7878 7135 7634 7a64  8ftteddfxxq5v4zd
-00009d40: 7530 7963 7632 7675 7773 6c66 3772 7a32  u0ycv2vuwslf7rz2
-00009d50: 7535 366e 6c37 6775 7161 746b 3075 7437  u56nl7guqatk0ut7
-00009d60: 6379 220a 2020 2020 2020 2020 2020 2020  cy".            
-00009d70: 2020 2020 2267 6130 7a75 3039 366b 3772      "ga0zu096k7r
-00009d80: 6864 6c39 396b 6335 6a6d 7363 6d74 647a  hdl99kc5jmscmtdz
-00009d90: 3976 6d65 326d 6d67 3836 6477 7137 6e6b  9vme2mmg86dwq7nk
-00009da0: 3038 3873 7061 7772 6178 6667 6674 6c30  088spawraxfgftl0
-00009db0: 6c71 6b79 6361 7066 6c66 3732 356d 6a68  lqkycapflf725mjh
-00009dc0: 7432 6c61 7736 3977 6830 7271 386c 3775  t2law69wh0rq8l7u
-00009dd0: 6522 0a20 2020 2020 2020 2020 2020 2020  e".             
-00009de0: 2020 2022 677a 7478 3078 6e76 6763 3879     "gztx0xnvgc8y
-00009df0: 3777 7676 7577 7633 7468 3570 6377 636b  7wvvuwv3th5pcwck
-00009e00: 6b6d 3037 6a61 637a 6e6c 6765 7575 386b  km07jacznlgeuu8k
-00009e10: 6377 3079 7575 3475 746a 726d 326d 7574  cw0yuu4utjrm2mut
-00009e20: 3865 6b6d 3872 6d7a 7036 766c 7a63 6d36  8ekm8rmzp6vlzcm6
-00009e30: 6534 6638 787a 7974 6a78 3379 746e 7965  e4f8xzytjx3ytnye
-00009e40: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00009e50: 2020 226b 616e 7930 6139 6c34 7471 307a    "kany0a9l4tq0z
-00009e60: 786e 6833 726a 7768 7665 3838 3635 386e  xnh3rjwhve88658n
-00009e70: 6430 7877 686d 6765 6374 6c33 3375 3375  d0xwhmgectl33u3u
-00009e80: 7336 6b6c 6b6b 3563 3776 6a79 7575 7272  s6klkk5c7vjyuurr
-00009e90: 3679 6574 6b37 7561 3635 346d 7934 636d  6yetk7ua654my4cm
-00009ea0: 786d 7472 6a61 7a66 7533 6172 6139 220a  xmtrjazfu3ara9".
-00009eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ec0: 2279 6334 3439 6a71 7867 346d 6667 7830  "yc449jqxg4mfgx0
-00009ed0: 7377 3370 3922 0a20 2020 2020 2020 2020  sw3p9".         
-00009ee0: 2020 207d 2c0a 2020 2020 2020 2020 290a     },.        ).
-00009ef0: 2020 2020 2323 230a 0a0a 4070 7974 6573      ###...@pytes
-00009f00: 742e 6d61 726b 2e61 7379 6e63 696f 0a61  t.mark.asyncio.a
-00009f10: 7379 6e63 2064 6566 2074 6573 745f 6469  sync def test_di
-00009f20: 645f 656e 6470 6f69 6e74 7328 7761 6c6c  d_endpoints(wall
-00009f30: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
-00009f40: 6e74 3a20 5761 6c6c 6574 5270 6354 6573  nt: WalletRpcTes
-00009f50: 7445 6e76 6972 6f6e 6d65 6e74 293a 0a20  tEnvironment):. 
-00009f60: 2020 2065 6e76 3a20 5761 6c6c 6574 5270     env: WalletRp
-00009f70: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
-00009f80: 203d 2077 616c 6c65 745f 7270 635f 656e   = wallet_rpc_en
-00009f90: 7669 726f 6e6d 656e 740a 0a20 2020 2077  vironment..    w
-00009fa0: 616c 6c65 745f 313a 2057 616c 6c65 7420  allet_1: Wallet 
-00009fb0: 3d20 656e 762e 7761 6c6c 6574 5f31 2e77  = env.wallet_1.w
-00009fc0: 616c 6c65 740a 2020 2020 7761 6c6c 6574  allet.    wallet
-00009fd0: 5f32 3a20 5761 6c6c 6574 203d 2065 6e76  _2: Wallet = env
-00009fe0: 2e77 616c 6c65 745f 322e 7761 6c6c 6574  .wallet_2.wallet
-00009ff0: 0a20 2020 2077 616c 6c65 745f 315f 6e6f  .    wallet_1_no
-0000a000: 6465 3a20 5761 6c6c 6574 4e6f 6465 203d  de: WalletNode =
-0000a010: 2065 6e76 2e77 616c 6c65 745f 312e 6e6f   env.wallet_1.no
-0000a020: 6465 0a20 2020 2077 616c 6c65 745f 325f  de.    wallet_2_
-0000a030: 6e6f 6465 3a20 5761 6c6c 6574 4e6f 6465  node: WalletNode
-0000a040: 203d 2065 6e76 2e77 616c 6c65 745f 322e   = env.wallet_2.
-0000a050: 6e6f 6465 0a20 2020 2077 616c 6c65 745f  node.    wallet_
-0000a060: 315f 7270 633a 2057 616c 6c65 7452 7063  1_rpc: WalletRpc
-0000a070: 436c 6965 6e74 203d 2065 6e76 2e77 616c  Client = env.wal
-0000a080: 6c65 745f 312e 7270 635f 636c 6965 6e74  let_1.rpc_client
-0000a090: 0a20 2020 2066 756c 6c5f 6e6f 6465 5f61  .    full_node_a
-0000a0a0: 7069 3a20 4675 6c6c 4e6f 6465 5369 6d75  pi: FullNodeSimu
-0000a0b0: 6c61 746f 7220 3d20 656e 762e 6675 6c6c  lator = env.full
-0000a0c0: 5f6e 6f64 652e 6170 690a 2020 2020 7761  _node.api.    wa
-0000a0d0: 6c6c 6574 5f31 5f69 6420 3d20 7761 6c6c  llet_1_id = wall
-0000a0e0: 6574 5f31 2e69 6428 290a 0a20 2020 2061  et_1.id()..    a
-0000a0f0: 7761 6974 2067 656e 6572 6174 655f 6675  wait generate_fu
-0000a100: 6e64 7328 656e 762e 6675 6c6c 5f6e 6f64  nds(env.full_nod
-0000a110: 652e 6170 692c 2065 6e76 2e77 616c 6c65  e.api, env.walle
-0000a120: 745f 312c 2035 290a 0a20 2020 2023 2043  t_1, 5)..    # C
-0000a130: 7265 6174 6520 6120 4449 4420 7761 6c6c  reate a DID wall
-0000a140: 6574 0a20 2020 2072 6573 203d 2061 7761  et.    res = awa
-0000a150: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
-0000a160: 6372 6561 7465 5f6e 6577 5f64 6964 5f77  create_new_did_w
-0000a170: 616c 6c65 7428 616d 6f75 6e74 3d31 2c20  allet(amount=1, 
-0000a180: 6e61 6d65 3d22 5072 6f66 696c 6520 3122  name="Profile 1"
-0000a190: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
-0000a1a0: 5b22 7375 6363 6573 7322 5d0a 2020 2020  ["success"].    
-0000a1b0: 6469 645f 7761 6c6c 6574 5f69 645f 3020  did_wallet_id_0 
-0000a1c0: 3d20 7265 735b 2277 616c 6c65 745f 6964  = res["wallet_id
-0000a1d0: 225d 0a20 2020 2064 6964 5f69 645f 3020  "].    did_id_0 
-0000a1e0: 3d20 7265 735b 226d 795f 6469 6422 5d0a  = res["my_did"].
-0000a1f0: 0a20 2020 2023 2047 6574 2077 616c 6c65  .    # Get walle
-0000a200: 7420 6e61 6d65 0a20 2020 2072 6573 203d  t name.    res =
-0000a210: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
-0000a220: 7270 632e 6469 645f 6765 745f 7761 6c6c  rpc.did_get_wall
-0000a230: 6574 5f6e 616d 6528 6469 645f 7761 6c6c  et_name(did_wall
-0000a240: 6574 5f69 645f 3029 0a20 2020 2061 7373  et_id_0).    ass
-0000a250: 6572 7420 7265 735b 2273 7563 6365 7373  ert res["success
-0000a260: 225d 0a20 2020 2061 7373 6572 7420 7265  "].    assert re
-0000a270: 735b 226e 616d 6522 5d20 3d3d 2022 5072  s["name"] == "Pr
-0000a280: 6f66 696c 6520 3122 0a20 2020 206e 6674  ofile 1".    nft
-0000a290: 5f77 616c 6c65 743a 2057 616c 6c65 7450  _wallet: WalletP
-0000a2a0: 726f 746f 636f 6c20 3d20 7761 6c6c 6574  rotocol = wallet
-0000a2b0: 5f31 5f6e 6f64 652e 7761 6c6c 6574 5f73  _1_node.wallet_s
-0000a2c0: 7461 7465 5f6d 616e 6167 6572 2e77 616c  tate_manager.wal
-0000a2d0: 6c65 7473 5b64 6964 5f77 616c 6c65 745f  lets[did_wallet_
-0000a2e0: 6964 5f30 202b 2031 5d0a 2020 2020 6173  id_0 + 1].    as
-0000a2f0: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
-0000a300: 6e66 745f 7761 6c6c 6574 2c20 4e46 5457  nft_wallet, NFTW
-0000a310: 616c 6c65 7429 0a20 2020 2061 7373 6572  allet).    asser
-0000a320: 7420 6e66 745f 7761 6c6c 6574 2e67 6574  t nft_wallet.get
-0000a330: 5f6e 616d 6528 2920 3d3d 2022 5072 6f66  _name() == "Prof
-0000a340: 696c 6520 3120 4e46 5420 5761 6c6c 6574  ile 1 NFT Wallet
-0000a350: 220a 0a20 2020 2023 2053 6574 2077 616c  "..    # Set wal
-0000a360: 6c65 7420 6e61 6d65 0a20 2020 206e 6577  let name.    new
-0000a370: 5f77 616c 6c65 745f 6e61 6d65 203d 2022  _wallet_name = "
-0000a380: 7465 7374 206e 616d 6522 0a20 2020 2072  test name".    r
-0000a390: 6573 203d 2061 7761 6974 2077 616c 6c65  es = await walle
-0000a3a0: 745f 315f 7270 632e 6469 645f 7365 745f  t_1_rpc.did_set_
-0000a3b0: 7761 6c6c 6574 5f6e 616d 6528 6469 645f  wallet_name(did_
-0000a3c0: 7761 6c6c 6574 5f69 645f 302c 206e 6577  wallet_id_0, new
-0000a3d0: 5f77 616c 6c65 745f 6e61 6d65 290a 2020  _wallet_name).  
-0000a3e0: 2020 6173 7365 7274 2072 6573 5b22 7375    assert res["su
-0000a3f0: 6363 6573 7322 5d0a 2020 2020 7265 7320  ccess"].    res 
-0000a400: 3d20 6177 6169 7420 7761 6c6c 6574 5f31  = await wallet_1
-0000a410: 5f72 7063 2e64 6964 5f67 6574 5f77 616c  _rpc.did_get_wal
-0000a420: 6c65 745f 6e61 6d65 2864 6964 5f77 616c  let_name(did_wal
-0000a430: 6c65 745f 6964 5f30 290a 2020 2020 6173  let_id_0).    as
-0000a440: 7365 7274 2072 6573 5b22 7375 6363 6573  sert res["succes
-0000a450: 7322 5d0a 2020 2020 6173 7365 7274 2072  s"].    assert r
-0000a460: 6573 5b22 6e61 6d65 225d 203d 3d20 6e65  es["name"] == ne
-0000a470: 775f 7761 6c6c 6574 5f6e 616d 650a 2020  w_wallet_name.  
-0000a480: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
-0000a490: 6973 6573 2856 616c 7565 4572 726f 722c  ises(ValueError,
-0000a4a0: 206d 6174 6368 3d22 7761 6c6c 6574 2069   match="wallet i
-0000a4b0: 6420 3120 6973 206f 6620 7479 7065 2057  d 1 is of type W
-0000a4c0: 616c 6c65 7420 6275 7420 7479 7065 2044  allet but type D
-0000a4d0: 4944 5761 6c6c 6574 2069 7320 7265 7175  IDWallet is requ
-0000a4e0: 6972 6564 2229 3a0a 2020 2020 2020 2020  ired"):.        
-0000a4f0: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
-0000a500: 7063 2e64 6964 5f73 6574 5f77 616c 6c65  pc.did_set_walle
-0000a510: 745f 6e61 6d65 2877 616c 6c65 745f 315f  t_name(wallet_1_
-0000a520: 6964 2c20 6e65 775f 7761 6c6c 6574 5f6e  id, new_wallet_n
-0000a530: 616d 6529 0a0a 2020 2020 2320 4368 6563  ame)..    # Chec
-0000a540: 6b20 4449 4420 4944 0a20 2020 2072 6573  k DID ID.    res
-0000a550: 203d 2061 7761 6974 2077 616c 6c65 745f   = await wallet_
-0000a560: 315f 7270 632e 6765 745f 6469 645f 6964  1_rpc.get_did_id
-0000a570: 2864 6964 5f77 616c 6c65 745f 6964 5f30  (did_wallet_id_0
-0000a580: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
-0000a590: 5b22 7375 6363 6573 7322 5d0a 2020 2020  ["success"].    
-0000a5a0: 6173 7365 7274 2064 6964 5f69 645f 3020  assert did_id_0 
-0000a5b0: 3d3d 2072 6573 5b22 6d79 5f64 6964 225d  == res["my_did"]
-0000a5c0: 0a20 2020 2023 2043 7265 6174 6520 6261  .    # Create ba
-0000a5d0: 636b 7570 2066 696c 650a 2020 2020 7265  ckup file.    re
-0000a5e0: 7320 3d20 6177 6169 7420 7761 6c6c 6574  s = await wallet
-0000a5f0: 5f31 5f72 7063 2e63 7265 6174 655f 6469  _1_rpc.create_di
-0000a600: 645f 6261 636b 7570 5f66 696c 6528 6469  d_backup_file(di
-0000a610: 645f 7761 6c6c 6574 5f69 645f 302c 2022  d_wallet_id_0, "
-0000a620: 6261 636b 7570 2e64 6964 2229 0a20 2020  backup.did").   
-0000a630: 2061 7373 6572 7420 7265 735b 2273 7563   assert res["suc
-0000a640: 6365 7373 225d 0a0a 2020 2020 6177 6169  cess"]..    awai
-0000a650: 7420 7469 6d65 5f6f 7574 5f61 7373 6572  t time_out_asser
-0000a660: 7428 352c 2063 6865 636b 5f6d 656d 706f  t(5, check_mempo
-0000a670: 6f6c 5f73 7065 6e64 5f63 6f75 6e74 2c20  ol_spend_count, 
-0000a680: 5472 7565 2c20 6675 6c6c 5f6e 6f64 655f  True, full_node_
-0000a690: 6170 692c 2031 290a 2020 2020 6177 6169  api, 1).    awai
-0000a6a0: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
-0000a6b0: 6f6e 5f62 6c6f 636b 2866 756c 6c5f 6e6f  on_block(full_no
-0000a6c0: 6465 5f61 7069 2c20 7761 6c6c 6574 5f31  de_api, wallet_1
-0000a6d0: 5f6e 6f64 6529 0a20 2020 2023 2055 7064  _node).    # Upd
-0000a6e0: 6174 6520 7265 636f 7665 7279 206c 6973  ate recovery lis
-0000a6f0: 740a 2020 2020 7265 7320 3d20 6177 6169  t.    res = awai
-0000a700: 7420 7761 6c6c 6574 5f31 5f72 7063 2e75  t wallet_1_rpc.u
-0000a710: 7064 6174 655f 6469 645f 7265 636f 7665  pdate_did_recove
-0000a720: 7279 5f6c 6973 7428 6469 645f 7761 6c6c  ry_list(did_wall
-0000a730: 6574 5f69 645f 302c 205b 6469 645f 6964  et_id_0, [did_id
-0000a740: 5f30 5d2c 2031 290a 2020 2020 6173 7365  _0], 1).    asse
-0000a750: 7274 2072 6573 5b22 7375 6363 6573 7322  rt res["success"
-0000a760: 5d0a 2020 2020 7265 7320 3d20 6177 6169  ].    res = awai
-0000a770: 7420 7761 6c6c 6574 5f31 5f72 7063 2e67  t wallet_1_rpc.g
-0000a780: 6574 5f64 6964 5f72 6563 6f76 6572 795f  et_did_recovery_
-0000a790: 6c69 7374 2864 6964 5f77 616c 6c65 745f  list(did_wallet_
-0000a7a0: 6964 5f30 290a 2020 2020 6173 7365 7274  id_0).    assert
-0000a7b0: 2072 6573 5b22 6e75 6d5f 7265 7175 6972   res["num_requir
-0000a7c0: 6564 225d 203d 3d20 310a 2020 2020 6173  ed"] == 1.    as
-0000a7d0: 7365 7274 2072 6573 5b22 7265 636f 7665  sert res["recove
-0000a7e0: 7279 5f6c 6973 7422 5d5b 305d 203d 3d20  ry_list"][0] == 
-0000a7f0: 6469 645f 6964 5f30 0a0a 2020 2020 6177  did_id_0..    aw
-0000a800: 6169 7420 7469 6d65 5f6f 7574 5f61 7373  ait time_out_ass
-0000a810: 6572 7428 352c 2063 6865 636b 5f6d 656d  ert(5, check_mem
-0000a820: 706f 6f6c 5f73 7065 6e64 5f63 6f75 6e74  pool_spend_count
-0000a830: 2c20 5472 7565 2c20 6675 6c6c 5f6e 6f64  , True, full_nod
-0000a840: 655f 6170 692c 2031 290a 2020 2020 6177  e_api, 1).    aw
-0000a850: 6169 7420 6661 726d 5f74 7261 6e73 6163  ait farm_transac
-0000a860: 7469 6f6e 5f62 6c6f 636b 2866 756c 6c5f  tion_block(full_
-0000a870: 6e6f 6465 5f61 7069 2c20 7761 6c6c 6574  node_api, wallet
-0000a880: 5f31 5f6e 6f64 6529 0a0a 2020 2020 2320  _1_node)..    # 
-0000a890: 5570 6461 7465 206d 6574 6164 6174 610a  Update metadata.
-0000a8a0: 2020 2020 7769 7468 2070 7974 6573 742e      with pytest.
-0000a8b0: 7261 6973 6573 2856 616c 7565 4572 726f  raises(ValueErro
-0000a8c0: 722c 206d 6174 6368 3d22 7761 6c6c 6574  r, match="wallet
-0000a8d0: 2069 6420 3120 6973 206f 6620 7479 7065   id 1 is of type
-0000a8e0: 2057 616c 6c65 7420 6275 7420 7479 7065   Wallet but type
-0000a8f0: 2044 4944 5761 6c6c 6574 2069 7320 7265   DIDWallet is re
-0000a900: 7175 6972 6564 2229 3a0a 2020 2020 2020  quired"):.      
-0000a910: 2020 6177 6169 7420 7761 6c6c 6574 5f31    await wallet_1
-0000a920: 5f72 7063 2e75 7064 6174 655f 6469 645f  _rpc.update_did_
-0000a930: 6d65 7461 6461 7461 2877 616c 6c65 745f  metadata(wallet_
-0000a940: 315f 6964 2c20 7b22 5477 6974 7465 7222  1_id, {"Twitter"
-0000a950: 3a20 2248 7474 7073 3a2f 2f74 6573 7422  : "Https://test"
-0000a960: 7d29 0a20 2020 2072 6573 203d 2061 7761  }).    res = awa
-0000a970: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
-0000a980: 7570 6461 7465 5f64 6964 5f6d 6574 6164  update_did_metad
-0000a990: 6174 6128 6469 645f 7761 6c6c 6574 5f69  ata(did_wallet_i
-0000a9a0: 645f 302c 207b 2254 7769 7474 6572 223a  d_0, {"Twitter":
-0000a9b0: 2022 4874 7470 733a 2f2f 7465 7374 227d   "Https://test"}
-0000a9c0: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
-0000a9d0: 5b22 7375 6363 6573 7322 5d0a 0a20 2020  ["success"]..   
-0000a9e0: 2061 7761 6974 2066 6172 6d5f 7472 616e   await farm_tran
-0000a9f0: 7361 6374 696f 6e5f 626c 6f63 6b28 6675  saction_block(fu
-0000aa00: 6c6c 5f6e 6f64 655f 6170 692c 2077 616c  ll_node_api, wal
-0000aa10: 6c65 745f 315f 6e6f 6465 290a 0a20 2020  let_1_node)..   
-0000aa20: 2072 6573 203d 2061 7761 6974 2077 616c   res = await wal
-0000aa30: 6c65 745f 315f 7270 632e 6765 745f 6469  let_1_rpc.get_di
-0000aa40: 645f 6d65 7461 6461 7461 2864 6964 5f77  d_metadata(did_w
-0000aa50: 616c 6c65 745f 6964 5f30 290a 2020 2020  allet_id_0).    
-0000aa60: 6173 7365 7274 2072 6573 5b22 6d65 7461  assert res["meta
-0000aa70: 6461 7461 225d 5b22 5477 6974 7465 7222  data"]["Twitter"
-0000aa80: 5d20 3d3d 2022 4874 7470 733a 2f2f 7465  ] == "Https://te
-0000aa90: 7374 220a 0a20 2020 2061 7761 6974 2074  st"..    await t
-0000aaa0: 696d 655f 6f75 745f 6173 7365 7274 2835  ime_out_assert(5
-0000aab0: 2c20 6368 6563 6b5f 6d65 6d70 6f6f 6c5f  , check_mempool_
-0000aac0: 7370 656e 645f 636f 756e 742c 2054 7275  spend_count, Tru
-0000aad0: 652c 2066 756c 6c5f 6e6f 6465 5f61 7069  e, full_node_api
-0000aae0: 2c20 3129 0a20 2020 2061 7761 6974 2066  , 1).    await f
-0000aaf0: 6172 6d5f 7472 616e 7361 6374 696f 6e5f  arm_transaction_
-0000ab00: 626c 6f63 6b28 6675 6c6c 5f6e 6f64 655f  block(full_node_
-0000ab10: 6170 692c 2077 616c 6c65 745f 315f 6e6f  api, wallet_1_no
-0000ab20: 6465 290a 0a20 2020 2023 2054 7261 6e73  de)..    # Trans
-0000ab30: 6665 7220 4449 440a 2020 2020 6164 6472  fer DID.    addr
-0000ab40: 203d 2065 6e63 6f64 655f 7075 7a7a 6c65   = encode_puzzle
-0000ab50: 5f68 6173 6828 6177 6169 7420 7761 6c6c  _hash(await wall
-0000ab60: 6574 5f32 2e67 6574 5f6e 6577 5f70 757a  et_2.get_new_puz
-0000ab70: 7a6c 6568 6173 6828 292c 2022 7478 6368  zlehash(), "txch
-0000ab80: 2229 0a20 2020 2072 6573 203d 2061 7761  ").    res = awa
-0000ab90: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
-0000aba0: 6469 645f 7472 616e 7366 6572 5f64 6964  did_transfer_did
-0000abb0: 2864 6964 5f77 616c 6c65 745f 6964 5f30  (did_wallet_id_0
-0000abc0: 2c20 6164 6472 2c20 302c 2054 7275 6529  , addr, 0, True)
-0000abd0: 0a20 2020 2061 7373 6572 7420 7265 735b  .    assert res[
-0000abe0: 2273 7563 6365 7373 225d 0a0a 2020 2020  "success"]..    
-0000abf0: 6177 6169 7420 7469 6d65 5f6f 7574 5f61  await time_out_a
-0000ac00: 7373 6572 7428 352c 2063 6865 636b 5f6d  ssert(5, check_m
-0000ac10: 656d 706f 6f6c 5f73 7065 6e64 5f63 6f75  empool_spend_cou
-0000ac20: 6e74 2c20 5472 7565 2c20 6675 6c6c 5f6e  nt, True, full_n
-0000ac30: 6f64 655f 6170 692c 2031 290a 2020 2020  ode_api, 1).    
-0000ac40: 6177 6169 7420 6661 726d 5f74 7261 6e73  await farm_trans
-0000ac50: 6163 7469 6f6e 5f62 6c6f 636b 2866 756c  action_block(ful
-0000ac60: 6c5f 6e6f 6465 5f61 7069 2c20 7761 6c6c  l_node_api, wall
-0000ac70: 6574 5f31 5f6e 6f64 6529 0a0a 2020 2020  et_1_node)..    
-0000ac80: 6173 796e 6320 6465 6620 6e75 6d5f 7761  async def num_wa
-0000ac90: 6c6c 6574 7328 2920 2d3e 2069 6e74 3a0a  llets() -> int:.
-0000aca0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-0000acb0: 656e 2861 7761 6974 2077 616c 6c65 745f  en(await wallet_
-0000acc0: 325f 6e6f 6465 2e77 616c 6c65 745f 7374  2_node.wallet_st
-0000acd0: 6174 655f 6d61 6e61 6765 722e 6765 745f  ate_manager.get_
-0000ace0: 616c 6c5f 7761 6c6c 6574 5f69 6e66 6f5f  all_wallet_info_
-0000acf0: 656e 7472 6965 7328 2929 0a0a 2020 2020  entries())..    
-0000ad00: 6177 6169 7420 7469 6d65 5f6f 7574 5f61  await time_out_a
-0000ad10: 7373 6572 7428 3330 2c20 6e75 6d5f 7761  ssert(30, num_wa
-0000ad20: 6c6c 6574 732c 2032 290a 0a20 2020 2064  llets, 2)..    d
-0000ad30: 6964 5f77 616c 6c65 7473 203d 206c 6973  id_wallets = lis
-0000ad40: 7428 0a20 2020 2020 2020 2066 696c 7465  t(.        filte
-0000ad50: 7228 0a20 2020 2020 2020 2020 2020 206c  r(.            l
-0000ad60: 616d 6264 6120 773a 2028 772e 7479 7065  ambda w: (w.type
-0000ad70: 203d 3d20 5761 6c6c 6574 5479 7065 2e44   == WalletType.D
-0000ad80: 4543 454e 5452 414c 495a 4544 5f49 4429  ECENTRALIZED_ID)
-0000ad90: 2c0a 2020 2020 2020 2020 2020 2020 6177  ,.            aw
-0000ada0: 6169 7420 7761 6c6c 6574 5f32 5f6e 6f64  ait wallet_2_nod
-0000adb0: 652e 7761 6c6c 6574 5f73 7461 7465 5f6d  e.wallet_state_m
-0000adc0: 616e 6167 6572 2e67 6574 5f61 6c6c 5f77  anager.get_all_w
-0000add0: 616c 6c65 745f 696e 666f 5f65 6e74 7269  allet_info_entri
-0000ade0: 6573 2829 2c0a 2020 2020 2020 2020 290a  es(),.        ).
-0000adf0: 2020 2020 290a 2020 2020 6469 645f 7761      ).    did_wa
-0000ae00: 6c6c 6574 5f32 3a20 5761 6c6c 6574 5072  llet_2: WalletPr
-0000ae10: 6f74 6f63 6f6c 203d 2077 616c 6c65 745f  otocol = wallet_
-0000ae20: 325f 6e6f 6465 2e77 616c 6c65 745f 7374  2_node.wallet_st
-0000ae30: 6174 655f 6d61 6e61 6765 722e 7761 6c6c  ate_manager.wall
-0000ae40: 6574 735b 6469 645f 7761 6c6c 6574 735b  ets[did_wallets[
-0000ae50: 305d 2e69 645d 0a20 2020 2061 7373 6572  0].id].    asser
-0000ae60: 7420 6973 696e 7374 616e 6365 2864 6964  t isinstance(did
-0000ae70: 5f77 616c 6c65 745f 322c 2044 4944 5761  _wallet_2, DIDWa
-0000ae80: 6c6c 6574 290a 2020 2020 6173 7365 7274  llet).    assert
-0000ae90: 2028 0a20 2020 2020 2020 2065 6e63 6f64   (.        encod
-0000aea0: 655f 7075 7a7a 6c65 5f68 6173 6828 6279  e_puzzle_hash(by
-0000aeb0: 7465 7333 322e 6672 6f6d 5f68 6578 7374  tes32.from_hexst
-0000aec0: 7228 6469 645f 7761 6c6c 6574 5f32 2e67  r(did_wallet_2.g
-0000aed0: 6574 5f6d 795f 4449 4428 2929 2c20 4164  et_my_DID()), Ad
-0000aee0: 6472 6573 7354 7970 652e 4449 442e 6872  dressType.DID.hr
-0000aef0: 7028 7761 6c6c 6574 5f32 5f6e 6f64 652e  p(wallet_2_node.
-0000af00: 636f 6e66 6967 2929 0a20 2020 2020 2020  config)).       
-0000af10: 203d 3d20 6469 645f 6964 5f30 0a20 2020   == did_id_0.   
-0000af20: 2029 0a20 2020 206d 6574 6164 6174 6120   ).    metadata 
-0000af30: 3d20 6a73 6f6e 2e6c 6f61 6473 2864 6964  = json.loads(did
-0000af40: 5f77 616c 6c65 745f 322e 6469 645f 696e  _wallet_2.did_in
-0000af50: 666f 2e6d 6574 6164 6174 6129 0a20 2020  fo.metadata).   
-0000af60: 2061 7373 6572 7420 6d65 7461 6461 7461   assert metadata
-0000af70: 5b22 5477 6974 7465 7222 5d20 3d3d 2022  ["Twitter"] == "
-0000af80: 4874 7470 733a 2f2f 7465 7374 220a 0a0a  Https://test"...
-0000af90: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-0000afa0: 6e63 696f 0a61 7379 6e63 2064 6566 2074  ncio.async def t
-0000afb0: 6573 745f 6e66 745f 656e 6470 6f69 6e74  est_nft_endpoint
-0000afc0: 7328 7761 6c6c 6574 5f72 7063 5f65 6e76  s(wallet_rpc_env
-0000afd0: 6972 6f6e 6d65 6e74 3a20 5761 6c6c 6574  ironment: Wallet
-0000afe0: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
-0000aff0: 6e74 293a 0a20 2020 2065 6e76 3a20 5761  nt):.    env: Wa
-0000b000: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
-0000b010: 6f6e 6d65 6e74 203d 2077 616c 6c65 745f  onment = wallet_
-0000b020: 7270 635f 656e 7669 726f 6e6d 656e 740a  rpc_environment.
-0000b030: 2020 2020 7761 6c6c 6574 5f31 5f6e 6f64      wallet_1_nod
-0000b040: 653a 2057 616c 6c65 744e 6f64 6520 3d20  e: WalletNode = 
-0000b050: 656e 762e 7761 6c6c 6574 5f31 2e6e 6f64  env.wallet_1.nod
-0000b060: 650a 2020 2020 7761 6c6c 6574 5f31 5f72  e.    wallet_1_r
-0000b070: 7063 3a20 5761 6c6c 6574 5270 6343 6c69  pc: WalletRpcCli
-0000b080: 656e 7420 3d20 656e 762e 7761 6c6c 6574  ent = env.wallet
-0000b090: 5f31 2e72 7063 5f63 6c69 656e 740a 2020  _1.rpc_client.  
-0000b0a0: 2020 7761 6c6c 6574 5f32 3a20 5761 6c6c    wallet_2: Wall
-0000b0b0: 6574 203d 2065 6e76 2e77 616c 6c65 745f  et = env.wallet_
-0000b0c0: 322e 7761 6c6c 6574 0a20 2020 2077 616c  2.wallet.    wal
-0000b0d0: 6c65 745f 325f 6e6f 6465 3a20 5761 6c6c  let_2_node: Wall
-0000b0e0: 6574 4e6f 6465 203d 2065 6e76 2e77 616c  etNode = env.wal
-0000b0f0: 6c65 745f 322e 6e6f 6465 0a20 2020 2077  let_2.node.    w
-0000b100: 616c 6c65 745f 325f 7270 633a 2057 616c  allet_2_rpc: Wal
-0000b110: 6c65 7452 7063 436c 6965 6e74 203d 2065  letRpcClient = e
-0000b120: 6e76 2e77 616c 6c65 745f 322e 7270 635f  nv.wallet_2.rpc_
-0000b130: 636c 6965 6e74 0a20 2020 2066 756c 6c5f  client.    full_
-0000b140: 6e6f 6465 5f61 7069 3a20 4675 6c6c 4e6f  node_api: FullNo
-0000b150: 6465 5369 6d75 6c61 746f 7220 3d20 656e  deSimulator = en
-0000b160: 762e 6675 6c6c 5f6e 6f64 652e 6170 690a  v.full_node.api.
-0000b170: 0a20 2020 2061 7761 6974 2067 656e 6572  .    await gener
-0000b180: 6174 655f 6675 6e64 7328 656e 762e 6675  ate_funds(env.fu
-0000b190: 6c6c 5f6e 6f64 652e 6170 692c 2065 6e76  ll_node.api, env
-0000b1a0: 2e77 616c 6c65 745f 312c 2035 290a 0a20  .wallet_1, 5).. 
-0000b1b0: 2020 2072 6573 203d 2061 7761 6974 2077     res = await w
-0000b1c0: 616c 6c65 745f 315f 7270 632e 6372 6561  allet_1_rpc.crea
-0000b1d0: 7465 5f6e 6577 5f6e 6674 5f77 616c 6c65  te_new_nft_walle
-0000b1e0: 7428 4e6f 6e65 290a 2020 2020 6e66 745f  t(None).    nft_
-0000b1f0: 7761 6c6c 6574 5f69 6420 3d20 7265 735b  wallet_id = res[
-0000b200: 2277 616c 6c65 745f 6964 225d 0a20 2020  "wallet_id"].   
-0000b210: 2072 6573 203d 2061 7761 6974 2077 616c   res = await wal
-0000b220: 6c65 745f 315f 7270 632e 6d69 6e74 5f6e  let_1_rpc.mint_n
-0000b230: 6674 280a 2020 2020 2020 2020 6e66 745f  ft(.        nft_
-0000b240: 7761 6c6c 6574 5f69 642c 0a20 2020 2020  wallet_id,.     
-0000b250: 2020 204e 6f6e 652c 0a20 2020 2020 2020     None,.       
-0000b260: 204e 6f6e 652c 0a20 2020 2020 2020 2022   None,.        "
-0000b270: 3078 4434 3538 3441 4434 3633 3133 3946  0xD4584AD463139F
-0000b280: 4138 4330 4439 4636 3846 3442 3539 4631  A8C0D9F68F4B59F1
-0000b290: 3835 222c 0a20 2020 2020 2020 205b 2268  85",.        ["h
-0000b2a0: 7474 7073 3a2f 2f77 7777 2e63 6869 612e  ttps://www.chia.
-0000b2b0: 6e65 742f 696d 672f 6272 616e 6469 6e67  net/img/branding
-0000b2c0: 2f63 6869 612d 6c6f 676f 2e73 7667 225d  /chia-logo.svg"]
-0000b2d0: 2c0a 2020 2020 290a 2020 2020 6173 7365  ,.    ).    asse
-0000b2e0: 7274 2072 6573 5b22 7375 6363 6573 7322  rt res["success"
-0000b2f0: 5d0a 0a20 2020 2073 7065 6e64 5f62 756e  ]..    spend_bun
-0000b300: 646c 6520 3d20 5370 656e 6442 756e 646c  dle = SpendBundl
-0000b310: 652e 6672 6f6d 5f6a 736f 6e5f 6469 6374  e.from_json_dict
-0000b320: 286a 736f 6e5f 6469 6374 3d72 6573 5b22  (json_dict=res["
-0000b330: 7370 656e 645f 6275 6e64 6c65 225d 290a  spend_bundle"]).
-0000b340: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
-0000b350: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
-0000b360: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
-0000b370: 745f 315f 6e6f 6465 2c20 7370 656e 645f  t_1_node, spend_
-0000b380: 6275 6e64 6c65 290a 0a20 2020 2061 7761  bundle)..    awa
-0000b390: 6974 2066 756c 6c5f 6e6f 6465 5f61 7069  it full_node_api
-0000b3a0: 2e77 6169 745f 666f 725f 7761 6c6c 6574  .wait_for_wallet
-0000b3b0: 5f73 796e 6365 6428 7761 6c6c 6574 5f6e  _synced(wallet_n
-0000b3c0: 6f64 653d 7761 6c6c 6574 5f31 5f6e 6f64  ode=wallet_1_nod
-0000b3d0: 652c 2074 696d 656f 7574 3d31 3529 0a0a  e, timeout=15)..
-0000b3e0: 2020 2020 6e66 745f 7761 6c6c 6574 3a20      nft_wallet: 
-0000b3f0: 5761 6c6c 6574 5072 6f74 6f63 6f6c 203d  WalletProtocol =
-0000b400: 2077 616c 6c65 745f 315f 6e6f 6465 2e77   wallet_1_node.w
-0000b410: 616c 6c65 745f 7374 6174 655f 6d61 6e61  allet_state_mana
-0000b420: 6765 722e 7761 6c6c 6574 735b 6e66 745f  ger.wallets[nft_
-0000b430: 7761 6c6c 6574 5f69 645d 0a20 2020 2061  wallet_id].    a
-0000b440: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-0000b450: 286e 6674 5f77 616c 6c65 742c 204e 4654  (nft_wallet, NFT
-0000b460: 5761 6c6c 6574 290a 0a20 2020 2061 7379  Wallet)..    asy
-0000b470: 6e63 2064 6566 2068 6176 655f 6e66 7473  nc def have_nfts
-0000b480: 2829 3a0a 2020 2020 2020 2020 7265 7475  ():.        retu
-0000b490: 726e 2061 7761 6974 206e 6674 5f77 616c  rn await nft_wal
-0000b4a0: 6c65 742e 6765 745f 6e66 745f 636f 756e  let.get_nft_coun
-0000b4b0: 7428 2920 3e20 300a 0a20 2020 2061 7761  t() > 0..    awa
-0000b4c0: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
-0000b4d0: 7274 2831 352c 2068 6176 655f 6e66 7473  rt(15, have_nfts
-0000b4e0: 2c20 5472 7565 290a 0a20 2020 2023 2054  , True)..    # T
-0000b4f0: 6573 7420 7769 7468 2074 6865 2068 6578  est with the hex
-0000b500: 2076 6572 7369 6f6e 206f 6620 6e66 745f   version of nft_
-0000b510: 6964 0a20 2020 206e 6674 5f69 6420 3d20  id.    nft_id = 
-0000b520: 2861 7761 6974 206e 6674 5f77 616c 6c65  (await nft_walle
-0000b530: 742e 6765 745f 6375 7272 656e 745f 6e66  t.get_current_nf
-0000b540: 7473 2829 295b 305d 2e63 6f69 6e2e 6e61  ts())[0].coin.na
-0000b550: 6d65 2829 2e68 6578 2829 0a20 2020 206e  me().hex().    n
-0000b560: 6674 5f69 6e66 6f20 3d20 2861 7761 6974  ft_info = (await
-0000b570: 2077 616c 6c65 745f 315f 7270 632e 6765   wallet_1_rpc.ge
-0000b580: 745f 6e66 745f 696e 666f 286e 6674 5f69  t_nft_info(nft_i
-0000b590: 6429 295b 226e 6674 5f69 6e66 6f22 5d0a  d))["nft_info"].
-0000b5a0: 2020 2020 6173 7365 7274 206e 6674 5f69      assert nft_i
-0000b5b0: 6e66 6f5b 226e 6674 5f63 6f69 6e5f 6964  nfo["nft_coin_id
-0000b5c0: 225d 5b32 3a5d 203d 3d20 2861 7761 6974  "][2:] == (await
-0000b5d0: 206e 6674 5f77 616c 6c65 742e 6765 745f   nft_wallet.get_
-0000b5e0: 6375 7272 656e 745f 6e66 7473 2829 295b  current_nfts())[
-0000b5f0: 305d 2e63 6f69 6e2e 6e61 6d65 2829 2e68  0].coin.name().h
-0000b600: 6578 2829 0a20 2020 2023 2054 6573 7420  ex().    # Test 
-0000b610: 7769 7468 2074 6865 2062 6563 6833 326d  with the bech32m
-0000b620: 2076 6572 7369 6f6e 206f 6620 6e66 745f   version of nft_
-0000b630: 6964 0a20 2020 2068 6d72 5f6e 6674 5f69  id.    hmr_nft_i
-0000b640: 6420 3d20 656e 636f 6465 5f70 757a 7a6c  d = encode_puzzl
-0000b650: 655f 6861 7368 280a 2020 2020 2020 2020  e_hash(.        
-0000b660: 2861 7761 6974 206e 6674 5f77 616c 6c65  (await nft_walle
-0000b670: 742e 6765 745f 6375 7272 656e 745f 6e66  t.get_current_nf
-0000b680: 7473 2829 295b 305d 2e63 6f69 6e2e 6e61  ts())[0].coin.na
-0000b690: 6d65 2829 2c20 4164 6472 6573 7354 7970  me(), AddressTyp
-0000b6a0: 652e 4e46 542e 6872 7028 7761 6c6c 6574  e.NFT.hrp(wallet
-0000b6b0: 5f31 5f6e 6f64 652e 636f 6e66 6967 290a  _1_node.config).
-0000b6c0: 2020 2020 290a 2020 2020 6e66 745f 696e      ).    nft_in
-0000b6d0: 666f 203d 2028 6177 6169 7420 7761 6c6c  fo = (await wall
-0000b6e0: 6574 5f31 5f72 7063 2e67 6574 5f6e 6674  et_1_rpc.get_nft
-0000b6f0: 5f69 6e66 6f28 686d 725f 6e66 745f 6964  _info(hmr_nft_id
-0000b700: 2929 5b22 6e66 745f 696e 666f 225d 0a20  ))["nft_info"]. 
-0000b710: 2020 2061 7373 6572 7420 6e66 745f 696e     assert nft_in
-0000b720: 666f 5b22 6e66 745f 636f 696e 5f69 6422  fo["nft_coin_id"
-0000b730: 5d5b 323a 5d20 3d3d 2028 6177 6169 7420  ][2:] == (await 
-0000b740: 6e66 745f 7761 6c6c 6574 2e67 6574 5f63  nft_wallet.get_c
-0000b750: 7572 7265 6e74 5f6e 6674 7328 2929 5b30  urrent_nfts())[0
-0000b760: 5d2e 636f 696e 2e6e 616d 6528 292e 6865  ].coin.name().he
-0000b770: 7828 290a 0a20 2020 2061 6464 7220 3d20  x()..    addr = 
-0000b780: 656e 636f 6465 5f70 757a 7a6c 655f 6861  encode_puzzle_ha
-0000b790: 7368 2861 7761 6974 2077 616c 6c65 745f  sh(await wallet_
-0000b7a0: 322e 6765 745f 6e65 775f 7075 7a7a 6c65  2.get_new_puzzle
-0000b7b0: 6861 7368 2829 2c20 2274 7863 6822 290a  hash(), "txch").
-0000b7c0: 2020 2020 7265 7320 3d20 6177 6169 7420      res = await 
-0000b7d0: 7761 6c6c 6574 5f31 5f72 7063 2e74 7261  wallet_1_rpc.tra
-0000b7e0: 6e73 6665 725f 6e66 7428 6e66 745f 7761  nsfer_nft(nft_wa
-0000b7f0: 6c6c 6574 5f69 642c 206e 6674 5f69 642c  llet_id, nft_id,
-0000b800: 2061 6464 722c 2030 290a 2020 2020 6173   addr, 0).    as
-0000b810: 7365 7274 2072 6573 5b22 7375 6363 6573  sert res["succes
-0000b820: 7322 5d0a 2020 2020 6177 6169 7420 7469  s"].    await ti
-0000b830: 6d65 5f6f 7574 5f61 7373 6572 7428 352c  me_out_assert(5,
-0000b840: 2063 6865 636b 5f6d 656d 706f 6f6c 5f73   check_mempool_s
-0000b850: 7065 6e64 5f63 6f75 6e74 2c20 5472 7565  pend_count, True
-0000b860: 2c20 6675 6c6c 5f6e 6f64 655f 6170 692c  , full_node_api,
-0000b870: 2031 290a 2020 2020 6177 6169 7420 6661   1).    await fa
-0000b880: 726d 5f74 7261 6e73 6163 7469 6f6e 5f62  rm_transaction_b
-0000b890: 6c6f 636b 2866 756c 6c5f 6e6f 6465 5f61  lock(full_node_a
-0000b8a0: 7069 2c20 7761 6c6c 6574 5f31 5f6e 6f64  pi, wallet_1_nod
-0000b8b0: 6529 0a20 2020 2061 7761 6974 2074 696d  e).    await tim
-0000b8c0: 655f 6f75 745f 6173 7365 7274 2835 2c20  e_out_assert(5, 
-0000b8d0: 6368 6563 6b5f 6d65 6d70 6f6f 6c5f 7370  check_mempool_sp
-0000b8e0: 656e 645f 636f 756e 742c 2054 7275 652c  end_count, True,
-0000b8f0: 2066 756c 6c5f 6e6f 6465 5f61 7069 2c20   full_node_api, 
-0000b900: 3029 0a20 2020 2061 7761 6974 2066 756c  0).    await ful
-0000b910: 6c5f 6e6f 6465 5f61 7069 2e77 6169 745f  l_node_api.wait_
-0000b920: 666f 725f 7761 6c6c 6574 5f73 796e 6365  for_wallet_synce
-0000b930: 6428 7761 6c6c 6574 5f6e 6f64 653d 7761  d(wallet_node=wa
-0000b940: 6c6c 6574 5f31 5f6e 6f64 652c 2074 696d  llet_1_node, tim
-0000b950: 656f 7574 3d35 290a 0a20 2020 2061 7761  eout=5)..    awa
-0000b960: 6974 2066 756c 6c5f 6e6f 6465 5f61 7069  it full_node_api
-0000b970: 2e77 6169 745f 666f 725f 7761 6c6c 6574  .wait_for_wallet
-0000b980: 5f73 796e 6365 6428 7761 6c6c 6574 5f6e  _synced(wallet_n
-0000b990: 6f64 653d 7761 6c6c 6574 5f32 5f6e 6f64  ode=wallet_2_nod
-0000b9a0: 652c 2074 696d 656f 7574 3d35 290a 0a20  e, timeout=5).. 
-0000b9b0: 2020 206e 6674 5f77 616c 6c65 745f 6964     nft_wallet_id
-0000b9c0: 5f31 203d 2028 0a20 2020 2020 2020 2061  _1 = (.        a
-0000b9d0: 7761 6974 2077 616c 6c65 745f 325f 6e6f  wait wallet_2_no
-0000b9e0: 6465 2e77 616c 6c65 745f 7374 6174 655f  de.wallet_state_
-0000b9f0: 6d61 6e61 6765 722e 6765 745f 616c 6c5f  manager.get_all_
-0000ba00: 7761 6c6c 6574 5f69 6e66 6f5f 656e 7472  wallet_info_entr
-0000ba10: 6965 7328 7761 6c6c 6574 5f74 7970 653d  ies(wallet_type=
-0000ba20: 5761 6c6c 6574 5479 7065 2e4e 4654 290a  WalletType.NFT).
-0000ba30: 2020 2020 295b 305d 2e69 640a 2020 2020      )[0].id.    
-0000ba40: 6e66 745f 7761 6c6c 6574 5f31 3a20 5761  nft_wallet_1: Wa
-0000ba50: 6c6c 6574 5072 6f74 6f63 6f6c 203d 2077  lletProtocol = w
-0000ba60: 616c 6c65 745f 325f 6e6f 6465 2e77 616c  allet_2_node.wal
-0000ba70: 6c65 745f 7374 6174 655f 6d61 6e61 6765  let_state_manage
-0000ba80: 722e 7761 6c6c 6574 735b 6e66 745f 7761  r.wallets[nft_wa
-0000ba90: 6c6c 6574 5f69 645f 315d 0a20 2020 2061  llet_id_1].    a
-0000baa0: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-0000bab0: 286e 6674 5f77 616c 6c65 745f 312c 204e  (nft_wallet_1, N
-0000bac0: 4654 5761 6c6c 6574 290a 2020 2020 6e66  FTWallet).    nf
-0000bad0: 745f 696e 666f 5f31 203d 2028 6177 6169  t_info_1 = (awai
-0000bae0: 7420 7761 6c6c 6574 5f31 5f72 7063 2e67  t wallet_1_rpc.g
-0000baf0: 6574 5f6e 6674 5f69 6e66 6f28 6e66 745f  et_nft_info(nft_
-0000bb00: 6964 2c20 4661 6c73 6529 295b 226e 6674  id, False))["nft
-0000bb10: 5f69 6e66 6f22 5d0a 2020 2020 6173 7365  _info"].    asse
-0000bb20: 7274 206e 6674 5f69 6e66 6f5f 3120 3d3d  rt nft_info_1 ==
-0000bb30: 206e 6674 5f69 6e66 6f0a 2020 2020 6e66   nft_info.    nf
-0000bb40: 745f 696e 666f 5f31 203d 2028 6177 6169  t_info_1 = (awai
-0000bb50: 7420 7761 6c6c 6574 5f31 5f72 7063 2e67  t wallet_1_rpc.g
-0000bb60: 6574 5f6e 6674 5f69 6e66 6f28 6e66 745f  et_nft_info(nft_
-0000bb70: 6964 2929 5b22 6e66 745f 696e 666f 225d  id))["nft_info"]
-0000bb80: 0a20 2020 2061 7373 6572 7420 6e66 745f  .    assert nft_
-0000bb90: 696e 666f 5f31 5b22 6e66 745f 636f 696e  info_1["nft_coin
-0000bba0: 5f69 6422 5d5b 323a 5d20 3d3d 2028 6177  _id"][2:] == (aw
-0000bbb0: 6169 7420 6e66 745f 7761 6c6c 6574 5f31  ait nft_wallet_1
-0000bbc0: 2e67 6574 5f63 7572 7265 6e74 5f6e 6674  .get_current_nft
-0000bbd0: 7328 2929 5b30 5d2e 636f 696e 2e6e 616d  s())[0].coin.nam
-0000bbe0: 6528 292e 6865 7828 290a 2020 2020 2320  e().hex().    # 
-0000bbf0: 4372 6f73 732d 6368 6563 6b20 4e46 540a  Cross-check NFT.
-0000bc00: 2020 2020 6e66 745f 696e 666f 5f32 203d      nft_info_2 =
-0000bc10: 2028 6177 6169 7420 7761 6c6c 6574 5f32   (await wallet_2
-0000bc20: 5f72 7063 2e6c 6973 745f 6e66 7473 286e  _rpc.list_nfts(n
-0000bc30: 6674 5f77 616c 6c65 745f 6964 5f31 2929  ft_wallet_id_1))
-0000bc40: 5b22 6e66 745f 6c69 7374 225d 5b30 5d0a  ["nft_list"][0].
-0000bc50: 2020 2020 6173 7365 7274 206e 6674 5f69      assert nft_i
-0000bc60: 6e66 6f5f 3120 3d3d 206e 6674 5f69 6e66  nfo_1 == nft_inf
-0000bc70: 6f5f 320a 0a20 2020 2023 2054 6573 7420  o_2..    # Test 
-0000bc80: 726f 7961 6c74 7920 656e 6470 6f69 6e74  royalty endpoint
-0000bc90: 0a20 2020 2072 6f79 616c 7479 5f73 756d  .    royalty_sum
-0000bca0: 6d61 7279 203d 2061 7761 6974 2077 616c  mary = await wal
-0000bcb0: 6c65 745f 315f 7270 632e 6e66 745f 6361  let_1_rpc.nft_ca
-0000bcc0: 6c63 756c 6174 655f 726f 7961 6c74 6965  lculate_royaltie
-0000bcd0: 7328 0a20 2020 2020 2020 207b 0a20 2020  s(.        {.   
-0000bce0: 2020 2020 2020 2020 2022 6d79 2061 7373           "my ass
-0000bcf0: 6574 223a 2028 226d 7920 6164 6472 6573  et": ("my addres
-0000bd00: 7322 2c20 7569 6e74 3136 2831 3030 3030  s", uint16(10000
-0000bd10: 2929 2c0a 2020 2020 2020 2020 7d2c 0a20  )),.        },. 
-0000bd20: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
-0000bd30: 2020 2020 204e 6f6e 653a 2075 696e 7436       None: uint6
-0000bd40: 3428 3130 3030 3029 2c0a 2020 2020 2020  4(10000),.      
-0000bd50: 2020 7d2c 0a20 2020 2029 0a20 2020 2061    },.    ).    a
-0000bd60: 7373 6572 7420 726f 7961 6c74 795f 7375  ssert royalty_su
-0000bd70: 6d6d 6172 7920 3d3d 207b 0a20 2020 2020  mmary == {.     
-0000bd80: 2020 2022 6d79 2061 7373 6574 223a 205b     "my asset": [
-0000bd90: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
-0000bda0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000bdb0: 6173 7365 7422 3a20 4e6f 6e65 2c0a 2020  asset": None,.  
-0000bdc0: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0000bdd0: 6464 7265 7373 223a 2022 6d79 2061 6464  ddress": "my add
-0000bde0: 7265 7373 222c 0a20 2020 2020 2020 2020  ress",.         
-0000bdf0: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-0000be00: 2031 3030 3030 2c0a 2020 2020 2020 2020   10000,.        
-0000be10: 2020 2020 7d0a 2020 2020 2020 2020 5d2c      }.        ],
-0000be20: 0a20 2020 207d 0a0a 0a40 7079 7465 7374  .    }...@pytest
-0000be30: 2e6d 6172 6b2e 6173 796e 6369 6f0a 6173  .mark.asyncio.as
-0000be40: 796e 6320 6465 6620 7465 7374 5f6b 6579  ync def test_key
-0000be50: 5f61 6e64 5f61 6464 7265 7373 5f65 6e64  _and_address_end
-0000be60: 706f 696e 7473 2877 616c 6c65 745f 7270  points(wallet_rp
-0000be70: 635f 656e 7669 726f 6e6d 656e 743a 2057  c_environment: W
-0000be80: 616c 6c65 7452 7063 5465 7374 456e 7669  alletRpcTestEnvi
-0000be90: 726f 6e6d 656e 7429 3a0a 2020 2020 656e  ronment):.    en
-0000bea0: 763a 2057 616c 6c65 7452 7063 5465 7374  v: WalletRpcTest
-0000beb0: 456e 7669 726f 6e6d 656e 7420 3d20 7761  Environment = wa
-0000bec0: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
-0000bed0: 6d65 6e74 0a0a 2020 2020 7761 6c6c 6574  ment..    wallet
-0000bee0: 3a20 5761 6c6c 6574 203d 2065 6e76 2e77  : Wallet = env.w
-0000bef0: 616c 6c65 745f 312e 7761 6c6c 6574 0a20  allet_1.wallet. 
-0000bf00: 2020 2077 616c 6c65 745f 6e6f 6465 3a20     wallet_node: 
-0000bf10: 5761 6c6c 6574 4e6f 6465 203d 2065 6e76  WalletNode = env
-0000bf20: 2e77 616c 6c65 745f 312e 6e6f 6465 0a20  .wallet_1.node. 
-0000bf30: 2020 2063 6c69 656e 743a 2057 616c 6c65     client: Walle
-0000bf40: 7452 7063 436c 6965 6e74 203d 2065 6e76  tRpcClient = env
-0000bf50: 2e77 616c 6c65 745f 312e 7270 635f 636c  .wallet_1.rpc_cl
-0000bf60: 6965 6e74 0a0a 2020 2020 6164 6472 6573  ient..    addres
-0000bf70: 7320 3d20 6177 6169 7420 636c 6965 6e74  s = await client
-0000bf80: 2e67 6574 5f6e 6578 745f 6164 6472 6573  .get_next_addres
-0000bf90: 7328 312c 2054 7275 6529 0a20 2020 2061  s(1, True).    a
-0000bfa0: 7373 6572 7420 6c65 6e28 6164 6472 6573  ssert len(addres
-0000bfb0: 7329 203e 2031 300a 0a20 2020 2070 6b73  s) > 10..    pks
-0000bfc0: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
-0000bfd0: 6765 745f 7075 626c 6963 5f6b 6579 7328  get_public_keys(
-0000bfe0: 290a 2020 2020 6173 7365 7274 206c 656e  ).    assert len
-0000bff0: 2870 6b73 2920 3d3d 2031 0a0a 2020 2020  (pks) == 1..    
-0000c000: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
-0000c010: 756e 6473 2865 6e76 2e66 756c 6c5f 6e6f  unds(env.full_no
-0000c020: 6465 2e61 7069 2c20 656e 762e 7761 6c6c  de.api, env.wall
-0000c030: 6574 5f31 290a 0a20 2020 2061 7373 6572  et_1)..    asser
-0000c040: 7420 2861 7761 6974 2063 6c69 656e 742e  t (await client.
-0000c050: 6765 745f 6865 6967 6874 5f69 6e66 6f28  get_height_info(
-0000c060: 2929 203e 2030 0a0a 2020 2020 7068 203d  )) > 0..    ph =
-0000c070: 2061 7761 6974 2077 616c 6c65 742e 6765   await wallet.ge
-0000c080: 745f 6e65 775f 7075 7a7a 6c65 6861 7368  t_new_puzzlehash
-0000c090: 2829 0a20 2020 2061 6464 7220 3d20 656e  ().    addr = en
-0000c0a0: 636f 6465 5f70 757a 7a6c 655f 6861 7368  code_puzzle_hash
-0000c0b0: 2870 682c 2022 7478 6368 2229 0a20 2020  (ph, "txch").   
-0000c0c0: 2074 785f 616d 6f75 6e74 203d 2075 696e   tx_amount = uin
-0000c0d0: 7436 3428 3135 3630 3030 3030 290a 0a20  t64(15600000).. 
-0000c0e0: 2020 2063 7265 6174 6564 5f74 7820 3d20     created_tx = 
-0000c0f0: 6177 6169 7420 636c 6965 6e74 2e73 656e  await client.sen
-0000c100: 645f 7472 616e 7361 6374 696f 6e28 312c  d_transaction(1,
-0000c110: 2074 785f 616d 6f75 6e74 2c20 6164 6472   tx_amount, addr
-0000c120: 290a 0a20 2020 2061 7761 6974 2074 696d  )..    await tim
-0000c130: 655f 6f75 745f 6173 7365 7274 2832 302c  e_out_assert(20,
-0000c140: 2074 785f 696e 5f6d 656d 706f 6f6c 2c20   tx_in_mempool, 
-0000c150: 5472 7565 2c20 636c 6965 6e74 2c20 6372  True, client, cr
-0000c160: 6561 7465 645f 7478 2e6e 616d 6529 0a20  eated_tx.name). 
-0000c170: 2020 2061 7373 6572 7420 6c65 6e28 6177     assert len(aw
-0000c180: 6169 7420 7761 6c6c 6574 2e77 616c 6c65  ait wallet.walle
-0000c190: 745f 7374 6174 655f 6d61 6e61 6765 722e  t_state_manager.
-0000c1a0: 7478 5f73 746f 7265 2e67 6574 5f75 6e63  tx_store.get_unc
-0000c1b0: 6f6e 6669 726d 6564 5f66 6f72 5f77 616c  onfirmed_for_wal
-0000c1c0: 6c65 7428 3129 2920 3d3d 2031 0a20 2020  let(1)) == 1.   
-0000c1d0: 2061 7761 6974 2063 6c69 656e 742e 6465   await client.de
-0000c1e0: 6c65 7465 5f75 6e63 6f6e 6669 726d 6564  lete_unconfirmed
-0000c1f0: 5f74 7261 6e73 6163 7469 6f6e 7328 3129  _transactions(1)
-0000c200: 0a20 2020 2061 7373 6572 7420 6c65 6e28  .    assert len(
-0000c210: 6177 6169 7420 7761 6c6c 6574 2e77 616c  await wallet.wal
-0000c220: 6c65 745f 7374 6174 655f 6d61 6e61 6765  let_state_manage
-0000c230: 722e 7478 5f73 746f 7265 2e67 6574 5f75  r.tx_store.get_u
-0000c240: 6e63 6f6e 6669 726d 6564 5f66 6f72 5f77  nconfirmed_for_w
-0000c250: 616c 6c65 7428 3129 2920 3d3d 2030 0a0a  allet(1)) == 0..
-0000c260: 2020 2020 736b 5f64 6963 7420 3d20 6177      sk_dict = aw
-0000c270: 6169 7420 636c 6965 6e74 2e67 6574 5f70  ait client.get_p
-0000c280: 7269 7661 7465 5f6b 6579 2870 6b73 5b30  rivate_key(pks[0
-0000c290: 5d29 0a20 2020 2061 7373 6572 7420 736b  ]).    assert sk
-0000c2a0: 5f64 6963 745b 2266 696e 6765 7270 7269  _dict["fingerpri
-0000c2b0: 6e74 225d 203d 3d20 706b 735b 305d 0a20  nt"] == pks[0]. 
-0000c2c0: 2020 2061 7373 6572 7420 736b 5f64 6963     assert sk_dic
-0000c2d0: 745b 2273 6b22 5d20 6973 206e 6f74 204e  t["sk"] is not N
-0000c2e0: 6f6e 650a 2020 2020 6173 7365 7274 2073  one.    assert s
-0000c2f0: 6b5f 6469 6374 5b22 706b 225d 2069 7320  k_dict["pk"] is 
-0000c300: 6e6f 7420 4e6f 6e65 0a20 2020 2061 7373  not None.    ass
-0000c310: 6572 7420 736b 5f64 6963 745b 2273 6565  ert sk_dict["see
-0000c320: 6422 5d20 6973 206e 6f74 204e 6f6e 650a  d"] is not None.
-0000c330: 0a20 2020 206d 6e65 6d6f 6e69 6320 3d20  .    mnemonic = 
-0000c340: 6177 6169 7420 636c 6965 6e74 2e67 656e  await client.gen
-0000c350: 6572 6174 655f 6d6e 656d 6f6e 6963 2829  erate_mnemonic()
-0000c360: 0a20 2020 2061 7373 6572 7420 6c65 6e28  .    assert len(
-0000c370: 6d6e 656d 6f6e 6963 2920 3d3d 2032 340a  mnemonic) == 24.
-0000c380: 0a20 2020 2061 7761 6974 2063 6c69 656e  .    await clien
-0000c390: 742e 6164 645f 6b65 7928 6d6e 656d 6f6e  t.add_key(mnemon
-0000c3a0: 6963 290a 0a20 2020 2070 6b73 203d 2061  ic)..    pks = a
-0000c3b0: 7761 6974 2063 6c69 656e 742e 6765 745f  wait client.get_
-0000c3c0: 7075 626c 6963 5f6b 6579 7328 290a 2020  public_keys().  
-0000c3d0: 2020 6173 7365 7274 206c 656e 2870 6b73    assert len(pks
-0000c3e0: 2920 3d3d 2032 0a0a 2020 2020 6177 6169  ) == 2..    awai
-0000c3f0: 7420 636c 6965 6e74 2e6c 6f67 5f69 6e28  t client.log_in(
-0000c400: 706b 735b 315d 290a 2020 2020 736b 5f64  pks[1]).    sk_d
-0000c410: 6963 7420 3d20 6177 6169 7420 636c 6965  ict = await clie
-0000c420: 6e74 2e67 6574 5f70 7269 7661 7465 5f6b  nt.get_private_k
-0000c430: 6579 2870 6b73 5b31 5d29 0a20 2020 2061  ey(pks[1]).    a
-0000c440: 7373 6572 7420 736b 5f64 6963 745b 2266  ssert sk_dict["f
-0000c450: 696e 6765 7270 7269 6e74 225d 203d 3d20  ingerprint"] == 
-0000c460: 706b 735b 315d 0a0a 2020 2020 2320 4164  pks[1]..    # Ad
-0000c470: 6420 696e 2072 6577 6172 6420 6164 6472  d in reward addr
-0000c480: 6573 7365 7320 696e 746f 2066 6172 6d65  esses into farme
-0000c490: 7220 616e 6420 706f 6f6c 2066 6f72 2074  r and pool for t
-0000c4a0: 6573 7469 6e67 2064 656c 6574 6520 6b65  esting delete ke
-0000c4b0: 7920 6368 6563 6b73 0a20 2020 2023 2073  y checks.    # s
-0000c4c0: 6574 2066 6172 6d65 7220 746f 2066 6972  et farmer to fir
-0000c4d0: 7374 2070 7269 7661 7465 206b 6579 0a20  st private key. 
-0000c4e0: 2020 2073 6b20 3d20 6177 6169 7420 7761     sk = await wa
-0000c4f0: 6c6c 6574 5f6e 6f64 652e 6765 745f 6b65  llet_node.get_ke
-0000c500: 795f 666f 725f 6669 6e67 6572 7072 696e  y_for_fingerprin
-0000c510: 7428 706b 735b 305d 290a 2020 2020 7465  t(pks[0]).    te
-0000c520: 7374 5f70 6820 3d20 6372 6561 7465 5f70  st_ph = create_p
-0000c530: 757a 7a6c 6568 6173 685f 666f 725f 706b  uzzlehash_for_pk
-0000c540: 286d 6173 7465 725f 736b 5f74 6f5f 7761  (master_sk_to_wa
-0000c550: 6c6c 6574 5f73 6b28 736b 2c20 7569 6e74  llet_sk(sk, uint
-0000c560: 3332 2830 2929 2e67 6574 5f67 3128 2929  32(0)).get_g1())
-0000c570: 0a20 2020 2077 6974 6820 6c6f 636b 5f61  .    with lock_a
-0000c580: 6e64 5f6c 6f61 645f 636f 6e66 6967 2877  nd_load_config(w
-0000c590: 616c 6c65 745f 6e6f 6465 2e72 6f6f 745f  allet_node.root_
-0000c5a0: 7061 7468 2c20 2263 6f6e 6669 672e 7961  path, "config.ya
-0000c5b0: 6d6c 2229 2061 7320 7465 7374 5f63 6f6e  ml") as test_con
-0000c5c0: 6669 673a 0a20 2020 2020 2020 2074 6573  fig:.        tes
-0000c5d0: 745f 636f 6e66 6967 5b22 6661 726d 6572  t_config["farmer
-0000c5e0: 225d 5b22 7863 685f 7461 7267 6574 5f61  "]["xch_target_a
-0000c5f0: 6464 7265 7373 225d 203d 2065 6e63 6f64  ddress"] = encod
-0000c600: 655f 7075 7a7a 6c65 5f68 6173 6828 7465  e_puzzle_hash(te
-0000c610: 7374 5f70 682c 2022 7478 6368 2229 0a20  st_ph, "txch"). 
-0000c620: 2020 2020 2020 2023 2073 6574 2070 6f6f         # set poo
-0000c630: 6c20 746f 2073 6563 6f6e 6420 7072 6976  l to second priv
-0000c640: 6174 6520 6b65 790a 2020 2020 2020 2020  ate key.        
-0000c650: 736b 203d 2061 7761 6974 2077 616c 6c65  sk = await walle
-0000c660: 745f 6e6f 6465 2e67 6574 5f6b 6579 5f66  t_node.get_key_f
-0000c670: 6f72 5f66 696e 6765 7270 7269 6e74 2870  or_fingerprint(p
-0000c680: 6b73 5b31 5d29 0a20 2020 2020 2020 2074  ks[1]).        t
-0000c690: 6573 745f 7068 203d 2063 7265 6174 655f  est_ph = create_
-0000c6a0: 7075 7a7a 6c65 6861 7368 5f66 6f72 5f70  puzzlehash_for_p
-0000c6b0: 6b28 6d61 7374 6572 5f73 6b5f 746f 5f77  k(master_sk_to_w
-0000c6c0: 616c 6c65 745f 736b 2873 6b2c 2075 696e  allet_sk(sk, uin
-0000c6d0: 7433 3228 3029 292e 6765 745f 6731 2829  t32(0)).get_g1()
-0000c6e0: 290a 2020 2020 2020 2020 7465 7374 5f63  ).        test_c
-0000c6f0: 6f6e 6669 675b 2270 6f6f 6c22 5d5b 2278  onfig["pool"]["x
-0000c700: 6368 5f74 6172 6765 745f 6164 6472 6573  ch_target_addres
-0000c710: 7322 5d20 3d20 656e 636f 6465 5f70 757a  s"] = encode_puz
-0000c720: 7a6c 655f 6861 7368 2874 6573 745f 7068  zle_hash(test_ph
-0000c730: 2c20 2274 7863 6822 290a 2020 2020 2020  , "txch").      
-0000c740: 2020 7361 7665 5f63 6f6e 6669 6728 7761    save_config(wa
-0000c750: 6c6c 6574 5f6e 6f64 652e 726f 6f74 5f70  llet_node.root_p
-0000c760: 6174 682c 2022 636f 6e66 6967 2e79 616d  ath, "config.yam
-0000c770: 6c22 2c20 7465 7374 5f63 6f6e 6669 6729  l", test_config)
-0000c780: 0a0a 2020 2020 2320 4368 6563 6b20 6669  ..    # Check fi
-0000c790: 7273 7420 6b65 790a 2020 2020 736b 5f64  rst key.    sk_d
-0000c7a0: 6963 7420 3d20 6177 6169 7420 636c 6965  ict = await clie
-0000c7b0: 6e74 2e63 6865 636b 5f64 656c 6574 655f  nt.check_delete_
-0000c7c0: 6b65 7928 706b 735b 305d 290a 2020 2020  key(pks[0]).    
-0000c7d0: 6173 7365 7274 2073 6b5f 6469 6374 5b22  assert sk_dict["
-0000c7e0: 6669 6e67 6572 7072 696e 7422 5d20 3d3d  fingerprint"] ==
-0000c7f0: 2070 6b73 5b30 5d0a 2020 2020 6173 7365   pks[0].    asse
-0000c800: 7274 2073 6b5f 6469 6374 5b22 7573 6564  rt sk_dict["used
-0000c810: 5f66 6f72 5f66 6172 6d65 725f 7265 7761  _for_farmer_rewa
-0000c820: 7264 7322 5d20 6973 2054 7275 650a 2020  rds"] is True.  
-0000c830: 2020 6173 7365 7274 2073 6b5f 6469 6374    assert sk_dict
-0000c840: 5b22 7573 6564 5f66 6f72 5f70 6f6f 6c5f  ["used_for_pool_
-0000c850: 7265 7761 7264 7322 5d20 6973 2046 616c  rewards"] is Fal
-0000c860: 7365 0a0a 2020 2020 2320 4368 6563 6b20  se..    # Check 
-0000c870: 7365 636f 6e64 206b 6579 0a20 2020 2073  second key.    s
-0000c880: 6b5f 6469 6374 203d 2061 7761 6974 2063  k_dict = await c
-0000c890: 6c69 656e 742e 6368 6563 6b5f 6465 6c65  lient.check_dele
-0000c8a0: 7465 5f6b 6579 2870 6b73 5b31 5d29 0a20  te_key(pks[1]). 
-0000c8b0: 2020 2061 7373 6572 7420 736b 5f64 6963     assert sk_dic
-0000c8c0: 745b 2266 696e 6765 7270 7269 6e74 225d  t["fingerprint"]
-0000c8d0: 203d 3d20 706b 735b 315d 0a20 2020 2061   == pks[1].    a
-0000c8e0: 7373 6572 7420 736b 5f64 6963 745b 2275  ssert sk_dict["u
-0000c8f0: 7365 645f 666f 725f 6661 726d 6572 5f72  sed_for_farmer_r
-0000c900: 6577 6172 6473 225d 2069 7320 4661 6c73  ewards"] is Fals
-0000c910: 650a 2020 2020 6173 7365 7274 2073 6b5f  e.    assert sk_
-0000c920: 6469 6374 5b22 7573 6564 5f66 6f72 5f70  dict["used_for_p
-0000c930: 6f6f 6c5f 7265 7761 7264 7322 5d20 6973  ool_rewards"] is
-0000c940: 2054 7275 650a 0a20 2020 2023 2043 6865   True..    # Che
-0000c950: 636b 2075 6e6b 6e6f 776e 206b 6579 0a20  ck unknown key. 
-0000c960: 2020 2073 6b5f 6469 6374 203d 2061 7761     sk_dict = awa
-0000c970: 6974 2063 6c69 656e 742e 6368 6563 6b5f  it client.check_
-0000c980: 6465 6c65 7465 5f6b 6579 2831 3233 3435  delete_key(12345
-0000c990: 362c 2031 3029 0a20 2020 2061 7373 6572  6, 10).    asser
-0000c9a0: 7420 736b 5f64 6963 745b 2266 696e 6765  t sk_dict["finge
-0000c9b0: 7270 7269 6e74 225d 203d 3d20 3132 3334  rprint"] == 1234
-0000c9c0: 3536 0a20 2020 2061 7373 6572 7420 736b  56.    assert sk
-0000c9d0: 5f64 6963 745b 2275 7365 645f 666f 725f  _dict["used_for_
-0000c9e0: 6661 726d 6572 5f72 6577 6172 6473 225d  farmer_rewards"]
-0000c9f0: 2069 7320 4661 6c73 650a 2020 2020 6173   is False.    as
-0000ca00: 7365 7274 2073 6b5f 6469 6374 5b22 7573  sert sk_dict["us
-0000ca10: 6564 5f66 6f72 5f70 6f6f 6c5f 7265 7761  ed_for_pool_rewa
-0000ca20: 7264 7322 5d20 6973 2046 616c 7365 0a0a  rds"] is False..
-0000ca30: 2020 2020 2320 4164 6420 696e 206f 6273      # Add in obs
-0000ca40: 6572 7665 7220 7265 7761 7264 2061 6464  erver reward add
-0000ca50: 7265 7373 6573 2069 6e74 6f20 6661 726d  resses into farm
-0000ca60: 6572 2061 6e64 2070 6f6f 6c20 666f 7220  er and pool for 
-0000ca70: 7465 7374 696e 6720 6465 6c65 7465 206b  testing delete k
-0000ca80: 6579 2063 6865 636b 730a 2020 2020 2320  ey checks.    # 
-0000ca90: 7365 7420 6661 726d 6572 2074 6f20 6669  set farmer to fi
-0000caa0: 7273 7420 7072 6976 6174 6520 6b65 790a  rst private key.
-0000cab0: 2020 2020 736b 203d 2061 7761 6974 2077      sk = await w
-0000cac0: 616c 6c65 745f 6e6f 6465 2e67 6574 5f6b  allet_node.get_k
-0000cad0: 6579 5f66 6f72 5f66 696e 6765 7270 7269  ey_for_fingerpri
-0000cae0: 6e74 2870 6b73 5b30 5d29 0a20 2020 2074  nt(pks[0]).    t
-0000caf0: 6573 745f 7068 203d 2063 7265 6174 655f  est_ph = create_
-0000cb00: 7075 7a7a 6c65 6861 7368 5f66 6f72 5f70  puzzlehash_for_p
-0000cb10: 6b28 6d61 7374 6572 5f73 6b5f 746f 5f77  k(master_sk_to_w
-0000cb20: 616c 6c65 745f 736b 5f75 6e68 6172 6465  allet_sk_unharde
-0000cb30: 6e65 6428 736b 2c20 7569 6e74 3332 2830  ned(sk, uint32(0
-0000cb40: 2929 2e67 6574 5f67 3128 2929 0a20 2020  )).get_g1()).   
-0000cb50: 2077 6974 6820 6c6f 636b 5f61 6e64 5f6c   with lock_and_l
-0000cb60: 6f61 645f 636f 6e66 6967 2877 616c 6c65  oad_config(walle
-0000cb70: 745f 6e6f 6465 2e72 6f6f 745f 7061 7468  t_node.root_path
-0000cb80: 2c20 2263 6f6e 6669 672e 7961 6d6c 2229  , "config.yaml")
-0000cb90: 2061 7320 7465 7374 5f63 6f6e 6669 673a   as test_config:
-0000cba0: 0a20 2020 2020 2020 2074 6573 745f 636f  .        test_co
-0000cbb0: 6e66 6967 5b22 6661 726d 6572 225d 5b22  nfig["farmer"]["
-0000cbc0: 7863 685f 7461 7267 6574 5f61 6464 7265  xch_target_addre
-0000cbd0: 7373 225d 203d 2065 6e63 6f64 655f 7075  ss"] = encode_pu
-0000cbe0: 7a7a 6c65 5f68 6173 6828 7465 7374 5f70  zzle_hash(test_p
-0000cbf0: 682c 2022 7478 6368 2229 0a20 2020 2020  h, "txch").     
-0000cc00: 2020 2023 2073 6574 2070 6f6f 6c20 746f     # set pool to
-0000cc10: 2073 6563 6f6e 6420 7072 6976 6174 6520   second private 
-0000cc20: 6b65 790a 2020 2020 2020 2020 736b 203d  key.        sk =
-0000cc30: 2061 7761 6974 2077 616c 6c65 745f 6e6f   await wallet_no
-0000cc40: 6465 2e67 6574 5f6b 6579 5f66 6f72 5f66  de.get_key_for_f
-0000cc50: 696e 6765 7270 7269 6e74 2870 6b73 5b31  ingerprint(pks[1
-0000cc60: 5d29 0a20 2020 2020 2020 2074 6573 745f  ]).        test_
-0000cc70: 7068 203d 2063 7265 6174 655f 7075 7a7a  ph = create_puzz
-0000cc80: 6c65 6861 7368 5f66 6f72 5f70 6b28 6d61  lehash_for_pk(ma
-0000cc90: 7374 6572 5f73 6b5f 746f 5f77 616c 6c65  ster_sk_to_walle
-0000cca0: 745f 736b 5f75 6e68 6172 6465 6e65 6428  t_sk_unhardened(
-0000ccb0: 736b 2c20 7569 6e74 3332 2830 2929 2e67  sk, uint32(0)).g
-0000ccc0: 6574 5f67 3128 2929 0a20 2020 2020 2020  et_g1()).       
-0000ccd0: 2074 6573 745f 636f 6e66 6967 5b22 706f   test_config["po
-0000cce0: 6f6c 225d 5b22 7863 685f 7461 7267 6574  ol"]["xch_target
-0000ccf0: 5f61 6464 7265 7373 225d 203d 2065 6e63  _address"] = enc
-0000cd00: 6f64 655f 7075 7a7a 6c65 5f68 6173 6828  ode_puzzle_hash(
-0000cd10: 7465 7374 5f70 682c 2022 7478 6368 2229  test_ph, "txch")
-0000cd20: 0a20 2020 2020 2020 2073 6176 655f 636f  .        save_co
-0000cd30: 6e66 6967 2877 616c 6c65 745f 6e6f 6465  nfig(wallet_node
-0000cd40: 2e72 6f6f 745f 7061 7468 2c20 2263 6f6e  .root_path, "con
-0000cd50: 6669 672e 7961 6d6c 222c 2074 6573 745f  fig.yaml", test_
-0000cd60: 636f 6e66 6967 290a 0a20 2020 2023 2043  config)..    # C
-0000cd70: 6865 636b 2066 6972 7374 206b 6579 0a20  heck first key. 
-0000cd80: 2020 2073 6b5f 6469 6374 203d 2061 7761     sk_dict = awa
-0000cd90: 6974 2063 6c69 656e 742e 6368 6563 6b5f  it client.check_
-0000cda0: 6465 6c65 7465 5f6b 6579 2870 6b73 5b30  delete_key(pks[0
-0000cdb0: 5d29 0a20 2020 2061 7373 6572 7420 736b  ]).    assert sk
-0000cdc0: 5f64 6963 745b 2266 696e 6765 7270 7269  _dict["fingerpri
-0000cdd0: 6e74 225d 203d 3d20 706b 735b 305d 0a20  nt"] == pks[0]. 
-0000cde0: 2020 2061 7373 6572 7420 736b 5f64 6963     assert sk_dic
-0000cdf0: 745b 2275 7365 645f 666f 725f 6661 726d  t["used_for_farm
-0000ce00: 6572 5f72 6577 6172 6473 225d 2069 7320  er_rewards"] is 
-0000ce10: 5472 7565 0a20 2020 2061 7373 6572 7420  True.    assert 
-0000ce20: 736b 5f64 6963 745b 2275 7365 645f 666f  sk_dict["used_fo
-0000ce30: 725f 706f 6f6c 5f72 6577 6172 6473 225d  r_pool_rewards"]
-0000ce40: 2069 7320 4661 6c73 650a 0a20 2020 2023   is False..    #
-0000ce50: 2043 6865 636b 2073 6563 6f6e 6420 6b65   Check second ke
-0000ce60: 790a 2020 2020 736b 5f64 6963 7420 3d20  y.    sk_dict = 
-0000ce70: 6177 6169 7420 636c 6965 6e74 2e63 6865  await client.che
-0000ce80: 636b 5f64 656c 6574 655f 6b65 7928 706b  ck_delete_key(pk
-0000ce90: 735b 315d 290a 2020 2020 6173 7365 7274  s[1]).    assert
-0000cea0: 2073 6b5f 6469 6374 5b22 6669 6e67 6572   sk_dict["finger
-0000ceb0: 7072 696e 7422 5d20 3d3d 2070 6b73 5b31  print"] == pks[1
-0000cec0: 5d0a 2020 2020 6173 7365 7274 2073 6b5f  ].    assert sk_
-0000ced0: 6469 6374 5b22 7573 6564 5f66 6f72 5f66  dict["used_for_f
-0000cee0: 6172 6d65 725f 7265 7761 7264 7322 5d20  armer_rewards"] 
-0000cef0: 6973 2046 616c 7365 0a20 2020 2061 7373  is False.    ass
-0000cf00: 6572 7420 736b 5f64 6963 745b 2275 7365  ert sk_dict["use
-0000cf10: 645f 666f 725f 706f 6f6c 5f72 6577 6172  d_for_pool_rewar
-0000cf20: 6473 225d 2069 7320 5472 7565 0a0a 2020  ds"] is True..  
-0000cf30: 2020 2320 4368 6563 6b20 756e 6b6e 6f77    # Check unknow
-0000cf40: 6e20 6b65 790a 2020 2020 736b 5f64 6963  n key.    sk_dic
-0000cf50: 7420 3d20 6177 6169 7420 636c 6965 6e74  t = await client
-0000cf60: 2e63 6865 636b 5f64 656c 6574 655f 6b65  .check_delete_ke
-0000cf70: 7928 3132 3334 3536 2c20 3130 290a 2020  y(123456, 10).  
-0000cf80: 2020 6173 7365 7274 2073 6b5f 6469 6374    assert sk_dict
-0000cf90: 5b22 6669 6e67 6572 7072 696e 7422 5d20  ["fingerprint"] 
-0000cfa0: 3d3d 2031 3233 3435 360a 2020 2020 6173  == 123456.    as
-0000cfb0: 7365 7274 2073 6b5f 6469 6374 5b22 7573  sert sk_dict["us
-0000cfc0: 6564 5f66 6f72 5f66 6172 6d65 725f 7265  ed_for_farmer_re
-0000cfd0: 7761 7264 7322 5d20 6973 2046 616c 7365  wards"] is False
-0000cfe0: 0a20 2020 2061 7373 6572 7420 736b 5f64  .    assert sk_d
-0000cff0: 6963 745b 2275 7365 645f 666f 725f 706f  ict["used_for_po
-0000d000: 6f6c 5f72 6577 6172 6473 225d 2069 7320  ol_rewards"] is 
-0000d010: 4661 6c73 650a 0a20 2020 2061 7761 6974  False..    await
-0000d020: 2063 6c69 656e 742e 6465 6c65 7465 5f6b   client.delete_k
-0000d030: 6579 2870 6b73 5b30 5d29 0a20 2020 2061  ey(pks[0]).    a
-0000d040: 7761 6974 2063 6c69 656e 742e 6c6f 675f  wait client.log_
-0000d050: 696e 2870 6b73 5b31 5d29 0a20 2020 2061  in(pks[1]).    a
-0000d060: 7373 6572 7420 6c65 6e28 6177 6169 7420  ssert len(await 
-0000d070: 636c 6965 6e74 2e67 6574 5f70 7562 6c69  client.get_publi
-0000d080: 635f 6b65 7973 2829 2920 3d3d 2031 0a0a  c_keys()) == 1..
-0000d090: 2020 2020 6173 7365 7274 206e 6f74 2028      assert not (
-0000d0a0: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
-0000d0b0: 5f73 796e 635f 7374 6174 7573 2829 290a  _sync_status()).
-0000d0c0: 0a20 2020 2077 616c 6c65 7473 203d 2061  .    wallets = a
-0000d0d0: 7761 6974 2063 6c69 656e 742e 6765 745f  wait client.get_
-0000d0e0: 7761 6c6c 6574 7328 290a 2020 2020 6173  wallets().    as
-0000d0f0: 7365 7274 206c 656e 2877 616c 6c65 7473  sert len(wallets
-0000d100: 2920 3d3d 2031 0a20 2020 2061 7373 6572  ) == 1.    asser
-0000d110: 7420 6177 6169 7420 6765 745f 756e 636f  t await get_unco
-0000d120: 6e66 6972 6d65 645f 6261 6c61 6e63 6528  nfirmed_balance(
-0000d130: 636c 6965 6e74 2c20 696e 7428 7761 6c6c  client, int(wall
-0000d140: 6574 735b 305d 5b22 6964 225d 2929 203d  ets[0]["id"])) =
-0000d150: 3d20 300a 0a20 2020 2077 6974 6820 7079  = 0..    with py
-0000d160: 7465 7374 2e72 6169 7365 7328 5661 6c75  test.raises(Valu
-0000d170: 6545 7272 6f72 293a 0a20 2020 2020 2020  eError):.       
-0000d180: 2061 7761 6974 2063 6c69 656e 742e 7365   await client.se
-0000d190: 6e64 5f74 7261 6e73 6163 7469 6f6e 2877  nd_transaction(w
-0000d1a0: 616c 6c65 7473 5b30 5d5b 2269 6422 5d2c  allets[0]["id"],
-0000d1b0: 2075 696e 7436 3428 3130 3029 2c20 6164   uint64(100), ad
-0000d1c0: 6472 290a 0a20 2020 2023 2044 656c 6574  dr)..    # Delet
-0000d1d0: 6520 616c 6c20 6b65 7973 0a20 2020 2061  e all keys.    a
-0000d1e0: 7761 6974 2063 6c69 656e 742e 6465 6c65  wait client.dele
-0000d1f0: 7465 5f61 6c6c 5f6b 6579 7328 290a 2020  te_all_keys().  
-0000d200: 2020 6173 7365 7274 206c 656e 2861 7761    assert len(awa
-0000d210: 6974 2063 6c69 656e 742e 6765 745f 7075  it client.get_pu
-0000d220: 626c 6963 5f6b 6579 7328 2929 203d 3d20  blic_keys()) == 
-0000d230: 300a 0a0a 4070 7974 6573 742e 6d61 726b  0...@pytest.mark
-0000d240: 2e61 7379 6e63 696f 0a61 7379 6e63 2064  .asyncio.async d
-0000d250: 6566 2074 6573 745f 7365 6c65 6374 5f63  ef test_select_c
-0000d260: 6f69 6e73 5f72 7063 2877 616c 6c65 745f  oins_rpc(wallet_
-0000d270: 7270 635f 656e 7669 726f 6e6d 656e 743a  rpc_environment:
-0000d280: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
-0000d290: 7669 726f 6e6d 656e 7429 3a0a 2020 2020  vironment):.    
-0000d2a0: 656e 763a 2057 616c 6c65 7452 7063 5465  env: WalletRpcTe
-0000d2b0: 7374 456e 7669 726f 6e6d 656e 7420 3d20  stEnvironment = 
-0000d2c0: 7761 6c6c 6574 5f72 7063 5f65 6e76 6972  wallet_rpc_envir
-0000d2d0: 6f6e 6d65 6e74 0a0a 2020 2020 7761 6c6c  onment..    wall
-0000d2e0: 6574 5f32 3a20 5761 6c6c 6574 203d 2065  et_2: Wallet = e
-0000d2f0: 6e76 2e77 616c 6c65 745f 322e 7761 6c6c  nv.wallet_2.wall
-0000d300: 6574 0a20 2020 2077 616c 6c65 745f 6e6f  et.    wallet_no
-0000d310: 6465 3a20 5761 6c6c 6574 4e6f 6465 203d  de: WalletNode =
-0000d320: 2065 6e76 2e77 616c 6c65 745f 312e 6e6f   env.wallet_1.no
-0000d330: 6465 0a20 2020 2066 756c 6c5f 6e6f 6465  de.    full_node
-0000d340: 5f61 7069 3a20 4675 6c6c 4e6f 6465 5369  _api: FullNodeSi
-0000d350: 6d75 6c61 746f 7220 3d20 656e 762e 6675  mulator = env.fu
-0000d360: 6c6c 5f6e 6f64 652e 6170 690a 2020 2020  ll_node.api.    
-0000d370: 636c 6965 6e74 3a20 5761 6c6c 6574 5270  client: WalletRp
-0000d380: 6343 6c69 656e 7420 3d20 656e 762e 7761  cClient = env.wa
-0000d390: 6c6c 6574 5f31 2e72 7063 5f63 6c69 656e  llet_1.rpc_clien
-0000d3a0: 740a 2020 2020 636c 6965 6e74 5f32 3a20  t.    client_2: 
-0000d3b0: 5761 6c6c 6574 5270 6343 6c69 656e 7420  WalletRpcClient 
-0000d3c0: 3d20 656e 762e 7761 6c6c 6574 5f32 2e72  = env.wallet_2.r
-0000d3d0: 7063 5f63 6c69 656e 740a 0a20 2020 2066  pc_client..    f
-0000d3e0: 756e 6473 203d 2061 7761 6974 2067 656e  unds = await gen
-0000d3f0: 6572 6174 655f 6675 6e64 7328 6675 6c6c  erate_funds(full
-0000d400: 5f6e 6f64 655f 6170 692c 2065 6e76 2e77  _node_api, env.w
-0000d410: 616c 6c65 745f 3129 0a0a 2020 2020 6164  allet_1)..    ad
-0000d420: 6472 203d 2065 6e63 6f64 655f 7075 7a7a  dr = encode_puzz
-0000d430: 6c65 5f68 6173 6828 6177 6169 7420 7761  le_hash(await wa
-0000d440: 6c6c 6574 5f32 2e67 6574 5f6e 6577 5f70  llet_2.get_new_p
-0000d450: 757a 7a6c 6568 6173 6828 292c 2022 7478  uzzlehash(), "tx
-0000d460: 6368 2229 0a20 2020 2063 6f69 6e5f 3330  ch").    coin_30
-0000d470: 303a 204c 6973 745b 436f 696e 5d0a 2020  0: List[Coin].  
-0000d480: 2020 666f 7220 7478 5f61 6d6f 756e 7420    for tx_amount 
-0000d490: 696e 205b 7569 6e74 3634 2831 3030 3029  in [uint64(1000)
-0000d4a0: 2c20 7569 6e74 3634 2833 3030 292c 2075  , uint64(300), u
-0000d4b0: 696e 7436 3428 3130 3030 292c 2075 696e  int64(1000), uin
-0000d4c0: 7436 3428 3130 3030 292c 2075 696e 7436  t64(1000), uint6
-0000d4d0: 3428 3130 3030 3029 5d3a 0a20 2020 2020  4(10000)]:.     
-0000d4e0: 2020 2066 756e 6473 202d 3d20 7478 5f61     funds -= tx_a
-0000d4f0: 6d6f 756e 740a 2020 2020 2020 2020 2320  mount.        # 
-0000d500: 6372 6561 7465 2063 6f69 6e73 2066 6f72  create coins for
-0000d510: 2074 6573 7473 0a20 2020 2020 2020 2074   tests.        t
-0000d520: 7820 3d20 6177 6169 7420 636c 6965 6e74  x = await client
-0000d530: 2e73 656e 645f 7472 616e 7361 6374 696f  .send_transactio
-0000d540: 6e28 312c 2074 785f 616d 6f75 6e74 2c20  n(1, tx_amount, 
-0000d550: 6164 6472 290a 2020 2020 2020 2020 7370  addr).        sp
-0000d560: 656e 645f 6275 6e64 6c65 203d 2074 782e  end_bundle = tx.
-0000d570: 7370 656e 645f 6275 6e64 6c65 0a20 2020  spend_bundle.   
-0000d580: 2020 2020 2061 7373 6572 7420 7370 656e       assert spen
-0000d590: 645f 6275 6e64 6c65 2069 7320 6e6f 7420  d_bundle is not 
-0000d5a0: 4e6f 6e65 0a20 2020 2020 2020 2066 6f72  None.        for
-0000d5b0: 2063 6f69 6e20 696e 2073 7065 6e64 5f62   coin in spend_b
-0000d5c0: 756e 646c 652e 6164 6469 7469 6f6e 7328  undle.additions(
-0000d5d0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-0000d5e0: 6620 636f 696e 2e61 6d6f 756e 7420 3d3d  f coin.amount ==
-0000d5f0: 2075 696e 7436 3428 3330 3029 3a0a 2020   uint64(300):.  
-0000d600: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0000d610: 696e 5f33 3030 203d 205b 636f 696e 5d0a  in_300 = [coin].
-0000d620: 0a20 2020 2020 2020 2061 7761 6974 2074  .        await t
-0000d630: 696d 655f 6f75 745f 6173 7365 7274 2832  ime_out_assert(2
-0000d640: 302c 2074 785f 696e 5f6d 656d 706f 6f6c  0, tx_in_mempool
-0000d650: 2c20 5472 7565 2c20 636c 6965 6e74 2c20  , True, client, 
-0000d660: 7478 2e6e 616d 6529 0a20 2020 2020 2020  tx.name).       
-0000d670: 2061 7761 6974 2066 6172 6d5f 7472 616e   await farm_tran
-0000d680: 7361 6374 696f 6e28 6675 6c6c 5f6e 6f64  saction(full_nod
-0000d690: 655f 6170 692c 2077 616c 6c65 745f 6e6f  e_api, wallet_no
-0000d6a0: 6465 2c20 7370 656e 645f 6275 6e64 6c65  de, spend_bundle
-0000d6b0: 290a 2020 2020 2020 2020 6177 6169 7420  ).        await 
-0000d6c0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
-0000d6d0: 3230 2c20 6765 745f 636f 6e66 6972 6d65  20, get_confirme
-0000d6e0: 645f 6261 6c61 6e63 652c 2066 756e 6473  d_balance, funds
-0000d6f0: 2c20 636c 6965 6e74 2c20 3129 0a0a 2020  , client, 1)..  
-0000d700: 2020 2320 7465 7374 206d 696e 2063 6f69    # test min coi
-0000d710: 6e20 616d 6f75 6e74 0a20 2020 206d 696e  n amount.    min
-0000d720: 5f63 6f69 6e73 3a20 4c69 7374 5b43 6f69  _coins: List[Coi
-0000d730: 6e5d 203d 2061 7761 6974 2063 6c69 656e  n] = await clien
-0000d740: 745f 322e 7365 6c65 6374 5f63 6f69 6e73  t_2.select_coins
-0000d750: 2861 6d6f 756e 743d 3130 3030 2c20 7761  (amount=1000, wa
-0000d760: 6c6c 6574 5f69 643d 312c 206d 696e 5f63  llet_id=1, min_c
-0000d770: 6f69 6e5f 616d 6f75 6e74 3d75 696e 7436  oin_amount=uint6
-0000d780: 3428 3130 3031 2929 0a20 2020 2061 7373  4(1001)).    ass
-0000d790: 6572 7420 6d69 6e5f 636f 696e 7320 6973  ert min_coins is
-0000d7a0: 206e 6f74 204e 6f6e 650a 2020 2020 6173   not None.    as
-0000d7b0: 7365 7274 206c 656e 286d 696e 5f63 6f69  sert len(min_coi
-0000d7c0: 6e73 2920 3d3d 2031 2061 6e64 206d 696e  ns) == 1 and min
-0000d7d0: 5f63 6f69 6e73 5b30 5d2e 616d 6f75 6e74  _coins[0].amount
-0000d7e0: 203d 3d20 7569 6e74 3634 2831 3030 3030   == uint64(10000
-0000d7f0: 290a 0a20 2020 2023 2074 6573 7420 6d61  )..    # test ma
-0000d800: 7820 636f 696e 2061 6d6f 756e 740a 2020  x coin amount.  
-0000d810: 2020 6d61 785f 636f 696e 733a 204c 6973    max_coins: Lis
-0000d820: 745b 436f 696e 5d20 3d20 6177 6169 7420  t[Coin] = await 
-0000d830: 636c 6965 6e74 5f32 2e73 656c 6563 745f  client_2.select_
-0000d840: 636f 696e 7328 0a20 2020 2020 2020 2061  coins(.        a
-0000d850: 6d6f 756e 743d 3230 3030 2c20 7761 6c6c  mount=2000, wall
-0000d860: 6574 5f69 643d 312c 206d 696e 5f63 6f69  et_id=1, min_coi
-0000d870: 6e5f 616d 6f75 6e74 3d75 696e 7436 3428  n_amount=uint64(
-0000d880: 3939 3929 2c20 6d61 785f 636f 696e 5f61  999), max_coin_a
-0000d890: 6d6f 756e 743d 7569 6e74 3634 2839 3939  mount=uint64(999
-0000d8a0: 3929 0a20 2020 2029 0a20 2020 2061 7373  9).    ).    ass
-0000d8b0: 6572 7420 6d61 785f 636f 696e 7320 6973  ert max_coins is
-0000d8c0: 206e 6f74 204e 6f6e 650a 2020 2020 6173   not None.    as
-0000d8d0: 7365 7274 206c 656e 286d 6178 5f63 6f69  sert len(max_coi
-0000d8e0: 6e73 2920 3d3d 2032 2061 6e64 206d 6178  ns) == 2 and max
-0000d8f0: 5f63 6f69 6e73 5b30 5d2e 616d 6f75 6e74  _coins[0].amount
-0000d900: 203d 3d20 7569 6e74 3634 2831 3030 3029   == uint64(1000)
-0000d910: 0a0a 2020 2020 2320 7465 7374 2065 7863  ..    # test exc
-0000d920: 6c75 6465 6420 636f 696e 2061 6d6f 756e  luded coin amoun
-0000d930: 7473 0a20 2020 2065 7863 6c75 6465 645f  ts.    excluded_
-0000d940: 616d 745f 636f 696e 733a 204c 6973 745b  amt_coins: List[
-0000d950: 436f 696e 5d20 3d20 6177 6169 7420 636c  Coin] = await cl
-0000d960: 6965 6e74 5f32 2e73 656c 6563 745f 636f  ient_2.select_co
-0000d970: 696e 7328 0a20 2020 2020 2020 2061 6d6f  ins(.        amo
-0000d980: 756e 743d 3130 3030 2c20 7761 6c6c 6574  unt=1000, wallet
-0000d990: 5f69 643d 312c 2065 7863 6c75 6465 645f  _id=1, excluded_
-0000d9a0: 616d 6f75 6e74 733d 5b75 696e 7436 3428  amounts=[uint64(
-0000d9b0: 3130 3030 295d 0a20 2020 2029 0a20 2020  1000)].    ).   
-0000d9c0: 2061 7373 6572 7420 6578 636c 7564 6564   assert excluded
-0000d9d0: 5f61 6d74 5f63 6f69 6e73 2069 7320 6e6f  _amt_coins is no
-0000d9e0: 7420 4e6f 6e65 0a20 2020 2061 7373 6572  t None.    asser
-0000d9f0: 7420 6c65 6e28 6578 636c 7564 6564 5f61  t len(excluded_a
-0000da00: 6d74 5f63 6f69 6e73 2920 3d3d 2031 2061  mt_coins) == 1 a
-0000da10: 6e64 2065 7863 6c75 6465 645f 616d 745f  nd excluded_amt_
-0000da20: 636f 696e 735b 305d 2e61 6d6f 756e 7420  coins[0].amount 
-0000da30: 3d3d 2075 696e 7436 3428 3130 3030 3029  == uint64(10000)
-0000da40: 0a0a 2020 2020 2320 7465 7374 2065 7863  ..    # test exc
-0000da50: 6c75 6465 6420 636f 696e 730a 2020 2020  luded coins.    
-0000da60: 7769 7468 2070 7974 6573 742e 7261 6973  with pytest.rais
-0000da70: 6573 2856 616c 7565 4572 726f 7229 3a0a  es(ValueError):.
-0000da80: 2020 2020 2020 2020 6177 6169 7420 636c          await cl
-0000da90: 6965 6e74 5f32 2e73 656c 6563 745f 636f  ient_2.select_co
-0000daa0: 696e 7328 616d 6f75 6e74 3d35 3030 302c  ins(amount=5000,
-0000dab0: 2077 616c 6c65 745f 6964 3d31 2c20 6578   wallet_id=1, ex
-0000dac0: 636c 7564 6564 5f63 6f69 6e73 3d6d 696e  cluded_coins=min
-0000dad0: 5f63 6f69 6e73 290a 2020 2020 6578 636c  _coins).    excl
-0000dae0: 7564 6564 5f74 6573 7420 3d20 6177 6169  uded_test = awai
-0000daf0: 7420 636c 6965 6e74 5f32 2e73 656c 6563  t client_2.selec
-0000db00: 745f 636f 696e 7328 616d 6f75 6e74 3d31  t_coins(amount=1
-0000db10: 3330 302c 2077 616c 6c65 745f 6964 3d31  300, wallet_id=1
-0000db20: 2c20 6578 636c 7564 6564 5f63 6f69 6e73  , excluded_coins
-0000db30: 3d63 6f69 6e5f 3330 3029 0a20 2020 2061  =coin_300).    a
-0000db40: 7373 6572 7420 6c65 6e28 6578 636c 7564  ssert len(exclud
-0000db50: 6564 5f74 6573 7429 203d 3d20 320a 2020  ed_test) == 2.  
-0000db60: 2020 666f 7220 636f 696e 2069 6e20 6578    for coin in ex
-0000db70: 636c 7564 6564 5f74 6573 743a 0a20 2020  cluded_test:.   
-0000db80: 2020 2020 2061 7373 6572 7420 636f 696e       assert coin
-0000db90: 2021 3d20 636f 696e 5f33 3030 5b30 5d0a   != coin_300[0].
-0000dba0: 0a20 2020 2023 2074 6573 7420 6765 7420  .    # test get 
-0000dbb0: 636f 696e 730a 2020 2020 616c 6c5f 636f  coins.    all_co
-0000dbc0: 696e 732c 205f 2c20 5f20 3d20 6177 6169  ins, _, _ = awai
-0000dbd0: 7420 636c 6965 6e74 5f32 2e67 6574 5f73  t client_2.get_s
-0000dbe0: 7065 6e64 6162 6c65 5f63 6f69 6e73 280a  pendable_coins(.
-0000dbf0: 2020 2020 2020 2020 7761 6c6c 6574 5f69          wallet_i
-0000dc00: 643d 312c 2065 7863 6c75 6465 645f 636f  d=1, excluded_co
-0000dc10: 696e 5f69 6473 3d5b 6578 636c 7564 6564  in_ids=[excluded
-0000dc20: 5f61 6d74 5f63 6f69 6e73 5b30 5d2e 6e61  _amt_coins[0].na
-0000dc30: 6d65 2829 2e68 6578 2829 5d0a 2020 2020  me().hex()].    
-0000dc40: 290a 2020 2020 6173 7365 7274 2065 7863  ).    assert exc
-0000dc50: 6c75 6465 645f 616d 745f 636f 696e 7320  luded_amt_coins 
-0000dc60: 6e6f 7420 696e 2061 6c6c 5f63 6f69 6e73  not in all_coins
-0000dc70: 0a20 2020 2061 6c6c 5f63 6f69 6e73 5f32  .    all_coins_2
-0000dc80: 2c20 5f2c 205f 203d 2061 7761 6974 2063  , _, _ = await c
-0000dc90: 6c69 656e 745f 322e 6765 745f 7370 656e  lient_2.get_spen
-0000dca0: 6461 626c 655f 636f 696e 7328 7761 6c6c  dable_coins(wall
-0000dcb0: 6574 5f69 643d 312c 206d 6178 5f63 6f69  et_id=1, max_coi
-0000dcc0: 6e5f 616d 6f75 6e74 3d75 696e 7436 3428  n_amount=uint64(
-0000dcd0: 3939 3929 290a 2020 2020 6173 7365 7274  999)).    assert
-0000dce0: 2061 6c6c 5f63 6f69 6e73 5f32 5b30 5d2e   all_coins_2[0].
-0000dcf0: 636f 696e 203d 3d20 636f 696e 5f33 3030  coin == coin_300
-0000dd00: 5b30 5d0a 2020 2020 7769 7468 2070 7974  [0].    with pyt
-0000dd10: 6573 742e 7261 6973 6573 2856 616c 7565  est.raises(Value
-0000dd20: 4572 726f 7229 3a20 2023 2076 616c 6964  Error):  # valid
-0000dd30: 6174 6520 6661 696c 206f 6e20 696e 7661  ate fail on inva
-0000dd40: 6c69 6420 636f 696e 2069 642e 0a20 2020  lid coin id..   
-0000dd50: 2020 2020 2061 7761 6974 2063 6c69 656e       await clien
-0000dd60: 745f 322e 6765 745f 7370 656e 6461 626c  t_2.get_spendabl
-0000dd70: 655f 636f 696e 7328 7761 6c6c 6574 5f69  e_coins(wallet_i
-0000dd80: 643d 312c 2065 7863 6c75 6465 645f 636f  d=1, excluded_co
-0000dd90: 696e 5f69 6473 3d5b 2261 225d 290a 0a0a  in_ids=["a"])...
-0000dda0: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-0000ddb0: 6e63 696f 0a61 7379 6e63 2064 6566 2074  ncio.async def t
-0000ddc0: 6573 745f 6e6f 7469 6669 6361 7469 6f6e  est_notification
-0000ddd0: 5f72 7063 7328 7761 6c6c 6574 5f72 7063  _rpcs(wallet_rpc
-0000dde0: 5f65 6e76 6972 6f6e 6d65 6e74 3a20 5761  _environment: Wa
-0000ddf0: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
-0000de00: 6f6e 6d65 6e74 293a 0a20 2020 2065 6e76  onment):.    env
-0000de10: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
-0000de20: 6e76 6972 6f6e 6d65 6e74 203d 2077 616c  nvironment = wal
-0000de30: 6c65 745f 7270 635f 656e 7669 726f 6e6d  let_rpc_environm
-0000de40: 656e 740a 0a20 2020 2077 616c 6c65 745f  ent..    wallet_
-0000de50: 323a 2057 616c 6c65 7420 3d20 656e 762e  2: Wallet = env.
-0000de60: 7761 6c6c 6574 5f32 2e77 616c 6c65 740a  wallet_2.wallet.
-0000de70: 2020 2020 7761 6c6c 6574 5f6e 6f64 653a      wallet_node:
-0000de80: 2057 616c 6c65 744e 6f64 6520 3d20 656e   WalletNode = en
-0000de90: 762e 7761 6c6c 6574 5f31 2e6e 6f64 650a  v.wallet_1.node.
-0000dea0: 2020 2020 6675 6c6c 5f6e 6f64 655f 6170      full_node_ap
-0000deb0: 693a 2046 756c 6c4e 6f64 6553 696d 756c  i: FullNodeSimul
-0000dec0: 6174 6f72 203d 2065 6e76 2e66 756c 6c5f  ator = env.full_
-0000ded0: 6e6f 6465 2e61 7069 0a20 2020 2063 6c69  node.api.    cli
-0000dee0: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
-0000def0: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
-0000df00: 745f 312e 7270 635f 636c 6965 6e74 0a20  t_1.rpc_client. 
-0000df10: 2020 2063 6c69 656e 745f 323a 2057 616c     client_2: Wal
-0000df20: 6c65 7452 7063 436c 6965 6e74 203d 2065  letRpcClient = e
-0000df30: 6e76 2e77 616c 6c65 745f 322e 7270 635f  nv.wallet_2.rpc_
-0000df40: 636c 6965 6e74 0a0a 2020 2020 6177 6169  client..    awai
-0000df50: 7420 6765 6e65 7261 7465 5f66 756e 6473  t generate_funds
-0000df60: 2866 756c 6c5f 6e6f 6465 5f61 7069 2c20  (full_node_api, 
-0000df70: 656e 762e 7761 6c6c 6574 5f31 290a 0a20  env.wallet_1).. 
-0000df80: 2020 2065 6e76 2e77 616c 6c65 745f 322e     env.wallet_2.
-0000df90: 6e6f 6465 2e63 6f6e 6669 675b 2265 6e61  node.config["ena
-0000dfa0: 626c 655f 6e6f 7469 6669 6361 7469 6f6e  ble_notification
-0000dfb0: 7322 5d20 3d20 5472 7565 0a20 2020 2065  s"] = True.    e
-0000dfc0: 6e76 2e77 616c 6c65 745f 322e 6e6f 6465  nv.wallet_2.node
-0000dfd0: 2e63 6f6e 6669 675b 2272 6571 7569 7265  .config["require
-0000dfe0: 645f 6e6f 7469 6669 6361 7469 6f6e 5f61  d_notification_a
-0000dff0: 6d6f 756e 7422 5d20 3d20 3130 3030 3030  mount"] = 100000
-0000e000: 3030 3030 3030 0a20 2020 2074 7820 3d20  000000.    tx = 
-0000e010: 6177 6169 7420 636c 6965 6e74 2e73 656e  await client.sen
-0000e020: 645f 6e6f 7469 6669 6361 7469 6f6e 280a  d_notification(.
-0000e030: 2020 2020 2020 2020 6177 6169 7420 7761          await wa
-0000e040: 6c6c 6574 5f32 2e67 6574 5f6e 6577 5f70  llet_2.get_new_p
-0000e050: 757a 7a6c 6568 6173 6828 292c 0a20 2020  uzzlehash(),.   
-0000e060: 2020 2020 2062 2268 656c 6c6f 222c 0a20       b"hello",. 
-0000e070: 2020 2020 2020 2075 696e 7436 3428 3130         uint64(10
-0000e080: 3030 3030 3030 3030 3030 292c 0a20 2020  0000000000),.   
-0000e090: 2020 2020 2066 6565 3d75 696e 7436 3428       fee=uint64(
-0000e0a0: 3130 3030 3030 3030 3030 3030 292c 0a20  100000000000),. 
-0000e0b0: 2020 2029 0a0a 2020 2020 6173 7365 7274     )..    assert
-0000e0c0: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
-0000e0d0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-0000e0e0: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
-0000e0f0: 6173 7365 7274 280a 2020 2020 2020 2020  assert(.        
-0000e100: 352c 0a20 2020 2020 2020 2066 756c 6c5f  5,.        full_
-0000e110: 6e6f 6465 5f61 7069 2e66 756c 6c5f 6e6f  node_api.full_no
-0000e120: 6465 2e6d 656d 706f 6f6c 5f6d 616e 6167  de.mempool_manag
-0000e130: 6572 2e67 6574 5f73 7065 6e64 6275 6e64  er.get_spendbund
-0000e140: 6c65 2c0a 2020 2020 2020 2020 7478 2e73  le,.        tx.s
-0000e150: 7065 6e64 5f62 756e 646c 652c 0a20 2020  pend_bundle,.   
-0000e160: 2020 2020 2074 782e 7370 656e 645f 6275       tx.spend_bu
-0000e170: 6e64 6c65 2e6e 616d 6528 292c 0a20 2020  ndle.name(),.   
-0000e180: 2029 0a20 2020 2061 7761 6974 2066 6172   ).    await far
-0000e190: 6d5f 7472 616e 7361 6374 696f 6e28 6675  m_transaction(fu
-0000e1a0: 6c6c 5f6e 6f64 655f 6170 692c 2077 616c  ll_node_api, wal
-0000e1b0: 6c65 745f 6e6f 6465 2c20 7478 2e73 7065  let_node, tx.spe
-0000e1c0: 6e64 5f62 756e 646c 6529 0a20 2020 2061  nd_bundle).    a
-0000e1d0: 7761 6974 2074 696d 655f 6f75 745f 6173  wait time_out_as
-0000e1e0: 7365 7274 2832 302c 2065 6e76 2e77 616c  sert(20, env.wal
-0000e1f0: 6c65 745f 322e 7761 6c6c 6574 2e67 6574  let_2.wallet.get
-0000e200: 5f63 6f6e 6669 726d 6564 5f62 616c 616e  _confirmed_balan
-0000e210: 6365 2c20 7569 6e74 3634 2831 3030 3030  ce, uint64(10000
-0000e220: 3030 3030 3030 3029 290a 0a20 2020 206e  0000000))..    n
-0000e230: 6f74 6966 6963 6174 696f 6e20 3d20 2861  otification = (a
-0000e240: 7761 6974 2063 6c69 656e 745f 322e 6765  wait client_2.ge
-0000e250: 745f 6e6f 7469 6669 6361 7469 6f6e 7328  t_notifications(
-0000e260: 2929 5b30 5d0a 2020 2020 6173 7365 7274  ))[0].    assert
-0000e270: 205b 6e6f 7469 6669 6361 7469 6f6e 5d20   [notification] 
-0000e280: 3d3d 2028 6177 6169 7420 636c 6965 6e74  == (await client
-0000e290: 5f32 2e67 6574 5f6e 6f74 6966 6963 6174  _2.get_notificat
-0000e2a0: 696f 6e73 285b 6e6f 7469 6669 6361 7469  ions([notificati
-0000e2b0: 6f6e 2e63 6f69 6e5f 6964 5d29 290a 2020  on.coin_id])).  
-0000e2c0: 2020 6173 7365 7274 205b 5d20 3d3d 2028    assert [] == (
-0000e2d0: 6177 6169 7420 636c 6965 6e74 5f32 2e67  await client_2.g
-0000e2e0: 6574 5f6e 6f74 6966 6963 6174 696f 6e73  et_notifications
-0000e2f0: 2870 6167 696e 6174 696f 6e3d 2830 2c20  (pagination=(0, 
-0000e300: 3029 2929 0a20 2020 2061 7373 6572 7420  0))).    assert 
-0000e310: 5b6e 6f74 6966 6963 6174 696f 6e5d 203d  [notification] =
-0000e320: 3d20 2861 7761 6974 2063 6c69 656e 745f  = (await client_
-0000e330: 322e 6765 745f 6e6f 7469 6669 6361 7469  2.get_notificati
-0000e340: 6f6e 7328 7061 6769 6e61 7469 6f6e 3d28  ons(pagination=(
-0000e350: 4e6f 6e65 2c20 3129 2929 0a20 2020 2061  None, 1))).    a
-0000e360: 7373 6572 7420 5b5d 203d 3d20 2861 7761  ssert [] == (awa
-0000e370: 6974 2063 6c69 656e 745f 322e 6765 745f  it client_2.get_
-0000e380: 6e6f 7469 6669 6361 7469 6f6e 7328 7061  notifications(pa
-0000e390: 6769 6e61 7469 6f6e 3d28 312c 204e 6f6e  gination=(1, Non
-0000e3a0: 6529 2929 0a20 2020 2061 7373 6572 7420  e))).    assert 
-0000e3b0: 5b6e 6f74 6966 6963 6174 696f 6e5d 203d  [notification] =
-0000e3c0: 3d20 2861 7761 6974 2063 6c69 656e 745f  = (await client_
-0000e3d0: 322e 6765 745f 6e6f 7469 6669 6361 7469  2.get_notificati
-0000e3e0: 6f6e 7328 7061 6769 6e61 7469 6f6e 3d28  ons(pagination=(
-0000e3f0: 4e6f 6e65 2c20 4e6f 6e65 2929 290a 2020  None, None))).  
-0000e400: 2020 6173 7365 7274 2061 7761 6974 2063    assert await c
-0000e410: 6c69 656e 745f 322e 6465 6c65 7465 5f6e  lient_2.delete_n
-0000e420: 6f74 6966 6963 6174 696f 6e73 2829 0a20  otifications(). 
-0000e430: 2020 2061 7373 6572 7420 5b5d 203d 3d20     assert [] == 
-0000e440: 2861 7761 6974 2063 6c69 656e 745f 322e  (await client_2.
-0000e450: 6765 745f 6e6f 7469 6669 6361 7469 6f6e  get_notification
-0000e460: 7328 5b6e 6f74 6966 6963 6174 696f 6e2e  s([notification.
-0000e470: 636f 696e 5f69 645d 2929 0a0a 2020 2020  coin_id]))..    
-0000e480: 7478 203d 2061 7761 6974 2063 6c69 656e  tx = await clien
-0000e490: 742e 7365 6e64 5f6e 6f74 6966 6963 6174  t.send_notificat
-0000e4a0: 696f 6e28 0a20 2020 2020 2020 2061 7761  ion(.        awa
-0000e4b0: 6974 2077 616c 6c65 745f 322e 6765 745f  it wallet_2.get_
-0000e4c0: 6e65 775f 7075 7a7a 6c65 6861 7368 2829  new_puzzlehash()
-0000e4d0: 2c0a 2020 2020 2020 2020 6222 6865 6c6c  ,.        b"hell
-0000e4e0: 6f22 2c0a 2020 2020 2020 2020 7569 6e74  o",.        uint
-0000e4f0: 3634 2831 3030 3030 3030 3030 3030 3029  64(100000000000)
-0000e500: 2c0a 2020 2020 2020 2020 6665 653d 7569  ,.        fee=ui
-0000e510: 6e74 3634 2831 3030 3030 3030 3030 3030  nt64(10000000000
-0000e520: 3029 2c0a 2020 2020 290a 0a20 2020 2061  0),.    )..    a
-0000e530: 7373 6572 7420 7478 2e73 7065 6e64 5f62  ssert tx.spend_b
-0000e540: 756e 646c 6520 6973 206e 6f74 204e 6f6e  undle is not Non
-0000e550: 650a 2020 2020 6177 6169 7420 7469 6d65  e.    await time
-0000e560: 5f6f 7574 5f61 7373 6572 7428 0a20 2020  _out_assert(.   
-0000e570: 2020 2020 2035 2c0a 2020 2020 2020 2020       5,.        
-0000e580: 6675 6c6c 5f6e 6f64 655f 6170 692e 6675  full_node_api.fu
-0000e590: 6c6c 5f6e 6f64 652e 6d65 6d70 6f6f 6c5f  ll_node.mempool_
-0000e5a0: 6d61 6e61 6765 722e 6765 745f 7370 656e  manager.get_spen
-0000e5b0: 6462 756e 646c 652c 0a20 2020 2020 2020  dbundle,.       
-0000e5c0: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
-0000e5d0: 2c0a 2020 2020 2020 2020 7478 2e73 7065  ,.        tx.spe
-0000e5e0: 6e64 5f62 756e 646c 652e 6e61 6d65 2829  nd_bundle.name()
-0000e5f0: 2c0a 2020 2020 290a 2020 2020 6177 6169  ,.    ).    awai
-0000e600: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
-0000e610: 6f6e 2866 756c 6c5f 6e6f 6465 5f61 7069  on(full_node_api
-0000e620: 2c20 7761 6c6c 6574 5f6e 6f64 652c 2074  , wallet_node, t
-0000e630: 782e 7370 656e 645f 6275 6e64 6c65 290a  x.spend_bundle).
-0000e640: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
-0000e650: 7574 5f61 7373 6572 7428 3230 2c20 656e  ut_assert(20, en
-0000e660: 762e 7761 6c6c 6574 5f32 2e77 616c 6c65  v.wallet_2.walle
-0000e670: 742e 6765 745f 636f 6e66 6972 6d65 645f  t.get_confirmed_
-0000e680: 6261 6c61 6e63 652c 2075 696e 7436 3428  balance, uint64(
-0000e690: 3230 3030 3030 3030 3030 3030 2929 0a0a  200000000000))..
-0000e6a0: 2020 2020 6e6f 7469 6669 6361 7469 6f6e      notification
-0000e6b0: 203d 2028 6177 6169 7420 636c 6965 6e74   = (await client
-0000e6c0: 5f32 2e67 6574 5f6e 6f74 6966 6963 6174  _2.get_notificat
-0000e6d0: 696f 6e73 2829 295b 305d 0a20 2020 2061  ions())[0].    a
-0000e6e0: 7373 6572 7420 6177 6169 7420 636c 6965  ssert await clie
-0000e6f0: 6e74 5f32 2e64 656c 6574 655f 6e6f 7469  nt_2.delete_noti
-0000e700: 6669 6361 7469 6f6e 7328 5b6e 6f74 6966  fications([notif
-0000e710: 6963 6174 696f 6e2e 636f 696e 5f69 645d  ication.coin_id]
-0000e720: 290a 2020 2020 6173 7365 7274 205b 5d20  ).    assert [] 
-0000e730: 3d3d 2028 6177 6169 7420 636c 6965 6e74  == (await client
-0000e740: 5f32 2e67 6574 5f6e 6f74 6966 6963 6174  _2.get_notificat
-0000e750: 696f 6e73 285b 6e6f 7469 6669 6361 7469  ions([notificati
-0000e760: 6f6e 2e63 6f69 6e5f 6964 5d29 290a 0a0a  on.coin_id]))...
-0000e770: 2320 5468 6520 7369 676e 6174 7572 6573  # The signatures
-0000e780: 2062 656c 6f77 2077 6572 6520 6d61 6465   below were made
-0000e790: 2066 726f 6d20 616e 2065 7068 656d 6572   from an ephemer
-0000e7a0: 616c 206b 6579 2070 6169 7220 7468 6174  al key pair that
-0000e7b0: 2069 736e 2774 2069 6e63 6c75 6465 6420   isn't included 
-0000e7c0: 696e 2074 6865 2074 6573 7420 636f 6465  in the test code
-0000e7d0: 2e0a 2320 5768 656e 206d 6f64 6966 7969  ..# When modifyi
-0000e7e0: 6e67 2074 6869 7320 7465 7374 2c20 616e  ng this test, an
-0000e7f0: 7920 6b65 7920 6361 6e20 6265 2075 7365  y key can be use
-0000e800: 6420 746f 2067 656e 6572 6174 6520 7369  d to generate si
-0000e810: 676e 6174 7572 6573 2e20 4f6e 6c79 2074  gnatures. Only t
-0000e820: 6865 2070 7562 6b65 7920 6e65 6564 7320  he pubkey needs 
-0000e830: 746f 0a23 2062 6520 696e 636c 7564 6564  to.# be included
-0000e840: 2069 6e20 7468 6520 7465 7374 2063 6f64   in the test cod
-0000e850: 652e 0a23 0a23 2045 7861 6d70 6c65 2031  e..#.# Example 1
-0000e860: 3a0a 2320 2420 6368 6961 206b 6579 7320  :.# $ chia keys 
-0000e870: 6765 6e65 7261 7465 0a23 2024 2063 6869  generate.# $ chi
-0000e880: 6120 6b65 7973 2073 6967 6e20 2d64 2027  a keys sign -d '
-0000e890: 6865 6c6c 6f20 776f 726c 6427 202d 7420  hello world' -t 
-0000e8a0: 276d 2f31 3233 3831 2f38 3434 342f 312f  'm/12381/8444/1/
-0000e8b0: 3127 0a23 0a23 2045 7861 6d70 6c65 2032  1'.#.# Example 2
-0000e8c0: 3a0a 2320 2420 6368 6961 2077 616c 6c65  :.# $ chia walle
-0000e8d0: 7420 6765 745f 6164 6472 6573 730a 2320  t get_address.# 
-0000e8e0: 7863 6831 766b 3064 6a37 6378 3764 3633  xch1vk0dj7cx7d63
-0000e8f0: 3868 3830 6d63 7577 3730 7871 6c6e 7235  8h80mcuw70xqlnr5
-0000e900: 3670 6d75 687a 616a 656d 6e35 796d 3032  6pmuhzajemn5ym02
-0000e910: 7668 6c33 6d7a 7971 7272 6434 7770 0a23  vhl3mzyqrrd4wp.#
-0000e920: 2024 2063 6869 6120 7761 6c6c 6574 2073   $ chia wallet s
-0000e930: 6967 6e5f 6d65 7373 6167 6520 2d6d 2024  ign_message -m $
-0000e940: 2865 6368 6f20 2d6e 2027 6865 6c6c 6f20  (echo -n 'hello 
-0000e950: 776f 726c 6427 207c 2078 7864 202d 7029  world' | xxd -p)
-0000e960: 0a23 202d 6120 7863 6831 766b 3064 6a37  .# -a xch1vk0dj7
-0000e970: 6378 3764 3633 3868 3830 6d63 7577 3730  cx7d638h80mcuw70
-0000e980: 7871 6c6e 7235 3670 6d75 687a 616a 656d  xqlnr56pmuhzajem
-0000e990: 6e35 796d 3032 7668 6c33 6d7a 7971 7272  n5ym02vhl3mzyqrr
-0000e9a0: 6434 7770 0a23 0a40 7079 7465 7374 2e6d  d4wp.#.@pytest.m
-0000e9b0: 6172 6b2e 7061 7261 6d65 7472 697a 6528  ark.parametrize(
-0000e9c0: 0a20 2020 205b 2272 7063 5f72 6571 7565  .    ["rpc_reque
-0000e9d0: 7374 222c 2022 7270 635f 7265 7370 6f6e  st", "rpc_respon
-0000e9e0: 7365 225d 2c0a 2020 2020 5b0a 2020 2020  se"],.    [.    
-0000e9f0: 2020 2020 2320 5661 6c69 6420 7369 676e      # Valid sign
-0000ea00: 6174 7572 6573 0a20 2020 2020 2020 2028  atures.        (
-0000ea10: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
-0000ea20: 6869 6120 6b65 7973 2073 6967 6e20 2d64  hia keys sign -d
-0000ea30: 2022 4c65 7427 7320 6561 742c 2047 7261   "Let's eat, Gra
-0000ea40: 6e64 6d61 2220 2d74 2022 6d2f 3132 3338  ndma" -t "m/1238
-0000ea50: 312f 3834 3434 2f31 2f31 220a 2020 2020  1/8444/1/1".    
-0000ea60: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0000ea70: 2020 2020 2020 2020 2020 226d 6573 7361            "messa
-0000ea80: 6765 223a 2022 3463 3635 3734 3237 3733  ge": "4c65742773
-0000ea90: 3230 3635 3631 3734 3263 3230 3437 3732  206561742c204772
-0000eaa0: 3631 3665 3634 3664 3631 222c 2020 2320  616e646d61",  # 
-0000eab0: 4c65 7427 7320 6561 742c 2047 7261 6e64  Let's eat, Grand
-0000eac0: 6d61 0a20 2020 2020 2020 2020 2020 2020  ma.             
-0000ead0: 2020 2022 7075 626b 6579 223a 2028 0a20     "pubkey": (. 
-0000eae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eaf0: 2020 2022 3839 6438 6532 6132 3235 6332     "89d8e2a225c2
-0000eb00: 6666 3534 3332 3232 6264 3066 3262 6134  ff543222bd0f2ba4
-0000eb10: 3537 6134 3461 6362 6464 3134 3765 3464  57a44acbdd147e4d
-0000eb20: 6661 3032 220a 2020 2020 2020 2020 2020  fa02".          
-0000eb30: 2020 2020 2020 2020 2020 2265 6164 6165            "eadae
-0000eb40: 6637 3365 6165 3439 3435 3064 6337 3038  f73eae49450dc708
-0000eb50: 6664 3763 3836 3830 3062 3630 6538 6263  fd7c86800b60e8bc
-0000eb60: 3435 3665 3737 3536 3365 3422 0a20 2020  456e77563e4".   
-0000eb70: 2020 2020 2020 2020 2020 2020 2029 2c0a               ),.
-0000eb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eb90: 2273 6967 6e61 7475 7265 223a 2028 0a20  "signature": (. 
-0000eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ebb0: 2020 2022 3830 3036 6636 3335 3337 3536     "8006f6353756
-0000ebc0: 3366 3033 3833 3231 6565 6461 3235 6633  3f038321eeda25f3
-0000ebd0: 3833 3836 3133 6438 6639 3338 6539 3566  838613d8f938e95f
-0000ebe0: 3139 6431 6431 3963 6362 6536 3334 6539  19d1d19ccbe634e9
-0000ebf0: 6565 3464 3639 3535 3235 3336 6161 6230  ee4d69552536aab0
-0000ec00: 3862 3466 6539 3631 3330 3522 0a20 2020  8b4fe961305".   
-0000ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec20: 2022 6535 3334 6666 6464 6630 3936 3139   "e534ffddf09619
-0000ec30: 3961 6539 3336 6232 3732 6461 6338 3863  9ae936b272dac88c
-0000ec40: 3933 3665 3837 3734 6266 6337 6136 6632  936e8774bfc7a6f2
-0000ec50: 3430 3235 3038 3530 3236 6462 3362 3763  4025085026db3b7c
-0000ec60: 3363 3431 6234 3732 6462 3364 6166 3939  3c41b472db3daf99
-0000ec70: 6235 6536 6361 6266 3222 0a20 2020 2020  b5e6cabf2".     
-0000ec80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000ec90: 3630 3334 6438 3738 3264 3130 6566 3134  6034d8782d10ef14
-0000eca0: 3864 220a 2020 2020 2020 2020 2020 2020  8d".            
-0000ecb0: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
-0000ecc0: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
-0000ecd0: 2020 7b22 6973 5661 6c69 6422 3a20 5472    {"isValid": Tr
-0000ece0: 7565 7d2c 0a20 2020 2020 2020 2029 2c0a  ue},.        ),.
-0000ecf0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-0000ed00: 2020 2020 2020 2320 6368 6961 2077 616c        # chia wal
-0000ed10: 6c65 7420 7369 676e 5f6d 6573 7361 6765  let sign_message
-0000ed20: 202d 6d20 2428 6563 686f 202d 6e20 2748   -m $(echo -n 'H
-0000ed30: 6170 7079 2068 6170 7079 206a 6f79 206a  appy happy joy j
-0000ed40: 6f79 2720 7c20 7878 6420 2d70 290a 2020  oy' | xxd -p).  
-0000ed50: 2020 2020 2020 2020 2020 2320 2d61 2078            # -a x
-0000ed60: 6368 3165 3270 6375 6535 7137 7434 7367  ch1e2pcue5q7t4sg
-0000ed70: 3867 7967 7a33 6168 7433 3639 736b 3738  8gygz3aht369sk78
-0000ed80: 727a 7a73 3932 7a78 3635 6b74 6e39 6139  rzzs92zx65ktn9a9
-0000ed90: 7175 7277 3335 7361 616a 766b 680a 2020  qurw35saajvkh.  
-0000eda0: 2020 2020 2020 2020 2020 7b0a 2020 2020            {.    
-0000edb0: 2020 2020 2020 2020 2020 2020 226d 6573              "mes
-0000edc0: 7361 6765 223a 2022 3438 3631 3730 3730  sage": "48617070
-0000edd0: 3739 3230 3638 3631 3730 3730 3739 3230  7920686170707920
-0000ede0: 3661 3666 3739 3230 3661 3666 3739 222c  6a6f79206a6f79",
-0000edf0: 2020 2320 4861 7070 7920 6861 7070 7920    # Happy happy 
-0000ee00: 6a6f 7920 6a6f 790a 2020 2020 2020 2020  joy joy.        
-0000ee10: 2020 2020 2020 2020 2270 7562 6b65 7922          "pubkey"
-0000ee20: 3a20 280a 2020 2020 2020 2020 2020 2020  : (.            
-0000ee30: 2020 2020 2020 2020 2238 6531 3536 6431          "8e156d1
-0000ee40: 3036 6631 6230 6666 3065 6262 6535 6162  06f1b0ff0ebbe5ab
-0000ee50: 3237 6231 3739 3761 3139 6366 3365 3839  27b1797a19cf3e89
-0000ee60: 3561 3761 3433 3562 3022 0a20 2020 2020  5a7a435b0".     
-0000ee70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000ee80: 3033 6131 6466 3264 6434 3737 6436 3232  03a1df2dd477d622
-0000ee90: 6265 3932 3833 3739 3632 3562 3735 3965  be928379625b759e
-0000eea0: 6633 6233 3838 6232 3836 6565 3836 3538  f3b388b286ee8658
-0000eeb0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0000eec0: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-0000eed0: 2020 2020 2022 7369 676e 6174 7572 6522       "signature"
-0000eee0: 3a20 280a 2020 2020 2020 2020 2020 2020  : (.            
-0000eef0: 2020 2020 2020 2020 2261 3830 3431 3131          "a804111
-0000ef00: 6638 3062 6532 6564 3064 3464 3366 6464  f80be2ed0d4d3fdd
-0000ef10: 3133 3963 3866 6532 3063 6435 3036 6239  139c8fe20cd506b9
-0000ef20: 3962 3033 3539 3235 3633 6438 3532 3932  9b03592563d85292
-0000ef30: 6162 6362 6239 6364 3666 6636 6466 3265  abcbb9cd6ff6df2e
-0000ef40: 3761 3133 3039 3365 3333 3064 3636 6161  7a13093e330d66aa
-0000ef50: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0000ef60: 2020 2020 2020 2235 3231 3862 6265 3065        "5218bbe0e
-0000ef70: 3137 3637 3763 3961 3233 6139 6631 3864  17677c9a23a9f18d
-0000ef80: 6265 3438 3862 3730 3236 6265 3539 6434  be488b7026be59d4
-0000ef90: 3736 3136 3166 3565 3666 3065 6561 3130  76161f5e6f0eea10
-0000efa0: 3963 6437 6265 3232 6231 6637 3466 6461  9cd7be22b1f74fda
-0000efb0: 3963 3830 6336 6238 3435 6563 6336 220a  9c80c6b845ecc6".
-0000efc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000efd0: 2020 2020 2239 3132 3436 6562 3163 3766      "91246eb1c7f
-0000efe0: 3162 3636 6136 6122 0a20 2020 2020 2020  1b66a6a".       
-0000eff0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-0000f000: 2020 2020 2020 2020 2020 2020 2273 6967              "sig
-0000f010: 6e69 6e67 5f6d 6f64 6522 3a20 5369 676e  ning_mode": Sign
-0000f020: 696e 674d 6f64 652e 4348 4950 5f30 3030  ingMode.CHIP_000
-0000f030: 322e 7661 6c75 652c 0a20 2020 2020 2020  2.value,.       
-0000f040: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0000f050: 2020 2020 7b22 6973 5661 6c69 6422 3a20      {"isValid": 
-0000f060: 5472 7565 7d2c 0a20 2020 2020 2020 2029  True},.        )
-0000f070: 2c0a 2020 2020 2020 2020 280a 2020 2020  ,.        (.    
-0000f080: 2020 2020 2020 2020 2320 6368 6961 2077          # chia w
-0000f090: 616c 6c65 7420 7369 676e 5f6d 6573 7361  allet sign_messa
-0000f0a0: 6765 202d 6d20 2428 6563 686f 202d 6e20  ge -m $(echo -n 
-0000f0b0: 2748 6170 7079 2068 6170 7079 206a 6f79  'Happy happy joy
-0000f0c0: 206a 6f79 2720 7c20 7878 6420 2d70 290a   joy' | xxd -p).
-0000f0d0: 2020 2020 2020 2020 2020 2020 2320 2d61              # -a
-0000f0e0: 2078 6368 3165 3270 6375 6535 7137 7434   xch1e2pcue5q7t4
-0000f0f0: 7367 3867 7967 7a33 6168 7433 3639 736b  sg8gygz3aht369sk
-0000f100: 3738 727a 7a73 3932 7a78 3635 6b74 6e39  78rzzs92zx65ktn9
-0000f110: 6139 7175 7277 3335 7361 616a 766b 680a  a9qurw35saajvkh.
-0000f120: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-0000f130: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0000f140: 6573 7361 6765 223a 2022 3438 3631 3730  essage": "486170
-0000f150: 3730 3739 3230 3638 3631 3730 3730 3739  7079206861707079
-0000f160: 3230 3661 3666 3739 3230 3661 3666 3739  206a6f79206a6f79
-0000f170: 222c 2020 2320 4861 7070 7920 6861 7070  ",  # Happy happ
-0000f180: 7920 6a6f 7920 6a6f 790a 2020 2020 2020  y joy joy.      
-0000f190: 2020 2020 2020 2020 2020 2270 7562 6b65            "pubke
-0000f1a0: 7922 3a20 280a 2020 2020 2020 2020 2020  y": (.          
-0000f1b0: 2020 2020 2020 2020 2020 2238 6531 3536            "8e156
-0000f1c0: 6431 3036 6631 6230 6666 3065 6262 6535  d106f1b0ff0ebbe5
-0000f1d0: 6162 3237 6231 3739 3761 3139 6366 3365  ab27b1797a19cf3e
-0000f1e0: 3839 3561 3761 3433 3562 3022 0a20 2020  895a7a435b0".   
-0000f1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f200: 2022 3033 6131 6466 3264 6434 3737 6436   "03a1df2dd477d6
-0000f210: 3232 6265 3932 3833 3739 3632 3562 3735  22be928379625b75
-0000f220: 3965 6633 6233 3838 6232 3836 6565 3836  9ef3b388b286ee86
-0000f230: 3538 220a 2020 2020 2020 2020 2020 2020  58".            
-0000f240: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
-0000f250: 2020 2020 2020 2022 7369 676e 6174 7572         "signatur
-0000f260: 6522 3a20 280a 2020 2020 2020 2020 2020  e": (.          
-0000f270: 2020 2020 2020 2020 2020 2261 3830 3431            "a8041
-0000f280: 3131 6638 3062 6532 6564 3064 3464 3366  11f80be2ed0d4d3f
-0000f290: 6464 3133 3963 3866 6532 3063 6435 3036  dd139c8fe20cd506
-0000f2a0: 6239 3962 3033 3539 3235 3633 6438 3532  b99b03592563d852
-0000f2b0: 3932 6162 6362 6239 6364 3666 6636 6466  92abcbb9cd6ff6df
-0000f2c0: 3265 3761 3133 3039 3365 3333 3064 3636  2e7a13093e330d66
-0000f2d0: 6161 220a 2020 2020 2020 2020 2020 2020  aa".            
-0000f2e0: 2020 2020 2020 2020 2235 3231 3862 6265          "5218bbe
-0000f2f0: 3065 3137 3637 3763 3961 3233 6139 6631  0e17677c9a23a9f1
-0000f300: 3864 6265 3438 3862 3730 3236 6265 3539  8dbe488b7026be59
-0000f310: 6434 3736 3136 3166 3565 3666 3065 6561  d476161f5e6f0eea
-0000f320: 3130 3963 6437 6265 3232 6231 6637 3466  109cd7be22b1f74f
-0000f330: 6461 3963 3830 6336 6238 3435 6563 6336  da9c80c6b845ecc6
-0000f340: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0000f350: 2020 2020 2020 2239 3132 3436 6562 3163        "91246eb1c
-0000f360: 3766 3162 3636 6136 6122 0a20 2020 2020  7f1b66a6a".     
-0000f370: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-0000f380: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-0000f390: 6967 6e69 6e67 5f6d 6f64 6522 3a20 5369  igning_mode": Si
-0000f3a0: 676e 696e 674d 6f64 652e 4348 4950 5f30  gningMode.CHIP_0
-0000f3b0: 3030 322e 7661 6c75 652c 0a20 2020 2020  002.value,.     
-0000f3c0: 2020 2020 2020 2020 2020 2022 6164 6472             "addr
-0000f3d0: 6573 7322 3a20 2278 6368 3165 3270 6375  ess": "xch1e2pcu
-0000f3e0: 6535 7137 7434 7367 3867 7967 7a33 6168  e5q7t4sg8gygz3ah
-0000f3f0: 7433 3639 736b 3738 727a 7a73 3932 7a78  t369sk78rzzs92zx
-0000f400: 3635 6b74 6e39 6139 7175 7277 3335 7361  65ktn9a9qurw35sa
-0000f410: 616a 766b 6822 2c0a 2020 2020 2020 2020  ajvkh",.        
-0000f420: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
-0000f430: 2020 207b 2269 7356 616c 6964 223a 2054     {"isValid": T
-0000f440: 7275 657d 2c0a 2020 2020 2020 2020 292c  rue},.        ),
-0000f450: 0a20 2020 2020 2020 2023 204e 6567 6174  .        # Negat
-0000f460: 6976 6520 7465 7374 730a 2020 2020 2020  ive tests.      
-0000f470: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-0000f480: 2320 4d65 7373 6167 6520 7761 7320 6d6f  # Message was mo
-0000f490: 6469 6669 6564 0a20 2020 2020 2020 2020  dified.         
-0000f4a0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-0000f4b0: 2020 2020 2022 6d65 7373 6167 6522 3a20       "message": 
-0000f4c0: 2234 6336 3537 3432 3737 3332 3036 3536  "4c6574277320656
-0000f4d0: 3137 3432 3034 3737 3236 3136 6536 3436  174204772616e646
-0000f4e0: 6436 3122 2c20 2023 204c 6574 2773 2065  d61",  # Let's e
-0000f4f0: 6174 2047 7261 6e64 6d61 0a20 2020 2020  at Grandma.     
-0000f500: 2020 2020 2020 2020 2020 2022 7075 626b             "pubk
-0000f510: 6579 223a 2028 0a20 2020 2020 2020 2020  ey": (.         
-0000f520: 2020 2020 2020 2020 2020 2022 3839 6438             "89d8
-0000f530: 6532 6132 3235 6332 6666 3534 3332 3232  e2a225c2ff543222
-0000f540: 6264 3066 3262 6134 3537 6134 3461 6362  bd0f2ba457a44acb
-0000f550: 6464 3134 3765 3464 6661 3032 220a 2020  dd147e4dfa02".  
-0000f560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f570: 2020 2265 6164 6165 6637 3365 6165 3439    "eadaef73eae49
-0000f580: 3435 3064 6337 3038 6664 3763 3836 3830  450dc708fd7c8680
-0000f590: 3062 3630 6538 6263 3435 3665 3737 3536  0b60e8bc456e7756
-0000f5a0: 3365 3422 0a20 2020 2020 2020 2020 2020  3e4".           
-0000f5b0: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-0000f5c0: 2020 2020 2020 2020 2273 6967 6e61 7475          "signatu
-0000f5d0: 7265 223a 2028 0a20 2020 2020 2020 2020  re": (.         
-0000f5e0: 2020 2020 2020 2020 2020 2022 3830 3036             "8006
-0000f5f0: 6636 3335 3337 3536 3366 3033 3833 3231  f63537563f038321
-0000f600: 6565 6461 3235 6633 3833 3836 3133 6438  eeda25f3838613d8
-0000f610: 6639 3338 6539 3566 3139 6431 6431 3963  f938e95f19d1d19c
-0000f620: 6362 6536 3334 6539 6565 3464 3639 3535  cbe634e9ee4d6955
-0000f630: 3235 3336 6161 6230 3862 3466 6539 3631  2536aab08b4fe961
-0000f640: 3330 3522 0a20 2020 2020 2020 2020 2020  305".           
-0000f650: 2020 2020 2020 2020 2022 6535 3334 6666           "e534ff
-0000f660: 6464 6630 3936 3139 3961 6539 3336 6232  ddf096199ae936b2
-0000f670: 3732 6461 6338 3863 3933 3665 3837 3734  72dac88c936e8774
-0000f680: 6266 6337 6136 6632 3430 3235 3038 3530  bfc7a6f240250850
-0000f690: 3236 6462 3362 3763 3363 3431 6234 3732  26db3b7c3c41b472
-0000f6a0: 6462 3364 6166 3939 6235 6536 6361 6266  db3daf99b5e6cabf
-0000f6b0: 3222 0a20 2020 2020 2020 2020 2020 2020  2".             
-0000f6c0: 2020 2020 2020 2022 3630 3334 6438 3738         "6034d878
-0000f6d0: 3264 3130 6566 3134 3864 220a 2020 2020  2d10ef148d".    
-0000f6e0: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-0000f6f0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-0000f700: 2020 2020 2020 2020 2020 7b22 6973 5661            {"isVa
-0000f710: 6c69 6422 3a20 4661 6c73 652c 2022 6572  lid": False, "er
-0000f720: 726f 7222 3a20 2253 6967 6e61 7475 7265  ror": "Signature
-0000f730: 2069 7320 696e 7661 6c69 642e 227d 2c0a   is invalid."},.
-0000f740: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-0000f750: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
-0000f760: 2023 2056 616c 6964 2073 6967 6e61 7475   # Valid signatu
-0000f770: 7265 2062 7574 2061 6464 7265 7373 2064  re but address d
-0000f780: 6f65 736e 2774 206d 6174 6368 2070 7562  oesn't match pub
-0000f790: 6b65 790a 2020 2020 2020 2020 2020 2020  key.            
-0000f7a0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0000f7b0: 2020 226d 6573 7361 6765 223a 2022 3438    "message": "48
-0000f7c0: 3631 3730 3730 3739 3230 3638 3631 3730  6170707920686170
-0000f7d0: 3730 3739 3230 3661 3666 3739 3230 3661  7079206a6f79206a
-0000f7e0: 3666 3739 222c 2020 2320 4861 7070 7920  6f79",  # Happy 
-0000f7f0: 6861 7070 7920 6a6f 7920 6a6f 790a 2020  happy joy joy.  
-0000f800: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-0000f810: 7562 6b65 7922 3a20 280a 2020 2020 2020  ubkey": (.      
-0000f820: 2020 2020 2020 2020 2020 2020 2020 2238                "8
-0000f830: 6531 3536 6431 3036 6631 6230 6666 3065  e156d106f1b0ff0e
-0000f840: 6262 6535 6162 3237 6231 3739 3761 3139  bbe5ab27b1797a19
-0000f850: 6366 3365 3839 3561 3761 3433 3562 3022  cf3e895a7a435b0"
-0000f860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000f870: 2020 2020 2022 3033 6131 6466 3264 6434       "03a1df2dd4
-0000f880: 3737 6436 3232 6265 3932 3833 3739 3632  77d622be92837962
-0000f890: 3562 3735 3965 6633 6233 3838 6232 3836  5b759ef3b388b286
-0000f8a0: 6565 3836 3538 220a 2020 2020 2020 2020  ee8658".        
-0000f8b0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-0000f8c0: 2020 2020 2020 2020 2020 2022 7369 676e             "sign
-0000f8d0: 6174 7572 6522 3a20 280a 2020 2020 2020  ature": (.      
-0000f8e0: 2020 2020 2020 2020 2020 2020 2020 2261                "a
-0000f8f0: 3830 3431 3131 6638 3062 6532 6564 3064  804111f80be2ed0d
-0000f900: 3464 3366 6464 3133 3963 3866 6532 3063  4d3fdd139c8fe20c
-0000f910: 6435 3036 6239 3962 3033 3539 3235 3633  d506b99b03592563
-0000f920: 6438 3532 3932 6162 6362 6239 6364 3666  d85292abcbb9cd6f
-0000f930: 6636 6466 3265 3761 3133 3039 3365 3333  f6df2e7a13093e33
-0000f940: 3064 3636 6161 220a 2020 2020 2020 2020  0d66aa".        
-0000f950: 2020 2020 2020 2020 2020 2020 2235 3231              "521
-0000f960: 3862 6265 3065 3137 3637 3763 3961 3233  8bbe0e17677c9a23
-0000f970: 6139 6631 3864 6265 3438 3862 3730 3236  a9f18dbe488b7026
-0000f980: 6265 3539 6434 3736 3136 3166 3565 3666  be59d476161f5e6f
-0000f990: 3065 6561 3130 3963 6437 6265 3232 6231  0eea109cd7be22b1
-0000f9a0: 6637 3466 6461 3963 3830 6336 6238 3435  f74fda9c80c6b845
-0000f9b0: 6563 6336 220a 2020 2020 2020 2020 2020  ecc6".          
-0000f9c0: 2020 2020 2020 2020 2020 2239 3132 3436            "91246
-0000f9d0: 6562 3163 3766 3162 3636 6136 6122 0a20  eb1c7f1b66a6a". 
-0000f9e0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000f9f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0000fa00: 2020 2273 6967 6e69 6e67 5f6d 6f64 6522    "signing_mode"
-0000fa10: 3a20 5369 676e 696e 674d 6f64 652e 4348  : SigningMode.CH
-0000fa20: 4950 5f30 3030 322e 7661 6c75 652c 0a20  IP_0002.value,. 
-0000fa30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000fa40: 6164 6472 6573 7322 3a20 2278 6368 3164  address": "xch1d
-0000fa50: 3072 656b 6332 6a61 7679 3567 7072 757a  0rekc2javy5gpruz
-0000fa60: 6d63 6e6b 3465 3471 7138 3334 6a7a 6c76  mcnk4e4qq834jzlv
-0000fa70: 7874 3574 6367 6c32 796c 7434 3974 3236  xt5tcgl2ylt49t26
-0000fa80: 6764 736a 656e 3774 3022 2c0a 2020 2020  gdsjen7t0",.    
-0000fa90: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-0000faa0: 2020 2020 2020 207b 2269 7356 616c 6964         {"isValid
-0000fab0: 223a 2046 616c 7365 2c20 2265 7272 6f72  ": False, "error
-0000fac0: 223a 2022 5075 626c 6963 206b 6579 2064  ": "Public key d
-0000fad0: 6f65 736e 2774 206d 6174 6368 2074 6865  oesn't match the
-0000fae0: 2061 6464 7265 7373 227d 2c0a 2020 2020   address"},.    
-0000faf0: 2020 2020 292c 0a20 2020 205d 2c0a 290a      ),.    ],.).
-0000fb00: 4070 7974 6573 742e 6d61 726b 2e70 6172  @pytest.mark.par
-0000fb10: 616d 6574 7269 7a65 2822 7072 6566 6978  ametrize("prefix
-0000fb20: 5f68 6578 5f73 7472 696e 6773 222c 205b  _hex_strings", [
-0000fb30: 5472 7565 2c20 4661 6c73 655d 2c20 6964  True, False], id
-0000fb40: 733d 5b22 7769 7468 2030 7822 2c20 226e  s=["with 0x", "n
-0000fb50: 6f20 3078 225d 290a 4070 7974 6573 742e  o 0x"]).@pytest.
-0000fb60: 6d61 726b 2e61 7379 6e63 696f 0a61 7379  mark.asyncio.asy
-0000fb70: 6e63 2064 6566 2074 6573 745f 7665 7269  nc def test_veri
-0000fb80: 6679 5f73 6967 6e61 7475 7265 280a 2020  fy_signature(.  
-0000fb90: 2020 7761 6c6c 6574 5f72 7063 5f65 6e76    wallet_rpc_env
-0000fba0: 6972 6f6e 6d65 6e74 3a20 5761 6c6c 6574  ironment: Wallet
-0000fbb0: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
-0000fbc0: 6e74 2c0a 2020 2020 7270 635f 7265 7175  nt,.    rpc_requ
-0000fbd0: 6573 743a 2044 6963 745b 7374 722c 2041  est: Dict[str, A
-0000fbe0: 6e79 5d2c 0a20 2020 2072 7063 5f72 6573  ny],.    rpc_res
-0000fbf0: 706f 6e73 653a 2044 6963 745b 7374 722c  ponse: Dict[str,
-0000fc00: 2041 6e79 5d2c 0a20 2020 2070 7265 6669   Any],.    prefi
-0000fc10: 785f 6865 785f 7374 7269 6e67 733a 2062  x_hex_strings: b
-0000fc20: 6f6f 6c2c 0a29 3a0a 2020 2020 7270 635f  ool,.):.    rpc_
-0000fc30: 7365 7276 6572 3a20 4f70 7469 6f6e 616c  server: Optional
-0000fc40: 5b52 7063 5365 7276 6572 5d20 3d20 7761  [RpcServer] = wa
-0000fc50: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
-0000fc60: 6d65 6e74 2e77 616c 6c65 745f 312e 7365  ment.wallet_1.se
-0000fc70: 7276 6963 652e 7270 635f 7365 7276 6572  rvice.rpc_server
-0000fc80: 0a20 2020 2061 7373 6572 7420 7270 635f  .    assert rpc_
-0000fc90: 7365 7276 6572 2069 7320 6e6f 7420 4e6f  server is not No
-0000fca0: 6e65 0a20 2020 2061 7069 3a20 5761 6c6c  ne.    api: Wall
-0000fcb0: 6574 5270 6341 7069 203d 2063 6173 7428  etRpcApi = cast(
-0000fcc0: 5761 6c6c 6574 5270 6341 7069 2c20 7270  WalletRpcApi, rp
-0000fcd0: 635f 7365 7276 6572 2e72 7063 5f61 7069  c_server.rpc_api
-0000fce0: 290a 2020 2020 7265 7120 3d20 7570 6461  ).    req = upda
-0000fcf0: 7465 5f76 6572 6966 795f 7369 676e 6174  te_verify_signat
-0000fd00: 7572 655f 7265 7175 6573 7428 7270 635f  ure_request(rpc_
-0000fd10: 7265 7175 6573 742c 2070 7265 6669 785f  request, prefix_
-0000fd20: 6865 785f 7374 7269 6e67 7329 0a20 2020  hex_strings).   
-0000fd30: 2072 6573 203d 2061 7761 6974 2061 7069   res = await api
-0000fd40: 2e76 6572 6966 795f 7369 676e 6174 7572  .verify_signatur
-0000fd50: 6528 7265 7129 0a20 2020 2061 7373 6572  e(req).    asser
-0000fd60: 7420 7265 7320 3d3d 2072 7063 5f72 6573  t res == rpc_res
-0000fd70: 706f 6e73 650a 0a0a 4070 7974 6573 742e  ponse...@pytest.
-0000fd80: 6d61 726b 2e61 7379 6e63 696f 0a61 7379  mark.asyncio.asy
-0000fd90: 6e63 2064 6566 2074 6573 745f 7365 745f  nc def test_set_
-0000fda0: 7761 6c6c 6574 5f72 6573 796e 635f 6f6e  wallet_resync_on
-0000fdb0: 5f73 7461 7274 7570 2877 616c 6c65 745f  _startup(wallet_
-0000fdc0: 7270 635f 656e 7669 726f 6e6d 656e 743a  rpc_environment:
-0000fdd0: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
-0000fde0: 7669 726f 6e6d 656e 7429 3a0a 2020 2020  vironment):.    
-0000fdf0: 656e 763a 2057 616c 6c65 7452 7063 5465  env: WalletRpcTe
-0000fe00: 7374 456e 7669 726f 6e6d 656e 7420 3d20  stEnvironment = 
-0000fe10: 7761 6c6c 6574 5f72 7063 5f65 6e76 6972  wallet_rpc_envir
-0000fe20: 6f6e 6d65 6e74 0a20 2020 2066 756c 6c5f  onment.    full_
-0000fe30: 6e6f 6465 5f61 7069 3a20 4675 6c6c 4e6f  node_api: FullNo
-0000fe40: 6465 5369 6d75 6c61 746f 7220 3d20 656e  deSimulator = en
-0000fe50: 762e 6675 6c6c 5f6e 6f64 652e 6170 690a  v.full_node.api.
-0000fe60: 2020 2020 636c 6965 6e74 3a20 5761 6c6c      client: Wall
-0000fe70: 6574 5270 6343 6c69 656e 7420 3d20 656e  etRpcClient = en
-0000fe80: 762e 7761 6c6c 6574 5f31 2e72 7063 5f63  v.wallet_1.rpc_c
-0000fe90: 6c69 656e 740a 2020 2020 6177 6169 7420  lient.    await 
-0000fea0: 6765 6e65 7261 7465 5f66 756e 6473 2866  generate_funds(f
-0000feb0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 656e  ull_node_api, en
-0000fec0: 762e 7761 6c6c 6574 5f31 290a 2020 2020  v.wallet_1).    
-0000fed0: 7763 203d 2065 6e76 2e77 616c 6c65 745f  wc = env.wallet_
-0000fee0: 312e 7270 635f 636c 6965 6e74 0a20 2020  1.rpc_client.   
-0000fef0: 2061 7761 6974 2077 632e 6372 6561 7465   await wc.create
-0000ff00: 5f6e 6577 5f64 6964 5f77 616c 6c65 7428  _new_did_wallet(
-0000ff10: 312c 2030 290a 2020 2020 6177 6169 7420  1, 0).    await 
-0000ff20: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
-0000ff30: 352c 2063 6865 636b 5f6d 656d 706f 6f6c  5, check_mempool
-0000ff40: 5f73 7065 6e64 5f63 6f75 6e74 2c20 5472  _spend_count, Tr
-0000ff50: 7565 2c20 6675 6c6c 5f6e 6f64 655f 6170  ue, full_node_ap
-0000ff60: 692c 2031 290a 2020 2020 6177 6169 7420  i, 1).    await 
-0000ff70: 6661 726d 5f74 7261 6e73 6163 7469 6f6e  farm_transaction
-0000ff80: 5f62 6c6f 636b 2866 756c 6c5f 6e6f 6465  _block(full_node
-0000ff90: 5f61 7069 2c20 656e 762e 7761 6c6c 6574  _api, env.wallet
-0000ffa0: 5f31 2e6e 6f64 6529 0a20 2020 2061 7761  _1.node).    awa
-0000ffb0: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
-0000ffc0: 7274 2832 302c 2077 632e 6765 745f 7379  rt(20, wc.get_sy
-0000ffd0: 6e63 6564 290a 0a20 2020 206e 6674 5f77  nced)..    nft_w
-0000ffe0: 616c 6c65 7420 3d20 6177 6169 7420 7763  allet = await wc
-0000fff0: 2e63 7265 6174 655f 6e65 775f 6e66 745f  .create_new_nft_
-00010000: 7761 6c6c 6574 284e 6f6e 6529 0a20 2020  wallet(None).   
-00010010: 206e 6674 5f77 616c 6c65 745f 6964 203d   nft_wallet_id =
-00010020: 206e 6674 5f77 616c 6c65 745b 2277 616c   nft_wallet["wal
-00010030: 6c65 745f 6964 225d 0a20 2020 2061 6464  let_id"].    add
-00010040: 7265 7373 203d 2061 7761 6974 2077 632e  ress = await wc.
-00010050: 6765 745f 6e65 7874 5f61 6464 7265 7373  get_next_address
-00010060: 2865 6e76 2e77 616c 6c65 745f 312e 7761  (env.wallet_1.wa
-00010070: 6c6c 6574 2e69 6428 292c 2054 7275 6529  llet.id(), True)
-00010080: 0a20 2020 2061 7761 6974 2077 632e 6d69  .    await wc.mi
-00010090: 6e74 5f6e 6674 280a 2020 2020 2020 2020  nt_nft(.        
-000100a0: 6e66 745f 7761 6c6c 6574 5f69 642c 2072  nft_wallet_id, r
-000100b0: 6f79 616c 7479 5f61 6464 7265 7373 3d61  oyalty_address=a
-000100c0: 6464 7265 7373 2c20 7461 7267 6574 5f61  ddress, target_a
-000100d0: 6464 7265 7373 3d61 6464 7265 7373 2c20  ddress=address, 
-000100e0: 6861 7368 3d22 6465 6164 6265 6566 222c  hash="deadbeef",
-000100f0: 2075 7269 733d 5b22 6874 7470 3a2f 2f74   uris=["http://t
-00010100: 6573 742e 6e66 7422 5d0a 2020 2020 290a  est.nft"].    ).
-00010110: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
-00010120: 7574 5f61 7373 6572 7428 352c 2063 6865  ut_assert(5, che
-00010130: 636b 5f6d 656d 706f 6f6c 5f73 7065 6e64  ck_mempool_spend
-00010140: 5f63 6f75 6e74 2c20 5472 7565 2c20 6675  _count, True, fu
-00010150: 6c6c 5f6e 6f64 655f 6170 692c 2031 290a  ll_node_api, 1).
-00010160: 2020 2020 6177 6169 7420 6661 726d 5f74      await farm_t
-00010170: 7261 6e73 6163 7469 6f6e 5f62 6c6f 636b  ransaction_block
-00010180: 2866 756c 6c5f 6e6f 6465 5f61 7069 2c20  (full_node_api, 
-00010190: 656e 762e 7761 6c6c 6574 5f31 2e6e 6f64  env.wallet_1.nod
-000101a0: 6529 0a20 2020 2061 7761 6974 2074 696d  e).    await tim
-000101b0: 655f 6f75 745f 6173 7365 7274 2832 302c  e_out_assert(20,
-000101c0: 2077 632e 6765 745f 7379 6e63 6564 290a   wc.get_synced).
-000101d0: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
-000101e0: 3a20 5761 6c6c 6574 4e6f 6465 203d 2065  : WalletNode = e
-000101f0: 6e76 2e77 616c 6c65 745f 312e 6e6f 6465  nv.wallet_1.node
-00010200: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
-00010210: 5f32 3a20 5761 6c6c 6574 4e6f 6465 203d  _2: WalletNode =
-00010220: 2065 6e76 2e77 616c 6c65 745f 322e 6e6f   env.wallet_2.no
-00010230: 6465 0a20 2020 2077 616c 6c65 745f 6e6f  de.    wallet_no
-00010240: 6465 5f32 2e5f 636c 6f73 6528 290a 2020  de_2._close().  
-00010250: 2020 6177 6169 7420 7761 6c6c 6574 5f6e    await wallet_n
-00010260: 6f64 655f 322e 5f61 7761 6974 5f63 6c6f  ode_2._await_clo
-00010270: 7365 6428 290a 2020 2020 2320 7365 7420  sed().    # set 
-00010280: 666c 6167 2074 6f20 7265 7365 7420 7761  flag to reset wa
-00010290: 6c6c 6574 2073 796e 6320 6461 7461 206f  llet sync data o
-000102a0: 6e20 7374 6172 740a 2020 2020 6177 6169  n start.    awai
-000102b0: 7420 636c 6965 6e74 2e73 6574 5f77 616c  t client.set_wal
-000102c0: 6c65 745f 7265 7379 6e63 5f6f 6e5f 7374  let_resync_on_st
-000102d0: 6172 7475 7028 290a 2020 2020 6669 6e67  artup().    fing
-000102e0: 6572 7072 696e 7420 3d20 7761 6c6c 6574  erprint = wallet
-000102f0: 5f6e 6f64 652e 6c6f 6767 6564 5f69 6e5f  _node.logged_in_
-00010300: 6669 6e67 6572 7072 696e 740a 2020 2020  fingerprint.    
-00010310: 6173 7365 7274 2077 616c 6c65 745f 6e6f  assert wallet_no
-00010320: 6465 2e5f 7761 6c6c 6574 5f73 7461 7465  de._wallet_state
-00010330: 5f6d 616e 6167 6572 0a20 2020 2023 2032  _manager.    # 2
-00010340: 2072 6577 6172 6420 636f 696e 732c 2031   reward coins, 1
-00010350: 2044 4944 2c20 3120 4e46 540a 2020 2020   DID, 1 NFT.    
-00010360: 6173 7365 7274 206c 656e 2861 7761 6974  assert len(await
-00010370: 2077 616c 6c65 745f 6e6f 6465 2e5f 7761   wallet_node._wa
-00010380: 6c6c 6574 5f73 7461 7465 5f6d 616e 6167  llet_state_manag
-00010390: 6572 2e63 6f69 6e5f 7374 6f72 652e 6765  er.coin_store.ge
-000103a0: 745f 616c 6c5f 756e 7370 656e 745f 636f  t_all_unspent_co
-000103b0: 696e 7328 2929 203d 3d20 340a 2020 2020  ins()) == 4.    
-000103c0: 6173 7365 7274 2061 7761 6974 2077 616c  assert await wal
-000103d0: 6c65 745f 6e6f 6465 2e5f 7761 6c6c 6574  let_node._wallet
-000103e0: 5f73 7461 7465 5f6d 616e 6167 6572 2e6e  _state_manager.n
-000103f0: 6674 5f73 746f 7265 2e63 6f75 6e74 2829  ft_store.count()
-00010400: 203d 3d20 310a 2020 2020 2320 7374 616e   == 1.    # stan
-00010410: 6461 7264 2077 616c 6c65 742c 2064 6964  dard wallet, did
-00010420: 2077 616c 6c65 742c 206e 6674 2077 616c   wallet, nft wal
-00010430: 6c65 742c 2064 6964 206e 6674 2077 616c  let, did nft wal
-00010440: 6c65 740a 2020 2020 6173 7365 7274 206c  let.    assert l
-00010450: 656e 2861 7761 6974 2077 616c 6c65 745f  en(await wallet_
-00010460: 6e6f 6465 2e77 616c 6c65 745f 7374 6174  node.wallet_stat
-00010470: 655f 6d61 6e61 6765 722e 7573 6572 5f73  e_manager.user_s
-00010480: 746f 7265 2e67 6574 5f61 6c6c 5f77 616c  tore.get_all_wal
-00010490: 6c65 745f 696e 666f 5f65 6e74 7269 6573  let_info_entries
-000104a0: 2829 2920 3d3d 2034 0a20 2020 2062 6566  ()) == 4.    bef
-000104b0: 6f72 655f 7478 7320 3d20 6177 6169 7420  ore_txs = await 
-000104c0: 7761 6c6c 6574 5f6e 6f64 652e 7761 6c6c  wallet_node.wall
-000104d0: 6574 5f73 7461 7465 5f6d 616e 6167 6572  et_state_manager
-000104e0: 2e74 785f 7374 6f72 652e 6765 745f 616c  .tx_store.get_al
-000104f0: 6c5f 7472 616e 7361 6374 696f 6e73 2829  l_transactions()
-00010500: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
-00010510: 2e5f 636c 6f73 6528 290a 2020 2020 6177  ._close().    aw
-00010520: 6169 7420 7761 6c6c 6574 5f6e 6f64 652e  ait wallet_node.
-00010530: 5f61 7761 6974 5f63 6c6f 7365 6428 290a  _await_closed().
-00010540: 2020 2020 636f 6e66 6967 203d 206c 6f61      config = loa
-00010550: 645f 636f 6e66 6967 2877 616c 6c65 745f  d_config(wallet_
-00010560: 6e6f 6465 2e72 6f6f 745f 7061 7468 2c20  node.root_path, 
-00010570: 2263 6f6e 6669 672e 7961 6d6c 2229 0a20  "config.yaml"). 
-00010580: 2020 2023 2063 6865 636b 2074 6861 7420     # check that 
-00010590: 666c 6167 2077 6173 2073 6574 2069 6e20  flag was set in 
-000105a0: 636f 6e66 6967 2066 696c 650a 2020 2020  config file.    
-000105b0: 6173 7365 7274 2063 6f6e 6669 675b 2277  assert config["w
-000105c0: 616c 6c65 7422 5d5b 2272 6573 6574 5f73  allet"]["reset_s
-000105d0: 796e 635f 666f 725f 6669 6e67 6572 7072  ync_for_fingerpr
-000105e0: 696e 7422 5d20 3d3d 2066 696e 6765 7270  int"] == fingerp
-000105f0: 7269 6e74 0a20 2020 206e 6577 5f63 6f6e  rint.    new_con
-00010600: 6669 6720 3d20 7761 6c6c 6574 5f6e 6f64  fig = wallet_nod
-00010610: 652e 636f 6e66 6967 2e63 6f70 7928 290a  e.config.copy().
-00010620: 2020 2020 6e65 775f 636f 6e66 6967 5b22      new_config["
-00010630: 7265 7365 745f 7379 6e63 5f66 6f72 5f66  reset_sync_for_f
-00010640: 696e 6765 7270 7269 6e74 225d 203d 2063  ingerprint"] = c
-00010650: 6f6e 6669 675b 2277 616c 6c65 7422 5d5b  onfig["wallet"][
-00010660: 2272 6573 6574 5f73 796e 635f 666f 725f  "reset_sync_for_
-00010670: 6669 6e67 6572 7072 696e 7422 5d0a 2020  fingerprint"].  
-00010680: 2020 7761 6c6c 6574 5f6e 6f64 655f 322e    wallet_node_2.
-00010690: 636f 6e66 6967 203d 206e 6577 5f63 6f6e  config = new_con
-000106a0: 6669 670a 2020 2020 7761 6c6c 6574 5f6e  fig.    wallet_n
-000106b0: 6f64 655f 322e 726f 6f74 5f70 6174 6820  ode_2.root_path 
-000106c0: 3d20 7761 6c6c 6574 5f6e 6f64 652e 726f  = wallet_node.ro
-000106d0: 6f74 5f70 6174 680a 2020 2020 7761 6c6c  ot_path.    wall
-000106e0: 6574 5f6e 6f64 655f 322e 6c6f 6361 6c5f  et_node_2.local_
-000106f0: 6b65 7963 6861 696e 203d 2077 616c 6c65  keychain = walle
-00010700: 745f 6e6f 6465 2e6c 6f63 616c 5f6b 6579  t_node.local_key
-00010710: 6368 6169 6e0a 2020 2020 2320 7573 6520  chain.    # use 
-00010720: 7365 636f 6e64 206e 6f64 6520 746f 2073  second node to s
-00010730: 7461 7274 2074 6865 2073 616d 6520 7761  tart the same wa
-00010740: 6c6c 6574 2c20 7265 7573 696e 6720 636f  llet, reusing co
-00010750: 6e66 6967 2061 6e64 2064 620a 2020 2020  nfig and db.    
-00010760: 6177 6169 7420 7761 6c6c 6574 5f6e 6f64  await wallet_nod
-00010770: 655f 322e 5f73 7461 7274 5f77 6974 685f  e_2._start_with_
-00010780: 6669 6e67 6572 7072 696e 7428 6669 6e67  fingerprint(fing
-00010790: 6572 7072 696e 7429 0a20 2020 2061 7373  erprint).    ass
-000107a0: 6572 7420 7761 6c6c 6574 5f6e 6f64 655f  ert wallet_node_
-000107b0: 322e 5f77 616c 6c65 745f 7374 6174 655f  2._wallet_state_
-000107c0: 6d61 6e61 6765 720a 2020 2020 6166 7465  manager.    afte
-000107d0: 725f 7478 7320 3d20 6177 6169 7420 7761  r_txs = await wa
-000107e0: 6c6c 6574 5f6e 6f64 655f 322e 7761 6c6c  llet_node_2.wall
-000107f0: 6574 5f73 7461 7465 5f6d 616e 6167 6572  et_state_manager
-00010800: 2e74 785f 7374 6f72 652e 6765 745f 616c  .tx_store.get_al
-00010810: 6c5f 7472 616e 7361 6374 696f 6e73 2829  l_transactions()
-00010820: 0a20 2020 2023 2074 7261 6e73 6163 7469  .    # transacti
-00010830: 6f6e 7320 7368 6f75 6c64 2062 6520 7468  ons should be th
-00010840: 6520 7361 6d65 0a20 2020 2061 7373 6572  e same.    asser
-00010850: 7420 6166 7465 725f 7478 7320 3d3d 2062  t after_txs == b
-00010860: 6566 6f72 655f 7478 730a 2020 2020 2320  efore_txs.    # 
-00010870: 6f6e 6c79 2063 6f69 6e5f 7374 6f72 6520  only coin_store 
-00010880: 7761 7320 706f 7075 6c61 7465 6420 696e  was populated in
-00010890: 2074 6869 7320 6361 7365 2c20 6275 7420   this case, but 
-000108a0: 6e6f 7720 7368 6f75 6c64 2062 6520 656d  now should be em
-000108b0: 7074 790a 2020 2020 6173 7365 7274 206c  pty.    assert l
-000108c0: 656e 2861 7761 6974 2077 616c 6c65 745f  en(await wallet_
-000108d0: 6e6f 6465 5f32 2e5f 7761 6c6c 6574 5f73  node_2._wallet_s
-000108e0: 7461 7465 5f6d 616e 6167 6572 2e63 6f69  tate_manager.coi
-000108f0: 6e5f 7374 6f72 652e 6765 745f 616c 6c5f  n_store.get_all_
-00010900: 756e 7370 656e 745f 636f 696e 7328 2929  unspent_coins())
-00010910: 203d 3d20 300a 2020 2020 6173 7365 7274   == 0.    assert
-00010920: 2061 7761 6974 2077 616c 6c65 745f 6e6f   await wallet_no
-00010930: 6465 5f32 2e5f 7761 6c6c 6574 5f73 7461  de_2._wallet_sta
-00010940: 7465 5f6d 616e 6167 6572 2e6e 6674 5f73  te_manager.nft_s
-00010950: 746f 7265 2e63 6f75 6e74 2829 203d 3d20  tore.count() == 
-00010960: 300a 2020 2020 2320 7765 2064 6f6e 2774  0.    # we don't
-00010970: 2064 656c 6574 6520 7761 6c6c 6574 730a   delete wallets.
-00010980: 2020 2020 6173 7365 7274 206c 656e 2861      assert len(a
-00010990: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
-000109a0: 5f32 2e77 616c 6c65 745f 7374 6174 655f  _2.wallet_state_
-000109b0: 6d61 6e61 6765 722e 7573 6572 5f73 746f  manager.user_sto
-000109c0: 7265 2e67 6574 5f61 6c6c 5f77 616c 6c65  re.get_all_walle
-000109d0: 745f 696e 666f 5f65 6e74 7269 6573 2829  t_info_entries()
-000109e0: 2920 3d3d 2034 0a20 2020 2075 7064 6174  ) == 4.    updat
-000109f0: 6564 5f63 6f6e 6669 6720 3d20 6c6f 6164  ed_config = load
-00010a00: 5f63 6f6e 6669 6728 7761 6c6c 6574 5f6e  _config(wallet_n
-00010a10: 6f64 652e 726f 6f74 5f70 6174 682c 2022  ode.root_path, "
-00010a20: 636f 6e66 6967 2e79 616d 6c22 290a 2020  config.yaml").  
-00010a30: 2020 2320 6368 6563 6b20 7468 6174 2069    # check that i
-00010a40: 7427 7320 6469 7361 626c 6564 2061 6674  t's disabled aft
-00010a50: 6572 2072 6573 6574 0a20 2020 2061 7373  er reset.    ass
-00010a60: 6572 7420 7570 6461 7465 645f 636f 6e66  ert updated_conf
-00010a70: 6967 5b22 7761 6c6c 6574 225d 2e67 6574  ig["wallet"].get
-00010a80: 2822 7265 7365 745f 7379 6e63 5f66 6f72  ("reset_sync_for
-00010a90: 5f66 696e 6765 7270 7269 6e74 2229 2069  _fingerprint") i
-00010aa0: 7320 4e6f 6e65 0a20 2020 2077 616c 6c65  s None.    walle
-00010ab0: 745f 6e6f 6465 5f32 2e5f 636c 6f73 6528  t_node_2._close(
-00010ac0: 290a 2020 2020 6177 6169 7420 7761 6c6c  ).    await wall
-00010ad0: 6574 5f6e 6f64 655f 322e 5f61 7761 6974  et_node_2._await
-00010ae0: 5f63 6c6f 7365 6428 290a 0a0a 4070 7974  _closed()...@pyt
-00010af0: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
-00010b00: 0a61 7379 6e63 2064 6566 2074 6573 745f  .async def test_
-00010b10: 7365 745f 7761 6c6c 6574 5f72 6573 796e  set_wallet_resyn
-00010b20: 635f 6f6e 5f73 7461 7274 7570 5f64 6973  c_on_startup_dis
-00010b30: 6162 6c65 2877 616c 6c65 745f 7270 635f  able(wallet_rpc_
-00010b40: 656e 7669 726f 6e6d 656e 743a 2057 616c  environment: Wal
-00010b50: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
-00010b60: 6e6d 656e 7429 3a0a 2020 2020 656e 763a  nment):.    env:
-00010b70: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
-00010b80: 7669 726f 6e6d 656e 7420 3d20 7761 6c6c  vironment = wall
-00010b90: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
-00010ba0: 6e74 0a20 2020 2066 756c 6c5f 6e6f 6465  nt.    full_node
-00010bb0: 5f61 7069 3a20 4675 6c6c 4e6f 6465 5369  _api: FullNodeSi
-00010bc0: 6d75 6c61 746f 7220 3d20 656e 762e 6675  mulator = env.fu
-00010bd0: 6c6c 5f6e 6f64 652e 6170 690a 2020 2020  ll_node.api.    
-00010be0: 636c 6965 6e74 3a20 5761 6c6c 6574 5270  client: WalletRp
-00010bf0: 6343 6c69 656e 7420 3d20 656e 762e 7761  cClient = env.wa
-00010c00: 6c6c 6574 5f31 2e72 7063 5f63 6c69 656e  llet_1.rpc_clien
-00010c10: 740a 2020 2020 6177 6169 7420 6765 6e65  t.    await gene
-00010c20: 7261 7465 5f66 756e 6473 2866 756c 6c5f  rate_funds(full_
-00010c30: 6e6f 6465 5f61 7069 2c20 656e 762e 7761  node_api, env.wa
-00010c40: 6c6c 6574 5f31 290a 2020 2020 7761 6c6c  llet_1).    wall
-00010c50: 6574 5f6e 6f64 653a 2057 616c 6c65 744e  et_node: WalletN
-00010c60: 6f64 6520 3d20 656e 762e 7761 6c6c 6574  ode = env.wallet
-00010c70: 5f31 2e6e 6f64 650a 2020 2020 7761 6c6c  _1.node.    wall
-00010c80: 6574 5f6e 6f64 655f 323a 2057 616c 6c65  et_node_2: Walle
-00010c90: 744e 6f64 6520 3d20 656e 762e 7761 6c6c  tNode = env.wall
-00010ca0: 6574 5f32 2e6e 6f64 650a 2020 2020 7761  et_2.node.    wa
-00010cb0: 6c6c 6574 5f6e 6f64 655f 322e 5f63 6c6f  llet_node_2._clo
-00010cc0: 7365 2829 0a20 2020 2061 7761 6974 2077  se().    await w
-00010cd0: 616c 6c65 745f 6e6f 6465 5f32 2e5f 6177  allet_node_2._aw
-00010ce0: 6169 745f 636c 6f73 6564 2829 0a20 2020  ait_closed().   
-00010cf0: 2023 2073 6574 2066 6c61 6720 746f 2072   # set flag to r
-00010d00: 6573 6574 2077 616c 6c65 7420 7379 6e63  eset wallet sync
-00010d10: 2064 6174 6120 6f6e 2073 7461 7274 0a20   data on start. 
-00010d20: 2020 2061 7761 6974 2063 6c69 656e 742e     await client.
-00010d30: 7365 745f 7761 6c6c 6574 5f72 6573 796e  set_wallet_resyn
-00010d40: 635f 6f6e 5f73 7461 7274 7570 2829 0a20  c_on_startup(). 
-00010d50: 2020 2066 696e 6765 7270 7269 6e74 203d     fingerprint =
-00010d60: 2077 616c 6c65 745f 6e6f 6465 2e6c 6f67   wallet_node.log
-00010d70: 6765 645f 696e 5f66 696e 6765 7270 7269  ged_in_fingerpri
-00010d80: 6e74 0a20 2020 2061 7373 6572 7420 7761  nt.    assert wa
-00010d90: 6c6c 6574 5f6e 6f64 652e 5f77 616c 6c65  llet_node._walle
-00010da0: 745f 7374 6174 655f 6d61 6e61 6765 720a  t_state_manager.
-00010db0: 2020 2020 6173 7365 7274 206c 656e 2861      assert len(a
-00010dc0: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
-00010dd0: 2e5f 7761 6c6c 6574 5f73 7461 7465 5f6d  ._wallet_state_m
-00010de0: 616e 6167 6572 2e63 6f69 6e5f 7374 6f72  anager.coin_stor
-00010df0: 652e 6765 745f 616c 6c5f 756e 7370 656e  e.get_all_unspen
-00010e00: 745f 636f 696e 7328 2929 203d 3d20 320a  t_coins()) == 2.
-00010e10: 2020 2020 6265 666f 7265 5f74 7873 203d      before_txs =
-00010e20: 2061 7761 6974 2077 616c 6c65 745f 6e6f   await wallet_no
-00010e30: 6465 2e77 616c 6c65 745f 7374 6174 655f  de.wallet_state_
-00010e40: 6d61 6e61 6765 722e 7478 5f73 746f 7265  manager.tx_store
-00010e50: 2e67 6574 5f61 6c6c 5f74 7261 6e73 6163  .get_all_transac
-00010e60: 7469 6f6e 7328 290a 2020 2020 6177 6169  tions().    awai
-00010e70: 7420 636c 6965 6e74 2e73 6574 5f77 616c  t client.set_wal
-00010e80: 6c65 745f 7265 7379 6e63 5f6f 6e5f 7374  let_resync_on_st
-00010e90: 6172 7475 7028 4661 6c73 6529 0a20 2020  artup(False).   
-00010ea0: 2077 616c 6c65 745f 6e6f 6465 2e5f 636c   wallet_node._cl
-00010eb0: 6f73 6528 290a 2020 2020 6177 6169 7420  ose().    await 
-00010ec0: 7761 6c6c 6574 5f6e 6f64 652e 5f61 7761  wallet_node._awa
-00010ed0: 6974 5f63 6c6f 7365 6428 290a 2020 2020  it_closed().    
-00010ee0: 636f 6e66 6967 203d 206c 6f61 645f 636f  config = load_co
-00010ef0: 6e66 6967 2877 616c 6c65 745f 6e6f 6465  nfig(wallet_node
-00010f00: 2e72 6f6f 745f 7061 7468 2c20 2263 6f6e  .root_path, "con
-00010f10: 6669 672e 7961 6d6c 2229 0a20 2020 2023  fig.yaml").    #
-00010f20: 2063 6865 636b 2074 6861 7420 666c 6167   check that flag
-00010f30: 2077 6173 2073 6574 2069 6e20 636f 6e66   was set in conf
-00010f40: 6967 2066 696c 650a 2020 2020 6173 7365  ig file.    asse
-00010f50: 7274 2063 6f6e 6669 675b 2277 616c 6c65  rt config["walle
-00010f60: 7422 5d2e 6765 7428 2272 6573 6574 5f73  t"].get("reset_s
-00010f70: 796e 635f 666f 725f 6669 6e67 6572 7072  ync_for_fingerpr
-00010f80: 696e 7422 2920 6973 204e 6f6e 650a 2020  int") is None.  
-00010f90: 2020 6e65 775f 636f 6e66 6967 203d 2077    new_config = w
-00010fa0: 616c 6c65 745f 6e6f 6465 2e63 6f6e 6669  allet_node.confi
-00010fb0: 672e 636f 7079 2829 0a20 2020 206e 6577  g.copy().    new
-00010fc0: 5f63 6f6e 6669 675b 2272 6573 6574 5f73  _config["reset_s
-00010fd0: 796e 635f 666f 725f 6669 6e67 6572 7072  ync_for_fingerpr
-00010fe0: 696e 7422 5d20 3d20 636f 6e66 6967 5b22  int"] = config["
-00010ff0: 7761 6c6c 6574 225d 2e67 6574 2822 7265  wallet"].get("re
-00011000: 7365 745f 7379 6e63 5f66 6f72 5f66 696e  set_sync_for_fin
-00011010: 6765 7270 7269 6e74 2229 0a20 2020 2077  gerprint").    w
-00011020: 616c 6c65 745f 6e6f 6465 5f32 2e63 6f6e  allet_node_2.con
-00011030: 6669 6720 3d20 6e65 775f 636f 6e66 6967  fig = new_config
-00011040: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
-00011050: 5f32 2e72 6f6f 745f 7061 7468 203d 2077  _2.root_path = w
-00011060: 616c 6c65 745f 6e6f 6465 2e72 6f6f 745f  allet_node.root_
-00011070: 7061 7468 0a20 2020 2077 616c 6c65 745f  path.    wallet_
-00011080: 6e6f 6465 5f32 2e6c 6f63 616c 5f6b 6579  node_2.local_key
-00011090: 6368 6169 6e20 3d20 7761 6c6c 6574 5f6e  chain = wallet_n
-000110a0: 6f64 652e 6c6f 6361 6c5f 6b65 7963 6861  ode.local_keycha
-000110b0: 696e 0a20 2020 2023 2075 7365 2073 6563  in.    # use sec
-000110c0: 6f6e 6420 6e6f 6465 2074 6f20 7374 6172  ond node to star
-000110d0: 7420 7468 6520 7361 6d65 2077 616c 6c65  t the same walle
-000110e0: 742c 2072 6575 7369 6e67 2063 6f6e 6669  t, reusing confi
-000110f0: 6720 616e 6420 6462 0a20 2020 2061 7761  g and db.    awa
-00011100: 6974 2077 616c 6c65 745f 6e6f 6465 5f32  it wallet_node_2
-00011110: 2e5f 7374 6172 745f 7769 7468 5f66 696e  ._start_with_fin
-00011120: 6765 7270 7269 6e74 2866 696e 6765 7270  gerprint(fingerp
-00011130: 7269 6e74 290a 2020 2020 6173 7365 7274  rint).    assert
-00011140: 2077 616c 6c65 745f 6e6f 6465 5f32 2e5f   wallet_node_2._
-00011150: 7761 6c6c 6574 5f73 7461 7465 5f6d 616e  wallet_state_man
-00011160: 6167 6572 0a20 2020 2061 6674 6572 5f74  ager.    after_t
-00011170: 7873 203d 2061 7761 6974 2077 616c 6c65  xs = await walle
-00011180: 745f 6e6f 6465 5f32 2e77 616c 6c65 745f  t_node_2.wallet_
-00011190: 7374 6174 655f 6d61 6e61 6765 722e 7478  state_manager.tx
-000111a0: 5f73 746f 7265 2e67 6574 5f61 6c6c 5f74  _store.get_all_t
-000111b0: 7261 6e73 6163 7469 6f6e 7328 290a 2020  ransactions().  
-000111c0: 2020 2320 7472 616e 7361 6374 696f 6e73    # transactions
-000111d0: 2073 686f 756c 6420 6265 2074 6865 2073   should be the s
-000111e0: 616d 650a 2020 2020 6173 7365 7274 2061  ame.    assert a
-000111f0: 6674 6572 5f74 7873 203d 3d20 6265 666f  fter_txs == befo
-00011200: 7265 5f74 7873 0a20 2020 2023 206f 6e6c  re_txs.    # onl
-00011210: 7920 636f 696e 5f73 746f 7265 2077 6173  y coin_store was
-00011220: 2070 6f70 756c 6174 6564 2069 6e20 7468   populated in th
-00011230: 6973 2063 6173 652c 2062 7574 206e 6f77  is case, but now
-00011240: 2073 686f 756c 6420 6265 2065 6d70 7479   should be empty
-00011250: 0a20 2020 2061 7373 6572 7420 6c65 6e28  .    assert len(
-00011260: 6177 6169 7420 7761 6c6c 6574 5f6e 6f64  await wallet_nod
-00011270: 655f 322e 5f77 616c 6c65 745f 7374 6174  e_2._wallet_stat
-00011280: 655f 6d61 6e61 6765 722e 636f 696e 5f73  e_manager.coin_s
-00011290: 746f 7265 2e67 6574 5f61 6c6c 5f75 6e73  tore.get_all_uns
-000112a0: 7065 6e74 5f63 6f69 6e73 2829 2920 3d3d  pent_coins()) ==
-000112b0: 2032 0a20 2020 2077 616c 6c65 745f 6e6f   2.    wallet_no
-000112c0: 6465 5f32 2e5f 636c 6f73 6528 290a 2020  de_2._close().  
-000112d0: 2020 6177 6169 7420 7761 6c6c 6574 5f6e    await wallet_n
-000112e0: 6f64 655f 322e 5f61 7761 6974 5f63 6c6f  ode_2._await_clo
-000112f0: 7365 6428 290a 0a0a 4070 7974 6573 742e  sed()...@pytest.
-00011300: 6d61 726b 2e61 7379 6e63 696f 0a61 7379  mark.asyncio.asy
-00011310: 6e63 2064 6566 2074 6573 745f 7365 745f  nc def test_set_
-00011320: 7761 6c6c 6574 5f72 6573 796e 635f 7363  wallet_resync_sc
-00011330: 6865 6d61 2877 616c 6c65 745f 7270 635f  hema(wallet_rpc_
-00011340: 656e 7669 726f 6e6d 656e 743a 2057 616c  environment: Wal
-00011350: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
-00011360: 6e6d 656e 7429 3a0a 2020 2020 656e 763a  nment):.    env:
-00011370: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
-00011380: 7669 726f 6e6d 656e 7420 3d20 7761 6c6c  vironment = wall
-00011390: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
-000113a0: 6e74 0a20 2020 2066 756c 6c5f 6e6f 6465  nt.    full_node
-000113b0: 5f61 7069 3a20 4675 6c6c 4e6f 6465 5369  _api: FullNodeSi
-000113c0: 6d75 6c61 746f 7220 3d20 656e 762e 6675  mulator = env.fu
-000113d0: 6c6c 5f6e 6f64 652e 6170 690a 2020 2020  ll_node.api.    
-000113e0: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
-000113f0: 756e 6473 2866 756c 6c5f 6e6f 6465 5f61  unds(full_node_a
-00011400: 7069 2c20 656e 762e 7761 6c6c 6574 5f31  pi, env.wallet_1
-00011410: 290a 2020 2020 7761 6c6c 6574 5f6e 6f64  ).    wallet_nod
-00011420: 653a 2057 616c 6c65 744e 6f64 6520 3d20  e: WalletNode = 
-00011430: 656e 762e 7761 6c6c 6574 5f31 2e6e 6f64  env.wallet_1.nod
-00011440: 650a 2020 2020 6669 6e67 6572 7072 696e  e.    fingerprin
-00011450: 7420 3d20 7761 6c6c 6574 5f6e 6f64 652e  t = wallet_node.
-00011460: 6c6f 6767 6564 5f69 6e5f 6669 6e67 6572  logged_in_finger
-00011470: 7072 696e 740a 2020 2020 6173 7365 7274  print.    assert
-00011480: 2066 696e 6765 7270 7269 6e74 0a20 2020   fingerprint.   
-00011490: 2064 625f 7061 7468 203d 2077 616c 6c65   db_path = walle
-000114a0: 745f 6e6f 6465 2e77 616c 6c65 745f 7374  t_node.wallet_st
-000114b0: 6174 655f 6d61 6e61 6765 722e 6462 5f70  ate_manager.db_p
-000114c0: 6174 680a 2020 2020 6173 7365 7274 2061  ath.    assert a
-000114d0: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
-000114e0: 2e72 6573 6574 5f73 796e 635f 6462 280a  .reset_sync_db(.
-000114f0: 2020 2020 2020 2020 6462 5f70 6174 682c          db_path,
-00011500: 2066 696e 6765 7270 7269 6e74 0a20 2020   fingerprint.   
-00011510: 2029 2c20 2253 6368 656d 6120 6861 7320   ), "Schema has 
-00011520: 6265 656e 2063 6861 6e67 6564 2c20 7265  been changed, re
-00011530: 7365 7420 7379 6e63 2064 6220 776f 6e27  set sync db won'
-00011540: 7420 776f 726b 2c20 706c 6561 7365 2075  t work, please u
-00011550: 7064 6174 6520 5761 6c6c 6574 4e6f 6465  pdate WalletNode
-00011560: 2e72 6573 6574 5f73 796e 635f 6462 2066  .reset_sync_db f
-00011570: 756e 6374 696f 6e22 0a20 2020 2064 6277  unction".    dbw
-00011580: 3a20 4442 5772 6170 7065 7232 203d 2077  : DBWrapper2 = w
-00011590: 616c 6c65 745f 6e6f 6465 2e77 616c 6c65  allet_node.walle
-000115a0: 745f 7374 6174 655f 6d61 6e61 6765 722e  t_state_manager.
-000115b0: 6462 5f77 7261 7070 6572 0a20 2020 2063  db_wrapper.    c
-000115c0: 6f6e 6e3a 2061 696f 7371 6c69 7465 2e43  onn: aiosqlite.C
-000115d0: 6f6e 6e65 6374 696f 6e0a 2020 2020 6173  onnection.    as
-000115e0: 796e 6320 7769 7468 2064 6277 2e77 7269  ync with dbw.wri
-000115f0: 7465 7228 2920 6173 2063 6f6e 6e3a 0a20  ter() as conn:. 
-00011600: 2020 2020 2020 2061 7761 6974 2063 6f6e         await con
-00011610: 6e2e 6578 6563 7574 6528 2241 4c54 4552  n.execute("ALTER
-00011620: 2054 4142 4c45 2063 6f69 6e5f 7265 636f   TABLE coin_reco
-00011630: 7264 2052 454e 414d 4520 544f 2063 6f69  rd RENAME TO coi
-00011640: 6e5f 7265 636f 7264 5f74 656d 7022 290a  n_record_temp").
-00011650: 2020 2020 6173 7365 7274 206e 6f74 2061      assert not a
-00011660: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
-00011670: 2e72 6573 6574 5f73 796e 635f 6462 2864  .reset_sync_db(d
-00011680: 625f 7061 7468 2c20 6669 6e67 6572 7072  b_path, fingerpr
-00011690: 696e 7429 0a20 2020 2061 7379 6e63 2077  int).    async w
-000116a0: 6974 6820 6462 772e 7772 6974 6572 2829  ith dbw.writer()
-000116b0: 2061 7320 636f 6e6e 3a0a 2020 2020 2020   as conn:.      
-000116c0: 2020 6177 6169 7420 636f 6e6e 2e65 7865    await conn.exe
-000116d0: 6375 7465 2822 414c 5445 5220 5441 424c  cute("ALTER TABL
-000116e0: 4520 636f 696e 5f72 6563 6f72 645f 7465  E coin_record_te
-000116f0: 6d70 2052 454e 414d 4520 544f 2063 6f69  mp RENAME TO coi
-00011700: 6e5f 7265 636f 7264 2229 0a20 2020 2061  n_record").    a
-00011710: 7373 6572 7420 6177 6169 7420 7761 6c6c  ssert await wall
-00011720: 6574 5f6e 6f64 652e 7265 7365 745f 7379  et_node.reset_sy
-00011730: 6e63 5f64 6228 6462 5f70 6174 682c 2066  nc_db(db_path, f
-00011740: 696e 6765 7270 7269 6e74 290a 2020 2020  ingerprint).    
-00011750: 6173 796e 6320 7769 7468 2064 6277 2e77  async with dbw.w
-00011760: 7269 7465 7228 2920 6173 2063 6f6e 6e3a  riter() as conn:
-00011770: 0a20 2020 2020 2020 2061 7761 6974 2063  .        await c
-00011780: 6f6e 6e2e 6578 6563 7574 6528 2243 5245  onn.execute("CRE
-00011790: 4154 4520 5441 424c 4520 7465 7374 696e  ATE TABLE testin
-000117a0: 675f 7363 6865 6d61 2028 6120 696e 742c  g_schema (a int,
-000117b0: 2062 2062 6f6f 6c29 2229 0a20 2020 2061   b bool)").    a
-000117c0: 7373 6572 7420 6e6f 7420 6177 6169 7420  ssert not await 
-000117d0: 7761 6c6c 6574 5f6e 6f64 652e 7265 7365  wallet_node.rese
-000117e0: 745f 7379 6e63 5f64 6228 6462 5f70 6174  t_sync_db(db_pat
-000117f0: 682c 2066 696e 6765 7270 7269 6e74 290a  h, fingerprint).
-00011800: 2020 2020 6173 796e 6320 7769 7468 2064      async with d
-00011810: 6277 2e77 7269 7465 7228 2920 6173 2063  bw.writer() as c
-00011820: 6f6e 6e3a 0a20 2020 2020 2020 2061 7761  onn:.        awa
-00011830: 6974 2063 6f6e 6e2e 6578 6563 7574 6528  it conn.execute(
-00011840: 2244 524f 5020 5441 424c 4520 7465 7374  "DROP TABLE test
-00011850: 696e 675f 7363 6865 6d61 2229 0a20 2020  ing_schema").   
-00011860: 2061 7373 6572 7420 6177 6169 7420 7761   assert await wa
-00011870: 6c6c 6574 5f6e 6f64 652e 7265 7365 745f  llet_node.reset_
-00011880: 7379 6e63 5f64 6228 6462 5f70 6174 682c  sync_db(db_path,
-00011890: 2066 696e 6765 7270 7269 6e74 290a 0a0a   fingerprint)...
-000118a0: 4070 7974 6573 742e 6d61 726b 2e61 7379  @pytest.mark.asy
-000118b0: 6e63 696f 0a61 7379 6e63 2064 6566 2074  ncio.async def t
-000118c0: 6573 745f 6361 745f 7370 656e 645f 7275  est_cat_spend_ru
-000118d0: 6e5f 7461 696c 2877 616c 6c65 745f 7270  n_tail(wallet_rp
-000118e0: 635f 656e 7669 726f 6e6d 656e 743a 2057  c_environment: W
-000118f0: 616c 6c65 7452 7063 5465 7374 456e 7669  alletRpcTestEnvi
-00011900: 726f 6e6d 656e 7429 3a0a 2020 2020 656e  ronment):.    en
-00011910: 763a 2057 616c 6c65 7452 7063 5465 7374  v: WalletRpcTest
-00011920: 456e 7669 726f 6e6d 656e 7420 3d20 7761  Environment = wa
-00011930: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
-00011940: 6d65 6e74 0a0a 2020 2020 7761 6c6c 6574  ment..    wallet
-00011950: 5f6e 6f64 653a 2057 616c 6c65 744e 6f64  _node: WalletNod
-00011960: 6520 3d20 656e 762e 7761 6c6c 6574 5f31  e = env.wallet_1
-00011970: 2e6e 6f64 650a 2020 2020 636c 6965 6e74  .node.    client
-00011980: 3a20 5761 6c6c 6574 5270 6343 6c69 656e  : WalletRpcClien
-00011990: 7420 3d20 656e 762e 7761 6c6c 6574 5f31  t = env.wallet_1
-000119a0: 2e72 7063 5f63 6c69 656e 740a 2020 2020  .rpc_client.    
-000119b0: 6675 6c6c 5f6e 6f64 655f 6170 693a 2046  full_node_api: F
-000119c0: 756c 6c4e 6f64 6553 696d 756c 6174 6f72  ullNodeSimulator
-000119d0: 203d 2065 6e76 2e66 756c 6c5f 6e6f 6465   = env.full_node
-000119e0: 2e61 7069 0a20 2020 2066 756c 6c5f 6e6f  .api.    full_no
-000119f0: 6465 5f72 7063 3a20 4675 6c6c 4e6f 6465  de_rpc: FullNode
-00011a00: 5270 6343 6c69 656e 7420 3d20 656e 762e  RpcClient = env.
-00011a10: 6675 6c6c 5f6e 6f64 652e 7270 635f 636c  full_node.rpc_cl
-00011a20: 6965 6e74 0a0a 2020 2020 6177 6169 7420  ient..    await 
-00011a30: 6765 6e65 7261 7465 5f66 756e 6473 2866  generate_funds(f
-00011a40: 756c 6c5f 6e6f 6465 5f61 7069 2c20 656e  ull_node_api, en
-00011a50: 762e 7761 6c6c 6574 5f31 2c20 3129 0a0a  v.wallet_1, 1)..
-00011a60: 2020 2020 2320 5365 6e64 2074 6f20 6120      # Send to a 
-00011a70: 4341 5420 7769 7468 2061 6e20 616e 796f  CAT with an anyo
-00011a80: 6e65 2063 616e 2073 7065 6e64 2054 4149  ne can spend TAI
-00011a90: 4c0a 2020 2020 6f75 725f 7068 3a20 6279  L.    our_ph: by
-00011aa0: 7465 7333 3220 3d20 6177 6169 7420 656e  tes32 = await en
-00011ab0: 762e 7761 6c6c 6574 5f31 2e77 616c 6c65  v.wallet_1.walle
-00011ac0: 742e 6765 745f 6e65 775f 7075 7a7a 6c65  t.get_new_puzzle
-00011ad0: 6861 7368 2829 0a20 2020 2063 6174 5f70  hash().    cat_p
-00011ae0: 757a 7a6c 653a 2050 726f 6772 616d 203d  uzzle: Program =
-00011af0: 2063 6f6e 7374 7275 6374 5f63 6174 5f70   construct_cat_p
-00011b00: 757a 7a6c 6528 4341 545f 4d4f 442c 2050  uzzle(CAT_MOD, P
-00011b10: 726f 6772 616d 2e74 6f28 4e6f 6e65 292e  rogram.to(None).
-00011b20: 6765 745f 7472 6565 5f68 6173 6828 292c  get_tree_hash(),
-00011b30: 2050 726f 6772 616d 2e74 6f28 3129 290a   Program.to(1)).
-00011b40: 2020 2020 6164 6472 203d 2065 6e63 6f64      addr = encod
-00011b50: 655f 7075 7a7a 6c65 5f68 6173 6828 0a20  e_puzzle_hash(. 
-00011b60: 2020 2020 2020 2063 6174 5f70 757a 7a6c         cat_puzzl
-00011b70: 652e 6765 745f 7472 6565 5f68 6173 6828  e.get_tree_hash(
-00011b80: 292c 0a20 2020 2020 2020 2022 7478 6368  ),.        "txch
-00011b90: 222c 0a20 2020 2029 0a20 2020 2074 785f  ",.    ).    tx_
-00011ba0: 616d 6f75 6e74 203d 2075 696e 7436 3428  amount = uint64(
-00011bb0: 3130 3029 0a0a 2020 2020 7478 203d 2061  100)..    tx = a
-00011bc0: 7761 6974 2063 6c69 656e 742e 7365 6e64  wait client.send
-00011bd0: 5f74 7261 6e73 6163 7469 6f6e 2831 2c20  _transaction(1, 
-00011be0: 7478 5f61 6d6f 756e 742c 2061 6464 7229  tx_amount, addr)
-00011bf0: 0a20 2020 2074 7261 6e73 6163 7469 6f6e  .    transaction
-00011c00: 5f69 6420 3d20 7478 2e6e 616d 650a 2020  _id = tx.name.  
-00011c10: 2020 7370 656e 645f 6275 6e64 6c65 203d    spend_bundle =
-00011c20: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
-00011c30: 0a20 2020 2061 7373 6572 7420 7370 656e  .    assert spen
-00011c40: 645f 6275 6e64 6c65 2069 7320 6e6f 7420  d_bundle is not 
-00011c50: 4e6f 6e65 0a0a 2020 2020 6177 6169 7420  None..    await 
-00011c60: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
-00011c70: 3230 2c20 7478 5f69 6e5f 6d65 6d70 6f6f  20, tx_in_mempoo
-00011c80: 6c2c 2054 7275 652c 2063 6c69 656e 742c  l, True, client,
-00011c90: 2074 7261 6e73 6163 7469 6f6e 5f69 6429   transaction_id)
-00011ca0: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
-00011cb0: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
-00011cc0: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
-00011cd0: 745f 6e6f 6465 2c20 7370 656e 645f 6275  t_node, spend_bu
-00011ce0: 6e64 6c65 290a 0a20 2020 2023 2044 6f20  ndle)..    # Do 
-00011cf0: 7468 6520 6576 6520 7370 656e 6420 6261  the eve spend ba
-00011d00: 636b 2074 6f20 6f75 7220 7761 6c6c 6574  ck to our wallet
-00011d10: 0a20 2020 2063 6174 5f63 6f69 6e20 3d20  .    cat_coin = 
-00011d20: 6e65 7874 2863 2066 6f72 2063 2069 6e20  next(c for c in 
-00011d30: 7370 656e 645f 6275 6e64 6c65 2e61 6464  spend_bundle.add
-00011d40: 6974 696f 6e73 2829 2069 6620 632e 616d  itions() if c.am
-00011d50: 6f75 6e74 203d 3d20 7478 5f61 6d6f 756e  ount == tx_amoun
-00011d60: 7429 0a20 2020 2065 7665 5f73 7065 6e64  t).    eve_spend
-00011d70: 203d 2053 7065 6e64 4275 6e64 6c65 280a   = SpendBundle(.
-00011d80: 2020 2020 2020 2020 5b0a 2020 2020 2020          [.      
-00011d90: 2020 2020 2020 436f 696e 5370 656e 6428        CoinSpend(
-00011da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011db0: 2063 6174 5f63 6f69 6e2c 0a20 2020 2020   cat_coin,.     
-00011dc0: 2020 2020 2020 2020 2020 2063 6174 5f70             cat_p
-00011dd0: 757a 7a6c 652c 0a20 2020 2020 2020 2020  uzzle,.         
-00011de0: 2020 2020 2020 2050 726f 6772 616d 2e74         Program.t
-00011df0: 6f28 0a20 2020 2020 2020 2020 2020 2020  o(.             
-00011e00: 2020 2020 2020 205b 0a20 2020 2020 2020         [.       
-00011e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e20: 2050 726f 6772 616d 2e74 6f28 5b5b 3531   Program.to([[51
-00011e30: 2c20 6f75 725f 7068 2c20 7478 5f61 6d6f  , our_ph, tx_amo
-00011e40: 756e 745d 2c20 5b35 312c 204e 6f6e 652c  unt], [51, None,
-00011e50: 202d 3131 332c 204e 6f6e 652c 204e 6f6e   -113, None, Non
-00011e60: 655d 5d29 2c0a 2020 2020 2020 2020 2020  e]]),.          
-00011e70: 2020 2020 2020 2020 2020 2020 2020 4e6f                No
-00011e80: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00011e90: 2020 2020 2020 2020 2020 2020 6361 745f              cat_
-00011ea0: 636f 696e 2e6e 616d 6528 292c 0a20 2020  coin.name(),.   
-00011eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ec0: 2020 2020 2063 6f69 6e5f 6173 5f6c 6973       coin_as_lis
-00011ed0: 7428 6361 745f 636f 696e 292c 0a20 2020  t(cat_coin),.   
-00011ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ef0: 2020 2020 205b 6361 745f 636f 696e 2e70       [cat_coin.p
-00011f00: 6172 656e 745f 636f 696e 5f69 6e66 6f2c  arent_coin_info,
-00011f10: 2050 726f 6772 616d 2e74 6f28 3129 2e67   Program.to(1).g
-00011f20: 6574 5f74 7265 655f 6861 7368 2829 2c20  et_tree_hash(), 
-00011f30: 6361 745f 636f 696e 2e61 6d6f 756e 745d  cat_coin.amount]
-00011f40: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00011f50: 2020 2020 2020 2020 2020 302c 0a20 2020            0,.   
-00011f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f70: 2020 2020 2030 2c0a 2020 2020 2020 2020       0,.        
-00011f80: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
-00011f90: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-00011fa0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00011fb0: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-00011fc0: 2020 4732 456c 656d 656e 7428 292c 0a20    G2Element(),. 
-00011fd0: 2020 2029 0a20 2020 2061 7761 6974 2066     ).    await f
-00011fe0: 756c 6c5f 6e6f 6465 5f72 7063 2e70 7573  ull_node_rpc.pus
-00011ff0: 685f 7478 2865 7665 5f73 7065 6e64 290a  h_tx(eve_spend).
-00012000: 2020 2020 6177 6169 7420 6661 726d 5f74      await farm_t
-00012010: 7261 6e73 6163 7469 6f6e 2866 756c 6c5f  ransaction(full_
-00012020: 6e6f 6465 5f61 7069 2c20 7761 6c6c 6574  node_api, wallet
-00012030: 5f6e 6f64 652c 2065 7665 5f73 7065 6e64  _node, eve_spend
-00012040: 290a 0a20 2020 2023 204d 616b 6520 7375  )..    # Make su
-00012050: 7265 2077 6520 6861 7665 2074 6865 2043  re we have the C
-00012060: 4154 0a20 2020 2072 6573 203d 2061 7761  AT.    res = awa
-00012070: 6974 2063 6c69 656e 742e 6372 6561 7465  it client.create
-00012080: 5f77 616c 6c65 745f 666f 725f 6578 6973  _wallet_for_exis
-00012090: 7469 6e67 5f63 6174 2850 726f 6772 616d  ting_cat(Program
-000120a0: 2e74 6f28 4e6f 6e65 292e 6765 745f 7472  .to(None).get_tr
-000120b0: 6565 5f68 6173 6828 2929 0a20 2020 2061  ee_hash()).    a
-000120c0: 7373 6572 7420 7265 735b 2273 7563 6365  ssert res["succe
-000120d0: 7373 225d 0a20 2020 2063 6174 5f77 616c  ss"].    cat_wal
-000120e0: 6c65 745f 6964 203d 2072 6573 5b22 7761  let_id = res["wa
-000120f0: 6c6c 6574 5f69 6422 5d0a 2020 2020 6177  llet_id"].    aw
-00012100: 6169 7420 7469 6d65 5f6f 7574 5f61 7373  ait time_out_ass
-00012110: 6572 7428 3230 2c20 6765 745f 636f 6e66  ert(20, get_conf
-00012120: 6972 6d65 645f 6261 6c61 6e63 652c 2074  irmed_balance, t
-00012130: 785f 616d 6f75 6e74 2c20 636c 6965 6e74  x_amount, client
-00012140: 2c20 6361 745f 7761 6c6c 6574 5f69 6429  , cat_wallet_id)
-00012150: 0a0a 2020 2020 2320 4174 7465 6d70 7420  ..    # Attempt 
-00012160: 746f 206d 656c 7420 6974 2066 756c 6c79  to melt it fully
-00012170: 0a20 2020 2074 7820 3d20 6177 6169 7420  .    tx = await 
-00012180: 636c 6965 6e74 2e63 6174 5f73 7065 6e64  client.cat_spend
-00012190: 280a 2020 2020 2020 2020 6361 745f 7761  (.        cat_wa
-000121a0: 6c6c 6574 5f69 642c 0a20 2020 2020 2020  llet_id,.       
-000121b0: 2061 6d6f 756e 743d 7569 6e74 3634 2830   amount=uint64(0
-000121c0: 292c 0a20 2020 2020 2020 2069 6e6e 6572  ),.        inner
-000121d0: 5f61 6464 7265 7373 3d65 6e63 6f64 655f  _address=encode_
-000121e0: 7075 7a7a 6c65 5f68 6173 6828 6f75 725f  puzzle_hash(our_
-000121f0: 7068 2c20 2274 7863 6822 292c 0a20 2020  ph, "txch"),.   
-00012200: 2020 2020 2063 6174 5f64 6973 6372 6570       cat_discrep
-00012210: 616e 6379 3d28 7478 5f61 6d6f 756e 7420  ancy=(tx_amount 
-00012220: 2a20 2d31 2c20 5072 6f67 7261 6d2e 746f  * -1, Program.to
-00012230: 284e 6f6e 6529 2c20 5072 6f67 7261 6d2e  (None), Program.
-00012240: 746f 284e 6f6e 6529 292c 0a20 2020 2029  to(None)),.    )
-00012250: 0a20 2020 2074 7261 6e73 6163 7469 6f6e  .    transaction
-00012260: 5f69 6420 3d20 7478 2e6e 616d 650a 2020  _id = tx.name.  
-00012270: 2020 7370 656e 645f 6275 6e64 6c65 203d    spend_bundle =
-00012280: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
-00012290: 0a20 2020 2061 7373 6572 7420 7370 656e  .    assert spen
-000122a0: 645f 6275 6e64 6c65 2069 7320 6e6f 7420  d_bundle is not 
-000122b0: 4e6f 6e65 0a0a 2020 2020 6177 6169 7420  None..    await 
-000122c0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
-000122d0: 3230 2c20 7478 5f69 6e5f 6d65 6d70 6f6f  20, tx_in_mempoo
-000122e0: 6c2c 2054 7275 652c 2063 6c69 656e 742c  l, True, client,
-000122f0: 2074 7261 6e73 6163 7469 6f6e 5f69 6429   transaction_id)
-00012300: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
-00012310: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
-00012320: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
-00012330: 745f 6e6f 6465 2c20 7370 656e 645f 6275  t_node, spend_bu
-00012340: 6e64 6c65 290a 0a20 2020 2061 7761 6974  ndle)..    await
-00012350: 2074 696d 655f 6f75 745f 6173 7365 7274   time_out_assert
-00012360: 2832 302c 2067 6574 5f63 6f6e 6669 726d  (20, get_confirm
-00012370: 6564 5f62 616c 616e 6365 2c20 302c 2063  ed_balance, 0, c
-00012380: 6c69 656e 742c 2063 6174 5f77 616c 6c65  lient, cat_walle
-00012390: 745f 6964 290a                           t_id).
+00000020: 6e73 0a0a 696d 706f 7274 2061 7379 6e63  ns..import async
+00000030: 696f 0a69 6d70 6f72 7420 6461 7461 636c  io.import datacl
+00000040: 6173 7365 730a 696d 706f 7274 206a 736f  asses.import jso
+00000050: 6e0a 696d 706f 7274 206c 6f67 6769 6e67  n.import logging
+00000060: 0a66 726f 6d20 6f70 6572 6174 6f72 2069  .from operator i
+00000070: 6d70 6f72 7420 6174 7472 6765 7474 6572  mport attrgetter
+00000080: 0a66 726f 6d20 7365 6372 6574 7320 696d  .from secrets im
+00000090: 706f 7274 2074 6f6b 656e 5f62 7974 6573  port token_bytes
+000000a0: 0a66 726f 6d20 7479 7069 6e67 2069 6d70  .from typing imp
+000000b0: 6f72 7420 416e 792c 2044 6963 742c 204c  ort Any, Dict, L
+000000c0: 6973 742c 204f 7074 696f 6e61 6c2c 2054  ist, Optional, T
+000000d0: 7570 6c65 2c20 6361 7374 0a0a 696d 706f  uple, cast..impo
+000000e0: 7274 2061 696f 7371 6c69 7465 0a69 6d70  rt aiosqlite.imp
+000000f0: 6f72 7420 7079 7465 7374 0a69 6d70 6f72  ort pytest.impor
+00000100: 7420 7079 7465 7374 5f61 7379 6e63 696f  t pytest_asyncio
+00000110: 0a66 726f 6d20 626c 7370 7920 696d 706f  .from blspy impo
+00000120: 7274 2047 3245 6c65 6d65 6e74 0a0a 6672  rt G2Element..fr
+00000130: 6f6d 2063 6869 612e 636f 6e73 656e 7375  om chia.consensu
+00000140: 732e 626c 6f63 6b5f 7265 7761 7264 7320  s.block_rewards 
+00000150: 696d 706f 7274 2063 616c 6375 6c61 7465  import calculate
+00000160: 5f62 6173 655f 6661 726d 6572 5f72 6577  _base_farmer_rew
+00000170: 6172 642c 2063 616c 6375 6c61 7465 5f70  ard, calculate_p
+00000180: 6f6f 6c5f 7265 7761 7264 0a66 726f 6d20  ool_reward.from 
+00000190: 6368 6961 2e63 6f6e 7365 6e73 7573 2e63  chia.consensus.c
+000001a0: 6f69 6e62 6173 6520 696d 706f 7274 2063  oinbase import c
+000001b0: 7265 6174 655f 7075 7a7a 6c65 6861 7368  reate_puzzlehash
+000001c0: 5f66 6f72 5f70 6b0a 6672 6f6d 2063 6869  _for_pk.from chi
+000001d0: 612e 7270 632e 6675 6c6c 5f6e 6f64 655f  a.rpc.full_node_
+000001e0: 7270 635f 636c 6965 6e74 2069 6d70 6f72  rpc_client impor
+000001f0: 7420 4675 6c6c 4e6f 6465 5270 6343 6c69  t FullNodeRpcCli
+00000200: 656e 740a 6672 6f6d 2063 6869 612e 7270  ent.from chia.rp
+00000210: 632e 7270 635f 7365 7276 6572 2069 6d70  c.rpc_server imp
+00000220: 6f72 7420 5270 6353 6572 7665 720a 6672  ort RpcServer.fr
+00000230: 6f6d 2063 6869 612e 7270 632e 7761 6c6c  om chia.rpc.wall
+00000240: 6574 5f72 7063 5f61 7069 2069 6d70 6f72  et_rpc_api impor
+00000250: 7420 5761 6c6c 6574 5270 6341 7069 0a66  t WalletRpcApi.f
+00000260: 726f 6d20 6368 6961 2e72 7063 2e77 616c  rom chia.rpc.wal
+00000270: 6c65 745f 7270 635f 636c 6965 6e74 2069  let_rpc_client i
+00000280: 6d70 6f72 7420 5761 6c6c 6574 5270 6343  mport WalletRpcC
+00000290: 6c69 656e 740a 6672 6f6d 2063 6869 612e  lient.from chia.
+000002a0: 7365 7276 6572 2e73 6572 7665 7220 696d  server.server im
+000002b0: 706f 7274 2043 6869 6153 6572 7665 720a  port ChiaServer.
+000002c0: 6672 6f6d 2063 6869 612e 7365 7276 6572  from chia.server
+000002d0: 2e73 7461 7274 5f73 6572 7669 6365 2069  .start_service i
+000002e0: 6d70 6f72 7420 5365 7276 6963 650a 6672  mport Service.fr
+000002f0: 6f6d 2063 6869 612e 7369 6d75 6c61 746f  om chia.simulato
+00000300: 722e 6675 6c6c 5f6e 6f64 655f 7369 6d75  r.full_node_simu
+00000310: 6c61 746f 7220 696d 706f 7274 2046 756c  lator import Ful
+00000320: 6c4e 6f64 6553 696d 756c 6174 6f72 0a66  lNodeSimulator.f
+00000330: 726f 6d20 6368 6961 2e73 696d 756c 6174  rom chia.simulat
+00000340: 6f72 2e73 696d 756c 6174 6f72 5f70 726f  or.simulator_pro
+00000350: 746f 636f 6c20 696d 706f 7274 2046 6172  tocol import Far
+00000360: 6d4e 6577 426c 6f63 6b50 726f 746f 636f  mNewBlockProtoco
+00000370: 6c0a 6672 6f6d 2063 6869 612e 7369 6d75  l.from chia.simu
+00000380: 6c61 746f 722e 7469 6d65 5f6f 7574 5f61  lator.time_out_a
+00000390: 7373 6572 7420 696d 706f 7274 2074 696d  ssert import tim
+000003a0: 655f 6f75 745f 6173 7365 7274 2c20 7469  e_out_assert, ti
+000003b0: 6d65 5f6f 7574 5f61 7373 6572 745f 6e6f  me_out_assert_no
+000003c0: 745f 6e6f 6e65 0a66 726f 6d20 6368 6961  t_none.from chia
+000003d0: 2e74 7970 6573 2e61 6e6e 6f75 6e63 656d  .types.announcem
+000003e0: 656e 7420 696d 706f 7274 2041 6e6e 6f75  ent import Annou
+000003f0: 6e63 656d 656e 740a 6672 6f6d 2063 6869  ncement.from chi
+00000400: 612e 7479 7065 732e 626c 6f63 6b63 6861  a.types.blockcha
+00000410: 696e 5f66 6f72 6d61 742e 636f 696e 2069  in_format.coin i
+00000420: 6d70 6f72 7420 436f 696e 2c20 636f 696e  mport Coin, coin
+00000430: 5f61 735f 6c69 7374 0a66 726f 6d20 6368  _as_list.from ch
+00000440: 6961 2e74 7970 6573 2e62 6c6f 636b 6368  ia.types.blockch
+00000450: 6169 6e5f 666f 726d 6174 2e70 726f 6772  ain_format.progr
+00000460: 616d 2069 6d70 6f72 7420 5072 6f67 7261  am import Progra
+00000470: 6d0a 6672 6f6d 2063 6869 612e 7479 7065  m.from chia.type
+00000480: 732e 626c 6f63 6b63 6861 696e 5f66 6f72  s.blockchain_for
+00000490: 6d61 742e 7369 7a65 645f 6279 7465 7320  mat.sized_bytes 
+000004a0: 696d 706f 7274 2062 7974 6573 3332 0a66  import bytes32.f
+000004b0: 726f 6d20 6368 6961 2e74 7970 6573 2e63  rom chia.types.c
+000004c0: 6f69 6e5f 7265 636f 7264 2069 6d70 6f72  oin_record impor
+000004d0: 7420 436f 696e 5265 636f 7264 0a66 726f  t CoinRecord.fro
+000004e0: 6d20 6368 6961 2e74 7970 6573 2e63 6f69  m chia.types.coi
+000004f0: 6e5f 7370 656e 6420 696d 706f 7274 2043  n_spend import C
+00000500: 6f69 6e53 7065 6e64 0a66 726f 6d20 6368  oinSpend.from ch
+00000510: 6961 2e74 7970 6573 2e70 6565 725f 696e  ia.types.peer_in
+00000520: 666f 2069 6d70 6f72 7420 5065 6572 496e  fo import PeerIn
+00000530: 666f 0a66 726f 6d20 6368 6961 2e74 7970  fo.from chia.typ
+00000540: 6573 2e73 6967 6e69 6e67 5f6d 6f64 6520  es.signing_mode 
+00000550: 696d 706f 7274 2053 6967 6e69 6e67 4d6f  import SigningMo
+00000560: 6465 0a66 726f 6d20 6368 6961 2e74 7970  de.from chia.typ
+00000570: 6573 2e73 7065 6e64 5f62 756e 646c 6520  es.spend_bundle 
+00000580: 696d 706f 7274 2053 7065 6e64 4275 6e64  import SpendBund
+00000590: 6c65 0a66 726f 6d20 6368 6961 2e75 7469  le.from chia.uti
+000005a0: 6c2e 6265 6368 3332 6d20 696d 706f 7274  l.bech32m import
+000005b0: 2064 6563 6f64 655f 7075 7a7a 6c65 5f68   decode_puzzle_h
+000005c0: 6173 682c 2065 6e63 6f64 655f 7075 7a7a  ash, encode_puzz
+000005d0: 6c65 5f68 6173 680a 6672 6f6d 2063 6869  le_hash.from chi
+000005e0: 612e 7574 696c 2e63 6f6e 6669 6720 696d  a.util.config im
+000005f0: 706f 7274 206c 6f61 645f 636f 6e66 6967  port load_config
+00000600: 2c20 6c6f 636b 5f61 6e64 5f6c 6f61 645f  , lock_and_load_
+00000610: 636f 6e66 6967 2c20 7361 7665 5f63 6f6e  config, save_con
+00000620: 6669 670a 6672 6f6d 2063 6869 612e 7574  fig.from chia.ut
+00000630: 696c 2e64 625f 7772 6170 7065 7220 696d  il.db_wrapper im
+00000640: 706f 7274 2044 4257 7261 7070 6572 320a  port DBWrapper2.
+00000650: 6672 6f6d 2063 6869 612e 7574 696c 2e68  from chia.util.h
+00000660: 6173 6820 696d 706f 7274 2073 7464 5f68  ash import std_h
+00000670: 6173 680a 6672 6f6d 2063 6869 612e 7574  ash.from chia.ut
+00000680: 696c 2e69 6e74 7320 696d 706f 7274 2075  il.ints import u
+00000690: 696e 7431 362c 2075 696e 7433 322c 2075  int16, uint32, u
+000006a0: 696e 7436 340a 6672 6f6d 2063 6869 612e  int64.from chia.
+000006b0: 7574 696c 2e73 7472 6561 6d61 626c 6520  util.streamable 
+000006c0: 696d 706f 7274 2043 6f6e 7665 7273 696f  import Conversio
+000006d0: 6e45 7272 6f72 2c20 496e 7661 6c69 6454  nError, InvalidT
+000006e0: 7970 6545 7272 6f72 0a66 726f 6d20 6368  ypeError.from ch
+000006f0: 6961 2e77 616c 6c65 742e 6361 745f 7761  ia.wallet.cat_wa
+00000700: 6c6c 6574 2e63 6174 5f63 6f6e 7374 616e  llet.cat_constan
+00000710: 7473 2069 6d70 6f72 7420 4445 4641 554c  ts import DEFAUL
+00000720: 545f 4341 5453 0a66 726f 6d20 6368 6961  T_CATS.from chia
+00000730: 2e77 616c 6c65 742e 6361 745f 7761 6c6c  .wallet.cat_wall
+00000740: 6574 2e63 6174 5f75 7469 6c73 2069 6d70  et.cat_utils imp
+00000750: 6f72 7420 4341 545f 4d4f 442c 2063 6f6e  ort CAT_MOD, con
+00000760: 7374 7275 6374 5f63 6174 5f70 757a 7a6c  struct_cat_puzzl
+00000770: 650a 6672 6f6d 2063 6869 612e 7761 6c6c  e.from chia.wall
+00000780: 6574 2e63 6174 5f77 616c 6c65 742e 6361  et.cat_wallet.ca
+00000790: 745f 7761 6c6c 6574 2069 6d70 6f72 7420  t_wallet import 
+000007a0: 4341 5457 616c 6c65 740a 6672 6f6d 2063  CATWallet.from c
+000007b0: 6869 612e 7761 6c6c 6574 2e64 6572 6976  hia.wallet.deriv
+000007c0: 655f 6b65 7973 2069 6d70 6f72 7420 6d61  e_keys import ma
+000007d0: 7374 6572 5f73 6b5f 746f 5f77 616c 6c65  ster_sk_to_walle
+000007e0: 745f 736b 2c20 6d61 7374 6572 5f73 6b5f  t_sk, master_sk_
+000007f0: 746f 5f77 616c 6c65 745f 736b 5f75 6e68  to_wallet_sk_unh
+00000800: 6172 6465 6e65 640a 6672 6f6d 2063 6869  ardened.from chi
+00000810: 612e 7761 6c6c 6574 2e64 6964 5f77 616c  a.wallet.did_wal
+00000820: 6c65 742e 6469 645f 7761 6c6c 6574 2069  let.did_wallet i
+00000830: 6d70 6f72 7420 4449 4457 616c 6c65 740a  mport DIDWallet.
+00000840: 6672 6f6d 2063 6869 612e 7761 6c6c 6574  from chia.wallet
+00000850: 2e6e 6674 5f77 616c 6c65 742e 6e66 745f  .nft_wallet.nft_
+00000860: 7761 6c6c 6574 2069 6d70 6f72 7420 4e46  wallet import NF
+00000870: 5457 616c 6c65 740a 6672 6f6d 2063 6869  TWallet.from chi
+00000880: 612e 7761 6c6c 6574 2e74 7261 6469 6e67  a.wallet.trading
+00000890: 2e74 7261 6465 5f73 7461 7475 7320 696d  .trade_status im
+000008a0: 706f 7274 2054 7261 6465 5374 6174 7573  port TradeStatus
+000008b0: 0a66 726f 6d20 6368 6961 2e77 616c 6c65  .from chia.walle
+000008c0: 742e 7472 616e 7361 6374 696f 6e5f 7265  t.transaction_re
+000008d0: 636f 7264 2069 6d70 6f72 7420 5472 616e  cord import Tran
+000008e0: 7361 6374 696f 6e52 6563 6f72 640a 6672  sactionRecord.fr
+000008f0: 6f6d 2063 6869 612e 7761 6c6c 6574 2e74  om chia.wallet.t
+00000900: 7261 6e73 6163 7469 6f6e 5f73 6f72 7469  ransaction_sorti
+00000910: 6e67 2069 6d70 6f72 7420 536f 7274 4b65  ng import SortKe
+00000920: 790a 6672 6f6d 2063 6869 612e 7761 6c6c  y.from chia.wall
+00000930: 6574 2e75 6e63 7572 7269 6564 5f70 757a  et.uncurried_puz
+00000940: 7a6c 6520 696d 706f 7274 2075 6e63 7572  zle import uncur
+00000950: 7279 5f70 757a 7a6c 650a 6672 6f6d 2063  ry_puzzle.from c
+00000960: 6869 612e 7761 6c6c 6574 2e75 7469 6c2e  hia.wallet.util.
+00000970: 6164 6472 6573 735f 7479 7065 2069 6d70  address_type imp
+00000980: 6f72 7420 4164 6472 6573 7354 7970 650a  ort AddressType.
+00000990: 6672 6f6d 2063 6869 612e 7761 6c6c 6574  from chia.wallet
+000009a0: 2e75 7469 6c2e 636f 6d70 7574 655f 6d65  .util.compute_me
+000009b0: 6d6f 7320 696d 706f 7274 2063 6f6d 7075  mos import compu
+000009c0: 7465 5f6d 656d 6f73 0a66 726f 6d20 6368  te_memos.from ch
+000009d0: 6961 2e77 616c 6c65 742e 7574 696c 2e71  ia.wallet.util.q
+000009e0: 7565 7279 5f66 696c 7465 7220 696d 706f  uery_filter impo
+000009f0: 7274 2041 6d6f 756e 7446 696c 7465 722c  rt AmountFilter,
+00000a00: 2048 6173 6846 696c 7465 722c 2054 7261   HashFilter, Tra
+00000a10: 6e73 6163 7469 6f6e 5479 7065 4669 6c74  nsactionTypeFilt
+00000a20: 6572 0a66 726f 6d20 6368 6961 2e77 616c  er.from chia.wal
+00000a30: 6c65 742e 7574 696c 2e74 7261 6e73 6163  let.util.transac
+00000a40: 7469 6f6e 5f74 7970 6520 696d 706f 7274  tion_type import
+00000a50: 2054 7261 6e73 6163 7469 6f6e 5479 7065   TransactionType
+00000a60: 0a66 726f 6d20 6368 6961 2e77 616c 6c65  .from chia.walle
+00000a70: 742e 7574 696c 2e77 616c 6c65 745f 7479  t.util.wallet_ty
+00000a80: 7065 7320 696d 706f 7274 2043 6f69 6e54  pes import CoinT
+00000a90: 7970 652c 2057 616c 6c65 7454 7970 650a  ype, WalletType.
+00000aa0: 6672 6f6d 2063 6869 612e 7761 6c6c 6574  from chia.wallet
+00000ab0: 2e77 616c 6c65 7420 696d 706f 7274 2057  .wallet import W
+00000ac0: 616c 6c65 740a 6672 6f6d 2063 6869 612e  allet.from chia.
+00000ad0: 7761 6c6c 6574 2e77 616c 6c65 745f 636f  wallet.wallet_co
+00000ae0: 696e 5f72 6563 6f72 6420 696d 706f 7274  in_record import
+00000af0: 2057 616c 6c65 7443 6f69 6e52 6563 6f72   WalletCoinRecor
+00000b00: 640a 6672 6f6d 2063 6869 612e 7761 6c6c  d.from chia.wall
+00000b10: 6574 2e77 616c 6c65 745f 636f 696e 5f73  et.wallet_coin_s
+00000b20: 746f 7265 2069 6d70 6f72 7420 4765 7443  tore import GetC
+00000b30: 6f69 6e52 6563 6f72 6473 0a66 726f 6d20  oinRecords.from 
+00000b40: 6368 6961 2e77 616c 6c65 742e 7761 6c6c  chia.wallet.wall
+00000b50: 6574 5f6e 6f64 6520 696d 706f 7274 2057  et_node import W
+00000b60: 616c 6c65 744e 6f64 650a 6672 6f6d 2063  alletNode.from c
+00000b70: 6869 612e 7761 6c6c 6574 2e77 616c 6c65  hia.wallet.walle
+00000b80: 745f 7072 6f74 6f63 6f6c 2069 6d70 6f72  t_protocol impor
+00000b90: 7420 5761 6c6c 6574 5072 6f74 6f63 6f6c  t WalletProtocol
+00000ba0: 0a66 726f 6d20 7465 7374 732e 7761 6c6c  .from tests.wall
+00000bb0: 6574 2e74 6573 745f 7761 6c6c 6574 5f63  et.test_wallet_c
+00000bc0: 6f69 6e5f 7374 6f72 6520 696d 706f 7274  oin_store import
+00000bd0: 2028 0a20 2020 2067 6574 5f63 6f69 6e5f   (.    get_coin_
+00000be0: 7265 636f 7264 735f 616d 6f75 6e74 5f66  records_amount_f
+00000bf0: 696c 7465 725f 7465 7374 732c 0a20 2020  ilter_tests,.   
+00000c00: 2067 6574 5f63 6f69 6e5f 7265 636f 7264   get_coin_record
+00000c10: 735f 616d 6f75 6e74 5f72 616e 6765 5f74  s_amount_range_t
+00000c20: 6573 7473 2c0a 2020 2020 6765 745f 636f  ests,.    get_co
+00000c30: 696e 5f72 6563 6f72 6473 5f63 6f69 6e5f  in_records_coin_
+00000c40: 6964 5f66 696c 7465 725f 7465 7374 732c  id_filter_tests,
+00000c50: 0a20 2020 2067 6574 5f63 6f69 6e5f 7265  .    get_coin_re
+00000c60: 636f 7264 735f 636f 696e 5f74 7970 655f  cords_coin_type_
+00000c70: 7465 7374 732c 0a20 2020 2067 6574 5f63  tests,.    get_c
+00000c80: 6f69 6e5f 7265 636f 7264 735f 636f 6e66  oin_records_conf
+00000c90: 6972 6d65 645f 7261 6e67 655f 7465 7374  irmed_range_test
+00000ca0: 732c 0a20 2020 2067 6574 5f63 6f69 6e5f  s,.    get_coin_
+00000cb0: 7265 636f 7264 735f 696e 636c 7564 655f  records_include_
+00000cc0: 746f 7461 6c5f 636f 756e 745f 7465 7374  total_count_test
+00000cd0: 732c 0a20 2020 2067 6574 5f63 6f69 6e5f  s,.    get_coin_
+00000ce0: 7265 636f 7264 735f 6d69 7865 645f 7465  records_mixed_te
+00000cf0: 7374 732c 0a20 2020 2067 6574 5f63 6f69  sts,.    get_coi
+00000d00: 6e5f 7265 636f 7264 735f 6f66 6673 6574  n_records_offset
+00000d10: 5f6c 696d 6974 5f74 6573 7473 2c0a 2020  _limit_tests,.  
+00000d20: 2020 6765 745f 636f 696e 5f72 6563 6f72    get_coin_recor
+00000d30: 6473 5f6f 7264 6572 5f74 6573 7473 2c0a  ds_order_tests,.
+00000d40: 2020 2020 6765 745f 636f 696e 5f72 6563      get_coin_rec
+00000d50: 6f72 6473 5f70 6172 656e 745f 636f 696e  ords_parent_coin
+00000d60: 5f69 645f 6669 6c74 6572 5f74 6573 7473  _id_filter_tests
+00000d70: 2c0a 2020 2020 6765 745f 636f 696e 5f72  ,.    get_coin_r
+00000d80: 6563 6f72 6473 5f70 757a 7a6c 655f 6861  ecords_puzzle_ha
+00000d90: 7368 5f66 696c 7465 725f 7465 7374 732c  sh_filter_tests,
+00000da0: 0a20 2020 2067 6574 5f63 6f69 6e5f 7265  .    get_coin_re
+00000db0: 636f 7264 735f 7265 7665 7273 655f 7465  cords_reverse_te
+00000dc0: 7374 732c 0a20 2020 2067 6574 5f63 6f69  sts,.    get_coi
+00000dd0: 6e5f 7265 636f 7264 735f 7370 656e 745f  n_records_spent_
+00000de0: 7261 6e67 655f 7465 7374 732c 0a20 2020  range_tests,.   
+00000df0: 2067 6574 5f63 6f69 6e5f 7265 636f 7264   get_coin_record
+00000e00: 735f 7761 6c6c 6574 5f69 645f 7465 7374  s_wallet_id_test
+00000e10: 732c 0a20 2020 2067 6574 5f63 6f69 6e5f  s,.    get_coin_
+00000e20: 7265 636f 7264 735f 7761 6c6c 6574 5f74  records_wallet_t
+00000e30: 7970 655f 7465 7374 732c 0a20 2020 2072  ype_tests,.    r
+00000e40: 6563 6f72 645f 312c 0a20 2020 2072 6563  ecord_1,.    rec
+00000e50: 6f72 645f 322c 0a20 2020 2072 6563 6f72  ord_2,.    recor
+00000e60: 645f 332c 0a20 2020 2072 6563 6f72 645f  d_3,.    record_
+00000e70: 342c 0a20 2020 2072 6563 6f72 645f 352c  4,.    record_5,
+00000e80: 0a20 2020 2072 6563 6f72 645f 362c 0a20  .    record_6,. 
+00000e90: 2020 2072 6563 6f72 645f 372c 0a20 2020     record_7,.   
+00000ea0: 2072 6563 6f72 645f 382c 0a20 2020 2072   record_8,.    r
+00000eb0: 6563 6f72 645f 392c 0a29 0a0a 6c6f 6720  ecord_9,.)..log 
+00000ec0: 3d20 6c6f 6767 696e 672e 6765 744c 6f67  = logging.getLog
+00000ed0: 6765 7228 5f5f 6e61 6d65 5f5f 290a 0a0a  ger(__name__)...
+00000ee0: 4064 6174 6163 6c61 7373 6573 2e64 6174  @dataclasses.dat
+00000ef0: 6163 6c61 7373 0a63 6c61 7373 2057 616c  aclass.class Wal
+00000f00: 6c65 7442 756e 646c 653a 0a20 2020 2073  letBundle:.    s
+00000f10: 6572 7669 6365 3a20 5365 7276 6963 650a  ervice: Service.
+00000f20: 2020 2020 6e6f 6465 3a20 5761 6c6c 6574      node: Wallet
+00000f30: 4e6f 6465 0a20 2020 2072 7063 5f63 6c69  Node.    rpc_cli
+00000f40: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
+00000f50: 6965 6e74 0a20 2020 2077 616c 6c65 743a  ient.    wallet:
+00000f60: 2057 616c 6c65 740a 0a0a 4064 6174 6163   Wallet...@datac
+00000f70: 6c61 7373 6573 2e64 6174 6163 6c61 7373  lasses.dataclass
+00000f80: 0a63 6c61 7373 2046 756c 6c4e 6f64 6542  .class FullNodeB
+00000f90: 756e 646c 653a 0a20 2020 2073 6572 7665  undle:.    serve
+00000fa0: 723a 2043 6869 6153 6572 7665 720a 2020  r: ChiaServer.  
+00000fb0: 2020 6170 693a 2046 756c 6c4e 6f64 6553    api: FullNodeS
+00000fc0: 696d 756c 6174 6f72 0a20 2020 2072 7063  imulator.    rpc
+00000fd0: 5f63 6c69 656e 743a 2046 756c 6c4e 6f64  _client: FullNod
+00000fe0: 6552 7063 436c 6965 6e74 0a0a 0a40 6461  eRpcClient...@da
+00000ff0: 7461 636c 6173 7365 732e 6461 7461 636c  taclasses.datacl
+00001000: 6173 730a 636c 6173 7320 5761 6c6c 6574  ass.class Wallet
+00001010: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+00001020: 6e74 3a0a 2020 2020 7761 6c6c 6574 5f31  nt:.    wallet_1
+00001030: 3a20 5761 6c6c 6574 4275 6e64 6c65 0a20  : WalletBundle. 
+00001040: 2020 2077 616c 6c65 745f 323a 2057 616c     wallet_2: Wal
+00001050: 6c65 7442 756e 646c 650a 2020 2020 6675  letBundle.    fu
+00001060: 6c6c 5f6e 6f64 653a 2046 756c 6c4e 6f64  ll_node: FullNod
+00001070: 6542 756e 646c 650a 0a0a 6173 796e 6320  eBundle...async 
+00001080: 6465 6620 6661 726d 5f74 7261 6e73 6163  def farm_transac
+00001090: 7469 6f6e 5f62 6c6f 636b 2866 756c 6c5f  tion_block(full_
+000010a0: 6e6f 6465 5f61 7069 3a20 4675 6c6c 4e6f  node_api: FullNo
+000010b0: 6465 5369 6d75 6c61 746f 722c 2077 616c  deSimulator, wal
+000010c0: 6c65 745f 6e6f 6465 3a20 5761 6c6c 6574  let_node: Wallet
+000010d0: 4e6f 6465 293a 0a20 2020 2061 7761 6974  Node):.    await
+000010e0: 2066 756c 6c5f 6e6f 6465 5f61 7069 2e66   full_node_api.f
+000010f0: 6172 6d5f 6e65 775f 7472 616e 7361 6374  arm_new_transact
+00001100: 696f 6e5f 626c 6f63 6b28 4661 726d 4e65  ion_block(FarmNe
+00001110: 7742 6c6f 636b 5072 6f74 6f63 6f6c 2862  wBlockProtocol(b
+00001120: 7974 6573 3332 2862 225c 3030 2220 2a20  ytes32(b"\00" * 
+00001130: 3332 2929 290a 2020 2020 6177 6169 7420  32))).    await 
+00001140: 6675 6c6c 5f6e 6f64 655f 6170 692e 7761  full_node_api.wa
+00001150: 6974 5f66 6f72 5f77 616c 6c65 745f 7379  it_for_wallet_sy
+00001160: 6e63 6564 2877 616c 6c65 745f 6e6f 6465  nced(wallet_node
+00001170: 3d77 616c 6c65 745f 6e6f 6465 2c20 7469  =wallet_node, ti
+00001180: 6d65 6f75 743d 3230 290a 0a0a 6465 6620  meout=20)...def 
+00001190: 6368 6563 6b5f 6d65 6d70 6f6f 6c5f 7370  check_mempool_sp
+000011a0: 656e 645f 636f 756e 7428 6675 6c6c 5f6e  end_count(full_n
+000011b0: 6f64 655f 6170 693a 2046 756c 6c4e 6f64  ode_api: FullNod
+000011c0: 6553 696d 756c 6174 6f72 2c20 6e75 6d5f  eSimulator, num_
+000011d0: 6f66 5f73 7065 6e64 7329 3a0a 2020 2020  of_spends):.    
+000011e0: 7265 7475 726e 2066 756c 6c5f 6e6f 6465  return full_node
+000011f0: 5f61 7069 2e66 756c 6c5f 6e6f 6465 2e6d  _api.full_node.m
+00001200: 656d 706f 6f6c 5f6d 616e 6167 6572 2e6d  empool_manager.m
+00001210: 656d 706f 6f6c 2e73 697a 6528 2920 3d3d  empool.size() ==
+00001220: 206e 756d 5f6f 665f 7370 656e 6473 0a0a   num_of_spends..
+00001230: 0a61 7379 6e63 2064 6566 2066 6172 6d5f  .async def farm_
+00001240: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
+00001250: 5f6e 6f64 655f 6170 693a 2046 756c 6c4e  _node_api: FullN
+00001260: 6f64 6553 696d 756c 6174 6f72 2c20 7761  odeSimulator, wa
+00001270: 6c6c 6574 5f6e 6f64 653a 2057 616c 6c65  llet_node: Walle
+00001280: 744e 6f64 652c 2073 7065 6e64 5f62 756e  tNode, spend_bun
+00001290: 646c 653a 2053 7065 6e64 4275 6e64 6c65  dle: SpendBundle
+000012a0: 293a 0a20 2020 2061 7761 6974 2074 696d  ):.    await tim
+000012b0: 655f 6f75 745f 6173 7365 7274 280a 2020  e_out_assert(.  
+000012c0: 2020 2020 2020 3230 2c20 6675 6c6c 5f6e        20, full_n
+000012d0: 6f64 655f 6170 692e 6675 6c6c 5f6e 6f64  ode_api.full_nod
+000012e0: 652e 6d65 6d70 6f6f 6c5f 6d61 6e61 6765  e.mempool_manage
+000012f0: 722e 6765 745f 7370 656e 6462 756e 646c  r.get_spendbundl
+00001300: 652c 2073 7065 6e64 5f62 756e 646c 652c  e, spend_bundle,
+00001310: 2073 7065 6e64 5f62 756e 646c 652e 6e61   spend_bundle.na
+00001320: 6d65 2829 0a20 2020 2029 0a20 2020 2061  me().    ).    a
+00001330: 7761 6974 2066 6172 6d5f 7472 616e 7361  wait farm_transa
+00001340: 6374 696f 6e5f 626c 6f63 6b28 6675 6c6c  ction_block(full
+00001350: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
+00001360: 745f 6e6f 6465 290a 2020 2020 6173 7365  t_node).    asse
+00001370: 7274 2066 756c 6c5f 6e6f 6465 5f61 7069  rt full_node_api
+00001380: 2e66 756c 6c5f 6e6f 6465 2e6d 656d 706f  .full_node.mempo
+00001390: 6f6c 5f6d 616e 6167 6572 2e67 6574 5f73  ol_manager.get_s
+000013a0: 7065 6e64 6275 6e64 6c65 2873 7065 6e64  pendbundle(spend
+000013b0: 5f62 756e 646c 652e 6e61 6d65 2829 2920  _bundle.name()) 
+000013c0: 6973 204e 6f6e 650a 0a0a 6173 796e 6320  is None...async 
+000013d0: 6465 6620 6765 6e65 7261 7465 5f66 756e  def generate_fun
+000013e0: 6473 2866 756c 6c5f 6e6f 6465 5f61 7069  ds(full_node_api
+000013f0: 3a20 4675 6c6c 4e6f 6465 5369 6d75 6c61  : FullNodeSimula
+00001400: 746f 722c 2077 616c 6c65 745f 6275 6e64  tor, wallet_bund
+00001410: 6c65 3a20 5761 6c6c 6574 4275 6e64 6c65  le: WalletBundle
+00001420: 2c20 6e75 6d5f 626c 6f63 6b73 3a20 696e  , num_blocks: in
+00001430: 7420 3d20 3129 3a0a 2020 2020 7761 6c6c  t = 1):.    wall
+00001440: 6574 5f69 6420 3d20 310a 2020 2020 696e  et_id = 1.    in
+00001450: 6974 6961 6c5f 6261 6c61 6e63 6573 203d  itial_balances =
+00001460: 2061 7761 6974 2077 616c 6c65 745f 6275   await wallet_bu
+00001470: 6e64 6c65 2e72 7063 5f63 6c69 656e 742e  ndle.rpc_client.
+00001480: 6765 745f 7761 6c6c 6574 5f62 616c 616e  get_wallet_balan
+00001490: 6365 2877 616c 6c65 745f 6964 290a 2020  ce(wallet_id).  
+000014a0: 2020 7068 3a20 6279 7465 7333 3220 3d20    ph: bytes32 = 
+000014b0: 6465 636f 6465 5f70 757a 7a6c 655f 6861  decode_puzzle_ha
+000014c0: 7368 2861 7761 6974 2077 616c 6c65 745f  sh(await wallet_
+000014d0: 6275 6e64 6c65 2e72 7063 5f63 6c69 656e  bundle.rpc_clien
+000014e0: 742e 6765 745f 6e65 7874 5f61 6464 7265  t.get_next_addre
+000014f0: 7373 2877 616c 6c65 745f 6964 2c20 5472  ss(wallet_id, Tr
+00001500: 7565 2929 0a20 2020 2067 656e 6572 6174  ue)).    generat
+00001510: 6564 5f66 756e 6473 203d 2030 0a20 2020  ed_funds = 0.   
+00001520: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00001530: 302c 206e 756d 5f62 6c6f 636b 7329 3a0a  0, num_blocks):.
+00001540: 2020 2020 2020 2020 6177 6169 7420 6675          await fu
+00001550: 6c6c 5f6e 6f64 655f 6170 692e 6661 726d  ll_node_api.farm
+00001560: 5f6e 6577 5f74 7261 6e73 6163 7469 6f6e  _new_transaction
+00001570: 5f62 6c6f 636b 2846 6172 6d4e 6577 426c  _block(FarmNewBl
+00001580: 6f63 6b50 726f 746f 636f 6c28 7068 2929  ockProtocol(ph))
+00001590: 0a20 2020 2020 2020 2070 6561 6b5f 6865  .        peak_he
+000015a0: 6967 6874 203d 2066 756c 6c5f 6e6f 6465  ight = full_node
+000015b0: 5f61 7069 2e66 756c 6c5f 6e6f 6465 2e62  _api.full_node.b
+000015c0: 6c6f 636b 6368 6169 6e2e 6765 745f 7065  lockchain.get_pe
+000015d0: 616b 5f68 6569 6768 7428 290a 2020 2020  ak_height().    
+000015e0: 2020 2020 6173 7365 7274 2070 6561 6b5f      assert peak_
+000015f0: 6865 6967 6874 2069 7320 6e6f 7420 4e6f  height is not No
+00001600: 6e65 0a20 2020 2020 2020 2067 656e 6572  ne.        gener
+00001610: 6174 6564 5f66 756e 6473 202b 3d20 6361  ated_funds += ca
+00001620: 6c63 756c 6174 655f 706f 6f6c 5f72 6577  lculate_pool_rew
+00001630: 6172 6428 7065 616b 5f68 6569 6768 7429  ard(peak_height)
+00001640: 202b 2063 616c 6375 6c61 7465 5f62 6173   + calculate_bas
+00001650: 655f 6661 726d 6572 5f72 6577 6172 6428  e_farmer_reward(
+00001660: 7065 616b 5f68 6569 6768 7429 0a0a 2020  peak_height)..  
+00001670: 2020 2320 4661 726d 2061 2064 756d 6d79    # Farm a dummy
+00001680: 2062 6c6f 636b 2074 6f20 636f 6e66 6972   block to confir
+00001690: 6d20 7468 6520 6372 6561 7465 6420 6675  m the created fu
+000016a0: 6e64 730a 2020 2020 6177 6169 7420 6661  nds.    await fa
+000016b0: 726d 5f74 7261 6e73 6163 7469 6f6e 5f62  rm_transaction_b
+000016c0: 6c6f 636b 2866 756c 6c5f 6e6f 6465 5f61  lock(full_node_a
+000016d0: 7069 2c20 7761 6c6c 6574 5f62 756e 646c  pi, wallet_bundl
+000016e0: 652e 6e6f 6465 290a 0a20 2020 2065 7870  e.node)..    exp
+000016f0: 6563 7465 645f 636f 6e66 6972 6d65 6420  ected_confirmed 
+00001700: 3d20 696e 6974 6961 6c5f 6261 6c61 6e63  = initial_balanc
+00001710: 6573 5b22 636f 6e66 6972 6d65 645f 7761  es["confirmed_wa
+00001720: 6c6c 6574 5f62 616c 616e 6365 225d 202b  llet_balance"] +
+00001730: 2067 656e 6572 6174 6564 5f66 756e 6473   generated_funds
+00001740: 0a20 2020 2065 7870 6563 7465 645f 756e  .    expected_un
+00001750: 636f 6e66 6972 6d65 6420 3d20 696e 6974  confirmed = init
+00001760: 6961 6c5f 6261 6c61 6e63 6573 5b22 756e  ial_balances["un
+00001770: 636f 6e66 6972 6d65 645f 7761 6c6c 6574  confirmed_wallet
+00001780: 5f62 616c 616e 6365 225d 202b 2067 656e  _balance"] + gen
+00001790: 6572 6174 6564 5f66 756e 6473 0a20 2020  erated_funds.   
+000017a0: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+000017b0: 6173 7365 7274 2832 302c 2067 6574 5f63  assert(20, get_c
+000017c0: 6f6e 6669 726d 6564 5f62 616c 616e 6365  onfirmed_balance
+000017d0: 2c20 6578 7065 6374 6564 5f63 6f6e 6669  , expected_confi
+000017e0: 726d 6564 2c20 7761 6c6c 6574 5f62 756e  rmed, wallet_bun
+000017f0: 646c 652e 7270 635f 636c 6965 6e74 2c20  dle.rpc_client, 
+00001800: 7761 6c6c 6574 5f69 6429 0a20 2020 2061  wallet_id).    a
+00001810: 7761 6974 2074 696d 655f 6f75 745f 6173  wait time_out_as
+00001820: 7365 7274 2832 302c 2067 6574 5f75 6e63  sert(20, get_unc
+00001830: 6f6e 6669 726d 6564 5f62 616c 616e 6365  onfirmed_balance
+00001840: 2c20 6578 7065 6374 6564 5f75 6e63 6f6e  , expected_uncon
+00001850: 6669 726d 6564 2c20 7761 6c6c 6574 5f62  firmed, wallet_b
+00001860: 756e 646c 652e 7270 635f 636c 6965 6e74  undle.rpc_client
+00001870: 2c20 7761 6c6c 6574 5f69 6429 0a20 2020  , wallet_id).   
+00001880: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+00001890: 6173 7365 7274 2832 302c 2077 616c 6c65  assert(20, walle
+000018a0: 745f 6275 6e64 6c65 2e72 7063 5f63 6c69  t_bundle.rpc_cli
+000018b0: 656e 742e 6765 745f 7379 6e63 6564 290a  ent.get_synced).
+000018c0: 0a20 2020 2072 6574 7572 6e20 6765 6e65  .    return gene
+000018d0: 7261 7465 645f 6675 6e64 730a 0a0a 4070  rated_funds...@p
+000018e0: 7974 6573 745f 6173 796e 6369 6f2e 6669  ytest_asyncio.fi
+000018f0: 7874 7572 6528 7363 6f70 653d 2266 756e  xture(scope="fun
+00001900: 6374 696f 6e22 2c20 7061 7261 6d73 3d5b  ction", params=[
+00001910: 5472 7565 2c20 4661 6c73 655d 290a 6173  True, False]).as
+00001920: 796e 6320 6465 6620 7761 6c6c 6574 5f72  ync def wallet_r
+00001930: 7063 5f65 6e76 6972 6f6e 6d65 6e74 2874  pc_environment(t
+00001940: 776f 5f77 616c 6c65 745f 6e6f 6465 735f  wo_wallet_nodes_
+00001950: 7365 7276 6963 6573 2c20 7265 7175 6573  services, reques
+00001960: 742c 2073 656c 665f 686f 7374 6e61 6d65  t, self_hostname
+00001970: 293a 0a20 2020 2066 756c 6c5f 6e6f 6465  ):.    full_node
+00001980: 2c20 7761 6c6c 6574 732c 2062 7420 3d20  , wallets, bt = 
+00001990: 7477 6f5f 7761 6c6c 6574 5f6e 6f64 6573  two_wallet_nodes
+000019a0: 5f73 6572 7669 6365 730a 2020 2020 6675  _services.    fu
+000019b0: 6c6c 5f6e 6f64 655f 7365 7276 6963 6520  ll_node_service 
+000019c0: 3d20 6675 6c6c 5f6e 6f64 655b 305d 0a20  = full_node[0]. 
+000019d0: 2020 2066 756c 6c5f 6e6f 6465 5f61 7069     full_node_api
+000019e0: 203d 2066 756c 6c5f 6e6f 6465 5f73 6572   = full_node_ser
+000019f0: 7669 6365 2e5f 6170 690a 2020 2020 6675  vice._api.    fu
+00001a00: 6c6c 5f6e 6f64 655f 7365 7276 6572 203d  ll_node_server =
+00001a10: 2066 756c 6c5f 6e6f 6465 5f61 7069 2e66   full_node_api.f
+00001a20: 756c 6c5f 6e6f 6465 2e73 6572 7665 720a  ull_node.server.
+00001a30: 2020 2020 7761 6c6c 6574 5f73 6572 7669      wallet_servi
+00001a40: 6365 203d 2077 616c 6c65 7473 5b30 5d0a  ce = wallets[0].
+00001a50: 2020 2020 7761 6c6c 6574 5f73 6572 7669      wallet_servi
+00001a60: 6365 5f32 203d 2077 616c 6c65 7473 5b31  ce_2 = wallets[1
+00001a70: 5d0a 2020 2020 7761 6c6c 6574 5f6e 6f64  ].    wallet_nod
+00001a80: 6520 3d20 7761 6c6c 6574 5f73 6572 7669  e = wallet_servi
+00001a90: 6365 2e5f 6e6f 6465 0a20 2020 2077 616c  ce._node.    wal
+00001aa0: 6c65 745f 6e6f 6465 5f32 203d 2077 616c  let_node_2 = wal
+00001ab0: 6c65 745f 7365 7276 6963 655f 322e 5f6e  let_service_2._n
+00001ac0: 6f64 650a 2020 2020 7761 6c6c 6574 203d  ode.    wallet =
+00001ad0: 2077 616c 6c65 745f 6e6f 6465 2e77 616c   wallet_node.wal
+00001ae0: 6c65 745f 7374 6174 655f 6d61 6e61 6765  let_state_manage
+00001af0: 722e 6d61 696e 5f77 616c 6c65 740a 2020  r.main_wallet.  
+00001b00: 2020 7761 6c6c 6574 5f32 203d 2077 616c    wallet_2 = wal
+00001b10: 6c65 745f 6e6f 6465 5f32 2e77 616c 6c65  let_node_2.walle
+00001b20: 745f 7374 6174 655f 6d61 6e61 6765 722e  t_state_manager.
+00001b30: 6d61 696e 5f77 616c 6c65 740a 0a20 2020  main_wallet..   
+00001b40: 2063 6f6e 6669 6720 3d20 6274 2e63 6f6e   config = bt.con
+00001b50: 6669 670a 2020 2020 686f 7374 6e61 6d65  fig.    hostname
+00001b60: 203d 2063 6f6e 6669 675b 2273 656c 665f   = config["self_
+00001b70: 686f 7374 6e61 6d65 225d 0a0a 2020 2020  hostname"]..    
+00001b80: 6966 2072 6571 7565 7374 2e70 6172 616d  if request.param
+00001b90: 3a0a 2020 2020 2020 2020 7761 6c6c 6574  :.        wallet
+00001ba0: 5f6e 6f64 652e 636f 6e66 6967 5b22 7472  _node.config["tr
+00001bb0: 7573 7465 645f 7065 6572 7322 5d20 3d20  usted_peers"] = 
+00001bc0: 7b66 756c 6c5f 6e6f 6465 5f73 6572 7665  {full_node_serve
+00001bd0: 722e 6e6f 6465 5f69 642e 6865 7828 293a  r.node_id.hex():
+00001be0: 2066 756c 6c5f 6e6f 6465 5f73 6572 7665   full_node_serve
+00001bf0: 722e 6e6f 6465 5f69 642e 6865 7828 297d  r.node_id.hex()}
+00001c00: 0a20 2020 2020 2020 2077 616c 6c65 745f  .        wallet_
+00001c10: 6e6f 6465 5f32 2e63 6f6e 6669 675b 2274  node_2.config["t
+00001c20: 7275 7374 6564 5f70 6565 7273 225d 203d  rusted_peers"] =
+00001c30: 207b 6675 6c6c 5f6e 6f64 655f 7365 7276   {full_node_serv
+00001c40: 6572 2e6e 6f64 655f 6964 2e68 6578 2829  er.node_id.hex()
+00001c50: 3a20 6675 6c6c 5f6e 6f64 655f 7365 7276  : full_node_serv
+00001c60: 6572 2e6e 6f64 655f 6964 2e68 6578 2829  er.node_id.hex()
+00001c70: 7d0a 2020 2020 656c 7365 3a0a 2020 2020  }.    else:.    
+00001c80: 2020 2020 7761 6c6c 6574 5f6e 6f64 652e      wallet_node.
+00001c90: 636f 6e66 6967 5b22 7472 7573 7465 645f  config["trusted_
+00001ca0: 7065 6572 7322 5d20 3d20 7b7d 0a20 2020  peers"] = {}.   
+00001cb0: 2020 2020 2077 616c 6c65 745f 6e6f 6465       wallet_node
+00001cc0: 5f32 2e63 6f6e 6669 675b 2274 7275 7374  _2.config["trust
+00001cd0: 6564 5f70 6565 7273 225d 203d 207b 7d0a  ed_peers"] = {}.
+00001ce0: 0a20 2020 2061 7761 6974 2077 616c 6c65  .    await walle
+00001cf0: 745f 6e6f 6465 2e73 6572 7665 722e 7374  t_node.server.st
+00001d00: 6172 745f 636c 6965 6e74 2850 6565 7249  art_client(PeerI
+00001d10: 6e66 6f28 7365 6c66 5f68 6f73 746e 616d  nfo(self_hostnam
+00001d20: 652c 2075 696e 7431 3628 6675 6c6c 5f6e  e, uint16(full_n
+00001d30: 6f64 655f 7365 7276 6572 2e5f 706f 7274  ode_server._port
+00001d40: 2929 2c20 4e6f 6e65 290a 2020 2020 6177  )), None).    aw
+00001d50: 6169 7420 7761 6c6c 6574 5f6e 6f64 655f  ait wallet_node_
+00001d60: 322e 7365 7276 6572 2e73 7461 7274 5f63  2.server.start_c
+00001d70: 6c69 656e 7428 5065 6572 496e 666f 2873  lient(PeerInfo(s
+00001d80: 656c 665f 686f 7374 6e61 6d65 2c20 7569  elf_hostname, ui
+00001d90: 6e74 3136 2866 756c 6c5f 6e6f 6465 5f73  nt16(full_node_s
+00001da0: 6572 7665 722e 5f70 6f72 7429 292c 204e  erver._port)), N
+00001db0: 6f6e 6529 0a0a 2020 2020 636c 6965 6e74  one)..    client
+00001dc0: 203d 2061 7761 6974 2057 616c 6c65 7452   = await WalletR
+00001dd0: 7063 436c 6965 6e74 2e63 7265 6174 6528  pcClient.create(
+00001de0: 0a20 2020 2020 2020 2068 6f73 746e 616d  .        hostnam
+00001df0: 652c 2077 616c 6c65 745f 7365 7276 6963  e, wallet_servic
+00001e00: 652e 7270 635f 7365 7276 6572 2e6c 6973  e.rpc_server.lis
+00001e10: 7465 6e5f 706f 7274 2c20 7761 6c6c 6574  ten_port, wallet
+00001e20: 5f73 6572 7669 6365 2e72 6f6f 745f 7061  _service.root_pa
+00001e30: 7468 2c20 7761 6c6c 6574 5f73 6572 7669  th, wallet_servi
+00001e40: 6365 2e63 6f6e 6669 670a 2020 2020 290a  ce.config.    ).
+00001e50: 2020 2020 636c 6965 6e74 5f32 203d 2061      client_2 = a
+00001e60: 7761 6974 2057 616c 6c65 7452 7063 436c  wait WalletRpcCl
+00001e70: 6965 6e74 2e63 7265 6174 6528 0a20 2020  ient.create(.   
+00001e80: 2020 2020 2068 6f73 746e 616d 652c 2077       hostname, w
+00001e90: 616c 6c65 745f 7365 7276 6963 655f 322e  allet_service_2.
+00001ea0: 7270 635f 7365 7276 6572 2e6c 6973 7465  rpc_server.liste
+00001eb0: 6e5f 706f 7274 2c20 7761 6c6c 6574 5f73  n_port, wallet_s
+00001ec0: 6572 7669 6365 5f32 2e72 6f6f 745f 7061  ervice_2.root_pa
+00001ed0: 7468 2c20 7761 6c6c 6574 5f73 6572 7669  th, wallet_servi
+00001ee0: 6365 5f32 2e63 6f6e 6669 670a 2020 2020  ce_2.config.    
+00001ef0: 290a 2020 2020 636c 6965 6e74 5f6e 6f64  ).    client_nod
+00001f00: 6520 3d20 6177 6169 7420 4675 6c6c 4e6f  e = await FullNo
+00001f10: 6465 5270 6343 6c69 656e 742e 6372 6561  deRpcClient.crea
+00001f20: 7465 280a 2020 2020 2020 2020 686f 7374  te(.        host
+00001f30: 6e61 6d65 2c20 6675 6c6c 5f6e 6f64 655f  name, full_node_
+00001f40: 7365 7276 6963 652e 7270 635f 7365 7276  service.rpc_serv
+00001f50: 6572 2e6c 6973 7465 6e5f 706f 7274 2c20  er.listen_port, 
+00001f60: 6675 6c6c 5f6e 6f64 655f 7365 7276 6963  full_node_servic
+00001f70: 652e 726f 6f74 5f70 6174 682c 2066 756c  e.root_path, ful
+00001f80: 6c5f 6e6f 6465 5f73 6572 7669 6365 2e63  l_node_service.c
+00001f90: 6f6e 6669 670a 2020 2020 290a 0a20 2020  onfig.    )..   
+00001fa0: 2077 616c 6c65 745f 6275 6e64 6c65 5f31   wallet_bundle_1
+00001fb0: 3a20 5761 6c6c 6574 4275 6e64 6c65 203d  : WalletBundle =
+00001fc0: 2057 616c 6c65 7442 756e 646c 6528 7761   WalletBundle(wa
+00001fd0: 6c6c 6574 5f73 6572 7669 6365 2c20 7761  llet_service, wa
+00001fe0: 6c6c 6574 5f6e 6f64 652c 2063 6c69 656e  llet_node, clien
+00001ff0: 742c 2077 616c 6c65 7429 0a20 2020 2077  t, wallet).    w
+00002000: 616c 6c65 745f 6275 6e64 6c65 5f32 3a20  allet_bundle_2: 
+00002010: 5761 6c6c 6574 4275 6e64 6c65 203d 2057  WalletBundle = W
+00002020: 616c 6c65 7442 756e 646c 6528 7761 6c6c  alletBundle(wall
+00002030: 6574 5f73 6572 7669 6365 5f32 2c20 7761  et_service_2, wa
+00002040: 6c6c 6574 5f6e 6f64 655f 322c 2063 6c69  llet_node_2, cli
+00002050: 656e 745f 322c 2077 616c 6c65 745f 3229  ent_2, wallet_2)
+00002060: 0a20 2020 206e 6f64 655f 6275 6e64 6c65  .    node_bundle
+00002070: 3a20 4675 6c6c 4e6f 6465 4275 6e64 6c65  : FullNodeBundle
+00002080: 203d 2046 756c 6c4e 6f64 6542 756e 646c   = FullNodeBundl
+00002090: 6528 6675 6c6c 5f6e 6f64 655f 7365 7276  e(full_node_serv
+000020a0: 6572 2c20 6675 6c6c 5f6e 6f64 655f 6170  er, full_node_ap
+000020b0: 692c 2063 6c69 656e 745f 6e6f 6465 290a  i, client_node).
+000020c0: 0a20 2020 2079 6965 6c64 2057 616c 6c65  .    yield Walle
+000020d0: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
+000020e0: 656e 7428 7761 6c6c 6574 5f62 756e 646c  ent(wallet_bundl
+000020f0: 655f 312c 2077 616c 6c65 745f 6275 6e64  e_1, wallet_bund
+00002100: 6c65 5f32 2c20 6e6f 6465 5f62 756e 646c  le_2, node_bundl
+00002110: 6529 0a0a 2020 2020 2320 4368 6563 6b73  e)..    # Checks
+00002120: 2074 6861 7420 7468 6520 5250 4320 6d61   that the RPC ma
+00002130: 6e61 6765 7320 746f 2073 746f 7020 7468  nages to stop th
+00002140: 6520 6e6f 6465 0a20 2020 2063 6c69 656e  e node.    clien
+00002150: 742e 636c 6f73 6528 290a 2020 2020 636c  t.close().    cl
+00002160: 6965 6e74 5f32 2e63 6c6f 7365 2829 0a20  ient_2.close(). 
+00002170: 2020 2063 6c69 656e 745f 6e6f 6465 2e63     client_node.c
+00002180: 6c6f 7365 2829 0a20 2020 2061 7761 6974  lose().    await
+00002190: 2063 6c69 656e 742e 6177 6169 745f 636c   client.await_cl
+000021a0: 6f73 6564 2829 0a20 2020 2061 7761 6974  osed().    await
+000021b0: 2063 6c69 656e 745f 322e 6177 6169 745f   client_2.await_
+000021c0: 636c 6f73 6564 2829 0a20 2020 2061 7761  closed().    awa
+000021d0: 6974 2063 6c69 656e 745f 6e6f 6465 2e61  it client_node.a
+000021e0: 7761 6974 5f63 6c6f 7365 6428 290a 0a0a  wait_closed()...
+000021f0: 6173 796e 6320 6465 6620 6372 6561 7465  async def create
+00002200: 5f74 785f 6f75 7470 7574 7328 7761 6c6c  _tx_outputs(wall
+00002210: 6574 3a20 5761 6c6c 6574 2c20 6f75 7470  et: Wallet, outp
+00002220: 7574 5f61 7267 733a 204c 6973 745b 5475  ut_args: List[Tu
+00002230: 706c 655b 696e 742c 204f 7074 696f 6e61  ple[int, Optiona
+00002240: 6c5b 4c69 7374 5b73 7472 5d5d 5d5d 2920  l[List[str]]]]) 
+00002250: 2d3e 204c 6973 745b 4469 6374 5b73 7472  -> List[Dict[str
+00002260: 2c20 416e 795d 5d3a 0a20 2020 206f 7574  , Any]]:.    out
+00002270: 7075 7473 203d 205b 5d0a 2020 2020 666f  puts = [].    fo
+00002280: 7220 6172 6773 2069 6e20 6f75 7470 7574  r args in output
+00002290: 5f61 7267 733a 0a20 2020 2020 2020 206f  _args:.        o
+000022a0: 7574 7075 7420 3d20 7b22 616d 6f75 6e74  utput = {"amount
+000022b0: 223a 2075 696e 7436 3428 6172 6773 5b30  ": uint64(args[0
+000022c0: 5d29 2c20 2270 757a 7a6c 655f 6861 7368  ]), "puzzle_hash
+000022d0: 223a 2061 7761 6974 2077 616c 6c65 742e  ": await wallet.
+000022e0: 6765 745f 6e65 775f 7075 7a7a 6c65 6861  get_new_puzzleha
+000022f0: 7368 2829 7d0a 2020 2020 2020 2020 6966  sh()}.        if
+00002300: 2061 7267 735b 315d 2069 7320 6e6f 7420   args[1] is not 
+00002310: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00002320: 2020 6173 7365 7274 206c 656e 2861 7267    assert len(arg
+00002330: 735b 315d 2920 3e20 300a 2020 2020 2020  s[1]) > 0.      
+00002340: 2020 2020 2020 6f75 7470 7574 5b22 6d65        output["me
+00002350: 6d6f 7322 5d20 3d20 6172 6773 5b31 5d0a  mos"] = args[1].
+00002360: 2020 2020 2020 2020 6f75 7470 7574 732e          outputs.
+00002370: 6170 7065 6e64 286f 7574 7075 7429 0a20  append(output). 
+00002380: 2020 2072 6574 7572 6e20 6f75 7470 7574     return output
+00002390: 730a 0a0a 6173 796e 6320 6465 6620 6173  s...async def as
+000023a0: 7365 7274 5f77 616c 6c65 745f 7479 7065  sert_wallet_type
+000023b0: 7328 636c 6965 6e74 3a20 5761 6c6c 6574  s(client: Wallet
+000023c0: 5270 6343 6c69 656e 742c 2065 7870 6563  RpcClient, expec
+000023d0: 7465 643a 2044 6963 745b 5761 6c6c 6574  ted: Dict[Wallet
+000023e0: 5479 7065 2c20 696e 745d 2920 2d3e 204e  Type, int]) -> N
+000023f0: 6f6e 653a 0a20 2020 2066 6f72 2077 616c  one:.    for wal
+00002400: 6c65 745f 7479 7065 2069 6e20 5761 6c6c  let_type in Wall
+00002410: 6574 5479 7065 3a0a 2020 2020 2020 2020  etType:.        
+00002420: 7761 6c6c 6574 7320 3d20 6177 6169 7420  wallets = await 
+00002430: 636c 6965 6e74 2e67 6574 5f77 616c 6c65  client.get_walle
+00002440: 7473 2877 616c 6c65 745f 7479 7065 290a  ts(wallet_type).
+00002450: 2020 2020 2020 2020 7761 6c6c 6574 5f63          wallet_c
+00002460: 6f75 6e74 203d 206c 656e 2877 616c 6c65  ount = len(walle
+00002470: 7473 290a 2020 2020 2020 2020 6966 2077  ts).        if w
+00002480: 616c 6c65 745f 7479 7065 2069 6e20 6578  allet_type in ex
+00002490: 7065 6374 6564 3a0a 2020 2020 2020 2020  pected:.        
+000024a0: 2020 2020 6173 7365 7274 2077 616c 6c65      assert walle
+000024b0: 745f 636f 756e 7420 3d3d 2065 7870 6563  t_count == expec
+000024c0: 7465 642e 6765 7428 7761 6c6c 6574 5f74  ted.get(wallet_t
+000024d0: 7970 652c 2030 290a 2020 2020 2020 2020  ype, 0).        
+000024e0: 2020 2020 666f 7220 7761 6c6c 6574 2069      for wallet i
+000024f0: 6e20 7761 6c6c 6574 733a 0a20 2020 2020  n wallets:.     
+00002500: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00002510: 7420 7761 6c6c 6574 5b22 7479 7065 225d  t wallet["type"]
+00002520: 203d 3d20 7761 6c6c 6574 5f74 7970 652e   == wallet_type.
+00002530: 7661 6c75 650a 0a0a 6465 6620 6173 7365  value...def asse
+00002540: 7274 5f74 785f 616d 6f75 6e74 7328 0a20  rt_tx_amounts(. 
+00002550: 2020 2074 783a 2054 7261 6e73 6163 7469     tx: Transacti
+00002560: 6f6e 5265 636f 7264 2c0a 2020 2020 6f75  onRecord,.    ou
+00002570: 7470 7574 733a 204c 6973 745b 4469 6374  tputs: List[Dict
+00002580: 5b73 7472 2c20 416e 795d 5d2c 0a20 2020  [str, Any]],.   
+00002590: 202a 2c0a 2020 2020 616d 6f75 6e74 5f66   *,.    amount_f
+000025a0: 6565 3a20 7569 6e74 3634 2c0a 2020 2020  ee: uint64,.    
+000025b0: 6368 616e 6765 5f65 7870 6563 7465 643a  change_expected:
+000025c0: 2062 6f6f 6c2c 0a20 2020 2069 735f 6361   bool,.    is_ca
+000025d0: 743a 2062 6f6f 6c20 3d20 4661 6c73 652c  t: bool = False,
+000025e0: 0a29 202d 3e20 4e6f 6e65 3a0a 2020 2020  .) -> None:.    
+000025f0: 6173 7365 7274 2074 782e 6665 655f 616d  assert tx.fee_am
+00002600: 6f75 6e74 203d 3d20 616d 6f75 6e74 5f66  ount == amount_f
+00002610: 6565 0a20 2020 2061 7373 6572 7420 7478  ee.    assert tx
+00002620: 2e61 6d6f 756e 7420 3d3d 2073 756d 286f  .amount == sum(o
+00002630: 7574 7075 745b 2261 6d6f 756e 7422 5d20  utput["amount"] 
+00002640: 666f 7220 6f75 7470 7574 2069 6e20 6f75  for output in ou
+00002650: 7470 7574 7329 0a20 2020 2065 7870 6563  tputs).    expec
+00002660: 7465 645f 6164 6469 7469 6f6e 7320 3d20  ted_additions = 
+00002670: 6c65 6e28 6f75 7470 7574 7329 202b 2031  len(outputs) + 1
+00002680: 2069 6620 6368 616e 6765 5f65 7870 6563   if change_expec
+00002690: 7465 6420 656c 7365 206c 656e 286f 7574  ted else len(out
+000026a0: 7075 7473 290a 2020 2020 6966 2069 735f  puts).    if is_
+000026b0: 6361 7420 616e 6420 616d 6f75 6e74 5f66  cat and amount_f
+000026c0: 6565 3a0a 2020 2020 2020 2020 6578 7065  ee:.        expe
+000026d0: 6374 6564 5f61 6464 6974 696f 6e73 202b  cted_additions +
+000026e0: 3d20 310a 2020 2020 6173 7365 7274 206c  = 1.    assert l
+000026f0: 656e 2874 782e 6164 6469 7469 6f6e 7329  en(tx.additions)
+00002700: 203d 3d20 6578 7065 6374 6564 5f61 6464   == expected_add
+00002710: 6974 696f 6e73 0a20 2020 2061 6464 6974  itions.    addit
+00002720: 696f 6e5f 616d 6f75 6e74 7320 3d20 5b61  ion_amounts = [a
+00002730: 6464 6974 696f 6e2e 616d 6f75 6e74 2066  ddition.amount f
+00002740: 6f72 2061 6464 6974 696f 6e20 696e 2074  or addition in t
+00002750: 782e 6164 6469 7469 6f6e 735d 0a20 2020  x.additions].   
+00002760: 2072 656d 6f76 616c 5f61 6d6f 756e 7473   removal_amounts
+00002770: 203d 205b 7265 6d6f 7661 6c2e 616d 6f75   = [removal.amou
+00002780: 6e74 2066 6f72 2072 656d 6f76 616c 2069  nt for removal i
+00002790: 6e20 7478 2e72 656d 6f76 616c 735d 0a20  n tx.removals]. 
+000027a0: 2020 2066 6f72 206f 7574 7075 7420 696e     for output in
+000027b0: 206f 7574 7075 7473 3a0a 2020 2020 2020   outputs:.      
+000027c0: 2020 6173 7365 7274 206f 7574 7075 745b    assert output[
+000027d0: 2261 6d6f 756e 7422 5d20 696e 2061 6464  "amount"] in add
+000027e0: 6974 696f 6e5f 616d 6f75 6e74 730a 2020  ition_amounts.  
+000027f0: 2020 6173 7365 7274 2028 7375 6d28 7265    assert (sum(re
+00002800: 6d6f 7661 6c5f 616d 6f75 6e74 7329 202d  moval_amounts) -
+00002810: 2073 756d 2861 6464 6974 696f 6e5f 616d   sum(addition_am
+00002820: 6f75 6e74 7329 2920 3d3d 2061 6d6f 756e  ounts)) == amoun
+00002830: 745f 6665 650a 0a0a 6173 796e 6320 6465  t_fee...async de
+00002840: 6620 6173 7365 7274 5f70 7573 685f 7478  f assert_push_tx
+00002850: 5f65 7272 6f72 286e 6f64 655f 7270 633a  _error(node_rpc:
+00002860: 2046 756c 6c4e 6f64 6552 7063 436c 6965   FullNodeRpcClie
+00002870: 6e74 2c20 7478 3a20 5472 616e 7361 6374  nt, tx: Transact
+00002880: 696f 6e52 6563 6f72 6429 3a0a 2020 2020  ionRecord):.    
+00002890: 7370 656e 645f 6275 6e64 6c65 203d 2074  spend_bundle = t
+000028a0: 782e 7370 656e 645f 6275 6e64 6c65 0a20  x.spend_bundle. 
+000028b0: 2020 2061 7373 6572 7420 7370 656e 645f     assert spend_
+000028c0: 6275 6e64 6c65 2069 7320 6e6f 7420 4e6f  bundle is not No
+000028d0: 6e65 0a20 2020 2023 2063 6865 636b 2065  ne.    # check e
+000028e0: 7272 6f72 2066 6f72 2061 2041 5353 4552  rror for a ASSER
+000028f0: 545f 414e 4e4f 554e 4345 5f43 4f4e 5355  T_ANNOUNCE_CONSU
+00002900: 4d45 445f 4641 494c 4544 2061 6e64 2069  MED_FAILED and i
+00002910: 6620 7468 6520 6572 726f 7220 6973 206e  f the error is n
+00002920: 6f74 2074 6865 7265 2074 6872 6f77 2061  ot there throw a
+00002930: 2076 616c 7565 2065 7272 6f72 0a20 2020   value error.   
+00002940: 2074 7279 3a0a 2020 2020 2020 2020 6177   try:.        aw
+00002950: 6169 7420 6e6f 6465 5f72 7063 2e70 7573  ait node_rpc.pus
+00002960: 685f 7478 2873 7065 6e64 5f62 756e 646c  h_tx(spend_bundl
+00002970: 6529 0a20 2020 2065 7863 6570 7420 5661  e).    except Va
+00002980: 6c75 6545 7272 6f72 2061 7320 6572 726f  lueError as erro
+00002990: 723a 0a20 2020 2020 2020 2065 7272 6f72  r:.        error
+000029a0: 5f73 7472 696e 6720 3d20 6572 726f 722e  _string = error.
+000029b0: 6172 6773 5b30 5d5b 2265 7272 6f72 225d  args[0]["error"]
+000029c0: 2020 2320 6e6f 7161 3a20 2023 2070 796c    # noqa:  # pyl
+000029d0: 696e 743a 2064 6973 6162 6c65 3d45 3131  int: disable=E11
+000029e0: 3236 0a20 2020 2020 2020 2069 6620 6572  26.        if er
+000029f0: 726f 725f 7374 7269 6e67 2e66 696e 6428  ror_string.find(
+00002a00: 2241 5353 4552 545f 414e 4e4f 554e 4345  "ASSERT_ANNOUNCE
+00002a10: 5f43 4f4e 5355 4d45 445f 4641 494c 4544  _CONSUMED_FAILED
+00002a20: 2229 203d 3d20 2d31 3a0a 2020 2020 2020  ") == -1:.      
+00002a30: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00002a40: 6545 7272 6f72 2066 726f 6d20 6572 726f  eError from erro
+00002a50: 720a 0a0a 6173 796e 6320 6465 6620 6173  r...async def as
+00002a60: 7365 7274 5f67 6574 5f62 616c 616e 6365  sert_get_balance
+00002a70: 2872 7063 5f63 6c69 656e 743a 2057 616c  (rpc_client: Wal
+00002a80: 6c65 7452 7063 436c 6965 6e74 2c20 7761  letRpcClient, wa
+00002a90: 6c6c 6574 5f6e 6f64 653a 2057 616c 6c65  llet_node: Walle
+00002aa0: 744e 6f64 652c 2077 616c 6c65 743a 2057  tNode, wallet: W
+00002ab0: 616c 6c65 7450 726f 746f 636f 6c29 202d  alletProtocol) -
+00002ac0: 3e20 4e6f 6e65 3a0a 2020 2020 6578 7065  > None:.    expe
+00002ad0: 6374 6564 5f62 616c 616e 6365 203d 2061  cted_balance = a
+00002ae0: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
+00002af0: 2e67 6574 5f62 616c 616e 6365 2877 616c  .get_balance(wal
+00002b00: 6c65 742e 6964 2829 290a 2020 2020 6578  let.id()).    ex
+00002b10: 7065 6374 6564 5f62 616c 616e 6365 5f64  pected_balance_d
+00002b20: 6963 7420 3d20 6578 7065 6374 6564 5f62  ict = expected_b
+00002b30: 616c 616e 6365 2e74 6f5f 6a73 6f6e 5f64  alance.to_json_d
+00002b40: 6963 7428 290a 2020 2020 6578 7065 6374  ict().    expect
+00002b50: 6564 5f62 616c 616e 6365 5f64 6963 745b  ed_balance_dict[
+00002b60: 2277 616c 6c65 745f 6964 225d 203d 2077  "wallet_id"] = w
+00002b70: 616c 6c65 742e 6964 2829 0a20 2020 2065  allet.id().    e
+00002b80: 7870 6563 7465 645f 6261 6c61 6e63 655f  xpected_balance_
+00002b90: 6469 6374 5b22 7761 6c6c 6574 5f74 7970  dict["wallet_typ
+00002ba0: 6522 5d20 3d20 7761 6c6c 6574 2e74 7970  e"] = wallet.typ
+00002bb0: 6528 290a 2020 2020 6578 7065 6374 6564  e().    expected
+00002bc0: 5f62 616c 616e 6365 5f64 6963 745b 2266  _balance_dict["f
+00002bd0: 696e 6765 7270 7269 6e74 225d 203d 2077  ingerprint"] = w
+00002be0: 616c 6c65 745f 6e6f 6465 2e6c 6f67 6765  allet_node.logge
+00002bf0: 645f 696e 5f66 696e 6765 7270 7269 6e74  d_in_fingerprint
+00002c00: 0a20 2020 2069 6620 7761 6c6c 6574 2e74  .    if wallet.t
+00002c10: 7970 6528 2920 3d3d 2057 616c 6c65 7454  ype() == WalletT
+00002c20: 7970 652e 4341 543a 0a20 2020 2020 2020  ype.CAT:.       
+00002c30: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+00002c40: 6365 2877 616c 6c65 742c 2043 4154 5761  ce(wallet, CATWa
+00002c50: 6c6c 6574 290a 2020 2020 2020 2020 6578  llet).        ex
+00002c60: 7065 6374 6564 5f62 616c 616e 6365 5f64  pected_balance_d
+00002c70: 6963 745b 2261 7373 6574 5f69 6422 5d20  ict["asset_id"] 
+00002c80: 3d20 7761 6c6c 6574 2e67 6574 5f61 7373  = wallet.get_ass
+00002c90: 6574 5f69 6428 290a 2020 2020 6173 7365  et_id().    asse
+00002ca0: 7274 2061 7761 6974 2072 7063 5f63 6c69  rt await rpc_cli
+00002cb0: 656e 742e 6765 745f 7761 6c6c 6574 5f62  ent.get_wallet_b
+00002cc0: 616c 616e 6365 2877 616c 6c65 742e 6964  alance(wallet.id
+00002cd0: 2829 2920 3d3d 2065 7870 6563 7465 645f  ()) == expected_
+00002ce0: 6261 6c61 6e63 655f 6469 6374 0a0a 0a61  balance_dict...a
+00002cf0: 7379 6e63 2064 6566 2074 785f 696e 5f6d  sync def tx_in_m
+00002d00: 656d 706f 6f6c 2863 6c69 656e 743a 2057  empool(client: W
+00002d10: 616c 6c65 7452 7063 436c 6965 6e74 2c20  alletRpcClient, 
+00002d20: 7472 616e 7361 6374 696f 6e5f 6964 3a20  transaction_id: 
+00002d30: 6279 7465 7333 3229 3a0a 2020 2020 7478  bytes32):.    tx
+00002d40: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
+00002d50: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
+00002d60: 312c 2074 7261 6e73 6163 7469 6f6e 5f69  1, transaction_i
+00002d70: 6429 0a20 2020 2072 6574 7572 6e20 7478  d).    return tx
+00002d80: 2e69 735f 696e 5f6d 656d 706f 6f6c 2829  .is_in_mempool()
+00002d90: 0a0a 0a61 7379 6e63 2064 6566 2067 6574  ...async def get
+00002da0: 5f63 6f6e 6669 726d 6564 5f62 616c 616e  _confirmed_balan
+00002db0: 6365 2863 6c69 656e 743a 2057 616c 6c65  ce(client: Walle
+00002dc0: 7452 7063 436c 6965 6e74 2c20 7761 6c6c  tRpcClient, wall
+00002dd0: 6574 5f69 643a 2069 6e74 293a 0a20 2020  et_id: int):.   
+00002de0: 2072 6574 7572 6e20 2861 7761 6974 2063   return (await c
+00002df0: 6c69 656e 742e 6765 745f 7761 6c6c 6574  lient.get_wallet
+00002e00: 5f62 616c 616e 6365 2877 616c 6c65 745f  _balance(wallet_
+00002e10: 6964 2929 5b22 636f 6e66 6972 6d65 645f  id))["confirmed_
+00002e20: 7761 6c6c 6574 5f62 616c 616e 6365 225d  wallet_balance"]
+00002e30: 0a0a 0a61 7379 6e63 2064 6566 2067 6574  ...async def get
+00002e40: 5f75 6e63 6f6e 6669 726d 6564 5f62 616c  _unconfirmed_bal
+00002e50: 616e 6365 2863 6c69 656e 743a 2057 616c  ance(client: Wal
+00002e60: 6c65 7452 7063 436c 6965 6e74 2c20 7761  letRpcClient, wa
+00002e70: 6c6c 6574 5f69 643a 2069 6e74 293a 0a20  llet_id: int):. 
+00002e80: 2020 2072 6574 7572 6e20 2861 7761 6974     return (await
+00002e90: 2063 6c69 656e 742e 6765 745f 7761 6c6c   client.get_wall
+00002ea0: 6574 5f62 616c 616e 6365 2877 616c 6c65  et_balance(walle
+00002eb0: 745f 6964 2929 5b22 756e 636f 6e66 6972  t_id))["unconfir
+00002ec0: 6d65 645f 7761 6c6c 6574 5f62 616c 616e  med_wallet_balan
+00002ed0: 6365 225d 0a0a 0a64 6566 2075 7064 6174  ce"]...def updat
+00002ee0: 655f 7665 7269 6679 5f73 6967 6e61 7475  e_verify_signatu
+00002ef0: 7265 5f72 6571 7565 7374 2872 6571 7565  re_request(reque
+00002f00: 7374 3a20 4469 6374 5b73 7472 2c20 416e  st: Dict[str, An
+00002f10: 795d 2c20 7072 6566 6978 5f68 6578 5f76  y], prefix_hex_v
+00002f20: 616c 7565 733a 2062 6f6f 6c29 3a0a 2020  alues: bool):.  
+00002f30: 2020 7570 6461 7465 645f 7265 7175 6573    updated_reques
+00002f40: 7420 3d20 7265 7175 6573 742e 636f 7079  t = request.copy
+00002f50: 2829 0a20 2020 2075 7064 6174 6564 5f72  ().    updated_r
+00002f60: 6571 7565 7374 5b22 7075 626b 6579 225d  equest["pubkey"]
+00002f70: 203d 2028 2230 7822 2069 6620 7072 6566   = ("0x" if pref
+00002f80: 6978 5f68 6578 5f76 616c 7565 7320 656c  ix_hex_values el
+00002f90: 7365 2022 2229 202b 2075 7064 6174 6564  se "") + updated
+00002fa0: 5f72 6571 7565 7374 5b22 7075 626b 6579  _request["pubkey
+00002fb0: 225d 0a20 2020 2075 7064 6174 6564 5f72  "].    updated_r
+00002fc0: 6571 7565 7374 5b22 7369 676e 6174 7572  equest["signatur
+00002fd0: 6522 5d20 3d20 2822 3078 2220 6966 2070  e"] = ("0x" if p
+00002fe0: 7265 6669 785f 6865 785f 7661 6c75 6573  refix_hex_values
+00002ff0: 2065 6c73 6520 2222 2920 2b20 7570 6461   else "") + upda
+00003000: 7465 645f 7265 7175 6573 745b 2273 6967  ted_request["sig
+00003010: 6e61 7475 7265 225d 0a20 2020 2072 6574  nature"].    ret
+00003020: 7572 6e20 7570 6461 7465 645f 7265 7175  urn updated_requ
+00003030: 6573 740a 0a0a 4070 7974 6573 742e 6d61  est...@pytest.ma
+00003040: 726b 2e61 7379 6e63 696f 0a61 7379 6e63  rk.asyncio.async
+00003050: 2064 6566 2074 6573 745f 7365 6e64 5f74   def test_send_t
+00003060: 7261 6e73 6163 7469 6f6e 2877 616c 6c65  ransaction(walle
+00003070: 745f 7270 635f 656e 7669 726f 6e6d 656e  t_rpc_environmen
+00003080: 743a 2057 616c 6c65 7452 7063 5465 7374  t: WalletRpcTest
+00003090: 456e 7669 726f 6e6d 656e 7429 3a0a 2020  Environment):.  
+000030a0: 2020 656e 763a 2057 616c 6c65 7452 7063    env: WalletRpc
+000030b0: 5465 7374 456e 7669 726f 6e6d 656e 7420  TestEnvironment 
+000030c0: 3d20 7761 6c6c 6574 5f72 7063 5f65 6e76  = wallet_rpc_env
+000030d0: 6972 6f6e 6d65 6e74 0a0a 2020 2020 7761  ironment..    wa
+000030e0: 6c6c 6574 5f32 3a20 5761 6c6c 6574 203d  llet_2: Wallet =
+000030f0: 2065 6e76 2e77 616c 6c65 745f 322e 7761   env.wallet_2.wa
+00003100: 6c6c 6574 0a20 2020 2077 616c 6c65 745f  llet.    wallet_
+00003110: 6e6f 6465 3a20 5761 6c6c 6574 4e6f 6465  node: WalletNode
+00003120: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
+00003130: 6e6f 6465 0a20 2020 2066 756c 6c5f 6e6f  node.    full_no
+00003140: 6465 5f61 7069 3a20 4675 6c6c 4e6f 6465  de_api: FullNode
+00003150: 5369 6d75 6c61 746f 7220 3d20 656e 762e  Simulator = env.
+00003160: 6675 6c6c 5f6e 6f64 652e 6170 690a 2020  full_node.api.  
+00003170: 2020 636c 6965 6e74 3a20 5761 6c6c 6574    client: Wallet
+00003180: 5270 6343 6c69 656e 7420 3d20 656e 762e  RpcClient = env.
+00003190: 7761 6c6c 6574 5f31 2e72 7063 5f63 6c69  wallet_1.rpc_cli
+000031a0: 656e 740a 0a20 2020 2067 656e 6572 6174  ent..    generat
+000031b0: 6564 5f66 756e 6473 203d 2061 7761 6974  ed_funds = await
+000031c0: 2067 656e 6572 6174 655f 6675 6e64 7328   generate_funds(
+000031d0: 6675 6c6c 5f6e 6f64 655f 6170 692c 2065  full_node_api, e
+000031e0: 6e76 2e77 616c 6c65 745f 3129 0a0a 2020  nv.wallet_1)..  
+000031f0: 2020 6164 6472 203d 2065 6e63 6f64 655f    addr = encode_
+00003200: 7075 7a7a 6c65 5f68 6173 6828 6177 6169  puzzle_hash(awai
+00003210: 7420 7761 6c6c 6574 5f32 2e67 6574 5f6e  t wallet_2.get_n
+00003220: 6577 5f70 757a 7a6c 6568 6173 6828 292c  ew_puzzlehash(),
+00003230: 2022 7478 6368 2229 0a20 2020 2074 785f   "txch").    tx_
+00003240: 616d 6f75 6e74 203d 2075 696e 7436 3428  amount = uint64(
+00003250: 3135 3630 3030 3030 290a 2020 2020 7769  15600000).    wi
+00003260: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+00003270: 2856 616c 7565 4572 726f 7229 3a0a 2020  (ValueError):.  
+00003280: 2020 2020 2020 6177 6169 7420 636c 6965        await clie
+00003290: 6e74 2e73 656e 645f 7472 616e 7361 6374  nt.send_transact
+000032a0: 696f 6e28 312c 2075 696e 7436 3428 3130  ion(1, uint64(10
+000032b0: 3030 3030 3030 3030 3030 3030 3030 3031  0000000000000001
+000032c0: 292c 2061 6464 7229 0a0a 2020 2020 2320  ), addr)..    # 
+000032d0: 5465 7374 7320 7365 6e64 696e 6720 6120  Tests sending a 
+000032e0: 6261 7369 6320 7472 616e 7361 6374 696f  basic transactio
+000032f0: 6e0a 2020 2020 7478 203d 2061 7761 6974  n.    tx = await
+00003300: 2063 6c69 656e 742e 7365 6e64 5f74 7261   client.send_tra
+00003310: 6e73 6163 7469 6f6e 280a 2020 2020 2020  nsaction(.      
+00003320: 2020 312c 0a20 2020 2020 2020 2074 785f    1,.        tx_
+00003330: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
+00003340: 6164 6472 2c0a 2020 2020 2020 2020 6d65  addr,.        me
+00003350: 6d6f 733d 5b22 7468 6973 2069 7320 6120  mos=["this is a 
+00003360: 6261 7369 6320 7478 225d 2c0a 2020 2020  basic tx"],.    
+00003370: 2020 2020 6578 636c 7564 6564 5f61 6d6f      excluded_amo
+00003380: 756e 7473 3d5b 7569 6e74 3634 2832 3530  unts=[uint64(250
+00003390: 3030 3030 3030 3030 3029 5d2c 0a20 2020  000000000)],.   
+000033a0: 2020 2020 2065 7863 6c75 6465 645f 636f       excluded_co
+000033b0: 696e 5f69 6473 3d5b 6279 7465 7333 3228  in_ids=[bytes32(
+000033c0: 5b30 5d20 2a20 3332 292e 6865 7828 295d  [0] * 32).hex()]
+000033d0: 2c0a 2020 2020 290a 2020 2020 7472 616e  ,.    ).    tran
+000033e0: 7361 6374 696f 6e5f 6964 203d 2074 782e  saction_id = tx.
+000033f0: 6e61 6d65 0a0a 2020 2020 7370 656e 645f  name..    spend_
+00003400: 6275 6e64 6c65 203d 2074 782e 7370 656e  bundle = tx.spen
+00003410: 645f 6275 6e64 6c65 0a20 2020 2061 7373  d_bundle.    ass
+00003420: 6572 7420 7370 656e 645f 6275 6e64 6c65  ert spend_bundle
+00003430: 2069 7320 6e6f 7420 4e6f 6e65 0a0a 2020   is not None..  
+00003440: 2020 6177 6169 7420 7469 6d65 5f6f 7574    await time_out
+00003450: 5f61 7373 6572 7428 3230 2c20 7478 5f69  _assert(20, tx_i
+00003460: 6e5f 6d65 6d70 6f6f 6c2c 2054 7275 652c  n_mempool, True,
+00003470: 2063 6c69 656e 742c 2074 7261 6e73 6163   client, transac
+00003480: 7469 6f6e 5f69 6429 0a20 2020 2061 7761  tion_id).    awa
+00003490: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
+000034a0: 7274 2832 302c 2067 6574 5f75 6e63 6f6e  rt(20, get_uncon
+000034b0: 6669 726d 6564 5f62 616c 616e 6365 2c20  firmed_balance, 
+000034c0: 6765 6e65 7261 7465 645f 6675 6e64 7320  generated_funds 
+000034d0: 2d20 7478 5f61 6d6f 756e 742c 2063 6c69  - tx_amount, cli
+000034e0: 656e 742c 2031 290a 0a20 2020 2061 7761  ent, 1)..    awa
+000034f0: 6974 2066 6172 6d5f 7472 616e 7361 6374  it farm_transact
+00003500: 696f 6e28 6675 6c6c 5f6e 6f64 655f 6170  ion(full_node_ap
+00003510: 692c 2077 616c 6c65 745f 6e6f 6465 2c20  i, wallet_node, 
+00003520: 7370 656e 645f 6275 6e64 6c65 290a 0a20  spend_bundle).. 
+00003530: 2020 2023 2043 6865 636b 7320 7468 6174     # Checks that
+00003540: 2074 6865 206d 656d 6f20 6361 6e20 6265   the memo can be
+00003550: 2072 6574 7269 6576 6564 0a20 2020 2074   retrieved.    t
+00003560: 785f 636f 6e66 6972 6d65 6420 3d20 6177  x_confirmed = aw
+00003570: 6169 7420 636c 6965 6e74 2e67 6574 5f74  ait client.get_t
+00003580: 7261 6e73 6163 7469 6f6e 2831 2c20 7472  ransaction(1, tr
+00003590: 616e 7361 6374 696f 6e5f 6964 290a 2020  ansaction_id).  
+000035a0: 2020 6173 7365 7274 2074 785f 636f 6e66    assert tx_conf
+000035b0: 6972 6d65 642e 636f 6e66 6972 6d65 640a  irmed.confirmed.
+000035c0: 2020 2020 6173 7365 7274 206c 656e 2874      assert len(t
+000035d0: 785f 636f 6e66 6972 6d65 642e 6765 745f  x_confirmed.get_
+000035e0: 6d65 6d6f 7328 2929 203d 3d20 310a 2020  memos()) == 1.  
+000035f0: 2020 6173 7365 7274 205b 6222 7468 6973    assert [b"this
+00003600: 2069 7320 6120 6261 7369 6320 7478 225d   is a basic tx"]
+00003610: 2069 6e20 7478 5f63 6f6e 6669 726d 6564   in tx_confirmed
+00003620: 2e67 6574 5f6d 656d 6f73 2829 2e76 616c  .get_memos().val
+00003630: 7565 7328 290a 2020 2020 6173 7365 7274  ues().    assert
+00003640: 206c 6973 7428 7478 5f63 6f6e 6669 726d   list(tx_confirm
+00003650: 6564 2e67 6574 5f6d 656d 6f73 2829 2e6b  ed.get_memos().k
+00003660: 6579 7328 2929 5b30 5d20 696e 205b 612e  eys())[0] in [a.
+00003670: 6e61 6d65 2829 2066 6f72 2061 2069 6e20  name() for a in 
+00003680: 7370 656e 645f 6275 6e64 6c65 2e61 6464  spend_bundle.add
+00003690: 6974 696f 6e73 2829 5d0a 0a20 2020 2061  itions()]..    a
+000036a0: 7761 6974 2074 696d 655f 6f75 745f 6173  wait time_out_as
+000036b0: 7365 7274 2832 302c 2067 6574 5f63 6f6e  sert(20, get_con
+000036c0: 6669 726d 6564 5f62 616c 616e 6365 2c20  firmed_balance, 
+000036d0: 6765 6e65 7261 7465 645f 6675 6e64 7320  generated_funds 
+000036e0: 2d20 7478 5f61 6d6f 756e 742c 2063 6c69  - tx_amount, cli
+000036f0: 656e 742c 2031 290a 0a0a 4070 7974 6573  ent, 1)...@pytes
+00003700: 742e 6d61 726b 2e61 7379 6e63 696f 0a61  t.mark.asyncio.a
+00003710: 7379 6e63 2064 6566 2074 6573 745f 7075  sync def test_pu
+00003720: 7368 5f74 7261 6e73 6163 7469 6f6e 7328  sh_transactions(
+00003730: 7761 6c6c 6574 5f72 7063 5f65 6e76 6972  wallet_rpc_envir
+00003740: 6f6e 6d65 6e74 3a20 5761 6c6c 6574 5270  onment: WalletRp
+00003750: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
+00003760: 293a 0a20 2020 2065 6e76 3a20 5761 6c6c  ):.    env: Wall
+00003770: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
+00003780: 6d65 6e74 203d 2077 616c 6c65 745f 7270  ment = wallet_rp
+00003790: 635f 656e 7669 726f 6e6d 656e 740a 0a20  c_environment.. 
+000037a0: 2020 2077 616c 6c65 743a 2057 616c 6c65     wallet: Walle
+000037b0: 7420 3d20 656e 762e 7761 6c6c 6574 5f31  t = env.wallet_1
+000037c0: 2e77 616c 6c65 740a 2020 2020 7761 6c6c  .wallet.    wall
+000037d0: 6574 5f6e 6f64 653a 2057 616c 6c65 744e  et_node: WalletN
+000037e0: 6f64 6520 3d20 656e 762e 7761 6c6c 6574  ode = env.wallet
+000037f0: 5f31 2e6e 6f64 650a 2020 2020 6675 6c6c  _1.node.    full
+00003800: 5f6e 6f64 655f 6170 693a 2046 756c 6c4e  _node_api: FullN
+00003810: 6f64 6553 696d 756c 6174 6f72 203d 2065  odeSimulator = e
+00003820: 6e76 2e66 756c 6c5f 6e6f 6465 2e61 7069  nv.full_node.api
+00003830: 0a20 2020 2063 6c69 656e 743a 2057 616c  .    client: Wal
+00003840: 6c65 7452 7063 436c 6965 6e74 203d 2065  letRpcClient = e
+00003850: 6e76 2e77 616c 6c65 745f 312e 7270 635f  nv.wallet_1.rpc_
+00003860: 636c 6965 6e74 0a0a 2020 2020 6177 6169  client..    awai
+00003870: 7420 6765 6e65 7261 7465 5f66 756e 6473  t generate_funds
+00003880: 2866 756c 6c5f 6e6f 6465 5f61 7069 2c20  (full_node_api, 
+00003890: 656e 762e 7761 6c6c 6574 5f31 290a 0a20  env.wallet_1).. 
+000038a0: 2020 206f 7574 7075 7473 203d 2061 7761     outputs = awa
+000038b0: 6974 2063 7265 6174 655f 7478 5f6f 7574  it create_tx_out
+000038c0: 7075 7473 2877 616c 6c65 742c 205b 2831  puts(wallet, [(1
+000038d0: 3233 3433 3231 2c20 4e6f 6e65 295d 290a  234321, None)]).
+000038e0: 0a20 2020 2074 7820 3d20 6177 6169 7420  .    tx = await 
+000038f0: 636c 6965 6e74 2e63 7265 6174 655f 7369  client.create_si
+00003900: 676e 6564 5f74 7261 6e73 6163 7469 6f6e  gned_transaction
+00003910: 280a 2020 2020 2020 2020 6f75 7470 7574  (.        output
+00003920: 732c 0a20 2020 2020 2020 2066 6565 3d75  s,.        fee=u
+00003930: 696e 7436 3428 3130 3029 2c0a 2020 2020  int64(100),.    
+00003940: 290a 0a20 2020 2061 7761 6974 2063 6c69  )..    await cli
+00003950: 656e 742e 7075 7368 5f74 7261 6e73 6163  ent.push_transac
+00003960: 7469 6f6e 7328 5b74 785d 290a 0a20 2020  tions([tx])..   
+00003970: 2073 7065 6e64 5f62 756e 646c 6520 3d20   spend_bundle = 
+00003980: 7478 2e73 7065 6e64 5f62 756e 646c 650a  tx.spend_bundle.
+00003990: 2020 2020 6173 7365 7274 2073 7065 6e64      assert spend
+000039a0: 5f62 756e 646c 6520 6973 206e 6f74 204e  _bundle is not N
+000039b0: 6f6e 650a 2020 2020 6177 6169 7420 6661  one.    await fa
+000039c0: 726d 5f74 7261 6e73 6163 7469 6f6e 2866  rm_transaction(f
+000039d0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
+000039e0: 6c6c 6574 5f6e 6f64 652c 2073 7065 6e64  llet_node, spend
+000039f0: 5f62 756e 646c 6529 0a0a 2020 2020 7478  _bundle)..    tx
+00003a00: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
+00003a10: 6765 745f 7472 616e 7361 6374 696f 6e28  get_transaction(
+00003a20: 312c 2074 7261 6e73 6163 7469 6f6e 5f69  1, transaction_i
+00003a30: 643d 7478 2e6e 616d 6529 0a20 2020 2061  d=tx.name).    a
+00003a40: 7373 6572 7420 7478 2e63 6f6e 6669 726d  ssert tx.confirm
+00003a50: 6564 0a0a 0a40 7079 7465 7374 2e6d 6172  ed...@pytest.mar
+00003a60: 6b2e 6173 796e 6369 6f0a 6173 796e 6320  k.asyncio.async 
+00003a70: 6465 6620 7465 7374 5f67 6574 5f62 616c  def test_get_bal
+00003a80: 616e 6365 2877 616c 6c65 745f 7270 635f  ance(wallet_rpc_
+00003a90: 656e 7669 726f 6e6d 656e 743a 2057 616c  environment: Wal
+00003aa0: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
+00003ab0: 6e6d 656e 7429 3a0a 2020 2020 656e 7620  nment):.    env 
+00003ac0: 3d20 7761 6c6c 6574 5f72 7063 5f65 6e76  = wallet_rpc_env
+00003ad0: 6972 6f6e 6d65 6e74 0a20 2020 2077 616c  ironment.    wal
+00003ae0: 6c65 743a 2057 616c 6c65 7420 3d20 656e  let: Wallet = en
+00003af0: 762e 7761 6c6c 6574 5f31 2e77 616c 6c65  v.wallet_1.walle
+00003b00: 740a 2020 2020 7761 6c6c 6574 5f6e 6f64  t.    wallet_nod
+00003b10: 653a 2057 616c 6c65 744e 6f64 6520 3d20  e: WalletNode = 
+00003b20: 656e 762e 7761 6c6c 6574 5f31 2e6e 6f64  env.wallet_1.nod
+00003b30: 650a 2020 2020 6675 6c6c 5f6e 6f64 655f  e.    full_node_
+00003b40: 6170 693a 2046 756c 6c4e 6f64 6553 696d  api: FullNodeSim
+00003b50: 756c 6174 6f72 203d 2065 6e76 2e66 756c  ulator = env.ful
+00003b60: 6c5f 6e6f 6465 2e61 7069 0a20 2020 2077  l_node.api.    w
+00003b70: 616c 6c65 745f 7270 635f 636c 6965 6e74  allet_rpc_client
+00003b80: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
+00003b90: 7270 635f 636c 6965 6e74 0a20 2020 2061  rpc_client.    a
+00003ba0: 7761 6974 2066 756c 6c5f 6e6f 6465 5f61  wait full_node_a
+00003bb0: 7069 2e66 6172 6d5f 626c 6f63 6b73 5f74  pi.farm_blocks_t
+00003bc0: 6f5f 7761 6c6c 6574 2832 2c20 7761 6c6c  o_wallet(2, wall
+00003bd0: 6574 290a 2020 2020 6173 796e 6320 7769  et).    async wi
+00003be0: 7468 2077 616c 6c65 745f 6e6f 6465 2e77  th wallet_node.w
+00003bf0: 616c 6c65 745f 7374 6174 655f 6d61 6e61  allet_state_mana
+00003c00: 6765 722e 6c6f 636b 3a0a 2020 2020 2020  ger.lock:.      
+00003c10: 2020 6361 745f 7761 6c6c 6574 3a20 4341    cat_wallet: CA
+00003c20: 5457 616c 6c65 7420 3d20 6177 6169 7420  TWallet = await 
+00003c30: 4341 5457 616c 6c65 742e 6372 6561 7465  CATWallet.create
+00003c40: 5f6e 6577 5f63 6174 5f77 616c 6c65 7428  _new_cat_wallet(
+00003c50: 0a20 2020 2020 2020 2020 2020 2077 616c  .            wal
+00003c60: 6c65 745f 6e6f 6465 2e77 616c 6c65 745f  let_node.wallet_
+00003c70: 7374 6174 655f 6d61 6e61 6765 722c 2077  state_manager, w
+00003c80: 616c 6c65 742c 207b 2269 6465 6e74 6966  allet, {"identif
+00003c90: 6965 7222 3a20 2267 656e 6573 6973 5f62  ier": "genesis_b
+00003ca0: 795f 6964 227d 2c20 7569 6e74 3634 2831  y_id"}, uint64(1
+00003cb0: 3030 290a 2020 2020 2020 2020 290a 2020  00).        ).  
+00003cc0: 2020 6177 6169 7420 6173 7365 7274 5f67    await assert_g
+00003cd0: 6574 5f62 616c 616e 6365 2877 616c 6c65  et_balance(walle
+00003ce0: 745f 7270 635f 636c 6965 6e74 2c20 7761  t_rpc_client, wa
+00003cf0: 6c6c 6574 5f6e 6f64 652c 2077 616c 6c65  llet_node, walle
+00003d00: 7429 0a20 2020 2061 7761 6974 2061 7373  t).    await ass
+00003d10: 6572 745f 6765 745f 6261 6c61 6e63 6528  ert_get_balance(
+00003d20: 7761 6c6c 6574 5f72 7063 5f63 6c69 656e  wallet_rpc_clien
+00003d30: 742c 2077 616c 6c65 745f 6e6f 6465 2c20  t, wallet_node, 
+00003d40: 6361 745f 7761 6c6c 6574 290a 0a0a 4070  cat_wallet)...@p
+00003d50: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+00003d60: 696f 0a61 7379 6e63 2064 6566 2074 6573  io.async def tes
+00003d70: 745f 6765 745f 6661 726d 6564 5f61 6d6f  t_get_farmed_amo
+00003d80: 756e 7428 7761 6c6c 6574 5f72 7063 5f65  unt(wallet_rpc_e
+00003d90: 6e76 6972 6f6e 6d65 6e74 3a20 5761 6c6c  nvironment: Wall
+00003da0: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
+00003db0: 6d65 6e74 293a 0a20 2020 2065 6e76 203d  ment):.    env =
+00003dc0: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
+00003dd0: 726f 6e6d 656e 740a 2020 2020 7761 6c6c  ronment.    wall
+00003de0: 6574 3a20 5761 6c6c 6574 203d 2065 6e76  et: Wallet = env
+00003df0: 2e77 616c 6c65 745f 312e 7761 6c6c 6574  .wallet_1.wallet
+00003e00: 0a20 2020 2066 756c 6c5f 6e6f 6465 5f61  .    full_node_a
+00003e10: 7069 3a20 4675 6c6c 4e6f 6465 5369 6d75  pi: FullNodeSimu
+00003e20: 6c61 746f 7220 3d20 656e 762e 6675 6c6c  lator = env.full
+00003e30: 5f6e 6f64 652e 6170 690a 2020 2020 7761  _node.api.    wa
+00003e40: 6c6c 6574 5f72 7063 5f63 6c69 656e 7420  llet_rpc_client 
+00003e50: 3d20 656e 762e 7761 6c6c 6574 5f31 2e72  = env.wallet_1.r
+00003e60: 7063 5f63 6c69 656e 740a 2020 2020 6177  pc_client.    aw
+00003e70: 6169 7420 6675 6c6c 5f6e 6f64 655f 6170  ait full_node_ap
+00003e80: 692e 6661 726d 5f62 6c6f 636b 735f 746f  i.farm_blocks_to
+00003e90: 5f77 616c 6c65 7428 322c 2077 616c 6c65  _wallet(2, walle
+00003ea0: 7429 0a0a 2020 2020 7265 7375 6c74 203d  t)..    result =
+00003eb0: 2061 7761 6974 2077 616c 6c65 745f 7270   await wallet_rp
+00003ec0: 635f 636c 6965 6e74 2e67 6574 5f66 6172  c_client.get_far
+00003ed0: 6d65 645f 616d 6f75 6e74 2829 0a0a 2020  med_amount()..  
+00003ee0: 2020 6578 7065 6374 6564 5f72 6573 756c    expected_resul
+00003ef0: 7420 3d20 7b0a 2020 2020 2020 2020 2266  t = {.        "f
+00003f00: 6172 6d65 645f 616d 6f75 6e74 223a 2034  armed_amount": 4
+00003f10: 5f30 3030 5f30 3030 5f30 3030 5f30 3030  _000_000_000_000
+00003f20: 2c0a 2020 2020 2020 2020 2266 6172 6d65  ,.        "farme
+00003f30: 725f 7265 7761 7264 5f61 6d6f 756e 7422  r_reward_amount"
+00003f40: 3a20 3530 305f 3030 305f 3030 305f 3030  : 500_000_000_00
+00003f50: 302c 0a20 2020 2020 2020 2022 6665 655f  0,.        "fee_
+00003f60: 616d 6f75 6e74 223a 2030 2c0a 2020 2020  amount": 0,.    
+00003f70: 2020 2020 226c 6173 745f 6865 6967 6874      "last_height
+00003f80: 5f66 6172 6d65 6422 3a20 322c 0a20 2020  _farmed": 2,.   
+00003f90: 2020 2020 2022 706f 6f6c 5f72 6577 6172       "pool_rewar
+00003fa0: 645f 616d 6f75 6e74 223a 2033 5f35 3030  d_amount": 3_500
+00003fb0: 5f30 3030 5f30 3030 5f30 3030 2c0a 2020  _000_000_000,.  
+00003fc0: 2020 2020 2020 2273 7563 6365 7373 223a        "success":
+00003fd0: 2054 7275 652c 0a20 2020 207d 0a0a 2020   True,.    }..  
+00003fe0: 2020 6173 7365 7274 2072 6573 756c 7420    assert result 
+00003ff0: 3d3d 2065 7870 6563 7465 645f 7265 7375  == expected_resu
+00004000: 6c74 0a0a 0a40 7079 7465 7374 2e6d 6172  lt...@pytest.mar
+00004010: 6b2e 6173 796e 6369 6f0a 6173 796e 6320  k.asyncio.async 
+00004020: 6465 6620 7465 7374 5f67 6574 5f66 6172  def test_get_far
+00004030: 6d65 645f 616d 6f75 6e74 5f77 6974 685f  med_amount_with_
+00004040: 6665 6528 7761 6c6c 6574 5f72 7063 5f65  fee(wallet_rpc_e
+00004050: 6e76 6972 6f6e 6d65 6e74 3a20 5761 6c6c  nvironment: Wall
+00004060: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
+00004070: 6d65 6e74 293a 0a20 2020 2065 6e76 203d  ment):.    env =
+00004080: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
+00004090: 726f 6e6d 656e 740a 2020 2020 7761 6c6c  ronment.    wall
+000040a0: 6574 3a20 5761 6c6c 6574 203d 2065 6e76  et: Wallet = env
+000040b0: 2e77 616c 6c65 745f 312e 7761 6c6c 6574  .wallet_1.wallet
+000040c0: 0a20 2020 2066 756c 6c5f 6e6f 6465 5f61  .    full_node_a
+000040d0: 7069 3a20 4675 6c6c 4e6f 6465 5369 6d75  pi: FullNodeSimu
+000040e0: 6c61 746f 7220 3d20 656e 762e 6675 6c6c  lator = env.full
+000040f0: 5f6e 6f64 652e 6170 690a 2020 2020 7761  _node.api.    wa
+00004100: 6c6c 6574 5f72 7063 5f63 6c69 656e 7420  llet_rpc_client 
+00004110: 3d20 656e 762e 7761 6c6c 6574 5f31 2e72  = env.wallet_1.r
+00004120: 7063 5f63 6c69 656e 740a 2020 2020 7761  pc_client.    wa
+00004130: 6c6c 6574 5f6e 6f64 653a 2057 616c 6c65  llet_node: Walle
+00004140: 744e 6f64 6520 3d20 656e 762e 7761 6c6c  tNode = env.wall
+00004150: 6574 5f31 2e6e 6f64 650a 0a20 2020 2061  et_1.node..    a
+00004160: 7761 6974 2067 656e 6572 6174 655f 6675  wait generate_fu
+00004170: 6e64 7328 6675 6c6c 5f6e 6f64 655f 6170  nds(full_node_ap
+00004180: 692c 2065 6e76 2e77 616c 6c65 745f 3129  i, env.wallet_1)
+00004190: 0a0a 2020 2020 6665 655f 616d 6f75 6e74  ..    fee_amount
+000041a0: 203d 2031 3030 0a20 2020 2074 7820 3d20   = 100.    tx = 
+000041b0: 6177 6169 7420 7761 6c6c 6574 2e67 656e  await wallet.gen
+000041c0: 6572 6174 655f 7369 676e 6564 5f74 7261  erate_signed_tra
+000041d0: 6e73 6163 7469 6f6e 280a 2020 2020 2020  nsaction(.      
+000041e0: 2020 616d 6f75 6e74 3d75 696e 7436 3428    amount=uint64(
+000041f0: 3529 2c0a 2020 2020 2020 2020 7075 7a7a  5),.        puzz
+00004200: 6c65 5f68 6173 683d 6279 7465 7333 3228  le_hash=bytes32(
+00004210: 5b30 5d20 2a20 3332 292c 0a20 2020 2020  [0] * 32),.     
+00004220: 2020 2066 6565 3d75 696e 7436 3428 6665     fee=uint64(fe
+00004230: 655f 616d 6f75 6e74 292c 0a20 2020 2029  e_amount),.    )
+00004240: 0a20 2020 2061 7761 6974 2077 616c 6c65  .    await walle
+00004250: 742e 7075 7368 5f74 7261 6e73 6163 7469  t.push_transacti
+00004260: 6f6e 2874 7829 0a0a 2020 2020 6f75 725f  on(tx)..    our_
+00004270: 7068 203d 2061 7761 6974 2077 616c 6c65  ph = await walle
+00004280: 742e 6765 745f 6e65 775f 7075 7a7a 6c65  t.get_new_puzzle
+00004290: 6861 7368 2829 0a20 2020 2061 7761 6974  hash().    await
+000042a0: 2066 756c 6c5f 6e6f 6465 5f61 7069 2e77   full_node_api.w
+000042b0: 6169 745f 7472 616e 7361 6374 696f 6e5f  ait_transaction_
+000042c0: 7265 636f 7264 735f 656e 7465 7265 645f  records_entered_
+000042d0: 6d65 6d70 6f6f 6c28 7265 636f 7264 733d  mempool(records=
+000042e0: 5b74 785d 290a 2020 2020 6177 6169 7420  [tx]).    await 
+000042f0: 6675 6c6c 5f6e 6f64 655f 6170 692e 6661  full_node_api.fa
+00004300: 726d 5f62 6c6f 636b 735f 746f 5f70 757a  rm_blocks_to_puz
+00004310: 7a6c 6568 6173 6828 636f 756e 743d 322c  zlehash(count=2,
+00004320: 2066 6172 6d5f 746f 3d6f 7572 5f70 682c   farm_to=our_ph,
+00004330: 2067 7561 7261 6e74 6565 5f74 7261 6e73   guarantee_trans
+00004340: 6163 7469 6f6e 5f62 6c6f 636b 733d 5472  action_blocks=Tr
+00004350: 7565 290a 2020 2020 6177 6169 7420 6675  ue).    await fu
+00004360: 6c6c 5f6e 6f64 655f 6170 692e 7761 6974  ll_node_api.wait
+00004370: 5f66 6f72 5f77 616c 6c65 745f 7379 6e63  _for_wallet_sync
+00004380: 6564 2877 616c 6c65 745f 6e6f 6465 3d77  ed(wallet_node=w
+00004390: 616c 6c65 745f 6e6f 6465 2c20 7469 6d65  allet_node, time
+000043a0: 6f75 743d 3230 290a 0a20 2020 2072 6573  out=20)..    res
+000043b0: 756c 7420 3d20 6177 6169 7420 7761 6c6c  ult = await wall
+000043c0: 6574 5f72 7063 5f63 6c69 656e 742e 6765  et_rpc_client.ge
+000043d0: 745f 6661 726d 6564 5f61 6d6f 756e 7428  t_farmed_amount(
+000043e0: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
+000043f0: 756c 745b 2266 6565 5f61 6d6f 756e 7422  ult["fee_amount"
+00004400: 5d20 3d3d 2066 6565 5f61 6d6f 756e 740a  ] == fee_amount.
+00004410: 0a0a 4070 7974 6573 742e 6d61 726b 2e61  ..@pytest.mark.a
+00004420: 7379 6e63 696f 0a61 7379 6e63 2064 6566  syncio.async def
+00004430: 2074 6573 745f 6765 745f 7469 6d65 7374   test_get_timest
+00004440: 616d 705f 666f 725f 6865 6967 6874 2877  amp_for_height(w
+00004450: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
+00004460: 6e6d 656e 743a 2057 616c 6c65 7452 7063  nment: WalletRpc
+00004470: 5465 7374 456e 7669 726f 6e6d 656e 7429  TestEnvironment)
+00004480: 3a0a 2020 2020 656e 763a 2057 616c 6c65  :.    env: Walle
+00004490: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
+000044a0: 656e 7420 3d20 7761 6c6c 6574 5f72 7063  ent = wallet_rpc
+000044b0: 5f65 6e76 6972 6f6e 6d65 6e74 0a0a 2020  _environment..  
+000044c0: 2020 6675 6c6c 5f6e 6f64 655f 6170 693a    full_node_api:
+000044d0: 2046 756c 6c4e 6f64 6553 696d 756c 6174   FullNodeSimulat
+000044e0: 6f72 203d 2065 6e76 2e66 756c 6c5f 6e6f  or = env.full_no
+000044f0: 6465 2e61 7069 0a20 2020 2063 6c69 656e  de.api.    clien
+00004500: 743a 2057 616c 6c65 7452 7063 436c 6965  t: WalletRpcClie
+00004510: 6e74 203d 2065 6e76 2e77 616c 6c65 745f  nt = env.wallet_
+00004520: 312e 7270 635f 636c 6965 6e74 0a0a 2020  1.rpc_client..  
+00004530: 2020 6177 6169 7420 6765 6e65 7261 7465    await generate
+00004540: 5f66 756e 6473 2866 756c 6c5f 6e6f 6465  _funds(full_node
+00004550: 5f61 7069 2c20 656e 762e 7761 6c6c 6574  _api, env.wallet
+00004560: 5f31 290a 0a20 2020 2023 2054 6869 7320  _1)..    # This 
+00004570: 7465 7374 7320 7468 6174 2074 6865 2063  tests that the c
+00004580: 6c69 656e 7420 7265 7475 726e 7320 6120  lient returns a 
+00004590: 7569 6e74 3634 2c20 7261 7468 6572 2074  uint64, rather t
+000045a0: 6861 6e20 7261 6973 696e 6720 6f72 2072  han raising or r
+000045b0: 6574 7572 6e69 6e67 2073 6f6d 6574 6869  eturning somethi
+000045c0: 6e67 2075 6e65 7870 6563 7465 640a 2020  ng unexpected.  
+000045d0: 2020 7569 6e74 3634 2861 7761 6974 2063    uint64(await c
+000045e0: 6c69 656e 742e 6765 745f 7469 6d65 7374  lient.get_timest
+000045f0: 616d 705f 666f 725f 6865 6967 6874 2875  amp_for_height(u
+00004600: 696e 7433 3228 3129 2929 0a0a 0a40 7079  int32(1)))...@py
+00004610: 7465 7374 2e6d 6172 6b2e 7061 7261 6d65  test.mark.parame
+00004620: 7472 697a 6528 0a20 2020 2022 6f75 7470  trize(.    "outp
+00004630: 7574 5f61 7267 732c 2066 6565 2c20 7365  ut_args, fee, se
+00004640: 6c65 6374 5f63 6f69 6e2c 2069 735f 6361  lect_coin, is_ca
+00004650: 7422 2c0a 2020 2020 5b0a 2020 2020 2020  t",.    [.      
+00004660: 2020 285b 2833 3438 3032 362c 204e 6f6e    ([(348026, Non
+00004670: 6529 5d2c 2030 2c20 4661 6c73 652c 2046  e)], 0, False, F
+00004680: 616c 7365 292c 0a20 2020 2020 2020 2028  alse),.        (
+00004690: 5b28 3132 3730 3439 3532 3330 2c20 5b22  [(1270495230, ["
+000046a0: 6d65 6d6f 5f31 225d 292c 2028 3930 3233  memo_1"]), (9023
+000046b0: 3437 2c20 5b22 6d65 6d6f 5f32 225d 295d  47, ["memo_2"])]
+000046c0: 2c20 312c 2054 7275 652c 2046 616c 7365  , 1, True, False
+000046d0: 292c 0a20 2020 2020 2020 2028 5b28 3834  ),.        ([(84
+000046e0: 3932 302c 205b 226d 656d 6f5f 315f 3022  920, ["memo_1_0"
+000046f0: 2c20 226d 656d 6f5f 315f 3122 5d29 2c20  , "memo_1_1"]), 
+00004700: 2831 2c20 5b22 6d65 6d6f 5f32 5f30 225d  (1, ["memo_2_0"]
+00004710: 295d 2c20 302c 2046 616c 7365 2c20 4661  )], 0, False, Fa
+00004720: 6c73 6529 2c0a 2020 2020 2020 2020 280a  lse),.        (.
+00004730: 2020 2020 2020 2020 2020 2020 5b28 3332              [(32
+00004740: 3035 3837 3130 2c20 5b22 6d65 6d6f 5f31  058710, ["memo_1
+00004750: 5f30 222c 2022 6d65 6d6f 5f31 5f31 225d  _0", "memo_1_1"]
+00004760: 292c 2028 312c 205b 226d 656d 6f5f 325f  ), (1, ["memo_2_
+00004770: 3022 5d29 2c20 2839 3233 2c20 5b22 6d65  0"]), (923, ["me
+00004780: 6d6f 5f33 5f30 222c 2022 6d65 6d6f 5f33  mo_3_0", "memo_3
+00004790: 5f31 225d 295d 2c0a 2020 2020 2020 2020  _1"])],.        
+000047a0: 2020 2020 3332 3830 342c 0a20 2020 2020      32804,.     
+000047b0: 2020 2020 2020 2054 7275 652c 0a20 2020         True,.   
+000047c0: 2020 2020 2020 2020 2046 616c 7365 2c0a           False,.
+000047d0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+000047e0: 2020 2028 5b28 3133 3337 2c20 5b22 4c45     ([(1337, ["LE
+000047f0: 4554 225d 292c 2028 3831 3030 302c 205b  ET"]), (81000, [
+00004800: 2270 696e 6777 6569 225d 295d 2c20 3831  "pingwei"])], 81
+00004810: 372c 2046 616c 7365 2c20 5472 7565 292c  7, False, True),
+00004820: 0a20 2020 2020 2020 2028 5b28 3132 3030  .        ([(1200
+00004830: 3030 3030 3030 3030 2c20 4e6f 6e65 292c  00000000, None),
+00004840: 2028 3132 3030 3030 3030 3030 3030 2c20   (120000000000, 
+00004850: 4e6f 6e65 295d 2c20 3130 3030 3030 3030  None)], 10000000
+00004860: 3030 302c 2054 7275 652c 2046 616c 7365  000, True, False
+00004870: 292c 0a20 2020 205d 2c0a 290a 4070 7974  ),.    ],.).@pyt
+00004880: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+00004890: 0a61 7379 6e63 2064 6566 2074 6573 745f  .async def test_
+000048a0: 6372 6561 7465 5f73 6967 6e65 645f 7472  create_signed_tr
+000048b0: 616e 7361 6374 696f 6e28 0a20 2020 2077  ansaction(.    w
+000048c0: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
+000048d0: 6e6d 656e 743a 2057 616c 6c65 7452 7063  nment: WalletRpc
+000048e0: 5465 7374 456e 7669 726f 6e6d 656e 742c  TestEnvironment,
+000048f0: 0a20 2020 206f 7574 7075 745f 6172 6773  .    output_args
+00004900: 3a20 4c69 7374 5b54 7570 6c65 5b69 6e74  : List[Tuple[int
+00004910: 2c20 4f70 7469 6f6e 616c 5b4c 6973 745b  , Optional[List[
+00004920: 7374 725d 5d5d 5d2c 0a20 2020 2066 6565  str]]]],.    fee
+00004930: 3a20 696e 742c 0a20 2020 2073 656c 6563  : int,.    selec
+00004940: 745f 636f 696e 3a20 626f 6f6c 2c0a 2020  t_coin: bool,.  
+00004950: 2020 6973 5f63 6174 3a20 626f 6f6c 2c0a    is_cat: bool,.
+00004960: 293a 0a20 2020 2065 6e76 3a20 5761 6c6c  ):.    env: Wall
+00004970: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
+00004980: 6d65 6e74 203d 2077 616c 6c65 745f 7270  ment = wallet_rp
+00004990: 635f 656e 7669 726f 6e6d 656e 740a 0a20  c_environment.. 
+000049a0: 2020 2077 616c 6c65 745f 323a 2057 616c     wallet_2: Wal
+000049b0: 6c65 7420 3d20 656e 762e 7761 6c6c 6574  let = env.wallet
+000049c0: 5f32 2e77 616c 6c65 740a 2020 2020 7761  _2.wallet.    wa
+000049d0: 6c6c 6574 5f31 5f6e 6f64 653a 2057 616c  llet_1_node: Wal
+000049e0: 6c65 744e 6f64 6520 3d20 656e 762e 7761  letNode = env.wa
+000049f0: 6c6c 6574 5f31 2e6e 6f64 650a 2020 2020  llet_1.node.    
+00004a00: 7761 6c6c 6574 5f31 5f72 7063 3a20 5761  wallet_1_rpc: Wa
+00004a10: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
+00004a20: 656e 762e 7761 6c6c 6574 5f31 2e72 7063  env.wallet_1.rpc
+00004a30: 5f63 6c69 656e 740a 2020 2020 6675 6c6c  _client.    full
+00004a40: 5f6e 6f64 655f 6170 693a 2046 756c 6c4e  _node_api: FullN
+00004a50: 6f64 6553 696d 756c 6174 6f72 203d 2065  odeSimulator = e
+00004a60: 6e76 2e66 756c 6c5f 6e6f 6465 2e61 7069  nv.full_node.api
+00004a70: 0a20 2020 2066 756c 6c5f 6e6f 6465 5f72  .    full_node_r
+00004a80: 7063 3a20 4675 6c6c 4e6f 6465 5270 6343  pc: FullNodeRpcC
+00004a90: 6c69 656e 7420 3d20 656e 762e 6675 6c6c  lient = env.full
+00004aa0: 5f6e 6f64 652e 7270 635f 636c 6965 6e74  _node.rpc_client
+00004ab0: 0a0a 2020 2020 6765 6e65 7261 7465 645f  ..    generated_
+00004ac0: 6675 6e64 7320 3d20 6177 6169 7420 6765  funds = await ge
+00004ad0: 6e65 7261 7465 5f66 756e 6473 2866 756c  nerate_funds(ful
+00004ae0: 6c5f 6e6f 6465 5f61 7069 2c20 656e 762e  l_node_api, env.
+00004af0: 7761 6c6c 6574 5f31 290a 0a20 2020 2077  wallet_1)..    w
+00004b00: 616c 6c65 745f 6964 203d 2031 0a20 2020  allet_id = 1.   
+00004b10: 2069 6620 6973 5f63 6174 3a0a 2020 2020   if is_cat:.    
+00004b20: 2020 2020 6765 6e65 7261 7465 645f 6675      generated_fu
+00004b30: 6e64 7320 3d20 3130 2a2a 390a 0a20 2020  nds = 10**9..   
+00004b40: 2020 2020 2072 6573 203d 2061 7761 6974       res = await
+00004b50: 2077 616c 6c65 745f 315f 7270 632e 6372   wallet_1_rpc.cr
+00004b60: 6561 7465 5f6e 6577 5f63 6174 5f61 6e64  eate_new_cat_and
+00004b70: 5f77 616c 6c65 7428 7569 6e74 3634 2867  _wallet(uint64(g
+00004b80: 656e 6572 6174 6564 5f66 756e 6473 2929  enerated_funds))
+00004b90: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00004ba0: 7265 735b 2273 7563 6365 7373 225d 0a20  res["success"]. 
+00004bb0: 2020 2020 2020 2077 616c 6c65 745f 6964         wallet_id
+00004bc0: 203d 2072 6573 5b22 7761 6c6c 6574 5f69   = res["wallet_i
+00004bd0: 6422 5d0a 0a20 2020 2020 2020 2061 7761  d"]..        awa
+00004be0: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
+00004bf0: 7274 2835 2c20 6368 6563 6b5f 6d65 6d70  rt(5, check_memp
+00004c00: 6f6f 6c5f 7370 656e 645f 636f 756e 742c  ool_spend_count,
+00004c10: 2054 7275 652c 2066 756c 6c5f 6e6f 6465   True, full_node
+00004c20: 5f61 7069 2c20 3129 0a20 2020 2020 2020  _api, 1).       
+00004c30: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00004c40: 3529 3a0a 2020 2020 2020 2020 2020 2020  5):.            
+00004c50: 6966 2063 6865 636b 5f6d 656d 706f 6f6c  if check_mempool
+00004c60: 5f73 7065 6e64 5f63 6f75 6e74 2866 756c  _spend_count(ful
+00004c70: 6c5f 6e6f 6465 5f61 7069 2c20 3029 3a0a  l_node_api, 0):.
+00004c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004c90: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+00004ca0: 2020 6177 6169 7420 6661 726d 5f74 7261    await farm_tra
+00004cb0: 6e73 6163 7469 6f6e 5f62 6c6f 636b 2866  nsaction_block(f
+00004cc0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
+00004cd0: 6c6c 6574 5f31 5f6e 6f64 6529 0a0a 2020  llet_1_node)..  
+00004ce0: 2020 6f75 7470 7574 7320 3d20 6177 6169    outputs = awai
+00004cf0: 7420 6372 6561 7465 5f74 785f 6f75 7470  t create_tx_outp
+00004d00: 7574 7328 7761 6c6c 6574 5f32 2c20 6f75  uts(wallet_2, ou
+00004d10: 7470 7574 5f61 7267 7329 0a20 2020 2061  tput_args).    a
+00004d20: 6d6f 756e 745f 6f75 7470 7574 7320 3d20  mount_outputs = 
+00004d30: 7375 6d28 6f75 7470 7574 5b22 616d 6f75  sum(output["amou
+00004d40: 6e74 225d 2066 6f72 206f 7574 7075 7420  nt"] for output 
+00004d50: 696e 206f 7574 7075 7473 290a 2020 2020  in outputs).    
+00004d60: 616d 6f75 6e74 5f66 6565 203d 2075 696e  amount_fee = uin
+00004d70: 7436 3428 6665 6529 0a0a 2020 2020 6966  t64(fee)..    if
+00004d80: 2069 735f 6361 743a 0a20 2020 2020 2020   is_cat:.       
+00004d90: 2061 6d6f 756e 745f 746f 7461 6c20 3d20   amount_total = 
+00004da0: 616d 6f75 6e74 5f6f 7574 7075 7473 0a20  amount_outputs. 
+00004db0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00004dc0: 2061 6d6f 756e 745f 746f 7461 6c20 3d20   amount_total = 
+00004dd0: 616d 6f75 6e74 5f6f 7574 7075 7473 202b  amount_outputs +
+00004de0: 2061 6d6f 756e 745f 6665 650a 0a20 2020   amount_fee..   
+00004df0: 2073 656c 6563 7465 645f 636f 696e 203d   selected_coin =
+00004e00: 204e 6f6e 650a 2020 2020 6966 2073 656c   None.    if sel
+00004e10: 6563 745f 636f 696e 3a0a 2020 2020 2020  ect_coin:.      
+00004e20: 2020 7365 6c65 6374 6564 5f63 6f69 6e20    selected_coin 
+00004e30: 3d20 6177 6169 7420 7761 6c6c 6574 5f31  = await wallet_1
+00004e40: 5f72 7063 2e73 656c 6563 745f 636f 696e  _rpc.select_coin
+00004e50: 7328 616d 6f75 6e74 3d61 6d6f 756e 745f  s(amount=amount_
+00004e60: 746f 7461 6c2c 2077 616c 6c65 745f 6964  total, wallet_id
+00004e70: 3d77 616c 6c65 745f 6964 290a 2020 2020  =wallet_id).    
+00004e80: 2020 2020 6173 7365 7274 206c 656e 2873      assert len(s
+00004e90: 656c 6563 7465 645f 636f 696e 2920 3d3d  elected_coin) ==
+00004ea0: 2031 0a0a 2020 2020 7478 203d 2061 7761   1..    tx = awa
+00004eb0: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
+00004ec0: 6372 6561 7465 5f73 6967 6e65 645f 7472  create_signed_tr
+00004ed0: 616e 7361 6374 696f 6e28 0a20 2020 2020  ansaction(.     
+00004ee0: 2020 206f 7574 7075 7473 2c0a 2020 2020     outputs,.    
+00004ef0: 2020 2020 636f 696e 733d 7365 6c65 6374      coins=select
+00004f00: 6564 5f63 6f69 6e2c 0a20 2020 2020 2020  ed_coin,.       
+00004f10: 2066 6565 3d61 6d6f 756e 745f 6665 652c   fee=amount_fee,
+00004f20: 0a20 2020 2020 2020 2077 616c 6c65 745f  .        wallet_
+00004f30: 6964 3d77 616c 6c65 745f 6964 2c0a 2020  id=wallet_id,.  
+00004f40: 2020 2020 2020 2320 7368 6f75 6c64 6e27        # shouldn'
+00004f50: 7420 6163 7475 616c 6c79 2062 6c6f 636b  t actually block
+00004f60: 2069 740a 2020 2020 2020 2020 6578 636c   it.        excl
+00004f70: 7564 6564 5f61 6d6f 756e 7473 3d5b 7569  uded_amounts=[ui
+00004f80: 6e74 3634 2873 656c 6563 7465 645f 636f  nt64(selected_co
+00004f90: 696e 5b30 5d2e 616d 6f75 6e74 295d 2069  in[0].amount)] i
+00004fa0: 6620 7365 6c65 6374 6564 5f63 6f69 6e20  f selected_coin 
+00004fb0: 6973 206e 6f74 204e 6f6e 6520 656c 7365  is not None else
+00004fc0: 205b 5d2c 0a20 2020 2029 0a20 2020 2063   [],.    ).    c
+00004fd0: 6861 6e67 655f 6578 7065 6374 6564 203d  hange_expected =
+00004fe0: 206e 6f74 2073 656c 6563 7465 645f 636f   not selected_co
+00004ff0: 696e 206f 7220 7365 6c65 6374 6564 5f63  in or selected_c
+00005000: 6f69 6e5b 305d 2e61 6d6f 756e 7420 2d20  oin[0].amount - 
+00005010: 616d 6f75 6e74 5f74 6f74 616c 203e 2030  amount_total > 0
+00005020: 0a20 2020 2061 7373 6572 745f 7478 5f61  .    assert_tx_a
+00005030: 6d6f 756e 7473 2874 782c 206f 7574 7075  mounts(tx, outpu
+00005040: 7473 2c20 616d 6f75 6e74 5f66 6565 3d61  ts, amount_fee=a
+00005050: 6d6f 756e 745f 6665 652c 2063 6861 6e67  mount_fee, chang
+00005060: 655f 6578 7065 6374 6564 3d63 6861 6e67  e_expected=chang
+00005070: 655f 6578 7065 6374 6564 2c20 6973 5f63  e_expected, is_c
+00005080: 6174 3d69 735f 6361 7429 0a0a 2020 2020  at=is_cat)..    
+00005090: 2320 4661 726d 2074 6865 2074 7261 6e73  # Farm the trans
+000050a0: 6163 7469 6f6e 2061 6e64 206d 616b 6520  action and make 
+000050b0: 7375 7265 2074 6865 2077 616c 6c65 7420  sure the wallet 
+000050c0: 6261 6c61 6e63 6520 7265 666c 6563 7473  balance reflects
+000050d0: 2069 7420 636f 7272 6563 740a 2020 2020   it correct.    
+000050e0: 7370 656e 645f 6275 6e64 6c65 203d 2074  spend_bundle = t
+000050f0: 782e 7370 656e 645f 6275 6e64 6c65 0a20  x.spend_bundle. 
+00005100: 2020 2061 7373 6572 7420 7370 656e 645f     assert spend_
+00005110: 6275 6e64 6c65 2069 7320 6e6f 7420 4e6f  bundle is not No
+00005120: 6e65 0a20 2020 2070 7573 685f 7265 7320  ne.    push_res 
+00005130: 3d20 6177 6169 7420 7761 6c6c 6574 5f31  = await wallet_1
+00005140: 5f72 7063 2e70 7573 685f 7472 616e 7361  _rpc.push_transa
+00005150: 6374 696f 6e73 285b 7478 5d29 0a20 2020  ctions([tx]).   
+00005160: 2061 7373 6572 7420 7075 7368 5f72 6573   assert push_res
+00005170: 5b22 7375 6363 6573 7322 5d0a 2020 2020  ["success"].    
+00005180: 6177 6169 7420 6661 726d 5f74 7261 6e73  await farm_trans
+00005190: 6163 7469 6f6e 2866 756c 6c5f 6e6f 6465  action(full_node
+000051a0: 5f61 7069 2c20 7761 6c6c 6574 5f31 5f6e  _api, wallet_1_n
+000051b0: 6f64 652c 2073 7065 6e64 5f62 756e 646c  ode, spend_bundl
+000051c0: 6529 0a20 2020 2061 7761 6974 2074 696d  e).    await tim
+000051d0: 655f 6f75 745f 6173 7365 7274 2832 302c  e_out_assert(20,
+000051e0: 2067 6574 5f63 6f6e 6669 726d 6564 5f62   get_confirmed_b
+000051f0: 616c 616e 6365 2c20 6765 6e65 7261 7465  alance, generate
+00005200: 645f 6675 6e64 7320 2d20 616d 6f75 6e74  d_funds - amount
+00005210: 5f74 6f74 616c 2c20 7761 6c6c 6574 5f31  _total, wallet_1
+00005220: 5f72 7063 2c20 7761 6c6c 6574 5f69 6429  _rpc, wallet_id)
+00005230: 0a0a 2020 2020 2320 5661 6c69 6461 7465  ..    # Validate
+00005240: 2074 6865 206d 656d 6f73 0a20 2020 2066   the memos.    f
+00005250: 6f72 206f 7574 7075 7420 696e 206f 7574  or output in out
+00005260: 7075 7473 3a0a 2020 2020 2020 2020 6966  puts:.        if
+00005270: 2022 6d65 6d6f 7322 2069 6e20 6f75 7470   "memos" in outp
+00005280: 7574 733a 0a20 2020 2020 2020 2020 2020  uts:.           
+00005290: 2066 6f75 6e64 3a20 626f 6f6c 203d 2046   found: bool = F
+000052a0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+000052b0: 2066 6f72 2061 6464 6974 696f 6e20 696e   for addition in
+000052c0: 2073 7065 6e64 5f62 756e 646c 652e 6164   spend_bundle.ad
+000052d0: 6469 7469 6f6e 7328 293a 0a20 2020 2020  ditions():.     
+000052e0: 2020 2020 2020 2020 2020 2069 6620 6164             if ad
+000052f0: 6469 7469 6f6e 2e61 6d6f 756e 7420 3d3d  dition.amount ==
+00005300: 206f 7574 7075 745b 2261 6d6f 756e 7422   output["amount"
+00005310: 5d20 616e 6420 6164 6469 7469 6f6e 2e70  ] and addition.p
+00005320: 757a 7a6c 655f 6861 7368 2e68 6578 2829  uzzle_hash.hex()
+00005330: 203d 3d20 6f75 7470 7574 5b22 7075 7a7a   == output["puzz
+00005340: 6c65 5f68 6173 6822 5d3a 0a20 2020 2020  le_hash"]:.     
+00005350: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00005360: 723a 204f 7074 696f 6e61 6c5b 436f 696e  r: Optional[Coin
+00005370: 5265 636f 7264 5d20 3d20 6177 6169 7420  Record] = await 
+00005380: 6675 6c6c 5f6e 6f64 655f 7270 632e 6765  full_node_rpc.ge
+00005390: 745f 636f 696e 5f72 6563 6f72 645f 6279  t_coin_record_by
+000053a0: 5f6e 616d 6528 6164 6469 7469 6f6e 2e6e  _name(addition.n
+000053b0: 616d 6528 2929 0a20 2020 2020 2020 2020  ame()).         
+000053c0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+000053d0: 7420 6372 2069 7320 6e6f 7420 4e6f 6e65  t cr is not None
+000053e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000053f0: 2020 2020 2073 7065 6e64 3a20 4f70 7469       spend: Opti
+00005400: 6f6e 616c 5b43 6f69 6e53 7065 6e64 5d20  onal[CoinSpend] 
+00005410: 3d20 6177 6169 7420 6675 6c6c 5f6e 6f64  = await full_nod
+00005420: 655f 7270 632e 6765 745f 7075 7a7a 6c65  e_rpc.get_puzzle
+00005430: 5f61 6e64 5f73 6f6c 7574 696f 6e28 0a20  _and_solution(. 
+00005440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005450: 2020 2020 2020 2061 6464 6974 696f 6e2e         addition.
+00005460: 7061 7265 6e74 5f63 6f69 6e5f 696e 666f  parent_coin_info
+00005470: 2c20 6372 2e63 6f6e 6669 726d 6564 5f62  , cr.confirmed_b
+00005480: 6c6f 636b 5f69 6e64 6578 0a20 2020 2020  lock_index.     
+00005490: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+000054a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000054b0: 2020 2020 2061 7373 6572 7420 7370 656e       assert spen
+000054c0: 6420 6973 206e 6f74 204e 6f6e 650a 2020  d is not None.  
+000054d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000054e0: 2020 7362 3a20 5370 656e 6442 756e 646c    sb: SpendBundl
+000054f0: 6520 3d20 5370 656e 6442 756e 646c 6528  e = SpendBundle(
+00005500: 5b73 7065 6e64 5d2c 2047 3245 6c65 6d65  [spend], G2Eleme
+00005510: 6e74 2829 290a 2020 2020 2020 2020 2020  nt()).          
+00005520: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00005530: 2063 6f6d 7075 7465 5f6d 656d 6f73 2873   compute_memos(s
+00005540: 6229 203d 3d20 7b61 6464 6974 696f 6e2e  b) == {addition.
+00005550: 6e61 6d65 2829 3a20 5b6d 656d 6f2e 656e  name(): [memo.en
+00005560: 636f 6465 2829 2066 6f72 206d 656d 6f20  code() for memo 
+00005570: 696e 206f 7574 7075 745b 226d 656d 6f73  in output["memos
+00005580: 225d 5d7d 0a20 2020 2020 2020 2020 2020  "]]}.           
+00005590: 2020 2020 2020 2020 2066 6f75 6e64 203d           found =
+000055a0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+000055b0: 2020 6173 7365 7274 2066 6f75 6e64 0a0a    assert found..
+000055c0: 0a40 7079 7465 7374 2e6d 6172 6b2e 6173  .@pytest.mark.as
+000055d0: 796e 6369 6f0a 6173 796e 6320 6465 6620  yncio.async def 
+000055e0: 7465 7374 5f63 7265 6174 655f 7369 676e  test_create_sign
+000055f0: 6564 5f74 7261 6e73 6163 7469 6f6e 5f77  ed_transaction_w
+00005600: 6974 685f 636f 696e 5f61 6e6e 6f75 6e63  ith_coin_announc
+00005610: 656d 656e 7428 7761 6c6c 6574 5f72 7063  ement(wallet_rpc
+00005620: 5f65 6e76 6972 6f6e 6d65 6e74 3a20 5761  _environment: Wa
+00005630: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
+00005640: 6f6e 6d65 6e74 293a 0a20 2020 2065 6e76  onment):.    env
+00005650: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
+00005660: 6e76 6972 6f6e 6d65 6e74 203d 2077 616c  nvironment = wal
+00005670: 6c65 745f 7270 635f 656e 7669 726f 6e6d  let_rpc_environm
+00005680: 656e 740a 0a20 2020 2077 616c 6c65 745f  ent..    wallet_
+00005690: 323a 2057 616c 6c65 7420 3d20 656e 762e  2: Wallet = env.
+000056a0: 7761 6c6c 6574 5f32 2e77 616c 6c65 740a  wallet_2.wallet.
+000056b0: 2020 2020 6675 6c6c 5f6e 6f64 655f 6170      full_node_ap
+000056c0: 693a 2046 756c 6c4e 6f64 6553 696d 756c  i: FullNodeSimul
+000056d0: 6174 6f72 203d 2065 6e76 2e66 756c 6c5f  ator = env.full_
+000056e0: 6e6f 6465 2e61 7069 0a20 2020 2063 6c69  node.api.    cli
+000056f0: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
+00005700: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
+00005710: 745f 312e 7270 635f 636c 6965 6e74 0a20  t_1.rpc_client. 
+00005720: 2020 2063 6c69 656e 745f 6e6f 6465 3a20     client_node: 
+00005730: 4675 6c6c 4e6f 6465 5270 6343 6c69 656e  FullNodeRpcClien
+00005740: 7420 3d20 656e 762e 6675 6c6c 5f6e 6f64  t = env.full_nod
+00005750: 652e 7270 635f 636c 6965 6e74 0a0a 2020  e.rpc_client..  
+00005760: 2020 6177 6169 7420 6765 6e65 7261 7465    await generate
+00005770: 5f66 756e 6473 2866 756c 6c5f 6e6f 6465  _funds(full_node
+00005780: 5f61 7069 2c20 656e 762e 7761 6c6c 6574  _api, env.wallet
+00005790: 5f31 290a 0a20 2020 2073 6967 6e65 645f  _1)..    signed_
+000057a0: 7478 5f61 6d6f 756e 7420 3d20 7569 6e74  tx_amount = uint
+000057b0: 3634 2838 3838 3030 3029 0a20 2020 2074  64(888000).    t
+000057c0: 785f 636f 696e 5f61 6e6e 6f75 6e63 656d  x_coin_announcem
+000057d0: 656e 7473 203d 205b 0a20 2020 2020 2020  ents = [.       
+000057e0: 2041 6e6e 6f75 6e63 656d 656e 7428 0a20   Announcement(. 
+000057f0: 2020 2020 2020 2020 2020 2073 7464 5f68             std_h
+00005800: 6173 6828 6222 636f 696e 5f69 645f 3122  ash(b"coin_id_1"
+00005810: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
+00005820: 7464 5f68 6173 6828 6222 6d65 7373 6167  td_hash(b"messag
+00005830: 6522 292c 0a20 2020 2020 2020 2020 2020  e"),.           
+00005840: 2062 225c 7863 6122 2c0a 2020 2020 2020   b"\xca",.      
+00005850: 2020 292c 0a20 2020 2020 2020 2041 6e6e    ),.        Ann
+00005860: 6f75 6e63 656d 656e 7428 0a20 2020 2020  ouncement(.     
+00005870: 2020 2020 2020 2073 7464 5f68 6173 6828         std_hash(
+00005880: 6222 636f 696e 5f69 645f 3222 292c 0a20  b"coin_id_2"),. 
+00005890: 2020 2020 2020 2020 2020 2062 7974 6573             bytes
+000058a0: 2850 726f 6772 616d 2e74 6f28 2261 2073  (Program.to("a s
+000058b0: 7472 696e 6722 2929 2c0a 2020 2020 2020  tring")),.      
+000058c0: 2020 292c 0a20 2020 205d 0a20 2020 206f    ),.    ].    o
+000058d0: 7574 7075 7473 203d 2061 7761 6974 2063  utputs = await c
+000058e0: 7265 6174 655f 7478 5f6f 7574 7075 7473  reate_tx_outputs
+000058f0: 2877 616c 6c65 745f 322c 205b 2873 6967  (wallet_2, [(sig
+00005900: 6e65 645f 7478 5f61 6d6f 756e 742c 204e  ned_tx_amount, N
+00005910: 6f6e 6529 5d29 0a20 2020 2074 785f 7265  one)]).    tx_re
+00005920: 733a 2054 7261 6e73 6163 7469 6f6e 5265  s: TransactionRe
+00005930: 636f 7264 203d 2061 7761 6974 2063 6c69  cord = await cli
+00005940: 656e 742e 6372 6561 7465 5f73 6967 6e65  ent.create_signe
+00005950: 645f 7472 616e 7361 6374 696f 6e28 0a20  d_transaction(. 
+00005960: 2020 2020 2020 206f 7574 7075 7473 2c20         outputs, 
+00005970: 636f 696e 5f61 6e6e 6f75 6e63 656d 656e  coin_announcemen
+00005980: 7473 3d74 785f 636f 696e 5f61 6e6e 6f75  ts=tx_coin_annou
+00005990: 6e63 656d 656e 7473 0a20 2020 2029 0a20  ncements.    ). 
+000059a0: 2020 2061 7373 6572 745f 7478 5f61 6d6f     assert_tx_amo
+000059b0: 756e 7473 2874 785f 7265 732c 206f 7574  unts(tx_res, out
+000059c0: 7075 7473 2c20 616d 6f75 6e74 5f66 6565  puts, amount_fee
+000059d0: 3d75 696e 7436 3428 3029 2c20 6368 616e  =uint64(0), chan
+000059e0: 6765 5f65 7870 6563 7465 643d 5472 7565  ge_expected=True
+000059f0: 290a 2020 2020 6177 6169 7420 6173 7365  ).    await asse
+00005a00: 7274 5f70 7573 685f 7478 5f65 7272 6f72  rt_push_tx_error
+00005a10: 2863 6c69 656e 745f 6e6f 6465 2c20 7478  (client_node, tx
+00005a20: 5f72 6573 290a 0a0a 4070 7974 6573 742e  _res)...@pytest.
+00005a30: 6d61 726b 2e61 7379 6e63 696f 0a61 7379  mark.asyncio.asy
+00005a40: 6e63 2064 6566 2074 6573 745f 6372 6561  nc def test_crea
+00005a50: 7465 5f73 6967 6e65 645f 7472 616e 7361  te_signed_transa
+00005a60: 6374 696f 6e5f 7769 7468 5f70 757a 7a6c  ction_with_puzzl
+00005a70: 655f 616e 6e6f 756e 6365 6d65 6e74 2877  e_announcement(w
+00005a80: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
+00005a90: 6e6d 656e 743a 2057 616c 6c65 7452 7063  nment: WalletRpc
+00005aa0: 5465 7374 456e 7669 726f 6e6d 656e 7429  TestEnvironment)
+00005ab0: 3a0a 2020 2020 656e 763a 2057 616c 6c65  :.    env: Walle
+00005ac0: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
+00005ad0: 656e 7420 3d20 7761 6c6c 6574 5f72 7063  ent = wallet_rpc
+00005ae0: 5f65 6e76 6972 6f6e 6d65 6e74 0a0a 2020  _environment..  
+00005af0: 2020 7761 6c6c 6574 5f32 3a20 5761 6c6c    wallet_2: Wall
+00005b00: 6574 203d 2065 6e76 2e77 616c 6c65 745f  et = env.wallet_
+00005b10: 322e 7761 6c6c 6574 0a20 2020 2066 756c  2.wallet.    ful
+00005b20: 6c5f 6e6f 6465 5f61 7069 3a20 4675 6c6c  l_node_api: Full
+00005b30: 4e6f 6465 5369 6d75 6c61 746f 7220 3d20  NodeSimulator = 
+00005b40: 656e 762e 6675 6c6c 5f6e 6f64 652e 6170  env.full_node.ap
+00005b50: 690a 2020 2020 636c 6965 6e74 3a20 5761  i.    client: Wa
+00005b60: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
+00005b70: 656e 762e 7761 6c6c 6574 5f31 2e72 7063  env.wallet_1.rpc
+00005b80: 5f63 6c69 656e 740a 2020 2020 636c 6965  _client.    clie
+00005b90: 6e74 5f6e 6f64 653a 2046 756c 6c4e 6f64  nt_node: FullNod
+00005ba0: 6552 7063 436c 6965 6e74 203d 2065 6e76  eRpcClient = env
+00005bb0: 2e66 756c 6c5f 6e6f 6465 2e72 7063 5f63  .full_node.rpc_c
+00005bc0: 6c69 656e 740a 0a20 2020 2061 7761 6974  lient..    await
+00005bd0: 2067 656e 6572 6174 655f 6675 6e64 7328   generate_funds(
+00005be0: 6675 6c6c 5f6e 6f64 655f 6170 692c 2065  full_node_api, e
+00005bf0: 6e76 2e77 616c 6c65 745f 3129 0a0a 2020  nv.wallet_1)..  
+00005c00: 2020 7369 676e 6564 5f74 785f 616d 6f75    signed_tx_amou
+00005c10: 6e74 203d 2075 696e 7436 3428 3838 3830  nt = uint64(8880
+00005c20: 3030 290a 2020 2020 7478 5f70 757a 7a6c  00).    tx_puzzl
+00005c30: 655f 616e 6e6f 756e 6365 6d65 6e74 7320  e_announcements 
+00005c40: 3d20 5b0a 2020 2020 2020 2020 416e 6e6f  = [.        Anno
+00005c50: 756e 6365 6d65 6e74 280a 2020 2020 2020  uncement(.      
+00005c60: 2020 2020 2020 7374 645f 6861 7368 2862        std_hash(b
+00005c70: 2270 757a 7a6c 655f 6861 7368 5f31 2229  "puzzle_hash_1")
+00005c80: 2c0a 2020 2020 2020 2020 2020 2020 6222  ,.            b"
+00005c90: 6d65 7373 6167 6522 2c0a 2020 2020 2020  message",.      
+00005ca0: 2020 2020 2020 6222 5c78 6361 222c 0a20        b"\xca",. 
+00005cb0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+00005cc0: 2020 416e 6e6f 756e 6365 6d65 6e74 280a    Announcement(.
+00005cd0: 2020 2020 2020 2020 2020 2020 7374 645f              std_
+00005ce0: 6861 7368 2862 2270 757a 7a6c 655f 6861  hash(b"puzzle_ha
+00005cf0: 7368 5f32 2229 2c0a 2020 2020 2020 2020  sh_2"),.        
+00005d00: 2020 2020 6279 7465 7328 5072 6f67 7261      bytes(Progra
+00005d10: 6d2e 746f 2822 6120 7374 7269 6e67 2229  m.to("a string")
+00005d20: 292c 0a20 2020 2020 2020 2029 2c0a 2020  ),.        ),.  
+00005d30: 2020 5d0a 2020 2020 6f75 7470 7574 7320    ].    outputs 
+00005d40: 3d20 6177 6169 7420 6372 6561 7465 5f74  = await create_t
+00005d50: 785f 6f75 7470 7574 7328 7761 6c6c 6574  x_outputs(wallet
+00005d60: 5f32 2c20 5b28 7369 676e 6564 5f74 785f  _2, [(signed_tx_
+00005d70: 616d 6f75 6e74 2c20 4e6f 6e65 295d 290a  amount, None)]).
+00005d80: 2020 2020 7478 5f72 6573 203d 2061 7761      tx_res = awa
+00005d90: 6974 2063 6c69 656e 742e 6372 6561 7465  it client.create
+00005da0: 5f73 6967 6e65 645f 7472 616e 7361 6374  _signed_transact
+00005db0: 696f 6e28 6f75 7470 7574 732c 2070 757a  ion(outputs, puz
+00005dc0: 7a6c 655f 616e 6e6f 756e 6365 6d65 6e74  zle_announcement
+00005dd0: 733d 7478 5f70 757a 7a6c 655f 616e 6e6f  s=tx_puzzle_anno
+00005de0: 756e 6365 6d65 6e74 7329 0a20 2020 2061  uncements).    a
+00005df0: 7373 6572 745f 7478 5f61 6d6f 756e 7473  ssert_tx_amounts
+00005e00: 2874 785f 7265 732c 206f 7574 7075 7473  (tx_res, outputs
+00005e10: 2c20 616d 6f75 6e74 5f66 6565 3d75 696e  , amount_fee=uin
+00005e20: 7436 3428 3029 2c20 6368 616e 6765 5f65  t64(0), change_e
+00005e30: 7870 6563 7465 643d 5472 7565 290a 2020  xpected=True).  
+00005e40: 2020 6177 6169 7420 6173 7365 7274 5f70    await assert_p
+00005e50: 7573 685f 7478 5f65 7272 6f72 2863 6c69  ush_tx_error(cli
+00005e60: 656e 745f 6e6f 6465 2c20 7478 5f72 6573  ent_node, tx_res
+00005e70: 290a 0a0a 4070 7974 6573 742e 6d61 726b  )...@pytest.mark
+00005e80: 2e61 7379 6e63 696f 0a61 7379 6e63 2064  .asyncio.async d
+00005e90: 6566 2074 6573 745f 6372 6561 7465 5f73  ef test_create_s
+00005ea0: 6967 6e65 645f 7472 616e 7361 6374 696f  igned_transactio
+00005eb0: 6e5f 7769 7468 5f65 7863 6c75 6465 645f  n_with_excluded_
+00005ec0: 636f 696e 7328 7761 6c6c 6574 5f72 7063  coins(wallet_rpc
+00005ed0: 5f65 6e76 6972 6f6e 6d65 6e74 3a20 5761  _environment: Wa
+00005ee0: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
+00005ef0: 6f6e 6d65 6e74 2920 2d3e 204e 6f6e 653a  onment) -> None:
+00005f00: 0a20 2020 2065 6e76 3a20 5761 6c6c 6574  .    env: Wallet
+00005f10: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+00005f20: 6e74 203d 2077 616c 6c65 745f 7270 635f  nt = wallet_rpc_
+00005f30: 656e 7669 726f 6e6d 656e 740a 2020 2020  environment.    
+00005f40: 7761 6c6c 6574 5f31 3a20 5761 6c6c 6574  wallet_1: Wallet
+00005f50: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
+00005f60: 7761 6c6c 6574 0a20 2020 2077 616c 6c65  wallet.    walle
+00005f70: 745f 315f 7270 633a 2057 616c 6c65 7452  t_1_rpc: WalletR
+00005f80: 7063 436c 6965 6e74 203d 2065 6e76 2e77  pcClient = env.w
+00005f90: 616c 6c65 745f 312e 7270 635f 636c 6965  allet_1.rpc_clie
+00005fa0: 6e74 0a20 2020 2066 756c 6c5f 6e6f 6465  nt.    full_node
+00005fb0: 5f61 7069 3a20 4675 6c6c 4e6f 6465 5369  _api: FullNodeSi
+00005fc0: 6d75 6c61 746f 7220 3d20 656e 762e 6675  mulator = env.fu
+00005fd0: 6c6c 5f6e 6f64 652e 6170 690a 2020 2020  ll_node.api.    
+00005fe0: 6675 6c6c 5f6e 6f64 655f 7270 633a 2046  full_node_rpc: F
+00005ff0: 756c 6c4e 6f64 6552 7063 436c 6965 6e74  ullNodeRpcClient
+00006000: 203d 2065 6e76 2e66 756c 6c5f 6e6f 6465   = env.full_node
+00006010: 2e72 7063 5f63 6c69 656e 740a 2020 2020  .rpc_client.    
+00006020: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
+00006030: 756e 6473 2866 756c 6c5f 6e6f 6465 5f61  unds(full_node_a
+00006040: 7069 2c20 656e 762e 7761 6c6c 6574 5f31  pi, env.wallet_1
+00006050: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+00006060: 2069 745f 646f 6573 5f6e 6f74 5f69 6e63   it_does_not_inc
+00006070: 6c75 6465 5f74 6865 5f65 7863 6c75 6465  lude_the_exclude
+00006080: 645f 636f 696e 7328 2920 2d3e 204e 6f6e  d_coins() -> Non
+00006090: 653a 0a20 2020 2020 2020 2073 656c 6563  e:.        selec
+000060a0: 7465 645f 636f 696e 7320 3d20 6177 6169  ted_coins = awai
+000060b0: 7420 7761 6c6c 6574 5f31 5f72 7063 2e73  t wallet_1_rpc.s
+000060c0: 656c 6563 745f 636f 696e 7328 616d 6f75  elect_coins(amou
+000060d0: 6e74 3d32 3530 3030 3030 3030 3030 302c  nt=250000000000,
+000060e0: 2077 616c 6c65 745f 6964 3d31 290a 2020   wallet_id=1).  
+000060f0: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
+00006100: 2873 656c 6563 7465 645f 636f 696e 7329  (selected_coins)
+00006110: 203d 3d20 310a 2020 2020 2020 2020 6f75   == 1.        ou
+00006120: 7470 7574 7320 3d20 6177 6169 7420 6372  tputs = await cr
+00006130: 6561 7465 5f74 785f 6f75 7470 7574 7328  eate_tx_outputs(
+00006140: 7761 6c6c 6574 5f31 2c20 5b28 7569 6e74  wallet_1, [(uint
+00006150: 3634 2832 3530 3030 3030 3030 3030 3029  64(250000000000)
+00006160: 2c20 4e6f 6e65 295d 290a 0a20 2020 2020  , None)])..     
+00006170: 2020 2074 7820 3d20 6177 6169 7420 7761     tx = await wa
+00006180: 6c6c 6574 5f31 5f72 7063 2e63 7265 6174  llet_1_rpc.creat
+00006190: 655f 7369 676e 6564 5f74 7261 6e73 6163  e_signed_transac
+000061a0: 7469 6f6e 286f 7574 7075 7473 2c20 6578  tion(outputs, ex
+000061b0: 636c 7564 6564 5f63 6f69 6e73 3d73 656c  cluded_coins=sel
+000061c0: 6563 7465 645f 636f 696e 7329 0a0a 2020  ected_coins)..  
+000061d0: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
+000061e0: 2874 782e 7265 6d6f 7661 6c73 2920 3d3d  (tx.removals) ==
+000061f0: 2031 0a20 2020 2020 2020 2061 7373 6572   1.        asser
+00006200: 7420 7478 2e72 656d 6f76 616c 735b 305d  t tx.removals[0]
+00006210: 2021 3d20 7365 6c65 6374 6564 5f63 6f69   != selected_coi
+00006220: 6e73 5b30 5d0a 2020 2020 2020 2020 6173  ns[0].        as
+00006230: 7365 7274 2074 782e 7265 6d6f 7661 6c73  sert tx.removals
+00006240: 5b30 5d2e 616d 6f75 6e74 203d 3d20 7569  [0].amount == ui
+00006250: 6e74 3634 2831 3735 3030 3030 3030 3030  nt64(17500000000
+00006260: 3030 290a 2020 2020 2020 2020 6177 6169  00).        awai
+00006270: 7420 6173 7365 7274 5f70 7573 685f 7478  t assert_push_tx
+00006280: 5f65 7272 6f72 2866 756c 6c5f 6e6f 6465  _error(full_node
+00006290: 5f72 7063 2c20 7478 290a 0a20 2020 2061  _rpc, tx)..    a
+000062a0: 7379 6e63 2064 6566 2069 745f 7468 726f  sync def it_thro
+000062b0: 7773 5f61 6e5f 6572 726f 725f 7768 656e  ws_an_error_when
+000062c0: 5f61 6c6c 5f73 7065 6e64 6162 6c65 5f63  _all_spendable_c
+000062d0: 6f69 6e73 5f61 7265 5f65 7863 6c75 6465  oins_are_exclude
+000062e0: 6428 2920 2d3e 204e 6f6e 653a 0a20 2020  d() -> None:.   
+000062f0: 2020 2020 2073 656c 6563 7465 645f 636f       selected_co
+00006300: 696e 7320 3d20 6177 6169 7420 7761 6c6c  ins = await wall
+00006310: 6574 5f31 5f72 7063 2e73 656c 6563 745f  et_1_rpc.select_
+00006320: 636f 696e 7328 616d 6f75 6e74 3d31 3735  coins(amount=175
+00006330: 3030 3030 3030 3030 3030 2c20 7761 6c6c  0000000000, wall
+00006340: 6574 5f69 643d 3129 0a20 2020 2020 2020  et_id=1).       
+00006350: 2061 7373 6572 7420 6c65 6e28 7365 6c65   assert len(sele
+00006360: 6374 6564 5f63 6f69 6e73 2920 3d3d 2031  cted_coins) == 1
+00006370: 0a20 2020 2020 2020 206f 7574 7075 7473  .        outputs
+00006380: 203d 2061 7761 6974 2063 7265 6174 655f   = await create_
+00006390: 7478 5f6f 7574 7075 7473 2877 616c 6c65  tx_outputs(walle
+000063a0: 745f 312c 205b 2875 696e 7436 3428 3137  t_1, [(uint64(17
+000063b0: 3530 3030 3030 3030 3030 3029 2c20 4e6f  50000000000), No
+000063c0: 6e65 295d 290a 0a20 2020 2020 2020 2077  ne)])..        w
+000063d0: 6974 6820 7079 7465 7374 2e72 6169 7365  ith pytest.raise
+000063e0: 7328 5661 6c75 6545 7272 6f72 293a 0a20  s(ValueError):. 
+000063f0: 2020 2020 2020 2020 2020 2061 7761 6974             await
+00006400: 2077 616c 6c65 745f 315f 7270 632e 6372   wallet_1_rpc.cr
+00006410: 6561 7465 5f73 6967 6e65 645f 7472 616e  eate_signed_tran
+00006420: 7361 6374 696f 6e28 6f75 7470 7574 732c  saction(outputs,
+00006430: 2065 7863 6c75 6465 645f 636f 696e 733d   excluded_coins=
+00006440: 7365 6c65 6374 6564 5f63 6f69 6e73 290a  selected_coins).
+00006450: 0a20 2020 2061 7761 6974 2069 745f 646f  .    await it_do
+00006460: 6573 5f6e 6f74 5f69 6e63 6c75 6465 5f74  es_not_include_t
+00006470: 6865 5f65 7863 6c75 6465 645f 636f 696e  he_excluded_coin
+00006480: 7328 290a 2020 2020 6177 6169 7420 6974  s().    await it
+00006490: 5f74 6872 6f77 735f 616e 5f65 7272 6f72  _throws_an_error
+000064a0: 5f77 6865 6e5f 616c 6c5f 7370 656e 6461  _when_all_spenda
+000064b0: 626c 655f 636f 696e 735f 6172 655f 6578  ble_coins_are_ex
+000064c0: 636c 7564 6564 2829 0a0a 0a40 7079 7465  cluded()...@pyte
+000064d0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+000064e0: 6173 796e 6320 6465 6620 7465 7374 5f73  async def test_s
+000064f0: 7065 6e64 5f63 6c61 7762 6163 6b5f 636f  pend_clawback_co
+00006500: 696e 7328 7761 6c6c 6574 5f72 7063 5f65  ins(wallet_rpc_e
+00006510: 6e76 6972 6f6e 6d65 6e74 3a20 5761 6c6c  nvironment: Wall
+00006520: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
+00006530: 6d65 6e74 293a 0a20 2020 2065 6e76 3a20  ment):.    env: 
+00006540: 5761 6c6c 6574 5270 6354 6573 7445 6e76  WalletRpcTestEnv
+00006550: 6972 6f6e 6d65 6e74 203d 2077 616c 6c65  ironment = walle
+00006560: 745f 7270 635f 656e 7669 726f 6e6d 656e  t_rpc_environmen
+00006570: 740a 0a20 2020 2077 616c 6c65 745f 315f  t..    wallet_1_
+00006580: 6e6f 6465 3a20 5761 6c6c 6574 4e6f 6465  node: WalletNode
+00006590: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
+000065a0: 6e6f 6465 0a20 2020 2077 616c 6c65 745f  node.    wallet_
+000065b0: 325f 6e6f 6465 3a20 5761 6c6c 6574 4e6f  2_node: WalletNo
+000065c0: 6465 203d 2065 6e76 2e77 616c 6c65 745f  de = env.wallet_
+000065d0: 322e 6e6f 6465 0a20 2020 2077 616c 6c65  2.node.    walle
+000065e0: 745f 315f 7270 633a 2057 616c 6c65 7452  t_1_rpc: WalletR
+000065f0: 7063 436c 6965 6e74 203d 2065 6e76 2e77  pcClient = env.w
+00006600: 616c 6c65 745f 312e 7270 635f 636c 6965  allet_1.rpc_clie
+00006610: 6e74 0a20 2020 2077 616c 6c65 745f 325f  nt.    wallet_2_
+00006620: 7270 633a 2057 616c 6c65 7452 7063 436c  rpc: WalletRpcCl
+00006630: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
+00006640: 745f 322e 7270 635f 636c 6965 6e74 0a20  t_2.rpc_client. 
+00006650: 2020 2077 616c 6c65 745f 3120 3d20 7761     wallet_1 = wa
+00006660: 6c6c 6574 5f31 5f6e 6f64 652e 7761 6c6c  llet_1_node.wall
+00006670: 6574 5f73 7461 7465 5f6d 616e 6167 6572  et_state_manager
+00006680: 2e6d 6169 6e5f 7761 6c6c 6574 0a20 2020  .main_wallet.   
+00006690: 2077 616c 6c65 745f 3220 3d20 7761 6c6c   wallet_2 = wall
+000066a0: 6574 5f32 5f6e 6f64 652e 7761 6c6c 6574  et_2_node.wallet
+000066b0: 5f73 7461 7465 5f6d 616e 6167 6572 2e6d  _state_manager.m
+000066c0: 6169 6e5f 7761 6c6c 6574 0a20 2020 2066  ain_wallet.    f
+000066d0: 756c 6c5f 6e6f 6465 5f61 7069 3a20 4675  ull_node_api: Fu
+000066e0: 6c6c 4e6f 6465 5369 6d75 6c61 746f 7220  llNodeSimulator 
+000066f0: 3d20 656e 762e 6675 6c6c 5f6e 6f64 652e  = env.full_node.
+00006700: 6170 690a 2020 2020 7761 6c6c 6574 5f32  api.    wallet_2
+00006710: 5f61 7069 203d 2057 616c 6c65 7452 7063  _api = WalletRpc
+00006720: 4170 6928 7761 6c6c 6574 5f32 5f6e 6f64  Api(wallet_2_nod
+00006730: 6529 0a0a 2020 2020 6765 6e65 7261 7465  e)..    generate
+00006740: 645f 6675 6e64 7320 3d20 6177 6169 7420  d_funds = await 
+00006750: 6765 6e65 7261 7465 5f66 756e 6473 2866  generate_funds(f
+00006760: 756c 6c5f 6e6f 6465 5f61 7069 2c20 656e  ull_node_api, en
+00006770: 762e 7761 6c6c 6574 5f31 2c20 3129 0a20  v.wallet_1, 1). 
+00006780: 2020 2061 7761 6974 2067 656e 6572 6174     await generat
+00006790: 655f 6675 6e64 7328 6675 6c6c 5f6e 6f64  e_funds(full_nod
+000067a0: 655f 6170 692c 2065 6e76 2e77 616c 6c65  e_api, env.walle
+000067b0: 745f 322c 2031 290a 2020 2020 7761 6c6c  t_2, 1).    wall
+000067c0: 6574 5f31 5f70 757a 6861 7368 203d 2061  et_1_puzhash = a
+000067d0: 7761 6974 2077 616c 6c65 745f 312e 6765  wait wallet_1.ge
+000067e0: 745f 6e65 775f 7075 7a7a 6c65 6861 7368  t_new_puzzlehash
+000067f0: 2829 0a20 2020 2077 616c 6c65 745f 325f  ().    wallet_2_
+00006800: 7075 7a68 6173 6820 3d20 6177 6169 7420  puzhash = await 
+00006810: 7761 6c6c 6574 5f32 2e67 6574 5f6e 6577  wallet_2.get_new
+00006820: 5f70 757a 7a6c 6568 6173 6828 290a 2020  _puzzlehash().  
+00006830: 2020 7478 203d 2061 7761 6974 2077 616c    tx = await wal
+00006840: 6c65 745f 315f 7270 632e 7365 6e64 5f74  let_1_rpc.send_t
+00006850: 7261 6e73 6163 7469 6f6e 280a 2020 2020  ransaction(.    
+00006860: 2020 2020 7761 6c6c 6574 5f69 643d 312c      wallet_id=1,
+00006870: 0a20 2020 2020 2020 2061 6d6f 756e 743d  .        amount=
+00006880: 7569 6e74 3634 2835 3030 292c 0a20 2020  uint64(500),.   
+00006890: 2020 2020 2061 6464 7265 7373 3d65 6e63       address=enc
+000068a0: 6f64 655f 7075 7a7a 6c65 5f68 6173 6828  ode_puzzle_hash(
+000068b0: 7761 6c6c 6574 5f32 5f70 757a 6861 7368  wallet_2_puzhash
+000068c0: 2c20 2274 7863 6822 292c 0a20 2020 2020  , "txch"),.     
+000068d0: 2020 2066 6565 3d75 696e 7436 3428 3029     fee=uint64(0)
+000068e0: 2c0a 2020 2020 2020 2020 7075 7a7a 6c65  ,.        puzzle
+000068f0: 5f64 6563 6f72 6174 6f72 5f6f 7665 7272  _decorator_overr
+00006900: 6964 653d 5b7b 2264 6563 6f72 6174 6f72  ide=[{"decorator
+00006910: 223a 2022 434c 4157 4241 434b 222c 2022  ": "CLAWBACK", "
+00006920: 636c 6177 6261 636b 5f74 696d 656c 6f63  clawback_timeloc
+00006930: 6b22 3a20 357d 5d2c 0a20 2020 2029 0a20  k": 5}],.    ). 
+00006940: 2020 2063 6c61 7762 6163 6b5f 636f 696e     clawback_coin
+00006950: 5f69 645f 3120 3d20 7478 2e61 6464 6974  _id_1 = tx.addit
+00006960: 696f 6e73 5b30 5d2e 6e61 6d65 2829 0a20  ions[0].name(). 
+00006970: 2020 2061 7373 6572 7420 7478 2e73 7065     assert tx.spe
+00006980: 6e64 5f62 756e 646c 6520 6973 206e 6f74  nd_bundle is not
+00006990: 204e 6f6e 650a 2020 2020 6177 6169 7420   None.    await 
+000069a0: 6661 726d 5f74 7261 6e73 6163 7469 6f6e  farm_transaction
+000069b0: 2866 756c 6c5f 6e6f 6465 5f61 7069 2c20  (full_node_api, 
+000069c0: 7761 6c6c 6574 5f31 5f6e 6f64 652c 2074  wallet_1_node, t
+000069d0: 782e 7370 656e 645f 6275 6e64 6c65 290a  x.spend_bundle).
+000069e0: 2020 2020 7478 203d 2061 7761 6974 2077      tx = await w
+000069f0: 616c 6c65 745f 325f 7270 632e 7365 6e64  allet_2_rpc.send
+00006a00: 5f74 7261 6e73 6163 7469 6f6e 280a 2020  _transaction(.  
+00006a10: 2020 2020 2020 7761 6c6c 6574 5f69 643d        wallet_id=
+00006a20: 312c 0a20 2020 2020 2020 2061 6d6f 756e  1,.        amoun
+00006a30: 743d 7569 6e74 3634 2835 3030 292c 0a20  t=uint64(500),. 
+00006a40: 2020 2020 2020 2061 6464 7265 7373 3d65         address=e
+00006a50: 6e63 6f64 655f 7075 7a7a 6c65 5f68 6173  ncode_puzzle_has
+00006a60: 6828 7761 6c6c 6574 5f31 5f70 757a 6861  h(wallet_1_puzha
+00006a70: 7368 2c20 2274 7863 6822 292c 0a20 2020  sh, "txch"),.   
+00006a80: 2020 2020 2066 6565 3d75 696e 7436 3428       fee=uint64(
+00006a90: 3029 2c0a 2020 2020 2020 2020 7075 7a7a  0),.        puzz
+00006aa0: 6c65 5f64 6563 6f72 6174 6f72 5f6f 7665  le_decorator_ove
+00006ab0: 7272 6964 653d 5b7b 2264 6563 6f72 6174  rride=[{"decorat
+00006ac0: 6f72 223a 2022 434c 4157 4241 434b 222c  or": "CLAWBACK",
+00006ad0: 2022 636c 6177 6261 636b 5f74 696d 656c   "clawback_timel
+00006ae0: 6f63 6b22 3a20 357d 5d2c 0a20 2020 2029  ock": 5}],.    )
+00006af0: 0a20 2020 2061 7373 6572 7420 7478 2e73  .    assert tx.s
+00006b00: 7065 6e64 5f62 756e 646c 6520 6973 206e  pend_bundle is n
+00006b10: 6f74 204e 6f6e 650a 2020 2020 636c 6177  ot None.    claw
+00006b20: 6261 636b 5f63 6f69 6e5f 6964 5f32 203d  back_coin_id_2 =
+00006b30: 2074 782e 6164 6469 7469 6f6e 735b 305d   tx.additions[0]
+00006b40: 2e6e 616d 6528 290a 2020 2020 6177 6169  .name().    awai
+00006b50: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
+00006b60: 6f6e 2866 756c 6c5f 6e6f 6465 5f61 7069  on(full_node_api
+00006b70: 2c20 7761 6c6c 6574 5f32 5f6e 6f64 652c  , wallet_2_node,
+00006b80: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
+00006b90: 290a 2020 2020 6177 6169 7420 7469 6d65  ).    await time
+00006ba0: 5f6f 7574 5f61 7373 6572 7428 3230 2c20  _out_assert(20, 
+00006bb0: 6765 745f 636f 6e66 6972 6d65 645f 6261  get_confirmed_ba
+00006bc0: 6c61 6e63 652c 2067 656e 6572 6174 6564  lance, generated
+00006bd0: 5f66 756e 6473 202d 2035 3030 2c20 7761  _funds - 500, wa
+00006be0: 6c6c 6574 5f31 5f72 7063 2c20 3129 0a20  llet_1_rpc, 1). 
+00006bf0: 2020 2061 7761 6974 2074 696d 655f 6f75     await time_ou
+00006c00: 745f 6173 7365 7274 2832 302c 2067 6574  t_assert(20, get
+00006c10: 5f63 6f6e 6669 726d 6564 5f62 616c 616e  _confirmed_balan
+00006c20: 6365 2c20 6765 6e65 7261 7465 645f 6675  ce, generated_fu
+00006c30: 6e64 7320 2d20 3530 302c 2077 616c 6c65  nds - 500, walle
+00006c40: 745f 325f 7270 632c 2031 290a 2020 2020  t_2_rpc, 1).    
+00006c50: 6177 6169 7420 6173 796e 6369 6f2e 736c  await asyncio.sl
+00006c60: 6565 7028 3130 290a 2020 2020 2320 5465  eep(10).    # Te
+00006c70: 7374 206d 6973 7369 6e67 2063 6f69 6e5f  st missing coin_
+00006c80: 6964 730a 2020 2020 6861 735f 6578 6365  ids.    has_exce
+00006c90: 7074 696f 6e20 3d20 4661 6c73 650a 2020  ption = False.  
+00006ca0: 2020 7472 793a 0a20 2020 2020 2020 2061    try:.        a
+00006cb0: 7761 6974 2077 616c 6c65 745f 325f 6170  wait wallet_2_ap
+00006cc0: 692e 7370 656e 645f 636c 6177 6261 636b  i.spend_clawback
+00006cd0: 5f63 6f69 6e73 287b 7d29 0a20 2020 2065  _coins({}).    e
+00006ce0: 7863 6570 7420 5661 6c75 6545 7272 6f72  xcept ValueError
+00006cf0: 3a0a 2020 2020 2020 2020 6861 735f 6578  :.        has_ex
+00006d00: 6365 7074 696f 6e20 3d20 5472 7565 0a20  ception = True. 
+00006d10: 2020 2061 7373 6572 7420 6861 735f 6578     assert has_ex
+00006d20: 6365 7074 696f 6e0a 2020 2020 2320 5465  ception.    # Te
+00006d30: 7374 2063 6f69 6e20 4944 2069 7320 6e6f  st coin ID is no
+00006d40: 7420 6120 436c 6177 6261 636b 2063 6f69  t a Clawback coi
+00006d50: 6e0a 2020 2020 696e 7661 6c69 645f 636f  n.    invalid_co
+00006d60: 696e 5f69 6420 3d20 7478 2e72 656d 6f76  in_id = tx.remov
+00006d70: 616c 735b 305d 2e6e 616d 6528 290a 2020  als[0].name().  
+00006d80: 2020 7265 7370 203d 2061 7761 6974 2077    resp = await w
+00006d90: 616c 6c65 745f 325f 7270 632e 7370 656e  allet_2_rpc.spen
+00006da0: 645f 636c 6177 6261 636b 5f63 6f69 6e73  d_clawback_coins
+00006db0: 285b 696e 7661 6c69 645f 636f 696e 5f69  ([invalid_coin_i
+00006dc0: 645d 2c20 3530 3029 0a20 2020 2061 7373  d], 500).    ass
+00006dd0: 6572 7420 7265 7370 5b22 7375 6363 6573  ert resp["succes
+00006de0: 7322 5d0a 2020 2020 6173 7365 7274 2072  s"].    assert r
+00006df0: 6573 705b 2274 7261 6e73 6163 7469 6f6e  esp["transaction
+00006e00: 5f69 6473 225d 203d 3d20 5b5d 0a20 2020  _ids"] == [].   
+00006e10: 2023 2054 6573 7420 756e 7375 7070 6f72   # Test unsuppor
+00006e20: 7465 6420 7761 6c6c 6574 0a20 2020 2063  ted wallet.    c
+00006e30: 6f69 6e5f 7265 636f 7264 203d 2061 7761  oin_record = awa
+00006e40: 6974 2077 616c 6c65 745f 315f 6e6f 6465  it wallet_1_node
+00006e50: 2e77 616c 6c65 745f 7374 6174 655f 6d61  .wallet_state_ma
+00006e60: 6e61 6765 722e 636f 696e 5f73 746f 7265  nager.coin_store
+00006e70: 2e67 6574 5f63 6f69 6e5f 7265 636f 7264  .get_coin_record
+00006e80: 2863 6c61 7762 6163 6b5f 636f 696e 5f69  (clawback_coin_i
+00006e90: 645f 3129 0a20 2020 2061 7373 6572 7420  d_1).    assert 
+00006ea0: 636f 696e 5f72 6563 6f72 6420 6973 206e  coin_record is n
+00006eb0: 6f74 204e 6f6e 650a 2020 2020 6177 6169  ot None.    awai
+00006ec0: 7420 7761 6c6c 6574 5f31 5f6e 6f64 652e  t wallet_1_node.
+00006ed0: 7761 6c6c 6574 5f73 7461 7465 5f6d 616e  wallet_state_man
+00006ee0: 6167 6572 2e63 6f69 6e5f 7374 6f72 652e  ager.coin_store.
+00006ef0: 6164 645f 636f 696e 5f72 6563 6f72 6428  add_coin_record(
+00006f00: 0a20 2020 2020 2020 2064 6174 6163 6c61  .        datacla
+00006f10: 7373 6573 2e72 6570 6c61 6365 2863 6f69  sses.replace(coi
+00006f20: 6e5f 7265 636f 7264 2c20 7761 6c6c 6574  n_record, wallet
+00006f30: 5f74 7970 653d 5761 6c6c 6574 5479 7065  _type=WalletType
+00006f40: 2e43 4154 290a 2020 2020 290a 2020 2020  .CAT).    ).    
+00006f50: 7265 7370 203d 2061 7761 6974 2077 616c  resp = await wal
+00006f60: 6c65 745f 315f 7270 632e 7370 656e 645f  let_1_rpc.spend_
+00006f70: 636c 6177 6261 636b 5f63 6f69 6e73 285b  clawback_coins([
+00006f80: 636c 6177 6261 636b 5f63 6f69 6e5f 6964  clawback_coin_id
+00006f90: 5f31 5d2c 2031 3030 290a 2020 2020 6173  _1], 100).    as
+00006fa0: 7365 7274 2072 6573 705b 2273 7563 6365  sert resp["succe
+00006fb0: 7373 225d 0a20 2020 2061 7373 6572 7420  ss"].    assert 
+00006fc0: 6c65 6e28 7265 7370 5b22 7472 616e 7361  len(resp["transa
+00006fd0: 6374 696f 6e5f 6964 7322 5d29 203d 3d20  ction_ids"]) == 
+00006fe0: 300a 2020 2020 2320 5465 7374 206d 6973  0.    # Test mis
+00006ff0: 7369 6e67 206d 6574 6164 6174 610a 2020  sing metadata.  
+00007000: 2020 6177 6169 7420 7761 6c6c 6574 5f31    await wallet_1
+00007010: 5f6e 6f64 652e 7761 6c6c 6574 5f73 7461  _node.wallet_sta
+00007020: 7465 5f6d 616e 6167 6572 2e63 6f69 6e5f  te_manager.coin_
+00007030: 7374 6f72 652e 6164 645f 636f 696e 5f72  store.add_coin_r
+00007040: 6563 6f72 6428 6461 7461 636c 6173 7365  ecord(dataclasse
+00007050: 732e 7265 706c 6163 6528 636f 696e 5f72  s.replace(coin_r
+00007060: 6563 6f72 642c 206d 6574 6164 6174 613d  ecord, metadata=
+00007070: 4e6f 6e65 2929 0a20 2020 2072 6573 7020  None)).    resp 
+00007080: 3d20 6177 6169 7420 7761 6c6c 6574 5f31  = await wallet_1
+00007090: 5f72 7063 2e73 7065 6e64 5f63 6c61 7762  _rpc.spend_clawb
+000070a0: 6163 6b5f 636f 696e 7328 5b63 6c61 7762  ack_coins([clawb
+000070b0: 6163 6b5f 636f 696e 5f69 645f 315d 2c20  ack_coin_id_1], 
+000070c0: 3130 3029 0a20 2020 2061 7373 6572 7420  100).    assert 
+000070d0: 7265 7370 5b22 7375 6363 6573 7322 5d0a  resp["success"].
+000070e0: 2020 2020 6173 7365 7274 206c 656e 2872      assert len(r
+000070f0: 6573 705b 2274 7261 6e73 6163 7469 6f6e  esp["transaction
+00007100: 5f69 6473 225d 2920 3d3d 2030 0a20 2020  _ids"]) == 0.   
+00007110: 2023 2054 6573 7420 6d69 7373 696e 6720   # Test missing 
+00007120: 696e 636f 6d69 6e67 2074 780a 2020 2020  incoming tx.    
+00007130: 636f 696e 5f72 6563 6f72 6420 3d20 6177  coin_record = aw
+00007140: 6169 7420 7761 6c6c 6574 5f31 5f6e 6f64  ait wallet_1_nod
+00007150: 652e 7761 6c6c 6574 5f73 7461 7465 5f6d  e.wallet_state_m
+00007160: 616e 6167 6572 2e63 6f69 6e5f 7374 6f72  anager.coin_stor
+00007170: 652e 6765 745f 636f 696e 5f72 6563 6f72  e.get_coin_recor
+00007180: 6428 636c 6177 6261 636b 5f63 6f69 6e5f  d(clawback_coin_
+00007190: 6964 5f32 290a 2020 2020 6173 7365 7274  id_2).    assert
+000071a0: 2063 6f69 6e5f 7265 636f 7264 2069 7320   coin_record is 
+000071b0: 6e6f 7420 4e6f 6e65 0a20 2020 2066 616b  not None.    fak
+000071c0: 655f 636f 696e 203d 2043 6f69 6e28 636f  e_coin = Coin(co
+000071d0: 696e 5f72 6563 6f72 642e 636f 696e 2e70  in_record.coin.p
+000071e0: 6172 656e 745f 636f 696e 5f69 6e66 6f2c  arent_coin_info,
+000071f0: 2077 616c 6c65 745f 325f 7075 7a68 6173   wallet_2_puzhas
+00007200: 682c 2063 6f69 6e5f 7265 636f 7264 2e63  h, coin_record.c
+00007210: 6f69 6e2e 616d 6f75 6e74 290a 2020 2020  oin.amount).    
+00007220: 6177 6169 7420 7761 6c6c 6574 5f31 5f6e  await wallet_1_n
+00007230: 6f64 652e 7761 6c6c 6574 5f73 7461 7465  ode.wallet_state
+00007240: 5f6d 616e 6167 6572 2e63 6f69 6e5f 7374  _manager.coin_st
+00007250: 6f72 652e 6164 645f 636f 696e 5f72 6563  ore.add_coin_rec
+00007260: 6f72 6428 0a20 2020 2020 2020 2064 6174  ord(.        dat
+00007270: 6163 6c61 7373 6573 2e72 6570 6c61 6365  aclasses.replace
+00007280: 2863 6f69 6e5f 7265 636f 7264 2c20 636f  (coin_record, co
+00007290: 696e 3d66 616b 655f 636f 696e 290a 2020  in=fake_coin).  
+000072a0: 2020 290a 2020 2020 7265 7370 203d 2061    ).    resp = a
+000072b0: 7761 6974 2077 616c 6c65 745f 315f 7270  wait wallet_1_rp
+000072c0: 632e 7370 656e 645f 636c 6177 6261 636b  c.spend_clawback
+000072d0: 5f63 6f69 6e73 285b 6661 6b65 5f63 6f69  _coins([fake_coi
+000072e0: 6e2e 6e61 6d65 2829 5d2c 2031 3030 290a  n.name()], 100).
+000072f0: 2020 2020 6173 7365 7274 2072 6573 705b      assert resp[
+00007300: 2274 7261 6e73 6163 7469 6f6e 5f69 6473  "transaction_ids
+00007310: 225d 203d 3d20 5b5d 0a20 2020 2023 2054  "] == [].    # T
+00007320: 6573 7420 636f 696e 2070 757a 7a6c 6520  est coin puzzle 
+00007330: 6861 7368 2064 6f65 736e 2774 206d 6174  hash doesn't mat
+00007340: 6368 2074 6865 2070 757a 7a6c 650a 2020  ch the puzzle.  
+00007350: 2020 7478 203d 2028 6177 6169 7420 7761    tx = (await wa
+00007360: 6c6c 6574 5f31 2e77 616c 6c65 745f 7374  llet_1.wallet_st
+00007370: 6174 655f 6d61 6e61 6765 722e 7478 5f73  ate_manager.tx_s
+00007380: 746f 7265 2e67 6574 5f66 6172 6d69 6e67  tore.get_farming
+00007390: 5f72 6577 6172 6473 2829 295b 305d 0a20  _rewards())[0]. 
+000073a0: 2020 2061 7761 6974 2077 616c 6c65 745f     await wallet_
+000073b0: 312e 7761 6c6c 6574 5f73 7461 7465 5f6d  1.wallet_state_m
+000073c0: 616e 6167 6572 2e74 785f 7374 6f72 652e  anager.tx_store.
+000073d0: 6164 645f 7472 616e 7361 6374 696f 6e5f  add_transaction_
+000073e0: 7265 636f 7264 2864 6174 6163 6c61 7373  record(dataclass
+000073f0: 6573 2e72 6570 6c61 6365 2874 782c 206e  es.replace(tx, n
+00007400: 616d 653d 6661 6b65 5f63 6f69 6e2e 6e61  ame=fake_coin.na
+00007410: 6d65 2829 2929 0a20 2020 2061 7761 6974  me())).    await
+00007420: 2077 616c 6c65 745f 315f 6e6f 6465 2e77   wallet_1_node.w
+00007430: 616c 6c65 745f 7374 6174 655f 6d61 6e61  allet_state_mana
+00007440: 6765 722e 636f 696e 5f73 746f 7265 2e61  ger.coin_store.a
+00007450: 6464 5f63 6f69 6e5f 7265 636f 7264 280a  dd_coin_record(.
+00007460: 2020 2020 2020 2020 6461 7461 636c 6173          dataclas
+00007470: 7365 732e 7265 706c 6163 6528 636f 696e  ses.replace(coin
+00007480: 5f72 6563 6f72 642c 2063 6f69 6e3d 6661  _record, coin=fa
+00007490: 6b65 5f63 6f69 6e29 0a20 2020 2029 0a20  ke_coin).    ). 
+000074a0: 2020 2072 6573 7020 3d20 6177 6169 7420     resp = await 
+000074b0: 7761 6c6c 6574 5f31 5f72 7063 2e73 7065  wallet_1_rpc.spe
+000074c0: 6e64 5f63 6c61 7762 6163 6b5f 636f 696e  nd_clawback_coin
+000074d0: 7328 5b66 616b 655f 636f 696e 2e6e 616d  s([fake_coin.nam
+000074e0: 6528 295d 2c20 3130 3029 0a20 2020 2061  e()], 100).    a
+000074f0: 7373 6572 7420 7265 7370 5b22 7472 616e  ssert resp["tran
+00007500: 7361 6374 696f 6e5f 6964 7322 5d20 3d3d  saction_ids"] ==
+00007510: 205b 5d0a 2020 2020 2320 5465 7374 2063   [].    # Test c
+00007520: 6c61 696d 2073 7065 6e64 0a20 2020 2061  laim spend.    a
+00007530: 7761 6974 2077 616c 6c65 745f 325f 6170  wait wallet_2_ap
+00007540: 692e 7365 745f 6175 746f 5f63 6c61 696d  i.set_auto_claim
+00007550: 287b 2265 6e61 626c 6564 223a 2046 616c  ({"enabled": Fal
+00007560: 7365 2c20 2274 785f 6665 6522 3a20 3130  se, "tx_fee": 10
+00007570: 302c 2022 6d69 6e5f 616d 6f75 6e74 223a  0, "min_amount":
+00007580: 2030 2c20 2262 6174 6368 5f73 697a 6522   0, "batch_size"
+00007590: 3a20 317d 290a 2020 2020 7265 7370 203d  : 1}).    resp =
+000075a0: 2061 7761 6974 2077 616c 6c65 745f 325f   await wallet_2_
+000075b0: 7270 632e 7370 656e 645f 636c 6177 6261  rpc.spend_clawba
+000075c0: 636b 5f63 6f69 6e73 285b 636c 6177 6261  ck_coins([clawba
+000075d0: 636b 5f63 6f69 6e5f 6964 5f31 2c20 636c  ck_coin_id_1, cl
+000075e0: 6177 6261 636b 5f63 6f69 6e5f 6964 5f32  awback_coin_id_2
+000075f0: 5d2c 2031 3030 290a 2020 2020 6173 7365  ], 100).    asse
+00007600: 7274 2072 6573 705b 2273 7563 6365 7373  rt resp["success
+00007610: 225d 0a20 2020 2061 7373 6572 7420 6c65  "].    assert le
+00007620: 6e28 7265 7370 5b22 7472 616e 7361 6374  n(resp["transact
+00007630: 696f 6e5f 6964 7322 5d29 203d 3d20 320a  ion_ids"]) == 2.
+00007640: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
+00007650: 7574 5f61 7373 6572 745f 6e6f 745f 6e6f  ut_assert_not_no
+00007660: 6e65 280a 2020 2020 2020 2020 3130 2c20  ne(.        10, 
+00007670: 6675 6c6c 5f6e 6f64 655f 6170 692e 6675  full_node_api.fu
+00007680: 6c6c 5f6e 6f64 652e 6d65 6d70 6f6f 6c5f  ll_node.mempool_
+00007690: 6d61 6e61 6765 722e 6765 745f 7370 656e  manager.get_spen
+000076a0: 6462 756e 646c 652c 2062 7974 6573 3332  dbundle, bytes32
+000076b0: 2e66 726f 6d5f 6865 7873 7472 2872 6573  .from_hexstr(res
+000076c0: 705b 2274 7261 6e73 6163 7469 6f6e 5f69  p["transaction_i
+000076d0: 6473 225d 5b30 5d29 0a20 2020 2029 0a20  ds"][0]).    ). 
+000076e0: 2020 2061 7761 6974 2074 696d 655f 6f75     await time_ou
+000076f0: 745f 6173 7365 7274 5f6e 6f74 5f6e 6f6e  t_assert_not_non
+00007700: 6528 0a20 2020 2020 2020 2031 302c 2066  e(.        10, f
+00007710: 756c 6c5f 6e6f 6465 5f61 7069 2e66 756c  ull_node_api.ful
+00007720: 6c5f 6e6f 6465 2e6d 656d 706f 6f6c 5f6d  l_node.mempool_m
+00007730: 616e 6167 6572 2e67 6574 5f73 7065 6e64  anager.get_spend
+00007740: 6275 6e64 6c65 2c20 6279 7465 7333 322e  bundle, bytes32.
+00007750: 6672 6f6d 5f68 6578 7374 7228 7265 7370  from_hexstr(resp
+00007760: 5b22 7472 616e 7361 6374 696f 6e5f 6964  ["transaction_id
+00007770: 7322 5d5b 315d 290a 2020 2020 290a 2020  s"][1]).    ).  
+00007780: 2020 6177 6169 7420 6661 726d 5f74 7261    await farm_tra
+00007790: 6e73 6163 7469 6f6e 5f62 6c6f 636b 2866  nsaction_block(f
+000077a0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
+000077b0: 6c6c 6574 5f32 5f6e 6f64 6529 0a20 2020  llet_2_node).   
+000077c0: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+000077d0: 6173 7365 7274 2832 302c 2067 6574 5f63  assert(20, get_c
+000077e0: 6f6e 6669 726d 6564 5f62 616c 616e 6365  onfirmed_balance
+000077f0: 2c20 6765 6e65 7261 7465 645f 6675 6e64  , generated_fund
+00007800: 7320 2b20 3330 302c 2077 616c 6c65 745f  s + 300, wallet_
+00007810: 325f 7270 632c 2031 290a 2020 2020 2320  2_rpc, 1).    # 
+00007820: 5465 7374 2073 7065 6e74 2063 6f69 6e0a  Test spent coin.
+00007830: 2020 2020 7265 7370 203d 2061 7761 6974      resp = await
+00007840: 2077 616c 6c65 745f 325f 7270 632e 7370   wallet_2_rpc.sp
+00007850: 656e 645f 636c 6177 6261 636b 5f63 6f69  end_clawback_coi
+00007860: 6e73 285b 636c 6177 6261 636b 5f63 6f69  ns([clawback_coi
+00007870: 6e5f 6964 5f31 5d2c 2035 3030 290a 2020  n_id_1], 500).  
+00007880: 2020 6173 7365 7274 2072 6573 705b 2273    assert resp["s
+00007890: 7563 6365 7373 225d 0a20 2020 2061 7373  uccess"].    ass
+000078a0: 6572 7420 7265 7370 5b22 7472 616e 7361  ert resp["transa
+000078b0: 6374 696f 6e5f 6964 7322 5d20 3d3d 205b  ction_ids"] == [
+000078c0: 5d0a 0a0a 4070 7974 6573 742e 6d61 726b  ]...@pytest.mark
+000078d0: 2e61 7379 6e63 696f 0a61 7379 6e63 2064  .asyncio.async d
+000078e0: 6566 2074 6573 745f 7365 6e64 5f74 7261  ef test_send_tra
+000078f0: 6e73 6163 7469 6f6e 5f6d 756c 7469 2877  nsaction_multi(w
+00007900: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
+00007910: 6e6d 656e 743a 2057 616c 6c65 7452 7063  nment: WalletRpc
+00007920: 5465 7374 456e 7669 726f 6e6d 656e 7429  TestEnvironment)
+00007930: 3a0a 2020 2020 656e 763a 2057 616c 6c65  :.    env: Walle
+00007940: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
+00007950: 656e 7420 3d20 7761 6c6c 6574 5f72 7063  ent = wallet_rpc
+00007960: 5f65 6e76 6972 6f6e 6d65 6e74 0a0a 2020  _environment..  
+00007970: 2020 7761 6c6c 6574 5f32 3a20 5761 6c6c    wallet_2: Wall
+00007980: 6574 203d 2065 6e76 2e77 616c 6c65 745f  et = env.wallet_
+00007990: 322e 7761 6c6c 6574 0a20 2020 2077 616c  2.wallet.    wal
+000079a0: 6c65 745f 6e6f 6465 3a20 5761 6c6c 6574  let_node: Wallet
+000079b0: 4e6f 6465 203d 2065 6e76 2e77 616c 6c65  Node = env.walle
+000079c0: 745f 312e 6e6f 6465 0a20 2020 2066 756c  t_1.node.    ful
+000079d0: 6c5f 6e6f 6465 5f61 7069 3a20 4675 6c6c  l_node_api: Full
+000079e0: 4e6f 6465 5369 6d75 6c61 746f 7220 3d20  NodeSimulator = 
+000079f0: 656e 762e 6675 6c6c 5f6e 6f64 652e 6170  env.full_node.ap
+00007a00: 690a 2020 2020 636c 6965 6e74 3a20 5761  i.    client: Wa
+00007a10: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
+00007a20: 656e 762e 7761 6c6c 6574 5f31 2e72 7063  env.wallet_1.rpc
+00007a30: 5f63 6c69 656e 740a 0a20 2020 2067 656e  _client..    gen
+00007a40: 6572 6174 6564 5f66 756e 6473 203d 2061  erated_funds = a
+00007a50: 7761 6974 2067 656e 6572 6174 655f 6675  wait generate_fu
+00007a60: 6e64 7328 6675 6c6c 5f6e 6f64 655f 6170  nds(full_node_ap
+00007a70: 692c 2065 6e76 2e77 616c 6c65 745f 3129  i, env.wallet_1)
+00007a80: 0a0a 2020 2020 7265 6d6f 7661 6c73 203d  ..    removals =
+00007a90: 2061 7761 6974 2063 6c69 656e 742e 7365   await client.se
+00007aa0: 6c65 6374 5f63 6f69 6e73 2831 3735 3030  lect_coins(17500
+00007ab0: 3030 3030 3030 3030 2c20 7761 6c6c 6574  00000000, wallet
+00007ac0: 5f69 643d 3129 2020 2320 7765 2077 616e  _id=1)  # we wan
+00007ad0: 7420 6120 636f 696e 2074 6861 7420 776f  t a coin that wo
+00007ae0: 6e27 7420 6265 2073 656c 6563 7465 6420  n't be selected 
+00007af0: 6279 2064 6566 6175 6c74 0a20 2020 206f  by default.    o
+00007b00: 7574 7075 7473 203d 2061 7761 6974 2063  utputs = await c
+00007b10: 7265 6174 655f 7478 5f6f 7574 7075 7473  reate_tx_outputs
+00007b20: 2877 616c 6c65 745f 322c 205b 2875 696e  (wallet_2, [(uin
+00007b30: 7436 3428 3129 2c20 5b22 6d65 6d6f 5f31  t64(1), ["memo_1
+00007b40: 225d 292c 2028 7569 6e74 3634 2832 292c  "]), (uint64(2),
+00007b50: 205b 226d 656d 6f5f 3222 5d29 5d29 0a20   ["memo_2"])]). 
+00007b60: 2020 2061 6d6f 756e 745f 6f75 7470 7574     amount_output
+00007b70: 7320 3d20 7375 6d28 6f75 7470 7574 5b22  s = sum(output["
+00007b80: 616d 6f75 6e74 225d 2066 6f72 206f 7574  amount"] for out
+00007b90: 7075 7420 696e 206f 7574 7075 7473 290a  put in outputs).
+00007ba0: 2020 2020 616d 6f75 6e74 5f66 6565 203d      amount_fee =
+00007bb0: 2075 696e 7436 3428 616d 6f75 6e74 5f6f   uint64(amount_o
+00007bc0: 7574 7075 7473 202b 2031 290a 0a20 2020  utputs + 1)..   
+00007bd0: 2073 656e 645f 7478 5f72 6573 3a20 5472   send_tx_res: Tr
+00007be0: 616e 7361 6374 696f 6e52 6563 6f72 6420  ansactionRecord 
+00007bf0: 3d20 6177 6169 7420 636c 6965 6e74 2e73  = await client.s
+00007c00: 656e 645f 7472 616e 7361 6374 696f 6e5f  end_transaction_
+00007c10: 6d75 6c74 6928 0a20 2020 2020 2020 2031  multi(.        1
+00007c20: 2c0a 2020 2020 2020 2020 6f75 7470 7574  ,.        output
+00007c30: 732c 0a20 2020 2020 2020 2063 6f69 6e73  s,.        coins
+00007c40: 3d72 656d 6f76 616c 732c 0a20 2020 2020  =removals,.     
+00007c50: 2020 2066 6565 3d61 6d6f 756e 745f 6665     fee=amount_fe
+00007c60: 652c 0a20 2020 2029 0a20 2020 2073 7065  e,.    ).    spe
+00007c70: 6e64 5f62 756e 646c 6520 3d20 7365 6e64  nd_bundle = send
+00007c80: 5f74 785f 7265 732e 7370 656e 645f 6275  _tx_res.spend_bu
+00007c90: 6e64 6c65 0a20 2020 2061 7373 6572 7420  ndle.    assert 
+00007ca0: 7370 656e 645f 6275 6e64 6c65 2069 7320  spend_bundle is 
+00007cb0: 6e6f 7420 4e6f 6e65 0a20 2020 2061 7373  not None.    ass
+00007cc0: 6572 7420 7365 6e64 5f74 785f 7265 7320  ert send_tx_res 
+00007cd0: 6973 206e 6f74 204e 6f6e 650a 0a20 2020  is not None..   
+00007ce0: 2061 7373 6572 745f 7478 5f61 6d6f 756e   assert_tx_amoun
+00007cf0: 7473 2873 656e 645f 7478 5f72 6573 2c20  ts(send_tx_res, 
+00007d00: 6f75 7470 7574 732c 2061 6d6f 756e 745f  outputs, amount_
+00007d10: 6665 653d 616d 6f75 6e74 5f66 6565 2c20  fee=amount_fee, 
+00007d20: 6368 616e 6765 5f65 7870 6563 7465 643d  change_expected=
+00007d30: 5472 7565 290a 2020 2020 6173 7365 7274  True).    assert
+00007d40: 2073 656e 645f 7478 5f72 6573 2e72 656d   send_tx_res.rem
+00007d50: 6f76 616c 7320 3d3d 2072 656d 6f76 616c  ovals == removal
+00007d60: 730a 0a20 2020 2061 7761 6974 2066 6172  s..    await far
+00007d70: 6d5f 7472 616e 7361 6374 696f 6e28 6675  m_transaction(fu
+00007d80: 6c6c 5f6e 6f64 655f 6170 692c 2077 616c  ll_node_api, wal
+00007d90: 6c65 745f 6e6f 6465 2c20 7370 656e 645f  let_node, spend_
+00007da0: 6275 6e64 6c65 290a 0a20 2020 2061 7761  bundle)..    awa
+00007db0: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
+00007dc0: 7274 2832 302c 2067 6574 5f63 6f6e 6669  rt(20, get_confi
+00007dd0: 726d 6564 5f62 616c 616e 6365 2c20 6765  rmed_balance, ge
+00007de0: 6e65 7261 7465 645f 6675 6e64 7320 2d20  nerated_funds - 
+00007df0: 616d 6f75 6e74 5f6f 7574 7075 7473 202d  amount_outputs -
+00007e00: 2061 6d6f 756e 745f 6665 652c 2063 6c69   amount_fee, cli
+00007e10: 656e 742c 2031 290a 0a20 2020 2023 2043  ent, 1)..    # C
+00007e20: 6865 636b 7320 7468 6174 2074 6865 206d  hecks that the m
+00007e30: 656d 6f20 6361 6e20 6265 2072 6574 7269  emo can be retri
+00007e40: 6576 6564 0a20 2020 2074 785f 636f 6e66  eved.    tx_conf
+00007e50: 6972 6d65 6420 3d20 6177 6169 7420 636c  irmed = await cl
+00007e60: 6965 6e74 2e67 6574 5f74 7261 6e73 6163  ient.get_transac
+00007e70: 7469 6f6e 2831 2c20 7365 6e64 5f74 785f  tion(1, send_tx_
+00007e80: 7265 732e 6e61 6d65 290a 2020 2020 6173  res.name).    as
+00007e90: 7365 7274 2074 785f 636f 6e66 6972 6d65  sert tx_confirme
+00007ea0: 642e 636f 6e66 6972 6d65 640a 2020 2020  d.confirmed.    
+00007eb0: 6d65 6d6f 7320 3d20 7478 5f63 6f6e 6669  memos = tx_confi
+00007ec0: 726d 6564 2e67 6574 5f6d 656d 6f73 2829  rmed.get_memos()
+00007ed0: 0a20 2020 2061 7373 6572 7420 6c65 6e28  .    assert len(
+00007ee0: 6d65 6d6f 7329 203d 3d20 6c65 6e28 6f75  memos) == len(ou
+00007ef0: 7470 7574 7329 0a20 2020 2066 6f72 206f  tputs).    for o
+00007f00: 7574 7075 7420 696e 206f 7574 7075 7473  utput in outputs
+00007f10: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+00007f20: 205b 6f75 7470 7574 5b22 6d65 6d6f 7322   [output["memos"
+00007f30: 5d5b 305d 2e65 6e63 6f64 6528 295d 2069  ][0].encode()] i
+00007f40: 6e20 6d65 6d6f 732e 7661 6c75 6573 2829  n memos.values()
+00007f50: 0a20 2020 2073 7065 6e64 5f62 756e 646c  .    spend_bundl
+00007f60: 6520 3d20 7365 6e64 5f74 785f 7265 732e  e = send_tx_res.
+00007f70: 7370 656e 645f 6275 6e64 6c65 0a20 2020  spend_bundle.   
+00007f80: 2061 7373 6572 7420 7370 656e 645f 6275   assert spend_bu
+00007f90: 6e64 6c65 2069 7320 6e6f 7420 4e6f 6e65  ndle is not None
+00007fa0: 0a20 2020 2066 6f72 206b 6579 2069 6e20  .    for key in 
+00007fb0: 6d65 6d6f 732e 6b65 7973 2829 3a0a 2020  memos.keys():.  
+00007fc0: 2020 2020 2020 6173 7365 7274 206b 6579        assert key
+00007fd0: 2069 6e20 5b61 2e6e 616d 6528 2920 666f   in [a.name() fo
+00007fe0: 7220 6120 696e 2073 7065 6e64 5f62 756e  r a in spend_bun
+00007ff0: 646c 652e 6164 6469 7469 6f6e 7328 295d  dle.additions()]
+00008000: 0a0a 0a40 7079 7465 7374 2e6d 6172 6b2e  ...@pytest.mark.
+00008010: 6173 796e 6369 6f0a 6173 796e 6320 6465  asyncio.async de
+00008020: 6620 7465 7374 5f67 6574 5f74 7261 6e73  f test_get_trans
+00008030: 6163 7469 6f6e 7328 7761 6c6c 6574 5f72  actions(wallet_r
+00008040: 7063 5f65 6e76 6972 6f6e 6d65 6e74 3a20  pc_environment: 
+00008050: 5761 6c6c 6574 5270 6354 6573 7445 6e76  WalletRpcTestEnv
+00008060: 6972 6f6e 6d65 6e74 293a 0a20 2020 2065  ironment):.    e
+00008070: 6e76 3a20 5761 6c6c 6574 5270 6354 6573  nv: WalletRpcTes
+00008080: 7445 6e76 6972 6f6e 6d65 6e74 203d 2077  tEnvironment = w
+00008090: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
+000080a0: 6e6d 656e 740a 0a20 2020 2077 616c 6c65  nment..    walle
+000080b0: 743a 2057 616c 6c65 7420 3d20 656e 762e  t: Wallet = env.
+000080c0: 7761 6c6c 6574 5f31 2e77 616c 6c65 740a  wallet_1.wallet.
+000080d0: 2020 2020 7761 6c6c 6574 5f6e 6f64 653a      wallet_node:
+000080e0: 2057 616c 6c65 744e 6f64 6520 3d20 656e   WalletNode = en
+000080f0: 762e 7761 6c6c 6574 5f31 2e6e 6f64 650a  v.wallet_1.node.
+00008100: 2020 2020 6675 6c6c 5f6e 6f64 655f 6170      full_node_ap
+00008110: 693a 2046 756c 6c4e 6f64 6553 696d 756c  i: FullNodeSimul
+00008120: 6174 6f72 203d 2065 6e76 2e66 756c 6c5f  ator = env.full_
+00008130: 6e6f 6465 2e61 7069 0a20 2020 2063 6c69  node.api.    cli
+00008140: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
+00008150: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
+00008160: 745f 312e 7270 635f 636c 6965 6e74 0a0a  t_1.rpc_client..
+00008170: 2020 2020 6177 6169 7420 6765 6e65 7261      await genera
+00008180: 7465 5f66 756e 6473 2866 756c 6c5f 6e6f  te_funds(full_no
+00008190: 6465 5f61 7069 2c20 656e 762e 7761 6c6c  de_api, env.wall
+000081a0: 6574 5f31 2c20 3529 0a0a 2020 2020 616c  et_1, 5)..    al
+000081b0: 6c5f 7472 616e 7361 6374 696f 6e73 203d  l_transactions =
+000081c0: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
+000081d0: 745f 7472 616e 7361 6374 696f 6e73 2831  t_transactions(1
+000081e0: 290a 2020 2020 6173 7365 7274 206c 656e  ).    assert len
+000081f0: 2861 6c6c 5f74 7261 6e73 6163 7469 6f6e  (all_transaction
+00008200: 7329 203e 3d20 3130 0a20 2020 2023 2054  s) >= 10.    # T
+00008210: 6573 7420 7472 616e 7361 6374 696f 6e20  est transaction 
+00008220: 7061 6769 6e61 7469 6f6e 0a20 2020 2073  pagination.    s
+00008230: 6f6d 655f 7472 616e 7361 6374 696f 6e73  ome_transactions
+00008240: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
+00008250: 6765 745f 7472 616e 7361 6374 696f 6e73  get_transactions
+00008260: 2831 2c20 302c 2035 290a 2020 2020 736f  (1, 0, 5).    so
+00008270: 6d65 5f74 7261 6e73 6163 7469 6f6e 735f  me_transactions_
+00008280: 3220 3d20 6177 6169 7420 636c 6965 6e74  2 = await client
+00008290: 2e67 6574 5f74 7261 6e73 6163 7469 6f6e  .get_transaction
+000082a0: 7328 312c 2035 2c20 3130 290a 2020 2020  s(1, 5, 10).    
+000082b0: 6173 7365 7274 2073 6f6d 655f 7472 616e  assert some_tran
+000082c0: 7361 6374 696f 6e73 203d 3d20 616c 6c5f  sactions == all_
+000082d0: 7472 616e 7361 6374 696f 6e73 5b30 3a35  transactions[0:5
+000082e0: 5d0a 2020 2020 6173 7365 7274 2073 6f6d  ].    assert som
+000082f0: 655f 7472 616e 7361 6374 696f 6e73 5f32  e_transactions_2
+00008300: 203d 3d20 616c 6c5f 7472 616e 7361 6374   == all_transact
+00008310: 696f 6e73 5b35 3a31 305d 0a0a 2020 2020  ions[5:10]..    
+00008320: 2320 5465 7374 696e 6720 736f 7274 730a  # Testing sorts.
+00008330: 2020 2020 2320 5465 7374 2074 6865 2064      # Test the d
+00008340: 6566 6175 6c74 2073 6f72 7420 2843 4f4e  efault sort (CON
+00008350: 4649 524d 4544 5f41 545f 4845 4947 4854  FIRMED_AT_HEIGHT
+00008360: 290a 2020 2020 6173 7365 7274 2061 6c6c  ).    assert all
+00008370: 5f74 7261 6e73 6163 7469 6f6e 7320 3d3d  _transactions ==
+00008380: 2073 6f72 7465 6428 616c 6c5f 7472 616e   sorted(all_tran
+00008390: 7361 6374 696f 6e73 2c20 6b65 793d 6174  sactions, key=at
+000083a0: 7472 6765 7474 6572 2822 636f 6e66 6972  trgetter("confir
+000083b0: 6d65 645f 6174 5f68 6569 6768 7422 2929  med_at_height"))
+000083c0: 0a20 2020 2061 6c6c 5f74 7261 6e73 6163  .    all_transac
+000083d0: 7469 6f6e 7320 3d20 6177 6169 7420 636c  tions = await cl
+000083e0: 6965 6e74 2e67 6574 5f74 7261 6e73 6163  ient.get_transac
+000083f0: 7469 6f6e 7328 312c 2072 6576 6572 7365  tions(1, reverse
+00008400: 3d54 7275 6529 0a20 2020 2061 7373 6572  =True).    asser
+00008410: 7420 616c 6c5f 7472 616e 7361 6374 696f  t all_transactio
+00008420: 6e73 203d 3d20 736f 7274 6564 2861 6c6c  ns == sorted(all
+00008430: 5f74 7261 6e73 6163 7469 6f6e 732c 206b  _transactions, k
+00008440: 6579 3d61 7474 7267 6574 7465 7228 2263  ey=attrgetter("c
+00008450: 6f6e 6669 726d 6564 5f61 745f 6865 6967  onfirmed_at_heig
+00008460: 6874 2229 2c20 7265 7665 7273 653d 5472  ht"), reverse=Tr
+00008470: 7565 290a 0a20 2020 2023 2054 6573 7420  ue)..    # Test 
+00008480: 5245 4c45 5641 4e43 450a 2020 2020 6177  RELEVANCE.    aw
+00008490: 6169 7420 636c 6965 6e74 2e73 656e 645f  ait client.send_
+000084a0: 7472 616e 7361 6374 696f 6e28 0a20 2020  transaction(.   
+000084b0: 2020 2020 2031 2c20 7569 6e74 3634 2831       1, uint64(1
+000084c0: 292c 2065 6e63 6f64 655f 7075 7a7a 6c65  ), encode_puzzle
+000084d0: 5f68 6173 6828 6177 6169 7420 7761 6c6c  _hash(await wall
+000084e0: 6574 2e67 6574 5f6e 6577 5f70 757a 7a6c  et.get_new_puzzl
+000084f0: 6568 6173 6828 292c 2022 7478 6368 2229  ehash(), "txch")
+00008500: 0a20 2020 2029 2020 2320 4372 6561 7465  .    )  # Create
+00008510: 2061 2070 656e 6469 6e67 2074 780a 0a20   a pending tx.. 
+00008520: 2020 2061 6c6c 5f74 7261 6e73 6163 7469     all_transacti
+00008530: 6f6e 7320 3d20 6177 6169 7420 636c 6965  ons = await clie
+00008540: 6e74 2e67 6574 5f74 7261 6e73 6163 7469  nt.get_transacti
+00008550: 6f6e 7328 312c 2073 6f72 745f 6b65 793d  ons(1, sort_key=
+00008560: 536f 7274 4b65 792e 5245 4c45 5641 4e43  SortKey.RELEVANC
+00008570: 4529 0a20 2020 2073 6f72 7465 645f 7472  E).    sorted_tr
+00008580: 616e 7361 6374 696f 6e73 203d 2073 6f72  ansactions = sor
+00008590: 7465 6428 616c 6c5f 7472 616e 7361 6374  ted(all_transact
+000085a0: 696f 6e73 2c20 6b65 793d 6174 7472 6765  ions, key=attrge
+000085b0: 7474 6572 2822 6372 6561 7465 645f 6174  tter("created_at
+000085c0: 5f74 696d 6522 292c 2072 6576 6572 7365  _time"), reverse
+000085d0: 3d54 7275 6529 0a20 2020 2073 6f72 7465  =True).    sorte
+000085e0: 645f 7472 616e 7361 6374 696f 6e73 203d  d_transactions =
+000085f0: 2073 6f72 7465 6428 736f 7274 6564 5f74   sorted(sorted_t
+00008600: 7261 6e73 6163 7469 6f6e 732c 206b 6579  ransactions, key
+00008610: 3d61 7474 7267 6574 7465 7228 2263 6f6e  =attrgetter("con
+00008620: 6669 726d 6564 5f61 745f 6865 6967 6874  firmed_at_height
+00008630: 2229 2c20 7265 7665 7273 653d 5472 7565  "), reverse=True
+00008640: 290a 2020 2020 736f 7274 6564 5f74 7261  ).    sorted_tra
+00008650: 6e73 6163 7469 6f6e 7320 3d20 736f 7274  nsactions = sort
+00008660: 6564 2873 6f72 7465 645f 7472 616e 7361  ed(sorted_transa
+00008670: 6374 696f 6e73 2c20 6b65 793d 6174 7472  ctions, key=attr
+00008680: 6765 7474 6572 2822 636f 6e66 6972 6d65  getter("confirme
+00008690: 6422 2929 0a20 2020 2061 7373 6572 7420  d")).    assert 
+000086a0: 616c 6c5f 7472 616e 7361 6374 696f 6e73  all_transactions
+000086b0: 203d 3d20 736f 7274 6564 5f74 7261 6e73   == sorted_trans
+000086c0: 6163 7469 6f6e 730a 0a20 2020 2061 6c6c  actions..    all
+000086d0: 5f74 7261 6e73 6163 7469 6f6e 7320 3d20  _transactions = 
+000086e0: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
+000086f0: 5f74 7261 6e73 6163 7469 6f6e 7328 312c  _transactions(1,
+00008700: 2073 6f72 745f 6b65 793d 536f 7274 4b65   sort_key=SortKe
+00008710: 792e 5245 4c45 5641 4e43 452c 2072 6576  y.RELEVANCE, rev
+00008720: 6572 7365 3d54 7275 6529 0a20 2020 2073  erse=True).    s
+00008730: 6f72 7465 645f 7472 616e 7361 6374 696f  orted_transactio
+00008740: 6e73 203d 2073 6f72 7465 6428 616c 6c5f  ns = sorted(all_
+00008750: 7472 616e 7361 6374 696f 6e73 2c20 6b65  transactions, ke
+00008760: 793d 6174 7472 6765 7474 6572 2822 6372  y=attrgetter("cr
+00008770: 6561 7465 645f 6174 5f74 696d 6522 2929  eated_at_time"))
+00008780: 0a20 2020 2073 6f72 7465 645f 7472 616e  .    sorted_tran
+00008790: 7361 6374 696f 6e73 203d 2073 6f72 7465  sactions = sorte
+000087a0: 6428 736f 7274 6564 5f74 7261 6e73 6163  d(sorted_transac
+000087b0: 7469 6f6e 732c 206b 6579 3d61 7474 7267  tions, key=attrg
+000087c0: 6574 7465 7228 2263 6f6e 6669 726d 6564  etter("confirmed
+000087d0: 5f61 745f 6865 6967 6874 2229 290a 2020  _at_height")).  
+000087e0: 2020 736f 7274 6564 5f74 7261 6e73 6163    sorted_transac
+000087f0: 7469 6f6e 7320 3d20 736f 7274 6564 2873  tions = sorted(s
+00008800: 6f72 7465 645f 7472 616e 7361 6374 696f  orted_transactio
+00008810: 6e73 2c20 6b65 793d 6174 7472 6765 7474  ns, key=attrgett
+00008820: 6572 2822 636f 6e66 6972 6d65 6422 292c  er("confirmed"),
+00008830: 2072 6576 6572 7365 3d54 7275 6529 0a20   reverse=True). 
+00008840: 2020 2061 7373 6572 7420 616c 6c5f 7472     assert all_tr
+00008850: 616e 7361 6374 696f 6e73 203d 3d20 736f  ansactions == so
+00008860: 7274 6564 5f74 7261 6e73 6163 7469 6f6e  rted_transaction
+00008870: 730a 0a20 2020 2023 2054 6573 7420 6765  s..    # Test ge
+00008880: 745f 7472 616e 7361 6374 696f 6e73 2074  t_transactions t
+00008890: 6f20 6164 6472 6573 730a 2020 2020 7068  o address.    ph
+000088a0: 5f62 795f 6164 6472 203d 2061 7761 6974  _by_addr = await
+000088b0: 2077 616c 6c65 742e 6765 745f 6e65 775f   wallet.get_new_
+000088c0: 7075 7a7a 6c65 6861 7368 2829 0a20 2020  puzzlehash().   
+000088d0: 2061 7761 6974 2063 6c69 656e 742e 7365   await client.se
+000088e0: 6e64 5f74 7261 6e73 6163 7469 6f6e 2831  nd_transaction(1
+000088f0: 2c20 7569 6e74 3634 2831 292c 2065 6e63  , uint64(1), enc
+00008900: 6f64 655f 7075 7a7a 6c65 5f68 6173 6828  ode_puzzle_hash(
+00008910: 7068 5f62 795f 6164 6472 2c20 2274 7863  ph_by_addr, "txc
+00008920: 6822 2929 0a20 2020 2061 7761 6974 2063  h")).    await c
+00008930: 6c69 656e 742e 6661 726d 5f62 6c6f 636b  lient.farm_block
+00008940: 2865 6e63 6f64 655f 7075 7a7a 6c65 5f68  (encode_puzzle_h
+00008950: 6173 6828 7068 5f62 795f 6164 6472 2c20  ash(ph_by_addr, 
+00008960: 2274 7863 6822 2929 0a20 2020 2061 7761  "txch")).    awa
+00008970: 6974 2066 756c 6c5f 6e6f 6465 5f61 7069  it full_node_api
+00008980: 2e77 6169 745f 666f 725f 7761 6c6c 6574  .wait_for_wallet
+00008990: 5f73 796e 6365 6428 7761 6c6c 6574 5f6e  _synced(wallet_n
+000089a0: 6f64 653d 7761 6c6c 6574 5f6e 6f64 652c  ode=wallet_node,
+000089b0: 2074 696d 656f 7574 3d32 3029 0a20 2020   timeout=20).   
+000089c0: 2074 785f 666f 725f 6164 6472 6573 7320   tx_for_address 
+000089d0: 3d20 6177 6169 7420 636c 6965 6e74 2e67  = await client.g
+000089e0: 6574 5f74 7261 6e73 6163 7469 6f6e 7328  et_transactions(
+000089f0: 312c 2074 6f5f 6164 6472 6573 733d 656e  1, to_address=en
+00008a00: 636f 6465 5f70 757a 7a6c 655f 6861 7368  code_puzzle_hash
+00008a10: 2870 685f 6279 5f61 6464 722c 2022 7478  (ph_by_addr, "tx
+00008a20: 6368 2229 290a 2020 2020 6173 7365 7274  ch")).    assert
+00008a30: 206c 656e 2874 785f 666f 725f 6164 6472   len(tx_for_addr
+00008a40: 6573 7329 203d 3d20 310a 2020 2020 6173  ess) == 1.    as
+00008a50: 7365 7274 2074 785f 666f 725f 6164 6472  sert tx_for_addr
+00008a60: 6573 735b 305d 2e74 6f5f 7075 7a7a 6c65  ess[0].to_puzzle
+00008a70: 5f68 6173 6820 3d3d 2070 685f 6279 5f61  _hash == ph_by_a
+00008a80: 6464 720a 0a20 2020 2023 2054 6573 7420  ddr..    # Test 
+00008a90: 7479 7065 2066 696c 7465 720a 2020 2020  type filter.    
+00008aa0: 616c 6c5f 7472 616e 7361 6374 696f 6e73  all_transactions
+00008ab0: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
+00008ac0: 6765 745f 7472 616e 7361 6374 696f 6e73  get_transactions
+00008ad0: 280a 2020 2020 2020 2020 312c 2074 7970  (.        1, typ
+00008ae0: 655f 6669 6c74 6572 3d54 7261 6e73 6163  e_filter=Transac
+00008af0: 7469 6f6e 5479 7065 4669 6c74 6572 2e69  tionTypeFilter.i
+00008b00: 6e63 6c75 6465 285b 5472 616e 7361 6374  nclude([Transact
+00008b10: 696f 6e54 7970 652e 434f 494e 4241 5345  ionType.COINBASE
+00008b20: 5f52 4557 4152 445d 290a 2020 2020 290a  _REWARD]).    ).
+00008b30: 2020 2020 6173 7365 7274 206c 656e 2861      assert len(a
+00008b40: 6c6c 5f74 7261 6e73 6163 7469 6f6e 7329  ll_transactions)
+00008b50: 203d 3d20 350a 2020 2020 6173 7365 7274   == 5.    assert
+00008b60: 2061 6c6c 2874 7261 6e73 6163 7469 6f6e   all(transaction
+00008b70: 2e74 7970 6520 3d3d 2054 7261 6e73 6163  .type == Transac
+00008b80: 7469 6f6e 5479 7065 2e43 4f49 4e42 4153  tionType.COINBAS
+00008b90: 455f 5245 5741 5244 2066 6f72 2074 7261  E_REWARD for tra
+00008ba0: 6e73 6163 7469 6f6e 2069 6e20 616c 6c5f  nsaction in all_
+00008bb0: 7472 616e 7361 6374 696f 6e73 290a 2020  transactions).  
+00008bc0: 2020 2320 5465 7374 2063 6f6e 6669 726d    # Test confirm
+00008bd0: 6564 2066 696c 7465 720a 2020 2020 616c  ed filter.    al
+00008be0: 6c5f 7472 616e 7361 6374 696f 6e73 203d  l_transactions =
+00008bf0: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
+00008c00: 745f 7472 616e 7361 6374 696f 6e73 2831  t_transactions(1
+00008c10: 2c20 636f 6e66 6972 6d65 643d 5472 7565  , confirmed=True
+00008c20: 290a 2020 2020 6173 7365 7274 206c 656e  ).    assert len
+00008c30: 2861 6c6c 5f74 7261 6e73 6163 7469 6f6e  (all_transaction
+00008c40: 7329 203d 3d20 3130 0a20 2020 2061 7373  s) == 10.    ass
+00008c50: 6572 7420 616c 6c28 7472 616e 7361 6374  ert all(transact
+00008c60: 696f 6e2e 636f 6e66 6972 6d65 6420 666f  ion.confirmed fo
+00008c70: 7220 7472 616e 7361 6374 696f 6e20 696e  r transaction in
+00008c80: 2061 6c6c 5f74 7261 6e73 6163 7469 6f6e   all_transaction
+00008c90: 7329 0a20 2020 2061 6c6c 5f74 7261 6e73  s).    all_trans
+00008ca0: 6163 7469 6f6e 7320 3d20 6177 6169 7420  actions = await 
+00008cb0: 636c 6965 6e74 2e67 6574 5f74 7261 6e73  client.get_trans
+00008cc0: 6163 7469 6f6e 7328 312c 2063 6f6e 6669  actions(1, confi
+00008cd0: 726d 6564 3d46 616c 7365 290a 2020 2020  rmed=False).    
+00008ce0: 6173 7365 7274 206c 656e 2861 6c6c 5f74  assert len(all_t
+00008cf0: 7261 6e73 6163 7469 6f6e 7329 203d 3d20  ransactions) == 
+00008d00: 320a 2020 2020 6173 7365 7274 2061 6c6c  2.    assert all
+00008d10: 286e 6f74 2074 7261 6e73 6163 7469 6f6e  (not transaction
+00008d20: 2e63 6f6e 6669 726d 6564 2066 6f72 2074  .confirmed for t
+00008d30: 7261 6e73 6163 7469 6f6e 2069 6e20 616c  ransaction in al
+00008d40: 6c5f 7472 616e 7361 6374 696f 6e73 290a  l_transactions).
+00008d50: 0a20 2020 2023 2054 6573 7420 6279 7061  .    # Test bypa
+00008d60: 7373 2062 726f 6b65 6e20 7478 730a 2020  ss broken txs.  
+00008d70: 2020 6177 6169 7420 7761 6c6c 6574 2e77    await wallet.w
+00008d80: 616c 6c65 745f 7374 6174 655f 6d61 6e61  allet_state_mana
+00008d90: 6765 722e 7478 5f73 746f 7265 2e61 6464  ger.tx_store.add
+00008da0: 5f74 7261 6e73 6163 7469 6f6e 5f72 6563  _transaction_rec
+00008db0: 6f72 6428 0a20 2020 2020 2020 2064 6174  ord(.        dat
+00008dc0: 6163 6c61 7373 6573 2e72 6570 6c61 6365  aclasses.replace
+00008dd0: 2861 6c6c 5f74 7261 6e73 6163 7469 6f6e  (all_transaction
+00008de0: 735b 305d 2c20 7479 7065 3d75 696e 7433  s[0], type=uint3
+00008df0: 3228 5472 616e 7361 6374 696f 6e54 7970  2(TransactionTyp
+00008e00: 652e 494e 434f 4d49 4e47 5f43 4c41 5742  e.INCOMING_CLAWB
+00008e10: 4143 4b5f 5345 4e44 2929 0a20 2020 2029  ACK_SEND)).    )
+00008e20: 0a20 2020 2061 6c6c 5f74 7261 6e73 6163  .    all_transac
+00008e30: 7469 6f6e 7320 3d20 6177 6169 7420 636c  tions = await cl
+00008e40: 6965 6e74 2e67 6574 5f74 7261 6e73 6163  ient.get_transac
+00008e50: 7469 6f6e 7328 0a20 2020 2020 2020 2031  tions(.        1
+00008e60: 2c20 7479 7065 5f66 696c 7465 723d 5472  , type_filter=Tr
+00008e70: 616e 7361 6374 696f 6e54 7970 6546 696c  ansactionTypeFil
+00008e80: 7465 722e 696e 636c 7564 6528 5b54 7261  ter.include([Tra
+00008e90: 6e73 6163 7469 6f6e 5479 7065 2e49 4e43  nsactionType.INC
+00008ea0: 4f4d 494e 475f 434c 4157 4241 434b 5f53  OMING_CLAWBACK_S
+00008eb0: 454e 445d 292c 2063 6f6e 6669 726d 6564  END]), confirmed
+00008ec0: 3d46 616c 7365 0a20 2020 2029 0a20 2020  =False.    ).   
+00008ed0: 2061 7373 6572 7420 6c65 6e28 616c 6c5f   assert len(all_
+00008ee0: 7472 616e 7361 6374 696f 6e73 2920 3d3d  transactions) ==
+00008ef0: 2031 0a0a 0a40 7079 7465 7374 2e6d 6172   1...@pytest.mar
+00008f00: 6b2e 6173 796e 6369 6f0a 6173 796e 6320  k.asyncio.async 
+00008f10: 6465 6620 7465 7374 5f67 6574 5f74 7261  def test_get_tra
+00008f20: 6e73 6163 7469 6f6e 5f63 6f75 6e74 2877  nsaction_count(w
+00008f30: 616c 6c65 745f 7270 635f 656e 7669 726f  allet_rpc_enviro
+00008f40: 6e6d 656e 743a 2057 616c 6c65 7452 7063  nment: WalletRpc
+00008f50: 5465 7374 456e 7669 726f 6e6d 656e 7429  TestEnvironment)
+00008f60: 3a0a 2020 2020 656e 763a 2057 616c 6c65  :.    env: Walle
+00008f70: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
+00008f80: 656e 7420 3d20 7761 6c6c 6574 5f72 7063  ent = wallet_rpc
+00008f90: 5f65 6e76 6972 6f6e 6d65 6e74 0a0a 2020  _environment..  
+00008fa0: 2020 6675 6c6c 5f6e 6f64 655f 6170 693a    full_node_api:
+00008fb0: 2046 756c 6c4e 6f64 6553 696d 756c 6174   FullNodeSimulat
+00008fc0: 6f72 203d 2065 6e76 2e66 756c 6c5f 6e6f  or = env.full_no
+00008fd0: 6465 2e61 7069 0a20 2020 2063 6c69 656e  de.api.    clien
+00008fe0: 743a 2057 616c 6c65 7452 7063 436c 6965  t: WalletRpcClie
+00008ff0: 6e74 203d 2065 6e76 2e77 616c 6c65 745f  nt = env.wallet_
+00009000: 312e 7270 635f 636c 6965 6e74 0a0a 2020  1.rpc_client..  
+00009010: 2020 6177 6169 7420 6765 6e65 7261 7465    await generate
+00009020: 5f66 756e 6473 2866 756c 6c5f 6e6f 6465  _funds(full_node
+00009030: 5f61 7069 2c20 656e 762e 7761 6c6c 6574  _api, env.wallet
+00009040: 5f31 290a 0a20 2020 2061 6c6c 5f74 7261  _1)..    all_tra
+00009050: 6e73 6163 7469 6f6e 7320 3d20 6177 6169  nsactions = awai
+00009060: 7420 636c 6965 6e74 2e67 6574 5f74 7261  t client.get_tra
+00009070: 6e73 6163 7469 6f6e 7328 3129 0a20 2020  nsactions(1).   
+00009080: 2061 7373 6572 7420 6c65 6e28 616c 6c5f   assert len(all_
+00009090: 7472 616e 7361 6374 696f 6e73 2920 3e20  transactions) > 
+000090a0: 300a 2020 2020 7472 616e 7361 6374 696f  0.    transactio
+000090b0: 6e5f 636f 756e 7420 3d20 6177 6169 7420  n_count = await 
+000090c0: 636c 6965 6e74 2e67 6574 5f74 7261 6e73  client.get_trans
+000090d0: 6163 7469 6f6e 5f63 6f75 6e74 2831 290a  action_count(1).
+000090e0: 2020 2020 6173 7365 7274 2074 7261 6e73      assert trans
+000090f0: 6163 7469 6f6e 5f63 6f75 6e74 203d 3d20  action_count == 
+00009100: 6c65 6e28 616c 6c5f 7472 616e 7361 6374  len(all_transact
+00009110: 696f 6e73 290a 2020 2020 6173 7365 7274  ions).    assert
+00009120: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
+00009130: 745f 7472 616e 7361 6374 696f 6e5f 636f  t_transaction_co
+00009140: 756e 7428 312c 2063 6f6e 6669 726d 6564  unt(1, confirmed
+00009150: 3d46 616c 7365 2920 3d3d 2030 0a20 2020  =False) == 0.   
+00009160: 2061 7373 6572 7420 280a 2020 2020 2020   assert (.      
+00009170: 2020 6177 6169 7420 636c 6965 6e74 2e67    await client.g
+00009180: 6574 5f74 7261 6e73 6163 7469 6f6e 5f63  et_transaction_c
+00009190: 6f75 6e74 280a 2020 2020 2020 2020 2020  ount(.          
+000091a0: 2020 312c 2074 7970 655f 6669 6c74 6572    1, type_filter
+000091b0: 3d54 7261 6e73 6163 7469 6f6e 5479 7065  =TransactionType
+000091c0: 4669 6c74 6572 2e69 6e63 6c75 6465 285b  Filter.include([
+000091d0: 5472 616e 7361 6374 696f 6e54 7970 652e  TransactionType.
+000091e0: 494e 434f 4d49 4e47 5f43 4c41 5742 4143  INCOMING_CLAWBAC
+000091f0: 4b5f 5345 4e44 5d29 0a20 2020 2020 2020  K_SEND]).       
+00009200: 2029 0a20 2020 2020 2020 203d 3d20 300a   ).        == 0.
+00009210: 2020 2020 290a 0a0a 4070 7974 6573 742e      )...@pytest.
+00009220: 6d61 726b 2e61 7379 6e63 696f 0a61 7379  mark.asyncio.asy
+00009230: 6e63 2064 6566 2074 6573 745f 6361 745f  nc def test_cat_
+00009240: 656e 6470 6f69 6e74 7328 7761 6c6c 6574  endpoints(wallet
+00009250: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
+00009260: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
+00009270: 6e76 6972 6f6e 6d65 6e74 293a 0a20 2020  nvironment):.   
+00009280: 2065 6e76 3a20 5761 6c6c 6574 5270 6354   env: WalletRpcT
+00009290: 6573 7445 6e76 6972 6f6e 6d65 6e74 203d  estEnvironment =
+000092a0: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
+000092b0: 726f 6e6d 656e 740a 0a20 2020 2077 616c  ronment..    wal
+000092c0: 6c65 745f 6e6f 6465 3a20 5761 6c6c 6574  let_node: Wallet
+000092d0: 4e6f 6465 203d 2065 6e76 2e77 616c 6c65  Node = env.walle
+000092e0: 745f 312e 6e6f 6465 0a0a 2020 2020 636c  t_1.node..    cl
+000092f0: 6965 6e74 3a20 5761 6c6c 6574 5270 6343  ient: WalletRpcC
+00009300: 6c69 656e 7420 3d20 656e 762e 7761 6c6c  lient = env.wall
+00009310: 6574 5f31 2e72 7063 5f63 6c69 656e 740a  et_1.rpc_client.
+00009320: 2020 2020 636c 6965 6e74 5f32 3a20 5761      client_2: Wa
+00009330: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
+00009340: 656e 762e 7761 6c6c 6574 5f32 2e72 7063  env.wallet_2.rpc
+00009350: 5f63 6c69 656e 740a 0a20 2020 2066 756c  _client..    ful
+00009360: 6c5f 6e6f 6465 5f61 7069 3a20 4675 6c6c  l_node_api: Full
+00009370: 4e6f 6465 5369 6d75 6c61 746f 7220 3d20  NodeSimulator = 
+00009380: 656e 762e 6675 6c6c 5f6e 6f64 652e 6170  env.full_node.ap
+00009390: 690a 0a20 2020 2061 7761 6974 2067 656e  i..    await gen
+000093a0: 6572 6174 655f 6675 6e64 7328 6675 6c6c  erate_funds(full
+000093b0: 5f6e 6f64 655f 6170 692c 2065 6e76 2e77  _node_api, env.w
+000093c0: 616c 6c65 745f 312c 2031 290a 2020 2020  allet_1, 1).    
+000093d0: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
+000093e0: 756e 6473 2866 756c 6c5f 6e6f 6465 5f61  unds(full_node_a
+000093f0: 7069 2c20 656e 762e 7761 6c6c 6574 5f32  pi, env.wallet_2
+00009400: 2c20 3129 0a0a 2020 2020 2320 4372 6561  , 1)..    # Crea
+00009410: 7465 7320 6120 4341 5420 7761 6c6c 6574  tes a CAT wallet
+00009420: 2077 6974 6820 3130 3020 6d6f 6a6f 7320   with 100 mojos 
+00009430: 616e 6420 6120 4341 5420 7769 7468 2032  and a CAT with 2
+00009440: 3020 6d6f 6a6f 730a 2020 2020 6177 6169  0 mojos.    awai
+00009450: 7420 636c 6965 6e74 2e63 7265 6174 655f  t client.create_
+00009460: 6e65 775f 6361 745f 616e 645f 7761 6c6c  new_cat_and_wall
+00009470: 6574 2875 696e 7436 3428 3130 3029 290a  et(uint64(100)).
+00009480: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
+00009490: 7574 5f61 7373 6572 7428 3230 2c20 636c  ut_assert(20, cl
+000094a0: 6965 6e74 2e67 6574 5f73 796e 6365 6429  ient.get_synced)
+000094b0: 0a0a 2020 2020 7265 7320 3d20 6177 6169  ..    res = awai
+000094c0: 7420 636c 6965 6e74 2e63 7265 6174 655f  t client.create_
+000094d0: 6e65 775f 6361 745f 616e 645f 7761 6c6c  new_cat_and_wall
+000094e0: 6574 2875 696e 7436 3428 3230 2929 0a20  et(uint64(20)). 
+000094f0: 2020 2061 7373 6572 7420 7265 735b 2273     assert res["s
+00009500: 7563 6365 7373 225d 0a20 2020 2063 6174  uccess"].    cat
+00009510: 5f30 5f69 6420 3d20 7265 735b 2277 616c  _0_id = res["wal
+00009520: 6c65 745f 6964 225d 0a20 2020 2061 7373  let_id"].    ass
+00009530: 6574 5f69 6420 3d20 6279 7465 7333 322e  et_id = bytes32.
+00009540: 6672 6f6d 6865 7828 7265 735b 2261 7373  fromhex(res["ass
+00009550: 6574 5f69 6422 5d29 0a20 2020 2061 7373  et_id"]).    ass
+00009560: 6572 7420 6c65 6e28 6173 7365 745f 6964  ert len(asset_id
+00009570: 2920 3e20 300a 0a20 2020 2061 7761 6974  ) > 0..    await
+00009580: 2061 7373 6572 745f 7761 6c6c 6574 5f74   assert_wallet_t
+00009590: 7970 6573 2863 6c69 656e 742c 207b 5761  ypes(client, {Wa
+000095a0: 6c6c 6574 5479 7065 2e53 5441 4e44 4152  lletType.STANDAR
+000095b0: 445f 5741 4c4c 4554 3a20 312c 2057 616c  D_WALLET: 1, Wal
+000095c0: 6c65 7454 7970 652e 4341 543a 2032 7d29  letType.CAT: 2})
+000095d0: 0a20 2020 2061 7761 6974 2061 7373 6572  .    await asser
+000095e0: 745f 7761 6c6c 6574 5f74 7970 6573 2863  t_wallet_types(c
+000095f0: 6c69 656e 745f 322c 207b 5761 6c6c 6574  lient_2, {Wallet
+00009600: 5479 7065 2e53 5441 4e44 4152 445f 5741  Type.STANDARD_WA
+00009610: 4c4c 4554 3a20 317d 290a 0a20 2020 2062  LLET: 1})..    b
+00009620: 616c 5f30 203d 2061 7761 6974 2063 6c69  al_0 = await cli
+00009630: 656e 742e 6765 745f 7761 6c6c 6574 5f62  ent.get_wallet_b
+00009640: 616c 616e 6365 2863 6174 5f30 5f69 6429  alance(cat_0_id)
+00009650: 0a20 2020 2061 7373 6572 7420 6261 6c5f  .    assert bal_
+00009660: 305b 2263 6f6e 6669 726d 6564 5f77 616c  0["confirmed_wal
+00009670: 6c65 745f 6261 6c61 6e63 6522 5d20 3d3d  let_balance"] ==
+00009680: 2030 0a20 2020 2061 7373 6572 7420 6261   0.    assert ba
+00009690: 6c5f 305b 2270 656e 6469 6e67 5f63 6f69  l_0["pending_coi
+000096a0: 6e5f 7265 6d6f 7661 6c5f 636f 756e 7422  n_removal_count"
+000096b0: 5d20 3d3d 2031 0a20 2020 2063 6f6c 203d  ] == 1.    col =
+000096c0: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
+000096d0: 745f 6361 745f 6173 7365 745f 6964 2863  t_cat_asset_id(c
+000096e0: 6174 5f30 5f69 6429 0a20 2020 2061 7373  at_0_id).    ass
+000096f0: 6572 7420 636f 6c20 3d3d 2061 7373 6574  ert col == asset
+00009700: 5f69 640a 2020 2020 6173 7365 7274 2028  _id.    assert (
+00009710: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
+00009720: 5f63 6174 5f6e 616d 6528 6361 745f 305f  _cat_name(cat_0_
+00009730: 6964 2929 203d 3d20 4341 5457 616c 6c65  id)) == CATWalle
+00009740: 742e 6465 6661 756c 745f 7761 6c6c 6574  t.default_wallet
+00009750: 5f6e 616d 655f 666f 725f 756e 6b6e 6f77  _name_for_unknow
+00009760: 6e5f 6361 7428 6173 7365 745f 6964 2e68  n_cat(asset_id.h
+00009770: 6578 2829 290a 2020 2020 6177 6169 7420  ex()).    await 
+00009780: 636c 6965 6e74 2e73 6574 5f63 6174 5f6e  client.set_cat_n
+00009790: 616d 6528 6361 745f 305f 6964 2c20 224d  ame(cat_0_id, "M
+000097a0: 7920 6361 7422 290a 2020 2020 6173 7365  y cat").    asse
+000097b0: 7274 2028 6177 6169 7420 636c 6965 6e74  rt (await client
+000097c0: 2e67 6574 5f63 6174 5f6e 616d 6528 6361  .get_cat_name(ca
+000097d0: 745f 305f 6964 2929 203d 3d20 224d 7920  t_0_id)) == "My 
+000097e0: 6361 7422 0a20 2020 2072 6573 756c 7420  cat".    result 
+000097f0: 3d20 6177 6169 7420 636c 6965 6e74 2e63  = await client.c
+00009800: 6174 5f61 7373 6574 5f69 645f 746f 5f6e  at_asset_id_to_n
+00009810: 616d 6528 636f 6c29 0a20 2020 2061 7373  ame(col).    ass
+00009820: 6572 7420 7265 7375 6c74 2069 7320 6e6f  ert result is no
+00009830: 7420 4e6f 6e65 0a20 2020 2077 6964 2c20  t None.    wid, 
+00009840: 6e61 6d65 203d 2072 6573 756c 740a 2020  name = result.  
+00009850: 2020 6173 7365 7274 2077 6964 203d 3d20    assert wid == 
+00009860: 6361 745f 305f 6964 0a20 2020 2061 7373  cat_0_id.    ass
+00009870: 6572 7420 6e61 6d65 203d 3d20 224d 7920  ert name == "My 
+00009880: 6361 7422 0a20 2020 2072 6573 756c 7420  cat".    result 
+00009890: 3d20 6177 6169 7420 636c 6965 6e74 2e63  = await client.c
+000098a0: 6174 5f61 7373 6574 5f69 645f 746f 5f6e  at_asset_id_to_n
+000098b0: 616d 6528 6279 7465 7333 3228 5b30 5d20  ame(bytes32([0] 
+000098c0: 2a20 3332 2929 0a20 2020 2061 7373 6572  * 32)).    asser
+000098d0: 7420 7265 7375 6c74 2069 7320 4e6f 6e65  t result is None
+000098e0: 0a20 2020 2076 6572 6966 6965 645f 6173  .    verified_as
+000098f0: 7365 745f 6964 203d 206e 6578 7428 6974  set_id = next(it
+00009900: 6572 2844 4546 4155 4c54 5f43 4154 532e  er(DEFAULT_CATS.
+00009910: 6974 656d 7328 2929 295b 315d 5b22 6173  items()))[1]["as
+00009920: 7365 745f 6964 225d 0a20 2020 2072 6573  set_id"].    res
+00009930: 756c 7420 3d20 6177 6169 7420 636c 6965  ult = await clie
+00009940: 6e74 2e63 6174 5f61 7373 6574 5f69 645f  nt.cat_asset_id_
+00009950: 746f 5f6e 616d 6528 6279 7465 7333 322e  to_name(bytes32.
+00009960: 6672 6f6d 5f68 6578 7374 7228 7665 7269  from_hexstr(veri
+00009970: 6669 6564 5f61 7373 6574 5f69 6429 290a  fied_asset_id)).
+00009980: 2020 2020 6173 7365 7274 2072 6573 756c      assert resul
+00009990: 7420 6973 206e 6f74 204e 6f6e 650a 2020  t is not None.  
+000099a0: 2020 7368 6f75 6c64 5f62 655f 6e6f 6e65    should_be_none
+000099b0: 2c20 6e61 6d65 203d 2072 6573 756c 740a  , name = result.
+000099c0: 2020 2020 6173 7365 7274 2073 686f 756c      assert shoul
+000099d0: 645f 6265 5f6e 6f6e 6520 6973 204e 6f6e  d_be_none is Non
+000099e0: 650a 2020 2020 6173 7365 7274 206e 616d  e.    assert nam
+000099f0: 6520 3d3d 206e 6578 7428 6974 6572 2844  e == next(iter(D
+00009a00: 4546 4155 4c54 5f43 4154 532e 6974 656d  EFAULT_CATS.item
+00009a10: 7328 2929 295b 315d 5b22 6e61 6d65 225d  s()))[1]["name"]
+00009a20: 0a0a 2020 2020 2320 6d61 6b65 2073 7572  ..    # make sur
+00009a30: 6520 7370 656e 6420 6973 2069 6e20 6d65  e spend is in me
+00009a40: 6d70 6f6f 6c20 6265 666f 7265 2066 6172  mpool before far
+00009a50: 6d69 6e67 2074 7820 626c 6f63 6b0a 2020  ming tx block.  
+00009a60: 2020 6177 6169 7420 7469 6d65 5f6f 7574    await time_out
+00009a70: 5f61 7373 6572 7428 352c 2063 6865 636b  _assert(5, check
+00009a80: 5f6d 656d 706f 6f6c 5f73 7065 6e64 5f63  _mempool_spend_c
+00009a90: 6f75 6e74 2c20 5472 7565 2c20 6675 6c6c  ount, True, full
+00009aa0: 5f6e 6f64 655f 6170 692c 2032 290a 2020  _node_api, 2).  
+00009ab0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00009ac0: 2835 293a 0a20 2020 2020 2020 2069 6620  (5):.        if 
+00009ad0: 6368 6563 6b5f 6d65 6d70 6f6f 6c5f 7370  check_mempool_sp
+00009ae0: 656e 645f 636f 756e 7428 6675 6c6c 5f6e  end_count(full_n
+00009af0: 6f64 655f 6170 692c 2030 293a 0a20 2020  ode_api, 0):.   
+00009b00: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+00009b10: 2020 2020 2020 2061 7761 6974 2066 6172         await far
+00009b20: 6d5f 7472 616e 7361 6374 696f 6e5f 626c  m_transaction_bl
+00009b30: 6f63 6b28 6675 6c6c 5f6e 6f64 655f 6170  ock(full_node_ap
+00009b40: 692c 2077 616c 6c65 745f 6e6f 6465 290a  i, wallet_node).
+00009b50: 0a20 2020 2023 2063 6865 636b 2074 6861  .    # check tha
+00009b60: 7420 7765 2066 6172 6d65 6420 7468 6520  t we farmed the 
+00009b70: 7472 616e 7361 6374 696f 6e0a 2020 2020  transaction.    
+00009b80: 6173 7365 7274 2063 6865 636b 5f6d 656d  assert check_mem
+00009b90: 706f 6f6c 5f73 7065 6e64 5f63 6f75 6e74  pool_spend_count
+00009ba0: 2866 756c 6c5f 6e6f 6465 5f61 7069 2c20  (full_node_api, 
+00009bb0: 3029 0a20 2020 2061 7761 6974 2066 756c  0).    await ful
+00009bc0: 6c5f 6e6f 6465 5f61 7069 2e77 6169 745f  l_node_api.wait_
+00009bd0: 666f 725f 7761 6c6c 6574 5f73 796e 6365  for_wallet_synce
+00009be0: 6428 7761 6c6c 6574 5f6e 6f64 653d 7761  d(wallet_node=wa
+00009bf0: 6c6c 6574 5f6e 6f64 652c 2074 696d 656f  llet_node, timeo
+00009c00: 7574 3d35 290a 0a20 2020 2061 7761 6974  ut=5)..    await
+00009c10: 2074 696d 655f 6f75 745f 6173 7365 7274   time_out_assert
+00009c20: 2835 2c20 6765 745f 636f 6e66 6972 6d65  (5, get_confirme
+00009c30: 645f 6261 6c61 6e63 652c 2032 302c 2063  d_balance, 20, c
+00009c40: 6c69 656e 742c 2063 6174 5f30 5f69 6429  lient, cat_0_id)
+00009c50: 0a20 2020 2062 616c 5f30 203d 2061 7761  .    bal_0 = awa
+00009c60: 6974 2063 6c69 656e 742e 6765 745f 7761  it client.get_wa
+00009c70: 6c6c 6574 5f62 616c 616e 6365 2863 6174  llet_balance(cat
+00009c80: 5f30 5f69 6429 0a20 2020 2061 7373 6572  _0_id).    asser
+00009c90: 7420 6261 6c5f 305b 2270 656e 6469 6e67  t bal_0["pending
+00009ca0: 5f63 6f69 6e5f 7265 6d6f 7661 6c5f 636f  _coin_removal_co
+00009cb0: 756e 7422 5d20 3d3d 2030 0a20 2020 2061  unt"] == 0.    a
+00009cc0: 7373 6572 7420 6261 6c5f 305b 2275 6e73  ssert bal_0["uns
+00009cd0: 7065 6e74 5f63 6f69 6e5f 636f 756e 7422  pent_coin_count"
+00009ce0: 5d20 3d3d 2031 0a0a 2020 2020 2320 4372  ] == 1..    # Cr
+00009cf0: 6561 7465 7320 6120 7365 636f 6e64 2077  eates a second w
+00009d00: 616c 6c65 7420 7769 7468 2074 6865 2073  allet with the s
+00009d10: 616d 6520 4341 540a 2020 2020 7265 7320  ame CAT.    res 
+00009d20: 3d20 6177 6169 7420 636c 6965 6e74 5f32  = await client_2
+00009d30: 2e63 7265 6174 655f 7761 6c6c 6574 5f66  .create_wallet_f
+00009d40: 6f72 5f65 7869 7374 696e 675f 6361 7428  or_existing_cat(
+00009d50: 6173 7365 745f 6964 290a 2020 2020 6173  asset_id).    as
+00009d60: 7365 7274 2072 6573 5b22 7375 6363 6573  sert res["succes
+00009d70: 7322 5d0a 2020 2020 6361 745f 315f 6964  s"].    cat_1_id
+00009d80: 203d 2072 6573 5b22 7761 6c6c 6574 5f69   = res["wallet_i
+00009d90: 6422 5d0a 2020 2020 6361 745f 315f 6173  d"].    cat_1_as
+00009da0: 7365 745f 6964 203d 2062 7974 6573 2e66  set_id = bytes.f
+00009db0: 726f 6d68 6578 2872 6573 5b22 6173 7365  romhex(res["asse
+00009dc0: 745f 6964 225d 290a 2020 2020 6173 7365  t_id"]).    asse
+00009dd0: 7274 2063 6174 5f31 5f61 7373 6574 5f69  rt cat_1_asset_i
+00009de0: 6420 3d3d 2061 7373 6574 5f69 640a 0a20  d == asset_id.. 
+00009df0: 2020 2061 7761 6974 2061 7373 6572 745f     await assert_
+00009e00: 7761 6c6c 6574 5f74 7970 6573 2863 6c69  wallet_types(cli
+00009e10: 656e 742c 207b 5761 6c6c 6574 5479 7065  ent, {WalletType
+00009e20: 2e53 5441 4e44 4152 445f 5741 4c4c 4554  .STANDARD_WALLET
+00009e30: 3a20 312c 2057 616c 6c65 7454 7970 652e  : 1, WalletType.
+00009e40: 4341 543a 2032 7d29 0a20 2020 2061 7761  CAT: 2}).    awa
+00009e50: 6974 2061 7373 6572 745f 7761 6c6c 6574  it assert_wallet
+00009e60: 5f74 7970 6573 2863 6c69 656e 745f 322c  _types(client_2,
+00009e70: 207b 5761 6c6c 6574 5479 7065 2e53 5441   {WalletType.STA
+00009e80: 4e44 4152 445f 5741 4c4c 4554 3a20 312c  NDARD_WALLET: 1,
+00009e90: 2057 616c 6c65 7454 7970 652e 4341 543a   WalletType.CAT:
+00009ea0: 2031 7d29 0a0a 2020 2020 6177 6169 7420   1})..    await 
+00009eb0: 6661 726d 5f74 7261 6e73 6163 7469 6f6e  farm_transaction
+00009ec0: 5f62 6c6f 636b 2866 756c 6c5f 6e6f 6465  _block(full_node
+00009ed0: 5f61 7069 2c20 7761 6c6c 6574 5f6e 6f64  _api, wallet_nod
+00009ee0: 6529 0a0a 2020 2020 6261 6c5f 3120 3d20  e)..    bal_1 = 
+00009ef0: 6177 6169 7420 636c 6965 6e74 5f32 2e67  await client_2.g
+00009f00: 6574 5f77 616c 6c65 745f 6261 6c61 6e63  et_wallet_balanc
+00009f10: 6528 6361 745f 315f 6964 290a 2020 2020  e(cat_1_id).    
+00009f20: 6173 7365 7274 2062 616c 5f31 5b22 636f  assert bal_1["co
+00009f30: 6e66 6972 6d65 645f 7761 6c6c 6574 5f62  nfirmed_wallet_b
+00009f40: 616c 616e 6365 225d 203d 3d20 300a 0a20  alance"] == 0.. 
+00009f50: 2020 2061 6464 725f 3020 3d20 6177 6169     addr_0 = awai
+00009f60: 7420 636c 6965 6e74 2e67 6574 5f6e 6578  t client.get_nex
+00009f70: 745f 6164 6472 6573 7328 6361 745f 305f  t_address(cat_0_
+00009f80: 6964 2c20 4661 6c73 6529 0a20 2020 2061  id, False).    a
+00009f90: 6464 725f 3120 3d20 6177 6169 7420 636c  ddr_1 = await cl
+00009fa0: 6965 6e74 5f32 2e67 6574 5f6e 6578 745f  ient_2.get_next_
+00009fb0: 6164 6472 6573 7328 6361 745f 315f 6964  address(cat_1_id
+00009fc0: 2c20 4661 6c73 6529 0a0a 2020 2020 6173  , False)..    as
+00009fd0: 7365 7274 2061 6464 725f 3020 213d 2061  sert addr_0 != a
+00009fe0: 6464 725f 310a 0a20 2020 2023 2054 6573  ddr_1..    # Tes
+00009ff0: 7420 4341 5420 7370 656e 6420 7769 7468  t CAT spend with
+0000a000: 6f75 7420 6120 6665 650a 2020 2020 7769  out a fee.    wi
+0000a010: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000a020: 2856 616c 7565 4572 726f 7229 3a0a 2020  (ValueError):.  
+0000a030: 2020 2020 2020 6177 6169 7420 636c 6965        await clie
+0000a040: 6e74 2e63 6174 5f73 7065 6e64 280a 2020  nt.cat_spend(.  
+0000a050: 2020 2020 2020 2020 2020 6361 745f 305f            cat_0_
+0000a060: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
+0000a070: 7569 6e74 3634 2834 292c 0a20 2020 2020  uint64(4),.     
+0000a080: 2020 2020 2020 2061 6464 725f 312c 0a20         addr_1,. 
+0000a090: 2020 2020 2020 2020 2020 2075 696e 7436             uint6
+0000a0a0: 3428 3029 2c0a 2020 2020 2020 2020 2020  4(0),.          
+0000a0b0: 2020 5b22 7468 6520 6361 7420 6d65 6d6f    ["the cat memo
+0000a0c0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+0000a0d0: 6578 636c 7564 6564 5f61 6d6f 756e 7473  excluded_amounts
+0000a0e0: 3d5b 7569 6e74 3634 2832 3029 5d2c 0a20  =[uint64(20)],. 
+0000a0f0: 2020 2020 2020 2020 2020 2065 7863 6c75             exclu
+0000a100: 6465 645f 636f 696e 5f69 6473 3d5b 6279  ded_coin_ids=[by
+0000a110: 7465 7333 3228 5b30 5d20 2a20 3332 292e  tes32([0] * 32).
+0000a120: 6865 7828 295d 2c0a 2020 2020 2020 2020  hex()],.        
+0000a130: 290a 2020 2020 7478 5f72 6573 203d 2061  ).    tx_res = a
+0000a140: 7761 6974 2063 6c69 656e 742e 6361 745f  wait client.cat_
+0000a150: 7370 656e 6428 6361 745f 305f 6964 2c20  spend(cat_0_id, 
+0000a160: 7569 6e74 3634 2834 292c 2061 6464 725f  uint64(4), addr_
+0000a170: 312c 2075 696e 7436 3428 3029 2c20 5b22  1, uint64(0), ["
+0000a180: 7468 6520 6361 7420 6d65 6d6f 225d 290a  the cat memo"]).
+0000a190: 2020 2020 6173 7365 7274 2074 785f 7265      assert tx_re
+0000a1a0: 732e 7761 6c6c 6574 5f69 6420 3d3d 2063  s.wallet_id == c
+0000a1b0: 6174 5f30 5f69 640a 2020 2020 7370 656e  at_0_id.    spen
+0000a1c0: 645f 6275 6e64 6c65 203d 2074 785f 7265  d_bundle = tx_re
+0000a1d0: 732e 7370 656e 645f 6275 6e64 6c65 0a20  s.spend_bundle. 
+0000a1e0: 2020 2061 7373 6572 7420 7370 656e 645f     assert spend_
+0000a1f0: 6275 6e64 6c65 2069 7320 6e6f 7420 4e6f  bundle is not No
+0000a200: 6e65 0a20 2020 2061 7373 6572 7420 756e  ne.    assert un
+0000a210: 6375 7272 795f 7075 7a7a 6c65 2873 7065  curry_puzzle(spe
+0000a220: 6e64 5f62 756e 646c 652e 636f 696e 5f73  nd_bundle.coin_s
+0000a230: 7065 6e64 735b 305d 2e70 757a 7a6c 655f  pends[0].puzzle_
+0000a240: 7265 7665 616c 2e74 6f5f 7072 6f67 7261  reveal.to_progra
+0000a250: 6d28 2929 2e6d 6f64 203d 3d20 4341 545f  m()).mod == CAT_
+0000a260: 4d4f 440a 2020 2020 6177 6169 7420 6661  MOD.    await fa
+0000a270: 726d 5f74 7261 6e73 6163 7469 6f6e 2866  rm_transaction(f
+0000a280: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
+0000a290: 6c6c 6574 5f6e 6f64 652c 2073 7065 6e64  llet_node, spend
+0000a2a0: 5f62 756e 646c 6529 0a0a 2020 2020 6177  _bundle)..    aw
+0000a2b0: 6169 7420 6661 726d 5f74 7261 6e73 6163  ait farm_transac
+0000a2c0: 7469 6f6e 5f62 6c6f 636b 2866 756c 6c5f  tion_block(full_
+0000a2d0: 6e6f 6465 5f61 7069 2c20 7761 6c6c 6574  node_api, wallet
+0000a2e0: 5f6e 6f64 6529 0a0a 2020 2020 2320 5465  _node)..    # Te
+0000a2f0: 7374 2043 4154 2073 7065 6e64 2077 6974  st CAT spend wit
+0000a300: 6820 6120 6665 650a 2020 2020 7478 5f72  h a fee.    tx_r
+0000a310: 6573 203d 2061 7761 6974 2063 6c69 656e  es = await clien
+0000a320: 742e 6361 745f 7370 656e 6428 6361 745f  t.cat_spend(cat_
+0000a330: 305f 6964 2c20 7569 6e74 3634 2831 292c  0_id, uint64(1),
+0000a340: 2061 6464 725f 312c 2075 696e 7436 3428   addr_1, uint64(
+0000a350: 355f 3030 305f 3030 3029 2c20 5b22 7468  5_000_000), ["th
+0000a360: 6520 6361 7420 6d65 6d6f 225d 290a 2020  e cat memo"]).  
+0000a370: 2020 6173 7365 7274 2074 785f 7265 732e    assert tx_res.
+0000a380: 7761 6c6c 6574 5f69 6420 3d3d 2063 6174  wallet_id == cat
+0000a390: 5f30 5f69 640a 2020 2020 7370 656e 645f  _0_id.    spend_
+0000a3a0: 6275 6e64 6c65 203d 2074 785f 7265 732e  bundle = tx_res.
+0000a3b0: 7370 656e 645f 6275 6e64 6c65 0a20 2020  spend_bundle.   
+0000a3c0: 2061 7373 6572 7420 7370 656e 645f 6275   assert spend_bu
+0000a3d0: 6e64 6c65 2069 7320 6e6f 7420 4e6f 6e65  ndle is not None
+0000a3e0: 0a20 2020 2061 7373 6572 7420 756e 6375  .    assert uncu
+0000a3f0: 7272 795f 7075 7a7a 6c65 2873 7065 6e64  rry_puzzle(spend
+0000a400: 5f62 756e 646c 652e 636f 696e 5f73 7065  _bundle.coin_spe
+0000a410: 6e64 735b 305d 2e70 757a 7a6c 655f 7265  nds[0].puzzle_re
+0000a420: 7665 616c 2e74 6f5f 7072 6f67 7261 6d28  veal.to_program(
+0000a430: 2929 2e6d 6f64 203d 3d20 4341 545f 4d4f  )).mod == CAT_MO
+0000a440: 440a 2020 2020 6177 6169 7420 6661 726d  D.    await farm
+0000a450: 5f74 7261 6e73 6163 7469 6f6e 2866 756c  _transaction(ful
+0000a460: 6c5f 6e6f 6465 5f61 7069 2c20 7761 6c6c  l_node_api, wall
+0000a470: 6574 5f6e 6f64 652c 2073 7065 6e64 5f62  et_node, spend_b
+0000a480: 756e 646c 6529 0a0a 2020 2020 2320 5465  undle)..    # Te
+0000a490: 7374 2043 4154 2073 7065 6e64 2077 6974  st CAT spend wit
+0000a4a0: 6820 6120 6665 6520 616e 6420 7072 652d  h a fee and pre-
+0000a4b0: 7370 6563 6966 6965 6420 7265 6d6f 7661  specified remova
+0000a4c0: 6c73 202f 2063 6f69 6e73 0a20 2020 2072  ls / coins.    r
+0000a4d0: 656d 6f76 616c 7320 3d20 6177 6169 7420  emovals = await 
+0000a4e0: 636c 6965 6e74 2e73 656c 6563 745f 636f  client.select_co
+0000a4f0: 696e 7328 616d 6f75 6e74 3d75 696e 7436  ins(amount=uint6
+0000a500: 3428 3229 2c20 7761 6c6c 6574 5f69 643d  4(2), wallet_id=
+0000a510: 6361 745f 305f 6964 290a 2020 2020 7478  cat_0_id).    tx
+0000a520: 5f72 6573 203d 2061 7761 6974 2063 6c69  _res = await cli
+0000a530: 656e 742e 6361 745f 7370 656e 6428 6361  ent.cat_spend(ca
+0000a540: 745f 305f 6964 2c20 7569 6e74 3634 2831  t_0_id, uint64(1
+0000a550: 292c 2061 6464 725f 312c 2075 696e 7436  ), addr_1, uint6
+0000a560: 3428 355f 3030 305f 3030 3029 2c20 5b22  4(5_000_000), ["
+0000a570: 7468 6520 6361 7420 6d65 6d6f 225d 2c20  the cat memo"], 
+0000a580: 7265 6d6f 7661 6c73 3d72 656d 6f76 616c  removals=removal
+0000a590: 7329 0a20 2020 2061 7373 6572 7420 7478  s).    assert tx
+0000a5a0: 5f72 6573 2e77 616c 6c65 745f 6964 203d  _res.wallet_id =
+0000a5b0: 3d20 6361 745f 305f 6964 0a20 2020 2073  = cat_0_id.    s
+0000a5c0: 7065 6e64 5f62 756e 646c 6520 3d20 7478  pend_bundle = tx
+0000a5d0: 5f72 6573 2e73 7065 6e64 5f62 756e 646c  _res.spend_bundl
+0000a5e0: 650a 2020 2020 6173 7365 7274 2073 7065  e.    assert spe
+0000a5f0: 6e64 5f62 756e 646c 6520 6973 206e 6f74  nd_bundle is not
+0000a600: 204e 6f6e 650a 2020 2020 6173 7365 7274   None.    assert
+0000a610: 2072 656d 6f76 616c 735b 305d 2069 6e20   removals[0] in 
+0000a620: 7478 5f72 6573 2e72 656d 6f76 616c 730a  tx_res.removals.
+0000a630: 2020 2020 6173 7365 7274 2075 6e63 7572      assert uncur
+0000a640: 7279 5f70 757a 7a6c 6528 7370 656e 645f  ry_puzzle(spend_
+0000a650: 6275 6e64 6c65 2e63 6f69 6e5f 7370 656e  bundle.coin_spen
+0000a660: 6473 5b30 5d2e 7075 7a7a 6c65 5f72 6576  ds[0].puzzle_rev
+0000a670: 6561 6c2e 746f 5f70 726f 6772 616d 2829  eal.to_program()
+0000a680: 292e 6d6f 6420 3d3d 2043 4154 5f4d 4f44  ).mod == CAT_MOD
+0000a690: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
+0000a6a0: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
+0000a6b0: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
+0000a6c0: 745f 6e6f 6465 2c20 7370 656e 645f 6275  t_node, spend_bu
+0000a6d0: 6e64 6c65 290a 0a20 2020 2023 2054 6573  ndle)..    # Tes
+0000a6e0: 7420 756e 6163 6b6e 6f77 6c65 6467 6564  t unacknowledged
+0000a6f0: 2043 4154 0a20 2020 2061 7761 6974 2077   CAT.    await w
+0000a700: 616c 6c65 745f 6e6f 6465 2e77 616c 6c65  allet_node.walle
+0000a710: 745f 7374 6174 655f 6d61 6e61 6765 722e  t_state_manager.
+0000a720: 696e 7465 7265 7374 6564 5f73 746f 7265  interested_store
+0000a730: 2e61 6464 5f75 6e61 636b 6e6f 776c 6564  .add_unacknowled
+0000a740: 6765 645f 746f 6b65 6e28 0a20 2020 2020  ged_token(.     
+0000a750: 2020 2061 7373 6574 5f69 642c 2022 556e     asset_id, "Un
+0000a760: 6b6e 6f77 6e22 2c20 7569 6e74 3332 2831  known", uint32(1
+0000a770: 3030 3030 292c 2062 7974 6573 3332 2862  0000), bytes32(b
+0000a780: 225c 3030 2220 2a20 3332 290a 2020 2020  "\00" * 32).    
+0000a790: 290a 2020 2020 6361 7473 203d 2061 7761  ).    cats = awa
+0000a7a0: 6974 2063 6c69 656e 742e 6765 745f 7374  it client.get_st
+0000a7b0: 7261 795f 6361 7473 2829 0a20 2020 2061  ray_cats().    a
+0000a7c0: 7373 6572 7420 6c65 6e28 6361 7473 2920  ssert len(cats) 
+0000a7d0: 3d3d 2031 0a0a 2020 2020 6177 6169 7420  == 1..    await 
+0000a7e0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
+0000a7f0: 3230 2c20 6765 745f 636f 6e66 6972 6d65  20, get_confirme
+0000a800: 645f 6261 6c61 6e63 652c 2031 342c 2063  d_balance, 14, c
+0000a810: 6c69 656e 742c 2063 6174 5f30 5f69 6429  lient, cat_0_id)
+0000a820: 0a20 2020 2061 7761 6974 2074 696d 655f  .    await time_
+0000a830: 6f75 745f 6173 7365 7274 2832 302c 2067  out_assert(20, g
+0000a840: 6574 5f63 6f6e 6669 726d 6564 5f62 616c  et_confirmed_bal
+0000a850: 616e 6365 2c20 362c 2063 6c69 656e 745f  ance, 6, client_
+0000a860: 322c 2063 6174 5f31 5f69 6429 0a0a 2020  2, cat_1_id)..  
+0000a870: 2020 2320 5465 7374 2043 4154 2063 6f69    # Test CAT coi
+0000a880: 6e20 7365 6c65 6374 696f 6e0a 2020 2020  n selection.    
+0000a890: 7365 6c65 6374 6564 5f63 6f69 6e73 203d  selected_coins =
+0000a8a0: 2061 7761 6974 2063 6c69 656e 742e 7365   await client.se
+0000a8b0: 6c65 6374 5f63 6f69 6e73 2861 6d6f 756e  lect_coins(amoun
+0000a8c0: 743d 312c 2077 616c 6c65 745f 6964 3d63  t=1, wallet_id=c
+0000a8d0: 6174 5f30 5f69 6429 0a20 2020 2061 7373  at_0_id).    ass
+0000a8e0: 6572 7420 6c65 6e28 7365 6c65 6374 6564  ert len(selected
+0000a8f0: 5f63 6f69 6e73 2920 3e20 300a 0a0a 4070  _coins) > 0...@p
+0000a900: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+0000a910: 696f 0a61 7379 6e63 2064 6566 2074 6573  io.async def tes
+0000a920: 745f 6f66 6665 725f 656e 6470 6f69 6e74  t_offer_endpoint
+0000a930: 7328 7761 6c6c 6574 5f72 7063 5f65 6e76  s(wallet_rpc_env
+0000a940: 6972 6f6e 6d65 6e74 3a20 5761 6c6c 6574  ironment: Wallet
+0000a950: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+0000a960: 6e74 293a 0a20 2020 2065 6e76 3a20 5761  nt):.    env: Wa
+0000a970: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
+0000a980: 6f6e 6d65 6e74 203d 2077 616c 6c65 745f  onment = wallet_
+0000a990: 7270 635f 656e 7669 726f 6e6d 656e 740a  rpc_environment.
+0000a9a0: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
+0000a9b0: 3a20 5761 6c6c 6574 4e6f 6465 203d 2065  : WalletNode = e
+0000a9c0: 6e76 2e77 616c 6c65 745f 312e 6e6f 6465  nv.wallet_1.node
+0000a9d0: 0a20 2020 2077 616c 6c65 745f 315f 7270  .    wallet_1_rp
+0000a9e0: 633a 2057 616c 6c65 7452 7063 436c 6965  c: WalletRpcClie
+0000a9f0: 6e74 203d 2065 6e76 2e77 616c 6c65 745f  nt = env.wallet_
+0000aa00: 312e 7270 635f 636c 6965 6e74 0a20 2020  1.rpc_client.   
+0000aa10: 2077 616c 6c65 745f 325f 7270 633a 2057   wallet_2_rpc: W
+0000aa20: 616c 6c65 7452 7063 436c 6965 6e74 203d  alletRpcClient =
+0000aa30: 2065 6e76 2e77 616c 6c65 745f 322e 7270   env.wallet_2.rp
+0000aa40: 635f 636c 6965 6e74 0a20 2020 2066 756c  c_client.    ful
+0000aa50: 6c5f 6e6f 6465 5f61 7069 3a20 4675 6c6c  l_node_api: Full
+0000aa60: 4e6f 6465 5369 6d75 6c61 746f 7220 3d20  NodeSimulator = 
+0000aa70: 656e 762e 6675 6c6c 5f6e 6f64 652e 6170  env.full_node.ap
+0000aa80: 690a 0a20 2020 2061 7761 6974 2067 656e  i..    await gen
+0000aa90: 6572 6174 655f 6675 6e64 7328 6675 6c6c  erate_funds(full
+0000aaa0: 5f6e 6f64 655f 6170 692c 2065 6e76 2e77  _node_api, env.w
+0000aab0: 616c 6c65 745f 312c 2031 290a 2020 2020  allet_1, 1).    
+0000aac0: 6177 6169 7420 6765 6e65 7261 7465 5f66  await generate_f
+0000aad0: 756e 6473 2866 756c 6c5f 6e6f 6465 5f61  unds(full_node_a
+0000aae0: 7069 2c20 656e 762e 7761 6c6c 6574 5f32  pi, env.wallet_2
+0000aaf0: 2c20 3129 0a0a 2020 2020 2320 4372 6561  , 1)..    # Crea
+0000ab00: 7465 7320 6120 4341 5420 7761 6c6c 6574  tes a CAT wallet
+0000ab10: 2077 6974 6820 3230 206d 6f6a 6f73 0a20   with 20 mojos. 
+0000ab20: 2020 2072 6573 203d 2061 7761 6974 2077     res = await w
+0000ab30: 616c 6c65 745f 315f 7270 632e 6372 6561  allet_1_rpc.crea
+0000ab40: 7465 5f6e 6577 5f63 6174 5f61 6e64 5f77  te_new_cat_and_w
+0000ab50: 616c 6c65 7428 7569 6e74 3634 2832 3029  allet(uint64(20)
+0000ab60: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
+0000ab70: 5b22 7375 6363 6573 7322 5d0a 2020 2020  ["success"].    
+0000ab80: 6361 745f 7761 6c6c 6574 5f69 6420 3d20  cat_wallet_id = 
+0000ab90: 7265 735b 2277 616c 6c65 745f 6964 225d  res["wallet_id"]
+0000aba0: 0a20 2020 2063 6174 5f61 7373 6574 5f69  .    cat_asset_i
+0000abb0: 6420 3d20 6279 7465 7333 322e 6672 6f6d  d = bytes32.from
+0000abc0: 6865 7828 7265 735b 2261 7373 6574 5f69  hex(res["asset_i
+0000abd0: 6422 5d29 0a20 2020 2061 7761 6974 2074  d"]).    await t
+0000abe0: 696d 655f 6f75 745f 6173 7365 7274 2835  ime_out_assert(5
+0000abf0: 2c20 6368 6563 6b5f 6d65 6d70 6f6f 6c5f  , check_mempool_
+0000ac00: 7370 656e 645f 636f 756e 742c 2054 7275  spend_count, Tru
+0000ac10: 652c 2066 756c 6c5f 6e6f 6465 5f61 7069  e, full_node_api
+0000ac20: 2c20 3129 0a20 2020 2061 7761 6974 2066  , 1).    await f
+0000ac30: 6172 6d5f 7472 616e 7361 6374 696f 6e5f  arm_transaction_
+0000ac40: 626c 6f63 6b28 6675 6c6c 5f6e 6f64 655f  block(full_node_
+0000ac50: 6170 692c 2077 616c 6c65 745f 6e6f 6465  api, wallet_node
+0000ac60: 290a 2020 2020 6177 6169 7420 6675 6c6c  ).    await full
+0000ac70: 5f6e 6f64 655f 6170 692e 7761 6974 5f66  _node_api.wait_f
+0000ac80: 6f72 5f77 616c 6c65 745f 7379 6e63 6564  or_wallet_synced
+0000ac90: 2877 616c 6c65 745f 6e6f 6465 3d77 616c  (wallet_node=wal
+0000aca0: 6c65 745f 6e6f 6465 2c20 7469 6d65 6f75  let_node, timeou
+0000acb0: 743d 3529 0a0a 2020 2020 6177 6169 7420  t=5)..    await 
+0000acc0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
+0000acd0: 352c 2067 6574 5f63 6f6e 6669 726d 6564  5, get_confirmed
+0000ace0: 5f62 616c 616e 6365 2c20 3230 2c20 7761  _balance, 20, wa
+0000acf0: 6c6c 6574 5f31 5f72 7063 2c20 6361 745f  llet_1_rpc, cat_
+0000ad00: 7761 6c6c 6574 5f69 6429 0a0a 2020 2020  wallet_id)..    
+0000ad10: 2320 4372 6561 7465 7320 6120 7761 6c6c  # Creates a wall
+0000ad20: 6574 2066 6f72 2074 6865 2073 616d 6520  et for the same 
+0000ad30: 4341 5420 6f6e 2077 616c 6c65 745f 3220  CAT on wallet_2 
+0000ad40: 616e 6420 7365 6e64 2034 2043 4154 2066  and send 4 CAT f
+0000ad50: 726f 6d20 7761 6c6c 6574 5f31 2074 6f20  rom wallet_1 to 
+0000ad60: 6974 0a20 2020 2061 7761 6974 2077 616c  it.    await wal
+0000ad70: 6c65 745f 325f 7270 632e 6372 6561 7465  let_2_rpc.create
+0000ad80: 5f77 616c 6c65 745f 666f 725f 6578 6973  _wallet_for_exis
+0000ad90: 7469 6e67 5f63 6174 2863 6174 5f61 7373  ting_cat(cat_ass
+0000ada0: 6574 5f69 6429 0a20 2020 2077 616c 6c65  et_id).    walle
+0000adb0: 745f 325f 6164 6472 6573 7320 3d20 6177  t_2_address = aw
+0000adc0: 6169 7420 7761 6c6c 6574 5f32 5f72 7063  ait wallet_2_rpc
+0000add0: 2e67 6574 5f6e 6578 745f 6164 6472 6573  .get_next_addres
+0000ade0: 7328 6361 745f 7761 6c6c 6574 5f69 642c  s(cat_wallet_id,
+0000adf0: 2046 616c 7365 290a 2020 2020 6164 6473   False).    adds
+0000ae00: 203d 205b 7b22 7075 7a7a 6c65 5f68 6173   = [{"puzzle_has
+0000ae10: 6822 3a20 6465 636f 6465 5f70 757a 7a6c  h": decode_puzzl
+0000ae20: 655f 6861 7368 2877 616c 6c65 745f 325f  e_hash(wallet_2_
+0000ae30: 6164 6472 6573 7329 2c20 2261 6d6f 756e  address), "amoun
+0000ae40: 7422 3a20 7569 6e74 3634 2834 292c 2022  t": uint64(4), "
+0000ae50: 6d65 6d6f 7322 3a20 5b22 7468 6520 6361  memos": ["the ca
+0000ae60: 7420 6d65 6d6f 225d 7d5d 0a20 2020 2074  t memo"]}].    t
+0000ae70: 785f 7265 7320 3d20 6177 6169 7420 7761  x_res = await wa
+0000ae80: 6c6c 6574 5f31 5f72 7063 2e73 656e 645f  llet_1_rpc.send_
+0000ae90: 7472 616e 7361 6374 696f 6e5f 6d75 6c74  transaction_mult
+0000aea0: 6928 6361 745f 7761 6c6c 6574 5f69 642c  i(cat_wallet_id,
+0000aeb0: 2061 6464 6974 696f 6e73 3d61 6464 732c   additions=adds,
+0000aec0: 2066 6565 3d75 696e 7436 3428 3029 290a   fee=uint64(0)).
+0000aed0: 2020 2020 7370 656e 645f 6275 6e64 6c65      spend_bundle
+0000aee0: 203d 2074 785f 7265 732e 7370 656e 645f   = tx_res.spend_
+0000aef0: 6275 6e64 6c65 0a20 2020 2061 7373 6572  bundle.    asser
+0000af00: 7420 7370 656e 645f 6275 6e64 6c65 2069  t spend_bundle i
+0000af10: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2061  s not None.    a
+0000af20: 7761 6974 2066 6172 6d5f 7472 616e 7361  wait farm_transa
+0000af30: 6374 696f 6e28 6675 6c6c 5f6e 6f64 655f  ction(full_node_
+0000af40: 6170 692c 2077 616c 6c65 745f 6e6f 6465  api, wallet_node
+0000af50: 2c20 7370 656e 645f 6275 6e64 6c65 290a  , spend_bundle).
+0000af60: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
+0000af70: 7574 5f61 7373 6572 7428 352c 2067 6574  ut_assert(5, get
+0000af80: 5f63 6f6e 6669 726d 6564 5f62 616c 616e  _confirmed_balan
+0000af90: 6365 2c20 342c 2077 616c 6c65 745f 325f  ce, 4, wallet_2_
+0000afa0: 7270 632c 2063 6174 5f77 616c 6c65 745f  rpc, cat_wallet_
+0000afb0: 6964 290a 2020 2020 7465 7374 5f63 7273  id).    test_crs
+0000afc0: 3a20 4c69 7374 5b43 6f69 6e52 6563 6f72  : List[CoinRecor
+0000afd0: 645d 203d 2061 7761 6974 2077 616c 6c65  d] = await walle
+0000afe0: 745f 315f 7270 632e 6765 745f 636f 696e  t_1_rpc.get_coin
+0000aff0: 5f72 6563 6f72 6473 5f62 795f 6e61 6d65  _records_by_name
+0000b000: 7328 0a20 2020 2020 2020 205b 612e 6e61  s(.        [a.na
+0000b010: 6d65 2829 2066 6f72 2061 2069 6e20 7370  me() for a in sp
+0000b020: 656e 645f 6275 6e64 6c65 2e61 6464 6974  end_bundle.addit
+0000b030: 696f 6e73 2829 2069 6620 612e 616d 6f75  ions() if a.amou
+0000b040: 6e74 2021 3d20 345d 0a20 2020 2029 0a20  nt != 4].    ). 
+0000b050: 2020 2066 6f72 2063 7220 696e 2074 6573     for cr in tes
+0000b060: 745f 6372 733a 0a20 2020 2020 2020 2061  t_crs:.        a
+0000b070: 7373 6572 7420 6372 2e63 6f69 6e20 696e  ssert cr.coin in
+0000b080: 2073 7065 6e64 5f62 756e 646c 652e 6164   spend_bundle.ad
+0000b090: 6469 7469 6f6e 7328 290a 2020 2020 7769  ditions().    wi
+0000b0a0: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000b0b0: 2856 616c 7565 4572 726f 7229 3a0a 2020  (ValueError):.  
+0000b0c0: 2020 2020 2020 6177 6169 7420 7761 6c6c        await wall
+0000b0d0: 6574 5f31 5f72 7063 2e67 6574 5f63 6f69  et_1_rpc.get_coi
+0000b0e0: 6e5f 7265 636f 7264 735f 6279 5f6e 616d  n_records_by_nam
+0000b0f0: 6573 285b 612e 6e61 6d65 2829 2066 6f72  es([a.name() for
+0000b100: 2061 2069 6e20 7370 656e 645f 6275 6e64   a in spend_bund
+0000b110: 6c65 2e61 6464 6974 696f 6e73 2829 2069  le.additions() i
+0000b120: 6620 612e 616d 6f75 6e74 203d 3d20 345d  f a.amount == 4]
+0000b130: 290a 2020 2020 2320 4372 6561 7465 2061  ).    # Create a
+0000b140: 6e20 6f66 6665 7220 6f66 2035 2063 6869  n offer of 5 chi
+0000b150: 6120 666f 7220 6f6e 6520 4341 540a 2020  a for one CAT.  
+0000b160: 2020 6f66 6665 722c 2074 7261 6465 5f72    offer, trade_r
+0000b170: 6563 6f72 6420 3d20 6177 6169 7420 7761  ecord = await wa
+0000b180: 6c6c 6574 5f31 5f72 7063 2e63 7265 6174  llet_1_rpc.creat
+0000b190: 655f 6f66 6665 725f 666f 725f 6964 7328  e_offer_for_ids(
+0000b1a0: 0a20 2020 2020 2020 207b 7569 6e74 3332  .        {uint32
+0000b1b0: 2831 293a 202d 352c 2063 6174 5f61 7373  (1): -5, cat_ass
+0000b1c0: 6574 5f69 642e 6865 7828 293a 2031 7d2c  et_id.hex(): 1},
+0000b1d0: 2076 616c 6964 6174 655f 6f6e 6c79 3d54   validate_only=T
+0000b1e0: 7275 650a 2020 2020 290a 2020 2020 616c  rue.    ).    al
+0000b1f0: 6c5f 6f66 6665 7273 203d 2061 7761 6974  l_offers = await
+0000b200: 2077 616c 6c65 745f 315f 7270 632e 6765   wallet_1_rpc.ge
+0000b210: 745f 616c 6c5f 6f66 6665 7273 2829 0a20  t_all_offers(). 
+0000b220: 2020 2061 7373 6572 7420 6c65 6e28 616c     assert len(al
+0000b230: 6c5f 6f66 6665 7273 2920 3d3d 2030 0a20  l_offers) == 0. 
+0000b240: 2020 2061 7373 6572 7420 6f66 6665 7220     assert offer 
+0000b250: 6973 204e 6f6e 650a 0a20 2020 2064 7269  is None..    dri
+0000b260: 7665 725f 6469 6374 3a20 4469 6374 5b73  ver_dict: Dict[s
+0000b270: 7472 2c20 416e 795d 203d 207b 6361 745f  tr, Any] = {cat_
+0000b280: 6173 7365 745f 6964 2e68 6578 2829 3a20  asset_id.hex(): 
+0000b290: 7b22 7479 7065 223a 2022 4341 5422 2c20  {"type": "CAT", 
+0000b2a0: 2274 6169 6c22 3a20 2230 7822 202b 2063  "tail": "0x" + c
+0000b2b0: 6174 5f61 7373 6574 5f69 642e 6865 7828  at_asset_id.hex(
+0000b2c0: 297d 7d0a 0a20 2020 206f 6666 6572 2c20  )}}..    offer, 
+0000b2d0: 7472 6164 655f 7265 636f 7264 203d 2061  trade_record = a
+0000b2e0: 7761 6974 2077 616c 6c65 745f 315f 7270  wait wallet_1_rp
+0000b2f0: 632e 6372 6561 7465 5f6f 6666 6572 5f66  c.create_offer_f
+0000b300: 6f72 5f69 6473 280a 2020 2020 2020 2020  or_ids(.        
+0000b310: 7b75 696e 7433 3228 3129 3a20 2d35 2c20  {uint32(1): -5, 
+0000b320: 6361 745f 6173 7365 745f 6964 2e68 6578  cat_asset_id.hex
+0000b330: 2829 3a20 317d 2c0a 2020 2020 2020 2020  (): 1},.        
+0000b340: 6472 6976 6572 5f64 6963 743d 6472 6976  driver_dict=driv
+0000b350: 6572 5f64 6963 742c 0a20 2020 2020 2020  er_dict,.       
+0000b360: 2066 6565 3d75 696e 7436 3428 3129 2c0a   fee=uint64(1),.
+0000b370: 2020 2020 290a 2020 2020 6173 7365 7274      ).    assert
+0000b380: 206f 6666 6572 2069 7320 6e6f 7420 4e6f   offer is not No
+0000b390: 6e65 0a0a 2020 2020 6964 2c20 7375 6d6d  ne..    id, summ
+0000b3a0: 6172 7920 3d20 6177 6169 7420 7761 6c6c  ary = await wall
+0000b3b0: 6574 5f31 5f72 7063 2e67 6574 5f6f 6666  et_1_rpc.get_off
+0000b3c0: 6572 5f73 756d 6d61 7279 286f 6666 6572  er_summary(offer
+0000b3d0: 290a 2020 2020 6173 7365 7274 2069 6420  ).    assert id 
+0000b3e0: 3d3d 206f 6666 6572 2e6e 616d 6528 290a  == offer.name().
+0000b3f0: 2020 2020 6964 2c20 6164 7661 6e63 6564      id, advanced
+0000b400: 5f73 756d 6d61 7279 203d 2061 7761 6974  _summary = await
+0000b410: 2077 616c 6c65 745f 315f 7270 632e 6765   wallet_1_rpc.ge
+0000b420: 745f 6f66 6665 725f 7375 6d6d 6172 7928  t_offer_summary(
+0000b430: 6f66 6665 722c 2061 6476 616e 6365 643d  offer, advanced=
+0000b440: 5472 7565 290a 2020 2020 6173 7365 7274  True).    assert
+0000b450: 2069 6420 3d3d 206f 6666 6572 2e6e 616d   id == offer.nam
+0000b460: 6528 290a 2020 2020 6173 7365 7274 2073  e().    assert s
+0000b470: 756d 6d61 7279 203d 3d20 7b22 6f66 6665  ummary == {"offe
+0000b480: 7265 6422 3a20 7b22 7863 6822 3a20 357d  red": {"xch": 5}
+0000b490: 2c20 2272 6571 7565 7374 6564 223a 207b  , "requested": {
+0000b4a0: 6361 745f 6173 7365 745f 6964 2e68 6578  cat_asset_id.hex
+0000b4b0: 2829 3a20 317d 2c20 2269 6e66 6f73 223a  (): 1}, "infos":
+0000b4c0: 2064 7269 7665 725f 6469 6374 2c20 2266   driver_dict, "f
+0000b4d0: 6565 7322 3a20 317d 0a20 2020 2061 7373  ees": 1}.    ass
+0000b4e0: 6572 7420 6164 7661 6e63 6564 5f73 756d  ert advanced_sum
+0000b4f0: 6d61 7279 203d 3d20 7375 6d6d 6172 790a  mary == summary.
+0000b500: 0a20 2020 2069 642c 2076 616c 6964 203d  .    id, valid =
+0000b510: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000b520: 7270 632e 6368 6563 6b5f 6f66 6665 725f  rpc.check_offer_
+0000b530: 7661 6c69 6469 7479 286f 6666 6572 290a  validity(offer).
+0000b540: 2020 2020 6173 7365 7274 2069 6420 3d3d      assert id ==
+0000b550: 206f 6666 6572 2e6e 616d 6528 290a 0a20   offer.name().. 
+0000b560: 2020 2061 6c6c 5f6f 6666 6572 7320 3d20     all_offers = 
+0000b570: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
+0000b580: 7063 2e67 6574 5f61 6c6c 5f6f 6666 6572  pc.get_all_offer
+0000b590: 7328 6669 6c65 5f63 6f6e 7465 6e74 733d  s(file_contents=
+0000b5a0: 5472 7565 290a 2020 2020 6173 7365 7274  True).    assert
+0000b5b0: 206c 656e 2861 6c6c 5f6f 6666 6572 7329   len(all_offers)
+0000b5c0: 203d 3d20 310a 2020 2020 6173 7365 7274   == 1.    assert
+0000b5d0: 2054 7261 6465 5374 6174 7573 2861 6c6c   TradeStatus(all
+0000b5e0: 5f6f 6666 6572 735b 305d 2e73 7461 7475  _offers[0].statu
+0000b5f0: 7329 203d 3d20 5472 6164 6553 7461 7475  s) == TradeStatu
+0000b600: 732e 5045 4e44 494e 475f 4143 4345 5054  s.PENDING_ACCEPT
+0000b610: 0a20 2020 2061 7373 6572 7420 616c 6c5f  .    assert all_
+0000b620: 6f66 6665 7273 5b30 5d2e 6f66 6665 7220  offers[0].offer 
+0000b630: 3d3d 2062 7974 6573 286f 6666 6572 290a  == bytes(offer).
+0000b640: 0a20 2020 2074 7261 6465 5f72 6563 6f72  .    trade_recor
+0000b650: 6420 3d20 6177 6169 7420 7761 6c6c 6574  d = await wallet
+0000b660: 5f32 5f72 7063 2e74 616b 655f 6f66 6665  _2_rpc.take_offe
+0000b670: 7228 6f66 6665 722c 2066 6565 3d75 696e  r(offer, fee=uin
+0000b680: 7436 3428 3129 290a 2020 2020 6173 7365  t64(1)).    asse
+0000b690: 7274 2054 7261 6465 5374 6174 7573 2874  rt TradeStatus(t
+0000b6a0: 7261 6465 5f72 6563 6f72 642e 7374 6174  rade_record.stat
+0000b6b0: 7573 2920 3d3d 2054 7261 6465 5374 6174  us) == TradeStat
+0000b6c0: 7573 2e50 454e 4449 4e47 5f43 4f4e 4649  us.PENDING_CONFI
+0000b6d0: 524d 0a0a 2020 2020 6177 6169 7420 7761  RM..    await wa
+0000b6e0: 6c6c 6574 5f31 5f72 7063 2e63 616e 6365  llet_1_rpc.cance
+0000b6f0: 6c5f 6f66 6665 7228 6f66 6665 722e 6e61  l_offer(offer.na
+0000b700: 6d65 2829 2c20 7365 6375 7265 3d46 616c  me(), secure=Fal
+0000b710: 7365 290a 0a20 2020 2074 7261 6465 5f72  se)..    trade_r
+0000b720: 6563 6f72 6420 3d20 6177 6169 7420 7761  ecord = await wa
+0000b730: 6c6c 6574 5f31 5f72 7063 2e67 6574 5f6f  llet_1_rpc.get_o
+0000b740: 6666 6572 286f 6666 6572 2e6e 616d 6528  ffer(offer.name(
+0000b750: 292c 2066 696c 655f 636f 6e74 656e 7473  ), file_contents
+0000b760: 3d54 7275 6529 0a20 2020 2061 7373 6572  =True).    asser
+0000b770: 7420 7472 6164 655f 7265 636f 7264 2e6f  t trade_record.o
+0000b780: 6666 6572 203d 3d20 6279 7465 7328 6f66  ffer == bytes(of
+0000b790: 6665 7229 0a20 2020 2061 7373 6572 7420  fer).    assert 
+0000b7a0: 5472 6164 6553 7461 7475 7328 7472 6164  TradeStatus(trad
+0000b7b0: 655f 7265 636f 7264 2e73 7461 7475 7329  e_record.status)
+0000b7c0: 203d 3d20 5472 6164 6553 7461 7475 732e   == TradeStatus.
+0000b7d0: 4341 4e43 454c 4c45 440a 0a20 2020 2061  CANCELLED..    a
+0000b7e0: 7761 6974 2077 616c 6c65 745f 315f 7270  wait wallet_1_rp
+0000b7f0: 632e 6361 6e63 656c 5f6f 6666 6572 286f  c.cancel_offer(o
+0000b800: 6666 6572 2e6e 616d 6528 292c 2066 6565  ffer.name(), fee
+0000b810: 3d75 696e 7436 3428 3129 2c20 7365 6375  =uint64(1), secu
+0000b820: 7265 3d54 7275 6529 0a0a 2020 2020 7472  re=True)..    tr
+0000b830: 6164 655f 7265 636f 7264 203d 2061 7761  ade_record = awa
+0000b840: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
+0000b850: 6765 745f 6f66 6665 7228 6f66 6665 722e  get_offer(offer.
+0000b860: 6e61 6d65 2829 290a 2020 2020 6173 7365  name()).    asse
+0000b870: 7274 2054 7261 6465 5374 6174 7573 2874  rt TradeStatus(t
+0000b880: 7261 6465 5f72 6563 6f72 642e 7374 6174  rade_record.stat
+0000b890: 7573 2920 3d3d 2054 7261 6465 5374 6174  us) == TradeStat
+0000b8a0: 7573 2e50 454e 4449 4e47 5f43 414e 4345  us.PENDING_CANCE
+0000b8b0: 4c0a 0a20 2020 206e 6577 5f6f 6666 6572  L..    new_offer
+0000b8c0: 2c20 6e65 775f 7472 6164 655f 7265 636f  , new_trade_reco
+0000b8d0: 7264 203d 2061 7761 6974 2077 616c 6c65  rd = await walle
+0000b8e0: 745f 315f 7270 632e 6372 6561 7465 5f6f  t_1_rpc.create_o
+0000b8f0: 6666 6572 5f66 6f72 5f69 6473 280a 2020  ffer_for_ids(.  
+0000b900: 2020 2020 2020 7b75 696e 7433 3228 3129        {uint32(1)
+0000b910: 3a20 2d35 2c20 6361 745f 7761 6c6c 6574  : -5, cat_wallet
+0000b920: 5f69 643a 2031 7d2c 2066 6565 3d75 696e  _id: 1}, fee=uin
+0000b930: 7436 3428 3129 0a20 2020 2029 0a20 2020  t64(1).    ).   
+0000b940: 2061 6c6c 5f6f 6666 6572 7320 3d20 6177   all_offers = aw
+0000b950: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
+0000b960: 2e67 6574 5f61 6c6c 5f6f 6666 6572 7328  .get_all_offers(
+0000b970: 290a 2020 2020 6173 7365 7274 206c 656e  ).    assert len
+0000b980: 2861 6c6c 5f6f 6666 6572 7329 203d 3d20  (all_offers) == 
+0000b990: 320a 0a20 2020 2061 7761 6974 2066 6172  2..    await far
+0000b9a0: 6d5f 7472 616e 7361 6374 696f 6e5f 626c  m_transaction_bl
+0000b9b0: 6f63 6b28 6675 6c6c 5f6e 6f64 655f 6170  ock(full_node_ap
+0000b9c0: 692c 2077 616c 6c65 745f 6e6f 6465 290a  i, wallet_node).
+0000b9d0: 0a20 2020 2061 7379 6e63 2064 6566 2069  .    async def i
+0000b9e0: 735f 7472 6164 655f 636f 6e66 6972 6d65  s_trade_confirme
+0000b9f0: 6428 636c 6965 6e74 2c20 7472 6164 6529  d(client, trade)
+0000ba00: 202d 3e20 626f 6f6c 3a0a 2020 2020 2020   -> bool:.      
+0000ba10: 2020 7472 6164 655f 7265 636f 7264 203d    trade_record =
+0000ba20: 2061 7761 6974 2063 6c69 656e 742e 6765   await client.ge
+0000ba30: 745f 6f66 6665 7228 7472 6164 652e 6e61  t_offer(trade.na
+0000ba40: 6d65 2829 290a 2020 2020 2020 2020 7265  me()).        re
+0000ba50: 7475 726e 2054 7261 6465 5374 6174 7573  turn TradeStatus
+0000ba60: 2874 7261 6465 5f72 6563 6f72 642e 7374  (trade_record.st
+0000ba70: 6174 7573 2920 3d3d 2054 7261 6465 5374  atus) == TradeSt
+0000ba80: 6174 7573 2e43 4f4e 4649 524d 4544 0a0a  atus.CONFIRMED..
+0000ba90: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
+0000baa0: 7574 5f61 7373 6572 7428 3135 2c20 6973  ut_assert(15, is
+0000bab0: 5f74 7261 6465 5f63 6f6e 6669 726d 6564  _trade_confirmed
+0000bac0: 2c20 5472 7565 2c20 7761 6c6c 6574 5f31  , True, wallet_1
+0000bad0: 5f72 7063 2c20 6f66 6665 7229 0a0a 2020  _rpc, offer)..  
+0000bae0: 2020 2320 5465 7374 2074 7261 6465 2073    # Test trade s
+0000baf0: 6f72 7469 6e67 0a20 2020 2064 6566 206f  orting.    def o
+0000bb00: 6e6c 795f 6964 7328 7472 6164 6573 293a  nly_ids(trades):
+0000bb10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000bb20: 5b74 2e74 7261 6465 5f69 6420 666f 7220  [t.trade_id for 
+0000bb30: 7420 696e 2074 7261 6465 735d 0a0a 2020  t in trades]..  
+0000bb40: 2020 7472 6164 655f 7265 636f 7264 203d    trade_record =
+0000bb50: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000bb60: 7270 632e 6765 745f 6f66 6665 7228 6f66  rpc.get_offer(of
+0000bb70: 6665 722e 6e61 6d65 2829 290a 2020 2020  fer.name()).    
+0000bb80: 616c 6c5f 6f66 6665 7273 203d 2061 7761  all_offers = awa
+0000bb90: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
+0000bba0: 6765 745f 616c 6c5f 6f66 6665 7273 2869  get_all_offers(i
+0000bbb0: 6e63 6c75 6465 5f63 6f6d 706c 6574 6564  nclude_completed
+0000bbc0: 3d54 7275 6529 2020 2320 636f 6e66 6972  =True)  # confir
+0000bbd0: 6d65 6420 6174 2069 6e64 6578 2064 6573  med at index des
+0000bbe0: 6365 6e64 696e 670a 2020 2020 6173 7365  cending.    asse
+0000bbf0: 7274 206c 656e 2861 6c6c 5f6f 6666 6572  rt len(all_offer
+0000bc00: 7329 203d 3d20 320a 2020 2020 6173 7365  s) == 2.    asse
+0000bc10: 7274 206f 6e6c 795f 6964 7328 616c 6c5f  rt only_ids(all_
+0000bc20: 6f66 6665 7273 2920 3d3d 206f 6e6c 795f  offers) == only_
+0000bc30: 6964 7328 5b74 7261 6465 5f72 6563 6f72  ids([trade_recor
+0000bc40: 642c 206e 6577 5f74 7261 6465 5f72 6563  d, new_trade_rec
+0000bc50: 6f72 645d 290a 2020 2020 616c 6c5f 6f66  ord]).    all_of
+0000bc60: 6665 7273 203d 2061 7761 6974 2077 616c  fers = await wal
+0000bc70: 6c65 745f 315f 7270 632e 6765 745f 616c  let_1_rpc.get_al
+0000bc80: 6c5f 6f66 6665 7273 2869 6e63 6c75 6465  l_offers(include
+0000bc90: 5f63 6f6d 706c 6574 6564 3d54 7275 652c  _completed=True,
+0000bca0: 2072 6576 6572 7365 3d54 7275 6529 2020   reverse=True)  
+0000bcb0: 2320 636f 6e66 6972 6d65 6420 6174 2069  # confirmed at i
+0000bcc0: 6e64 6578 2061 7363 656e 6469 6e67 0a20  ndex ascending. 
+0000bcd0: 2020 2061 7373 6572 7420 6f6e 6c79 5f69     assert only_i
+0000bce0: 6473 2861 6c6c 5f6f 6666 6572 7329 203d  ds(all_offers) =
+0000bcf0: 3d20 6f6e 6c79 5f69 6473 285b 6e65 775f  = only_ids([new_
+0000bd00: 7472 6164 655f 7265 636f 7264 2c20 7472  trade_record, tr
+0000bd10: 6164 655f 7265 636f 7264 5d29 0a20 2020  ade_record]).   
+0000bd20: 2061 6c6c 5f6f 6666 6572 7320 3d20 6177   all_offers = aw
+0000bd30: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
+0000bd40: 2e67 6574 5f61 6c6c 5f6f 6666 6572 7328  .get_all_offers(
+0000bd50: 696e 636c 7564 655f 636f 6d70 6c65 7465  include_complete
+0000bd60: 643d 5472 7565 2c20 736f 7274 5f6b 6579  d=True, sort_key
+0000bd70: 3d22 5245 4c45 5641 4e43 4522 2920 2023  ="RELEVANCE")  #
+0000bd80: 206d 6f73 7420 7265 6c65 7661 6e74 0a20   most relevant. 
+0000bd90: 2020 2061 7373 6572 7420 6f6e 6c79 5f69     assert only_i
+0000bda0: 6473 2861 6c6c 5f6f 6666 6572 7329 203d  ds(all_offers) =
+0000bdb0: 3d20 6f6e 6c79 5f69 6473 285b 6e65 775f  = only_ids([new_
+0000bdc0: 7472 6164 655f 7265 636f 7264 2c20 7472  trade_record, tr
+0000bdd0: 6164 655f 7265 636f 7264 5d29 0a20 2020  ade_record]).   
+0000bde0: 2061 6c6c 5f6f 6666 6572 7320 3d20 6177   all_offers = aw
+0000bdf0: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
+0000be00: 2e67 6574 5f61 6c6c 5f6f 6666 6572 7328  .get_all_offers(
+0000be10: 0a20 2020 2020 2020 2069 6e63 6c75 6465  .        include
+0000be20: 5f63 6f6d 706c 6574 6564 3d54 7275 652c  _completed=True,
+0000be30: 2073 6f72 745f 6b65 793d 2252 454c 4556   sort_key="RELEV
+0000be40: 414e 4345 222c 2072 6576 6572 7365 3d54  ANCE", reverse=T
+0000be50: 7275 650a 2020 2020 2920 2023 206c 6561  rue.    )  # lea
+0000be60: 7374 2072 656c 6576 616e 740a 2020 2020  st relevant.    
+0000be70: 6173 7365 7274 206f 6e6c 795f 6964 7328  assert only_ids(
+0000be80: 616c 6c5f 6f66 6665 7273 2920 3d3d 206f  all_offers) == o
+0000be90: 6e6c 795f 6964 7328 5b74 7261 6465 5f72  nly_ids([trade_r
+0000bea0: 6563 6f72 642c 206e 6577 5f74 7261 6465  ecord, new_trade
+0000beb0: 5f72 6563 6f72 645d 290a 2020 2020 2320  _record]).    # 
+0000bec0: 5465 7374 2070 6167 696e 6174 696f 6e0a  Test pagination.
+0000bed0: 2020 2020 616c 6c5f 6f66 6665 7273 203d      all_offers =
+0000bee0: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000bef0: 7270 632e 6765 745f 616c 6c5f 6f66 6665  rpc.get_all_offe
+0000bf00: 7273 2869 6e63 6c75 6465 5f63 6f6d 706c  rs(include_compl
+0000bf10: 6574 6564 3d54 7275 652c 2073 7461 7274  eted=True, start
+0000bf20: 3d30 2c20 656e 643d 3129 0a20 2020 2061  =0, end=1).    a
+0000bf30: 7373 6572 7420 6c65 6e28 616c 6c5f 6f66  ssert len(all_of
+0000bf40: 6665 7273 2920 3d3d 2031 0a20 2020 2061  fers) == 1.    a
+0000bf50: 6c6c 5f6f 6666 6572 7320 3d20 6177 6169  ll_offers = awai
+0000bf60: 7420 7761 6c6c 6574 5f31 5f72 7063 2e67  t wallet_1_rpc.g
+0000bf70: 6574 5f61 6c6c 5f6f 6666 6572 7328 696e  et_all_offers(in
+0000bf80: 636c 7564 655f 636f 6d70 6c65 7465 643d  clude_completed=
+0000bf90: 5472 7565 2c20 7374 6172 743d 3530 290a  True, start=50).
+0000bfa0: 2020 2020 6173 7365 7274 206c 656e 2861      assert len(a
+0000bfb0: 6c6c 5f6f 6666 6572 7329 203d 3d20 300a  ll_offers) == 0.
+0000bfc0: 2020 2020 616c 6c5f 6f66 6665 7273 203d      all_offers =
+0000bfd0: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000bfe0: 7270 632e 6765 745f 616c 6c5f 6f66 6665  rpc.get_all_offe
+0000bff0: 7273 2869 6e63 6c75 6465 5f63 6f6d 706c  rs(include_compl
+0000c000: 6574 6564 3d54 7275 652c 2073 7461 7274  eted=True, start
+0000c010: 3d30 2c20 656e 643d 3530 290a 2020 2020  =0, end=50).    
+0000c020: 6173 7365 7274 206c 656e 2861 6c6c 5f6f  assert len(all_o
+0000c030: 6666 6572 7329 203d 3d20 320a 0a20 2020  ffers) == 2..   
+0000c040: 2023 2323 0a20 2020 2023 2054 6869 7320   ###.    # This 
+0000c050: 6973 2074 656d 706f 7261 7279 2063 6f64  is temporary cod
+0000c060: 652c 2064 656c 6574 6520 6974 2077 6865  e, delete it whe
+0000c070: 6e20 7765 206e 6f20 6c6f 6e67 6572 2063  n we no longer c
+0000c080: 6172 6520 6162 6f75 7420 696e 636f 7272  are about incorr
+0000c090: 6563 746c 7920 7061 7273 696e 6720 4341  ectly parsing CA
+0000c0a0: 5431 730a 2020 2020 2320 5468 6572 6527  T1s.    # There'
+0000c0b0: 7320 616c 736f 2074 656d 7020 636f 6465  s also temp code
+0000c0c0: 2069 6e20 7761 6c6c 6574 5f72 7063 5f61   in wallet_rpc_a
+0000c0d0: 7069 2e70 7920 616e 6420 7761 6c6c 6574  pi.py and wallet
+0000c0e0: 5f66 756e 6373 2e70 790a 2020 2020 7769  _funcs.py.    wi
+0000c0f0: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000c100: 2856 616c 7565 4572 726f 722c 206d 6174  (ValueError, mat
+0000c110: 6368 3d22 4341 5431 7320 6172 6520 6e6f  ch="CAT1s are no
+0000c120: 206c 6f6e 6765 7220 7375 7070 6f72 7465   longer supporte
+0000c130: 6422 293a 0a20 2020 2020 2020 2061 7761  d"):.        awa
+0000c140: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
+0000c150: 6665 7463 6828 0a20 2020 2020 2020 2020  fetch(.         
+0000c160: 2020 2022 6765 745f 6f66 6665 725f 7375     "get_offer_su
+0000c170: 6d6d 6172 7922 2c0a 2020 2020 2020 2020  mmary",.        
+0000c180: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+0000c190: 2020 2020 2020 226f 6666 6572 223a 2022        "offer": "
+0000c1a0: 6f66 6665 7231 7171 7038 3377 3736 777a  offer1qqp83w76wz
+0000c1b0: 7275 3663 6d71 7670 7378 7967 7171 3463  ru6cmqvpsxygqq4c
+0000c1c0: 3936 616c 376d 7730 6138 6573 3574 3472  96al7mw0a8es5t4r
+0000c1d0: 7038 3067 6e38 6665 6d6a 366d 6b6a 6c38  p80gn8femj6mkjl8
+0000c1e0: 6c75 7637 7772 6c64 6738 3764 686b 7136  luv7wrldg87dhkq6
+0000c1f0: 656a 796c 7663 3866 220a 2020 2020 2020  ejylvc8f".      
+0000c200: 2020 2020 2020 2020 2020 2276 7470 726b            "vtprk
+0000c210: 6b77 7733 6c74 6872 6738 356d 3434 6e75  kww3lthrg85m44nu
+0000c220: 6436 6565 7378 6877 3073 7839 6d36 7032  d6eesxhw0sx9m6p2
+0000c230: 3937 7538 7a66 6430 6d74 6a75 6d63 366b  97u8zfd0mtjumc6k
+0000c240: 3835 737a 3338 3533 367a 3668 3838 3472  85sz38536z6h884r
+0000c250: 7875 6a77 327a 6665 3730 3473 7572 6b73  xujw2zfe704surks
+0000c260: 6d6d 346d 220a 2020 2020 2020 2020 2020  mm4m".          
+0000c270: 2020 2020 2020 2237 7573 7934 7534 3874        "7usy4u48t
+0000c280: 6d61 6663 616a 6334 6463 3064 6d71 6134  mafcajc4dc0dmqa4
+0000c290: 6839 7a35 6632 3765 3371 6e75 7a66 3337  h9z5f27e3qnuzf37
+0000c2a0: 7972 3738 736c 366b 736c 7473 3961 7561  yr78sl6kslts9aua
+0000c2b0: 357a 6664 6733 7237 6b6e 6e63 6a37 3870  5zfdg3r7knncj78p
+0000c2c0: 7a67 346e 7672 6e30 6136 646b 6a76 6d6d  zg4nvrn0a6dkjvmm
+0000c2d0: 6537 220a 2020 2020 2020 2020 2020 2020  e7".            
+0000c2e0: 2020 2020 226a 6a7a 7a37 3278 6d6c 7275      "jjzz72xmlru
+0000c2f0: 7568 6d61 776d 3065 6564 6c37 6670 666a  uhmawm0eedl7fpfj
+0000c300: 6b68 6e66 3730 616c 3274 7733 3470 6467  khnf70al2tw34pdg
+0000c310: 716a 6530 6d38 7774 3676 3875 6178 7738  qje0m8wt6v8uaxw8
+0000c320: 6774 6a6c 6b66 7a6c 7734 3434 3766 6b34  gtjlkfzlw4447fk4
+0000c330: 3239 6634 3274 6d6e 3978 366c 3471 6d39  29f42tmn9x6l4qm9
+0000c340: 7522 0a20 2020 2020 2020 2020 2020 2020  u".             
+0000c350: 2020 2022 326e 3430 346a 3734 6c73 3579     "2n404j74ls5y
+0000c360: 7632 6772 7430 747a 7374 6d32 6c38 6875  v2grt0tzstm2l8hu
+0000c370: 6b67 7834 7636 6834 3239 3038 7078 3864  kgx4v6h42908px8d
+0000c380: 6830 6176 7a68 646c 7877 3772 756a 3574  h0avzhdlxw7ruj5t
+0000c390: 3533 6574 6339 6474 326e 3277 6d37 3039  53etc9dt2n2wm709
+0000c3a0: 386b 7338 3977 6165 756e 6e66 6578 646e  8ks89waeunnfexdn
+0000c3b0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0000c3c0: 2020 2264 6d68 6635 646d 6879 6a73 3677    "dmhf5dmhyjs6w
+0000c3d0: 766a 7a76 766c 6a30 7363 6468 336e 7036  vjzvvlj0scdh3np6
+0000c3e0: 6d67 6d75 7236 6d32 6a6a 3279 3437 3463  mgmur6m2jj2y474c
+0000c3f0: 7775 6175 7270 6830 7471 3238 6565 3679  wuaurph0tq28ee6y
+0000c400: 3368 7861 6868 6b6b 6671 7a6c 6338 6737  3hxahhkkfqzlc8g7
+0000c410: 686d 336c 6c6c 7672 6c32 6e68 6c6d 3722  hm3lllvrl2nhlm7"
+0000c420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c430: 2022 3268 6761 7539 6c67 6475 6d79 396d   "2hgau9lgdumy9m
+0000c440: 3939 6879 3738 6476 3575 7764 7236 396a  99hy78dv5uwdr69j
+0000c450: 666b 7675 3661 3571 6330 6a6c 7a6b 6173  fkvu6a5qc0jlzkas
+0000c460: 3663 7279 337a 6837 6861 7364 7767 3738  6cry3zh7hasdwg78
+0000c470: 356e 6d68 6873 6c36 3830 6d34 6678 6473  5nmhhsl680m4fxds
+0000c480: 6561 767a 646b 386d 6739 3364 616e 6b22  eavzdk8mg93dank"
+0000c490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c4a0: 2022 3838 7565 3268 6e65 6434 7461 726e   "88ue2hned4tarn
+0000c4b0: 3061 6c37 676c 3477 7136 6374 3467 6433  0al7gl4wq6ct4gd3
+0000c4c0: 6333 7135 6136 6c32 676a 6c76 6438 6674  c3q5a6l2gjlvd8ft
+0000c4d0: 7465 6464 6678 7871 3576 347a 6475 3079  teddfxxq5v4zdu0y
+0000c4e0: 6376 3276 7577 736c 6637 727a 3275 3536  cv2vuwslf7rz2u56
+0000c4f0: 6e6c 3767 7571 6174 6b30 7574 3763 7922  nl7guqatk0ut7cy"
+0000c500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c510: 2022 6761 307a 7530 3936 6b37 7268 646c   "ga0zu096k7rhdl
+0000c520: 3939 6b63 356a 6d73 636d 7464 7a39 766d  99kc5jmscmtdz9vm
+0000c530: 6532 6d6d 6738 3664 7771 376e 6b30 3838  e2mmg86dwq7nk088
+0000c540: 7370 6177 7261 7866 6766 746c 306c 716b  spawraxfgftl0lqk
+0000c550: 7963 6170 666c 6637 3235 6d6a 6874 326c  ycapflf725mjht2l
+0000c560: 6177 3639 7768 3072 7138 6c37 7565 220a  aw69wh0rq8l7ue".
+0000c570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c580: 2267 7a74 7830 786e 7667 6338 7937 7776  "gztx0xnvgc8y7wv
+0000c590: 7675 7776 3374 6835 7063 7763 6b6b 6d30  vuwv3th5pcwckkm0
+0000c5a0: 376a 6163 7a6e 6c67 6575 7538 6b63 7730  7jacznlgeuu8kcw0
+0000c5b0: 7975 7534 7574 6a72 6d32 6d75 7438 656b  yuu4utjrm2mut8ek
+0000c5c0: 6d38 726d 7a70 3676 6c7a 636d 3665 3466  m8rmzp6vlzcm6e4f
+0000c5d0: 3878 7a79 746a 7833 7974 6e79 6522 0a20  8xzytjx3ytnye". 
+0000c5e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000c5f0: 6b61 6e79 3061 396c 3474 7130 7a78 6e68  kany0a9l4tq0zxnh
+0000c600: 3372 6a77 6876 6538 3836 3538 6e64 3078  3rjwhve88658nd0x
+0000c610: 7768 6d67 6563 746c 3333 7533 7573 366b  whmgectl33u3us6k
+0000c620: 6c6b 6b35 6337 766a 7975 7572 7236 7965  lkk5c7vjyuurr6ye
+0000c630: 746b 3775 6136 3534 6d79 3463 6d78 6d74  tk7ua654my4cmxmt
+0000c640: 726a 617a 6675 3361 7261 3922 0a20 2020  rjazfu3ara9".   
+0000c650: 2020 2020 2020 2020 2020 2020 2022 7963               "yc
+0000c660: 3434 396a 7178 6734 6d66 6778 3073 7733  449jqxg4mfgx0sw3
+0000c670: 7039 220a 2020 2020 2020 2020 2020 2020  p9".            
+0000c680: 7d2c 0a20 2020 2020 2020 2029 0a20 2020  },.        ).   
+0000c690: 2023 2323 0a0a 0a40 7079 7465 7374 2e6d   ###...@pytest.m
+0000c6a0: 6172 6b2e 6173 796e 6369 6f0a 6173 796e  ark.asyncio.asyn
+0000c6b0: 6320 6465 6620 7465 7374 5f67 6574 5f63  c def test_get_c
+0000c6c0: 6f69 6e5f 7265 636f 7264 735f 6279 5f6e  oin_records_by_n
+0000c6d0: 616d 6573 2877 616c 6c65 745f 7270 635f  ames(wallet_rpc_
+0000c6e0: 656e 7669 726f 6e6d 656e 743a 2057 616c  environment: Wal
+0000c6f0: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
+0000c700: 6e6d 656e 7429 202d 3e20 4e6f 6e65 3a0a  nment) -> None:.
+0000c710: 2020 2020 656e 763a 2057 616c 6c65 7452      env: WalletR
+0000c720: 7063 5465 7374 456e 7669 726f 6e6d 656e  pcTestEnvironmen
+0000c730: 7420 3d20 7761 6c6c 6574 5f72 7063 5f65  t = wallet_rpc_e
+0000c740: 6e76 6972 6f6e 6d65 6e74 0a20 2020 2077  nvironment.    w
+0000c750: 616c 6c65 745f 6e6f 6465 3a20 5761 6c6c  allet_node: Wall
+0000c760: 6574 4e6f 6465 203d 2065 6e76 2e77 616c  etNode = env.wal
+0000c770: 6c65 745f 312e 6e6f 6465 0a20 2020 2063  let_1.node.    c
+0000c780: 6c69 656e 743a 2057 616c 6c65 7452 7063  lient: WalletRpc
+0000c790: 436c 6965 6e74 203d 2065 6e76 2e77 616c  Client = env.wal
+0000c7a0: 6c65 745f 312e 7270 635f 636c 6965 6e74  let_1.rpc_client
+0000c7b0: 0a20 2020 2073 746f 7265 203d 2077 616c  .    store = wal
+0000c7c0: 6c65 745f 6e6f 6465 2e77 616c 6c65 745f  let_node.wallet_
+0000c7d0: 7374 6174 655f 6d61 6e61 6765 722e 636f  state_manager.co
+0000c7e0: 696e 5f73 746f 7265 0a20 2020 2066 756c  in_store.    ful
+0000c7f0: 6c5f 6e6f 6465 5f61 7069 203d 2065 6e76  l_node_api = env
+0000c800: 2e66 756c 6c5f 6e6f 6465 2e61 7069 0a20  .full_node.api. 
+0000c810: 2020 2023 2047 656e 6572 6174 6520 736f     # Generate so
+0000c820: 6d65 2066 756e 6473 0a20 2020 2067 656e  me funds.    gen
+0000c830: 6572 6174 6564 5f66 756e 6473 203d 2061  erated_funds = a
+0000c840: 7761 6974 2067 656e 6572 6174 655f 6675  wait generate_fu
+0000c850: 6e64 7328 6675 6c6c 5f6e 6f64 655f 6170  nds(full_node_ap
+0000c860: 692c 2065 6e76 2e77 616c 6c65 745f 312c  i, env.wallet_1,
+0000c870: 2035 290a 2020 2020 6164 6472 6573 7320   5).    address 
+0000c880: 3d20 656e 636f 6465 5f70 757a 7a6c 655f  = encode_puzzle_
+0000c890: 6861 7368 2861 7761 6974 2065 6e76 2e77  hash(await env.w
+0000c8a0: 616c 6c65 745f 312e 7761 6c6c 6574 2e67  allet_1.wallet.g
+0000c8b0: 6574 5f6e 6577 5f70 757a 7a6c 6568 6173  et_new_puzzlehas
+0000c8c0: 6828 292c 2022 7478 6368 2229 0a20 2020  h(), "txch").   
+0000c8d0: 2023 2053 7065 6e64 2068 616c 6620 6f66   # Spend half of
+0000c8e0: 2069 7420 6261 636b 2074 6f20 7468 6520   it back to the 
+0000c8f0: 7361 6d65 2077 616c 6c65 7420 6765 7420  same wallet get 
+0000c900: 736f 6d65 2073 7065 6e74 2063 6f69 6e73  some spent coins
+0000c910: 2069 6e20 7468 6520 7761 6c6c 6574 0a20   in the wallet. 
+0000c920: 2020 2074 7820 3d20 6177 6169 7420 636c     tx = await cl
+0000c930: 6965 6e74 2e73 656e 645f 7472 616e 7361  ient.send_transa
+0000c940: 6374 696f 6e28 312c 2075 696e 7436 3428  ction(1, uint64(
+0000c950: 6765 6e65 7261 7465 645f 6675 6e64 7320  generated_funds 
+0000c960: 2f20 3229 2c20 6164 6472 6573 7329 0a20  / 2), address). 
+0000c970: 2020 2061 7373 6572 7420 7478 2e73 7065     assert tx.spe
+0000c980: 6e64 5f62 756e 646c 6520 6973 206e 6f74  nd_bundle is not
+0000c990: 204e 6f6e 650a 2020 2020 6177 6169 7420   None.    await 
+0000c9a0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
+0000c9b0: 3230 2c20 7478 5f69 6e5f 6d65 6d70 6f6f  20, tx_in_mempoo
+0000c9c0: 6c2c 2054 7275 652c 2063 6c69 656e 742c  l, True, client,
+0000c9d0: 2074 782e 6e61 6d65 290a 2020 2020 6177   tx.name).    aw
+0000c9e0: 6169 7420 6661 726d 5f74 7261 6e73 6163  ait farm_transac
+0000c9f0: 7469 6f6e 2866 756c 6c5f 6e6f 6465 5f61  tion(full_node_a
+0000ca00: 7069 2c20 7761 6c6c 6574 5f6e 6f64 652c  pi, wallet_node,
+0000ca10: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
+0000ca20: 290a 2020 2020 6177 6169 7420 6675 6c6c  ).    await full
+0000ca30: 5f6e 6f64 655f 6170 692e 7761 6974 5f66  _node_api.wait_f
+0000ca40: 6f72 5f77 616c 6c65 745f 7379 6e63 6564  or_wallet_synced
+0000ca50: 2877 616c 6c65 745f 6e6f 6465 3d77 616c  (wallet_node=wal
+0000ca60: 6c65 745f 6e6f 6465 2c20 7469 6d65 6f75  let_node, timeou
+0000ca70: 743d 3529 0a20 2020 2023 2050 7265 7061  t=5).    # Prepa
+0000ca80: 7265 2073 6f6d 6520 7265 636f 7264 7320  re some records 
+0000ca90: 616e 6420 7061 7261 6d65 7465 7273 2066  and parameters f
+0000caa0: 6972 7374 0a20 2020 2072 6573 756c 7420  irst.    result 
+0000cab0: 3d20 6177 6169 7420 7374 6f72 652e 6765  = await store.ge
+0000cac0: 745f 636f 696e 5f72 6563 6f72 6473 2829  t_coin_records()
+0000cad0: 0a20 2020 2063 6f69 6e73 203d 207b 7265  .    coins = {re
+0000cae0: 636f 7264 2e63 6f69 6e20 666f 7220 7265  cord.coin for re
+0000caf0: 636f 7264 2069 6e20 7265 7375 6c74 2e72  cord in result.r
+0000cb00: 6563 6f72 6473 7d0a 2020 2020 636f 696e  ecords}.    coin
+0000cb10: 735f 756e 7370 656e 7420 3d20 7b72 6563  s_unspent = {rec
+0000cb20: 6f72 642e 636f 696e 2066 6f72 2072 6563  ord.coin for rec
+0000cb30: 6f72 6420 696e 2072 6573 756c 742e 7265  ord in result.re
+0000cb40: 636f 7264 7320 6966 206e 6f74 2072 6563  cords if not rec
+0000cb50: 6f72 642e 7370 656e 747d 0a20 2020 2063  ord.spent}.    c
+0000cb60: 6f69 6e5f 6964 7320 3d20 5b63 6f69 6e2e  oin_ids = [coin.
+0000cb70: 6e61 6d65 2829 2066 6f72 2063 6f69 6e20  name() for coin 
+0000cb80: 696e 2063 6f69 6e73 5d0a 2020 2020 636f  in coins].    co
+0000cb90: 696e 5f69 6473 5f75 6e73 7065 6e74 203d  in_ids_unspent =
+0000cba0: 205b 636f 696e 2e6e 616d 6528 2920 666f   [coin.name() fo
+0000cbb0: 7220 636f 696e 2069 6e20 636f 696e 735f  r coin in coins_
+0000cbc0: 756e 7370 656e 745d 0a20 2020 2061 7373  unspent].    ass
+0000cbd0: 6572 7420 6c65 6e28 636f 696e 5f69 6473  ert len(coin_ids
+0000cbe0: 2920 3e20 300a 2020 2020 6173 7365 7274  ) > 0.    assert
+0000cbf0: 206c 656e 2863 6f69 6e5f 6964 735f 756e   len(coin_ids_un
+0000cc00: 7370 656e 7429 203e 2030 0a20 2020 2023  spent) > 0.    #
+0000cc10: 2044 6f20 736f 6d65 2071 7565 7269 6573   Do some queries
+0000cc20: 2074 6f20 7472 6967 6765 7220 616c 6c20   to trigger all 
+0000cc30: 7061 7261 6d65 7465 7273 0a20 2020 2023  parameters.    #
+0000cc40: 2031 2e20 456d 7074 7920 636f 696e 5f69   1. Empty coin_i
+0000cc50: 6473 0a20 2020 2061 7373 6572 7420 6177  ds.    assert aw
+0000cc60: 6169 7420 636c 6965 6e74 2e67 6574 5f63  ait client.get_c
+0000cc70: 6f69 6e5f 7265 636f 7264 735f 6279 5f6e  oin_records_by_n
+0000cc80: 616d 6573 285b 5d29 203d 3d20 5b5d 0a20  ames([]) == []. 
+0000cc90: 2020 2023 2032 2e20 416c 6c20 636f 696e     # 2. All coin
+0000cca0: 730a 2020 2020 7270 635f 7265 7375 6c74  s.    rpc_result
+0000ccb0: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
+0000ccc0: 6765 745f 636f 696e 5f72 6563 6f72 6473  get_coin_records
+0000ccd0: 5f62 795f 6e61 6d65 7328 636f 696e 5f69  _by_names(coin_i
+0000cce0: 6473 202b 2063 6f69 6e5f 6964 735f 756e  ds + coin_ids_un
+0000ccf0: 7370 656e 7429 0a20 2020 2061 7373 6572  spent).    asser
+0000cd00: 7420 7365 7428 7265 636f 7264 2e63 6f69  t set(record.coi
+0000cd10: 6e20 666f 7220 7265 636f 7264 2069 6e20  n for record in 
+0000cd20: 7270 635f 7265 7375 6c74 2920 3d3d 207b  rpc_result) == {
+0000cd30: 2a63 6f69 6e73 2c20 2a63 6f69 6e73 5f75  *coins, *coins_u
+0000cd40: 6e73 7065 6e74 7d0a 2020 2020 2320 332e  nspent}.    # 3.
+0000cd50: 2041 6c6c 2073 7065 6e74 2063 6f69 6e73   All spent coins
+0000cd60: 0a20 2020 2072 7063 5f72 6573 756c 7420  .    rpc_result 
+0000cd70: 3d20 6177 6169 7420 636c 6965 6e74 2e67  = await client.g
+0000cd80: 6574 5f63 6f69 6e5f 7265 636f 7264 735f  et_coin_records_
+0000cd90: 6279 5f6e 616d 6573 2863 6f69 6e5f 6964  by_names(coin_id
+0000cda0: 732c 2069 6e63 6c75 6465 5f73 7065 6e74  s, include_spent
+0000cdb0: 5f63 6f69 6e73 3d54 7275 6529 0a20 2020  _coins=True).   
+0000cdc0: 2061 7373 6572 7420 7365 7428 7265 636f   assert set(reco
+0000cdd0: 7264 2e63 6f69 6e20 666f 7220 7265 636f  rd.coin for reco
+0000cde0: 7264 2069 6e20 7270 635f 7265 7375 6c74  rd in rpc_result
+0000cdf0: 2920 3d3d 2063 6f69 6e73 0a20 2020 2023  ) == coins.    #
+0000ce00: 2034 2e20 416c 6c20 756e 7370 656e 7420   4. All unspent 
+0000ce10: 636f 696e 730a 2020 2020 7270 635f 7265  coins.    rpc_re
+0000ce20: 7375 6c74 203d 2061 7761 6974 2063 6c69  sult = await cli
+0000ce30: 656e 742e 6765 745f 636f 696e 5f72 6563  ent.get_coin_rec
+0000ce40: 6f72 6473 5f62 795f 6e61 6d65 7328 636f  ords_by_names(co
+0000ce50: 696e 5f69 6473 5f75 6e73 7065 6e74 2c20  in_ids_unspent, 
+0000ce60: 696e 636c 7564 655f 7370 656e 745f 636f  include_spent_co
+0000ce70: 696e 733d 4661 6c73 6529 0a20 2020 2061  ins=False).    a
+0000ce80: 7373 6572 7420 7365 7428 7265 636f 7264  ssert set(record
+0000ce90: 2e63 6f69 6e20 666f 7220 7265 636f 7264  .coin for record
+0000cea0: 2069 6e20 7270 635f 7265 7375 6c74 2920   in rpc_result) 
+0000ceb0: 3d3d 2063 6f69 6e73 5f75 6e73 7065 6e74  == coins_unspent
+0000cec0: 0a20 2020 2023 2035 2e20 4669 6c74 6572  .    # 5. Filter
+0000ced0: 2073 7461 7274 2f65 6e64 2068 6569 6768   start/end heigh
+0000cee0: 740a 2020 2020 6669 6c74 6572 5f72 6563  t.    filter_rec
+0000cef0: 6f72 6473 203d 2072 6573 756c 742e 7265  ords = result.re
+0000cf00: 636f 7264 735b 3a31 305d 0a20 2020 2061  cords[:10].    a
+0000cf10: 7373 6572 7420 6c65 6e28 6669 6c74 6572  ssert len(filter
+0000cf20: 5f72 6563 6f72 6473 2920 3d3d 2031 300a  _records) == 10.
+0000cf30: 2020 2020 6669 6c74 6572 5f63 6f69 6e5f      filter_coin_
+0000cf40: 6964 7320 3d20 5b72 6563 6f72 642e 6e61  ids = [record.na
+0000cf50: 6d65 2829 2066 6f72 2072 6563 6f72 6420  me() for record 
+0000cf60: 696e 2066 696c 7465 725f 7265 636f 7264  in filter_record
+0000cf70: 735d 0a20 2020 2066 696c 7465 725f 636f  s].    filter_co
+0000cf80: 696e 7320 3d20 7365 7428 7265 636f 7264  ins = set(record
+0000cf90: 2e63 6f69 6e20 666f 7220 7265 636f 7264  .coin for record
+0000cfa0: 2069 6e20 6669 6c74 6572 5f72 6563 6f72   in filter_recor
+0000cfb0: 6473 290a 2020 2020 6d69 6e5f 6865 6967  ds).    min_heig
+0000cfc0: 6874 203d 206d 696e 2872 6563 6f72 642e  ht = min(record.
+0000cfd0: 636f 6e66 6972 6d65 645f 626c 6f63 6b5f  confirmed_block_
+0000cfe0: 6865 6967 6874 2066 6f72 2072 6563 6f72  height for recor
+0000cff0: 6420 696e 2066 696c 7465 725f 7265 636f  d in filter_reco
+0000d000: 7264 7329 0a20 2020 206d 6178 5f68 6569  rds).    max_hei
+0000d010: 6768 7420 3d20 6d61 7828 7265 636f 7264  ght = max(record
+0000d020: 2e63 6f6e 6669 726d 6564 5f62 6c6f 636b  .confirmed_block
+0000d030: 5f68 6569 6768 7420 666f 7220 7265 636f  _height for reco
+0000d040: 7264 2069 6e20 6669 6c74 6572 5f72 6563  rd in filter_rec
+0000d050: 6f72 6473 290a 2020 2020 6173 7365 7274  ords).    assert
+0000d060: 206d 696e 5f68 6569 6768 7420 213d 206d   min_height != m
+0000d070: 6178 5f68 6569 6768 740a 2020 2020 7270  ax_height.    rp
+0000d080: 635f 7265 7375 6c74 203d 2061 7761 6974  c_result = await
+0000d090: 2063 6c69 656e 742e 6765 745f 636f 696e   client.get_coin
+0000d0a0: 5f72 6563 6f72 6473 5f62 795f 6e61 6d65  _records_by_name
+0000d0b0: 7328 6669 6c74 6572 5f63 6f69 6e5f 6964  s(filter_coin_id
+0000d0c0: 732c 2073 7461 7274 5f68 6569 6768 743d  s, start_height=
+0000d0d0: 6d69 6e5f 6865 6967 6874 2c20 656e 645f  min_height, end_
+0000d0e0: 6865 6967 6874 3d6d 6178 5f68 6569 6768  height=max_heigh
+0000d0f0: 7429 0a20 2020 2061 7373 6572 7420 7365  t).    assert se
+0000d100: 7428 7265 636f 7264 2e63 6f69 6e20 666f  t(record.coin fo
+0000d110: 7220 7265 636f 7264 2069 6e20 7270 635f  r record in rpc_
+0000d120: 7265 7375 6c74 2920 3d3d 2066 696c 7465  result) == filte
+0000d130: 725f 636f 696e 730a 2020 2020 2320 382e  r_coins.    # 8.
+0000d140: 2054 6573 7420 7468 6520 6661 696c 7572   Test the failur
+0000d150: 6520 6361 7365 0a20 2020 2077 6974 6820  e case.    with 
+0000d160: 7079 7465 7374 2e72 6169 7365 7328 5661  pytest.raises(Va
+0000d170: 6c75 6545 7272 6f72 2c20 6d61 7463 683d  lueError, match=
+0000d180: 226e 6f74 2066 6f75 6e64 2229 3a0a 2020  "not found"):.  
+0000d190: 2020 2020 2020 6177 6169 7420 636c 6965        await clie
+0000d1a0: 6e74 2e67 6574 5f63 6f69 6e5f 7265 636f  nt.get_coin_reco
+0000d1b0: 7264 735f 6279 5f6e 616d 6573 2863 6f69  rds_by_names(coi
+0000d1c0: 6e5f 6964 732c 2069 6e63 6c75 6465 5f73  n_ids, include_s
+0000d1d0: 7065 6e74 5f63 6f69 6e73 3d46 616c 7365  pent_coins=False
+0000d1e0: 290a 0a0a 4070 7974 6573 742e 6d61 726b  )...@pytest.mark
+0000d1f0: 2e61 7379 6e63 696f 0a61 7379 6e63 2064  .asyncio.async d
+0000d200: 6566 2074 6573 745f 6469 645f 656e 6470  ef test_did_endp
+0000d210: 6f69 6e74 7328 7761 6c6c 6574 5f72 7063  oints(wallet_rpc
+0000d220: 5f65 6e76 6972 6f6e 6d65 6e74 3a20 5761  _environment: Wa
+0000d230: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
+0000d240: 6f6e 6d65 6e74 293a 0a20 2020 2065 6e76  onment):.    env
+0000d250: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
+0000d260: 6e76 6972 6f6e 6d65 6e74 203d 2077 616c  nvironment = wal
+0000d270: 6c65 745f 7270 635f 656e 7669 726f 6e6d  let_rpc_environm
+0000d280: 656e 740a 0a20 2020 2077 616c 6c65 745f  ent..    wallet_
+0000d290: 313a 2057 616c 6c65 7420 3d20 656e 762e  1: Wallet = env.
+0000d2a0: 7761 6c6c 6574 5f31 2e77 616c 6c65 740a  wallet_1.wallet.
+0000d2b0: 2020 2020 7761 6c6c 6574 5f32 3a20 5761      wallet_2: Wa
+0000d2c0: 6c6c 6574 203d 2065 6e76 2e77 616c 6c65  llet = env.walle
+0000d2d0: 745f 322e 7761 6c6c 6574 0a20 2020 2077  t_2.wallet.    w
+0000d2e0: 616c 6c65 745f 315f 6e6f 6465 3a20 5761  allet_1_node: Wa
+0000d2f0: 6c6c 6574 4e6f 6465 203d 2065 6e76 2e77  lletNode = env.w
+0000d300: 616c 6c65 745f 312e 6e6f 6465 0a20 2020  allet_1.node.   
+0000d310: 2077 616c 6c65 745f 325f 6e6f 6465 3a20   wallet_2_node: 
+0000d320: 5761 6c6c 6574 4e6f 6465 203d 2065 6e76  WalletNode = env
+0000d330: 2e77 616c 6c65 745f 322e 6e6f 6465 0a20  .wallet_2.node. 
+0000d340: 2020 2077 616c 6c65 745f 315f 7270 633a     wallet_1_rpc:
+0000d350: 2057 616c 6c65 7452 7063 436c 6965 6e74   WalletRpcClient
+0000d360: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
+0000d370: 7270 635f 636c 6965 6e74 0a20 2020 2066  rpc_client.    f
+0000d380: 756c 6c5f 6e6f 6465 5f61 7069 3a20 4675  ull_node_api: Fu
+0000d390: 6c6c 4e6f 6465 5369 6d75 6c61 746f 7220  llNodeSimulator 
+0000d3a0: 3d20 656e 762e 6675 6c6c 5f6e 6f64 652e  = env.full_node.
+0000d3b0: 6170 690a 2020 2020 7761 6c6c 6574 5f31  api.    wallet_1
+0000d3c0: 5f69 6420 3d20 7761 6c6c 6574 5f31 2e69  _id = wallet_1.i
+0000d3d0: 6428 290a 0a20 2020 2061 7761 6974 2067  d()..    await g
+0000d3e0: 656e 6572 6174 655f 6675 6e64 7328 656e  enerate_funds(en
+0000d3f0: 762e 6675 6c6c 5f6e 6f64 652e 6170 692c  v.full_node.api,
+0000d400: 2065 6e76 2e77 616c 6c65 745f 312c 2035   env.wallet_1, 5
+0000d410: 290a 0a20 2020 2023 2043 7265 6174 6520  )..    # Create 
+0000d420: 6120 4449 4420 7761 6c6c 6574 0a20 2020  a DID wallet.   
+0000d430: 2072 6573 203d 2061 7761 6974 2077 616c   res = await wal
+0000d440: 6c65 745f 315f 7270 632e 6372 6561 7465  let_1_rpc.create
+0000d450: 5f6e 6577 5f64 6964 5f77 616c 6c65 7428  _new_did_wallet(
+0000d460: 616d 6f75 6e74 3d31 2c20 6e61 6d65 3d22  amount=1, name="
+0000d470: 5072 6f66 696c 6520 3122 290a 2020 2020  Profile 1").    
+0000d480: 6173 7365 7274 2072 6573 5b22 7375 6363  assert res["succ
+0000d490: 6573 7322 5d0a 2020 2020 6469 645f 7761  ess"].    did_wa
+0000d4a0: 6c6c 6574 5f69 645f 3020 3d20 7265 735b  llet_id_0 = res[
+0000d4b0: 2277 616c 6c65 745f 6964 225d 0a20 2020  "wallet_id"].   
+0000d4c0: 2064 6964 5f69 645f 3020 3d20 7265 735b   did_id_0 = res[
+0000d4d0: 226d 795f 6469 6422 5d0a 0a20 2020 2023  "my_did"]..    #
+0000d4e0: 2047 6574 2077 616c 6c65 7420 6e61 6d65   Get wallet name
+0000d4f0: 0a20 2020 2072 6573 203d 2061 7761 6974  .    res = await
+0000d500: 2077 616c 6c65 745f 315f 7270 632e 6469   wallet_1_rpc.di
+0000d510: 645f 6765 745f 7761 6c6c 6574 5f6e 616d  d_get_wallet_nam
+0000d520: 6528 6469 645f 7761 6c6c 6574 5f69 645f  e(did_wallet_id_
+0000d530: 3029 0a20 2020 2061 7373 6572 7420 7265  0).    assert re
+0000d540: 735b 2273 7563 6365 7373 225d 0a20 2020  s["success"].   
+0000d550: 2061 7373 6572 7420 7265 735b 226e 616d   assert res["nam
+0000d560: 6522 5d20 3d3d 2022 5072 6f66 696c 6520  e"] == "Profile 
+0000d570: 3122 0a20 2020 206e 6674 5f77 616c 6c65  1".    nft_walle
+0000d580: 743a 2057 616c 6c65 7450 726f 746f 636f  t: WalletProtoco
+0000d590: 6c20 3d20 7761 6c6c 6574 5f31 5f6e 6f64  l = wallet_1_nod
+0000d5a0: 652e 7761 6c6c 6574 5f73 7461 7465 5f6d  e.wallet_state_m
+0000d5b0: 616e 6167 6572 2e77 616c 6c65 7473 5b64  anager.wallets[d
+0000d5c0: 6964 5f77 616c 6c65 745f 6964 5f30 202b  id_wallet_id_0 +
+0000d5d0: 2031 5d0a 2020 2020 6173 7365 7274 2069   1].    assert i
+0000d5e0: 7369 6e73 7461 6e63 6528 6e66 745f 7761  sinstance(nft_wa
+0000d5f0: 6c6c 6574 2c20 4e46 5457 616c 6c65 7429  llet, NFTWallet)
+0000d600: 0a20 2020 2061 7373 6572 7420 6e66 745f  .    assert nft_
+0000d610: 7761 6c6c 6574 2e67 6574 5f6e 616d 6528  wallet.get_name(
+0000d620: 2920 3d3d 2022 5072 6f66 696c 6520 3120  ) == "Profile 1 
+0000d630: 4e46 5420 5761 6c6c 6574 220a 0a20 2020  NFT Wallet"..   
+0000d640: 2023 2053 6574 2077 616c 6c65 7420 6e61   # Set wallet na
+0000d650: 6d65 0a20 2020 206e 6577 5f77 616c 6c65  me.    new_walle
+0000d660: 745f 6e61 6d65 203d 2022 7465 7374 206e  t_name = "test n
+0000d670: 616d 6522 0a20 2020 2072 6573 203d 2061  ame".    res = a
+0000d680: 7761 6974 2077 616c 6c65 745f 315f 7270  wait wallet_1_rp
+0000d690: 632e 6469 645f 7365 745f 7761 6c6c 6574  c.did_set_wallet
+0000d6a0: 5f6e 616d 6528 6469 645f 7761 6c6c 6574  _name(did_wallet
+0000d6b0: 5f69 645f 302c 206e 6577 5f77 616c 6c65  _id_0, new_walle
+0000d6c0: 745f 6e61 6d65 290a 2020 2020 6173 7365  t_name).    asse
+0000d6d0: 7274 2072 6573 5b22 7375 6363 6573 7322  rt res["success"
+0000d6e0: 5d0a 2020 2020 7265 7320 3d20 6177 6169  ].    res = awai
+0000d6f0: 7420 7761 6c6c 6574 5f31 5f72 7063 2e64  t wallet_1_rpc.d
+0000d700: 6964 5f67 6574 5f77 616c 6c65 745f 6e61  id_get_wallet_na
+0000d710: 6d65 2864 6964 5f77 616c 6c65 745f 6964  me(did_wallet_id
+0000d720: 5f30 290a 2020 2020 6173 7365 7274 2072  _0).    assert r
+0000d730: 6573 5b22 7375 6363 6573 7322 5d0a 2020  es["success"].  
+0000d740: 2020 6173 7365 7274 2072 6573 5b22 6e61    assert res["na
+0000d750: 6d65 225d 203d 3d20 6e65 775f 7761 6c6c  me"] == new_wall
+0000d760: 6574 5f6e 616d 650a 2020 2020 7769 7468  et_name.    with
+0000d770: 2070 7974 6573 742e 7261 6973 6573 2856   pytest.raises(V
+0000d780: 616c 7565 4572 726f 722c 206d 6174 6368  alueError, match
+0000d790: 3d22 7761 6c6c 6574 2069 6420 3120 6973  ="wallet id 1 is
+0000d7a0: 206f 6620 7479 7065 2057 616c 6c65 7420   of type Wallet 
+0000d7b0: 6275 7420 7479 7065 2044 4944 5761 6c6c  but type DIDWall
+0000d7c0: 6574 2069 7320 7265 7175 6972 6564 2229  et is required")
+0000d7d0: 3a0a 2020 2020 2020 2020 6177 6169 7420  :.        await 
+0000d7e0: 7761 6c6c 6574 5f31 5f72 7063 2e64 6964  wallet_1_rpc.did
+0000d7f0: 5f73 6574 5f77 616c 6c65 745f 6e61 6d65  _set_wallet_name
+0000d800: 2877 616c 6c65 745f 315f 6964 2c20 6e65  (wallet_1_id, ne
+0000d810: 775f 7761 6c6c 6574 5f6e 616d 6529 0a0a  w_wallet_name)..
+0000d820: 2020 2020 2320 4368 6563 6b20 4449 4420      # Check DID 
+0000d830: 4944 0a20 2020 2072 6573 203d 2061 7761  ID.    res = awa
+0000d840: 6974 2077 616c 6c65 745f 315f 7270 632e  it wallet_1_rpc.
+0000d850: 6765 745f 6469 645f 6964 2864 6964 5f77  get_did_id(did_w
+0000d860: 616c 6c65 745f 6964 5f30 290a 2020 2020  allet_id_0).    
+0000d870: 6173 7365 7274 2072 6573 5b22 7375 6363  assert res["succ
+0000d880: 6573 7322 5d0a 2020 2020 6173 7365 7274  ess"].    assert
+0000d890: 2064 6964 5f69 645f 3020 3d3d 2072 6573   did_id_0 == res
+0000d8a0: 5b22 6d79 5f64 6964 225d 0a20 2020 2023  ["my_did"].    #
+0000d8b0: 2043 7265 6174 6520 6261 636b 7570 2066   Create backup f
+0000d8c0: 696c 650a 2020 2020 7265 7320 3d20 6177  ile.    res = aw
+0000d8d0: 6169 7420 7761 6c6c 6574 5f31 5f72 7063  ait wallet_1_rpc
+0000d8e0: 2e63 7265 6174 655f 6469 645f 6261 636b  .create_did_back
+0000d8f0: 7570 5f66 696c 6528 6469 645f 7761 6c6c  up_file(did_wall
+0000d900: 6574 5f69 645f 302c 2022 6261 636b 7570  et_id_0, "backup
+0000d910: 2e64 6964 2229 0a20 2020 2061 7373 6572  .did").    asser
+0000d920: 7420 7265 735b 2273 7563 6365 7373 225d  t res["success"]
+0000d930: 0a0a 2020 2020 6177 6169 7420 7469 6d65  ..    await time
+0000d940: 5f6f 7574 5f61 7373 6572 7428 352c 2063  _out_assert(5, c
+0000d950: 6865 636b 5f6d 656d 706f 6f6c 5f73 7065  heck_mempool_spe
+0000d960: 6e64 5f63 6f75 6e74 2c20 5472 7565 2c20  nd_count, True, 
+0000d970: 6675 6c6c 5f6e 6f64 655f 6170 692c 2031  full_node_api, 1
+0000d980: 290a 2020 2020 6177 6169 7420 6661 726d  ).    await farm
+0000d990: 5f74 7261 6e73 6163 7469 6f6e 5f62 6c6f  _transaction_blo
+0000d9a0: 636b 2866 756c 6c5f 6e6f 6465 5f61 7069  ck(full_node_api
+0000d9b0: 2c20 7761 6c6c 6574 5f31 5f6e 6f64 6529  , wallet_1_node)
+0000d9c0: 0a20 2020 2023 2055 7064 6174 6520 7265  .    # Update re
+0000d9d0: 636f 7665 7279 206c 6973 740a 2020 2020  covery list.    
+0000d9e0: 7265 7320 3d20 6177 6169 7420 7761 6c6c  res = await wall
+0000d9f0: 6574 5f31 5f72 7063 2e75 7064 6174 655f  et_1_rpc.update_
+0000da00: 6469 645f 7265 636f 7665 7279 5f6c 6973  did_recovery_lis
+0000da10: 7428 6469 645f 7761 6c6c 6574 5f69 645f  t(did_wallet_id_
+0000da20: 302c 205b 6469 645f 6964 5f30 5d2c 2031  0, [did_id_0], 1
+0000da30: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
+0000da40: 5b22 7375 6363 6573 7322 5d0a 2020 2020  ["success"].    
+0000da50: 7265 7320 3d20 6177 6169 7420 7761 6c6c  res = await wall
+0000da60: 6574 5f31 5f72 7063 2e67 6574 5f64 6964  et_1_rpc.get_did
+0000da70: 5f72 6563 6f76 6572 795f 6c69 7374 2864  _recovery_list(d
+0000da80: 6964 5f77 616c 6c65 745f 6964 5f30 290a  id_wallet_id_0).
+0000da90: 2020 2020 6173 7365 7274 2072 6573 5b22      assert res["
+0000daa0: 6e75 6d5f 7265 7175 6972 6564 225d 203d  num_required"] =
+0000dab0: 3d20 310a 2020 2020 6173 7365 7274 2072  = 1.    assert r
+0000dac0: 6573 5b22 7265 636f 7665 7279 5f6c 6973  es["recovery_lis
+0000dad0: 7422 5d5b 305d 203d 3d20 6469 645f 6964  t"][0] == did_id
+0000dae0: 5f30 0a0a 2020 2020 6177 6169 7420 7469  _0..    await ti
+0000daf0: 6d65 5f6f 7574 5f61 7373 6572 7428 352c  me_out_assert(5,
+0000db00: 2063 6865 636b 5f6d 656d 706f 6f6c 5f73   check_mempool_s
+0000db10: 7065 6e64 5f63 6f75 6e74 2c20 5472 7565  pend_count, True
+0000db20: 2c20 6675 6c6c 5f6e 6f64 655f 6170 692c  , full_node_api,
+0000db30: 2031 290a 2020 2020 6177 6169 7420 6661   1).    await fa
+0000db40: 726d 5f74 7261 6e73 6163 7469 6f6e 5f62  rm_transaction_b
+0000db50: 6c6f 636b 2866 756c 6c5f 6e6f 6465 5f61  lock(full_node_a
+0000db60: 7069 2c20 7761 6c6c 6574 5f31 5f6e 6f64  pi, wallet_1_nod
+0000db70: 6529 0a0a 2020 2020 2320 5570 6461 7465  e)..    # Update
+0000db80: 206d 6574 6164 6174 610a 2020 2020 7769   metadata.    wi
+0000db90: 7468 2070 7974 6573 742e 7261 6973 6573  th pytest.raises
+0000dba0: 2856 616c 7565 4572 726f 722c 206d 6174  (ValueError, mat
+0000dbb0: 6368 3d22 7761 6c6c 6574 2069 6420 3120  ch="wallet id 1 
+0000dbc0: 6973 206f 6620 7479 7065 2057 616c 6c65  is of type Walle
+0000dbd0: 7420 6275 7420 7479 7065 2044 4944 5761  t but type DIDWa
+0000dbe0: 6c6c 6574 2069 7320 7265 7175 6972 6564  llet is required
+0000dbf0: 2229 3a0a 2020 2020 2020 2020 6177 6169  "):.        awai
+0000dc00: 7420 7761 6c6c 6574 5f31 5f72 7063 2e75  t wallet_1_rpc.u
+0000dc10: 7064 6174 655f 6469 645f 6d65 7461 6461  pdate_did_metada
+0000dc20: 7461 2877 616c 6c65 745f 315f 6964 2c20  ta(wallet_1_id, 
+0000dc30: 7b22 5477 6974 7465 7222 3a20 2248 7474  {"Twitter": "Htt
+0000dc40: 7073 3a2f 2f74 6573 7422 7d29 0a20 2020  ps://test"}).   
+0000dc50: 2072 6573 203d 2061 7761 6974 2077 616c   res = await wal
+0000dc60: 6c65 745f 315f 7270 632e 7570 6461 7465  let_1_rpc.update
+0000dc70: 5f64 6964 5f6d 6574 6164 6174 6128 6469  _did_metadata(di
+0000dc80: 645f 7761 6c6c 6574 5f69 645f 302c 207b  d_wallet_id_0, {
+0000dc90: 2254 7769 7474 6572 223a 2022 4874 7470  "Twitter": "Http
+0000dca0: 733a 2f2f 7465 7374 227d 290a 2020 2020  s://test"}).    
+0000dcb0: 6173 7365 7274 2072 6573 5b22 7375 6363  assert res["succ
+0000dcc0: 6573 7322 5d0a 0a20 2020 2061 7761 6974  ess"]..    await
+0000dcd0: 2066 6172 6d5f 7472 616e 7361 6374 696f   farm_transactio
+0000dce0: 6e5f 626c 6f63 6b28 6675 6c6c 5f6e 6f64  n_block(full_nod
+0000dcf0: 655f 6170 692c 2077 616c 6c65 745f 315f  e_api, wallet_1_
+0000dd00: 6e6f 6465 290a 0a20 2020 2072 6573 203d  node)..    res =
+0000dd10: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000dd20: 7270 632e 6765 745f 6469 645f 6d65 7461  rpc.get_did_meta
+0000dd30: 6461 7461 2864 6964 5f77 616c 6c65 745f  data(did_wallet_
+0000dd40: 6964 5f30 290a 2020 2020 6173 7365 7274  id_0).    assert
+0000dd50: 2072 6573 5b22 6d65 7461 6461 7461 225d   res["metadata"]
+0000dd60: 5b22 5477 6974 7465 7222 5d20 3d3d 2022  ["Twitter"] == "
+0000dd70: 4874 7470 733a 2f2f 7465 7374 220a 0a20  Https://test".. 
+0000dd80: 2020 2061 7761 6974 2074 696d 655f 6f75     await time_ou
+0000dd90: 745f 6173 7365 7274 2835 2c20 6368 6563  t_assert(5, chec
+0000dda0: 6b5f 6d65 6d70 6f6f 6c5f 7370 656e 645f  k_mempool_spend_
+0000ddb0: 636f 756e 742c 2054 7275 652c 2066 756c  count, True, ful
+0000ddc0: 6c5f 6e6f 6465 5f61 7069 2c20 3129 0a20  l_node_api, 1). 
+0000ddd0: 2020 2061 7761 6974 2066 6172 6d5f 7472     await farm_tr
+0000dde0: 616e 7361 6374 696f 6e5f 626c 6f63 6b28  ansaction_block(
+0000ddf0: 6675 6c6c 5f6e 6f64 655f 6170 692c 2077  full_node_api, w
+0000de00: 616c 6c65 745f 315f 6e6f 6465 290a 0a20  allet_1_node).. 
+0000de10: 2020 2023 2054 7261 6e73 6665 7220 4449     # Transfer DI
+0000de20: 440a 2020 2020 6164 6472 203d 2065 6e63  D.    addr = enc
+0000de30: 6f64 655f 7075 7a7a 6c65 5f68 6173 6828  ode_puzzle_hash(
+0000de40: 6177 6169 7420 7761 6c6c 6574 5f32 2e67  await wallet_2.g
+0000de50: 6574 5f6e 6577 5f70 757a 7a6c 6568 6173  et_new_puzzlehas
+0000de60: 6828 292c 2022 7478 6368 2229 0a20 2020  h(), "txch").   
+0000de70: 2072 6573 203d 2061 7761 6974 2077 616c   res = await wal
+0000de80: 6c65 745f 315f 7270 632e 6469 645f 7472  let_1_rpc.did_tr
+0000de90: 616e 7366 6572 5f64 6964 2864 6964 5f77  ansfer_did(did_w
+0000dea0: 616c 6c65 745f 6964 5f30 2c20 6164 6472  allet_id_0, addr
+0000deb0: 2c20 302c 2054 7275 6529 0a20 2020 2061  , 0, True).    a
+0000dec0: 7373 6572 7420 7265 735b 2273 7563 6365  ssert res["succe
+0000ded0: 7373 225d 0a0a 2020 2020 6177 6169 7420  ss"]..    await 
+0000dee0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
+0000def0: 352c 2063 6865 636b 5f6d 656d 706f 6f6c  5, check_mempool
+0000df00: 5f73 7065 6e64 5f63 6f75 6e74 2c20 5472  _spend_count, Tr
+0000df10: 7565 2c20 6675 6c6c 5f6e 6f64 655f 6170  ue, full_node_ap
+0000df20: 692c 2031 290a 2020 2020 6177 6169 7420  i, 1).    await 
+0000df30: 6661 726d 5f74 7261 6e73 6163 7469 6f6e  farm_transaction
+0000df40: 5f62 6c6f 636b 2866 756c 6c5f 6e6f 6465  _block(full_node
+0000df50: 5f61 7069 2c20 7761 6c6c 6574 5f31 5f6e  _api, wallet_1_n
+0000df60: 6f64 6529 0a0a 2020 2020 6173 796e 6320  ode)..    async 
+0000df70: 6465 6620 6e75 6d5f 7761 6c6c 6574 7328  def num_wallets(
+0000df80: 2920 2d3e 2069 6e74 3a0a 2020 2020 2020  ) -> int:.      
+0000df90: 2020 7265 7475 726e 206c 656e 2861 7761    return len(awa
+0000dfa0: 6974 2077 616c 6c65 745f 325f 6e6f 6465  it wallet_2_node
+0000dfb0: 2e77 616c 6c65 745f 7374 6174 655f 6d61  .wallet_state_ma
+0000dfc0: 6e61 6765 722e 6765 745f 616c 6c5f 7761  nager.get_all_wa
+0000dfd0: 6c6c 6574 5f69 6e66 6f5f 656e 7472 6965  llet_info_entrie
+0000dfe0: 7328 2929 0a0a 2020 2020 6177 6169 7420  s())..    await 
+0000dff0: 7469 6d65 5f6f 7574 5f61 7373 6572 7428  time_out_assert(
+0000e000: 3330 2c20 6e75 6d5f 7761 6c6c 6574 732c  30, num_wallets,
+0000e010: 2032 290a 0a20 2020 2064 6964 5f77 616c   2)..    did_wal
+0000e020: 6c65 7473 203d 206c 6973 7428 0a20 2020  lets = list(.   
+0000e030: 2020 2020 2066 696c 7465 7228 0a20 2020       filter(.   
+0000e040: 2020 2020 2020 2020 206c 616d 6264 6120           lambda 
+0000e050: 773a 2028 772e 7479 7065 203d 3d20 5761  w: (w.type == Wa
+0000e060: 6c6c 6574 5479 7065 2e44 4543 454e 5452  lletType.DECENTR
+0000e070: 414c 495a 4544 5f49 4429 2c0a 2020 2020  ALIZED_ID),.    
+0000e080: 2020 2020 2020 2020 6177 6169 7420 7761          await wa
+0000e090: 6c6c 6574 5f32 5f6e 6f64 652e 7761 6c6c  llet_2_node.wall
+0000e0a0: 6574 5f73 7461 7465 5f6d 616e 6167 6572  et_state_manager
+0000e0b0: 2e67 6574 5f61 6c6c 5f77 616c 6c65 745f  .get_all_wallet_
+0000e0c0: 696e 666f 5f65 6e74 7269 6573 2829 2c0a  info_entries(),.
+0000e0d0: 2020 2020 2020 2020 290a 2020 2020 290a          ).    ).
+0000e0e0: 2020 2020 6469 645f 7761 6c6c 6574 5f32      did_wallet_2
+0000e0f0: 3a20 5761 6c6c 6574 5072 6f74 6f63 6f6c  : WalletProtocol
+0000e100: 203d 2077 616c 6c65 745f 325f 6e6f 6465   = wallet_2_node
+0000e110: 2e77 616c 6c65 745f 7374 6174 655f 6d61  .wallet_state_ma
+0000e120: 6e61 6765 722e 7761 6c6c 6574 735b 6469  nager.wallets[di
+0000e130: 645f 7761 6c6c 6574 735b 305d 2e69 645d  d_wallets[0].id]
+0000e140: 0a20 2020 2061 7373 6572 7420 6973 696e  .    assert isin
+0000e150: 7374 616e 6365 2864 6964 5f77 616c 6c65  stance(did_walle
+0000e160: 745f 322c 2044 4944 5761 6c6c 6574 290a  t_2, DIDWallet).
+0000e170: 2020 2020 6173 7365 7274 2028 0a20 2020      assert (.   
+0000e180: 2020 2020 2065 6e63 6f64 655f 7075 7a7a       encode_puzz
+0000e190: 6c65 5f68 6173 6828 6279 7465 7333 322e  le_hash(bytes32.
+0000e1a0: 6672 6f6d 5f68 6578 7374 7228 6469 645f  from_hexstr(did_
+0000e1b0: 7761 6c6c 6574 5f32 2e67 6574 5f6d 795f  wallet_2.get_my_
+0000e1c0: 4449 4428 2929 2c20 4164 6472 6573 7354  DID()), AddressT
+0000e1d0: 7970 652e 4449 442e 6872 7028 7761 6c6c  ype.DID.hrp(wall
+0000e1e0: 6574 5f32 5f6e 6f64 652e 636f 6e66 6967  et_2_node.config
+0000e1f0: 2929 0a20 2020 2020 2020 203d 3d20 6469  )).        == di
+0000e200: 645f 6964 5f30 0a20 2020 2029 0a20 2020  d_id_0.    ).   
+0000e210: 206d 6574 6164 6174 6120 3d20 6a73 6f6e   metadata = json
+0000e220: 2e6c 6f61 6473 2864 6964 5f77 616c 6c65  .loads(did_walle
+0000e230: 745f 322e 6469 645f 696e 666f 2e6d 6574  t_2.did_info.met
+0000e240: 6164 6174 6129 0a20 2020 2061 7373 6572  adata).    asser
+0000e250: 7420 6d65 7461 6461 7461 5b22 5477 6974  t metadata["Twit
+0000e260: 7465 7222 5d20 3d3d 2022 4874 7470 733a  ter"] == "Https:
+0000e270: 2f2f 7465 7374 220a 0a0a 4070 7974 6573  //test"...@pytes
+0000e280: 742e 6d61 726b 2e61 7379 6e63 696f 0a61  t.mark.asyncio.a
+0000e290: 7379 6e63 2064 6566 2074 6573 745f 6e66  sync def test_nf
+0000e2a0: 745f 656e 6470 6f69 6e74 7328 7761 6c6c  t_endpoints(wall
+0000e2b0: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
+0000e2c0: 6e74 3a20 5761 6c6c 6574 5270 6354 6573  nt: WalletRpcTes
+0000e2d0: 7445 6e76 6972 6f6e 6d65 6e74 293a 0a20  tEnvironment):. 
+0000e2e0: 2020 2065 6e76 3a20 5761 6c6c 6574 5270     env: WalletRp
+0000e2f0: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
+0000e300: 203d 2077 616c 6c65 745f 7270 635f 656e   = wallet_rpc_en
+0000e310: 7669 726f 6e6d 656e 740a 2020 2020 7761  vironment.    wa
+0000e320: 6c6c 6574 5f31 5f6e 6f64 653a 2057 616c  llet_1_node: Wal
+0000e330: 6c65 744e 6f64 6520 3d20 656e 762e 7761  letNode = env.wa
+0000e340: 6c6c 6574 5f31 2e6e 6f64 650a 2020 2020  llet_1.node.    
+0000e350: 7761 6c6c 6574 5f31 5f72 7063 3a20 5761  wallet_1_rpc: Wa
+0000e360: 6c6c 6574 5270 6343 6c69 656e 7420 3d20  lletRpcClient = 
+0000e370: 656e 762e 7761 6c6c 6574 5f31 2e72 7063  env.wallet_1.rpc
+0000e380: 5f63 6c69 656e 740a 2020 2020 7761 6c6c  _client.    wall
+0000e390: 6574 5f32 3a20 5761 6c6c 6574 203d 2065  et_2: Wallet = e
+0000e3a0: 6e76 2e77 616c 6c65 745f 322e 7761 6c6c  nv.wallet_2.wall
+0000e3b0: 6574 0a20 2020 2077 616c 6c65 745f 325f  et.    wallet_2_
+0000e3c0: 6e6f 6465 3a20 5761 6c6c 6574 4e6f 6465  node: WalletNode
+0000e3d0: 203d 2065 6e76 2e77 616c 6c65 745f 322e   = env.wallet_2.
+0000e3e0: 6e6f 6465 0a20 2020 2077 616c 6c65 745f  node.    wallet_
+0000e3f0: 325f 7270 633a 2057 616c 6c65 7452 7063  2_rpc: WalletRpc
+0000e400: 436c 6965 6e74 203d 2065 6e76 2e77 616c  Client = env.wal
+0000e410: 6c65 745f 322e 7270 635f 636c 6965 6e74  let_2.rpc_client
+0000e420: 0a20 2020 2066 756c 6c5f 6e6f 6465 5f61  .    full_node_a
+0000e430: 7069 3a20 4675 6c6c 4e6f 6465 5369 6d75  pi: FullNodeSimu
+0000e440: 6c61 746f 7220 3d20 656e 762e 6675 6c6c  lator = env.full
+0000e450: 5f6e 6f64 652e 6170 690a 0a20 2020 2061  _node.api..    a
+0000e460: 7761 6974 2067 656e 6572 6174 655f 6675  wait generate_fu
+0000e470: 6e64 7328 656e 762e 6675 6c6c 5f6e 6f64  nds(env.full_nod
+0000e480: 652e 6170 692c 2065 6e76 2e77 616c 6c65  e.api, env.walle
+0000e490: 745f 312c 2035 290a 0a20 2020 2072 6573  t_1, 5)..    res
+0000e4a0: 203d 2061 7761 6974 2077 616c 6c65 745f   = await wallet_
+0000e4b0: 315f 7270 632e 6372 6561 7465 5f6e 6577  1_rpc.create_new
+0000e4c0: 5f6e 6674 5f77 616c 6c65 7428 4e6f 6e65  _nft_wallet(None
+0000e4d0: 290a 2020 2020 6e66 745f 7761 6c6c 6574  ).    nft_wallet
+0000e4e0: 5f69 6420 3d20 7265 735b 2277 616c 6c65  _id = res["walle
+0000e4f0: 745f 6964 225d 0a20 2020 2072 6573 203d  t_id"].    res =
+0000e500: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000e510: 7270 632e 6d69 6e74 5f6e 6674 280a 2020  rpc.mint_nft(.  
+0000e520: 2020 2020 2020 6e66 745f 7761 6c6c 6574        nft_wallet
+0000e530: 5f69 642c 0a20 2020 2020 2020 204e 6f6e  _id,.        Non
+0000e540: 652c 0a20 2020 2020 2020 204e 6f6e 652c  e,.        None,
+0000e550: 0a20 2020 2020 2020 2022 3078 4434 3538  .        "0xD458
+0000e560: 3441 4434 3633 3133 3946 4138 4330 4439  4AD463139FA8C0D9
+0000e570: 4636 3846 3442 3539 4631 3835 222c 0a20  F68F4B59F185",. 
+0000e580: 2020 2020 2020 205b 2268 7474 7073 3a2f         ["https:/
+0000e590: 2f77 7777 2e63 6869 612e 6e65 742f 696d  /www.chia.net/im
+0000e5a0: 672f 6272 616e 6469 6e67 2f63 6869 612d  g/branding/chia-
+0000e5b0: 6c6f 676f 2e73 7667 225d 2c0a 2020 2020  logo.svg"],.    
+0000e5c0: 290a 2020 2020 6173 7365 7274 2072 6573  ).    assert res
+0000e5d0: 5b22 7375 6363 6573 7322 5d0a 0a20 2020  ["success"]..   
+0000e5e0: 2073 7065 6e64 5f62 756e 646c 6520 3d20   spend_bundle = 
+0000e5f0: 5370 656e 6442 756e 646c 652e 6672 6f6d  SpendBundle.from
+0000e600: 5f6a 736f 6e5f 6469 6374 286a 736f 6e5f  _json_dict(json_
+0000e610: 6469 6374 3d72 6573 5b22 7370 656e 645f  dict=res["spend_
+0000e620: 6275 6e64 6c65 225d 290a 0a20 2020 2061  bundle"])..    a
+0000e630: 7761 6974 2066 6172 6d5f 7472 616e 7361  wait farm_transa
+0000e640: 6374 696f 6e28 6675 6c6c 5f6e 6f64 655f  ction(full_node_
+0000e650: 6170 692c 2077 616c 6c65 745f 315f 6e6f  api, wallet_1_no
+0000e660: 6465 2c20 7370 656e 645f 6275 6e64 6c65  de, spend_bundle
+0000e670: 290a 0a20 2020 2061 7761 6974 2066 756c  )..    await ful
+0000e680: 6c5f 6e6f 6465 5f61 7069 2e77 6169 745f  l_node_api.wait_
+0000e690: 666f 725f 7761 6c6c 6574 5f73 796e 6365  for_wallet_synce
+0000e6a0: 6428 7761 6c6c 6574 5f6e 6f64 653d 7761  d(wallet_node=wa
+0000e6b0: 6c6c 6574 5f31 5f6e 6f64 652c 2074 696d  llet_1_node, tim
+0000e6c0: 656f 7574 3d31 3529 0a0a 2020 2020 6e66  eout=15)..    nf
+0000e6d0: 745f 7761 6c6c 6574 3a20 5761 6c6c 6574  t_wallet: Wallet
+0000e6e0: 5072 6f74 6f63 6f6c 203d 2077 616c 6c65  Protocol = walle
+0000e6f0: 745f 315f 6e6f 6465 2e77 616c 6c65 745f  t_1_node.wallet_
+0000e700: 7374 6174 655f 6d61 6e61 6765 722e 7761  state_manager.wa
+0000e710: 6c6c 6574 735b 6e66 745f 7761 6c6c 6574  llets[nft_wallet
+0000e720: 5f69 645d 0a20 2020 2061 7373 6572 7420  _id].    assert 
+0000e730: 6973 696e 7374 616e 6365 286e 6674 5f77  isinstance(nft_w
+0000e740: 616c 6c65 742c 204e 4654 5761 6c6c 6574  allet, NFTWallet
+0000e750: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+0000e760: 2068 6176 655f 6e66 7473 2829 3a0a 2020   have_nfts():.  
+0000e770: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+0000e780: 6974 206e 6674 5f77 616c 6c65 742e 6765  it nft_wallet.ge
+0000e790: 745f 6e66 745f 636f 756e 7428 2920 3e20  t_nft_count() > 
+0000e7a0: 300a 0a20 2020 2061 7761 6974 2074 696d  0..    await tim
+0000e7b0: 655f 6f75 745f 6173 7365 7274 2831 352c  e_out_assert(15,
+0000e7c0: 2068 6176 655f 6e66 7473 2c20 5472 7565   have_nfts, True
+0000e7d0: 290a 0a20 2020 2023 2054 6573 7420 7769  )..    # Test wi
+0000e7e0: 7468 2074 6865 2068 6578 2076 6572 7369  th the hex versi
+0000e7f0: 6f6e 206f 6620 6e66 745f 6964 0a20 2020  on of nft_id.   
+0000e800: 206e 6674 5f69 6420 3d20 2861 7761 6974   nft_id = (await
+0000e810: 206e 6674 5f77 616c 6c65 742e 6765 745f   nft_wallet.get_
+0000e820: 6375 7272 656e 745f 6e66 7473 2829 295b  current_nfts())[
+0000e830: 305d 2e63 6f69 6e2e 6e61 6d65 2829 2e68  0].coin.name().h
+0000e840: 6578 2829 0a20 2020 206e 6674 5f69 6e66  ex().    nft_inf
+0000e850: 6f20 3d20 2861 7761 6974 2077 616c 6c65  o = (await walle
+0000e860: 745f 315f 7270 632e 6765 745f 6e66 745f  t_1_rpc.get_nft_
+0000e870: 696e 666f 286e 6674 5f69 6429 295b 226e  info(nft_id))["n
+0000e880: 6674 5f69 6e66 6f22 5d0a 2020 2020 6173  ft_info"].    as
+0000e890: 7365 7274 206e 6674 5f69 6e66 6f5b 226e  sert nft_info["n
+0000e8a0: 6674 5f63 6f69 6e5f 6964 225d 5b32 3a5d  ft_coin_id"][2:]
+0000e8b0: 203d 3d20 2861 7761 6974 206e 6674 5f77   == (await nft_w
+0000e8c0: 616c 6c65 742e 6765 745f 6375 7272 656e  allet.get_curren
+0000e8d0: 745f 6e66 7473 2829 295b 305d 2e63 6f69  t_nfts())[0].coi
+0000e8e0: 6e2e 6e61 6d65 2829 2e68 6578 2829 0a20  n.name().hex(). 
+0000e8f0: 2020 2023 2054 6573 7420 7769 7468 2074     # Test with t
+0000e900: 6865 2062 6563 6833 326d 2076 6572 7369  he bech32m versi
+0000e910: 6f6e 206f 6620 6e66 745f 6964 0a20 2020  on of nft_id.   
+0000e920: 2068 6d72 5f6e 6674 5f69 6420 3d20 656e   hmr_nft_id = en
+0000e930: 636f 6465 5f70 757a 7a6c 655f 6861 7368  code_puzzle_hash
+0000e940: 280a 2020 2020 2020 2020 2861 7761 6974  (.        (await
+0000e950: 206e 6674 5f77 616c 6c65 742e 6765 745f   nft_wallet.get_
+0000e960: 6375 7272 656e 745f 6e66 7473 2829 295b  current_nfts())[
+0000e970: 305d 2e63 6f69 6e2e 6e61 6d65 2829 2c20  0].coin.name(), 
+0000e980: 4164 6472 6573 7354 7970 652e 4e46 542e  AddressType.NFT.
+0000e990: 6872 7028 7761 6c6c 6574 5f31 5f6e 6f64  hrp(wallet_1_nod
+0000e9a0: 652e 636f 6e66 6967 290a 2020 2020 290a  e.config).    ).
+0000e9b0: 2020 2020 6e66 745f 696e 666f 203d 2028      nft_info = (
+0000e9c0: 6177 6169 7420 7761 6c6c 6574 5f31 5f72  await wallet_1_r
+0000e9d0: 7063 2e67 6574 5f6e 6674 5f69 6e66 6f28  pc.get_nft_info(
+0000e9e0: 686d 725f 6e66 745f 6964 2929 5b22 6e66  hmr_nft_id))["nf
+0000e9f0: 745f 696e 666f 225d 0a20 2020 2061 7373  t_info"].    ass
+0000ea00: 6572 7420 6e66 745f 696e 666f 5b22 6e66  ert nft_info["nf
+0000ea10: 745f 636f 696e 5f69 6422 5d5b 323a 5d20  t_coin_id"][2:] 
+0000ea20: 3d3d 2028 6177 6169 7420 6e66 745f 7761  == (await nft_wa
+0000ea30: 6c6c 6574 2e67 6574 5f63 7572 7265 6e74  llet.get_current
+0000ea40: 5f6e 6674 7328 2929 5b30 5d2e 636f 696e  _nfts())[0].coin
+0000ea50: 2e6e 616d 6528 292e 6865 7828 290a 0a20  .name().hex().. 
+0000ea60: 2020 2061 6464 7220 3d20 656e 636f 6465     addr = encode
+0000ea70: 5f70 757a 7a6c 655f 6861 7368 2861 7761  _puzzle_hash(awa
+0000ea80: 6974 2077 616c 6c65 745f 322e 6765 745f  it wallet_2.get_
+0000ea90: 6e65 775f 7075 7a7a 6c65 6861 7368 2829  new_puzzlehash()
+0000eaa0: 2c20 2274 7863 6822 290a 2020 2020 7265  , "txch").    re
+0000eab0: 7320 3d20 6177 6169 7420 7761 6c6c 6574  s = await wallet
+0000eac0: 5f31 5f72 7063 2e74 7261 6e73 6665 725f  _1_rpc.transfer_
+0000ead0: 6e66 7428 6e66 745f 7761 6c6c 6574 5f69  nft(nft_wallet_i
+0000eae0: 642c 206e 6674 5f69 642c 2061 6464 722c  d, nft_id, addr,
+0000eaf0: 2030 290a 2020 2020 6173 7365 7274 2072   0).    assert r
+0000eb00: 6573 5b22 7375 6363 6573 7322 5d0a 2020  es["success"].  
+0000eb10: 2020 6177 6169 7420 7469 6d65 5f6f 7574    await time_out
+0000eb20: 5f61 7373 6572 7428 352c 2063 6865 636b  _assert(5, check
+0000eb30: 5f6d 656d 706f 6f6c 5f73 7065 6e64 5f63  _mempool_spend_c
+0000eb40: 6f75 6e74 2c20 5472 7565 2c20 6675 6c6c  ount, True, full
+0000eb50: 5f6e 6f64 655f 6170 692c 2031 290a 2020  _node_api, 1).  
+0000eb60: 2020 6177 6169 7420 6661 726d 5f74 7261    await farm_tra
+0000eb70: 6e73 6163 7469 6f6e 5f62 6c6f 636b 2866  nsaction_block(f
+0000eb80: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
+0000eb90: 6c6c 6574 5f31 5f6e 6f64 6529 0a20 2020  llet_1_node).   
+0000eba0: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+0000ebb0: 6173 7365 7274 2835 2c20 6368 6563 6b5f  assert(5, check_
+0000ebc0: 6d65 6d70 6f6f 6c5f 7370 656e 645f 636f  mempool_spend_co
+0000ebd0: 756e 742c 2054 7275 652c 2066 756c 6c5f  unt, True, full_
+0000ebe0: 6e6f 6465 5f61 7069 2c20 3029 0a20 2020  node_api, 0).   
+0000ebf0: 2061 7761 6974 2066 756c 6c5f 6e6f 6465   await full_node
+0000ec00: 5f61 7069 2e77 6169 745f 666f 725f 7761  _api.wait_for_wa
+0000ec10: 6c6c 6574 5f73 796e 6365 6428 7761 6c6c  llet_synced(wall
+0000ec20: 6574 5f6e 6f64 653d 7761 6c6c 6574 5f31  et_node=wallet_1
+0000ec30: 5f6e 6f64 652c 2074 696d 656f 7574 3d35  _node, timeout=5
+0000ec40: 290a 0a20 2020 2061 7761 6974 2066 756c  )..    await ful
+0000ec50: 6c5f 6e6f 6465 5f61 7069 2e77 6169 745f  l_node_api.wait_
+0000ec60: 666f 725f 7761 6c6c 6574 5f73 796e 6365  for_wallet_synce
+0000ec70: 6428 7761 6c6c 6574 5f6e 6f64 653d 7761  d(wallet_node=wa
+0000ec80: 6c6c 6574 5f32 5f6e 6f64 652c 2074 696d  llet_2_node, tim
+0000ec90: 656f 7574 3d35 290a 0a20 2020 206e 6674  eout=5)..    nft
+0000eca0: 5f77 616c 6c65 745f 6964 5f31 203d 2028  _wallet_id_1 = (
+0000ecb0: 0a20 2020 2020 2020 2061 7761 6974 2077  .        await w
+0000ecc0: 616c 6c65 745f 325f 6e6f 6465 2e77 616c  allet_2_node.wal
+0000ecd0: 6c65 745f 7374 6174 655f 6d61 6e61 6765  let_state_manage
+0000ece0: 722e 6765 745f 616c 6c5f 7761 6c6c 6574  r.get_all_wallet
+0000ecf0: 5f69 6e66 6f5f 656e 7472 6965 7328 7761  _info_entries(wa
+0000ed00: 6c6c 6574 5f74 7970 653d 5761 6c6c 6574  llet_type=Wallet
+0000ed10: 5479 7065 2e4e 4654 290a 2020 2020 295b  Type.NFT).    )[
+0000ed20: 305d 2e69 640a 2020 2020 6e66 745f 7761  0].id.    nft_wa
+0000ed30: 6c6c 6574 5f31 3a20 5761 6c6c 6574 5072  llet_1: WalletPr
+0000ed40: 6f74 6f63 6f6c 203d 2077 616c 6c65 745f  otocol = wallet_
+0000ed50: 325f 6e6f 6465 2e77 616c 6c65 745f 7374  2_node.wallet_st
+0000ed60: 6174 655f 6d61 6e61 6765 722e 7761 6c6c  ate_manager.wall
+0000ed70: 6574 735b 6e66 745f 7761 6c6c 6574 5f69  ets[nft_wallet_i
+0000ed80: 645f 315d 0a20 2020 2061 7373 6572 7420  d_1].    assert 
+0000ed90: 6973 696e 7374 616e 6365 286e 6674 5f77  isinstance(nft_w
+0000eda0: 616c 6c65 745f 312c 204e 4654 5761 6c6c  allet_1, NFTWall
+0000edb0: 6574 290a 2020 2020 6e66 745f 696e 666f  et).    nft_info
+0000edc0: 5f31 203d 2028 6177 6169 7420 7761 6c6c  _1 = (await wall
+0000edd0: 6574 5f31 5f72 7063 2e67 6574 5f6e 6674  et_1_rpc.get_nft
+0000ede0: 5f69 6e66 6f28 6e66 745f 6964 2c20 4661  _info(nft_id, Fa
+0000edf0: 6c73 6529 295b 226e 6674 5f69 6e66 6f22  lse))["nft_info"
+0000ee00: 5d0a 2020 2020 6173 7365 7274 206e 6674  ].    assert nft
+0000ee10: 5f69 6e66 6f5f 3120 3d3d 206e 6674 5f69  _info_1 == nft_i
+0000ee20: 6e66 6f0a 2020 2020 6e66 745f 696e 666f  nfo.    nft_info
+0000ee30: 5f31 203d 2028 6177 6169 7420 7761 6c6c  _1 = (await wall
+0000ee40: 6574 5f31 5f72 7063 2e67 6574 5f6e 6674  et_1_rpc.get_nft
+0000ee50: 5f69 6e66 6f28 6e66 745f 6964 2929 5b22  _info(nft_id))["
+0000ee60: 6e66 745f 696e 666f 225d 0a20 2020 2061  nft_info"].    a
+0000ee70: 7373 6572 7420 6e66 745f 696e 666f 5f31  ssert nft_info_1
+0000ee80: 5b22 6e66 745f 636f 696e 5f69 6422 5d5b  ["nft_coin_id"][
+0000ee90: 323a 5d20 3d3d 2028 6177 6169 7420 6e66  2:] == (await nf
+0000eea0: 745f 7761 6c6c 6574 5f31 2e67 6574 5f63  t_wallet_1.get_c
+0000eeb0: 7572 7265 6e74 5f6e 6674 7328 2929 5b30  urrent_nfts())[0
+0000eec0: 5d2e 636f 696e 2e6e 616d 6528 292e 6865  ].coin.name().he
+0000eed0: 7828 290a 2020 2020 2320 4372 6f73 732d  x().    # Cross-
+0000eee0: 6368 6563 6b20 4e46 540a 2020 2020 6e66  check NFT.    nf
+0000eef0: 745f 696e 666f 5f32 203d 2028 6177 6169  t_info_2 = (awai
+0000ef00: 7420 7761 6c6c 6574 5f32 5f72 7063 2e6c  t wallet_2_rpc.l
+0000ef10: 6973 745f 6e66 7473 286e 6674 5f77 616c  ist_nfts(nft_wal
+0000ef20: 6c65 745f 6964 5f31 2929 5b22 6e66 745f  let_id_1))["nft_
+0000ef30: 6c69 7374 225d 5b30 5d0a 2020 2020 6173  list"][0].    as
+0000ef40: 7365 7274 206e 6674 5f69 6e66 6f5f 3120  sert nft_info_1 
+0000ef50: 3d3d 206e 6674 5f69 6e66 6f5f 320a 0a20  == nft_info_2.. 
+0000ef60: 2020 2023 2054 6573 7420 726f 7961 6c74     # Test royalt
+0000ef70: 7920 656e 6470 6f69 6e74 0a20 2020 2072  y endpoint.    r
+0000ef80: 6f79 616c 7479 5f73 756d 6d61 7279 203d  oyalty_summary =
+0000ef90: 2061 7761 6974 2077 616c 6c65 745f 315f   await wallet_1_
+0000efa0: 7270 632e 6e66 745f 6361 6c63 756c 6174  rpc.nft_calculat
+0000efb0: 655f 726f 7961 6c74 6965 7328 0a20 2020  e_royalties(.   
+0000efc0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
+0000efd0: 2020 2022 6d79 2061 7373 6574 223a 2028     "my asset": (
+0000efe0: 226d 7920 6164 6472 6573 7322 2c20 7569  "my address", ui
+0000eff0: 6e74 3136 2831 3030 3030 2929 2c0a 2020  nt16(10000)),.  
+0000f000: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+0000f010: 207b 0a20 2020 2020 2020 2020 2020 204e   {.            N
+0000f020: 6f6e 653a 2075 696e 7436 3428 3130 3030  one: uint64(1000
+0000f030: 3029 2c0a 2020 2020 2020 2020 7d2c 0a20  0),.        },. 
+0000f040: 2020 2029 0a20 2020 2061 7373 6572 7420     ).    assert 
+0000f050: 726f 7961 6c74 795f 7375 6d6d 6172 7920  royalty_summary 
+0000f060: 3d3d 207b 0a20 2020 2020 2020 2022 6d79  == {.        "my
+0000f070: 2061 7373 6574 223a 205b 0a20 2020 2020   asset": [.     
+0000f080: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+0000f090: 2020 2020 2020 2020 2022 6173 7365 7422           "asset"
+0000f0a0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+0000f0b0: 2020 2020 2020 2020 2261 6464 7265 7373          "address
+0000f0c0: 223a 2022 6d79 2061 6464 7265 7373 222c  ": "my address",
+0000f0d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f0e0: 2022 616d 6f75 6e74 223a 2031 3030 3030   "amount": 10000
+0000f0f0: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
+0000f100: 2020 2020 2020 2020 5d2c 0a20 2020 207d          ],.    }
+0000f110: 0a0a 0a40 7079 7465 7374 2e6d 6172 6b2e  ...@pytest.mark.
+0000f120: 6173 796e 6369 6f0a 6173 796e 6320 6465  asyncio.async de
+0000f130: 6620 7465 7374 5f6b 6579 5f61 6e64 5f61  f test_key_and_a
+0000f140: 6464 7265 7373 5f65 6e64 706f 696e 7473  ddress_endpoints
+0000f150: 2877 616c 6c65 745f 7270 635f 656e 7669  (wallet_rpc_envi
+0000f160: 726f 6e6d 656e 743a 2057 616c 6c65 7452  ronment: WalletR
+0000f170: 7063 5465 7374 456e 7669 726f 6e6d 656e  pcTestEnvironmen
+0000f180: 7429 3a0a 2020 2020 656e 763a 2057 616c  t):.    env: Wal
+0000f190: 6c65 7452 7063 5465 7374 456e 7669 726f  letRpcTestEnviro
+0000f1a0: 6e6d 656e 7420 3d20 7761 6c6c 6574 5f72  nment = wallet_r
+0000f1b0: 7063 5f65 6e76 6972 6f6e 6d65 6e74 0a0a  pc_environment..
+0000f1c0: 2020 2020 7761 6c6c 6574 3a20 5761 6c6c      wallet: Wall
+0000f1d0: 6574 203d 2065 6e76 2e77 616c 6c65 745f  et = env.wallet_
+0000f1e0: 312e 7761 6c6c 6574 0a20 2020 2077 616c  1.wallet.    wal
+0000f1f0: 6c65 745f 6e6f 6465 3a20 5761 6c6c 6574  let_node: Wallet
+0000f200: 4e6f 6465 203d 2065 6e76 2e77 616c 6c65  Node = env.walle
+0000f210: 745f 312e 6e6f 6465 0a20 2020 2063 6c69  t_1.node.    cli
+0000f220: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
+0000f230: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
+0000f240: 745f 312e 7270 635f 636c 6965 6e74 0a0a  t_1.rpc_client..
+0000f250: 2020 2020 6164 6472 6573 7320 3d20 6177      address = aw
+0000f260: 6169 7420 636c 6965 6e74 2e67 6574 5f6e  ait client.get_n
+0000f270: 6578 745f 6164 6472 6573 7328 312c 2054  ext_address(1, T
+0000f280: 7275 6529 0a20 2020 2061 7373 6572 7420  rue).    assert 
+0000f290: 6c65 6e28 6164 6472 6573 7329 203e 2031  len(address) > 1
+0000f2a0: 300a 0a20 2020 2070 6b73 203d 2061 7761  0..    pks = awa
+0000f2b0: 6974 2063 6c69 656e 742e 6765 745f 7075  it client.get_pu
+0000f2c0: 626c 6963 5f6b 6579 7328 290a 2020 2020  blic_keys().    
+0000f2d0: 6173 7365 7274 206c 656e 2870 6b73 2920  assert len(pks) 
+0000f2e0: 3d3d 2031 0a0a 2020 2020 6177 6169 7420  == 1..    await 
+0000f2f0: 6765 6e65 7261 7465 5f66 756e 6473 2865  generate_funds(e
+0000f300: 6e76 2e66 756c 6c5f 6e6f 6465 2e61 7069  nv.full_node.api
+0000f310: 2c20 656e 762e 7761 6c6c 6574 5f31 290a  , env.wallet_1).
+0000f320: 0a20 2020 2061 7373 6572 7420 2861 7761  .    assert (awa
+0000f330: 6974 2063 6c69 656e 742e 6765 745f 6865  it client.get_he
+0000f340: 6967 6874 5f69 6e66 6f28 2929 203e 2030  ight_info()) > 0
+0000f350: 0a0a 2020 2020 7068 203d 2061 7761 6974  ..    ph = await
+0000f360: 2077 616c 6c65 742e 6765 745f 6e65 775f   wallet.get_new_
+0000f370: 7075 7a7a 6c65 6861 7368 2829 0a20 2020  puzzlehash().   
+0000f380: 2061 6464 7220 3d20 656e 636f 6465 5f70   addr = encode_p
+0000f390: 757a 7a6c 655f 6861 7368 2870 682c 2022  uzzle_hash(ph, "
+0000f3a0: 7478 6368 2229 0a20 2020 2074 785f 616d  txch").    tx_am
+0000f3b0: 6f75 6e74 203d 2075 696e 7436 3428 3135  ount = uint64(15
+0000f3c0: 3630 3030 3030 290a 0a20 2020 2063 7265  600000)..    cre
+0000f3d0: 6174 6564 5f74 7820 3d20 6177 6169 7420  ated_tx = await 
+0000f3e0: 636c 6965 6e74 2e73 656e 645f 7472 616e  client.send_tran
+0000f3f0: 7361 6374 696f 6e28 312c 2074 785f 616d  saction(1, tx_am
+0000f400: 6f75 6e74 2c20 6164 6472 290a 0a20 2020  ount, addr)..   
+0000f410: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+0000f420: 6173 7365 7274 2832 302c 2074 785f 696e  assert(20, tx_in
+0000f430: 5f6d 656d 706f 6f6c 2c20 5472 7565 2c20  _mempool, True, 
+0000f440: 636c 6965 6e74 2c20 6372 6561 7465 645f  client, created_
+0000f450: 7478 2e6e 616d 6529 0a20 2020 2061 7373  tx.name).    ass
+0000f460: 6572 7420 6c65 6e28 6177 6169 7420 7761  ert len(await wa
+0000f470: 6c6c 6574 2e77 616c 6c65 745f 7374 6174  llet.wallet_stat
+0000f480: 655f 6d61 6e61 6765 722e 7478 5f73 746f  e_manager.tx_sto
+0000f490: 7265 2e67 6574 5f75 6e63 6f6e 6669 726d  re.get_unconfirm
+0000f4a0: 6564 5f66 6f72 5f77 616c 6c65 7428 3129  ed_for_wallet(1)
+0000f4b0: 2920 3d3d 2031 0a20 2020 2061 7761 6974  ) == 1.    await
+0000f4c0: 2063 6c69 656e 742e 6465 6c65 7465 5f75   client.delete_u
+0000f4d0: 6e63 6f6e 6669 726d 6564 5f74 7261 6e73  nconfirmed_trans
+0000f4e0: 6163 7469 6f6e 7328 3129 0a20 2020 2061  actions(1).    a
+0000f4f0: 7373 6572 7420 6c65 6e28 6177 6169 7420  ssert len(await 
+0000f500: 7761 6c6c 6574 2e77 616c 6c65 745f 7374  wallet.wallet_st
+0000f510: 6174 655f 6d61 6e61 6765 722e 7478 5f73  ate_manager.tx_s
+0000f520: 746f 7265 2e67 6574 5f75 6e63 6f6e 6669  tore.get_unconfi
+0000f530: 726d 6564 5f66 6f72 5f77 616c 6c65 7428  rmed_for_wallet(
+0000f540: 3129 2920 3d3d 2030 0a0a 2020 2020 736b  1)) == 0..    sk
+0000f550: 5f64 6963 7420 3d20 6177 6169 7420 636c  _dict = await cl
+0000f560: 6965 6e74 2e67 6574 5f70 7269 7661 7465  ient.get_private
+0000f570: 5f6b 6579 2870 6b73 5b30 5d29 0a20 2020  _key(pks[0]).   
+0000f580: 2061 7373 6572 7420 736b 5f64 6963 745b   assert sk_dict[
+0000f590: 2266 696e 6765 7270 7269 6e74 225d 203d  "fingerprint"] =
+0000f5a0: 3d20 706b 735b 305d 0a20 2020 2061 7373  = pks[0].    ass
+0000f5b0: 6572 7420 736b 5f64 6963 745b 2273 6b22  ert sk_dict["sk"
+0000f5c0: 5d20 6973 206e 6f74 204e 6f6e 650a 2020  ] is not None.  
+0000f5d0: 2020 6173 7365 7274 2073 6b5f 6469 6374    assert sk_dict
+0000f5e0: 5b22 706b 225d 2069 7320 6e6f 7420 4e6f  ["pk"] is not No
+0000f5f0: 6e65 0a20 2020 2061 7373 6572 7420 736b  ne.    assert sk
+0000f600: 5f64 6963 745b 2273 6565 6422 5d20 6973  _dict["seed"] is
+0000f610: 206e 6f74 204e 6f6e 650a 0a20 2020 206d   not None..    m
+0000f620: 6e65 6d6f 6e69 6320 3d20 6177 6169 7420  nemonic = await 
+0000f630: 636c 6965 6e74 2e67 656e 6572 6174 655f  client.generate_
+0000f640: 6d6e 656d 6f6e 6963 2829 0a20 2020 2061  mnemonic().    a
+0000f650: 7373 6572 7420 6c65 6e28 6d6e 656d 6f6e  ssert len(mnemon
+0000f660: 6963 2920 3d3d 2032 340a 0a20 2020 2061  ic) == 24..    a
+0000f670: 7761 6974 2063 6c69 656e 742e 6164 645f  wait client.add_
+0000f680: 6b65 7928 6d6e 656d 6f6e 6963 290a 0a20  key(mnemonic).. 
+0000f690: 2020 2070 6b73 203d 2061 7761 6974 2063     pks = await c
+0000f6a0: 6c69 656e 742e 6765 745f 7075 626c 6963  lient.get_public
+0000f6b0: 5f6b 6579 7328 290a 2020 2020 6173 7365  _keys().    asse
+0000f6c0: 7274 206c 656e 2870 6b73 2920 3d3d 2032  rt len(pks) == 2
+0000f6d0: 0a0a 2020 2020 6177 6169 7420 636c 6965  ..    await clie
+0000f6e0: 6e74 2e6c 6f67 5f69 6e28 706b 735b 315d  nt.log_in(pks[1]
+0000f6f0: 290a 2020 2020 736b 5f64 6963 7420 3d20  ).    sk_dict = 
+0000f700: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
+0000f710: 5f70 7269 7661 7465 5f6b 6579 2870 6b73  _private_key(pks
+0000f720: 5b31 5d29 0a20 2020 2061 7373 6572 7420  [1]).    assert 
+0000f730: 736b 5f64 6963 745b 2266 696e 6765 7270  sk_dict["fingerp
+0000f740: 7269 6e74 225d 203d 3d20 706b 735b 315d  rint"] == pks[1]
+0000f750: 0a0a 2020 2020 2320 4164 6420 696e 2072  ..    # Add in r
+0000f760: 6577 6172 6420 6164 6472 6573 7365 7320  eward addresses 
+0000f770: 696e 746f 2066 6172 6d65 7220 616e 6420  into farmer and 
+0000f780: 706f 6f6c 2066 6f72 2074 6573 7469 6e67  pool for testing
+0000f790: 2064 656c 6574 6520 6b65 7920 6368 6563   delete key chec
+0000f7a0: 6b73 0a20 2020 2023 2073 6574 2066 6172  ks.    # set far
+0000f7b0: 6d65 7220 746f 2066 6972 7374 2070 7269  mer to first pri
+0000f7c0: 7661 7465 206b 6579 0a20 2020 2073 6b20  vate key.    sk 
+0000f7d0: 3d20 6177 6169 7420 7761 6c6c 6574 5f6e  = await wallet_n
+0000f7e0: 6f64 652e 6765 745f 6b65 795f 666f 725f  ode.get_key_for_
+0000f7f0: 6669 6e67 6572 7072 696e 7428 706b 735b  fingerprint(pks[
+0000f800: 305d 290a 2020 2020 7465 7374 5f70 6820  0]).    test_ph 
+0000f810: 3d20 6372 6561 7465 5f70 757a 7a6c 6568  = create_puzzleh
+0000f820: 6173 685f 666f 725f 706b 286d 6173 7465  ash_for_pk(maste
+0000f830: 725f 736b 5f74 6f5f 7761 6c6c 6574 5f73  r_sk_to_wallet_s
+0000f840: 6b28 736b 2c20 7569 6e74 3332 2830 2929  k(sk, uint32(0))
+0000f850: 2e67 6574 5f67 3128 2929 0a20 2020 2077  .get_g1()).    w
+0000f860: 6974 6820 6c6f 636b 5f61 6e64 5f6c 6f61  ith lock_and_loa
+0000f870: 645f 636f 6e66 6967 2877 616c 6c65 745f  d_config(wallet_
+0000f880: 6e6f 6465 2e72 6f6f 745f 7061 7468 2c20  node.root_path, 
+0000f890: 2263 6f6e 6669 672e 7961 6d6c 2229 2061  "config.yaml") a
+0000f8a0: 7320 7465 7374 5f63 6f6e 6669 673a 0a20  s test_config:. 
+0000f8b0: 2020 2020 2020 2074 6573 745f 636f 6e66         test_conf
+0000f8c0: 6967 5b22 6661 726d 6572 225d 5b22 7863  ig["farmer"]["xc
+0000f8d0: 685f 7461 7267 6574 5f61 6464 7265 7373  h_target_address
+0000f8e0: 225d 203d 2065 6e63 6f64 655f 7075 7a7a  "] = encode_puzz
+0000f8f0: 6c65 5f68 6173 6828 7465 7374 5f70 682c  le_hash(test_ph,
+0000f900: 2022 7478 6368 2229 0a20 2020 2020 2020   "txch").       
+0000f910: 2023 2073 6574 2070 6f6f 6c20 746f 2073   # set pool to s
+0000f920: 6563 6f6e 6420 7072 6976 6174 6520 6b65  econd private ke
+0000f930: 790a 2020 2020 2020 2020 736b 203d 2061  y.        sk = a
+0000f940: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
+0000f950: 2e67 6574 5f6b 6579 5f66 6f72 5f66 696e  .get_key_for_fin
+0000f960: 6765 7270 7269 6e74 2870 6b73 5b31 5d29  gerprint(pks[1])
+0000f970: 0a20 2020 2020 2020 2074 6573 745f 7068  .        test_ph
+0000f980: 203d 2063 7265 6174 655f 7075 7a7a 6c65   = create_puzzle
+0000f990: 6861 7368 5f66 6f72 5f70 6b28 6d61 7374  hash_for_pk(mast
+0000f9a0: 6572 5f73 6b5f 746f 5f77 616c 6c65 745f  er_sk_to_wallet_
+0000f9b0: 736b 2873 6b2c 2075 696e 7433 3228 3029  sk(sk, uint32(0)
+0000f9c0: 292e 6765 745f 6731 2829 290a 2020 2020  ).get_g1()).    
+0000f9d0: 2020 2020 7465 7374 5f63 6f6e 6669 675b      test_config[
+0000f9e0: 2270 6f6f 6c22 5d5b 2278 6368 5f74 6172  "pool"]["xch_tar
+0000f9f0: 6765 745f 6164 6472 6573 7322 5d20 3d20  get_address"] = 
+0000fa00: 656e 636f 6465 5f70 757a 7a6c 655f 6861  encode_puzzle_ha
+0000fa10: 7368 2874 6573 745f 7068 2c20 2274 7863  sh(test_ph, "txc
+0000fa20: 6822 290a 2020 2020 2020 2020 7361 7665  h").        save
+0000fa30: 5f63 6f6e 6669 6728 7761 6c6c 6574 5f6e  _config(wallet_n
+0000fa40: 6f64 652e 726f 6f74 5f70 6174 682c 2022  ode.root_path, "
+0000fa50: 636f 6e66 6967 2e79 616d 6c22 2c20 7465  config.yaml", te
+0000fa60: 7374 5f63 6f6e 6669 6729 0a0a 2020 2020  st_config)..    
+0000fa70: 2320 4368 6563 6b20 6669 7273 7420 6b65  # Check first ke
+0000fa80: 790a 2020 2020 736b 5f64 6963 7420 3d20  y.    sk_dict = 
+0000fa90: 6177 6169 7420 636c 6965 6e74 2e63 6865  await client.che
+0000faa0: 636b 5f64 656c 6574 655f 6b65 7928 706b  ck_delete_key(pk
+0000fab0: 735b 305d 290a 2020 2020 6173 7365 7274  s[0]).    assert
+0000fac0: 2073 6b5f 6469 6374 5b22 6669 6e67 6572   sk_dict["finger
+0000fad0: 7072 696e 7422 5d20 3d3d 2070 6b73 5b30  print"] == pks[0
+0000fae0: 5d0a 2020 2020 6173 7365 7274 2073 6b5f  ].    assert sk_
+0000faf0: 6469 6374 5b22 7573 6564 5f66 6f72 5f66  dict["used_for_f
+0000fb00: 6172 6d65 725f 7265 7761 7264 7322 5d20  armer_rewards"] 
+0000fb10: 6973 2054 7275 650a 2020 2020 6173 7365  is True.    asse
+0000fb20: 7274 2073 6b5f 6469 6374 5b22 7573 6564  rt sk_dict["used
+0000fb30: 5f66 6f72 5f70 6f6f 6c5f 7265 7761 7264  _for_pool_reward
+0000fb40: 7322 5d20 6973 2046 616c 7365 0a0a 2020  s"] is False..  
+0000fb50: 2020 2320 4368 6563 6b20 7365 636f 6e64    # Check second
+0000fb60: 206b 6579 0a20 2020 2073 6b5f 6469 6374   key.    sk_dict
+0000fb70: 203d 2061 7761 6974 2063 6c69 656e 742e   = await client.
+0000fb80: 6368 6563 6b5f 6465 6c65 7465 5f6b 6579  check_delete_key
+0000fb90: 2870 6b73 5b31 5d29 0a20 2020 2061 7373  (pks[1]).    ass
+0000fba0: 6572 7420 736b 5f64 6963 745b 2266 696e  ert sk_dict["fin
+0000fbb0: 6765 7270 7269 6e74 225d 203d 3d20 706b  gerprint"] == pk
+0000fbc0: 735b 315d 0a20 2020 2061 7373 6572 7420  s[1].    assert 
+0000fbd0: 736b 5f64 6963 745b 2275 7365 645f 666f  sk_dict["used_fo
+0000fbe0: 725f 6661 726d 6572 5f72 6577 6172 6473  r_farmer_rewards
+0000fbf0: 225d 2069 7320 4661 6c73 650a 2020 2020  "] is False.    
+0000fc00: 6173 7365 7274 2073 6b5f 6469 6374 5b22  assert sk_dict["
+0000fc10: 7573 6564 5f66 6f72 5f70 6f6f 6c5f 7265  used_for_pool_re
+0000fc20: 7761 7264 7322 5d20 6973 2054 7275 650a  wards"] is True.
+0000fc30: 0a20 2020 2023 2043 6865 636b 2075 6e6b  .    # Check unk
+0000fc40: 6e6f 776e 206b 6579 0a20 2020 2073 6b5f  nown key.    sk_
+0000fc50: 6469 6374 203d 2061 7761 6974 2063 6c69  dict = await cli
+0000fc60: 656e 742e 6368 6563 6b5f 6465 6c65 7465  ent.check_delete
+0000fc70: 5f6b 6579 2831 3233 3435 362c 2031 3029  _key(123456, 10)
+0000fc80: 0a20 2020 2061 7373 6572 7420 736b 5f64  .    assert sk_d
+0000fc90: 6963 745b 2266 696e 6765 7270 7269 6e74  ict["fingerprint
+0000fca0: 225d 203d 3d20 3132 3334 3536 0a20 2020  "] == 123456.   
+0000fcb0: 2061 7373 6572 7420 736b 5f64 6963 745b   assert sk_dict[
+0000fcc0: 2275 7365 645f 666f 725f 6661 726d 6572  "used_for_farmer
+0000fcd0: 5f72 6577 6172 6473 225d 2069 7320 4661  _rewards"] is Fa
+0000fce0: 6c73 650a 2020 2020 6173 7365 7274 2073  lse.    assert s
+0000fcf0: 6b5f 6469 6374 5b22 7573 6564 5f66 6f72  k_dict["used_for
+0000fd00: 5f70 6f6f 6c5f 7265 7761 7264 7322 5d20  _pool_rewards"] 
+0000fd10: 6973 2046 616c 7365 0a0a 2020 2020 2320  is False..    # 
+0000fd20: 4164 6420 696e 206f 6273 6572 7665 7220  Add in observer 
+0000fd30: 7265 7761 7264 2061 6464 7265 7373 6573  reward addresses
+0000fd40: 2069 6e74 6f20 6661 726d 6572 2061 6e64   into farmer and
+0000fd50: 2070 6f6f 6c20 666f 7220 7465 7374 696e   pool for testin
+0000fd60: 6720 6465 6c65 7465 206b 6579 2063 6865  g delete key che
+0000fd70: 636b 730a 2020 2020 2320 7365 7420 6661  cks.    # set fa
+0000fd80: 726d 6572 2074 6f20 6669 7273 7420 7072  rmer to first pr
+0000fd90: 6976 6174 6520 6b65 790a 2020 2020 736b  ivate key.    sk
+0000fda0: 203d 2061 7761 6974 2077 616c 6c65 745f   = await wallet_
+0000fdb0: 6e6f 6465 2e67 6574 5f6b 6579 5f66 6f72  node.get_key_for
+0000fdc0: 5f66 696e 6765 7270 7269 6e74 2870 6b73  _fingerprint(pks
+0000fdd0: 5b30 5d29 0a20 2020 2074 6573 745f 7068  [0]).    test_ph
+0000fde0: 203d 2063 7265 6174 655f 7075 7a7a 6c65   = create_puzzle
+0000fdf0: 6861 7368 5f66 6f72 5f70 6b28 6d61 7374  hash_for_pk(mast
+0000fe00: 6572 5f73 6b5f 746f 5f77 616c 6c65 745f  er_sk_to_wallet_
+0000fe10: 736b 5f75 6e68 6172 6465 6e65 6428 736b  sk_unhardened(sk
+0000fe20: 2c20 7569 6e74 3332 2830 2929 2e67 6574  , uint32(0)).get
+0000fe30: 5f67 3128 2929 0a20 2020 2077 6974 6820  _g1()).    with 
+0000fe40: 6c6f 636b 5f61 6e64 5f6c 6f61 645f 636f  lock_and_load_co
+0000fe50: 6e66 6967 2877 616c 6c65 745f 6e6f 6465  nfig(wallet_node
+0000fe60: 2e72 6f6f 745f 7061 7468 2c20 2263 6f6e  .root_path, "con
+0000fe70: 6669 672e 7961 6d6c 2229 2061 7320 7465  fig.yaml") as te
+0000fe80: 7374 5f63 6f6e 6669 673a 0a20 2020 2020  st_config:.     
+0000fe90: 2020 2074 6573 745f 636f 6e66 6967 5b22     test_config["
+0000fea0: 6661 726d 6572 225d 5b22 7863 685f 7461  farmer"]["xch_ta
+0000feb0: 7267 6574 5f61 6464 7265 7373 225d 203d  rget_address"] =
+0000fec0: 2065 6e63 6f64 655f 7075 7a7a 6c65 5f68   encode_puzzle_h
+0000fed0: 6173 6828 7465 7374 5f70 682c 2022 7478  ash(test_ph, "tx
+0000fee0: 6368 2229 0a20 2020 2020 2020 2023 2073  ch").        # s
+0000fef0: 6574 2070 6f6f 6c20 746f 2073 6563 6f6e  et pool to secon
+0000ff00: 6420 7072 6976 6174 6520 6b65 790a 2020  d private key.  
+0000ff10: 2020 2020 2020 736b 203d 2061 7761 6974        sk = await
+0000ff20: 2077 616c 6c65 745f 6e6f 6465 2e67 6574   wallet_node.get
+0000ff30: 5f6b 6579 5f66 6f72 5f66 696e 6765 7270  _key_for_fingerp
+0000ff40: 7269 6e74 2870 6b73 5b31 5d29 0a20 2020  rint(pks[1]).   
+0000ff50: 2020 2020 2074 6573 745f 7068 203d 2063       test_ph = c
+0000ff60: 7265 6174 655f 7075 7a7a 6c65 6861 7368  reate_puzzlehash
+0000ff70: 5f66 6f72 5f70 6b28 6d61 7374 6572 5f73  _for_pk(master_s
+0000ff80: 6b5f 746f 5f77 616c 6c65 745f 736b 5f75  k_to_wallet_sk_u
+0000ff90: 6e68 6172 6465 6e65 6428 736b 2c20 7569  nhardened(sk, ui
+0000ffa0: 6e74 3332 2830 2929 2e67 6574 5f67 3128  nt32(0)).get_g1(
+0000ffb0: 2929 0a20 2020 2020 2020 2074 6573 745f  )).        test_
+0000ffc0: 636f 6e66 6967 5b22 706f 6f6c 225d 5b22  config["pool"]["
+0000ffd0: 7863 685f 7461 7267 6574 5f61 6464 7265  xch_target_addre
+0000ffe0: 7373 225d 203d 2065 6e63 6f64 655f 7075  ss"] = encode_pu
+0000fff0: 7a7a 6c65 5f68 6173 6828 7465 7374 5f70  zzle_hash(test_p
+00010000: 682c 2022 7478 6368 2229 0a20 2020 2020  h, "txch").     
+00010010: 2020 2073 6176 655f 636f 6e66 6967 2877     save_config(w
+00010020: 616c 6c65 745f 6e6f 6465 2e72 6f6f 745f  allet_node.root_
+00010030: 7061 7468 2c20 2263 6f6e 6669 672e 7961  path, "config.ya
+00010040: 6d6c 222c 2074 6573 745f 636f 6e66 6967  ml", test_config
+00010050: 290a 0a20 2020 2023 2043 6865 636b 2066  )..    # Check f
+00010060: 6972 7374 206b 6579 0a20 2020 2073 6b5f  irst key.    sk_
+00010070: 6469 6374 203d 2061 7761 6974 2063 6c69  dict = await cli
+00010080: 656e 742e 6368 6563 6b5f 6465 6c65 7465  ent.check_delete
+00010090: 5f6b 6579 2870 6b73 5b30 5d29 0a20 2020  _key(pks[0]).   
+000100a0: 2061 7373 6572 7420 736b 5f64 6963 745b   assert sk_dict[
+000100b0: 2266 696e 6765 7270 7269 6e74 225d 203d  "fingerprint"] =
+000100c0: 3d20 706b 735b 305d 0a20 2020 2061 7373  = pks[0].    ass
+000100d0: 6572 7420 736b 5f64 6963 745b 2275 7365  ert sk_dict["use
+000100e0: 645f 666f 725f 6661 726d 6572 5f72 6577  d_for_farmer_rew
+000100f0: 6172 6473 225d 2069 7320 5472 7565 0a20  ards"] is True. 
+00010100: 2020 2061 7373 6572 7420 736b 5f64 6963     assert sk_dic
+00010110: 745b 2275 7365 645f 666f 725f 706f 6f6c  t["used_for_pool
+00010120: 5f72 6577 6172 6473 225d 2069 7320 4661  _rewards"] is Fa
+00010130: 6c73 650a 0a20 2020 2023 2043 6865 636b  lse..    # Check
+00010140: 2073 6563 6f6e 6420 6b65 790a 2020 2020   second key.    
+00010150: 736b 5f64 6963 7420 3d20 6177 6169 7420  sk_dict = await 
+00010160: 636c 6965 6e74 2e63 6865 636b 5f64 656c  client.check_del
+00010170: 6574 655f 6b65 7928 706b 735b 315d 290a  ete_key(pks[1]).
+00010180: 2020 2020 6173 7365 7274 2073 6b5f 6469      assert sk_di
+00010190: 6374 5b22 6669 6e67 6572 7072 696e 7422  ct["fingerprint"
+000101a0: 5d20 3d3d 2070 6b73 5b31 5d0a 2020 2020  ] == pks[1].    
+000101b0: 6173 7365 7274 2073 6b5f 6469 6374 5b22  assert sk_dict["
+000101c0: 7573 6564 5f66 6f72 5f66 6172 6d65 725f  used_for_farmer_
+000101d0: 7265 7761 7264 7322 5d20 6973 2046 616c  rewards"] is Fal
+000101e0: 7365 0a20 2020 2061 7373 6572 7420 736b  se.    assert sk
+000101f0: 5f64 6963 745b 2275 7365 645f 666f 725f  _dict["used_for_
+00010200: 706f 6f6c 5f72 6577 6172 6473 225d 2069  pool_rewards"] i
+00010210: 7320 5472 7565 0a0a 2020 2020 2320 4368  s True..    # Ch
+00010220: 6563 6b20 756e 6b6e 6f77 6e20 6b65 790a  eck unknown key.
+00010230: 2020 2020 736b 5f64 6963 7420 3d20 6177      sk_dict = aw
+00010240: 6169 7420 636c 6965 6e74 2e63 6865 636b  ait client.check
+00010250: 5f64 656c 6574 655f 6b65 7928 3132 3334  _delete_key(1234
+00010260: 3536 2c20 3130 290a 2020 2020 6173 7365  56, 10).    asse
+00010270: 7274 2073 6b5f 6469 6374 5b22 6669 6e67  rt sk_dict["fing
+00010280: 6572 7072 696e 7422 5d20 3d3d 2031 3233  erprint"] == 123
+00010290: 3435 360a 2020 2020 6173 7365 7274 2073  456.    assert s
+000102a0: 6b5f 6469 6374 5b22 7573 6564 5f66 6f72  k_dict["used_for
+000102b0: 5f66 6172 6d65 725f 7265 7761 7264 7322  _farmer_rewards"
+000102c0: 5d20 6973 2046 616c 7365 0a20 2020 2061  ] is False.    a
+000102d0: 7373 6572 7420 736b 5f64 6963 745b 2275  ssert sk_dict["u
+000102e0: 7365 645f 666f 725f 706f 6f6c 5f72 6577  sed_for_pool_rew
+000102f0: 6172 6473 225d 2069 7320 4661 6c73 650a  ards"] is False.
+00010300: 0a20 2020 2061 7761 6974 2063 6c69 656e  .    await clien
+00010310: 742e 6465 6c65 7465 5f6b 6579 2870 6b73  t.delete_key(pks
+00010320: 5b30 5d29 0a20 2020 2061 7761 6974 2063  [0]).    await c
+00010330: 6c69 656e 742e 6c6f 675f 696e 2870 6b73  lient.log_in(pks
+00010340: 5b31 5d29 0a20 2020 2061 7373 6572 7420  [1]).    assert 
+00010350: 6c65 6e28 6177 6169 7420 636c 6965 6e74  len(await client
+00010360: 2e67 6574 5f70 7562 6c69 635f 6b65 7973  .get_public_keys
+00010370: 2829 2920 3d3d 2031 0a0a 2020 2020 6173  ()) == 1..    as
+00010380: 7365 7274 206e 6f74 2028 6177 6169 7420  sert not (await 
+00010390: 636c 6965 6e74 2e67 6574 5f73 796e 635f  client.get_sync_
+000103a0: 7374 6174 7573 2829 290a 0a20 2020 2077  status())..    w
+000103b0: 616c 6c65 7473 203d 2061 7761 6974 2063  allets = await c
+000103c0: 6c69 656e 742e 6765 745f 7761 6c6c 6574  lient.get_wallet
+000103d0: 7328 290a 2020 2020 6173 7365 7274 206c  s().    assert l
+000103e0: 656e 2877 616c 6c65 7473 2920 3d3d 2031  en(wallets) == 1
+000103f0: 0a20 2020 2061 7373 6572 7420 6177 6169  .    assert awai
+00010400: 7420 6765 745f 756e 636f 6e66 6972 6d65  t get_unconfirme
+00010410: 645f 6261 6c61 6e63 6528 636c 6965 6e74  d_balance(client
+00010420: 2c20 696e 7428 7761 6c6c 6574 735b 305d  , int(wallets[0]
+00010430: 5b22 6964 225d 2929 203d 3d20 300a 0a20  ["id"])) == 0.. 
+00010440: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
+00010450: 6169 7365 7328 5661 6c75 6545 7272 6f72  aises(ValueError
+00010460: 293a 0a20 2020 2020 2020 2061 7761 6974  ):.        await
+00010470: 2063 6c69 656e 742e 7365 6e64 5f74 7261   client.send_tra
+00010480: 6e73 6163 7469 6f6e 2877 616c 6c65 7473  nsaction(wallets
+00010490: 5b30 5d5b 2269 6422 5d2c 2075 696e 7436  [0]["id"], uint6
+000104a0: 3428 3130 3029 2c20 6164 6472 290a 0a20  4(100), addr).. 
+000104b0: 2020 2023 2044 656c 6574 6520 616c 6c20     # Delete all 
+000104c0: 6b65 7973 0a20 2020 2061 7761 6974 2063  keys.    await c
+000104d0: 6c69 656e 742e 6465 6c65 7465 5f61 6c6c  lient.delete_all
+000104e0: 5f6b 6579 7328 290a 2020 2020 6173 7365  _keys().    asse
+000104f0: 7274 206c 656e 2861 7761 6974 2063 6c69  rt len(await cli
+00010500: 656e 742e 6765 745f 7075 626c 6963 5f6b  ent.get_public_k
+00010510: 6579 7328 2929 203d 3d20 300a 0a0a 4070  eys()) == 0...@p
+00010520: 7974 6573 742e 6d61 726b 2e61 7379 6e63  ytest.mark.async
+00010530: 696f 0a61 7379 6e63 2064 6566 2074 6573  io.async def tes
+00010540: 745f 7365 6c65 6374 5f63 6f69 6e73 5f72  t_select_coins_r
+00010550: 7063 2877 616c 6c65 745f 7270 635f 656e  pc(wallet_rpc_en
+00010560: 7669 726f 6e6d 656e 743a 2057 616c 6c65  vironment: Walle
+00010570: 7452 7063 5465 7374 456e 7669 726f 6e6d  tRpcTestEnvironm
+00010580: 656e 7429 3a0a 2020 2020 656e 763a 2057  ent):.    env: W
+00010590: 616c 6c65 7452 7063 5465 7374 456e 7669  alletRpcTestEnvi
+000105a0: 726f 6e6d 656e 7420 3d20 7761 6c6c 6574  ronment = wallet
+000105b0: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
+000105c0: 0a0a 2020 2020 7761 6c6c 6574 5f32 3a20  ..    wallet_2: 
+000105d0: 5761 6c6c 6574 203d 2065 6e76 2e77 616c  Wallet = env.wal
+000105e0: 6c65 745f 322e 7761 6c6c 6574 0a20 2020  let_2.wallet.   
+000105f0: 2077 616c 6c65 745f 6e6f 6465 3a20 5761   wallet_node: Wa
+00010600: 6c6c 6574 4e6f 6465 203d 2065 6e76 2e77  lletNode = env.w
+00010610: 616c 6c65 745f 312e 6e6f 6465 0a20 2020  allet_1.node.   
+00010620: 2066 756c 6c5f 6e6f 6465 5f61 7069 3a20   full_node_api: 
+00010630: 4675 6c6c 4e6f 6465 5369 6d75 6c61 746f  FullNodeSimulato
+00010640: 7220 3d20 656e 762e 6675 6c6c 5f6e 6f64  r = env.full_nod
+00010650: 652e 6170 690a 2020 2020 636c 6965 6e74  e.api.    client
+00010660: 3a20 5761 6c6c 6574 5270 6343 6c69 656e  : WalletRpcClien
+00010670: 7420 3d20 656e 762e 7761 6c6c 6574 5f31  t = env.wallet_1
+00010680: 2e72 7063 5f63 6c69 656e 740a 2020 2020  .rpc_client.    
+00010690: 636c 6965 6e74 5f32 3a20 5761 6c6c 6574  client_2: Wallet
+000106a0: 5270 6343 6c69 656e 7420 3d20 656e 762e  RpcClient = env.
+000106b0: 7761 6c6c 6574 5f32 2e72 7063 5f63 6c69  wallet_2.rpc_cli
+000106c0: 656e 740a 0a20 2020 2066 756e 6473 203d  ent..    funds =
+000106d0: 2061 7761 6974 2067 656e 6572 6174 655f   await generate_
+000106e0: 6675 6e64 7328 6675 6c6c 5f6e 6f64 655f  funds(full_node_
+000106f0: 6170 692c 2065 6e76 2e77 616c 6c65 745f  api, env.wallet_
+00010700: 3129 0a0a 2020 2020 6164 6472 203d 2065  1)..    addr = e
+00010710: 6e63 6f64 655f 7075 7a7a 6c65 5f68 6173  ncode_puzzle_has
+00010720: 6828 6177 6169 7420 7761 6c6c 6574 5f32  h(await wallet_2
+00010730: 2e67 6574 5f6e 6577 5f70 757a 7a6c 6568  .get_new_puzzleh
+00010740: 6173 6828 292c 2022 7478 6368 2229 0a20  ash(), "txch"). 
+00010750: 2020 2063 6f69 6e5f 3330 303a 204c 6973     coin_300: Lis
+00010760: 745b 436f 696e 5d0a 2020 2020 7478 5f61  t[Coin].    tx_a
+00010770: 6d6f 756e 7473 3a20 4c69 7374 5b75 696e  mounts: List[uin
+00010780: 7436 345d 203d 205b 7569 6e74 3634 2831  t64] = [uint64(1
+00010790: 3030 3029 2c20 7569 6e74 3634 2833 3030  000), uint64(300
+000107a0: 292c 2075 696e 7436 3428 3130 3030 292c  ), uint64(1000),
+000107b0: 2075 696e 7436 3428 3130 3030 292c 2075   uint64(1000), u
+000107c0: 696e 7436 3428 3130 3030 3029 5d0a 2020  int64(10000)].  
+000107d0: 2020 666f 7220 7478 5f61 6d6f 756e 7420    for tx_amount 
+000107e0: 696e 2074 785f 616d 6f75 6e74 733a 0a20  in tx_amounts:. 
+000107f0: 2020 2020 2020 2066 756e 6473 202d 3d20         funds -= 
+00010800: 7478 5f61 6d6f 756e 740a 2020 2020 2020  tx_amount.      
+00010810: 2020 2320 6372 6561 7465 2063 6f69 6e73    # create coins
+00010820: 2066 6f72 2074 6573 7473 0a20 2020 2020   for tests.     
+00010830: 2020 2074 7820 3d20 6177 6169 7420 636c     tx = await cl
+00010840: 6965 6e74 2e73 656e 645f 7472 616e 7361  ient.send_transa
+00010850: 6374 696f 6e28 312c 2074 785f 616d 6f75  ction(1, tx_amou
+00010860: 6e74 2c20 6164 6472 290a 2020 2020 2020  nt, addr).      
+00010870: 2020 7370 656e 645f 6275 6e64 6c65 203d    spend_bundle =
+00010880: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
+00010890: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+000108a0: 7370 656e 645f 6275 6e64 6c65 2069 7320  spend_bundle is 
+000108b0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+000108c0: 2066 6f72 2063 6f69 6e20 696e 2073 7065   for coin in spe
+000108d0: 6e64 5f62 756e 646c 652e 6164 6469 7469  nd_bundle.additi
+000108e0: 6f6e 7328 293a 0a20 2020 2020 2020 2020  ons():.         
+000108f0: 2020 2069 6620 636f 696e 2e61 6d6f 756e     if coin.amoun
+00010900: 7420 3d3d 2075 696e 7436 3428 3330 3029  t == uint64(300)
+00010910: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010920: 2020 636f 696e 5f33 3030 203d 205b 636f    coin_300 = [co
+00010930: 696e 5d0a 0a20 2020 2020 2020 2061 7761  in]..        awa
+00010940: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
+00010950: 7274 2832 302c 2074 785f 696e 5f6d 656d  rt(20, tx_in_mem
+00010960: 706f 6f6c 2c20 5472 7565 2c20 636c 6965  pool, True, clie
+00010970: 6e74 2c20 7478 2e6e 616d 6529 0a20 2020  nt, tx.name).   
+00010980: 2020 2020 2061 7761 6974 2066 6172 6d5f       await farm_
+00010990: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
+000109a0: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
+000109b0: 745f 6e6f 6465 2c20 7370 656e 645f 6275  t_node, spend_bu
+000109c0: 6e64 6c65 290a 2020 2020 2020 2020 6177  ndle).        aw
+000109d0: 6169 7420 7469 6d65 5f6f 7574 5f61 7373  ait time_out_ass
+000109e0: 6572 7428 3230 2c20 6765 745f 636f 6e66  ert(20, get_conf
+000109f0: 6972 6d65 645f 6261 6c61 6e63 652c 2066  irmed_balance, f
+00010a00: 756e 6473 2c20 636c 6965 6e74 2c20 3129  unds, client, 1)
+00010a10: 0a0a 2020 2020 2320 7465 7374 206d 696e  ..    # test min
+00010a20: 2063 6f69 6e20 616d 6f75 6e74 0a20 2020   coin amount.   
+00010a30: 206d 696e 5f63 6f69 6e73 3a20 4c69 7374   min_coins: List
+00010a40: 5b43 6f69 6e5d 203d 2061 7761 6974 2063  [Coin] = await c
+00010a50: 6c69 656e 745f 322e 7365 6c65 6374 5f63  lient_2.select_c
+00010a60: 6f69 6e73 2861 6d6f 756e 743d 3130 3030  oins(amount=1000
+00010a70: 2c20 7761 6c6c 6574 5f69 643d 312c 206d  , wallet_id=1, m
+00010a80: 696e 5f63 6f69 6e5f 616d 6f75 6e74 3d75  in_coin_amount=u
+00010a90: 696e 7436 3428 3130 3031 2929 0a20 2020  int64(1001)).   
+00010aa0: 2061 7373 6572 7420 6d69 6e5f 636f 696e   assert min_coin
+00010ab0: 7320 6973 206e 6f74 204e 6f6e 650a 2020  s is not None.  
+00010ac0: 2020 6173 7365 7274 206c 656e 286d 696e    assert len(min
+00010ad0: 5f63 6f69 6e73 2920 3d3d 2031 2061 6e64  _coins) == 1 and
+00010ae0: 206d 696e 5f63 6f69 6e73 5b30 5d2e 616d   min_coins[0].am
+00010af0: 6f75 6e74 203d 3d20 7569 6e74 3634 2831  ount == uint64(1
+00010b00: 3030 3030 290a 0a20 2020 2023 2074 6573  0000)..    # tes
+00010b10: 7420 6d61 7820 636f 696e 2061 6d6f 756e  t max coin amoun
+00010b20: 740a 2020 2020 6d61 785f 636f 696e 733a  t.    max_coins:
+00010b30: 204c 6973 745b 436f 696e 5d20 3d20 6177   List[Coin] = aw
+00010b40: 6169 7420 636c 6965 6e74 5f32 2e73 656c  ait client_2.sel
+00010b50: 6563 745f 636f 696e 7328 0a20 2020 2020  ect_coins(.     
+00010b60: 2020 2061 6d6f 756e 743d 3230 3030 2c20     amount=2000, 
+00010b70: 7761 6c6c 6574 5f69 643d 312c 206d 696e  wallet_id=1, min
+00010b80: 5f63 6f69 6e5f 616d 6f75 6e74 3d75 696e  _coin_amount=uin
+00010b90: 7436 3428 3939 3929 2c20 6d61 785f 636f  t64(999), max_co
+00010ba0: 696e 5f61 6d6f 756e 743d 7569 6e74 3634  in_amount=uint64
+00010bb0: 2839 3939 3929 0a20 2020 2029 0a20 2020  (9999).    ).   
+00010bc0: 2061 7373 6572 7420 6d61 785f 636f 696e   assert max_coin
+00010bd0: 7320 6973 206e 6f74 204e 6f6e 650a 2020  s is not None.  
+00010be0: 2020 6173 7365 7274 206c 656e 286d 6178    assert len(max
+00010bf0: 5f63 6f69 6e73 2920 3d3d 2032 2061 6e64  _coins) == 2 and
+00010c00: 206d 6178 5f63 6f69 6e73 5b30 5d2e 616d   max_coins[0].am
+00010c10: 6f75 6e74 203d 3d20 7569 6e74 3634 2831  ount == uint64(1
+00010c20: 3030 3029 0a0a 2020 2020 2320 7465 7374  000)..    # test
+00010c30: 2065 7863 6c75 6465 6420 636f 696e 2061   excluded coin a
+00010c40: 6d6f 756e 7473 0a20 2020 206e 6f6e 5f31  mounts.    non_1
+00010c50: 3030 305f 616d 743a 2069 6e74 203d 2073  000_amt: int = s
+00010c60: 756d 2861 2066 6f72 2061 2069 6e20 7478  um(a for a in tx
+00010c70: 5f61 6d6f 756e 7473 2069 6620 6120 213d  _amounts if a !=
+00010c80: 2031 3030 3029 0a20 2020 2065 7863 6c75   1000).    exclu
+00010c90: 6465 645f 616d 745f 636f 696e 733a 204c  ded_amt_coins: L
+00010ca0: 6973 745b 436f 696e 5d20 3d20 6177 6169  ist[Coin] = awai
+00010cb0: 7420 636c 6965 6e74 5f32 2e73 656c 6563  t client_2.selec
+00010cc0: 745f 636f 696e 7328 0a20 2020 2020 2020  t_coins(.       
+00010cd0: 2061 6d6f 756e 743d 6e6f 6e5f 3130 3030   amount=non_1000
+00010ce0: 5f61 6d74 2c20 7761 6c6c 6574 5f69 643d  _amt, wallet_id=
+00010cf0: 312c 2065 7863 6c75 6465 645f 616d 6f75  1, excluded_amou
+00010d00: 6e74 733d 5b75 696e 7436 3428 3130 3030  nts=[uint64(1000
+00010d10: 295d 0a20 2020 2029 0a20 2020 2061 7373  )].    ).    ass
+00010d20: 6572 7420 6578 636c 7564 6564 5f61 6d74  ert excluded_amt
+00010d30: 5f63 6f69 6e73 2069 7320 6e6f 7420 4e6f  _coins is not No
+00010d40: 6e65 0a20 2020 2061 7373 6572 7420 280a  ne.    assert (.
+00010d50: 2020 2020 2020 2020 6c65 6e28 6578 636c          len(excl
+00010d60: 7564 6564 5f61 6d74 5f63 6f69 6e73 2920  uded_amt_coins) 
+00010d70: 3d3d 206c 656e 2874 7570 6c65 2861 2066  == len(tuple(a f
+00010d80: 6f72 2061 2069 6e20 7478 5f61 6d6f 756e  or a in tx_amoun
+00010d90: 7473 2069 6620 6120 213d 2031 3030 3029  ts if a != 1000)
+00010da0: 290a 2020 2020 2020 2020 616e 6420 7375  ).        and su
+00010db0: 6d28 632e 616d 6f75 6e74 2066 6f72 2063  m(c.amount for c
+00010dc0: 2069 6e20 6578 636c 7564 6564 5f61 6d74   in excluded_amt
+00010dd0: 5f63 6f69 6e73 2920 3d3d 206e 6f6e 5f31  _coins) == non_1
+00010de0: 3030 305f 616d 740a 2020 2020 290a 0a20  000_amt.    ).. 
+00010df0: 2020 2023 2074 6573 7420 6578 636c 7564     # test exclud
+00010e00: 6564 2063 6f69 6e73 0a20 2020 2077 6974  ed coins.    wit
+00010e10: 6820 7079 7465 7374 2e72 6169 7365 7328  h pytest.raises(
+00010e20: 5661 6c75 6545 7272 6f72 293a 0a20 2020  ValueError):.   
+00010e30: 2020 2020 2061 7761 6974 2063 6c69 656e       await clien
+00010e40: 745f 322e 7365 6c65 6374 5f63 6f69 6e73  t_2.select_coins
+00010e50: 2861 6d6f 756e 743d 3530 3030 2c20 7761  (amount=5000, wa
+00010e60: 6c6c 6574 5f69 643d 312c 2065 7863 6c75  llet_id=1, exclu
+00010e70: 6465 645f 636f 696e 733d 6d69 6e5f 636f  ded_coins=min_co
+00010e80: 696e 7329 0a20 2020 2065 7863 6c75 6465  ins).    exclude
+00010e90: 645f 7465 7374 203d 2061 7761 6974 2063  d_test = await c
+00010ea0: 6c69 656e 745f 322e 7365 6c65 6374 5f63  lient_2.select_c
+00010eb0: 6f69 6e73 2861 6d6f 756e 743d 3133 3030  oins(amount=1300
+00010ec0: 2c20 7761 6c6c 6574 5f69 643d 312c 2065  , wallet_id=1, e
+00010ed0: 7863 6c75 6465 645f 636f 696e 733d 636f  xcluded_coins=co
+00010ee0: 696e 5f33 3030 290a 2020 2020 6173 7365  in_300).    asse
+00010ef0: 7274 206c 656e 2865 7863 6c75 6465 645f  rt len(excluded_
+00010f00: 7465 7374 2920 3d3d 2032 0a20 2020 2066  test) == 2.    f
+00010f10: 6f72 2063 6f69 6e20 696e 2065 7863 6c75  or coin in exclu
+00010f20: 6465 645f 7465 7374 3a0a 2020 2020 2020  ded_test:.      
+00010f30: 2020 6173 7365 7274 2063 6f69 6e20 213d    assert coin !=
+00010f40: 2063 6f69 6e5f 3330 305b 305d 0a0a 2020   coin_300[0]..  
+00010f50: 2020 2320 7465 7374 2067 6574 2063 6f69    # test get coi
+00010f60: 6e73 0a20 2020 2061 6c6c 5f63 6f69 6e73  ns.    all_coins
+00010f70: 2c20 5f2c 205f 203d 2061 7761 6974 2063  , _, _ = await c
+00010f80: 6c69 656e 745f 322e 6765 745f 7370 656e  lient_2.get_spen
+00010f90: 6461 626c 655f 636f 696e 7328 0a20 2020  dable_coins(.   
+00010fa0: 2020 2020 2077 616c 6c65 745f 6964 3d31       wallet_id=1
+00010fb0: 2c20 6578 636c 7564 6564 5f63 6f69 6e5f  , excluded_coin_
+00010fc0: 6964 733d 5b63 2e6e 616d 6528 292e 6865  ids=[c.name().he
+00010fd0: 7828 2920 666f 7220 6320 696e 2065 7863  x() for c in exc
+00010fe0: 6c75 6465 645f 616d 745f 636f 696e 735d  luded_amt_coins]
+00010ff0: 0a20 2020 2029 0a20 2020 2061 7373 6572  .    ).    asser
+00011000: 7420 6578 636c 7564 6564 5f61 6d74 5f63  t excluded_amt_c
+00011010: 6f69 6e73 206e 6f74 2069 6e20 616c 6c5f  oins not in all_
+00011020: 636f 696e 730a 2020 2020 616c 6c5f 636f  coins.    all_co
+00011030: 696e 732c 205f 2c20 5f20 3d20 6177 6169  ins, _, _ = awai
+00011040: 7420 636c 6965 6e74 5f32 2e67 6574 5f73  t client_2.get_s
+00011050: 7065 6e64 6162 6c65 5f63 6f69 6e73 2877  pendable_coins(w
+00011060: 616c 6c65 745f 6964 3d31 2c20 6578 636c  allet_id=1, excl
+00011070: 7564 6564 5f61 6d6f 756e 7473 3d5b 7569  uded_amounts=[ui
+00011080: 6e74 3634 2831 3030 3029 5d29 0a20 2020  nt64(1000)]).   
+00011090: 2061 7373 6572 7420 6578 636c 7564 6564   assert excluded
+000110a0: 5f61 6d74 5f63 6f69 6e73 206e 6f74 2069  _amt_coins not i
+000110b0: 6e20 616c 6c5f 636f 696e 730a 2020 2020  n all_coins.    
+000110c0: 616c 6c5f 636f 696e 735f 322c 205f 2c20  all_coins_2, _, 
+000110d0: 5f20 3d20 6177 6169 7420 636c 6965 6e74  _ = await client
+000110e0: 5f32 2e67 6574 5f73 7065 6e64 6162 6c65  _2.get_spendable
+000110f0: 5f63 6f69 6e73 2877 616c 6c65 745f 6964  _coins(wallet_id
+00011100: 3d31 2c20 6d61 785f 636f 696e 5f61 6d6f  =1, max_coin_amo
+00011110: 756e 743d 7569 6e74 3634 2839 3939 2929  unt=uint64(999))
+00011120: 0a20 2020 2061 7373 6572 7420 616c 6c5f  .    assert all_
+00011130: 636f 696e 735f 325b 305d 2e63 6f69 6e20  coins_2[0].coin 
+00011140: 3d3d 2063 6f69 6e5f 3330 305b 305d 0a20  == coin_300[0]. 
+00011150: 2020 2077 6974 6820 7079 7465 7374 2e72     with pytest.r
+00011160: 6169 7365 7328 5661 6c75 6545 7272 6f72  aises(ValueError
+00011170: 293a 2020 2320 7661 6c69 6461 7465 2066  ):  # validate f
+00011180: 6169 6c20 6f6e 2069 6e76 616c 6964 2063  ail on invalid c
+00011190: 6f69 6e20 6964 2e0a 2020 2020 2020 2020  oin id..        
+000111a0: 6177 6169 7420 636c 6965 6e74 5f32 2e67  await client_2.g
+000111b0: 6574 5f73 7065 6e64 6162 6c65 5f63 6f69  et_spendable_coi
+000111c0: 6e73 2877 616c 6c65 745f 6964 3d31 2c20  ns(wallet_id=1, 
+000111d0: 6578 636c 7564 6564 5f63 6f69 6e5f 6964  excluded_coin_id
+000111e0: 733d 5b22 6122 5d29 0a0a 0a40 7079 7465  s=["a"])...@pyte
+000111f0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+00011200: 6173 796e 6320 6465 6620 7465 7374 5f67  async def test_g
+00011210: 6574 5f63 6f69 6e5f 7265 636f 7264 735f  et_coin_records_
+00011220: 7270 6328 0a20 2020 2077 616c 6c65 745f  rpc(.    wallet_
+00011230: 7270 635f 656e 7669 726f 6e6d 656e 743a  rpc_environment:
+00011240: 2057 616c 6c65 7452 7063 5465 7374 456e   WalletRpcTestEn
+00011250: 7669 726f 6e6d 656e 742c 0a29 202d 3e20  vironment,.) -> 
+00011260: 4e6f 6e65 3a0a 2020 2020 656e 763a 2057  None:.    env: W
+00011270: 616c 6c65 7452 7063 5465 7374 456e 7669  alletRpcTestEnvi
+00011280: 726f 6e6d 656e 7420 3d20 7761 6c6c 6574  ronment = wallet
+00011290: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
+000112a0: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
+000112b0: 3a20 5761 6c6c 6574 4e6f 6465 203d 2065  : WalletNode = e
+000112c0: 6e76 2e77 616c 6c65 745f 312e 6e6f 6465  nv.wallet_1.node
+000112d0: 0a20 2020 2063 6c69 656e 743a 2057 616c  .    client: Wal
+000112e0: 6c65 7452 7063 436c 6965 6e74 203d 2065  letRpcClient = e
+000112f0: 6e76 2e77 616c 6c65 745f 312e 7270 635f  nv.wallet_1.rpc_
+00011300: 636c 6965 6e74 0a20 2020 2073 746f 7265  client.    store
+00011310: 203d 2077 616c 6c65 745f 6e6f 6465 2e77   = wallet_node.w
+00011320: 616c 6c65 745f 7374 6174 655f 6d61 6e61  allet_state_mana
+00011330: 6765 722e 636f 696e 5f73 746f 7265 0a0a  ger.coin_store..
+00011340: 2020 2020 666f 7220 7265 636f 7264 2069      for record i
+00011350: 6e20 5b72 6563 6f72 645f 312c 2072 6563  n [record_1, rec
+00011360: 6f72 645f 322c 2072 6563 6f72 645f 332c  ord_2, record_3,
+00011370: 2072 6563 6f72 645f 342c 2072 6563 6f72   record_4, recor
+00011380: 645f 352c 2072 6563 6f72 645f 362c 2072  d_5, record_6, r
+00011390: 6563 6f72 645f 372c 2072 6563 6f72 645f  ecord_7, record_
+000113a0: 382c 2072 6563 6f72 645f 395d 3a0a 2020  8, record_9]:.  
+000113b0: 2020 2020 2020 6177 6169 7420 7374 6f72        await stor
+000113c0: 652e 6164 645f 636f 696e 5f72 6563 6f72  e.add_coin_recor
+000113d0: 6428 7265 636f 7264 290a 0a20 2020 2061  d(record)..    a
+000113e0: 7379 6e63 2064 6566 2072 756e 5f74 6573  sync def run_tes
+000113f0: 745f 6361 7365 280a 2020 2020 2020 2020  t_case(.        
+00011400: 7465 7374 5f63 6173 653a 2073 7472 2c0a  test_case: str,.
+00011410: 2020 2020 2020 2020 7465 7374 5f72 6571          test_req
+00011420: 7565 7374 3a20 4765 7443 6f69 6e52 6563  uest: GetCoinRec
+00011430: 6f72 6473 2c0a 2020 2020 2020 2020 7465  ords,.        te
+00011440: 7374 5f74 6f74 616c 5f63 6f75 6e74 3a20  st_total_count: 
+00011450: 4f70 7469 6f6e 616c 5b69 6e74 5d2c 0a20  Optional[int],. 
+00011460: 2020 2020 2020 2074 6573 745f 7265 636f         test_reco
+00011470: 7264 733a 204c 6973 745b 5761 6c6c 6574  rds: List[Wallet
+00011480: 436f 696e 5265 636f 7264 5d2c 0a20 2020  CoinRecord],.   
+00011490: 2029 3a0a 2020 2020 2020 2020 7265 7370   ):.        resp
+000114a0: 6f6e 7365 203d 2061 7761 6974 2063 6c69  onse = await cli
+000114b0: 656e 742e 6765 745f 636f 696e 5f72 6563  ent.get_coin_rec
+000114c0: 6f72 6473 2874 6573 745f 7265 7175 6573  ords(test_reques
+000114d0: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
+000114e0: 7420 7265 7370 6f6e 7365 5b22 636f 696e  t response["coin
+000114f0: 5f72 6563 6f72 6473 225d 203d 3d20 5b63  _records"] == [c
+00011500: 6f69 6e2e 746f 5f6a 736f 6e5f 6469 6374  oin.to_json_dict
+00011510: 5f70 6172 7365 645f 6d65 7461 6461 7461  _parsed_metadata
+00011520: 2829 2066 6f72 2063 6f69 6e20 696e 2074  () for coin in t
+00011530: 6573 745f 7265 636f 7264 735d 2c20 7465  est_records], te
+00011540: 7374 5f63 6173 650a 2020 2020 2020 2020  st_case.        
+00011550: 6173 7365 7274 2072 6573 706f 6e73 655b  assert response[
+00011560: 2274 6f74 616c 5f63 6f75 6e74 225d 203d  "total_count"] =
+00011570: 3d20 7465 7374 5f74 6f74 616c 5f63 6f75  = test_total_cou
+00011580: 6e74 2c20 7465 7374 5f63 6173 650a 0a20  nt, test_case.. 
+00011590: 2020 2066 6f72 206e 616d 652c 2074 6573     for name, tes
+000115a0: 7473 2069 6e20 7b0a 2020 2020 2020 2020  ts in {.        
+000115b0: 226f 6666 7365 745f 6c69 6d69 7422 3a20  "offset_limit": 
+000115c0: 6765 745f 636f 696e 5f72 6563 6f72 6473  get_coin_records
+000115d0: 5f6f 6666 7365 745f 6c69 6d69 745f 7465  _offset_limit_te
+000115e0: 7374 732c 0a20 2020 2020 2020 2022 7761  sts,.        "wa
+000115f0: 6c6c 6574 5f69 6422 3a20 6765 745f 636f  llet_id": get_co
+00011600: 696e 5f72 6563 6f72 6473 5f77 616c 6c65  in_records_walle
+00011610: 745f 6964 5f74 6573 7473 2c0a 2020 2020  t_id_tests,.    
+00011620: 2020 2020 2277 616c 6c65 745f 7479 7065      "wallet_type
+00011630: 223a 2067 6574 5f63 6f69 6e5f 7265 636f  ": get_coin_reco
+00011640: 7264 735f 7761 6c6c 6574 5f74 7970 655f  rds_wallet_type_
+00011650: 7465 7374 732c 0a20 2020 2020 2020 2022  tests,.        "
+00011660: 636f 696e 5f74 7970 6522 3a20 6765 745f  coin_type": get_
+00011670: 636f 696e 5f72 6563 6f72 6473 5f63 6f69  coin_records_coi
+00011680: 6e5f 7479 7065 5f74 6573 7473 2c0a 2020  n_type_tests,.  
+00011690: 2020 2020 2020 2263 6f69 6e5f 6964 5f66        "coin_id_f
+000116a0: 696c 7465 7222 3a20 6765 745f 636f 696e  ilter": get_coin
+000116b0: 5f72 6563 6f72 6473 5f63 6f69 6e5f 6964  _records_coin_id
+000116c0: 5f66 696c 7465 725f 7465 7374 732c 0a20  _filter_tests,. 
+000116d0: 2020 2020 2020 2022 7075 7a7a 6c65 5f68         "puzzle_h
+000116e0: 6173 685f 6669 6c74 6572 223a 2067 6574  ash_filter": get
+000116f0: 5f63 6f69 6e5f 7265 636f 7264 735f 7075  _coin_records_pu
+00011700: 7a7a 6c65 5f68 6173 685f 6669 6c74 6572  zzle_hash_filter
+00011710: 5f74 6573 7473 2c0a 2020 2020 2020 2020  _tests,.        
+00011720: 2270 6172 656e 745f 636f 696e 5f69 645f  "parent_coin_id_
+00011730: 6669 6c74 6572 223a 2067 6574 5f63 6f69  filter": get_coi
+00011740: 6e5f 7265 636f 7264 735f 7061 7265 6e74  n_records_parent
+00011750: 5f63 6f69 6e5f 6964 5f66 696c 7465 725f  _coin_id_filter_
+00011760: 7465 7374 732c 0a20 2020 2020 2020 2022  tests,.        "
+00011770: 616d 6f75 6e74 5f66 696c 7465 7222 3a20  amount_filter": 
+00011780: 6765 745f 636f 696e 5f72 6563 6f72 6473  get_coin_records
+00011790: 5f61 6d6f 756e 745f 6669 6c74 6572 5f74  _amount_filter_t
+000117a0: 6573 7473 2c0a 2020 2020 2020 2020 2261  ests,.        "a
+000117b0: 6d6f 756e 745f 7261 6e67 6522 3a20 6765  mount_range": ge
+000117c0: 745f 636f 696e 5f72 6563 6f72 6473 5f61  t_coin_records_a
+000117d0: 6d6f 756e 745f 7261 6e67 655f 7465 7374  mount_range_test
+000117e0: 732c 0a20 2020 2020 2020 2022 636f 6e66  s,.        "conf
+000117f0: 6972 6d65 645f 7261 6e67 6522 3a20 6765  irmed_range": ge
+00011800: 745f 636f 696e 5f72 6563 6f72 6473 5f63  t_coin_records_c
+00011810: 6f6e 6669 726d 6564 5f72 616e 6765 5f74  onfirmed_range_t
+00011820: 6573 7473 2c0a 2020 2020 2020 2020 2273  ests,.        "s
+00011830: 7065 6e74 5f72 616e 6765 223a 2067 6574  pent_range": get
+00011840: 5f63 6f69 6e5f 7265 636f 7264 735f 7370  _coin_records_sp
+00011850: 656e 745f 7261 6e67 655f 7465 7374 732c  ent_range_tests,
+00011860: 0a20 2020 2020 2020 2022 6f72 6465 7222  .        "order"
+00011870: 3a20 6765 745f 636f 696e 5f72 6563 6f72  : get_coin_recor
+00011880: 6473 5f6f 7264 6572 5f74 6573 7473 2c0a  ds_order_tests,.
+00011890: 2020 2020 2020 2020 2272 6576 6572 7365          "reverse
+000118a0: 223a 2067 6574 5f63 6f69 6e5f 7265 636f  ": get_coin_reco
+000118b0: 7264 735f 7265 7665 7273 655f 7465 7374  rds_reverse_test
+000118c0: 732c 0a20 2020 207d 2e69 7465 6d73 2829  s,.    }.items()
+000118d0: 3a0a 2020 2020 2020 2020 666f 7220 692c  :.        for i,
+000118e0: 2028 7265 7175 6573 742c 2065 7870 6563   (request, expec
+000118f0: 7465 645f 7265 636f 7264 7329 2069 6e20  ted_records) in 
+00011900: 656e 756d 6572 6174 6528 7465 7374 7329  enumerate(tests)
+00011910: 3a0a 2020 2020 2020 2020 2020 2020 6177  :.            aw
+00011920: 6169 7420 7275 6e5f 7465 7374 5f63 6173  ait run_test_cas
+00011930: 6528 6622 7b6e 616d 657d 2d7b 697d 222c  e(f"{name}-{i}",
+00011940: 2072 6571 7565 7374 2c20 4e6f 6e65 2c20   request, None, 
+00011950: 6578 7065 6374 6564 5f72 6563 6f72 6473  expected_records
+00011960: 290a 0a20 2020 2066 6f72 206e 616d 652c  )..    for name,
+00011970: 2074 6f74 616c 5f63 6f75 6e74 5f74 6573   total_count_tes
+00011980: 7473 2069 6e20 7b0a 2020 2020 2020 2020  ts in {.        
+00011990: 2274 6f74 616c 5f63 6f75 6e74 223a 2067  "total_count": g
+000119a0: 6574 5f63 6f69 6e5f 7265 636f 7264 735f  et_coin_records_
+000119b0: 696e 636c 7564 655f 746f 7461 6c5f 636f  include_total_co
+000119c0: 756e 745f 7465 7374 732c 0a20 2020 2020  unt_tests,.     
+000119d0: 2020 2022 6d69 7865 6422 3a20 6765 745f     "mixed": get_
+000119e0: 636f 696e 5f72 6563 6f72 6473 5f6d 6978  coin_records_mix
+000119f0: 6564 5f74 6573 7473 2c0a 2020 2020 7d2e  ed_tests,.    }.
+00011a00: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
+00011a10: 2066 6f72 2069 2c20 2872 6571 7565 7374   for i, (request
+00011a20: 2c20 6578 7065 6374 6564 5f74 6f74 616c  , expected_total
+00011a30: 5f63 6f75 6e74 2c20 6578 7065 6374 6564  _count, expected
+00011a40: 5f72 6563 6f72 6473 2920 696e 2065 6e75  _records) in enu
+00011a50: 6d65 7261 7465 2874 6f74 616c 5f63 6f75  merate(total_cou
+00011a60: 6e74 5f74 6573 7473 293a 0a20 2020 2020  nt_tests):.     
+00011a70: 2020 2020 2020 2061 7761 6974 2072 756e         await run
+00011a80: 5f74 6573 745f 6361 7365 2866 227b 6e61  _test_case(f"{na
+00011a90: 6d65 7d2d 7b69 7d22 2c20 7265 7175 6573  me}-{i}", reques
+00011aa0: 742c 2065 7870 6563 7465 645f 746f 7461  t, expected_tota
+00011ab0: 6c5f 636f 756e 742c 2065 7870 6563 7465  l_count, expecte
+00011ac0: 645f 7265 636f 7264 7329 0a0a 0a40 7079  d_records)...@py
+00011ad0: 7465 7374 2e6d 6172 6b2e 6173 796e 6369  test.mark.asynci
+00011ae0: 6f0a 6173 796e 6320 6465 6620 7465 7374  o.async def test
+00011af0: 5f67 6574 5f63 6f69 6e5f 7265 636f 7264  _get_coin_record
+00011b00: 735f 7270 635f 6c69 6d69 7473 280a 2020  s_rpc_limits(.  
+00011b10: 2020 7761 6c6c 6574 5f72 7063 5f65 6e76    wallet_rpc_env
+00011b20: 6972 6f6e 6d65 6e74 3a20 5761 6c6c 6574  ironment: Wallet
+00011b30: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+00011b40: 6e74 2c0a 2920 2d3e 204e 6f6e 653a 0a20  nt,.) -> None:. 
+00011b50: 2020 2065 6e76 3a20 5761 6c6c 6574 5270     env: WalletRp
+00011b60: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
+00011b70: 203d 2077 616c 6c65 745f 7270 635f 656e   = wallet_rpc_en
+00011b80: 7669 726f 6e6d 656e 740a 2020 2020 7761  vironment.    wa
+00011b90: 6c6c 6574 5f6e 6f64 653a 2057 616c 6c65  llet_node: Walle
+00011ba0: 744e 6f64 6520 3d20 656e 762e 7761 6c6c  tNode = env.wall
+00011bb0: 6574 5f31 2e6e 6f64 650a 2020 2020 636c  et_1.node.    cl
+00011bc0: 6965 6e74 3a20 5761 6c6c 6574 5270 6343  ient: WalletRpcC
+00011bd0: 6c69 656e 7420 3d20 656e 762e 7761 6c6c  lient = env.wall
+00011be0: 6574 5f31 2e72 7063 5f63 6c69 656e 740a  et_1.rpc_client.
+00011bf0: 2020 2020 7270 635f 7365 7276 6572 3a20      rpc_server: 
+00011c00: 4f70 7469 6f6e 616c 5b52 7063 5365 7276  Optional[RpcServ
+00011c10: 6572 5d20 3d20 7761 6c6c 6574 5f72 7063  er] = wallet_rpc
+00011c20: 5f65 6e76 6972 6f6e 6d65 6e74 2e77 616c  _environment.wal
+00011c30: 6c65 745f 312e 7365 7276 6963 652e 7270  let_1.service.rp
+00011c40: 635f 7365 7276 6572 0a20 2020 2061 7373  c_server.    ass
+00011c50: 6572 7420 7270 635f 7365 7276 6572 2069  ert rpc_server i
+00011c60: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2061  s not None.    a
+00011c70: 7069 3a20 5761 6c6c 6574 5270 6341 7069  pi: WalletRpcApi
+00011c80: 203d 2063 6173 7428 5761 6c6c 6574 5270   = cast(WalletRp
+00011c90: 6341 7069 2c20 7270 635f 7365 7276 6572  cApi, rpc_server
+00011ca0: 2e72 7063 5f61 7069 290a 2020 2020 7374  .rpc_api).    st
+00011cb0: 6f72 6520 3d20 7761 6c6c 6574 5f6e 6f64  ore = wallet_nod
+00011cc0: 652e 7761 6c6c 6574 5f73 7461 7465 5f6d  e.wallet_state_m
+00011cd0: 616e 6167 6572 2e63 6f69 6e5f 7374 6f72  anager.coin_stor
+00011ce0: 650a 0a20 2020 206d 6178 5f63 6f69 6e73  e..    max_coins
+00011cf0: 203d 2061 7069 2e6d 6178 5f67 6574 5f63   = api.max_get_c
+00011d00: 6f69 6e5f 7265 636f 7264 735f 6c69 6d69  oin_records_limi
+00011d10: 7420 2a20 3130 0a20 2020 2063 6f69 6e5f  t * 10.    coin_
+00011d20: 7265 636f 7264 7320 3d20 5b0a 2020 2020  records = [.    
+00011d30: 2020 2020 5761 6c6c 6574 436f 696e 5265      WalletCoinRe
+00011d40: 636f 7264 280a 2020 2020 2020 2020 2020  cord(.          
+00011d50: 2020 436f 696e 2874 6f6b 656e 5f62 7974    Coin(token_byt
+00011d60: 6573 2833 3229 2c20 746f 6b65 6e5f 6279  es(32), token_by
+00011d70: 7465 7328 3332 292c 2075 696e 7436 342e  tes(32), uint64.
+00011d80: 6672 6f6d 5f62 7974 6573 2874 6f6b 656e  from_bytes(token
+00011d90: 5f62 7974 6573 2838 2929 292c 0a20 2020  _bytes(8))),.   
+00011da0: 2020 2020 2020 2020 2075 696e 7433 3228           uint32(
+00011db0: 7569 6e74 3332 2e66 726f 6d5f 6279 7465  uint32.from_byte
+00011dc0: 7328 746f 6b65 6e5f 6279 7465 7328 3429  s(token_bytes(4)
+00011dd0: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+00011de0: 7569 6e74 3332 2830 292c 0a20 2020 2020  uint32(0),.     
+00011df0: 2020 2020 2020 2046 616c 7365 2c0a 2020         False,.  
+00011e00: 2020 2020 2020 2020 2020 4661 6c73 652c            False,
+00011e10: 0a20 2020 2020 2020 2020 2020 2057 616c  .            Wal
+00011e20: 6c65 7454 7970 652e 5354 414e 4441 5244  letType.STANDARD
+00011e30: 5f57 414c 4c45 542c 0a20 2020 2020 2020  _WALLET,.       
+00011e40: 2020 2020 2075 696e 7433 3228 3029 2c0a       uint32(0),.
+00011e50: 2020 2020 2020 2020 2020 2020 436f 696e              Coin
+00011e60: 5479 7065 2e4e 4f52 4d41 4c2c 0a20 2020  Type.NORMAL,.   
+00011e70: 2020 2020 2020 2020 204e 6f6e 652c 0a20           None,. 
+00011e80: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00011e90: 2066 6f72 205f 2069 6e20 7261 6e67 6528   for _ in range(
+00011ea0: 6d61 785f 636f 696e 7329 0a20 2020 205d  max_coins).    ]
+00011eb0: 0a20 2020 2066 6f72 2072 6563 6f72 6420  .    for record 
+00011ec0: 696e 2063 6f69 6e5f 7265 636f 7264 733a  in coin_records:
+00011ed0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+00011ee0: 746f 7265 2e61 6464 5f63 6f69 6e5f 7265  tore.add_coin_re
+00011ef0: 636f 7264 2872 6563 6f72 6429 0a0a 2020  cord(record)..  
+00011f00: 2020 6c69 6d69 7420 3d20 6170 692e 6d61    limit = api.ma
+00011f10: 785f 6765 745f 636f 696e 5f72 6563 6f72  x_get_coin_recor
+00011f20: 6473 5f6c 696d 6974 0a20 2020 2072 6573  ds_limit.    res
+00011f30: 706f 6e73 655f 7265 636f 7264 7320 3d20  ponse_records = 
+00011f40: 5b5d 0a20 2020 2066 6f72 2069 2069 6e20  [].    for i in 
+00011f50: 7261 6e67 6528 696e 7428 6d61 785f 636f  range(int(max_co
+00011f60: 696e 7320 2f20 6170 692e 6d61 785f 6765  ins / api.max_ge
+00011f70: 745f 636f 696e 5f72 6563 6f72 6473 5f6c  t_coin_records_l
+00011f80: 696d 6974 2929 3a0a 2020 2020 2020 2020  imit)):.        
+00011f90: 6f66 6673 6574 203d 2075 696e 7433 3228  offset = uint32(
+00011fa0: 6170 692e 6d61 785f 6765 745f 636f 696e  api.max_get_coin
+00011fb0: 5f72 6563 6f72 6473 5f6c 696d 6974 202a  _records_limit *
+00011fc0: 2069 290a 2020 2020 2020 2020 7265 7370   i).        resp
+00011fd0: 6f6e 7365 203d 2061 7761 6974 2063 6c69  onse = await cli
+00011fe0: 656e 742e 6765 745f 636f 696e 5f72 6563  ent.get_coin_rec
+00011ff0: 6f72 6473 2847 6574 436f 696e 5265 636f  ords(GetCoinReco
+00012000: 7264 7328 6c69 6d69 743d 6c69 6d69 742c  rds(limit=limit,
+00012010: 206f 6666 7365 743d 6f66 6673 6574 2c20   offset=offset, 
+00012020: 696e 636c 7564 655f 746f 7461 6c5f 636f  include_total_co
+00012030: 756e 743d 5472 7565 2929 0a20 2020 2020  unt=True)).     
+00012040: 2020 2072 6573 706f 6e73 655f 7265 636f     response_reco
+00012050: 7264 732e 6578 7465 6e64 286c 6973 7428  rds.extend(list(
+00012060: 7265 7370 6f6e 7365 5b22 636f 696e 5f72  response["coin_r
+00012070: 6563 6f72 6473 225d 2929 0a0a 2020 2020  ecords"]))..    
+00012080: 6173 7365 7274 206c 656e 2872 6573 706f  assert len(respo
+00012090: 6e73 655f 7265 636f 7264 7329 203d 3d20  nse_records) == 
+000120a0: 6d61 785f 636f 696e 730a 2020 2020 2320  max_coins.    # 
+000120b0: 4d61 6b65 2073 7572 6520 7765 2067 6f74  Make sure we got
+000120c0: 2061 6c6c 2065 7870 6563 7465 6420 7265   all expected re
+000120d0: 636f 7264 730a 2020 2020 7061 7273 6564  cords.    parsed
+000120e0: 5f72 6563 6f72 6473 203d 205b 636f 696e  _records = [coin
+000120f0: 2e74 6f5f 6a73 6f6e 5f64 6963 745f 7061  .to_json_dict_pa
+00012100: 7273 6564 5f6d 6574 6164 6174 6128 2920  rsed_metadata() 
+00012110: 666f 7220 636f 696e 2069 6e20 636f 696e  for coin in coin
+00012120: 5f72 6563 6f72 6473 5d0a 2020 2020 666f  _records].    fo
+00012130: 7220 6578 7065 6374 6564 5f72 6563 6f72  r expected_recor
+00012140: 6420 696e 2070 6172 7365 645f 7265 636f  d in parsed_reco
+00012150: 7264 733a 0a20 2020 2020 2020 2061 7373  rds:.        ass
+00012160: 6572 7420 6578 7065 6374 6564 5f72 6563  ert expected_rec
+00012170: 6f72 6420 696e 2072 6573 706f 6e73 655f  ord in response_
+00012180: 7265 636f 7264 730a 0a20 2020 2023 2052  records..    # R
+00012190: 6571 7565 7374 2063 6f69 6e73 2077 6974  equest coins wit
+000121a0: 6820 7468 6520 6d61 7820 6e75 6d62 6572  h the max number
+000121b0: 206f 6620 6669 6c74 6572 2069 7465 6d73   of filter items
+000121c0: 0a20 2020 206d 6178 5f66 696c 7465 725f  .    max_filter_
+000121d0: 6974 656d 7320 3d20 6170 692e 6d61 785f  items = api.max_
+000121e0: 6765 745f 636f 696e 5f72 6563 6f72 6473  get_coin_records
+000121f0: 5f66 696c 7465 725f 6974 656d 730a 2020  _filter_items.  
+00012200: 2020 6669 6c74 6572 5f72 6563 6f72 6473    filter_records
+00012210: 203d 2063 6f69 6e5f 7265 636f 7264 735b   = coin_records[
+00012220: 3a6d 6178 5f66 696c 7465 725f 6974 656d  :max_filter_item
+00012230: 735d 0a20 2020 2063 6f69 6e5f 6964 5f66  s].    coin_id_f
+00012240: 696c 7465 7220 3d20 4861 7368 4669 6c74  ilter = HashFilt
+00012250: 6572 2e69 6e63 6c75 6465 285b 636f 696e  er.include([coin
+00012260: 2e6e 616d 6528 2920 666f 7220 636f 696e  .name() for coin
+00012270: 2069 6e20 6669 6c74 6572 5f72 6563 6f72   in filter_recor
+00012280: 6473 5d29 0a20 2020 2070 757a 7a6c 655f  ds]).    puzzle_
+00012290: 6861 7368 5f66 696c 7465 7220 3d20 4861  hash_filter = Ha
+000122a0: 7368 4669 6c74 6572 2e69 6e63 6c75 6465  shFilter.include
+000122b0: 285b 636f 696e 2e63 6f69 6e2e 7075 7a7a  ([coin.coin.puzz
+000122c0: 6c65 5f68 6173 6820 666f 7220 636f 696e  le_hash for coin
+000122d0: 2069 6e20 6669 6c74 6572 5f72 6563 6f72   in filter_recor
+000122e0: 6473 5d29 0a20 2020 2070 6172 656e 745f  ds]).    parent_
+000122f0: 636f 696e 5f69 645f 6669 6c74 6572 203d  coin_id_filter =
+00012300: 2048 6173 6846 696c 7465 722e 696e 636c   HashFilter.incl
+00012310: 7564 6528 5b63 6f69 6e2e 636f 696e 2e70  ude([coin.coin.p
+00012320: 6172 656e 745f 636f 696e 5f69 6e66 6f20  arent_coin_info 
+00012330: 666f 7220 636f 696e 2069 6e20 6669 6c74  for coin in filt
+00012340: 6572 5f72 6563 6f72 6473 5d29 0a20 2020  er_records]).   
+00012350: 2061 6d6f 756e 745f 6669 6c74 6572 203d   amount_filter =
+00012360: 2041 6d6f 756e 7446 696c 7465 722e 696e   AmountFilter.in
+00012370: 636c 7564 6528 5b75 696e 7436 3428 636f  clude([uint64(co
+00012380: 696e 2e63 6f69 6e2e 616d 6f75 6e74 2920  in.coin.amount) 
+00012390: 666f 7220 636f 696e 2069 6e20 636f 696e  for coin in coin
+000123a0: 5f72 6563 6f72 6473 5b3a 6d61 785f 6669  _records[:max_fi
+000123b0: 6c74 6572 5f69 7465 6d73 5d5d 290a 2020  lter_items]]).  
+000123c0: 2020 666f 7220 7265 7175 6573 7420 696e    for request in
+000123d0: 205b 0a20 2020 2020 2020 2047 6574 436f   [.        GetCo
+000123e0: 696e 5265 636f 7264 7328 636f 696e 5f69  inRecords(coin_i
+000123f0: 645f 6669 6c74 6572 3d63 6f69 6e5f 6964  d_filter=coin_id
+00012400: 5f66 696c 7465 7229 2c0a 2020 2020 2020  _filter),.      
+00012410: 2020 4765 7443 6f69 6e52 6563 6f72 6473    GetCoinRecords
+00012420: 2870 757a 7a6c 655f 6861 7368 5f66 696c  (puzzle_hash_fil
+00012430: 7465 723d 7075 7a7a 6c65 5f68 6173 685f  ter=puzzle_hash_
+00012440: 6669 6c74 6572 292c 0a20 2020 2020 2020  filter),.       
+00012450: 2047 6574 436f 696e 5265 636f 7264 7328   GetCoinRecords(
+00012460: 7061 7265 6e74 5f63 6f69 6e5f 6964 5f66  parent_coin_id_f
+00012470: 696c 7465 723d 7061 7265 6e74 5f63 6f69  ilter=parent_coi
+00012480: 6e5f 6964 5f66 696c 7465 7229 2c0a 2020  n_id_filter),.  
+00012490: 2020 2020 2020 4765 7443 6f69 6e52 6563        GetCoinRec
+000124a0: 6f72 6473 2861 6d6f 756e 745f 6669 6c74  ords(amount_filt
+000124b0: 6572 3d61 6d6f 756e 745f 6669 6c74 6572  er=amount_filter
+000124c0: 292c 0a20 2020 2020 2020 2047 6574 436f  ),.        GetCo
+000124d0: 696e 5265 636f 7264 7328 0a20 2020 2020  inRecords(.     
+000124e0: 2020 2020 2020 2063 6f69 6e5f 6964 5f66         coin_id_f
+000124f0: 696c 7465 723d 636f 696e 5f69 645f 6669  ilter=coin_id_fi
+00012500: 6c74 6572 2c0a 2020 2020 2020 2020 2020  lter,.          
+00012510: 2020 7075 7a7a 6c65 5f68 6173 685f 6669    puzzle_hash_fi
+00012520: 6c74 6572 3d70 757a 7a6c 655f 6861 7368  lter=puzzle_hash
+00012530: 5f66 696c 7465 722c 0a20 2020 2020 2020  _filter,.       
+00012540: 2020 2020 2070 6172 656e 745f 636f 696e       parent_coin
+00012550: 5f69 645f 6669 6c74 6572 3d70 6172 656e  _id_filter=paren
+00012560: 745f 636f 696e 5f69 645f 6669 6c74 6572  t_coin_id_filter
+00012570: 2c0a 2020 2020 2020 2020 2020 2020 616d  ,.            am
+00012580: 6f75 6e74 5f66 696c 7465 723d 616d 6f75  ount_filter=amou
+00012590: 6e74 5f66 696c 7465 722c 0a20 2020 2020  nt_filter,.     
+000125a0: 2020 2029 2c0a 2020 2020 5d3a 0a20 2020     ),.    ]:.   
+000125b0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000125c0: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
+000125d0: 5f63 6f69 6e5f 7265 636f 7264 7328 7265  _coin_records(re
+000125e0: 7175 6573 7429 0a20 2020 2020 2020 2070  quest).        p
+000125f0: 6172 7365 645f 7265 636f 7264 7320 3d20  arsed_records = 
+00012600: 5b63 6f69 6e2e 746f 5f6a 736f 6e5f 6469  [coin.to_json_di
+00012610: 6374 5f70 6172 7365 645f 6d65 7461 6461  ct_parsed_metada
+00012620: 7461 2829 2066 6f72 2063 6f69 6e20 696e  ta() for coin in
+00012630: 2066 696c 7465 725f 7265 636f 7264 735d   filter_records]
+00012640: 0a20 2020 2020 2020 2066 6f72 2065 7870  .        for exp
+00012650: 6563 7465 645f 7265 636f 7264 2069 6e20  ected_record in 
+00012660: 7061 7273 6564 5f72 6563 6f72 6473 3a0a  parsed_records:.
+00012670: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00012680: 7274 2065 7870 6563 7465 645f 7265 636f  rt expected_reco
+00012690: 7264 2069 6e20 7265 7370 6f6e 7365 5b22  rd in response["
+000126a0: 636f 696e 5f72 6563 6f72 6473 225d 0a0a  coin_records"]..
+000126b0: 0a40 7079 7465 7374 2e6d 6172 6b2e 6173  .@pytest.mark.as
+000126c0: 796e 6369 6f0a 6173 796e 6320 6465 6620  yncio.async def 
+000126d0: 7465 7374 5f67 6574 5f63 6f69 6e5f 7265  test_get_coin_re
+000126e0: 636f 7264 735f 7270 635f 6661 696c 7572  cords_rpc_failur
+000126f0: 6573 280a 2020 2020 7761 6c6c 6574 5f72  es(.    wallet_r
+00012700: 7063 5f65 6e76 6972 6f6e 6d65 6e74 3a20  pc_environment: 
+00012710: 5761 6c6c 6574 5270 6354 6573 7445 6e76  WalletRpcTestEnv
+00012720: 6972 6f6e 6d65 6e74 2c0a 2920 2d3e 204e  ironment,.) -> N
+00012730: 6f6e 653a 0a20 2020 2065 6e76 3a20 5761  one:.    env: Wa
+00012740: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
+00012750: 6f6e 6d65 6e74 203d 2077 616c 6c65 745f  onment = wallet_
+00012760: 7270 635f 656e 7669 726f 6e6d 656e 740a  rpc_environment.
+00012770: 2020 2020 636c 6965 6e74 3a20 5761 6c6c      client: Wall
+00012780: 6574 5270 6343 6c69 656e 7420 3d20 656e  etRpcClient = en
+00012790: 762e 7761 6c6c 6574 5f31 2e72 7063 5f63  v.wallet_1.rpc_c
+000127a0: 6c69 656e 740a 2020 2020 7270 635f 7365  lient.    rpc_se
+000127b0: 7276 6572 3a20 4f70 7469 6f6e 616c 5b52  rver: Optional[R
+000127c0: 7063 5365 7276 6572 5d20 3d20 7761 6c6c  pcServer] = wall
+000127d0: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
+000127e0: 6e74 2e77 616c 6c65 745f 312e 7365 7276  nt.wallet_1.serv
+000127f0: 6963 652e 7270 635f 7365 7276 6572 0a20  ice.rpc_server. 
+00012800: 2020 2061 7373 6572 7420 7270 635f 7365     assert rpc_se
+00012810: 7276 6572 2069 7320 6e6f 7420 4e6f 6e65  rver is not None
+00012820: 0a20 2020 2061 7069 203d 2063 6173 7428  .    api = cast(
+00012830: 5761 6c6c 6574 5270 6341 7069 2c20 7270  WalletRpcApi, rp
+00012840: 635f 7365 7276 6572 2e72 7063 5f61 7069  c_server.rpc_api
+00012850: 290a 0a20 2020 2074 6f6f 5f6d 616e 795f  )..    too_many_
+00012860: 6861 7368 6573 203d 205b 6279 7465 7333  hashes = [bytes3
+00012870: 3228 746f 6b65 6e5f 6279 7465 7328 3332  2(token_bytes(32
+00012880: 2929 2066 6f72 205f 2069 6e20 7261 6e67  )) for _ in rang
+00012890: 6528 6170 692e 6d61 785f 6765 745f 636f  e(api.max_get_co
+000128a0: 696e 5f72 6563 6f72 6473 5f66 696c 7465  in_records_filte
+000128b0: 725f 6974 656d 7320 2b20 3129 5d0a 2020  r_items + 1)].  
+000128c0: 2020 746f 6f5f 6d61 6e79 5f61 6d6f 756e    too_many_amoun
+000128d0: 7473 203d 205b 0a20 2020 2020 2020 2075  ts = [.        u
+000128e0: 696e 7436 3428 7569 6e74 3634 2e66 726f  int64(uint64.fro
+000128f0: 6d5f 6279 7465 7328 746f 6b65 6e5f 6279  m_bytes(token_by
+00012900: 7465 7328 3829 2929 2066 6f72 205f 2069  tes(8))) for _ i
+00012910: 6e20 7261 6e67 6528 6170 692e 6d61 785f  n range(api.max_
+00012920: 6765 745f 636f 696e 5f72 6563 6f72 6473  get_coin_records
+00012930: 5f66 696c 7465 725f 6974 656d 7320 2b20  _filter_items + 
+00012940: 3129 0a20 2020 205d 0a20 2020 2023 2052  1).    ].    # R
+00012950: 756e 2072 6571 7565 7374 7320 7768 6963  un requests whic
+00012960: 6820 6578 6365 6564 7320 7468 6520 616c  h exceeds the al
+00012970: 6c6f 7765 6420 6c69 6d69 7420 616e 6420  lowed limit and 
+00012980: 636f 6e74 6169 6e20 746f 6f20 6d75 6368  contain too much
+00012990: 2066 696c 7465 7220 6974 656d 730a 2020   filter items.  
+000129a0: 2020 666f 7220 6e61 6d65 2c20 7265 7175    for name, requ
+000129b0: 6573 7420 696e 207b 0a20 2020 2020 2020  est in {.       
+000129c0: 2022 6c69 6d69 7422 3a20 4765 7443 6f69   "limit": GetCoi
+000129d0: 6e52 6563 6f72 6473 286c 696d 6974 3d75  nRecords(limit=u
+000129e0: 696e 7433 3228 6170 692e 6d61 785f 6765  int32(api.max_ge
+000129f0: 745f 636f 696e 5f72 6563 6f72 6473 5f6c  t_coin_records_l
+00012a00: 696d 6974 202b 2031 2929 2c0a 2020 2020  imit + 1)),.    
+00012a10: 2020 2020 2263 6f69 6e5f 6964 5f66 696c      "coin_id_fil
+00012a20: 7465 7222 3a20 4765 7443 6f69 6e52 6563  ter": GetCoinRec
+00012a30: 6f72 6473 2863 6f69 6e5f 6964 5f66 696c  ords(coin_id_fil
+00012a40: 7465 723d 4861 7368 4669 6c74 6572 2e69  ter=HashFilter.i
+00012a50: 6e63 6c75 6465 2874 6f6f 5f6d 616e 795f  nclude(too_many_
+00012a60: 6861 7368 6573 2929 2c0a 2020 2020 2020  hashes)),.      
+00012a70: 2020 2270 757a 7a6c 655f 6861 7368 5f66    "puzzle_hash_f
+00012a80: 696c 7465 7222 3a20 4765 7443 6f69 6e52  ilter": GetCoinR
+00012a90: 6563 6f72 6473 2870 757a 7a6c 655f 6861  ecords(puzzle_ha
+00012aa0: 7368 5f66 696c 7465 723d 4861 7368 4669  sh_filter=HashFi
+00012ab0: 6c74 6572 2e69 6e63 6c75 6465 2874 6f6f  lter.include(too
+00012ac0: 5f6d 616e 795f 6861 7368 6573 2929 2c0a  _many_hashes)),.
+00012ad0: 2020 2020 2020 2020 2270 6172 656e 745f          "parent_
+00012ae0: 636f 696e 5f69 645f 6669 6c74 6572 223a  coin_id_filter":
+00012af0: 2047 6574 436f 696e 5265 636f 7264 7328   GetCoinRecords(
+00012b00: 7061 7265 6e74 5f63 6f69 6e5f 6964 5f66  parent_coin_id_f
+00012b10: 696c 7465 723d 4861 7368 4669 6c74 6572  ilter=HashFilter
+00012b20: 2e69 6e63 6c75 6465 2874 6f6f 5f6d 616e  .include(too_man
+00012b30: 795f 6861 7368 6573 2929 2c0a 2020 2020  y_hashes)),.    
+00012b40: 2020 2020 2261 6d6f 756e 745f 6669 6c74      "amount_filt
+00012b50: 6572 223a 2047 6574 436f 696e 5265 636f  er": GetCoinReco
+00012b60: 7264 7328 616d 6f75 6e74 5f66 696c 7465  rds(amount_filte
+00012b70: 723d 416d 6f75 6e74 4669 6c74 6572 2e69  r=AmountFilter.i
+00012b80: 6e63 6c75 6465 2874 6f6f 5f6d 616e 795f  nclude(too_many_
+00012b90: 616d 6f75 6e74 7329 292c 0a20 2020 207d  amounts)),.    }
+00012ba0: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
+00012bb0: 2020 7769 7468 2070 7974 6573 742e 7261    with pytest.ra
+00012bc0: 6973 6573 2856 616c 7565 4572 726f 722c  ises(ValueError,
+00012bd0: 206d 6174 6368 3d6e 616d 6529 3a0a 2020   match=name):.  
+00012be0: 2020 2020 2020 2020 2020 6177 6169 7420            await 
+00012bf0: 636c 6965 6e74 2e67 6574 5f63 6f69 6e5f  client.get_coin_
+00012c00: 7265 636f 7264 7328 7265 7175 6573 7429  records(request)
+00012c10: 0a0a 2020 2020 2320 5479 7065 2076 616c  ..    # Type val
+00012c20: 6964 6174 696f 6e20 6973 2068 616e 646c  idation is handl
+00012c30: 6564 2076 6961 2060 5374 7265 616d 6162  ed via `Streamab
+00012c40: 6c65 2e66 726f 6d5f 6a73 6f6e 5f64 6963  le.from_json_dic
+00012c50: 74c2 b420 6275 7420 7468 6520 6265 6c6f  t.. but the belo
+00012c60: 7720 7368 6f75 6c64 206d 616b 6520 6174  w should make at
+00012c70: 206c 6561 7374 2073 7572 6520 6974 2074   least sure it t
+00012c80: 7269 6767 6572 732e 0a20 2020 2066 6f72  riggers..    for
+00012c90: 2066 6965 6c64 2c20 7661 6c75 6520 696e   field, value in
+00012ca0: 207b 0a20 2020 2020 2020 2022 6f66 6673   {.        "offs
+00012cb0: 6574 223a 2022 696e 7661 6c69 6422 2c0a  et": "invalid",.
+00012cc0: 2020 2020 2020 2020 226c 696d 6974 223a          "limit":
+00012cd0: 2022 696e 7661 6c69 6422 2c0a 2020 2020   "invalid",.    
+00012ce0: 2020 2020 2277 616c 6c65 745f 6964 223a      "wallet_id":
+00012cf0: 2022 696e 7661 6c69 6422 2c0a 2020 2020   "invalid",.    
+00012d00: 2020 2020 2277 616c 6c65 745f 7479 7065      "wallet_type
+00012d10: 223a 2031 3030 2c0a 2020 2020 2020 2020  ": 100,.        
+00012d20: 2263 6f69 6e5f 7479 7065 223a 2031 3030  "coin_type": 100
+00012d30: 2c0a 2020 2020 2020 2020 2263 6f69 6e5f  ,.        "coin_
+00012d40: 6964 5f66 696c 7465 7222 3a20 2269 6e76  id_filter": "inv
+00012d50: 616c 6964 222c 0a20 2020 2020 2020 2022  alid",.        "
+00012d60: 7075 7a7a 6c65 5f68 6173 685f 6669 6c74  puzzle_hash_filt
+00012d70: 6572 223a 2022 696e 7661 6c69 6422 2c0a  er": "invalid",.
+00012d80: 2020 2020 2020 2020 2270 6172 656e 745f          "parent_
+00012d90: 636f 696e 5f69 645f 6669 6c74 6572 223a  coin_id_filter":
+00012da0: 2022 696e 7661 6c69 6422 2c0a 2020 2020   "invalid",.    
+00012db0: 2020 2020 2261 6d6f 756e 745f 6669 6c74      "amount_filt
+00012dc0: 6572 223a 2022 696e 7661 6c69 6422 2c0a  er": "invalid",.
+00012dd0: 2020 2020 2020 2020 2261 6d6f 756e 745f          "amount_
+00012de0: 7261 6e67 6522 3a20 2269 6e76 616c 6964  range": "invalid
+00012df0: 222c 0a20 2020 2020 2020 2022 636f 6e66  ",.        "conf
+00012e00: 6972 6d65 645f 7261 6e67 6522 3a20 2269  irmed_range": "i
+00012e10: 6e76 616c 6964 222c 0a20 2020 2020 2020  nvalid",.       
+00012e20: 2022 7370 656e 745f 7261 6e67 6522 3a20   "spent_range": 
+00012e30: 2269 6e76 616c 6964 222c 0a20 2020 2020  "invalid",.     
+00012e40: 2020 2022 6f72 6465 7222 3a20 382c 0a20     "order": 8,. 
+00012e50: 2020 207d 2e69 7465 6d73 2829 3a0a 2020     }.items():.  
+00012e60: 2020 2020 2020 7769 7468 2070 7974 6573        with pytes
+00012e70: 742e 7261 6973 6573 2828 436f 6e76 6572  t.raises((Conver
+00012e80: 7369 6f6e 4572 726f 722c 2049 6e76 616c  sionError, Inval
+00012e90: 6964 5479 7065 4572 726f 722c 2056 616c  idTypeError, Val
+00012ea0: 7565 4572 726f 7229 293a 0a20 2020 2020  ueError)):.     
+00012eb0: 2020 2020 2020 206a 736f 6e5f 6469 6374         json_dict
+00012ec0: 203d 2047 6574 436f 696e 5265 636f 7264   = GetCoinRecord
+00012ed0: 7328 292e 746f 5f6a 736f 6e5f 6469 6374  s().to_json_dict
+00012ee0: 2829 0a20 2020 2020 2020 2020 2020 206a  ().            j
+00012ef0: 736f 6e5f 6469 6374 5b66 6965 6c64 5d20  son_dict[field] 
+00012f00: 3d20 7661 6c75 650a 2020 2020 2020 2020  = value.        
+00012f10: 2020 2020 6177 6169 7420 6170 692e 6765      await api.ge
+00012f20: 745f 636f 696e 5f72 6563 6f72 6473 286a  t_coin_records(j
+00012f30: 736f 6e5f 6469 6374 290a 0a0a 4070 7974  son_dict)...@pyt
+00012f40: 6573 742e 6d61 726b 2e61 7379 6e63 696f  est.mark.asyncio
+00012f50: 0a61 7379 6e63 2064 6566 2074 6573 745f  .async def test_
+00012f60: 6e6f 7469 6669 6361 7469 6f6e 5f72 7063  notification_rpc
+00012f70: 7328 7761 6c6c 6574 5f72 7063 5f65 6e76  s(wallet_rpc_env
+00012f80: 6972 6f6e 6d65 6e74 3a20 5761 6c6c 6574  ironment: Wallet
+00012f90: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+00012fa0: 6e74 293a 0a20 2020 2065 6e76 3a20 5761  nt):.    env: Wa
+00012fb0: 6c6c 6574 5270 6354 6573 7445 6e76 6972  lletRpcTestEnvir
+00012fc0: 6f6e 6d65 6e74 203d 2077 616c 6c65 745f  onment = wallet_
+00012fd0: 7270 635f 656e 7669 726f 6e6d 656e 740a  rpc_environment.
+00012fe0: 0a20 2020 2077 616c 6c65 745f 323a 2057  .    wallet_2: W
+00012ff0: 616c 6c65 7420 3d20 656e 762e 7761 6c6c  allet = env.wall
+00013000: 6574 5f32 2e77 616c 6c65 740a 2020 2020  et_2.wallet.    
+00013010: 7761 6c6c 6574 5f6e 6f64 653a 2057 616c  wallet_node: Wal
+00013020: 6c65 744e 6f64 6520 3d20 656e 762e 7761  letNode = env.wa
+00013030: 6c6c 6574 5f31 2e6e 6f64 650a 2020 2020  llet_1.node.    
+00013040: 6675 6c6c 5f6e 6f64 655f 6170 693a 2046  full_node_api: F
+00013050: 756c 6c4e 6f64 6553 696d 756c 6174 6f72  ullNodeSimulator
+00013060: 203d 2065 6e76 2e66 756c 6c5f 6e6f 6465   = env.full_node
+00013070: 2e61 7069 0a20 2020 2063 6c69 656e 743a  .api.    client:
+00013080: 2057 616c 6c65 7452 7063 436c 6965 6e74   WalletRpcClient
+00013090: 203d 2065 6e76 2e77 616c 6c65 745f 312e   = env.wallet_1.
+000130a0: 7270 635f 636c 6965 6e74 0a20 2020 2063  rpc_client.    c
+000130b0: 6c69 656e 745f 323a 2057 616c 6c65 7452  lient_2: WalletR
+000130c0: 7063 436c 6965 6e74 203d 2065 6e76 2e77  pcClient = env.w
+000130d0: 616c 6c65 745f 322e 7270 635f 636c 6965  allet_2.rpc_clie
+000130e0: 6e74 0a0a 2020 2020 6177 6169 7420 6765  nt..    await ge
+000130f0: 6e65 7261 7465 5f66 756e 6473 2866 756c  nerate_funds(ful
+00013100: 6c5f 6e6f 6465 5f61 7069 2c20 656e 762e  l_node_api, env.
+00013110: 7761 6c6c 6574 5f31 290a 0a20 2020 2065  wallet_1)..    e
+00013120: 6e76 2e77 616c 6c65 745f 322e 6e6f 6465  nv.wallet_2.node
+00013130: 2e63 6f6e 6669 675b 2265 6e61 626c 655f  .config["enable_
+00013140: 6e6f 7469 6669 6361 7469 6f6e 7322 5d20  notifications"] 
+00013150: 3d20 5472 7565 0a20 2020 2065 6e76 2e77  = True.    env.w
+00013160: 616c 6c65 745f 322e 6e6f 6465 2e63 6f6e  allet_2.node.con
+00013170: 6669 675b 2272 6571 7569 7265 645f 6e6f  fig["required_no
+00013180: 7469 6669 6361 7469 6f6e 5f61 6d6f 756e  tification_amoun
+00013190: 7422 5d20 3d20 3130 3030 3030 3030 3030  t"] = 1000000000
+000131a0: 3030 0a20 2020 2074 7820 3d20 6177 6169  00.    tx = awai
+000131b0: 7420 636c 6965 6e74 2e73 656e 645f 6e6f  t client.send_no
+000131c0: 7469 6669 6361 7469 6f6e 280a 2020 2020  tification(.    
+000131d0: 2020 2020 6177 6169 7420 7761 6c6c 6574      await wallet
+000131e0: 5f32 2e67 6574 5f6e 6577 5f70 757a 7a6c  _2.get_new_puzzl
+000131f0: 6568 6173 6828 292c 0a20 2020 2020 2020  ehash(),.       
+00013200: 2062 2268 656c 6c6f 222c 0a20 2020 2020   b"hello",.     
+00013210: 2020 2075 696e 7436 3428 3130 3030 3030     uint64(100000
+00013220: 3030 3030 3030 292c 0a20 2020 2020 2020  000000),.       
+00013230: 2066 6565 3d75 696e 7436 3428 3130 3030   fee=uint64(1000
+00013240: 3030 3030 3030 3030 292c 0a20 2020 2029  00000000),.    )
+00013250: 0a0a 2020 2020 6173 7365 7274 2074 782e  ..    assert tx.
+00013260: 7370 656e 645f 6275 6e64 6c65 2069 7320  spend_bundle is 
+00013270: 6e6f 7420 4e6f 6e65 0a20 2020 2061 7761  not None.    awa
+00013280: 6974 2074 696d 655f 6f75 745f 6173 7365  it time_out_asse
+00013290: 7274 280a 2020 2020 2020 2020 352c 0a20  rt(.        5,. 
+000132a0: 2020 2020 2020 2066 756c 6c5f 6e6f 6465         full_node
+000132b0: 5f61 7069 2e66 756c 6c5f 6e6f 6465 2e6d  _api.full_node.m
+000132c0: 656d 706f 6f6c 5f6d 616e 6167 6572 2e67  empool_manager.g
+000132d0: 6574 5f73 7065 6e64 6275 6e64 6c65 2c0a  et_spendbundle,.
+000132e0: 2020 2020 2020 2020 7478 2e73 7065 6e64          tx.spend
+000132f0: 5f62 756e 646c 652c 0a20 2020 2020 2020  _bundle,.       
+00013300: 2074 782e 7370 656e 645f 6275 6e64 6c65   tx.spend_bundle
+00013310: 2e6e 616d 6528 292c 0a20 2020 2029 0a20  .name(),.    ). 
+00013320: 2020 2061 7761 6974 2066 6172 6d5f 7472     await farm_tr
+00013330: 616e 7361 6374 696f 6e28 6675 6c6c 5f6e  ansaction(full_n
+00013340: 6f64 655f 6170 692c 2077 616c 6c65 745f  ode_api, wallet_
+00013350: 6e6f 6465 2c20 7478 2e73 7065 6e64 5f62  node, tx.spend_b
+00013360: 756e 646c 6529 0a20 2020 2061 7761 6974  undle).    await
+00013370: 2074 696d 655f 6f75 745f 6173 7365 7274   time_out_assert
+00013380: 2832 302c 2065 6e76 2e77 616c 6c65 745f  (20, env.wallet_
+00013390: 322e 7761 6c6c 6574 2e67 6574 5f63 6f6e  2.wallet.get_con
+000133a0: 6669 726d 6564 5f62 616c 616e 6365 2c20  firmed_balance, 
+000133b0: 7569 6e74 3634 2831 3030 3030 3030 3030  uint64(100000000
+000133c0: 3030 3029 290a 0a20 2020 206e 6f74 6966  000))..    notif
+000133d0: 6963 6174 696f 6e20 3d20 2861 7761 6974  ication = (await
+000133e0: 2063 6c69 656e 745f 322e 6765 745f 6e6f   client_2.get_no
+000133f0: 7469 6669 6361 7469 6f6e 7328 2929 5b30  tifications())[0
+00013400: 5d0a 2020 2020 6173 7365 7274 205b 6e6f  ].    assert [no
+00013410: 7469 6669 6361 7469 6f6e 5d20 3d3d 2028  tification] == (
+00013420: 6177 6169 7420 636c 6965 6e74 5f32 2e67  await client_2.g
+00013430: 6574 5f6e 6f74 6966 6963 6174 696f 6e73  et_notifications
+00013440: 285b 6e6f 7469 6669 6361 7469 6f6e 2e63  ([notification.c
+00013450: 6f69 6e5f 6964 5d29 290a 2020 2020 6173  oin_id])).    as
+00013460: 7365 7274 205b 5d20 3d3d 2028 6177 6169  sert [] == (awai
+00013470: 7420 636c 6965 6e74 5f32 2e67 6574 5f6e  t client_2.get_n
+00013480: 6f74 6966 6963 6174 696f 6e73 2870 6167  otifications(pag
+00013490: 696e 6174 696f 6e3d 2830 2c20 3029 2929  ination=(0, 0)))
+000134a0: 0a20 2020 2061 7373 6572 7420 5b6e 6f74  .    assert [not
+000134b0: 6966 6963 6174 696f 6e5d 203d 3d20 2861  ification] == (a
+000134c0: 7761 6974 2063 6c69 656e 745f 322e 6765  wait client_2.ge
+000134d0: 745f 6e6f 7469 6669 6361 7469 6f6e 7328  t_notifications(
+000134e0: 7061 6769 6e61 7469 6f6e 3d28 4e6f 6e65  pagination=(None
+000134f0: 2c20 3129 2929 0a20 2020 2061 7373 6572  , 1))).    asser
+00013500: 7420 5b5d 203d 3d20 2861 7761 6974 2063  t [] == (await c
+00013510: 6c69 656e 745f 322e 6765 745f 6e6f 7469  lient_2.get_noti
+00013520: 6669 6361 7469 6f6e 7328 7061 6769 6e61  fications(pagina
+00013530: 7469 6f6e 3d28 312c 204e 6f6e 6529 2929  tion=(1, None)))
+00013540: 0a20 2020 2061 7373 6572 7420 5b6e 6f74  .    assert [not
+00013550: 6966 6963 6174 696f 6e5d 203d 3d20 2861  ification] == (a
+00013560: 7761 6974 2063 6c69 656e 745f 322e 6765  wait client_2.ge
+00013570: 745f 6e6f 7469 6669 6361 7469 6f6e 7328  t_notifications(
+00013580: 7061 6769 6e61 7469 6f6e 3d28 4e6f 6e65  pagination=(None
+00013590: 2c20 4e6f 6e65 2929 290a 2020 2020 6173  , None))).    as
+000135a0: 7365 7274 2061 7761 6974 2063 6c69 656e  sert await clien
+000135b0: 745f 322e 6465 6c65 7465 5f6e 6f74 6966  t_2.delete_notif
+000135c0: 6963 6174 696f 6e73 2829 0a20 2020 2061  ications().    a
+000135d0: 7373 6572 7420 5b5d 203d 3d20 2861 7761  ssert [] == (awa
+000135e0: 6974 2063 6c69 656e 745f 322e 6765 745f  it client_2.get_
+000135f0: 6e6f 7469 6669 6361 7469 6f6e 7328 5b6e  notifications([n
+00013600: 6f74 6966 6963 6174 696f 6e2e 636f 696e  otification.coin
+00013610: 5f69 645d 2929 0a0a 2020 2020 7478 203d  _id]))..    tx =
+00013620: 2061 7761 6974 2063 6c69 656e 742e 7365   await client.se
+00013630: 6e64 5f6e 6f74 6966 6963 6174 696f 6e28  nd_notification(
+00013640: 0a20 2020 2020 2020 2061 7761 6974 2077  .        await w
+00013650: 616c 6c65 745f 322e 6765 745f 6e65 775f  allet_2.get_new_
+00013660: 7075 7a7a 6c65 6861 7368 2829 2c0a 2020  puzzlehash(),.  
+00013670: 2020 2020 2020 6222 6865 6c6c 6f22 2c0a        b"hello",.
+00013680: 2020 2020 2020 2020 7569 6e74 3634 2831          uint64(1
+00013690: 3030 3030 3030 3030 3030 3029 2c0a 2020  00000000000),.  
+000136a0: 2020 2020 2020 6665 653d 7569 6e74 3634        fee=uint64
+000136b0: 2831 3030 3030 3030 3030 3030 3029 2c0a  (100000000000),.
+000136c0: 2020 2020 290a 0a20 2020 2061 7373 6572      )..    asser
+000136d0: 7420 7478 2e73 7065 6e64 5f62 756e 646c  t tx.spend_bundl
+000136e0: 6520 6973 206e 6f74 204e 6f6e 650a 2020  e is not None.  
+000136f0: 2020 6177 6169 7420 7469 6d65 5f6f 7574    await time_out
+00013700: 5f61 7373 6572 7428 0a20 2020 2020 2020  _assert(.       
+00013710: 2035 2c0a 2020 2020 2020 2020 6675 6c6c   5,.        full
+00013720: 5f6e 6f64 655f 6170 692e 6675 6c6c 5f6e  _node_api.full_n
+00013730: 6f64 652e 6d65 6d70 6f6f 6c5f 6d61 6e61  ode.mempool_mana
+00013740: 6765 722e 6765 745f 7370 656e 6462 756e  ger.get_spendbun
+00013750: 646c 652c 0a20 2020 2020 2020 2074 782e  dle,.        tx.
+00013760: 7370 656e 645f 6275 6e64 6c65 2c0a 2020  spend_bundle,.  
+00013770: 2020 2020 2020 7478 2e73 7065 6e64 5f62        tx.spend_b
+00013780: 756e 646c 652e 6e61 6d65 2829 2c0a 2020  undle.name(),.  
+00013790: 2020 290a 2020 2020 6177 6169 7420 6661    ).    await fa
+000137a0: 726d 5f74 7261 6e73 6163 7469 6f6e 2866  rm_transaction(f
+000137b0: 756c 6c5f 6e6f 6465 5f61 7069 2c20 7761  ull_node_api, wa
+000137c0: 6c6c 6574 5f6e 6f64 652c 2074 782e 7370  llet_node, tx.sp
+000137d0: 656e 645f 6275 6e64 6c65 290a 2020 2020  end_bundle).    
+000137e0: 6177 6169 7420 7469 6d65 5f6f 7574 5f61  await time_out_a
+000137f0: 7373 6572 7428 3230 2c20 656e 762e 7761  ssert(20, env.wa
+00013800: 6c6c 6574 5f32 2e77 616c 6c65 742e 6765  llet_2.wallet.ge
+00013810: 745f 636f 6e66 6972 6d65 645f 6261 6c61  t_confirmed_bala
+00013820: 6e63 652c 2075 696e 7436 3428 3230 3030  nce, uint64(2000
+00013830: 3030 3030 3030 3030 2929 0a0a 2020 2020  00000000))..    
+00013840: 6e6f 7469 6669 6361 7469 6f6e 203d 2028  notification = (
+00013850: 6177 6169 7420 636c 6965 6e74 5f32 2e67  await client_2.g
+00013860: 6574 5f6e 6f74 6966 6963 6174 696f 6e73  et_notifications
+00013870: 2829 295b 305d 0a20 2020 2061 7373 6572  ())[0].    asser
+00013880: 7420 6177 6169 7420 636c 6965 6e74 5f32  t await client_2
+00013890: 2e64 656c 6574 655f 6e6f 7469 6669 6361  .delete_notifica
+000138a0: 7469 6f6e 7328 5b6e 6f74 6966 6963 6174  tions([notificat
+000138b0: 696f 6e2e 636f 696e 5f69 645d 290a 2020  ion.coin_id]).  
+000138c0: 2020 6173 7365 7274 205b 5d20 3d3d 2028    assert [] == (
+000138d0: 6177 6169 7420 636c 6965 6e74 5f32 2e67  await client_2.g
+000138e0: 6574 5f6e 6f74 6966 6963 6174 696f 6e73  et_notifications
+000138f0: 285b 6e6f 7469 6669 6361 7469 6f6e 2e63  ([notification.c
+00013900: 6f69 6e5f 6964 5d29 290a 0a0a 2320 5468  oin_id]))...# Th
+00013910: 6520 7369 676e 6174 7572 6573 2062 656c  e signatures bel
+00013920: 6f77 2077 6572 6520 6d61 6465 2066 726f  ow were made fro
+00013930: 6d20 616e 2065 7068 656d 6572 616c 206b  m an ephemeral k
+00013940: 6579 2070 6169 7220 7468 6174 2069 736e  ey pair that isn
+00013950: 2774 2069 6e63 6c75 6465 6420 696e 2074  't included in t
+00013960: 6865 2074 6573 7420 636f 6465 2e0a 2320  he test code..# 
+00013970: 5768 656e 206d 6f64 6966 7969 6e67 2074  When modifying t
+00013980: 6869 7320 7465 7374 2c20 616e 7920 6b65  his test, any ke
+00013990: 7920 6361 6e20 6265 2075 7365 6420 746f  y can be used to
+000139a0: 2067 656e 6572 6174 6520 7369 676e 6174   generate signat
+000139b0: 7572 6573 2e20 4f6e 6c79 2074 6865 2070  ures. Only the p
+000139c0: 7562 6b65 7920 6e65 6564 7320 746f 0a23  ubkey needs to.#
+000139d0: 2062 6520 696e 636c 7564 6564 2069 6e20   be included in 
+000139e0: 7468 6520 7465 7374 2063 6f64 652e 0a23  the test code..#
+000139f0: 0a23 2045 7861 6d70 6c65 2031 3a0a 2320  .# Example 1:.# 
+00013a00: 2420 6368 6961 206b 6579 7320 6765 6e65  $ chia keys gene
+00013a10: 7261 7465 0a23 2024 2063 6869 6120 6b65  rate.# $ chia ke
+00013a20: 7973 2073 6967 6e20 2d64 2027 6865 6c6c  ys sign -d 'hell
+00013a30: 6f20 776f 726c 6427 202d 7420 276d 2f31  o world' -t 'm/1
+00013a40: 3233 3831 2f38 3434 342f 312f 3127 0a23  2381/8444/1/1'.#
+00013a50: 0a23 2045 7861 6d70 6c65 2032 3a0a 2320  .# Example 2:.# 
+00013a60: 2420 6368 6961 2077 616c 6c65 7420 6765  $ chia wallet ge
+00013a70: 745f 6164 6472 6573 730a 2320 7863 6831  t_address.# xch1
+00013a80: 766b 3064 6a37 6378 3764 3633 3868 3830  vk0dj7cx7d638h80
+00013a90: 6d63 7577 3730 7871 6c6e 7235 3670 6d75  mcuw70xqlnr56pmu
+00013aa0: 687a 616a 656d 6e35 796d 3032 7668 6c33  hzajemn5ym02vhl3
+00013ab0: 6d7a 7971 7272 6434 7770 0a23 2024 2063  mzyqrrd4wp.# $ c
+00013ac0: 6869 6120 7761 6c6c 6574 2073 6967 6e5f  hia wallet sign_
+00013ad0: 6d65 7373 6167 6520 2d6d 2024 2865 6368  message -m $(ech
+00013ae0: 6f20 2d6e 2027 6865 6c6c 6f20 776f 726c  o -n 'hello worl
+00013af0: 6427 207c 2078 7864 202d 7029 0a23 202d  d' | xxd -p).# -
+00013b00: 6120 7863 6831 766b 3064 6a37 6378 3764  a xch1vk0dj7cx7d
+00013b10: 3633 3868 3830 6d63 7577 3730 7871 6c6e  638h80mcuw70xqln
+00013b20: 7235 3670 6d75 687a 616a 656d 6e35 796d  r56pmuhzajemn5ym
+00013b30: 3032 7668 6c33 6d7a 7971 7272 6434 7770  02vhl3mzyqrrd4wp
+00013b40: 0a23 0a40 7079 7465 7374 2e6d 6172 6b2e  .#.@pytest.mark.
+00013b50: 7061 7261 6d65 7472 697a 6528 0a20 2020  parametrize(.   
+00013b60: 205b 2272 7063 5f72 6571 7565 7374 222c   ["rpc_request",
+00013b70: 2022 7270 635f 7265 7370 6f6e 7365 225d   "rpc_response"]
+00013b80: 2c0a 2020 2020 5b0a 2020 2020 2020 2020  ,.    [.        
+00013b90: 2320 5661 6c69 6420 7369 676e 6174 7572  # Valid signatur
+00013ba0: 6573 0a20 2020 2020 2020 2028 0a20 2020  es.        (.   
+00013bb0: 2020 2020 2020 2020 2023 2063 6869 6120           # chia 
+00013bc0: 6b65 7973 2073 6967 6e20 2d64 2022 4c65  keys sign -d "Le
+00013bd0: 7427 7320 6561 742c 2047 7261 6e64 6d61  t's eat, Grandma
+00013be0: 2220 2d74 2022 6d2f 3132 3338 312f 3834  " -t "m/12381/84
+00013bf0: 3434 2f31 2f31 220a 2020 2020 2020 2020  44/1/1".        
+00013c00: 2020 2020 7b0a 2020 2020 2020 2020 2020      {.          
+00013c10: 2020 2020 2020 226d 6573 7361 6765 223a        "message":
+00013c20: 2022 3463 3635 3734 3237 3733 3230 3635   "4c657427732065
+00013c30: 3631 3734 3263 3230 3437 3732 3631 3665  61742c204772616e
+00013c40: 3634 3664 3631 222c 2020 2320 4c65 7427  646d61",  # Let'
+00013c50: 7320 6561 742c 2047 7261 6e64 6d61 0a20  s eat, Grandma. 
+00013c60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00013c70: 7075 626b 6579 223a 2028 0a20 2020 2020  pubkey": (.     
+00013c80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00013c90: 3839 6438 6532 6132 3235 6332 6666 3534  89d8e2a225c2ff54
+00013ca0: 3332 3232 6264 3066 3262 6134 3537 6134  3222bd0f2ba457a4
+00013cb0: 3461 6362 6464 3134 3765 3464 6661 3032  4acbdd147e4dfa02
+00013cc0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00013cd0: 2020 2020 2020 2265 6164 6165 6637 3365        "eadaef73e
+00013ce0: 6165 3439 3435 3064 6337 3038 6664 3763  ae49450dc708fd7c
+00013cf0: 3836 3830 3062 3630 6538 6263 3435 3665  86800b60e8bc456e
+00013d00: 3737 3536 3365 3422 0a20 2020 2020 2020  77563e4".       
+00013d10: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+00013d20: 2020 2020 2020 2020 2020 2020 2273 6967              "sig
+00013d30: 6e61 7475 7265 223a 2028 0a20 2020 2020  nature": (.     
+00013d40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00013d50: 3830 3036 6636 3335 3337 3536 3366 3033  8006f63537563f03
+00013d60: 3833 3231 6565 6461 3235 6633 3833 3836  8321eeda25f38386
+00013d70: 3133 6438 6639 3338 6539 3566 3139 6431  13d8f938e95f19d1
+00013d80: 6431 3963 6362 6536 3334 6539 6565 3464  d19ccbe634e9ee4d
+00013d90: 3639 3535 3235 3336 6161 6230 3862 3466  69552536aab08b4f
+00013da0: 6539 3631 3330 3522 0a20 2020 2020 2020  e961305".       
+00013db0: 2020 2020 2020 2020 2020 2020 2022 6535               "e5
+00013dc0: 3334 6666 6464 6630 3936 3139 3961 6539  34ffddf096199ae9
+00013dd0: 3336 6232 3732 6461 6338 3863 3933 3665  36b272dac88c936e
+00013de0: 3837 3734 6266 6337 6136 6632 3430 3235  8774bfc7a6f24025
+00013df0: 3038 3530 3236 6462 3362 3763 3363 3431  085026db3b7c3c41
+00013e00: 6234 3732 6462 3364 6166 3939 6235 6536  b472db3daf99b5e6
+00013e10: 6361 6266 3222 0a20 2020 2020 2020 2020  cabf2".         
+00013e20: 2020 2020 2020 2020 2020 2022 3630 3334             "6034
+00013e30: 6438 3738 3264 3130 6566 3134 3864 220a  d8782d10ef148d".
+00013e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013e50: 292c 0a20 2020 2020 2020 2020 2020 207d  ),.            }
+00013e60: 2c0a 2020 2020 2020 2020 2020 2020 7b22  ,.            {"
+00013e70: 6973 5661 6c69 6422 3a20 5472 7565 7d2c  isValid": True},
+00013e80: 0a20 2020 2020 2020 2029 2c0a 2020 2020  .        ),.    
+00013e90: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+00013ea0: 2020 2320 6368 6961 2077 616c 6c65 7420    # chia wallet 
+00013eb0: 7369 676e 5f6d 6573 7361 6765 202d 6d20  sign_message -m 
+00013ec0: 2428 6563 686f 202d 6e20 2748 6170 7079  $(echo -n 'Happy
+00013ed0: 2068 6170 7079 206a 6f79 206a 6f79 2720   happy joy joy' 
+00013ee0: 7c20 7878 6420 2d70 290a 2020 2020 2020  | xxd -p).      
+00013ef0: 2020 2020 2020 2320 2d61 2078 6368 3165        # -a xch1e
+00013f00: 3270 6375 6535 7137 7434 7367 3867 7967  2pcue5q7t4sg8gyg
+00013f10: 7a33 6168 7433 3639 736b 3738 727a 7a73  z3aht369sk78rzzs
+00013f20: 3932 7a78 3635 6b74 6e39 6139 7175 7277  92zx65ktn9a9qurw
+00013f30: 3335 7361 616a 766b 680a 2020 2020 2020  35saajvkh.      
+00013f40: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+00013f50: 2020 2020 2020 2020 226d 6573 7361 6765          "message
+00013f60: 223a 2022 3438 3631 3730 3730 3739 3230  ": "486170707920
+00013f70: 3638 3631 3730 3730 3739 3230 3661 3666  6861707079206a6f
+00013f80: 3739 3230 3661 3666 3739 222c 2020 2320  79206a6f79",  # 
+00013f90: 4861 7070 7920 6861 7070 7920 6a6f 7920  Happy happy joy 
+00013fa0: 6a6f 790a 2020 2020 2020 2020 2020 2020  joy.            
+00013fb0: 2020 2020 2270 7562 6b65 7922 3a20 280a      "pubkey": (.
+00013fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fd0: 2020 2020 2238 6531 3536 6431 3036 6631      "8e156d106f1
+00013fe0: 6230 6666 3065 6262 6535 6162 3237 6231  b0ff0ebbe5ab27b1
+00013ff0: 3739 3761 3139 6366 3365 3839 3561 3761  797a19cf3e895a7a
+00014000: 3433 3562 3022 0a20 2020 2020 2020 2020  435b0".         
+00014010: 2020 2020 2020 2020 2020 2022 3033 6131             "03a1
+00014020: 6466 3264 6434 3737 6436 3232 6265 3932  df2dd477d622be92
+00014030: 3833 3739 3632 3562 3735 3965 6633 6233  8379625b759ef3b3
+00014040: 3838 6232 3836 6565 3836 3538 220a 2020  88b286ee8658".  
+00014050: 2020 2020 2020 2020 2020 2020 2020 292c                ),
+00014060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014070: 2022 7369 676e 6174 7572 6522 3a20 280a   "signature": (.
+00014080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014090: 2020 2020 2261 3830 3431 3131 6638 3062      "a804111f80b
+000140a0: 6532 6564 3064 3464 3366 6464 3133 3963  e2ed0d4d3fdd139c
+000140b0: 3866 6532 3063 6435 3036 6239 3962 3033  8fe20cd506b99b03
+000140c0: 3539 3235 3633 6438 3532 3932 6162 6362  592563d85292abcb
+000140d0: 6239 6364 3666 6636 6466 3265 3761 3133  b9cd6ff6df2e7a13
+000140e0: 3039 3365 3333 3064 3636 6161 220a 2020  093e330d66aa".  
+000140f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014100: 2020 2235 3231 3862 6265 3065 3137 3637    "5218bbe0e1767
+00014110: 3763 3961 3233 6139 6631 3864 6265 3438  7c9a23a9f18dbe48
+00014120: 3862 3730 3236 6265 3539 6434 3736 3136  8b7026be59d47616
+00014130: 3166 3565 3666 3065 6561 3130 3963 6437  1f5e6f0eea109cd7
+00014140: 6265 3232 6231 6637 3466 6461 3963 3830  be22b1f74fda9c80
+00014150: 6336 6238 3435 6563 6336 220a 2020 2020  c6b845ecc6".    
+00014160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014170: 2239 3132 3436 6562 3163 3766 3162 3636  "91246eb1c7f1b66
+00014180: 6136 6122 0a20 2020 2020 2020 2020 2020  a6a".           
+00014190: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+000141a0: 2020 2020 2020 2020 2273 6967 6e69 6e67          "signing
+000141b0: 5f6d 6f64 6522 3a20 5369 676e 696e 674d  _mode": SigningM
+000141c0: 6f64 652e 4348 4950 5f30 3030 322e 7661  ode.CHIP_0002.va
+000141d0: 6c75 652c 0a20 2020 2020 2020 2020 2020  lue,.           
+000141e0: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
+000141f0: 7b22 6973 5661 6c69 6422 3a20 5472 7565  {"isValid": True
+00014200: 7d2c 0a20 2020 2020 2020 2029 2c0a 2020  },.        ),.  
+00014210: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+00014220: 2020 2020 2320 6368 6961 2077 616c 6c65      # chia walle
+00014230: 7420 7369 676e 5f6d 6573 7361 6765 202d  t sign_message -
+00014240: 6d20 2428 6563 686f 202d 6e20 2748 6170  m $(echo -n 'Hap
+00014250: 7079 2068 6170 7079 206a 6f79 206a 6f79  py happy joy joy
+00014260: 2720 7c20 7878 6420 2d70 290a 2020 2020  ' | xxd -p).    
+00014270: 2020 2020 2020 2020 2320 2d61 2078 6368          # -a xch
+00014280: 3165 3270 6375 6535 7137 7434 7367 3867  1e2pcue5q7t4sg8g
+00014290: 7967 7a33 6168 7433 3639 736b 3738 727a  ygz3aht369sk78rz
+000142a0: 7a73 3932 7a78 3635 6b74 6e39 6139 7175  zs92zx65ktn9a9qu
+000142b0: 7277 3335 7361 616a 766b 680a 2020 2020  rw35saajvkh.    
+000142c0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+000142d0: 2020 2020 2020 2020 2020 226d 6573 7361            "messa
+000142e0: 6765 223a 2022 3438 3631 3730 3730 3739  ge": "4861707079
+000142f0: 3230 3638 3631 3730 3730 3739 3230 3661  206861707079206a
+00014300: 3666 3739 3230 3661 3666 3739 222c 2020  6f79206a6f79",  
+00014310: 2320 4861 7070 7920 6861 7070 7920 6a6f  # Happy happy jo
+00014320: 7920 6a6f 790a 2020 2020 2020 2020 2020  y joy.          
+00014330: 2020 2020 2020 2270 7562 6b65 7922 3a20        "pubkey": 
+00014340: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00014350: 2020 2020 2020 2238 6531 3536 6431 3036        "8e156d106
+00014360: 6631 6230 6666 3065 6262 6535 6162 3237  f1b0ff0ebbe5ab27
+00014370: 6231 3739 3761 3139 6366 3365 3839 3561  b1797a19cf3e895a
+00014380: 3761 3433 3562 3022 0a20 2020 2020 2020  7a435b0".       
+00014390: 2020 2020 2020 2020 2020 2020 2022 3033               "03
+000143a0: 6131 6466 3264 6434 3737 6436 3232 6265  a1df2dd477d622be
+000143b0: 3932 3833 3739 3632 3562 3735 3965 6633  928379625b759ef3
+000143c0: 6233 3838 6232 3836 6565 3836 3538 220a  b388b286ee8658".
+000143d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000143e0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+000143f0: 2020 2022 7369 676e 6174 7572 6522 3a20     "signature": 
+00014400: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00014410: 2020 2020 2020 2261 3830 3431 3131 6638        "a804111f8
+00014420: 3062 6532 6564 3064 3464 3366 6464 3133  0be2ed0d4d3fdd13
+00014430: 3963 3866 6532 3063 6435 3036 6239 3962  9c8fe20cd506b99b
+00014440: 3033 3539 3235 3633 6438 3532 3932 6162  03592563d85292ab
+00014450: 6362 6239 6364 3666 6636 6466 3265 3761  cbb9cd6ff6df2e7a
+00014460: 3133 3039 3365 3333 3064 3636 6161 220a  13093e330d66aa".
+00014470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014480: 2020 2020 2235 3231 3862 6265 3065 3137      "5218bbe0e17
+00014490: 3637 3763 3961 3233 6139 6631 3864 6265  677c9a23a9f18dbe
+000144a0: 3438 3862 3730 3236 6265 3539 6434 3736  488b7026be59d476
+000144b0: 3136 3166 3565 3666 3065 6561 3130 3963  161f5e6f0eea109c
+000144c0: 6437 6265 3232 6231 6637 3466 6461 3963  d7be22b1f74fda9c
+000144d0: 3830 6336 6238 3435 6563 6336 220a 2020  80c6b845ecc6".  
+000144e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000144f0: 2020 2239 3132 3436 6562 3163 3766 3162    "91246eb1c7f1b
+00014500: 3636 6136 6122 0a20 2020 2020 2020 2020  66a6a".         
+00014510: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+00014520: 2020 2020 2020 2020 2020 2273 6967 6e69            "signi
+00014530: 6e67 5f6d 6f64 6522 3a20 5369 676e 696e  ng_mode": Signin
+00014540: 674d 6f64 652e 4348 4950 5f30 3030 322e  gMode.CHIP_0002.
+00014550: 7661 6c75 652c 0a20 2020 2020 2020 2020  value,.         
+00014560: 2020 2020 2020 2022 6164 6472 6573 7322         "address"
+00014570: 3a20 2278 6368 3165 3270 6375 6535 7137  : "xch1e2pcue5q7
+00014580: 7434 7367 3867 7967 7a33 6168 7433 3639  t4sg8gygz3aht369
+00014590: 736b 3738 727a 7a73 3932 7a78 3635 6b74  sk78rzzs92zx65kt
+000145a0: 6e39 6139 7175 7277 3335 7361 616a 766b  n9a9qurw35saajvk
+000145b0: 6822 2c0a 2020 2020 2020 2020 2020 2020  h",.            
+000145c0: 7d2c 0a20 2020 2020 2020 2020 2020 207b  },.            {
+000145d0: 2269 7356 616c 6964 223a 2054 7275 657d  "isValid": True}
+000145e0: 2c0a 2020 2020 2020 2020 292c 0a20 2020  ,.        ),.   
+000145f0: 2020 2020 2023 204e 6567 6174 6976 6520       # Negative 
+00014600: 7465 7374 730a 2020 2020 2020 2020 280a  tests.        (.
+00014610: 2020 2020 2020 2020 2020 2020 2320 4d65              # Me
+00014620: 7373 6167 6520 7761 7320 6d6f 6469 6669  ssage was modifi
+00014630: 6564 0a20 2020 2020 2020 2020 2020 207b  ed.            {
+00014640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014650: 2022 6d65 7373 6167 6522 3a20 2234 6336   "message": "4c6
+00014660: 3537 3432 3737 3332 3036 3536 3137 3432  5742773206561742
+00014670: 3034 3737 3236 3136 6536 3436 6436 3122  04772616e646d61"
+00014680: 2c20 2023 204c 6574 2773 2065 6174 2047  ,  # Let's eat G
+00014690: 7261 6e64 6d61 0a20 2020 2020 2020 2020  randma.         
+000146a0: 2020 2020 2020 2022 7075 626b 6579 223a         "pubkey":
+000146b0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+000146c0: 2020 2020 2020 2022 3839 6438 6532 6132         "89d8e2a2
+000146d0: 3235 6332 6666 3534 3332 3232 6264 3066  25c2ff543222bd0f
+000146e0: 3262 6134 3537 6134 3461 6362 6464 3134  2ba457a44acbdd14
+000146f0: 3765 3464 6661 3032 220a 2020 2020 2020  7e4dfa02".      
+00014700: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+00014710: 6164 6165 6637 3365 6165 3439 3435 3064  adaef73eae49450d
+00014720: 6337 3038 6664 3763 3836 3830 3062 3630  c708fd7c86800b60
+00014730: 6538 6263 3435 3665 3737 3536 3365 3422  e8bc456e77563e4"
+00014740: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014750: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+00014760: 2020 2020 2273 6967 6e61 7475 7265 223a      "signature":
+00014770: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00014780: 2020 2020 2020 2022 3830 3036 6636 3335         "8006f635
+00014790: 3337 3536 3366 3033 3833 3231 6565 6461  37563f038321eeda
+000147a0: 3235 6633 3833 3836 3133 6438 6639 3338  25f3838613d8f938
+000147b0: 6539 3566 3139 6431 6431 3963 6362 6536  e95f19d1d19ccbe6
+000147c0: 3334 6539 6565 3464 3639 3535 3235 3336  34e9ee4d69552536
+000147d0: 6161 6230 3862 3466 6539 3631 3330 3522  aab08b4fe961305"
+000147e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000147f0: 2020 2020 2022 6535 3334 6666 6464 6630       "e534ffddf0
+00014800: 3936 3139 3961 6539 3336 6232 3732 6461  96199ae936b272da
+00014810: 6338 3863 3933 3665 3837 3734 6266 6337  c88c936e8774bfc7
+00014820: 6136 6632 3430 3235 3038 3530 3236 6462  a6f24025085026db
+00014830: 3362 3763 3363 3431 6234 3732 6462 3364  3b7c3c41b472db3d
+00014840: 6166 3939 6235 6536 6361 6266 3222 0a20  af99b5e6cabf2". 
+00014850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014860: 2020 2022 3630 3334 6438 3738 3264 3130     "6034d8782d10
+00014870: 6566 3134 3864 220a 2020 2020 2020 2020  ef148d".        
+00014880: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+00014890: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+000148a0: 2020 2020 2020 7b22 6973 5661 6c69 6422        {"isValid"
+000148b0: 3a20 4661 6c73 652c 2022 6572 726f 7222  : False, "error"
+000148c0: 3a20 2253 6967 6e61 7475 7265 2069 7320  : "Signature is 
+000148d0: 696e 7661 6c69 642e 227d 2c0a 2020 2020  invalid."},.    
+000148e0: 2020 2020 292c 0a20 2020 2020 2020 2028      ),.        (
+000148f0: 0a20 2020 2020 2020 2020 2020 2023 2056  .            # V
+00014900: 616c 6964 2073 6967 6e61 7475 7265 2062  alid signature b
+00014910: 7574 2061 6464 7265 7373 2064 6f65 736e  ut address doesn
+00014920: 2774 206d 6174 6368 2070 7562 6b65 790a  't match pubkey.
+00014930: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+00014940: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00014950: 6573 7361 6765 223a 2022 3438 3631 3730  essage": "486170
+00014960: 3730 3739 3230 3638 3631 3730 3730 3739  7079206861707079
+00014970: 3230 3661 3666 3739 3230 3661 3666 3739  206a6f79206a6f79
+00014980: 222c 2020 2320 4861 7070 7920 6861 7070  ",  # Happy happ
+00014990: 7920 6a6f 7920 6a6f 790a 2020 2020 2020  y joy joy.      
+000149a0: 2020 2020 2020 2020 2020 2270 7562 6b65            "pubke
+000149b0: 7922 3a20 280a 2020 2020 2020 2020 2020  y": (.          
+000149c0: 2020 2020 2020 2020 2020 2238 6531 3536            "8e156
+000149d0: 6431 3036 6631 6230 6666 3065 6262 6535  d106f1b0ff0ebbe5
+000149e0: 6162 3237 6231 3739 3761 3139 6366 3365  ab27b1797a19cf3e
+000149f0: 3839 3561 3761 3433 3562 3022 0a20 2020  895a7a435b0".   
+00014a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a10: 2022 3033 6131 6466 3264 6434 3737 6436   "03a1df2dd477d6
+00014a20: 3232 6265 3932 3833 3739 3632 3562 3735  22be928379625b75
+00014a30: 3965 6633 6233 3838 6232 3836 6565 3836  9ef3b388b286ee86
+00014a40: 3538 220a 2020 2020 2020 2020 2020 2020  58".            
+00014a50: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+00014a60: 2020 2020 2020 2022 7369 676e 6174 7572         "signatur
+00014a70: 6522 3a20 280a 2020 2020 2020 2020 2020  e": (.          
+00014a80: 2020 2020 2020 2020 2020 2261 3830 3431            "a8041
+00014a90: 3131 6638 3062 6532 6564 3064 3464 3366  11f80be2ed0d4d3f
+00014aa0: 6464 3133 3963 3866 6532 3063 6435 3036  dd139c8fe20cd506
+00014ab0: 6239 3962 3033 3539 3235 3633 6438 3532  b99b03592563d852
+00014ac0: 3932 6162 6362 6239 6364 3666 6636 6466  92abcbb9cd6ff6df
+00014ad0: 3265 3761 3133 3039 3365 3333 3064 3636  2e7a13093e330d66
+00014ae0: 6161 220a 2020 2020 2020 2020 2020 2020  aa".            
+00014af0: 2020 2020 2020 2020 2235 3231 3862 6265          "5218bbe
+00014b00: 3065 3137 3637 3763 3961 3233 6139 6631  0e17677c9a23a9f1
+00014b10: 3864 6265 3438 3862 3730 3236 6265 3539  8dbe488b7026be59
+00014b20: 6434 3736 3136 3166 3565 3666 3065 6561  d476161f5e6f0eea
+00014b30: 3130 3963 6437 6265 3232 6231 6637 3466  109cd7be22b1f74f
+00014b40: 6461 3963 3830 6336 6238 3435 6563 6336  da9c80c6b845ecc6
+00014b50: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00014b60: 2020 2020 2020 2239 3132 3436 6562 3163        "91246eb1c
+00014b70: 3766 3162 3636 6136 6122 0a20 2020 2020  7f1b66a6a".     
+00014b80: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+00014b90: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00014ba0: 6967 6e69 6e67 5f6d 6f64 6522 3a20 5369  igning_mode": Si
+00014bb0: 676e 696e 674d 6f64 652e 4348 4950 5f30  gningMode.CHIP_0
+00014bc0: 3030 322e 7661 6c75 652c 0a20 2020 2020  002.value,.     
+00014bd0: 2020 2020 2020 2020 2020 2022 6164 6472             "addr
+00014be0: 6573 7322 3a20 2278 6368 3164 3072 656b  ess": "xch1d0rek
+00014bf0: 6332 6a61 7679 3567 7072 757a 6d63 6e6b  c2javy5gpruzmcnk
+00014c00: 3465 3471 7138 3334 6a7a 6c76 7874 3574  4e4qq834jzlvxt5t
+00014c10: 6367 6c32 796c 7434 3974 3236 6764 736a  cgl2ylt49t26gdsj
+00014c20: 656e 3774 3022 2c0a 2020 2020 2020 2020  en7t0",.        
+00014c30: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+00014c40: 2020 207b 2269 7356 616c 6964 223a 2046     {"isValid": F
+00014c50: 616c 7365 2c20 2265 7272 6f72 223a 2022  alse, "error": "
+00014c60: 5075 626c 6963 206b 6579 2064 6f65 736e  Public key doesn
+00014c70: 2774 206d 6174 6368 2074 6865 2061 6464  't match the add
+00014c80: 7265 7373 227d 2c0a 2020 2020 2020 2020  ress"},.        
+00014c90: 292c 0a20 2020 205d 2c0a 290a 4070 7974  ),.    ],.).@pyt
+00014ca0: 6573 742e 6d61 726b 2e70 6172 616d 6574  est.mark.paramet
+00014cb0: 7269 7a65 2822 7072 6566 6978 5f68 6578  rize("prefix_hex
+00014cc0: 5f73 7472 696e 6773 222c 205b 5472 7565  _strings", [True
+00014cd0: 2c20 4661 6c73 655d 2c20 6964 733d 5b22  , False], ids=["
+00014ce0: 7769 7468 2030 7822 2c20 226e 6f20 3078  with 0x", "no 0x
+00014cf0: 225d 290a 4070 7974 6573 742e 6d61 726b  "]).@pytest.mark
+00014d00: 2e61 7379 6e63 696f 0a61 7379 6e63 2064  .asyncio.async d
+00014d10: 6566 2074 6573 745f 7665 7269 6679 5f73  ef test_verify_s
+00014d20: 6967 6e61 7475 7265 280a 2020 2020 7761  ignature(.    wa
+00014d30: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
+00014d40: 6d65 6e74 3a20 5761 6c6c 6574 5270 6354  ment: WalletRpcT
+00014d50: 6573 7445 6e76 6972 6f6e 6d65 6e74 2c0a  estEnvironment,.
+00014d60: 2020 2020 7270 635f 7265 7175 6573 743a      rpc_request:
+00014d70: 2044 6963 745b 7374 722c 2041 6e79 5d2c   Dict[str, Any],
+00014d80: 0a20 2020 2072 7063 5f72 6573 706f 6e73  .    rpc_respons
+00014d90: 653a 2044 6963 745b 7374 722c 2041 6e79  e: Dict[str, Any
+00014da0: 5d2c 0a20 2020 2070 7265 6669 785f 6865  ],.    prefix_he
+00014db0: 785f 7374 7269 6e67 733a 2062 6f6f 6c2c  x_strings: bool,
+00014dc0: 0a29 3a0a 2020 2020 7270 635f 7365 7276  .):.    rpc_serv
+00014dd0: 6572 3a20 4f70 7469 6f6e 616c 5b52 7063  er: Optional[Rpc
+00014de0: 5365 7276 6572 5d20 3d20 7761 6c6c 6574  Server] = wallet
+00014df0: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
+00014e00: 2e77 616c 6c65 745f 312e 7365 7276 6963  .wallet_1.servic
+00014e10: 652e 7270 635f 7365 7276 6572 0a20 2020  e.rpc_server.   
+00014e20: 2061 7373 6572 7420 7270 635f 7365 7276   assert rpc_serv
+00014e30: 6572 2069 7320 6e6f 7420 4e6f 6e65 0a20  er is not None. 
+00014e40: 2020 2061 7069 3a20 5761 6c6c 6574 5270     api: WalletRp
+00014e50: 6341 7069 203d 2063 6173 7428 5761 6c6c  cApi = cast(Wall
+00014e60: 6574 5270 6341 7069 2c20 7270 635f 7365  etRpcApi, rpc_se
+00014e70: 7276 6572 2e72 7063 5f61 7069 290a 2020  rver.rpc_api).  
+00014e80: 2020 7265 7120 3d20 7570 6461 7465 5f76    req = update_v
+00014e90: 6572 6966 795f 7369 676e 6174 7572 655f  erify_signature_
+00014ea0: 7265 7175 6573 7428 7270 635f 7265 7175  request(rpc_requ
+00014eb0: 6573 742c 2070 7265 6669 785f 6865 785f  est, prefix_hex_
+00014ec0: 7374 7269 6e67 7329 0a20 2020 2072 6573  strings).    res
+00014ed0: 203d 2061 7761 6974 2061 7069 2e76 6572   = await api.ver
+00014ee0: 6966 795f 7369 676e 6174 7572 6528 7265  ify_signature(re
+00014ef0: 7129 0a20 2020 2061 7373 6572 7420 7265  q).    assert re
+00014f00: 7320 3d3d 2072 7063 5f72 6573 706f 6e73  s == rpc_respons
+00014f10: 650a 0a0a 4070 7974 6573 742e 6d61 726b  e...@pytest.mark
+00014f20: 2e61 7379 6e63 696f 0a61 7379 6e63 2064  .asyncio.async d
+00014f30: 6566 2074 6573 745f 7365 745f 6175 746f  ef test_set_auto
+00014f40: 5f63 6c61 696d 2877 616c 6c65 745f 7270  _claim(wallet_rp
+00014f50: 635f 656e 7669 726f 6e6d 656e 743a 2057  c_environment: W
+00014f60: 616c 6c65 7452 7063 5465 7374 456e 7669  alletRpcTestEnvi
+00014f70: 726f 6e6d 656e 7429 3a0a 2020 2020 656e  ronment):.    en
+00014f80: 763a 2057 616c 6c65 7452 7063 5465 7374  v: WalletRpcTest
+00014f90: 456e 7669 726f 6e6d 656e 7420 3d20 7761  Environment = wa
+00014fa0: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
+00014fb0: 6d65 6e74 0a20 2020 2066 756c 6c5f 6e6f  ment.    full_no
+00014fc0: 6465 5f61 7069 3a20 4675 6c6c 4e6f 6465  de_api: FullNode
+00014fd0: 5369 6d75 6c61 746f 7220 3d20 656e 762e  Simulator = env.
+00014fe0: 6675 6c6c 5f6e 6f64 652e 6170 690a 2020  full_node.api.  
+00014ff0: 2020 7270 635f 7365 7276 6572 3a20 4f70    rpc_server: Op
+00015000: 7469 6f6e 616c 5b52 7063 5365 7276 6572  tional[RpcServer
+00015010: 5d20 3d20 7761 6c6c 6574 5f72 7063 5f65  ] = wallet_rpc_e
+00015020: 6e76 6972 6f6e 6d65 6e74 2e77 616c 6c65  nvironment.walle
+00015030: 745f 312e 7365 7276 6963 652e 7270 635f  t_1.service.rpc_
+00015040: 7365 7276 6572 0a20 2020 2061 7761 6974  server.    await
+00015050: 2067 656e 6572 6174 655f 6675 6e64 7328   generate_funds(
+00015060: 6675 6c6c 5f6e 6f64 655f 6170 692c 2065  full_node_api, e
+00015070: 6e76 2e77 616c 6c65 745f 3129 0a20 2020  nv.wallet_1).   
+00015080: 2061 7373 6572 7420 7270 635f 7365 7276   assert rpc_serv
+00015090: 6572 2069 7320 6e6f 7420 4e6f 6e65 0a20  er is not None. 
+000150a0: 2020 2061 7069 3a20 5761 6c6c 6574 5270     api: WalletRp
+000150b0: 6341 7069 203d 2063 6173 7428 5761 6c6c  cApi = cast(Wall
+000150c0: 6574 5270 6341 7069 2c20 7270 635f 7365  etRpcApi, rpc_se
+000150d0: 7276 6572 2e72 7063 5f61 7069 290a 2020  rver.rpc_api).  
+000150e0: 2020 7265 7120 3d20 7b22 656e 6162 6c65    req = {"enable
+000150f0: 6422 3a20 4661 6c73 652c 2022 7478 5f66  d": False, "tx_f
+00015100: 6565 223a 202d 312c 2022 6d69 6e5f 616d  ee": -1, "min_am
+00015110: 6f75 6e74 223a 2031 3030 7d0a 2020 2020  ount": 100}.    
+00015120: 6861 735f 6578 6365 7074 696f 6e20 3d20  has_exception = 
+00015130: 4661 6c73 650a 2020 2020 7472 793a 0a20  False.    try:. 
+00015140: 2020 2020 2020 2072 6573 203d 2061 7761         res = awa
+00015150: 6974 2061 7069 2e73 6574 5f61 7574 6f5f  it api.set_auto_
+00015160: 636c 6169 6d28 7265 7129 0a20 2020 2065  claim(req).    e
+00015170: 7863 6570 7420 436f 6e76 6572 7369 6f6e  xcept Conversion
+00015180: 4572 726f 723a 0a20 2020 2020 2020 2068  Error:.        h
+00015190: 6173 5f65 7863 6570 7469 6f6e 203d 2054  as_exception = T
+000151a0: 7275 650a 2020 2020 6173 7365 7274 2068  rue.    assert h
+000151b0: 6173 5f65 7863 6570 7469 6f6e 0a20 2020  as_exception.   
+000151c0: 2072 6571 203d 207b 2265 6e61 626c 6564   req = {"enabled
+000151d0: 223a 2046 616c 7365 2c20 2262 6174 6368  ": False, "batch
+000151e0: 5f73 697a 6522 3a20 302c 2022 6d69 6e5f  _size": 0, "min_
+000151f0: 616d 6f75 6e74 223a 2031 3030 7d0a 2020  amount": 100}.  
+00015200: 2020 7265 7320 3d20 6177 6169 7420 6170    res = await ap
+00015210: 692e 7365 745f 6175 746f 5f63 6c61 696d  i.set_auto_claim
+00015220: 2872 6571 290a 2020 2020 6173 7365 7274  (req).    assert
+00015230: 206e 6f74 2072 6573 5b22 656e 6162 6c65   not res["enable
+00015240: 6422 5d0a 2020 2020 6173 7365 7274 2072  d"].    assert r
+00015250: 6573 5b22 7478 5f66 6565 225d 203d 3d20  es["tx_fee"] == 
+00015260: 300a 2020 2020 6173 7365 7274 2072 6573  0.    assert res
+00015270: 5b22 6d69 6e5f 616d 6f75 6e74 225d 203d  ["min_amount"] =
+00015280: 3d20 3130 300a 2020 2020 6173 7365 7274  = 100.    assert
+00015290: 2072 6573 5b22 6261 7463 685f 7369 7a65   res["batch_size
+000152a0: 225d 203d 3d20 3530 0a0a 0a40 7079 7465  "] == 50...@pyte
+000152b0: 7374 2e6d 6172 6b2e 6173 796e 6369 6f0a  st.mark.asyncio.
+000152c0: 6173 796e 6320 6465 6620 7465 7374 5f67  async def test_g
+000152d0: 6574 5f61 7574 6f5f 636c 6169 6d28 7761  et_auto_claim(wa
+000152e0: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
+000152f0: 6d65 6e74 3a20 5761 6c6c 6574 5270 6354  ment: WalletRpcT
+00015300: 6573 7445 6e76 6972 6f6e 6d65 6e74 293a  estEnvironment):
+00015310: 0a20 2020 2065 6e76 3a20 5761 6c6c 6574  .    env: Wallet
+00015320: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+00015330: 6e74 203d 2077 616c 6c65 745f 7270 635f  nt = wallet_rpc_
+00015340: 656e 7669 726f 6e6d 656e 740a 2020 2020  environment.    
+00015350: 6675 6c6c 5f6e 6f64 655f 6170 693a 2046  full_node_api: F
+00015360: 756c 6c4e 6f64 6553 696d 756c 6174 6f72  ullNodeSimulator
+00015370: 203d 2065 6e76 2e66 756c 6c5f 6e6f 6465   = env.full_node
+00015380: 2e61 7069 0a20 2020 2072 7063 5f73 6572  .api.    rpc_ser
+00015390: 7665 723a 204f 7074 696f 6e61 6c5b 5270  ver: Optional[Rp
+000153a0: 6353 6572 7665 725d 203d 2077 616c 6c65  cServer] = walle
+000153b0: 745f 7270 635f 656e 7669 726f 6e6d 656e  t_rpc_environmen
+000153c0: 742e 7761 6c6c 6574 5f31 2e73 6572 7669  t.wallet_1.servi
+000153d0: 6365 2e72 7063 5f73 6572 7665 720a 2020  ce.rpc_server.  
+000153e0: 2020 6177 6169 7420 6765 6e65 7261 7465    await generate
+000153f0: 5f66 756e 6473 2866 756c 6c5f 6e6f 6465  _funds(full_node
+00015400: 5f61 7069 2c20 656e 762e 7761 6c6c 6574  _api, env.wallet
+00015410: 5f31 290a 2020 2020 6173 7365 7274 2072  _1).    assert r
+00015420: 7063 5f73 6572 7665 7220 6973 206e 6f74  pc_server is not
+00015430: 204e 6f6e 650a 2020 2020 6170 693a 2057   None.    api: W
+00015440: 616c 6c65 7452 7063 4170 6920 3d20 6361  alletRpcApi = ca
+00015450: 7374 2857 616c 6c65 7452 7063 4170 692c  st(WalletRpcApi,
+00015460: 2072 7063 5f73 6572 7665 722e 7270 635f   rpc_server.rpc_
+00015470: 6170 6929 0a20 2020 2072 6573 203d 2061  api).    res = a
+00015480: 7761 6974 2061 7069 2e67 6574 5f61 7574  wait api.get_aut
+00015490: 6f5f 636c 6169 6d28 7b7d 290a 2020 2020  o_claim({}).    
+000154a0: 6173 7365 7274 206e 6f74 2072 6573 5b22  assert not res["
+000154b0: 656e 6162 6c65 6422 5d0a 2020 2020 6173  enabled"].    as
+000154c0: 7365 7274 2072 6573 5b22 7478 5f66 6565  sert res["tx_fee
+000154d0: 225d 203d 3d20 300a 2020 2020 6173 7365  "] == 0.    asse
+000154e0: 7274 2072 6573 5b22 6d69 6e5f 616d 6f75  rt res["min_amou
+000154f0: 6e74 225d 203d 3d20 300a 2020 2020 6173  nt"] == 0.    as
+00015500: 7365 7274 2072 6573 5b22 6261 7463 685f  sert res["batch_
+00015510: 7369 7a65 225d 203d 3d20 3530 0a0a 0a40  size"] == 50...@
+00015520: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+00015530: 6369 6f0a 6173 796e 6320 6465 6620 7465  cio.async def te
+00015540: 7374 5f73 6574 5f77 616c 6c65 745f 7265  st_set_wallet_re
+00015550: 7379 6e63 5f6f 6e5f 7374 6172 7475 7028  sync_on_startup(
+00015560: 7761 6c6c 6574 5f72 7063 5f65 6e76 6972  wallet_rpc_envir
+00015570: 6f6e 6d65 6e74 3a20 5761 6c6c 6574 5270  onment: WalletRp
+00015580: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
+00015590: 293a 0a20 2020 2065 6e76 3a20 5761 6c6c  ):.    env: Wall
+000155a0: 6574 5270 6354 6573 7445 6e76 6972 6f6e  etRpcTestEnviron
+000155b0: 6d65 6e74 203d 2077 616c 6c65 745f 7270  ment = wallet_rp
+000155c0: 635f 656e 7669 726f 6e6d 656e 740a 2020  c_environment.  
+000155d0: 2020 6675 6c6c 5f6e 6f64 655f 6170 693a    full_node_api:
+000155e0: 2046 756c 6c4e 6f64 6553 696d 756c 6174   FullNodeSimulat
+000155f0: 6f72 203d 2065 6e76 2e66 756c 6c5f 6e6f  or = env.full_no
+00015600: 6465 2e61 7069 0a20 2020 2063 6c69 656e  de.api.    clien
+00015610: 743a 2057 616c 6c65 7452 7063 436c 6965  t: WalletRpcClie
+00015620: 6e74 203d 2065 6e76 2e77 616c 6c65 745f  nt = env.wallet_
+00015630: 312e 7270 635f 636c 6965 6e74 0a20 2020  1.rpc_client.   
+00015640: 2061 7761 6974 2067 656e 6572 6174 655f   await generate_
+00015650: 6675 6e64 7328 6675 6c6c 5f6e 6f64 655f  funds(full_node_
+00015660: 6170 692c 2065 6e76 2e77 616c 6c65 745f  api, env.wallet_
+00015670: 3129 0a20 2020 2077 6320 3d20 656e 762e  1).    wc = env.
+00015680: 7761 6c6c 6574 5f31 2e72 7063 5f63 6c69  wallet_1.rpc_cli
+00015690: 656e 740a 2020 2020 6177 6169 7420 7763  ent.    await wc
+000156a0: 2e63 7265 6174 655f 6e65 775f 6469 645f  .create_new_did_
+000156b0: 7761 6c6c 6574 2831 2c20 3029 0a20 2020  wallet(1, 0).   
+000156c0: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+000156d0: 6173 7365 7274 2835 2c20 6368 6563 6b5f  assert(5, check_
+000156e0: 6d65 6d70 6f6f 6c5f 7370 656e 645f 636f  mempool_spend_co
+000156f0: 756e 742c 2054 7275 652c 2066 756c 6c5f  unt, True, full_
+00015700: 6e6f 6465 5f61 7069 2c20 3129 0a20 2020  node_api, 1).   
+00015710: 2061 7761 6974 2066 6172 6d5f 7472 616e   await farm_tran
+00015720: 7361 6374 696f 6e5f 626c 6f63 6b28 6675  saction_block(fu
+00015730: 6c6c 5f6e 6f64 655f 6170 692c 2065 6e76  ll_node_api, env
+00015740: 2e77 616c 6c65 745f 312e 6e6f 6465 290a  .wallet_1.node).
+00015750: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
+00015760: 7574 5f61 7373 6572 7428 3230 2c20 7763  ut_assert(20, wc
+00015770: 2e67 6574 5f73 796e 6365 6429 0a0a 2020  .get_synced)..  
+00015780: 2020 6e66 745f 7761 6c6c 6574 203d 2061    nft_wallet = a
+00015790: 7761 6974 2077 632e 6372 6561 7465 5f6e  wait wc.create_n
+000157a0: 6577 5f6e 6674 5f77 616c 6c65 7428 4e6f  ew_nft_wallet(No
+000157b0: 6e65 290a 2020 2020 6e66 745f 7761 6c6c  ne).    nft_wall
+000157c0: 6574 5f69 6420 3d20 6e66 745f 7761 6c6c  et_id = nft_wall
+000157d0: 6574 5b22 7761 6c6c 6574 5f69 6422 5d0a  et["wallet_id"].
+000157e0: 2020 2020 6164 6472 6573 7320 3d20 6177      address = aw
+000157f0: 6169 7420 7763 2e67 6574 5f6e 6578 745f  ait wc.get_next_
+00015800: 6164 6472 6573 7328 656e 762e 7761 6c6c  address(env.wall
+00015810: 6574 5f31 2e77 616c 6c65 742e 6964 2829  et_1.wallet.id()
+00015820: 2c20 5472 7565 290a 2020 2020 6177 6169  , True).    awai
+00015830: 7420 7763 2e6d 696e 745f 6e66 7428 0a20  t wc.mint_nft(. 
+00015840: 2020 2020 2020 206e 6674 5f77 616c 6c65         nft_walle
+00015850: 745f 6964 2c20 726f 7961 6c74 795f 6164  t_id, royalty_ad
+00015860: 6472 6573 733d 6164 6472 6573 732c 2074  dress=address, t
+00015870: 6172 6765 745f 6164 6472 6573 733d 6164  arget_address=ad
+00015880: 6472 6573 732c 2068 6173 683d 2264 6561  dress, hash="dea
+00015890: 6462 6565 6622 2c20 7572 6973 3d5b 2268  dbeef", uris=["h
+000158a0: 7474 703a 2f2f 7465 7374 2e6e 6674 225d  ttp://test.nft"]
+000158b0: 0a20 2020 2029 0a20 2020 2061 7761 6974  .    ).    await
+000158c0: 2074 696d 655f 6f75 745f 6173 7365 7274   time_out_assert
+000158d0: 2835 2c20 6368 6563 6b5f 6d65 6d70 6f6f  (5, check_mempoo
+000158e0: 6c5f 7370 656e 645f 636f 756e 742c 2054  l_spend_count, T
+000158f0: 7275 652c 2066 756c 6c5f 6e6f 6465 5f61  rue, full_node_a
+00015900: 7069 2c20 3129 0a20 2020 2061 7761 6974  pi, 1).    await
+00015910: 2066 6172 6d5f 7472 616e 7361 6374 696f   farm_transactio
+00015920: 6e5f 626c 6f63 6b28 6675 6c6c 5f6e 6f64  n_block(full_nod
+00015930: 655f 6170 692c 2065 6e76 2e77 616c 6c65  e_api, env.walle
+00015940: 745f 312e 6e6f 6465 290a 2020 2020 6177  t_1.node).    aw
+00015950: 6169 7420 7469 6d65 5f6f 7574 5f61 7373  ait time_out_ass
+00015960: 6572 7428 3230 2c20 7763 2e67 6574 5f73  ert(20, wc.get_s
+00015970: 796e 6365 6429 0a0a 2020 2020 7761 6c6c  ynced)..    wall
+00015980: 6574 5f6e 6f64 653a 2057 616c 6c65 744e  et_node: WalletN
+00015990: 6f64 6520 3d20 656e 762e 7761 6c6c 6574  ode = env.wallet
+000159a0: 5f31 2e6e 6f64 650a 2020 2020 7761 6c6c  _1.node.    wall
+000159b0: 6574 5f6e 6f64 655f 323a 2057 616c 6c65  et_node_2: Walle
+000159c0: 744e 6f64 6520 3d20 656e 762e 7761 6c6c  tNode = env.wall
+000159d0: 6574 5f32 2e6e 6f64 650a 2020 2020 7761  et_2.node.    wa
+000159e0: 6c6c 6574 5f6e 6f64 655f 322e 5f63 6c6f  llet_node_2._clo
+000159f0: 7365 2829 0a20 2020 2061 7761 6974 2077  se().    await w
+00015a00: 616c 6c65 745f 6e6f 6465 5f32 2e5f 6177  allet_node_2._aw
+00015a10: 6169 745f 636c 6f73 6564 2829 0a20 2020  ait_closed().   
+00015a20: 2023 2073 6574 2066 6c61 6720 746f 2072   # set flag to r
+00015a30: 6573 6574 2077 616c 6c65 7420 7379 6e63  eset wallet sync
+00015a40: 2064 6174 6120 6f6e 2073 7461 7274 0a20   data on start. 
+00015a50: 2020 2061 7761 6974 2063 6c69 656e 742e     await client.
+00015a60: 7365 745f 7761 6c6c 6574 5f72 6573 796e  set_wallet_resyn
+00015a70: 635f 6f6e 5f73 7461 7274 7570 2829 0a20  c_on_startup(). 
+00015a80: 2020 2066 696e 6765 7270 7269 6e74 203d     fingerprint =
+00015a90: 2077 616c 6c65 745f 6e6f 6465 2e6c 6f67   wallet_node.log
+00015aa0: 6765 645f 696e 5f66 696e 6765 7270 7269  ged_in_fingerpri
+00015ab0: 6e74 0a20 2020 2061 7373 6572 7420 7761  nt.    assert wa
+00015ac0: 6c6c 6574 5f6e 6f64 652e 5f77 616c 6c65  llet_node._walle
+00015ad0: 745f 7374 6174 655f 6d61 6e61 6765 720a  t_state_manager.
+00015ae0: 2020 2020 2320 3220 7265 7761 7264 2063      # 2 reward c
+00015af0: 6f69 6e73 2c20 3120 4449 442c 2031 204e  oins, 1 DID, 1 N
+00015b00: 4654 0a20 2020 2061 7373 6572 7420 6c65  FT.    assert le
+00015b10: 6e28 6177 6169 7420 7761 6c6c 6574 5f6e  n(await wallet_n
+00015b20: 6f64 652e 5f77 616c 6c65 745f 7374 6174  ode._wallet_stat
+00015b30: 655f 6d61 6e61 6765 722e 636f 696e 5f73  e_manager.coin_s
+00015b40: 746f 7265 2e67 6574 5f61 6c6c 5f75 6e73  tore.get_all_uns
+00015b50: 7065 6e74 5f63 6f69 6e73 2829 2920 3d3d  pent_coins()) ==
+00015b60: 2034 0a20 2020 2061 7373 6572 7420 6177   4.    assert aw
+00015b70: 6169 7420 7761 6c6c 6574 5f6e 6f64 652e  ait wallet_node.
+00015b80: 5f77 616c 6c65 745f 7374 6174 655f 6d61  _wallet_state_ma
+00015b90: 6e61 6765 722e 6e66 745f 7374 6f72 652e  nager.nft_store.
+00015ba0: 636f 756e 7428 2920 3d3d 2031 0a20 2020  count() == 1.   
+00015bb0: 2023 2073 7461 6e64 6172 6420 7761 6c6c   # standard wall
+00015bc0: 6574 2c20 6469 6420 7761 6c6c 6574 2c20  et, did wallet, 
+00015bd0: 6e66 7420 7761 6c6c 6574 2c20 6469 6420  nft wallet, did 
+00015be0: 6e66 7420 7761 6c6c 6574 0a20 2020 2061  nft wallet.    a
+00015bf0: 7373 6572 7420 6c65 6e28 6177 6169 7420  ssert len(await 
+00015c00: 7761 6c6c 6574 5f6e 6f64 652e 7761 6c6c  wallet_node.wall
+00015c10: 6574 5f73 7461 7465 5f6d 616e 6167 6572  et_state_manager
+00015c20: 2e75 7365 725f 7374 6f72 652e 6765 745f  .user_store.get_
+00015c30: 616c 6c5f 7761 6c6c 6574 5f69 6e66 6f5f  all_wallet_info_
+00015c40: 656e 7472 6965 7328 2929 203d 3d20 340a  entries()) == 4.
+00015c50: 2020 2020 6265 666f 7265 5f74 7873 203d      before_txs =
+00015c60: 2061 7761 6974 2077 616c 6c65 745f 6e6f   await wallet_no
+00015c70: 6465 2e77 616c 6c65 745f 7374 6174 655f  de.wallet_state_
+00015c80: 6d61 6e61 6765 722e 7478 5f73 746f 7265  manager.tx_store
+00015c90: 2e67 6574 5f61 6c6c 5f74 7261 6e73 6163  .get_all_transac
+00015ca0: 7469 6f6e 7328 290a 2020 2020 7761 6c6c  tions().    wall
+00015cb0: 6574 5f6e 6f64 652e 5f63 6c6f 7365 2829  et_node._close()
+00015cc0: 0a20 2020 2061 7761 6974 2077 616c 6c65  .    await walle
+00015cd0: 745f 6e6f 6465 2e5f 6177 6169 745f 636c  t_node._await_cl
+00015ce0: 6f73 6564 2829 0a20 2020 2063 6f6e 6669  osed().    confi
+00015cf0: 6720 3d20 6c6f 6164 5f63 6f6e 6669 6728  g = load_config(
+00015d00: 7761 6c6c 6574 5f6e 6f64 652e 726f 6f74  wallet_node.root
+00015d10: 5f70 6174 682c 2022 636f 6e66 6967 2e79  _path, "config.y
+00015d20: 616d 6c22 290a 2020 2020 2320 6368 6563  aml").    # chec
+00015d30: 6b20 7468 6174 2066 6c61 6720 7761 7320  k that flag was 
+00015d40: 7365 7420 696e 2063 6f6e 6669 6720 6669  set in config fi
+00015d50: 6c65 0a20 2020 2061 7373 6572 7420 636f  le.    assert co
+00015d60: 6e66 6967 5b22 7761 6c6c 6574 225d 5b22  nfig["wallet"]["
+00015d70: 7265 7365 745f 7379 6e63 5f66 6f72 5f66  reset_sync_for_f
+00015d80: 696e 6765 7270 7269 6e74 225d 203d 3d20  ingerprint"] == 
+00015d90: 6669 6e67 6572 7072 696e 740a 2020 2020  fingerprint.    
+00015da0: 6e65 775f 636f 6e66 6967 203d 2077 616c  new_config = wal
+00015db0: 6c65 745f 6e6f 6465 2e63 6f6e 6669 672e  let_node.config.
+00015dc0: 636f 7079 2829 0a20 2020 206e 6577 5f63  copy().    new_c
+00015dd0: 6f6e 6669 675b 2272 6573 6574 5f73 796e  onfig["reset_syn
+00015de0: 635f 666f 725f 6669 6e67 6572 7072 696e  c_for_fingerprin
+00015df0: 7422 5d20 3d20 636f 6e66 6967 5b22 7761  t"] = config["wa
+00015e00: 6c6c 6574 225d 5b22 7265 7365 745f 7379  llet"]["reset_sy
+00015e10: 6e63 5f66 6f72 5f66 696e 6765 7270 7269  nc_for_fingerpri
+00015e20: 6e74 225d 0a20 2020 2077 616c 6c65 745f  nt"].    wallet_
+00015e30: 6e6f 6465 5f32 2e63 6f6e 6669 6720 3d20  node_2.config = 
+00015e40: 6e65 775f 636f 6e66 6967 0a20 2020 2077  new_config.    w
+00015e50: 616c 6c65 745f 6e6f 6465 5f32 2e72 6f6f  allet_node_2.roo
+00015e60: 745f 7061 7468 203d 2077 616c 6c65 745f  t_path = wallet_
+00015e70: 6e6f 6465 2e72 6f6f 745f 7061 7468 0a20  node.root_path. 
+00015e80: 2020 2077 616c 6c65 745f 6e6f 6465 5f32     wallet_node_2
+00015e90: 2e6c 6f63 616c 5f6b 6579 6368 6169 6e20  .local_keychain 
+00015ea0: 3d20 7761 6c6c 6574 5f6e 6f64 652e 6c6f  = wallet_node.lo
+00015eb0: 6361 6c5f 6b65 7963 6861 696e 0a20 2020  cal_keychain.   
+00015ec0: 2023 2075 7365 2073 6563 6f6e 6420 6e6f   # use second no
+00015ed0: 6465 2074 6f20 7374 6172 7420 7468 6520  de to start the 
+00015ee0: 7361 6d65 2077 616c 6c65 742c 2072 6575  same wallet, reu
+00015ef0: 7369 6e67 2063 6f6e 6669 6720 616e 6420  sing config and 
+00015f00: 6462 0a20 2020 2061 7761 6974 2077 616c  db.    await wal
+00015f10: 6c65 745f 6e6f 6465 5f32 2e5f 7374 6172  let_node_2._star
+00015f20: 745f 7769 7468 5f66 696e 6765 7270 7269  t_with_fingerpri
+00015f30: 6e74 2866 696e 6765 7270 7269 6e74 290a  nt(fingerprint).
+00015f40: 2020 2020 6173 7365 7274 2077 616c 6c65      assert walle
+00015f50: 745f 6e6f 6465 5f32 2e5f 7761 6c6c 6574  t_node_2._wallet
+00015f60: 5f73 7461 7465 5f6d 616e 6167 6572 0a20  _state_manager. 
+00015f70: 2020 2061 6674 6572 5f74 7873 203d 2061     after_txs = a
+00015f80: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
+00015f90: 5f32 2e77 616c 6c65 745f 7374 6174 655f  _2.wallet_state_
+00015fa0: 6d61 6e61 6765 722e 7478 5f73 746f 7265  manager.tx_store
+00015fb0: 2e67 6574 5f61 6c6c 5f74 7261 6e73 6163  .get_all_transac
+00015fc0: 7469 6f6e 7328 290a 2020 2020 2320 7472  tions().    # tr
+00015fd0: 616e 7361 6374 696f 6e73 2073 686f 756c  ansactions shoul
+00015fe0: 6420 6265 2074 6865 2073 616d 650a 2020  d be the same.  
+00015ff0: 2020 6173 7365 7274 2061 6674 6572 5f74    assert after_t
+00016000: 7873 203d 3d20 6265 666f 7265 5f74 7873  xs == before_txs
+00016010: 0a20 2020 2023 206f 6e6c 7920 636f 696e  .    # only coin
+00016020: 5f73 746f 7265 2077 6173 2070 6f70 756c  _store was popul
+00016030: 6174 6564 2069 6e20 7468 6973 2063 6173  ated in this cas
+00016040: 652c 2062 7574 206e 6f77 2073 686f 756c  e, but now shoul
+00016050: 6420 6265 2065 6d70 7479 0a20 2020 2061  d be empty.    a
+00016060: 7373 6572 7420 6c65 6e28 6177 6169 7420  ssert len(await 
+00016070: 7761 6c6c 6574 5f6e 6f64 655f 322e 5f77  wallet_node_2._w
+00016080: 616c 6c65 745f 7374 6174 655f 6d61 6e61  allet_state_mana
+00016090: 6765 722e 636f 696e 5f73 746f 7265 2e67  ger.coin_store.g
+000160a0: 6574 5f61 6c6c 5f75 6e73 7065 6e74 5f63  et_all_unspent_c
+000160b0: 6f69 6e73 2829 2920 3d3d 2030 0a20 2020  oins()) == 0.   
+000160c0: 2061 7373 6572 7420 6177 6169 7420 7761   assert await wa
+000160d0: 6c6c 6574 5f6e 6f64 655f 322e 5f77 616c  llet_node_2._wal
+000160e0: 6c65 745f 7374 6174 655f 6d61 6e61 6765  let_state_manage
+000160f0: 722e 6e66 745f 7374 6f72 652e 636f 756e  r.nft_store.coun
+00016100: 7428 2920 3d3d 2030 0a20 2020 2023 2077  t() == 0.    # w
+00016110: 6520 646f 6e27 7420 6465 6c65 7465 2077  e don't delete w
+00016120: 616c 6c65 7473 0a20 2020 2061 7373 6572  allets.    asser
+00016130: 7420 6c65 6e28 6177 6169 7420 7761 6c6c  t len(await wall
+00016140: 6574 5f6e 6f64 655f 322e 7761 6c6c 6574  et_node_2.wallet
+00016150: 5f73 7461 7465 5f6d 616e 6167 6572 2e75  _state_manager.u
+00016160: 7365 725f 7374 6f72 652e 6765 745f 616c  ser_store.get_al
+00016170: 6c5f 7761 6c6c 6574 5f69 6e66 6f5f 656e  l_wallet_info_en
+00016180: 7472 6965 7328 2929 203d 3d20 340a 2020  tries()) == 4.  
+00016190: 2020 7570 6461 7465 645f 636f 6e66 6967    updated_config
+000161a0: 203d 206c 6f61 645f 636f 6e66 6967 2877   = load_config(w
+000161b0: 616c 6c65 745f 6e6f 6465 2e72 6f6f 745f  allet_node.root_
+000161c0: 7061 7468 2c20 2263 6f6e 6669 672e 7961  path, "config.ya
+000161d0: 6d6c 2229 0a20 2020 2023 2063 6865 636b  ml").    # check
+000161e0: 2074 6861 7420 6974 2773 2064 6973 6162   that it's disab
+000161f0: 6c65 6420 6166 7465 7220 7265 7365 740a  led after reset.
+00016200: 2020 2020 6173 7365 7274 2075 7064 6174      assert updat
+00016210: 6564 5f63 6f6e 6669 675b 2277 616c 6c65  ed_config["walle
+00016220: 7422 5d2e 6765 7428 2272 6573 6574 5f73  t"].get("reset_s
+00016230: 796e 635f 666f 725f 6669 6e67 6572 7072  ync_for_fingerpr
+00016240: 696e 7422 2920 6973 204e 6f6e 650a 2020  int") is None.  
+00016250: 2020 7761 6c6c 6574 5f6e 6f64 655f 322e    wallet_node_2.
+00016260: 5f63 6c6f 7365 2829 0a20 2020 2061 7761  _close().    awa
+00016270: 6974 2077 616c 6c65 745f 6e6f 6465 5f32  it wallet_node_2
+00016280: 2e5f 6177 6169 745f 636c 6f73 6564 2829  ._await_closed()
+00016290: 0a0a 0a40 7079 7465 7374 2e6d 6172 6b2e  ...@pytest.mark.
+000162a0: 6173 796e 6369 6f0a 6173 796e 6320 6465  asyncio.async de
+000162b0: 6620 7465 7374 5f73 6574 5f77 616c 6c65  f test_set_walle
+000162c0: 745f 7265 7379 6e63 5f6f 6e5f 7374 6172  t_resync_on_star
+000162d0: 7475 705f 6469 7361 626c 6528 7761 6c6c  tup_disable(wall
+000162e0: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
+000162f0: 6e74 3a20 5761 6c6c 6574 5270 6354 6573  nt: WalletRpcTes
+00016300: 7445 6e76 6972 6f6e 6d65 6e74 293a 0a20  tEnvironment):. 
+00016310: 2020 2065 6e76 3a20 5761 6c6c 6574 5270     env: WalletRp
+00016320: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
+00016330: 203d 2077 616c 6c65 745f 7270 635f 656e   = wallet_rpc_en
+00016340: 7669 726f 6e6d 656e 740a 2020 2020 6675  vironment.    fu
+00016350: 6c6c 5f6e 6f64 655f 6170 693a 2046 756c  ll_node_api: Ful
+00016360: 6c4e 6f64 6553 696d 756c 6174 6f72 203d  lNodeSimulator =
+00016370: 2065 6e76 2e66 756c 6c5f 6e6f 6465 2e61   env.full_node.a
+00016380: 7069 0a20 2020 2063 6c69 656e 743a 2057  pi.    client: W
+00016390: 616c 6c65 7452 7063 436c 6965 6e74 203d  alletRpcClient =
+000163a0: 2065 6e76 2e77 616c 6c65 745f 312e 7270   env.wallet_1.rp
+000163b0: 635f 636c 6965 6e74 0a20 2020 2061 7761  c_client.    awa
+000163c0: 6974 2067 656e 6572 6174 655f 6675 6e64  it generate_fund
+000163d0: 7328 6675 6c6c 5f6e 6f64 655f 6170 692c  s(full_node_api,
+000163e0: 2065 6e76 2e77 616c 6c65 745f 3129 0a20   env.wallet_1). 
+000163f0: 2020 2077 616c 6c65 745f 6e6f 6465 3a20     wallet_node: 
+00016400: 5761 6c6c 6574 4e6f 6465 203d 2065 6e76  WalletNode = env
+00016410: 2e77 616c 6c65 745f 312e 6e6f 6465 0a20  .wallet_1.node. 
+00016420: 2020 2077 616c 6c65 745f 6e6f 6465 5f32     wallet_node_2
+00016430: 3a20 5761 6c6c 6574 4e6f 6465 203d 2065  : WalletNode = e
+00016440: 6e76 2e77 616c 6c65 745f 322e 6e6f 6465  nv.wallet_2.node
+00016450: 0a20 2020 2077 616c 6c65 745f 6e6f 6465  .    wallet_node
+00016460: 5f32 2e5f 636c 6f73 6528 290a 2020 2020  _2._close().    
+00016470: 6177 6169 7420 7761 6c6c 6574 5f6e 6f64  await wallet_nod
+00016480: 655f 322e 5f61 7761 6974 5f63 6c6f 7365  e_2._await_close
+00016490: 6428 290a 2020 2020 2320 7365 7420 666c  d().    # set fl
+000164a0: 6167 2074 6f20 7265 7365 7420 7761 6c6c  ag to reset wall
+000164b0: 6574 2073 796e 6320 6461 7461 206f 6e20  et sync data on 
+000164c0: 7374 6172 740a 2020 2020 6177 6169 7420  start.    await 
+000164d0: 636c 6965 6e74 2e73 6574 5f77 616c 6c65  client.set_walle
+000164e0: 745f 7265 7379 6e63 5f6f 6e5f 7374 6172  t_resync_on_star
+000164f0: 7475 7028 290a 2020 2020 6669 6e67 6572  tup().    finger
+00016500: 7072 696e 7420 3d20 7761 6c6c 6574 5f6e  print = wallet_n
+00016510: 6f64 652e 6c6f 6767 6564 5f69 6e5f 6669  ode.logged_in_fi
+00016520: 6e67 6572 7072 696e 740a 2020 2020 6173  ngerprint.    as
+00016530: 7365 7274 2077 616c 6c65 745f 6e6f 6465  sert wallet_node
+00016540: 2e5f 7761 6c6c 6574 5f73 7461 7465 5f6d  ._wallet_state_m
+00016550: 616e 6167 6572 0a20 2020 2061 7373 6572  anager.    asser
+00016560: 7420 6c65 6e28 6177 6169 7420 7761 6c6c  t len(await wall
+00016570: 6574 5f6e 6f64 652e 5f77 616c 6c65 745f  et_node._wallet_
+00016580: 7374 6174 655f 6d61 6e61 6765 722e 636f  state_manager.co
+00016590: 696e 5f73 746f 7265 2e67 6574 5f61 6c6c  in_store.get_all
+000165a0: 5f75 6e73 7065 6e74 5f63 6f69 6e73 2829  _unspent_coins()
+000165b0: 2920 3d3d 2032 0a20 2020 2062 6566 6f72  ) == 2.    befor
+000165c0: 655f 7478 7320 3d20 6177 6169 7420 7761  e_txs = await wa
+000165d0: 6c6c 6574 5f6e 6f64 652e 7761 6c6c 6574  llet_node.wallet
+000165e0: 5f73 7461 7465 5f6d 616e 6167 6572 2e74  _state_manager.t
+000165f0: 785f 7374 6f72 652e 6765 745f 616c 6c5f  x_store.get_all_
+00016600: 7472 616e 7361 6374 696f 6e73 2829 0a20  transactions(). 
+00016610: 2020 2061 7761 6974 2063 6c69 656e 742e     await client.
+00016620: 7365 745f 7761 6c6c 6574 5f72 6573 796e  set_wallet_resyn
+00016630: 635f 6f6e 5f73 7461 7274 7570 2846 616c  c_on_startup(Fal
+00016640: 7365 290a 2020 2020 7761 6c6c 6574 5f6e  se).    wallet_n
+00016650: 6f64 652e 5f63 6c6f 7365 2829 0a20 2020  ode._close().   
+00016660: 2061 7761 6974 2077 616c 6c65 745f 6e6f   await wallet_no
+00016670: 6465 2e5f 6177 6169 745f 636c 6f73 6564  de._await_closed
+00016680: 2829 0a20 2020 2063 6f6e 6669 6720 3d20  ().    config = 
+00016690: 6c6f 6164 5f63 6f6e 6669 6728 7761 6c6c  load_config(wall
+000166a0: 6574 5f6e 6f64 652e 726f 6f74 5f70 6174  et_node.root_pat
+000166b0: 682c 2022 636f 6e66 6967 2e79 616d 6c22  h, "config.yaml"
+000166c0: 290a 2020 2020 2320 6368 6563 6b20 7468  ).    # check th
+000166d0: 6174 2066 6c61 6720 7761 7320 7365 7420  at flag was set 
+000166e0: 696e 2063 6f6e 6669 6720 6669 6c65 0a20  in config file. 
+000166f0: 2020 2061 7373 6572 7420 636f 6e66 6967     assert config
+00016700: 5b22 7761 6c6c 6574 225d 2e67 6574 2822  ["wallet"].get("
+00016710: 7265 7365 745f 7379 6e63 5f66 6f72 5f66  reset_sync_for_f
+00016720: 696e 6765 7270 7269 6e74 2229 2069 7320  ingerprint") is 
+00016730: 4e6f 6e65 0a20 2020 206e 6577 5f63 6f6e  None.    new_con
+00016740: 6669 6720 3d20 7761 6c6c 6574 5f6e 6f64  fig = wallet_nod
+00016750: 652e 636f 6e66 6967 2e63 6f70 7928 290a  e.config.copy().
+00016760: 2020 2020 6e65 775f 636f 6e66 6967 5b22      new_config["
+00016770: 7265 7365 745f 7379 6e63 5f66 6f72 5f66  reset_sync_for_f
+00016780: 696e 6765 7270 7269 6e74 225d 203d 2063  ingerprint"] = c
+00016790: 6f6e 6669 675b 2277 616c 6c65 7422 5d2e  onfig["wallet"].
+000167a0: 6765 7428 2272 6573 6574 5f73 796e 635f  get("reset_sync_
+000167b0: 666f 725f 6669 6e67 6572 7072 696e 7422  for_fingerprint"
+000167c0: 290a 2020 2020 7761 6c6c 6574 5f6e 6f64  ).    wallet_nod
+000167d0: 655f 322e 636f 6e66 6967 203d 206e 6577  e_2.config = new
+000167e0: 5f63 6f6e 6669 670a 2020 2020 7761 6c6c  _config.    wall
+000167f0: 6574 5f6e 6f64 655f 322e 726f 6f74 5f70  et_node_2.root_p
+00016800: 6174 6820 3d20 7761 6c6c 6574 5f6e 6f64  ath = wallet_nod
+00016810: 652e 726f 6f74 5f70 6174 680a 2020 2020  e.root_path.    
+00016820: 7761 6c6c 6574 5f6e 6f64 655f 322e 6c6f  wallet_node_2.lo
+00016830: 6361 6c5f 6b65 7963 6861 696e 203d 2077  cal_keychain = w
+00016840: 616c 6c65 745f 6e6f 6465 2e6c 6f63 616c  allet_node.local
+00016850: 5f6b 6579 6368 6169 6e0a 2020 2020 2320  _keychain.    # 
+00016860: 7573 6520 7365 636f 6e64 206e 6f64 6520  use second node 
+00016870: 746f 2073 7461 7274 2074 6865 2073 616d  to start the sam
+00016880: 6520 7761 6c6c 6574 2c20 7265 7573 696e  e wallet, reusin
+00016890: 6720 636f 6e66 6967 2061 6e64 2064 620a  g config and db.
+000168a0: 2020 2020 6177 6169 7420 7761 6c6c 6574      await wallet
+000168b0: 5f6e 6f64 655f 322e 5f73 7461 7274 5f77  _node_2._start_w
+000168c0: 6974 685f 6669 6e67 6572 7072 696e 7428  ith_fingerprint(
+000168d0: 6669 6e67 6572 7072 696e 7429 0a20 2020  fingerprint).   
+000168e0: 2061 7373 6572 7420 7761 6c6c 6574 5f6e   assert wallet_n
+000168f0: 6f64 655f 322e 5f77 616c 6c65 745f 7374  ode_2._wallet_st
+00016900: 6174 655f 6d61 6e61 6765 720a 2020 2020  ate_manager.    
+00016910: 6166 7465 725f 7478 7320 3d20 6177 6169  after_txs = awai
+00016920: 7420 7761 6c6c 6574 5f6e 6f64 655f 322e  t wallet_node_2.
+00016930: 7761 6c6c 6574 5f73 7461 7465 5f6d 616e  wallet_state_man
+00016940: 6167 6572 2e74 785f 7374 6f72 652e 6765  ager.tx_store.ge
+00016950: 745f 616c 6c5f 7472 616e 7361 6374 696f  t_all_transactio
+00016960: 6e73 2829 0a20 2020 2023 2074 7261 6e73  ns().    # trans
+00016970: 6163 7469 6f6e 7320 7368 6f75 6c64 2062  actions should b
+00016980: 6520 7468 6520 7361 6d65 0a20 2020 2061  e the same.    a
+00016990: 7373 6572 7420 6166 7465 725f 7478 7320  ssert after_txs 
+000169a0: 3d3d 2062 6566 6f72 655f 7478 730a 2020  == before_txs.  
+000169b0: 2020 2320 6f6e 6c79 2063 6f69 6e5f 7374    # only coin_st
+000169c0: 6f72 6520 7761 7320 706f 7075 6c61 7465  ore was populate
+000169d0: 6420 696e 2074 6869 7320 6361 7365 2c20  d in this case, 
+000169e0: 6275 7420 6e6f 7720 7368 6f75 6c64 2062  but now should b
+000169f0: 6520 656d 7074 790a 2020 2020 6173 7365  e empty.    asse
+00016a00: 7274 206c 656e 2861 7761 6974 2077 616c  rt len(await wal
+00016a10: 6c65 745f 6e6f 6465 5f32 2e5f 7761 6c6c  let_node_2._wall
+00016a20: 6574 5f73 7461 7465 5f6d 616e 6167 6572  et_state_manager
+00016a30: 2e63 6f69 6e5f 7374 6f72 652e 6765 745f  .coin_store.get_
+00016a40: 616c 6c5f 756e 7370 656e 745f 636f 696e  all_unspent_coin
+00016a50: 7328 2929 203d 3d20 320a 2020 2020 7761  s()) == 2.    wa
+00016a60: 6c6c 6574 5f6e 6f64 655f 322e 5f63 6c6f  llet_node_2._clo
+00016a70: 7365 2829 0a20 2020 2061 7761 6974 2077  se().    await w
+00016a80: 616c 6c65 745f 6e6f 6465 5f32 2e5f 6177  allet_node_2._aw
+00016a90: 6169 745f 636c 6f73 6564 2829 0a0a 0a40  ait_closed()...@
+00016aa0: 7079 7465 7374 2e6d 6172 6b2e 6173 796e  pytest.mark.asyn
+00016ab0: 6369 6f0a 6173 796e 6320 6465 6620 7465  cio.async def te
+00016ac0: 7374 5f73 6574 5f77 616c 6c65 745f 7265  st_set_wallet_re
+00016ad0: 7379 6e63 5f73 6368 656d 6128 7761 6c6c  sync_schema(wall
+00016ae0: 6574 5f72 7063 5f65 6e76 6972 6f6e 6d65  et_rpc_environme
+00016af0: 6e74 3a20 5761 6c6c 6574 5270 6354 6573  nt: WalletRpcTes
+00016b00: 7445 6e76 6972 6f6e 6d65 6e74 293a 0a20  tEnvironment):. 
+00016b10: 2020 2065 6e76 3a20 5761 6c6c 6574 5270     env: WalletRp
+00016b20: 6354 6573 7445 6e76 6972 6f6e 6d65 6e74  cTestEnvironment
+00016b30: 203d 2077 616c 6c65 745f 7270 635f 656e   = wallet_rpc_en
+00016b40: 7669 726f 6e6d 656e 740a 2020 2020 6675  vironment.    fu
+00016b50: 6c6c 5f6e 6f64 655f 6170 693a 2046 756c  ll_node_api: Ful
+00016b60: 6c4e 6f64 6553 696d 756c 6174 6f72 203d  lNodeSimulator =
+00016b70: 2065 6e76 2e66 756c 6c5f 6e6f 6465 2e61   env.full_node.a
+00016b80: 7069 0a20 2020 2061 7761 6974 2067 656e  pi.    await gen
+00016b90: 6572 6174 655f 6675 6e64 7328 6675 6c6c  erate_funds(full
+00016ba0: 5f6e 6f64 655f 6170 692c 2065 6e76 2e77  _node_api, env.w
+00016bb0: 616c 6c65 745f 3129 0a20 2020 2077 616c  allet_1).    wal
+00016bc0: 6c65 745f 6e6f 6465 3a20 5761 6c6c 6574  let_node: Wallet
+00016bd0: 4e6f 6465 203d 2065 6e76 2e77 616c 6c65  Node = env.walle
+00016be0: 745f 312e 6e6f 6465 0a20 2020 2066 696e  t_1.node.    fin
+00016bf0: 6765 7270 7269 6e74 203d 2077 616c 6c65  gerprint = walle
+00016c00: 745f 6e6f 6465 2e6c 6f67 6765 645f 696e  t_node.logged_in
+00016c10: 5f66 696e 6765 7270 7269 6e74 0a20 2020  _fingerprint.   
+00016c20: 2061 7373 6572 7420 6669 6e67 6572 7072   assert fingerpr
+00016c30: 696e 740a 2020 2020 6462 5f70 6174 6820  int.    db_path 
+00016c40: 3d20 7761 6c6c 6574 5f6e 6f64 652e 7761  = wallet_node.wa
+00016c50: 6c6c 6574 5f73 7461 7465 5f6d 616e 6167  llet_state_manag
+00016c60: 6572 2e64 625f 7061 7468 0a20 2020 2061  er.db_path.    a
+00016c70: 7373 6572 7420 6177 6169 7420 7761 6c6c  ssert await wall
+00016c80: 6574 5f6e 6f64 652e 7265 7365 745f 7379  et_node.reset_sy
+00016c90: 6e63 5f64 6228 0a20 2020 2020 2020 2064  nc_db(.        d
+00016ca0: 625f 7061 7468 2c20 6669 6e67 6572 7072  b_path, fingerpr
+00016cb0: 696e 740a 2020 2020 292c 2022 5363 6865  int.    ), "Sche
+00016cc0: 6d61 2068 6173 2062 6565 6e20 6368 616e  ma has been chan
+00016cd0: 6765 642c 2072 6573 6574 2073 796e 6320  ged, reset sync 
+00016ce0: 6462 2077 6f6e 2774 2077 6f72 6b2c 2070  db won't work, p
+00016cf0: 6c65 6173 6520 7570 6461 7465 2057 616c  lease update Wal
+00016d00: 6c65 744e 6f64 652e 7265 7365 745f 7379  letNode.reset_sy
+00016d10: 6e63 5f64 6220 6675 6e63 7469 6f6e 220a  nc_db function".
+00016d20: 2020 2020 6462 773a 2044 4257 7261 7070      dbw: DBWrapp
+00016d30: 6572 3220 3d20 7761 6c6c 6574 5f6e 6f64  er2 = wallet_nod
+00016d40: 652e 7761 6c6c 6574 5f73 7461 7465 5f6d  e.wallet_state_m
+00016d50: 616e 6167 6572 2e64 625f 7772 6170 7065  anager.db_wrappe
+00016d60: 720a 2020 2020 636f 6e6e 3a20 6169 6f73  r.    conn: aios
+00016d70: 716c 6974 652e 436f 6e6e 6563 7469 6f6e  qlite.Connection
+00016d80: 0a20 2020 2061 7379 6e63 2077 6974 6820  .    async with 
+00016d90: 6462 772e 7772 6974 6572 2829 2061 7320  dbw.writer() as 
+00016da0: 636f 6e6e 3a0a 2020 2020 2020 2020 6177  conn:.        aw
+00016db0: 6169 7420 636f 6e6e 2e65 7865 6375 7465  ait conn.execute
+00016dc0: 2822 414c 5445 5220 5441 424c 4520 636f  ("ALTER TABLE co
+00016dd0: 696e 5f72 6563 6f72 6420 5245 4e41 4d45  in_record RENAME
+00016de0: 2054 4f20 636f 696e 5f72 6563 6f72 645f   TO coin_record_
+00016df0: 7465 6d70 2229 0a20 2020 2061 7373 6572  temp").    asser
+00016e00: 7420 6e6f 7420 6177 6169 7420 7761 6c6c  t not await wall
+00016e10: 6574 5f6e 6f64 652e 7265 7365 745f 7379  et_node.reset_sy
+00016e20: 6e63 5f64 6228 6462 5f70 6174 682c 2066  nc_db(db_path, f
+00016e30: 696e 6765 7270 7269 6e74 290a 2020 2020  ingerprint).    
+00016e40: 6173 796e 6320 7769 7468 2064 6277 2e77  async with dbw.w
+00016e50: 7269 7465 7228 2920 6173 2063 6f6e 6e3a  riter() as conn:
+00016e60: 0a20 2020 2020 2020 2061 7761 6974 2063  .        await c
+00016e70: 6f6e 6e2e 6578 6563 7574 6528 2241 4c54  onn.execute("ALT
+00016e80: 4552 2054 4142 4c45 2063 6f69 6e5f 7265  ER TABLE coin_re
+00016e90: 636f 7264 5f74 656d 7020 5245 4e41 4d45  cord_temp RENAME
+00016ea0: 2054 4f20 636f 696e 5f72 6563 6f72 6422   TO coin_record"
+00016eb0: 290a 2020 2020 6173 7365 7274 2061 7761  ).    assert awa
+00016ec0: 6974 2077 616c 6c65 745f 6e6f 6465 2e72  it wallet_node.r
+00016ed0: 6573 6574 5f73 796e 635f 6462 2864 625f  eset_sync_db(db_
+00016ee0: 7061 7468 2c20 6669 6e67 6572 7072 696e  path, fingerprin
+00016ef0: 7429 0a20 2020 2061 7379 6e63 2077 6974  t).    async wit
+00016f00: 6820 6462 772e 7772 6974 6572 2829 2061  h dbw.writer() a
+00016f10: 7320 636f 6e6e 3a0a 2020 2020 2020 2020  s conn:.        
+00016f20: 6177 6169 7420 636f 6e6e 2e65 7865 6375  await conn.execu
+00016f30: 7465 2822 4352 4541 5445 2054 4142 4c45  te("CREATE TABLE
+00016f40: 2074 6573 7469 6e67 5f73 6368 656d 6120   testing_schema 
+00016f50: 2861 2069 6e74 2c20 6220 626f 6f6c 2922  (a int, b bool)"
+00016f60: 290a 2020 2020 6173 7365 7274 206e 6f74  ).    assert not
+00016f70: 2061 7761 6974 2077 616c 6c65 745f 6e6f   await wallet_no
+00016f80: 6465 2e72 6573 6574 5f73 796e 635f 6462  de.reset_sync_db
+00016f90: 2864 625f 7061 7468 2c20 6669 6e67 6572  (db_path, finger
+00016fa0: 7072 696e 7429 0a20 2020 2061 7379 6e63  print).    async
+00016fb0: 2077 6974 6820 6462 772e 7772 6974 6572   with dbw.writer
+00016fc0: 2829 2061 7320 636f 6e6e 3a0a 2020 2020  () as conn:.    
+00016fd0: 2020 2020 6177 6169 7420 636f 6e6e 2e65      await conn.e
+00016fe0: 7865 6375 7465 2822 4452 4f50 2054 4142  xecute("DROP TAB
+00016ff0: 4c45 2074 6573 7469 6e67 5f73 6368 656d  LE testing_schem
+00017000: 6122 290a 2020 2020 6173 7365 7274 2061  a").    assert a
+00017010: 7761 6974 2077 616c 6c65 745f 6e6f 6465  wait wallet_node
+00017020: 2e72 6573 6574 5f73 796e 635f 6462 2864  .reset_sync_db(d
+00017030: 625f 7061 7468 2c20 6669 6e67 6572 7072  b_path, fingerpr
+00017040: 696e 7429 0a0a 0a40 7079 7465 7374 2e6d  int)...@pytest.m
+00017050: 6172 6b2e 6173 796e 6369 6f0a 6173 796e  ark.asyncio.asyn
+00017060: 6320 6465 6620 7465 7374 5f63 6174 5f73  c def test_cat_s
+00017070: 7065 6e64 5f72 756e 5f74 6169 6c28 7761  pend_run_tail(wa
+00017080: 6c6c 6574 5f72 7063 5f65 6e76 6972 6f6e  llet_rpc_environ
+00017090: 6d65 6e74 3a20 5761 6c6c 6574 5270 6354  ment: WalletRpcT
+000170a0: 6573 7445 6e76 6972 6f6e 6d65 6e74 293a  estEnvironment):
+000170b0: 0a20 2020 2065 6e76 3a20 5761 6c6c 6574  .    env: Wallet
+000170c0: 5270 6354 6573 7445 6e76 6972 6f6e 6d65  RpcTestEnvironme
+000170d0: 6e74 203d 2077 616c 6c65 745f 7270 635f  nt = wallet_rpc_
+000170e0: 656e 7669 726f 6e6d 656e 740a 0a20 2020  environment..   
+000170f0: 2077 616c 6c65 745f 6e6f 6465 3a20 5761   wallet_node: Wa
+00017100: 6c6c 6574 4e6f 6465 203d 2065 6e76 2e77  lletNode = env.w
+00017110: 616c 6c65 745f 312e 6e6f 6465 0a20 2020  allet_1.node.   
+00017120: 2063 6c69 656e 743a 2057 616c 6c65 7452   client: WalletR
+00017130: 7063 436c 6965 6e74 203d 2065 6e76 2e77  pcClient = env.w
+00017140: 616c 6c65 745f 312e 7270 635f 636c 6965  allet_1.rpc_clie
+00017150: 6e74 0a20 2020 2066 756c 6c5f 6e6f 6465  nt.    full_node
+00017160: 5f61 7069 3a20 4675 6c6c 4e6f 6465 5369  _api: FullNodeSi
+00017170: 6d75 6c61 746f 7220 3d20 656e 762e 6675  mulator = env.fu
+00017180: 6c6c 5f6e 6f64 652e 6170 690a 2020 2020  ll_node.api.    
+00017190: 6675 6c6c 5f6e 6f64 655f 7270 633a 2046  full_node_rpc: F
+000171a0: 756c 6c4e 6f64 6552 7063 436c 6965 6e74  ullNodeRpcClient
+000171b0: 203d 2065 6e76 2e66 756c 6c5f 6e6f 6465   = env.full_node
+000171c0: 2e72 7063 5f63 6c69 656e 740a 0a20 2020  .rpc_client..   
+000171d0: 2061 7761 6974 2067 656e 6572 6174 655f   await generate_
+000171e0: 6675 6e64 7328 6675 6c6c 5f6e 6f64 655f  funds(full_node_
+000171f0: 6170 692c 2065 6e76 2e77 616c 6c65 745f  api, env.wallet_
+00017200: 312c 2031 290a 0a20 2020 2023 2053 656e  1, 1)..    # Sen
+00017210: 6420 746f 2061 2043 4154 2077 6974 6820  d to a CAT with 
+00017220: 616e 2061 6e79 6f6e 6520 6361 6e20 7370  an anyone can sp
+00017230: 656e 6420 5441 494c 0a20 2020 206f 7572  end TAIL.    our
+00017240: 5f70 683a 2062 7974 6573 3332 203d 2061  _ph: bytes32 = a
+00017250: 7761 6974 2065 6e76 2e77 616c 6c65 745f  wait env.wallet_
+00017260: 312e 7761 6c6c 6574 2e67 6574 5f6e 6577  1.wallet.get_new
+00017270: 5f70 757a 7a6c 6568 6173 6828 290a 2020  _puzzlehash().  
+00017280: 2020 6361 745f 7075 7a7a 6c65 3a20 5072    cat_puzzle: Pr
+00017290: 6f67 7261 6d20 3d20 636f 6e73 7472 7563  ogram = construc
+000172a0: 745f 6361 745f 7075 7a7a 6c65 2843 4154  t_cat_puzzle(CAT
+000172b0: 5f4d 4f44 2c20 5072 6f67 7261 6d2e 746f  _MOD, Program.to
+000172c0: 284e 6f6e 6529 2e67 6574 5f74 7265 655f  (None).get_tree_
+000172d0: 6861 7368 2829 2c20 5072 6f67 7261 6d2e  hash(), Program.
+000172e0: 746f 2831 2929 0a20 2020 2061 6464 7220  to(1)).    addr 
+000172f0: 3d20 656e 636f 6465 5f70 757a 7a6c 655f  = encode_puzzle_
+00017300: 6861 7368 280a 2020 2020 2020 2020 6361  hash(.        ca
+00017310: 745f 7075 7a7a 6c65 2e67 6574 5f74 7265  t_puzzle.get_tre
+00017320: 655f 6861 7368 2829 2c0a 2020 2020 2020  e_hash(),.      
+00017330: 2020 2274 7863 6822 2c0a 2020 2020 290a    "txch",.    ).
+00017340: 2020 2020 7478 5f61 6d6f 756e 7420 3d20      tx_amount = 
+00017350: 7569 6e74 3634 2831 3030 290a 0a20 2020  uint64(100)..   
+00017360: 2074 7820 3d20 6177 6169 7420 636c 6965   tx = await clie
+00017370: 6e74 2e73 656e 645f 7472 616e 7361 6374  nt.send_transact
+00017380: 696f 6e28 312c 2074 785f 616d 6f75 6e74  ion(1, tx_amount
+00017390: 2c20 6164 6472 290a 2020 2020 7472 616e  , addr).    tran
+000173a0: 7361 6374 696f 6e5f 6964 203d 2074 782e  saction_id = tx.
+000173b0: 6e61 6d65 0a20 2020 2073 7065 6e64 5f62  name.    spend_b
+000173c0: 756e 646c 6520 3d20 7478 2e73 7065 6e64  undle = tx.spend
+000173d0: 5f62 756e 646c 650a 2020 2020 6173 7365  _bundle.    asse
+000173e0: 7274 2073 7065 6e64 5f62 756e 646c 6520  rt spend_bundle 
+000173f0: 6973 206e 6f74 204e 6f6e 650a 0a20 2020  is not None..   
+00017400: 2061 7761 6974 2074 696d 655f 6f75 745f   await time_out_
+00017410: 6173 7365 7274 2832 302c 2074 785f 696e  assert(20, tx_in
+00017420: 5f6d 656d 706f 6f6c 2c20 5472 7565 2c20  _mempool, True, 
+00017430: 636c 6965 6e74 2c20 7472 616e 7361 6374  client, transact
+00017440: 696f 6e5f 6964 290a 2020 2020 6177 6169  ion_id).    awai
+00017450: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
+00017460: 6f6e 2866 756c 6c5f 6e6f 6465 5f61 7069  on(full_node_api
+00017470: 2c20 7761 6c6c 6574 5f6e 6f64 652c 2073  , wallet_node, s
+00017480: 7065 6e64 5f62 756e 646c 6529 0a0a 2020  pend_bundle)..  
+00017490: 2020 2320 446f 2074 6865 2065 7665 2073    # Do the eve s
+000174a0: 7065 6e64 2062 6163 6b20 746f 206f 7572  pend back to our
+000174b0: 2077 616c 6c65 740a 2020 2020 6361 745f   wallet.    cat_
+000174c0: 636f 696e 203d 206e 6578 7428 6320 666f  coin = next(c fo
+000174d0: 7220 6320 696e 2073 7065 6e64 5f62 756e  r c in spend_bun
+000174e0: 646c 652e 6164 6469 7469 6f6e 7328 2920  dle.additions() 
+000174f0: 6966 2063 2e61 6d6f 756e 7420 3d3d 2074  if c.amount == t
+00017500: 785f 616d 6f75 6e74 290a 2020 2020 6576  x_amount).    ev
+00017510: 655f 7370 656e 6420 3d20 5370 656e 6442  e_spend = SpendB
+00017520: 756e 646c 6528 0a20 2020 2020 2020 205b  undle(.        [
+00017530: 0a20 2020 2020 2020 2020 2020 2043 6f69  .            Coi
+00017540: 6e53 7065 6e64 280a 2020 2020 2020 2020  nSpend(.        
+00017550: 2020 2020 2020 2020 6361 745f 636f 696e          cat_coin
+00017560: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00017570: 2020 6361 745f 7075 7a7a 6c65 2c0a 2020    cat_puzzle,.  
+00017580: 2020 2020 2020 2020 2020 2020 2020 5072                Pr
+00017590: 6f67 7261 6d2e 746f 280a 2020 2020 2020  ogram.to(.      
+000175a0: 2020 2020 2020 2020 2020 2020 2020 5b0a                [.
+000175b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000175c0: 2020 2020 2020 2020 5072 6f67 7261 6d2e          Program.
+000175d0: 746f 285b 5b35 312c 206f 7572 5f70 682c  to([[51, our_ph,
+000175e0: 2074 785f 616d 6f75 6e74 2c20 5b6f 7572   tx_amount, [our
+000175f0: 5f70 685d 5d2c 205b 3531 2c20 4e6f 6e65  _ph]], [51, None
+00017600: 2c20 2d31 3133 2c20 4e6f 6e65 2c20 4e6f  , -113, None, No
+00017610: 6e65 5d5d 292c 0a20 2020 2020 2020 2020  ne]]),.         
+00017620: 2020 2020 2020 2020 2020 2020 2020 204e                 N
+00017630: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00017640: 2020 2020 2020 2020 2020 2020 2063 6174               cat
+00017650: 5f63 6f69 6e2e 6e61 6d65 2829 2c0a 2020  _coin.name(),.  
+00017660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017670: 2020 2020 2020 636f 696e 5f61 735f 6c69        coin_as_li
+00017680: 7374 2863 6174 5f63 6f69 6e29 2c0a 2020  st(cat_coin),.  
+00017690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000176a0: 2020 2020 2020 5b63 6174 5f63 6f69 6e2e        [cat_coin.
+000176b0: 7061 7265 6e74 5f63 6f69 6e5f 696e 666f  parent_coin_info
+000176c0: 2c20 5072 6f67 7261 6d2e 746f 2831 292e  , Program.to(1).
+000176d0: 6765 745f 7472 6565 5f68 6173 6828 292c  get_tree_hash(),
+000176e0: 2063 6174 5f63 6f69 6e2e 616d 6f75 6e74   cat_coin.amount
+000176f0: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
+00017700: 2020 2020 2020 2020 2020 2030 2c0a 2020             0,.  
+00017710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017720: 2020 2020 2020 302c 0a20 2020 2020 2020        0,.       
+00017730: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
+00017740: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00017750: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+00017760: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+00017770: 2020 2047 3245 6c65 6d65 6e74 2829 2c0a     G2Element(),.
+00017780: 2020 2020 290a 2020 2020 6177 6169 7420      ).    await 
+00017790: 6675 6c6c 5f6e 6f64 655f 7270 632e 7075  full_node_rpc.pu
+000177a0: 7368 5f74 7828 6576 655f 7370 656e 6429  sh_tx(eve_spend)
+000177b0: 0a20 2020 2061 7761 6974 2066 6172 6d5f  .    await farm_
+000177c0: 7472 616e 7361 6374 696f 6e28 6675 6c6c  transaction(full
+000177d0: 5f6e 6f64 655f 6170 692c 2077 616c 6c65  _node_api, walle
+000177e0: 745f 6e6f 6465 2c20 6576 655f 7370 656e  t_node, eve_spen
+000177f0: 6429 0a0a 2020 2020 2320 4d61 6b65 2073  d)..    # Make s
+00017800: 7572 6520 7765 2068 6176 6520 7468 6520  ure we have the 
+00017810: 4341 540a 2020 2020 7265 7320 3d20 6177  CAT.    res = aw
+00017820: 6169 7420 636c 6965 6e74 2e63 7265 6174  ait client.creat
+00017830: 655f 7761 6c6c 6574 5f66 6f72 5f65 7869  e_wallet_for_exi
+00017840: 7374 696e 675f 6361 7428 5072 6f67 7261  sting_cat(Progra
+00017850: 6d2e 746f 284e 6f6e 6529 2e67 6574 5f74  m.to(None).get_t
+00017860: 7265 655f 6861 7368 2829 290a 2020 2020  ree_hash()).    
+00017870: 6173 7365 7274 2072 6573 5b22 7375 6363  assert res["succ
+00017880: 6573 7322 5d0a 2020 2020 6361 745f 7761  ess"].    cat_wa
+00017890: 6c6c 6574 5f69 6420 3d20 7265 735b 2277  llet_id = res["w
+000178a0: 616c 6c65 745f 6964 225d 0a20 2020 2061  allet_id"].    a
+000178b0: 7761 6974 2074 696d 655f 6f75 745f 6173  wait time_out_as
+000178c0: 7365 7274 2832 302c 2067 6574 5f63 6f6e  sert(20, get_con
+000178d0: 6669 726d 6564 5f62 616c 616e 6365 2c20  firmed_balance, 
+000178e0: 7478 5f61 6d6f 756e 742c 2063 6c69 656e  tx_amount, clien
+000178f0: 742c 2063 6174 5f77 616c 6c65 745f 6964  t, cat_wallet_id
+00017900: 290a 0a20 2020 2023 2041 7474 656d 7074  )..    # Attempt
+00017910: 2074 6f20 6d65 6c74 2069 7420 6675 6c6c   to melt it full
+00017920: 790a 2020 2020 7478 203d 2061 7761 6974  y.    tx = await
+00017930: 2063 6c69 656e 742e 6361 745f 7370 656e   client.cat_spen
+00017940: 6428 0a20 2020 2020 2020 2063 6174 5f77  d(.        cat_w
+00017950: 616c 6c65 745f 6964 2c0a 2020 2020 2020  allet_id,.      
+00017960: 2020 616d 6f75 6e74 3d75 696e 7436 3428    amount=uint64(
+00017970: 3029 2c0a 2020 2020 2020 2020 696e 6e65  0),.        inne
+00017980: 725f 6164 6472 6573 733d 656e 636f 6465  r_address=encode
+00017990: 5f70 757a 7a6c 655f 6861 7368 286f 7572  _puzzle_hash(our
+000179a0: 5f70 682c 2022 7478 6368 2229 2c0a 2020  _ph, "txch"),.  
+000179b0: 2020 2020 2020 6361 745f 6469 7363 7265        cat_discre
+000179c0: 7061 6e63 793d 2874 785f 616d 6f75 6e74  pancy=(tx_amount
+000179d0: 202a 202d 312c 2050 726f 6772 616d 2e74   * -1, Program.t
+000179e0: 6f28 4e6f 6e65 292c 2050 726f 6772 616d  o(None), Program
+000179f0: 2e74 6f28 4e6f 6e65 2929 2c0a 2020 2020  .to(None)),.    
+00017a00: 290a 2020 2020 7472 616e 7361 6374 696f  ).    transactio
+00017a10: 6e5f 6964 203d 2074 782e 6e61 6d65 0a20  n_id = tx.name. 
+00017a20: 2020 2073 7065 6e64 5f62 756e 646c 6520     spend_bundle 
+00017a30: 3d20 7478 2e73 7065 6e64 5f62 756e 646c  = tx.spend_bundl
+00017a40: 650a 2020 2020 6173 7365 7274 2073 7065  e.    assert spe
+00017a50: 6e64 5f62 756e 646c 6520 6973 206e 6f74  nd_bundle is not
+00017a60: 204e 6f6e 650a 0a20 2020 2061 7761 6974   None..    await
+00017a70: 2074 696d 655f 6f75 745f 6173 7365 7274   time_out_assert
+00017a80: 2832 302c 2074 785f 696e 5f6d 656d 706f  (20, tx_in_mempo
+00017a90: 6f6c 2c20 5472 7565 2c20 636c 6965 6e74  ol, True, client
+00017aa0: 2c20 7472 616e 7361 6374 696f 6e5f 6964  , transaction_id
+00017ab0: 290a 2020 2020 6177 6169 7420 6661 726d  ).    await farm
+00017ac0: 5f74 7261 6e73 6163 7469 6f6e 2866 756c  _transaction(ful
+00017ad0: 6c5f 6e6f 6465 5f61 7069 2c20 7761 6c6c  l_node_api, wall
+00017ae0: 6574 5f6e 6f64 652c 2073 7065 6e64 5f62  et_node, spend_b
+00017af0: 756e 646c 6529 0a0a 2020 2020 6177 6169  undle)..    awai
+00017b00: 7420 7469 6d65 5f6f 7574 5f61 7373 6572  t time_out_asser
+00017b10: 7428 3230 2c20 6765 745f 636f 6e66 6972  t(20, get_confir
+00017b20: 6d65 645f 6261 6c61 6e63 652c 2030 2c20  med_balance, 0, 
+00017b30: 636c 6965 6e74 2c20 6361 745f 7761 6c6c  client, cat_wall
+00017b40: 6574 5f69 6429 0a0a 0a40 7079 7465 7374  et_id)...@pytest
+00017b50: 2e6d 6172 6b2e 6173 796e 6369 6f0a 6173  .mark.asyncio.as
+00017b60: 796e 6320 6465 6620 7465 7374 5f67 6574  ync def test_get
+00017b70: 5f62 616c 616e 6365 7328 7761 6c6c 6574  _balances(wallet
+00017b80: 5f72 7063 5f65 6e76 6972 6f6e 6d65 6e74  _rpc_environment
+00017b90: 3a20 5761 6c6c 6574 5270 6354 6573 7445  : WalletRpcTestE
+00017ba0: 6e76 6972 6f6e 6d65 6e74 293a 0a20 2020  nvironment):.   
+00017bb0: 2065 6e76 3a20 5761 6c6c 6574 5270 6354   env: WalletRpcT
+00017bc0: 6573 7445 6e76 6972 6f6e 6d65 6e74 203d  estEnvironment =
+00017bd0: 2077 616c 6c65 745f 7270 635f 656e 7669   wallet_rpc_envi
+00017be0: 726f 6e6d 656e 740a 0a20 2020 2063 6c69  ronment..    cli
+00017bf0: 656e 743a 2057 616c 6c65 7452 7063 436c  ent: WalletRpcCl
+00017c00: 6965 6e74 203d 2065 6e76 2e77 616c 6c65  ient = env.walle
+00017c10: 745f 312e 7270 635f 636c 6965 6e74 0a20  t_1.rpc_client. 
+00017c20: 2020 2077 616c 6c65 745f 6e6f 6465 3a20     wallet_node: 
+00017c30: 5761 6c6c 6574 4e6f 6465 203d 2065 6e76  WalletNode = env
+00017c40: 2e77 616c 6c65 745f 312e 6e6f 6465 0a0a  .wallet_1.node..
+00017c50: 2020 2020 6675 6c6c 5f6e 6f64 655f 6170      full_node_ap
+00017c60: 693a 2046 756c 6c4e 6f64 6553 696d 756c  i: FullNodeSimul
+00017c70: 6174 6f72 203d 2065 6e76 2e66 756c 6c5f  ator = env.full_
+00017c80: 6e6f 6465 2e61 7069 0a0a 2020 2020 6177  node.api..    aw
+00017c90: 6169 7420 6765 6e65 7261 7465 5f66 756e  ait generate_fun
+00017ca0: 6473 2866 756c 6c5f 6e6f 6465 5f61 7069  ds(full_node_api
+00017cb0: 2c20 656e 762e 7761 6c6c 6574 5f31 2c20  , env.wallet_1, 
+00017cc0: 3129 0a0a 2020 2020 6177 6169 7420 7469  1)..    await ti
+00017cd0: 6d65 5f6f 7574 5f61 7373 6572 7428 3230  me_out_assert(20
+00017ce0: 2c20 636c 6965 6e74 2e67 6574 5f73 796e  , client.get_syn
+00017cf0: 6365 6429 0a20 2020 2023 2043 7265 6174  ced).    # Creat
+00017d00: 6573 2061 2043 4154 2077 616c 6c65 7420  es a CAT wallet 
+00017d10: 7769 7468 2031 3030 206d 6f6a 6f73 2061  with 100 mojos a
+00017d20: 6e64 2061 2043 4154 2077 6974 6820 3230  nd a CAT with 20
+00017d30: 206d 6f6a 6f73 0a20 2020 2061 7761 6974   mojos.    await
+00017d40: 2063 6c69 656e 742e 6372 6561 7465 5f6e   client.create_n
+00017d50: 6577 5f63 6174 5f61 6e64 5f77 616c 6c65  ew_cat_and_walle
+00017d60: 7428 7569 6e74 3634 2831 3030 2929 0a0a  t(uint64(100))..
+00017d70: 2020 2020 6177 6169 7420 7469 6d65 5f6f      await time_o
+00017d80: 7574 5f61 7373 6572 7428 3230 2c20 636c  ut_assert(20, cl
+00017d90: 6965 6e74 2e67 6574 5f73 796e 6365 6429  ient.get_synced)
+00017da0: 0a20 2020 2072 6573 203d 2061 7761 6974  .    res = await
+00017db0: 2063 6c69 656e 742e 6372 6561 7465 5f6e   client.create_n
+00017dc0: 6577 5f63 6174 5f61 6e64 5f77 616c 6c65  ew_cat_and_walle
+00017dd0: 7428 7569 6e74 3634 2832 3029 290a 2020  t(uint64(20)).  
+00017de0: 2020 6173 7365 7274 2072 6573 5b22 7375    assert res["su
+00017df0: 6363 6573 7322 5d0a 2020 2020 6177 6169  ccess"].    awai
+00017e00: 7420 7469 6d65 5f6f 7574 5f61 7373 6572  t time_out_asser
+00017e10: 7428 352c 2063 6865 636b 5f6d 656d 706f  t(5, check_mempo
+00017e20: 6f6c 5f73 7065 6e64 5f63 6f75 6e74 2c20  ol_spend_count, 
+00017e30: 5472 7565 2c20 6675 6c6c 5f6e 6f64 655f  True, full_node_
+00017e40: 6170 692c 2032 290a 2020 2020 6177 6169  api, 2).    awai
+00017e50: 7420 6661 726d 5f74 7261 6e73 6163 7469  t farm_transacti
+00017e60: 6f6e 5f62 6c6f 636b 2866 756c 6c5f 6e6f  on_block(full_no
+00017e70: 6465 5f61 7069 2c20 7761 6c6c 6574 5f6e  de_api, wallet_n
+00017e80: 6f64 6529 0a20 2020 2061 7761 6974 2074  ode).    await t
+00017e90: 696d 655f 6f75 745f 6173 7365 7274 2832  ime_out_assert(2
+00017ea0: 302c 2063 6c69 656e 742e 6765 745f 7379  0, client.get_sy
+00017eb0: 6e63 6564 290a 2020 2020 6261 6c20 3d20  nced).    bal = 
+00017ec0: 6177 6169 7420 636c 6965 6e74 2e67 6574  await client.get
+00017ed0: 5f77 616c 6c65 745f 6261 6c61 6e63 6573  _wallet_balances
+00017ee0: 2829 0a20 2020 2061 7373 6572 7420 6c65  ().    assert le
+00017ef0: 6e28 6261 6c29 203d 3d20 330a 2020 2020  n(bal) == 3.    
+00017f00: 6173 7365 7274 2062 616c 5b22 3122 5d5b  assert bal["1"][
+00017f10: 2263 6f6e 6669 726d 6564 5f77 616c 6c65  "confirmed_walle
+00017f20: 745f 6261 6c61 6e63 6522 5d20 3d3d 2031  t_balance"] == 1
+00017f30: 3939 3939 3939 3939 3938 3830 0a20 2020  999999999880.   
+00017f40: 2061 7373 6572 7420 6261 6c5b 2232 225d   assert bal["2"]
+00017f50: 5b22 636f 6e66 6972 6d65 645f 7761 6c6c  ["confirmed_wall
+00017f60: 6574 5f62 616c 616e 6365 225d 203d 3d20  et_balance"] == 
+00017f70: 3130 300a 2020 2020 6173 7365 7274 2062  100.    assert b
+00017f80: 616c 5b22 3322 5d5b 2263 6f6e 6669 726d  al["3"]["confirm
+00017f90: 6564 5f77 616c 6c65 745f 6261 6c61 6e63  ed_wallet_balanc
+00017fa0: 6522 5d20 3d3d 2032 300a 2020 2020 6261  e"] == 20.    ba
+00017fb0: 6c5f 6964 7320 3d20 6177 6169 7420 636c  l_ids = await cl
+00017fc0: 6965 6e74 2e67 6574 5f77 616c 6c65 745f  ient.get_wallet_
+00017fd0: 6261 6c61 6e63 6573 285b 332c 2032 5d29  balances([3, 2])
+00017fe0: 0a20 2020 2061 7373 6572 7420 6c65 6e28  .    assert len(
+00017ff0: 6261 6c5f 6964 7329 203d 3d20 320a 2020  bal_ids) == 2.  
+00018000: 2020 6173 7365 7274 2062 616c 5b22 3222    assert bal["2"
+00018010: 5d5b 2263 6f6e 6669 726d 6564 5f77 616c  ]["confirmed_wal
+00018020: 6c65 745f 6261 6c61 6e63 6522 5d20 3d3d  let_balance"] ==
+00018030: 2031 3030 0a20 2020 2061 7373 6572 7420   100.    assert 
+00018040: 6261 6c5b 2233 225d 5b22 636f 6e66 6972  bal["3"]["confir
+00018050: 6d65 645f 7761 6c6c 6574 5f62 616c 616e  med_wallet_balan
+00018060: 6365 225d 203d 3d20 3230 0a              ce"] == 20.
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/simple_sync/test_simple_sync_protocol.py` & `chia-blockchain-2.0.0b3/tests/wallet/simple_sync/test_simple_sync_protocol.py`

 * *Files 1% similar despite different names*

```diff
@@ -10,14 +10,15 @@
 
 from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
 from chia.protocols import wallet_protocol
 from chia.protocols.full_node_protocol import RespondTransaction
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.protocols.wallet_protocol import CoinStateUpdate, RespondToCoinUpdates, RespondToPhUpdates
 from chia.server.outbound_message import NodeType
+from chia.simulator.setup_nodes import SimulatorsAndWallets
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol, ReorgProtocol
 from chia.simulator.time_out_assert import time_out_assert
 from chia.simulator.wallet_tools import WalletTool
 from chia.types.blockchain_format.coin import Coin
 from chia.types.coin_record import CoinRecord
 from chia.types.condition_opcodes import ConditionOpcode
 from chia.types.condition_with_args import ConditionWithArgs
@@ -93,15 +94,15 @@
                 await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(zero_ph))
                 await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(junk_ph))
             else:
                 await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(zero_ph))
 
         all_messages = await get_all_messages_in_queue(incoming_queue)
 
-        zero_coin = await full_node_api.full_node.coin_store.get_coin_states_by_puzzle_hashes(True, [zero_ph])
+        zero_coin = await full_node_api.full_node.coin_store.get_coin_states_by_puzzle_hashes(True, {zero_ph})
         all_zero_coin = set(zero_coin)
         notified_zero_coins = set()
 
         for message in all_messages:
             if message.type == ProtocolMessageTypes.coin_state_update.value:
                 data_response: CoinStateUpdate = CoinStateUpdate.from_bytes(message.data)
                 for coin_state in data_response.items:
@@ -127,17 +128,17 @@
             if i == num_blocks - 1:
                 await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(one_ph))
                 await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(junk_ph))
             else:
                 await full_node_api.farm_new_transaction_block(FarmNewBlockProtocol(one_ph))
 
         zero_coins = await full_node_api.full_node.coin_store.get_coin_states_by_puzzle_hashes(
-            True, [zero_ph], peak.height + 1
+            True, {zero_ph}, peak.height + 1
         )
-        one_coins = await full_node_api.full_node.coin_store.get_coin_states_by_puzzle_hashes(True, [one_ph])
+        one_coins = await full_node_api.full_node.coin_store.get_coin_states_by_puzzle_hashes(True, {one_ph})
 
         all_coins = set(zero_coins)
         all_coins.update(one_coins)
 
         all_messages = await get_all_messages_in_queue(incoming_queue)
 
         notified_all_coins = set()
@@ -532,14 +533,48 @@
         assert msg_response.type == ProtocolMessageTypes.respond_to_ph_update.value
         data_response: RespondToPhUpdates = RespondToCoinUpdates.from_bytes(msg_response.data)
         # we have already subscribed to this puzzle hash. The full node will
         # ignore the duplicate
         assert data_response.coin_states == []
 
     @pytest.mark.asyncio
+    async def test_subscribe_for_puzzle_hash_coin_hint_duplicates(
+        self, simulator_and_wallet: SimulatorsAndWallets, self_hostname: str
+    ) -> None:
+        [full_node_api], [[_, wallet_server]], bt = simulator_and_wallet
+        full_node_server = full_node_api.full_node.server
+
+        await wallet_server.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
+
+        wt: WalletTool = bt.get_pool_wallet_tool()
+        ph = wt.get_new_puzzlehash()
+        await full_node_api.farm_blocks_to_puzzlehash(4, ph)
+        coins = await full_node_api.full_node.coin_store.get_coin_records_by_puzzle_hashes(False, [ph])
+        wallet_connection = full_node_server.all_connections[wallet_server.node_id]
+
+        # Create a coin which is hinted with its own destination puzzle hash
+        tx: SpendBundle = wt.generate_signed_transaction(
+            uint64(10),
+            wt.get_new_puzzlehash(),
+            coins[0].coin,
+            condition_dic={
+                ConditionOpcode.CREATE_COIN: [ConditionWithArgs(ConditionOpcode.CREATE_COIN, [ph, int_to_bytes(1), ph])]
+            },
+        )
+        await full_node_api.respond_transaction(RespondTransaction(tx), wallet_connection)
+        await full_node_api.process_spend_bundles(bundles=[tx])
+        # Query the coin states and make sure it doesn't contain duplicated entries
+        msg = wallet_protocol.RegisterForPhUpdates([ph], uint32(0))
+        msg_response = await full_node_api.register_interest_in_puzzle_hash(msg, wallet_connection)
+        assert msg_response.type == ProtocolMessageTypes.respond_to_ph_update.value
+        response = RespondToCoinUpdates.from_bytes(msg_response.data)
+        assert len(response.coin_states) > 0
+        assert len(set(response.coin_states)) == len(response.coin_states)
+
+    @pytest.mark.asyncio
     async def test_subscribe_for_hint_long_sync(self, wallet_two_node_simulator, self_hostname):
         num_blocks = 4
         full_nodes, wallets, bt = wallet_two_node_simulator
         full_node_api = full_nodes[0]
         full_node_api_1 = full_nodes[1]
 
         wallet_node, server_2 = wallets[0]
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/sync/test_wallet_sync.py` & `chia-blockchain-2.0.0b3/tests/wallet/sync/test_wallet_sync.py`

 * *Files 1% similar despite different names*

```diff
@@ -14,15 +14,14 @@
 from chia.consensus.block_rewards import calculate_base_farmer_reward, calculate_pool_reward
 from chia.full_node.weight_proof import WeightProofHandler
 from chia.protocols import full_node_protocol, wallet_protocol
 from chia.protocols.protocol_message_types import ProtocolMessageTypes
 from chia.protocols.shared_protocol import Capability
 from chia.protocols.wallet_protocol import RequestAdditions, RespondAdditions, RespondBlockHeaders, SendTransaction
 from chia.server.outbound_message import Message, make_msg
-from chia.simulator.block_tools import test_constants
 from chia.simulator.simulator_protocol import FarmNewBlockProtocol
 from chia.simulator.time_out_assert import time_out_assert, time_out_assert_not_none
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.peer_info import PeerInfo
 from chia.util.block_cache import BlockCache
 from chia.util.hash import std_hash
@@ -202,15 +201,15 @@
             dict(
                 disable_capabilities=[Capability.BASE],
             ),
         ],
         indirect=True,
     )
     @pytest.mark.asyncio
-    async def test_almost_recent(self, two_wallet_nodes, default_400_blocks, self_hostname):
+    async def test_almost_recent(self, two_wallet_nodes, default_400_blocks, self_hostname, blockchain_constants):
         # Tests the edge case of receiving funds right before the recent blocks  in weight proof
         full_nodes, wallets, bt = two_wallet_nodes
         full_node_api = full_nodes[0]
         full_node_server = full_node_api.full_node.server
 
         # Trusted node sync
         wallets[0][0].config["trusted_peers"] = {full_node_server.node_id.hex(): full_node_server.node_id.hex()}
@@ -230,15 +229,15 @@
         for i in range(20):
             # Tests a reorg with the wallet
             ph = both_phs[i % 2]
             all_blocks = bt.get_consecutive_blocks(1, block_list_input=all_blocks, pool_reward_puzzle_hash=ph)
             await full_node_api.full_node.add_block(all_blocks[-1])
 
         new_blocks = bt.get_consecutive_blocks(
-            test_constants.WEIGHT_PROOF_RECENT_BLOCKS + 10, block_list_input=all_blocks
+            blockchain_constants.WEIGHT_PROOF_RECENT_BLOCKS + 10, block_list_input=all_blocks
         )
         for i in range(base_num_blocks + 20, len(new_blocks)):
             await full_node_api.full_node.add_block(new_blocks[i])
 
         for wallet_node, wallet_server in wallets:
             wallet = wallet_node.wallet_state_manager.main_wallet
             await wallet_server.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
@@ -578,32 +577,34 @@
         )
         assert res4 is not None
         response = RespondAdditions.from_bytes(res4.data)
         assert response.proofs == []
         assert len(response.coins) == 0
 
     @pytest.mark.asyncio
-    async def test_get_wp_fork_point(self, default_10000_blocks):
+    async def test_get_wp_fork_point(self, default_10000_blocks, blockchain_constants):
         blocks = default_10000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp1 = await wpf.get_proof_of_weight(header_cache[height_to_hash[uint32(9000)]].header_hash)
         wp2 = await wpf.get_proof_of_weight(header_cache[height_to_hash[uint32(9030)]].header_hash)
         wp3 = await wpf.get_proof_of_weight(header_cache[height_to_hash[uint32(7500)]].header_hash)
         wp4 = await wpf.get_proof_of_weight(header_cache[height_to_hash[uint32(8700)]].header_hash)
         wp5 = await wpf.get_proof_of_weight(header_cache[height_to_hash[uint32(9700)]].header_hash)
         wp6 = await wpf.get_proof_of_weight(header_cache[height_to_hash[uint32(9010)]].header_hash)
-        fork12 = get_wp_fork_point(test_constants, wp1, wp2)
-        fork13 = get_wp_fork_point(test_constants, wp3, wp1)
-        fork14 = get_wp_fork_point(test_constants, wp4, wp1)
-        fork23 = get_wp_fork_point(test_constants, wp3, wp2)
-        fork24 = get_wp_fork_point(test_constants, wp4, wp2)
-        fork34 = get_wp_fork_point(test_constants, wp3, wp4)
-        fork45 = get_wp_fork_point(test_constants, wp4, wp5)
-        fork16 = get_wp_fork_point(test_constants, wp1, wp6)
+        fork12 = get_wp_fork_point(blockchain_constants, wp1, wp2)
+        fork13 = get_wp_fork_point(blockchain_constants, wp3, wp1)
+        fork14 = get_wp_fork_point(blockchain_constants, wp4, wp1)
+        fork23 = get_wp_fork_point(blockchain_constants, wp3, wp2)
+        fork24 = get_wp_fork_point(blockchain_constants, wp4, wp2)
+        fork34 = get_wp_fork_point(blockchain_constants, wp3, wp4)
+        fork45 = get_wp_fork_point(blockchain_constants, wp4, wp5)
+        fork16 = get_wp_fork_point(blockchain_constants, wp1, wp6)
 
         # overlap between recent chain in wps, fork point is the tip of the shorter wp
         assert fork12 == wp1.recent_chain_data[-1].height
         assert fork16 == wp1.recent_chain_data[-1].height
 
         # if there is an overlap between the recent chains we can find the exact fork point
         # if not we should get the latest block with a sub epoch summary that exists in both wp's
@@ -1287,22 +1288,24 @@
             assert request_puzzle_solution_failure_tested
             assert not wallet_node.fetch_children_flaky
             assert not wallet_node.get_timestamp_flaky
             assert not wallet_node.db_flaky
             await time_out_assert(30, wallet.get_confirmed_balance, 1_000_000_000_000)
 
     @pytest.mark.asyncio
-    async def test_bad_peak_mismatch(self, two_wallet_nodes, default_1000_blocks, self_hostname):
+    async def test_bad_peak_mismatch(self, two_wallet_nodes, default_1000_blocks, self_hostname, blockchain_constants):
         full_nodes, wallets, bt = two_wallet_nodes
         wallet_node, wallet_server = wallets[0]
         full_node_api = full_nodes[0]
         full_node_server = full_node_api.full_node.server
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
 
         await wallet_server.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
 
         for block in blocks:
             await full_node_api.full_node.add_block(block)
 
         await wallet_server.start_client(PeerInfo(self_hostname, uint16(full_node_server._port)), None)
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_address_type.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_address_type.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_bech32m.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_bech32m.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_chialisp.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_chialisp.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_coin_selection.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_coin_selection.py`

 * *Files 1% similar despite different names*

```diff
@@ -492,25 +492,25 @@
         )
 
         assert selected_coins is not None
         assert sum([coin.amount for coin in selected_coins]) >= target_amount
         assert len(selected_coins) == 1
         assert list(selected_coins)[0] == Coin(b_hash, b_hash, uint64(6))
 
-        exclude_all_coins = spendable_coins
+        excluded_all_coins = spendable_coins
         # make sure that a failure is raised if all coins are excluded.
         with pytest.raises(ValueError):
             await select_coins(
                 spendable_amount,
                 uint64(DEFAULT_CONSTANTS.MAX_COIN_AMOUNT),
                 spendable_wallet_coin_records,
                 {},
                 logging.getLogger("test"),
                 amount=target_amount,
-                exclude=exclude_all_coins,
+                exclude=excluded_all_coins,
             )
 
     @pytest.mark.asyncio
     async def test_coin_selection_with_zero_amount(self, a_hash: bytes32) -> None:
         coin_amounts = [3, 6, 20, 40, 80, 150, 160, 203, 202, 201, 320]
         coin_list: List[WalletCoinRecord] = [
             WalletCoinRecord(Coin(a_hash, a_hash, uint64(a)), uint32(1), uint32(1), False, True, WalletType(0), 1)
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_nft_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_nft_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_notifications.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_notifications.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_offer_parsing_performance.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_offer_parsing_performance.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_singleton.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_singleton.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_singleton_lifecycle.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_singleton_lifecycle.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_singleton_lifecycle_fast.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_singleton_lifecycle_fast.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_taproot.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_taproot.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_transaction_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_transaction_store.py`

 * *Files 6% similar despite different names*

```diff
@@ -8,14 +8,15 @@
 
 from chia.types.blockchain_format.coin import Coin
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.mempool_inclusion_status import MempoolInclusionStatus
 from chia.util.errors import Err
 from chia.util.ints import uint8, uint32, uint64
 from chia.wallet.transaction_record import TransactionRecord, minimum_send_attempts
+from chia.wallet.util.query_filter import TransactionTypeFilter
 from chia.wallet.util.transaction_type import TransactionType
 from chia.wallet.wallet_transaction_store import WalletTransactionStore, filter_ok_mempool_status
 from tests.util.db_connection import DBConnection
 
 coin_1 = Coin(token_bytes(32), token_bytes(32), uint64(12312))
 coin_2 = Coin(token_bytes(32), token_bytes(32), uint64(1234))
 coin_3 = Coin(token_bytes(32), token_bytes(32), uint64(12312 - 1234))
@@ -278,14 +279,32 @@
 
         # 2 transactions in wallet_id 2
         await store.add_transaction_record(tr2)
         await store.add_transaction_record(dataclasses.replace(tr2, name=token_bytes(32)))
 
         assert await store.get_transaction_count_for_wallet(1) == 5
         assert await store.get_transaction_count_for_wallet(2) == 2
+        assert (
+            await store.get_transaction_count_for_wallet(
+                1, True, type_filter=TransactionTypeFilter.include([TransactionType.OUTGOING_TX])
+            )
+            == 0
+        )
+        assert (
+            await store.get_transaction_count_for_wallet(
+                1, False, type_filter=TransactionTypeFilter.include([TransactionType.OUTGOING_CLAWBACK])
+            )
+            == 0
+        )
+        assert (
+            await store.get_transaction_count_for_wallet(
+                1, False, type_filter=TransactionTypeFilter.include([TransactionType.OUTGOING_TX])
+            )
+            == 5
+        )
 
 
 @pytest.mark.asyncio
 async def test_all_transactions_for_wallet() -> None:
     async with DBConnection(1) as db_wrapper:
         store = await WalletTransactionStore.create(db_wrapper)
 
@@ -438,25 +457,32 @@
 
 
 @pytest.mark.asyncio
 async def test_get_transactions_between_confirmed() -> None:
     async with DBConnection(1) as db_wrapper:
         store = await WalletTransactionStore.create(db_wrapper)
 
-        tr2 = dataclasses.replace(tr1, name=token_bytes(32), confirmed_at_height=uint32(1))
-        tr3 = dataclasses.replace(tr1, name=token_bytes(32), confirmed_at_height=uint32(2))
-        tr4 = dataclasses.replace(tr1, name=token_bytes(32), confirmed_at_height=uint32(3))
-        tr5 = dataclasses.replace(tr1, name=token_bytes(32), confirmed_at_height=uint32(4))
+        tr2 = dataclasses.replace(tr1, name=token_bytes(32), confirmed=True, confirmed_at_height=uint32(1))
+        tr3 = dataclasses.replace(tr1, name=token_bytes(32), confirmed=True, confirmed_at_height=uint32(2))
+        tr4 = dataclasses.replace(tr1, name=token_bytes(32), confirmed=True, confirmed_at_height=uint32(3))
+        tr5 = dataclasses.replace(tr1, name=token_bytes(32), confirmed=True, confirmed_at_height=uint32(4))
+        tr6 = dataclasses.replace(
+            tr1, name=token_bytes(32), confirmed_at_height=uint32(5), type=uint32(TransactionType.COINBASE_REWARD.value)
+        )
 
         await store.add_transaction_record(tr1)
         await store.add_transaction_record(tr2)
         await store.add_transaction_record(tr3)
         await store.add_transaction_record(tr4)
         await store.add_transaction_record(tr5)
 
+        # Test confirmed filter
+        assert await store.get_transactions_between(1, 0, 100, confirmed=True) == [tr2, tr3, tr4, tr5]
+        assert await store.get_transactions_between(1, 0, 100, confirmed=False) == [tr1]
+
         # test different limits
         assert await store.get_transactions_between(1, 0, 1) == [tr1]
         assert await store.get_transactions_between(1, 0, 2) == [tr1, tr2]
         assert await store.get_transactions_between(1, 0, 3) == [tr1, tr2, tr3]
         assert await store.get_transactions_between(1, 0, 100) == [tr1, tr2, tr3, tr4, tr5]
 
         # test different start offsets
@@ -476,14 +502,44 @@
         assert await store.get_transactions_between(1, 0, 100, reverse=True) == [tr5, tr4, tr3, tr2, tr1]
 
         # test different start offsets
         assert await store.get_transactions_between(1, 1, 100, reverse=True) == [tr4, tr3, tr2, tr1]
         assert await store.get_transactions_between(1, 2, 100, reverse=True) == [tr3, tr2, tr1]
         assert await store.get_transactions_between(1, 3, 100, reverse=True) == [tr2, tr1]
 
+        # test type filter (coinbase reward)
+        await store.add_transaction_record(tr6)
+        assert await store.get_transactions_between(
+            1, 0, 1, reverse=True, type_filter=TransactionTypeFilter.include([TransactionType.COINBASE_REWARD])
+        ) == [tr6]
+        assert await store.get_transactions_between(
+            1, 0, 1, reverse=True, type_filter=TransactionTypeFilter.exclude([TransactionType.COINBASE_REWARD])
+        ) == [tr5]
+        assert (
+            await store.get_transactions_between(1, 0, 100, reverse=True, type_filter=TransactionTypeFilter.include([]))
+            == []
+        )
+        assert await store.get_transactions_between(
+            1, 0, 100, reverse=True, type_filter=TransactionTypeFilter.exclude([])
+        ) == [
+            tr6,
+            tr5,
+            tr4,
+            tr3,
+            tr2,
+            tr1,
+        ]
+        assert await store.get_transactions_between(
+            1,
+            0,
+            100,
+            reverse=True,
+            type_filter=TransactionTypeFilter.include([TransactionType.COINBASE_REWARD, TransactionType.OUTGOING_TX]),
+        ) == [tr6, tr5, tr4, tr3, tr2, tr1]
+
 
 @pytest.mark.asyncio
 async def test_get_transactions_between_relevance() -> None:
     async with DBConnection(1) as db_wrapper:
         store = await WalletTransactionStore.create(db_wrapper)
 
         t1 = dataclasses.replace(
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,35 +1,37 @@
 from __future__ import annotations
 
 import asyncio
+import dataclasses
 import json
 import time
 from pathlib import Path
 from typing import Any, Dict, List, Tuple
 
 import pytest
 from blspy import AugSchemeMPL, G1Element, G2Element
 
 from chia.rpc.wallet_rpc_api import WalletRpcApi
 from chia.server.server import ChiaServer
 from chia.simulator.block_tools import BlockTools
 from chia.simulator.full_node_simulator import FullNodeSimulator, wait_for_coins_in_wallet
 from chia.simulator.simulator_protocol import ReorgProtocol
-from chia.simulator.time_out_assert import time_out_assert
+from chia.simulator.time_out_assert import time_out_assert, time_out_assert_not_none
 from chia.types.blockchain_format.program import Program
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.coin_spend import compute_additions
 from chia.types.peer_info import PeerInfo
 from chia.util.bech32m import encode_puzzle_hash
 from chia.util.ints import uint16, uint32, uint64
 from chia.wallet.derive_keys import master_sk_to_wallet_sk
 from chia.wallet.payment import Payment
 from chia.wallet.transaction_record import TransactionRecord
 from chia.wallet.util.compute_memos import compute_memos
 from chia.wallet.util.transaction_type import TransactionType
+from chia.wallet.util.wallet_types import CoinType
 from chia.wallet.wallet import CHIP_0002_SIGN_MESSAGE_PREFIX
 from chia.wallet.wallet_node import WalletNode, get_wallet_db_path
 from chia.wallet.wallet_state_manager import WalletStateManager
 
 
 class TestWalletSimulator:
     @pytest.mark.parametrize(
@@ -178,14 +180,494 @@
         assert await wallet.get_unconfirmed_balance() == expected_confirmed_balance
 
     @pytest.mark.parametrize(
         "trusted",
         [True, False],
     )
     @pytest.mark.asyncio
+    async def test_wallet_clawback_claim_auto(
+        self,
+        two_wallet_nodes: Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools],
+        trusted: bool,
+        self_hostname: str,
+    ) -> None:
+        num_blocks = 1
+        full_nodes, wallets, _ = two_wallet_nodes
+        full_node_api = full_nodes[0]
+        server_1 = full_node_api.full_node.server
+        wallet_node, server_2 = wallets[0]
+        wallet_node_2, server_3 = wallets[1]
+        wallet = wallet_node.wallet_state_manager.main_wallet
+        wallet_1 = wallet_node_2.wallet_state_manager.main_wallet
+        if trusted:
+            wallet_node.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+            wallet_node_2.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+        else:
+            wallet_node.config["trusted_peers"] = {}
+            wallet_node_2.config["trusted_peers"] = {}
+        wallet_node_2.config["auto_claim"]["tx_fee"] = 100
+        wallet_node_2.config["auto_claim"]["batch_size"] = 1
+        await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        assert await wallet.get_confirmed_balance() == expected_confirmed_balance
+        assert await wallet.get_unconfirmed_balance() == expected_confirmed_balance
+        await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        normal_puzhash = await wallet_1.get_new_puzzlehash()
+        # Transfer to normal wallet
+        tx1 = await wallet.generate_signed_transaction(
+            uint64(500),
+            normal_puzhash,
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 10}],
+        )
+        await wallet.push_transaction(tx1)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx1])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        tx2 = await wallet.generate_signed_transaction(
+            uint64(500),
+            await wallet_1.get_new_puzzlehash(),
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 10}],
+        )
+        await wallet.push_transaction(tx2)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx2])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 2, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 2, 1000, CoinType.CLAWBACK
+        )
+        tx3 = await wallet.generate_signed_transaction(
+            uint64(500),
+            normal_puzhash,
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 10}],
+        )
+        await wallet.push_transaction(tx3)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx3])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 3, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 3, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(10, wallet_1.get_confirmed_balance, 4000000000000)
+        # Change 3rd coin to test missing metadata case
+        clawback_coin_id = tx3.additions[0].name()
+        coin_record = await wallet_node_2.wallet_state_manager.coin_store.get_coin_record(clawback_coin_id)
+        assert coin_record is not None
+        await wallet_node_2.wallet_state_manager.coin_store.add_coin_record(
+            dataclasses.replace(coin_record, metadata=None)
+        )
+        # Claim merkle coin
+        wallet_node_2.config["auto_claim"]["enabled"] = True
+        await asyncio.sleep(10)
+        # Trigger auto claim
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        await asyncio.sleep(5)
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        await asyncio.sleep(5)
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(10, wallet_1.get_confirmed_balance, 4000000000800)
+
+    @pytest.mark.parametrize(
+        "trusted",
+        [True, False],
+    )
+    @pytest.mark.asyncio
+    async def test_wallet_clawback_clawback(
+        self,
+        two_wallet_nodes: Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools],
+        trusted: bool,
+        self_hostname: str,
+    ) -> None:
+        num_blocks = 1
+        full_nodes, wallets, _ = two_wallet_nodes
+        full_node_api = full_nodes[0]
+        server_1 = full_node_api.full_node.server
+        wallet_node, server_2 = wallets[0]
+        wallet_node_2, server_3 = wallets[1]
+        wallet = wallet_node.wallet_state_manager.main_wallet
+        wallet_1 = wallet_node_2.wallet_state_manager.main_wallet
+        api_0 = WalletRpcApi(wallet_node)
+        api_1 = WalletRpcApi(wallet_node_2)
+        if trusted:
+            wallet_node.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+            wallet_node_2.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+        else:
+            wallet_node.config["trusted_peers"] = {}
+            wallet_node_2.config["trusted_peers"] = {}
+
+        await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+
+        assert await wallet.get_confirmed_balance() == expected_confirmed_balance
+        assert await wallet.get_unconfirmed_balance() == expected_confirmed_balance
+
+        normal_puzhash = await wallet_1.get_new_puzzlehash()
+        # Transfer to normal wallet
+        tx = await wallet.generate_signed_transaction(
+            uint64(500),
+            normal_puzhash,
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 500}],
+            memos=[b"Test"],
+        )
+
+        await wallet.push_transaction(tx)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        # Check merkle coins
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        txs = await api_0.get_transactions(
+            dict(type_filter={"values": [TransactionType.INCOMING_CLAWBACK_SEND], "mode": 1}, wallet_id=1)
+        )
+        assert await wallet.get_confirmed_balance() == 3999999999500
+        # clawback merkle coin
+        merkle_coin = tx.additions[0] if tx.additions[0].amount == 500 else tx.additions[1]
+        interested_coins = await wallet_node_2.wallet_state_manager.interested_store.get_interested_coin_ids()
+        assert merkle_coin.name() in set(interested_coins)
+        assert len(txs["transactions"]) == 1
+        assert not txs["transactions"][0]["confirmed"]
+        assert txs["transactions"][0]["metadata"]["recipient_puzzle_hash"][2:] == normal_puzhash.hex()
+        assert txs["transactions"][0]["metadata"]["coin_id"] == merkle_coin.name().hex()
+        has_exception = False
+        try:
+            await api_0.spend_clawback_coins({})
+        except ValueError:
+            has_exception = True
+        assert has_exception
+        resp = await api_0.spend_clawback_coins(
+            dict({"coin_ids": [normal_puzhash.hex(), merkle_coin.name().hex()], "fee": 1000})
+        )
+        json.dumps(resp)
+        assert resp["success"]
+        assert len(resp["transaction_ids"]) == 1
+        # Wait mempool update
+        await time_out_assert_not_none(
+            5, full_node_api.full_node.mempool_manager.get_spendbundle, bytes32.from_hexstr(resp["transaction_ids"][0])
+        )
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        txs = await api_0.get_transactions(
+            dict(
+                type_filter={
+                    "values": [TransactionType.INCOMING_CLAWBACK_SEND.value, TransactionType.OUTGOING_CLAWBACK.value],
+                    "mode": 1,
+                },
+                wallet_id=1,
+            )
+        )
+        assert len(txs["transactions"]) == 2
+        assert txs["transactions"][0]["confirmed"]
+        assert txs["transactions"][1]["confirmed"]
+        await time_out_assert(10, wallet.get_confirmed_balance, 3999999999000)
+        await time_out_assert(10, wallet_1.get_confirmed_balance, 2000000001000)
+        resp = await api_0.get_transactions(dict(wallet_id=1, reverse=True))
+        xch_tx = resp["transactions"][0]
+        assert list(xch_tx["memos"].values())[0] == b"Test".hex()
+        txs = await api_1.get_transactions(
+            dict(
+                type_filter={
+                    "values": [
+                        TransactionType.INCOMING_CLAWBACK_RECEIVE.value,
+                        TransactionType.OUTGOING_CLAWBACK.value,
+                    ],
+                    "mode": 1,
+                },
+                wallet_id=1,
+            )
+        )
+        assert len(txs["transactions"]) == 1
+        assert txs["transactions"][0]["confirmed"]
+        interested_coins = await wallet_node_2.wallet_state_manager.interested_store.get_interested_coin_ids()
+        assert merkle_coin.name() not in set(interested_coins)
+
+    @pytest.mark.parametrize(
+        "trusted",
+        [True, False],
+    )
+    @pytest.mark.asyncio
+    async def test_wallet_clawback_claim_manual(
+        self,
+        two_wallet_nodes: Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools],
+        trusted: bool,
+        self_hostname: str,
+    ) -> None:
+        num_blocks = 1
+        full_nodes, wallets, _ = two_wallet_nodes
+        full_node_api = full_nodes[0]
+        server_1 = full_node_api.full_node.server
+        wallet_node, server_2 = wallets[0]
+        wallet_node_2, server_3 = wallets[1]
+        wallet = wallet_node.wallet_state_manager.main_wallet
+        wallet_1 = wallet_node_2.wallet_state_manager.main_wallet
+        api_0 = WalletRpcApi(wallet_node)
+        api_1 = WalletRpcApi(wallet_node_2)
+        if trusted:
+            wallet_node.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+            wallet_node_2.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+        else:
+            wallet_node.config["trusted_peers"] = {}
+            wallet_node_2.config["trusted_peers"] = {}
+        wallet_node_2.config["auto_claim"]["enabled"] = False
+
+        await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+
+        assert await wallet.get_confirmed_balance() == expected_confirmed_balance
+        assert await wallet.get_unconfirmed_balance() == expected_confirmed_balance
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        normal_puzhash = await wallet_1.get_new_puzzlehash()
+        # Transfer to normal wallet
+        tx = await wallet.generate_signed_transaction(
+            uint64(500),
+            normal_puzhash,
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 5}],
+        )
+
+        await wallet.push_transaction(tx)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        # Check merkle coins
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        assert await wallet.get_confirmed_balance() == 3999999999500
+        # Claim merkle coin
+        await asyncio.sleep(20)
+        merkle_coin = tx.additions[0] if tx.additions[0].amount == 500 else tx.additions[1]
+        resp = await api_1.spend_clawback_coins(
+            dict({"coin_ids": [merkle_coin.name().hex(), normal_puzhash.hex()], "fee": 1000})
+        )
+        json.dumps(resp)
+        assert resp["success"]
+        assert len(resp["transaction_ids"]) == 1
+        # Wait mempool update
+        await time_out_assert_not_none(
+            5, full_node_api.full_node.mempool_manager.get_spendbundle, bytes32.from_hexstr(resp["transaction_ids"][0])
+        )
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(10, wallet.get_confirmed_balance, 3999999999500)
+        await time_out_assert(10, wallet_1.get_confirmed_balance, 4000000000500)
+
+        txs = await api_0.get_transactions(
+            dict(
+                type_filter={
+                    "values": [
+                        TransactionType.INCOMING_CLAWBACK_SEND.value,
+                    ],
+                    "mode": 1,
+                },
+                wallet_id=1,
+            )
+        )
+        assert len(txs["transactions"]) == 1
+        assert txs["transactions"][0]["confirmed"]
+
+    @pytest.mark.parametrize(
+        "trusted",
+        [True, False],
+    )
+    @pytest.mark.asyncio
+    async def test_wallet_clawback_reorg(
+        self,
+        two_wallet_nodes: Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools],
+        trusted: bool,
+        self_hostname: str,
+    ) -> None:
+        num_blocks = 1
+        full_nodes, wallets, _ = two_wallet_nodes
+        full_node_api = full_nodes[0]
+        server_1 = full_node_api.full_node.server
+        wallet_node, server_2 = wallets[0]
+        wallet_node_2, server_3 = wallets[1]
+        wallet = wallet_node.wallet_state_manager.main_wallet
+        wallet_1 = wallet_node_2.wallet_state_manager.main_wallet
+        if trusted:
+            wallet_node.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+            wallet_node_2.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+        else:
+            wallet_node.config["trusted_peers"] = {}
+            wallet_node_2.config["trusted_peers"] = {}
+        wallet_node_2.config["auto_claim"]["enabled"] = False
+
+        await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+
+        assert await wallet.get_confirmed_balance() == expected_confirmed_balance
+        assert await wallet.get_unconfirmed_balance() == expected_confirmed_balance
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        normal_puzhash = await wallet_1.get_new_puzzlehash()
+        # Transfer to normal wallet
+        tx = await wallet.generate_signed_transaction(
+            uint64(500),
+            normal_puzhash,
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 5}],
+        )
+
+        await wallet.push_transaction(tx)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        # Check merkle coins
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        assert await wallet.get_confirmed_balance() == 3999999999500
+        # Reorg before claim
+        # Test Reorg mint
+        height = full_node_api.full_node.blockchain.get_peak_height()
+        assert height is not None
+        await full_node_api.reorg_from_index_to_new_index(
+            ReorgProtocol(uint32(height - 2), uint32(height + 1), normal_puzhash, None)
+        )
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+
+        # Claim merkle coin
+        wallet_node_2.config["auto_claim"]["enabled"] = True
+        await asyncio.sleep(20)
+        # clawback merkle coin
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        # Wait mempool update
+        await asyncio.sleep(5)
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet_1)
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 0, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(10, wallet.get_confirmed_balance, 1999999999500)
+        await time_out_assert(10, wallet_1.get_confirmed_balance, 12000000000500)
+        # Reorg after claim
+        height = full_node_api.full_node.blockchain.get_peak_height()
+        assert height is not None
+        await full_node_api.reorg_from_index_to_new_index(
+            ReorgProtocol(uint32(height - 3), uint32(height + 1), normal_puzhash, None)
+        )
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+
+    @pytest.mark.parametrize(
+        "trusted",
+        [True, False],
+    )
+    @pytest.mark.asyncio
+    async def test_get_clawback_coins(
+        self,
+        two_wallet_nodes: Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools],
+        trusted: bool,
+        self_hostname: str,
+    ) -> None:
+        num_blocks = 1
+        full_nodes, wallets, _ = two_wallet_nodes
+        full_node_api = full_nodes[0]
+        server_1 = full_node_api.full_node.server
+        wallet_node, server_2 = wallets[0]
+        wallet_node_2, server_3 = wallets[1]
+        wallet = wallet_node.wallet_state_manager.main_wallet
+        wallet_1 = wallet_node_2.wallet_state_manager.main_wallet
+        api_0 = WalletRpcApi(wallet_node)
+        if trusted:
+            wallet_node.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+            wallet_node_2.config["trusted_peers"] = {server_1.node_id.hex(): server_1.node_id.hex()}
+        else:
+            wallet_node.config["trusted_peers"] = {}
+            wallet_node_2.config["trusted_peers"] = {}
+
+        await server_2.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        await server_3.start_client(PeerInfo(self_hostname, uint16(server_1._port)), None)
+        expected_confirmed_balance = await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+
+        assert await wallet.get_confirmed_balance() == expected_confirmed_balance
+        assert await wallet.get_unconfirmed_balance() == expected_confirmed_balance
+
+        normal_puzhash = await wallet_1.get_new_puzzlehash()
+        # Transfer to normal wallet
+        tx = await wallet.generate_signed_transaction(
+            uint64(500),
+            normal_puzhash,
+            uint64(0),
+            puzzle_decorator_override=[{"decorator": "CLAWBACK", "clawback_timelock": 500}],
+        )
+
+        await wallet.push_transaction(tx)
+        await full_node_api.wait_transaction_records_entered_mempool(records=[tx])
+        expected_confirmed_balance += await full_node_api.farm_blocks_to_wallet(count=num_blocks, wallet=wallet)
+        # Check merkle coins
+        await time_out_assert(
+            20, wallet_node.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        await time_out_assert(
+            20, wallet_node_2.wallet_state_manager.coin_store.count_small_unspent, 1, 1000, CoinType.CLAWBACK
+        )
+        assert await wallet.get_confirmed_balance() == 3999999999500
+        # clawback merkle coin
+        merkle_coin = tx.additions[0] if tx.additions[0].amount == 500 else tx.additions[1]
+        resp = await api_0.get_coin_records(dict({"wallet_id": 1, "coin_type": 1}))
+        json.dumps(resp)
+        assert len(resp["coin_records"]) == 1
+        assert resp["coin_records"][0]["id"][2:] == merkle_coin.name().hex()
+
+    @pytest.mark.parametrize(
+        "trusted",
+        [True, False],
+    )
+    @pytest.mark.asyncio
     async def test_wallet_coinbase_reorg(
         self,
         simulator_and_wallet: Tuple[List[FullNodeSimulator], List[Tuple[WalletNode, ChiaServer]], BlockTools],
         trusted: bool,
         self_hostname: str,
     ) -> None:
         full_nodes, wallets, _ = simulator_and_wallet
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_blockchain.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_blockchain.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,15 +2,14 @@
 
 import dataclasses
 
 import pytest
 
 from chia.consensus.blockchain import AddBlockResult
 from chia.protocols import full_node_protocol
-from chia.simulator.block_tools import test_constants
 from chia.types.blockchain_format.vdf import VDFProof
 from chia.types.weight_proof import WeightProof
 from chia.util.generator_tools import get_block_header
 from chia.wallet.key_val_store import KeyValStore
 from chia.wallet.wallet_blockchain import WalletBlockchain
 from tests.util.db_connection import DBConnection
 
@@ -44,15 +43,15 @@
         weight_proof_short: WeightProof = full_node_protocol.RespondProofOfWeight.from_bytes(res_2.data).wp
         records_short = await wallet_node._weight_proof_handler.validate_weight_proof(weight_proof_short, True)
         weight_proof_long: WeightProof = full_node_protocol.RespondProofOfWeight.from_bytes(res_3.data).wp
         records_long = await wallet_node._weight_proof_handler.validate_weight_proof(weight_proof_long, True)
 
         async with DBConnection(1) as db_wrapper:
             store = await KeyValStore.create(db_wrapper)
-            chain = await WalletBlockchain.create(store, test_constants)
+            chain = await WalletBlockchain.create(store, bt.constants)
 
             assert (await chain.get_peak_block()) is None
             assert chain.get_latest_timestamp() == 0
 
             await chain.new_valid_weight_proof(weight_proof, records)
             assert (await chain.get_peak_block()) is not None
             assert (await chain.get_peak_block()).height == 499
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_coin_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_coin_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,30 +1,29 @@
 from __future__ import annotations
 
-from dataclasses import replace
+from dataclasses import dataclass, field, replace
 from secrets import token_bytes
-from typing import List, Optional, Tuple
+from typing import Dict, List, Optional, Tuple
 
 import pytest
 
 from chia.types.blockchain_format.coin import Coin
+from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.util.ints import uint8, uint16, uint32, uint64
 from chia.util.misc import UInt32Range, UInt64Range, VersionedBlob
+from chia.util.streamable import Streamable
+from chia.wallet.puzzles.clawback.metadata import ClawbackMetadata
+from chia.wallet.util.query_filter import AmountFilter, HashFilter
 from chia.wallet.util.wallet_types import CoinType, WalletType
 from chia.wallet.wallet_coin_record import WalletCoinRecord
-from chia.wallet.wallet_coin_store import (
-    AmountFilter,
-    CoinRecordOrder,
-    GetCoinRecords,
-    GetCoinRecordsResult,
-    HashFilter,
-    WalletCoinStore,
-)
+from chia.wallet.wallet_coin_store import CoinRecordOrder, GetCoinRecords, GetCoinRecordsResult, WalletCoinStore
 from tests.util.db_connection import DBConnection
 
+clawback_metadata = ClawbackMetadata(uint64(0), bytes32(b"1" * 32), bytes32(b"2" * 32))
+
 coin_1 = Coin(token_bytes(32), token_bytes(32), uint64(12312))
 coin_2 = Coin(coin_1.parent_coin_info, token_bytes(32), uint64(12311))
 coin_3 = Coin(token_bytes(32), token_bytes(32), uint64(12312))
 coin_4 = Coin(token_bytes(32), token_bytes(32), uint64(12312))
 coin_5 = Coin(token_bytes(32), token_bytes(32), uint64(12312))
 coin_6 = Coin(token_bytes(32), coin_4.puzzle_hash, uint64(12312))
 coin_7 = Coin(token_bytes(32), token_bytes(32), uint64(12312))
@@ -83,58 +82,79 @@
     uint32(1),
     uint32(0),
     False,
     False,
     WalletType.STANDARD_WALLET,
     1,
     CoinType.CLAWBACK,
-    VersionedBlob(uint16(1), b"TEST"),
+    VersionedBlob(uint16(1), bytes(clawback_metadata)),
 )
 record_9 = WalletCoinRecord(
     coin_9,
     uint32(1),
     uint32(2),
     True,
     False,
     WalletType.STANDARD_WALLET,
     2,
     CoinType.CLAWBACK,
-    VersionedBlob(uint16(1), b"TEST"),
+    VersionedBlob(uint16(1), bytes(clawback_metadata)),
 )
 
 
+def get_dummy_record(wallet_id: int) -> WalletCoinRecord:
+    return WalletCoinRecord(
+        Coin(token_bytes(32), token_bytes(32), uint64(12312)),
+        uint32(0),
+        uint32(0),
+        False,
+        False,
+        WalletType.STANDARD_WALLET,
+        wallet_id,
+    )
+
+
+@dataclass
+class DummyWalletCoinRecords:
+    records_per_wallet: Dict[int, List[WalletCoinRecord]] = field(default_factory=dict)
+
+    def generate(self, wallet_id: int, count: int) -> None:
+        records = self.records_per_wallet.setdefault(wallet_id, [])
+        for _ in range(count):
+            records.append(get_dummy_record(wallet_id))
+
+
 @pytest.mark.parametrize(
     "invalid_record, error",
     [
         (replace(record_8, metadata=None), "Can't parse None metadata"),
         (replace(record_8, coin_type=CoinType.NORMAL), "Unknown metadata"),
     ],
 )
 def test_wallet_coin_record_parsed_metadata_failures(invalid_record: WalletCoinRecord, error: str) -> None:
     with pytest.raises(ValueError, match=error):
         invalid_record.parsed_metadata()
 
 
 @pytest.mark.parametrize(
-    "coin_record, expected_metadata_type",
+    "coin_record, expected_metadata",
     [
-        (record_8, VersionedBlob),  # TODO: Replace proper clawback metadata here when its introduced
+        (record_8, clawback_metadata),
     ],
 )
-def test_wallet_coin_record_parsed_metadata(coin_record: WalletCoinRecord, expected_metadata_type: type) -> None:
-    assert type(coin_record.parsed_metadata()) == expected_metadata_type
+def test_wallet_coin_record_parsed_metadata(coin_record: WalletCoinRecord, expected_metadata: Streamable) -> None:
+    assert coin_record.parsed_metadata() == expected_metadata
 
 
 @pytest.mark.parametrize("coin_record", [record_1, record_2, record_8])
 def test_wallet_coin_record_json_parsed(coin_record: WalletCoinRecord) -> None:
     expected_metadata = None
     if coin_record.coin_type == CoinType.CLAWBACK:
         assert coin_record.metadata is not None
-        #  TODO: Parse proper clawback metadata here when its introduced
-        expected_metadata = coin_record.metadata.to_json_dict()
+        expected_metadata = coin_record.parsed_metadata().to_json_dict()
 
     assert coin_record.to_json_dict_parsed_metadata() == {
         "id": "0x" + coin_record.name().hex(),
         "amount": coin_record.coin.amount,
         "puzzle_hash": "0x" + coin_record.coin.puzzle_hash.hex(),
         "parent_coin_info": "0x" + coin_record.coin.parent_coin_info.hex(),
         "type": coin_record.coin_type,
@@ -804,14 +824,15 @@
 
         # All the actions in here should reset the cache and lead to the same results again in `test_cache`.
         for trigger in [
             store.add_coin_record(record_4),
             store.set_spent(coin_4.name(), 10),
             store.delete_coin_record(record_4.name()),
             store.rollback_to_block(1000),
+            store.delete_wallet(uint32(record_1.wallet_id)),
         ]:
             await test_cache()
             await trigger
 
 
 def record(c: Coin, *, confirmed: int, spent: int) -> WalletCoinRecord:
     return WalletCoinRecord(c, uint32(confirmed), uint32(spent), spent != 0, False, WalletType.STANDARD_WALLET, 0)
@@ -951,7 +972,28 @@
         assert len(records) == 0
         records = await store.get_coin_records_between(1, 0, 3)
         assert len(records) == 1
         assert records[0] == record_5
         records = await store.get_coin_records_between(1, 0, 4, coin_type=CoinType.CLAWBACK)
         assert len(records) == 1
         assert records[0] == record_8
+
+
+@pytest.mark.asyncio
+async def test_delete_wallet() -> None:
+    dummy_records = DummyWalletCoinRecords()
+    for i in range(5):
+        dummy_records.generate(i, i * 5)
+    async with DBConnection(1) as wrapper:
+        store = await WalletCoinStore.create(wrapper)
+        # Add the records per wallet and verify them
+        for wallet_id, records in dummy_records.records_per_wallet.items():
+            for coin_record in records:
+                await store.add_coin_record(coin_record)
+            assert set((await store.get_coin_records(wallet_id=wallet_id)).records) == set(records)
+        # Remove one wallet after the other and verify before and after each
+        for wallet_id, records in dummy_records.records_per_wallet.items():
+            # Assert the existence again here to make sure the previous removals did not affect other wallet_ids
+            assert set((await store.get_coin_records(wallet_id=wallet_id)).records) == set(records)
+            # Remove the wallet_id and make sure its removed fully
+            await store.delete_wallet(wallet_id)
+            assert (await store.get_coin_records(wallet_id=wallet_id)).records == []
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_interested_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_interested_store.py`

 * *Files 2% similar despite different names*

```diff
@@ -20,14 +20,16 @@
             assert (await store.get_interested_coin_ids()) == []
             await store.add_interested_coin_id(coin_1.name())
             assert (await store.get_interested_coin_ids()) == [coin_1.name()]
             await store.add_interested_coin_id(coin_1.name())
             assert (await store.get_interested_coin_ids()) == [coin_1.name()]
             await store.add_interested_coin_id(coin_2.name())
             assert set(await store.get_interested_coin_ids()) == {coin_1.name(), coin_2.name()}
+            await store.remove_interested_coin_id(coin_1.name())
+            assert set(await store.get_interested_coin_ids()) == {coin_2.name()}
             puzzle_hash = token_bytes(32)
             assert len(await store.get_interested_puzzle_hashes()) == 0
 
             await store.add_interested_puzzle_hash(puzzle_hash, 2)
             assert len(await store.get_interested_puzzle_hashes()) == 1
             await store.add_interested_puzzle_hash(puzzle_hash, 2)
             assert len(await store.get_interested_puzzle_hashes()) == 1
```

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_key_val_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_key_val_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_node.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_node.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_retry.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_retry.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_trade_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_trade_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/wallet/test_wallet_user_store.py` & `chia-blockchain-2.0.0b3/tests/wallet/test_wallet_user_store.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tests/weight_proof/test_weight_proof.py` & `chia-blockchain-2.0.0b3/tests/weight_proof/test_weight_proof.py`

 * *Files 14% similar despite different names*

```diff
@@ -3,175 +3,164 @@
 import sys
 from typing import Dict, List, Optional, Tuple
 
 import aiosqlite
 import pytest
 
 from chia.consensus.block_record import BlockRecord
+from chia.consensus.constants import ConsensusConstants
 from chia.consensus.default_constants import DEFAULT_CONSTANTS
 from chia.consensus.full_block_to_block_record import block_to_block_record
 from chia.consensus.pot_iterations import calculate_iterations_quality
 from chia.full_node.block_store import BlockStore
 from chia.full_node.weight_proof import WeightProofHandler, _map_sub_epoch_summaries, _validate_summaries_weight
-from chia.simulator.block_tools import test_constants
 from chia.types.blockchain_format.proof_of_space import verify_and_get_quality_string
 from chia.types.blockchain_format.sized_bytes import bytes32
 from chia.types.blockchain_format.sub_epoch_summary import SubEpochSummary
 from chia.types.full_block import FullBlock
 from chia.types.header_block import HeaderBlock
 from chia.util.block_cache import BlockCache
 from chia.util.generator_tools import get_block_header
 from chia.util.ints import uint32, uint64
 
 
-def count_sub_epochs(blockchain, last_hash) -> int:
-    curr = blockchain._sub_blocks[last_hash]
-    count = 0
-    while True:
-        if curr.height == 0:
-            break
-        # next sub block
-        curr = blockchain._sub_blocks[curr.prev_hash]
-        # if end of sub-epoch
-        if curr.sub_epoch_summary_included is not None:
-            count += 1
-    return count
-
-
-def get_prev_ses_block(sub_blocks, last_hash) -> Tuple[BlockRecord, int]:
-    curr = sub_blocks[last_hash]
-    blocks = 1
-    while curr.height != 0:
-        # next sub block
-        curr = sub_blocks[curr.prev_hash]
-        # if end of sub-epoch
-        if curr.sub_epoch_summary_included is not None:
-            return curr, blocks
-        blocks += 1
-    assert False
-
-
 async def load_blocks_dont_validate(
-    blocks,
+    blocks, constants: ConsensusConstants
 ) -> Tuple[
     Dict[bytes32, HeaderBlock], Dict[uint32, bytes32], Dict[bytes32, BlockRecord], Dict[uint32, SubEpochSummary]
 ]:
     header_cache: Dict[bytes32, HeaderBlock] = {}
     height_to_hash: Dict[uint32, bytes32] = {}
     sub_blocks: Dict[bytes32, BlockRecord] = {}
     sub_epoch_summaries: Dict[uint32, SubEpochSummary] = {}
     prev_block = None
-    difficulty = test_constants.DIFFICULTY_STARTING
+    difficulty = constants.DIFFICULTY_STARTING
     block: FullBlock
     for block in blocks:
         if block.height > 0:
             assert prev_block is not None
             difficulty = block.reward_chain_block.weight - prev_block.weight
 
         if block.reward_chain_block.challenge_chain_sp_vdf is None:
             assert block.reward_chain_block.signage_point_index == 0
             cc_sp: bytes32 = block.reward_chain_block.pos_ss_cc_challenge_hash
         else:
             cc_sp = block.reward_chain_block.challenge_chain_sp_vdf.output.get_hash()
 
         quality_string: Optional[bytes32] = verify_and_get_quality_string(
             block.reward_chain_block.proof_of_space,
-            test_constants,
+            constants,
             block.reward_chain_block.pos_ss_cc_challenge_hash,
             cc_sp,
         )
         assert quality_string is not None
 
         required_iters: uint64 = calculate_iterations_quality(
-            test_constants.DIFFICULTY_CONSTANT_FACTOR,
+            constants.DIFFICULTY_CONSTANT_FACTOR,
             quality_string,
             block.reward_chain_block.proof_of_space.size,
             difficulty,
             cc_sp,
         )
 
         sub_block = block_to_block_record(
-            test_constants,
+            constants,
             BlockCache(sub_blocks, height_to_hash=height_to_hash),
             required_iters,
             block,
             None,
         )
         sub_blocks[block.header_hash] = sub_block
         height_to_hash[block.height] = block.header_hash
         header_cache[block.header_hash] = get_block_header(block, [], [])
         if sub_block.sub_epoch_summary_included is not None:
             sub_epoch_summaries[block.height] = sub_block.sub_epoch_summary_included
         prev_block = block
     return header_cache, height_to_hash, sub_blocks, sub_epoch_summaries
 
 
-async def _test_map_summaries(blocks, header_cache, height_to_hash, sub_blocks, summaries):
+async def _test_map_summaries(
+    blocks, header_cache, height_to_hash, sub_blocks, summaries, constants: ConsensusConstants
+):
     curr = sub_blocks[blocks[-1].header_hash]
     orig_summaries: Dict[int, SubEpochSummary] = {}
     while curr.height > 0:
         if curr.sub_epoch_summary_included is not None:
             orig_summaries[curr.height] = curr.sub_epoch_summary_included
         # next sub block
         curr = sub_blocks[curr.prev_hash]
 
-    wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+    wpf = WeightProofHandler(constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
 
     wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
     assert wp is not None
     # sub epoch summaries validate hashes
     summaries, sub_epoch_data_weight, _ = _map_sub_epoch_summaries(
-        test_constants.SUB_EPOCH_BLOCKS,
-        test_constants.GENESIS_CHALLENGE,
+        constants.SUB_EPOCH_BLOCKS,
+        constants.GENESIS_CHALLENGE,
         wp.sub_epochs,
-        test_constants.DIFFICULTY_STARTING,
+        constants.DIFFICULTY_STARTING,
     )
     assert len(summaries) == len(orig_summaries)
 
 
 class TestWeightProof:
     @pytest.mark.asyncio
-    async def test_weight_proof_map_summaries_1(self, default_400_blocks):
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(default_400_blocks)
-        await _test_map_summaries(default_400_blocks, header_cache, height_to_hash, sub_blocks, summaries)
+    async def test_weight_proof_map_summaries_1(self, default_400_blocks, blockchain_constants):
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            default_400_blocks, blockchain_constants
+        )
+        await _test_map_summaries(
+            default_400_blocks, header_cache, height_to_hash, sub_blocks, summaries, blockchain_constants
+        )
 
     @pytest.mark.asyncio
-    async def test_weight_proof_map_summaries_2(self, default_1000_blocks):
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(default_1000_blocks)
-        await _test_map_summaries(default_1000_blocks, header_cache, height_to_hash, sub_blocks, summaries)
+    async def test_weight_proof_map_summaries_2(self, default_1000_blocks, blockchain_constants):
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            default_1000_blocks, blockchain_constants
+        )
+        await _test_map_summaries(
+            default_1000_blocks, header_cache, height_to_hash, sub_blocks, summaries, blockchain_constants
+        )
 
     @pytest.mark.asyncio
-    async def test_weight_proof_summaries_1000_blocks(self, default_1000_blocks):
+    async def test_weight_proof_summaries_1000_blocks(self, default_1000_blocks, blockchain_constants):
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         summaries, sub_epoch_data_weight, _ = _map_sub_epoch_summaries(
             wpf.constants.SUB_EPOCH_BLOCKS,
             wpf.constants.GENESIS_CHALLENGE,
             wp.sub_epochs,
             wpf.constants.DIFFICULTY_STARTING,
         )
-        assert _validate_summaries_weight(test_constants, sub_epoch_data_weight, summaries, wp)
+        assert _validate_summaries_weight(blockchain_constants, sub_epoch_data_weight, summaries, wp)
         # assert res is not None
 
     @pytest.mark.asyncio
-    async def test_weight_proof_bad_peak_hash(self, default_1000_blocks):
+    async def test_weight_proof_bad_peak_hash(self, default_1000_blocks, blockchain_constants):
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(b"sadgfhjhgdgsfadfgh")
         assert wp is None
 
     @pytest.mark.asyncio
     @pytest.mark.skip(reason="broken")
-    async def test_weight_proof_from_genesis(self, default_400_blocks):
+    async def test_weight_proof_from_genesis(self, default_400_blocks, blockchain_constants):
         blocks = default_400_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
 
     @pytest.mark.asyncio
     async def test_weight_proof_edge_cases(self, bt, default_400_blocks):
@@ -295,59 +284,67 @@
         blocks: List[FullBlock] = bt.get_consecutive_blocks(
             300,
             block_list_input=blocks,
             seed=b"asdfghjkl",
             force_overflow=False,
         )
 
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks, bt.constants)
+        wpf = WeightProofHandler(bt.constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf = WeightProofHandler(bt.constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
         valid, fork_point = wpf.validate_weight_proof_single_proc(wp)
 
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
-    async def test_weight_proof1000(self, default_1000_blocks):
+    async def test_weight_proof1000(self, default_1000_blocks, blockchain_constants):
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
         valid, fork_point = wpf.validate_weight_proof_single_proc(wp)
 
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
-    async def test_weight_proof1000_pre_genesis_empty_slots(self, pre_genesis_empty_slots_1000_blocks):
+    async def test_weight_proof1000_pre_genesis_empty_slots(
+        self, pre_genesis_empty_slots_1000_blocks, blockchain_constants
+    ):
         blocks = pre_genesis_empty_slots_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
 
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
         valid, fork_point = wpf.validate_weight_proof_single_proc(wp)
 
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
-    async def test_weight_proof10000__blocks_compact(self, default_10000_blocks_compact):
+    async def test_weight_proof10000__blocks_compact(self, default_10000_blocks_compact, blockchain_constants):
         blocks = default_10000_blocks_compact
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
         valid, fork_point = wpf.validate_weight_proof_single_proc(wp)
 
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
     async def test_weight_proof1000_partial_blocks_compact(self, bt, default_10000_blocks_compact):
@@ -355,88 +352,104 @@
             100,
             block_list_input=default_10000_blocks_compact,
             seed=b"asdfghjkl",
             normalized_to_identity_cc_ip=True,
             normalized_to_identity_cc_eos=True,
             normalized_to_identity_icc_eos=True,
         )
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks, bt.constants)
+        wpf = WeightProofHandler(bt.constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         assert wp is not None
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf = WeightProofHandler(bt.constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
         valid, fork_point = wpf.validate_weight_proof_single_proc(wp)
 
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
-    async def test_weight_proof10000(self, default_10000_blocks):
+    async def test_weight_proof10000(self, default_10000_blocks, blockchain_constants):
         blocks = default_10000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
 
         assert wp is not None
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, {}, height_to_hash, {}))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, {}, height_to_hash, {}))
         valid, fork_point = wpf.validate_weight_proof_single_proc(wp)
 
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
-    async def test_check_num_of_samples(self, default_10000_blocks):
+    async def test_check_num_of_samples(self, default_10000_blocks, blockchain_constants):
         blocks = default_10000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         wp = await wpf.get_proof_of_weight(blocks[-1].header_hash)
         curr = -1
         samples = 0
         for sub_epoch_segment in wp.sub_epoch_segments:
             if sub_epoch_segment.sub_epoch_n > curr:
                 curr = sub_epoch_segment.sub_epoch_n
                 samples += 1
         assert samples <= wpf.MAX_SAMPLES
 
     @pytest.mark.asyncio
-    async def test_weight_proof_extend_no_ses(self, default_1000_blocks):
+    async def test_weight_proof_extend_no_ses(self, default_1000_blocks, blockchain_constants):
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
         last_ses_height = sorted(summaries.keys())[-1]
-        wpf_synced = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        wpf_synced = WeightProofHandler(
+            blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries)
+        )
         wp = await wpf_synced.get_proof_of_weight(blocks[last_ses_height].header_hash)
         assert wp is not None
         # todo for each sampled sub epoch, validate number of segments
-        wpf_not_synced = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf_not_synced = WeightProofHandler(
+            blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {})
+        )
         valid, fork_point, _ = await wpf_not_synced.validate_weight_proof(wp)
         assert valid
         assert fork_point == 0
         # extend proof with 100 blocks
         new_wp = await wpf_synced._create_proof_of_weight(blocks[-1].header_hash)
         valid, fork_point, _ = await wpf_not_synced.validate_weight_proof(new_wp)
         assert valid
         assert fork_point == 0
 
     @pytest.mark.asyncio
-    async def test_weight_proof_extend_new_ses(self, default_1000_blocks):
+    async def test_weight_proof_extend_new_ses(self, default_1000_blocks, blockchain_constants):
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
         # delete last summary
         last_ses_height = sorted(summaries.keys())[-1]
         last_ses = summaries[last_ses_height]
         del summaries[last_ses_height]
-        wpf_synced = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        wpf_synced = WeightProofHandler(
+            blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries)
+        )
         wp = await wpf_synced.get_proof_of_weight(blocks[last_ses_height - 10].header_hash)
         assert wp is not None
-        wpf_not_synced = WeightProofHandler(test_constants, BlockCache(sub_blocks, height_to_hash, header_cache, {}))
+        wpf_not_synced = WeightProofHandler(
+            blockchain_constants, BlockCache(sub_blocks, height_to_hash, header_cache, {})
+        )
         valid, fork_point, _ = await wpf_not_synced.validate_weight_proof(wp)
         assert valid
         assert fork_point == 0
         # extend proof with 100 blocks
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         summaries[last_ses_height] = last_ses
         wpf_synced.blockchain = BlockCache(sub_blocks, header_cache, height_to_hash, summaries)
         new_wp = await wpf_synced._create_proof_of_weight(blocks[-1].header_hash)
         valid, fork_point, _ = await wpf_not_synced.validate_weight_proof(new_wp)
         assert valid
         assert fork_point == 0
         wpf_synced.blockchain = BlockCache(sub_blocks, header_cache, height_to_hash, summaries)
@@ -445,33 +458,35 @@
         assert valid
         assert fork_point == 0
         valid, fork_point, _ = await wpf.validate_weight_proof(new_wp)
         assert valid
         assert fork_point != 0
 
     @pytest.mark.asyncio
-    async def test_weight_proof_extend_multiple_ses(self, default_1000_blocks):
+    async def test_weight_proof_extend_multiple_ses(self, default_1000_blocks, blockchain_constants):
         blocks = default_1000_blocks
-        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(blocks)
+        header_cache, height_to_hash, sub_blocks, summaries = await load_blocks_dont_validate(
+            blocks, blockchain_constants
+        )
         last_ses_height = sorted(summaries.keys())[-1]
         last_ses = summaries[last_ses_height]
         before_last_ses_height = sorted(summaries.keys())[-2]
         before_last_ses = summaries[before_last_ses_height]
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
-        wpf_verify = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        wpf_verify = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, {}))
         for x in range(10, -1, -1):
             wp = await wpf.get_proof_of_weight(blocks[before_last_ses_height - x].header_hash)
             assert wp is not None
             valid, fork_point, _ = await wpf_verify.validate_weight_proof(wp)
             assert valid
             assert fork_point == 0
         # extend proof with 100 blocks
         summaries[last_ses_height] = last_ses
         summaries[before_last_ses_height] = before_last_ses
-        wpf = WeightProofHandler(test_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
+        wpf = WeightProofHandler(blockchain_constants, BlockCache(sub_blocks, header_cache, height_to_hash, summaries))
         new_wp = await wpf._create_proof_of_weight(blocks[-1].header_hash)
         valid, fork_point, _ = await wpf.validate_weight_proof(new_wp)
         assert valid
         assert fork_point != 0
 
     @pytest.mark.skip("used for debugging")
     @pytest.mark.asyncio
```

### Comparing `chia-blockchain-2.0.0b1/tools/analyze-chain.py` & `chia-blockchain-2.0.0b3/tools/analyze-chain.py`

 * *Files 2% similar despite different names*

```diff
@@ -136,15 +136,15 @@
         num_additions += len(spends.create_coin)
 
     if verify_signatures:
         assert isinstance(block, FullBlock)
         # create hash_key list for aggsig check
         pairs_pks: List[bytes48] = []
         pairs_msgs: List[bytes] = []
-        pairs_pks, pairs_msgs = pkm_pairs(result, DEFAULT_CONSTANTS.AGG_SIG_ME_ADDITIONAL_DATA, soft_fork=False)
+        pairs_pks, pairs_msgs = pkm_pairs(result, DEFAULT_CONSTANTS.AGG_SIG_ME_ADDITIONAL_DATA)
         pairs_g1s = [G1Element.from_bytes(x) for x in pairs_pks]
         assert block.transactions_info is not None
         assert block.transactions_info.aggregated_signature is not None
         assert AugSchemeMPL.aggregate_verify(pairs_g1s, pairs_msgs, block.transactions_info.aggregated_signature)
 
     print(
         f"{hh.hex()}\t{height:7d}\t{cost:11d}\t{run_time:0.3f}\t{num_refs}\t{ref_lookup_time:0.3f}\t{fees:14}\t"
```

### Comparing `chia-blockchain-2.0.0b1/tools/analyze_memory_profile.py` & `chia-blockchain-2.0.0b3/tools/analyze_memory_profile.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/cpu_utilization.py` & `chia-blockchain-2.0.0b3/tools/cpu_utilization.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/generate_chain.py` & `chia-blockchain-2.0.0b3/tools/generate_chain.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/legacy_keyring.py` & `chia-blockchain-2.0.0b3/tools/legacy_keyring.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/manage_clvm.py` & `chia-blockchain-2.0.0b3/tools/manage_clvm.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/plot-log.gnuplot` & `chia-blockchain-2.0.0b3/tools/plot-log.gnuplot`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/run_benchmark.sh` & `chia-blockchain-2.0.0b3/tools/run_benchmark.sh`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/run_block.py` & `chia-blockchain-2.0.0b3/tools/run_block.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/test_constants.py` & `chia-blockchain-2.0.0b3/tools/test_constants.py`

 * *Files identical despite different names*

### Comparing `chia-blockchain-2.0.0b1/tools/test_full_sync.py` & `chia-blockchain-2.0.0b3/tools/test_full_sync.py`

 * *Files identical despite different names*

