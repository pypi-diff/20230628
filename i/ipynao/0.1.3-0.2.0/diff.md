# Comparing `tmp/ipynao-0.1.3-py3-none-any.whl.zip` & `tmp/ipynao-0.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,44 +1,44 @@
-Zip file size: 229162 bytes, number of entries: 42
+Zip file size: 227464 bytes, number of entries: 42
 -rw-r--r--  2.0 unx     1812 b- defN 20-Feb-02 00:00 ipynao/__init__.py
 -rw-r--r--  2.0 unx      244 b- defN 20-Feb-02 00:00 ipynao/_frontend.py
 -rw-r--r--  2.0 unx      210 b- defN 20-Feb-02 00:00 ipynao/_version.py
--rw-r--r--  2.0 unx     2743 b- defN 20-Feb-02 00:00 ipynao/nao_robot.py
+-rw-r--r--  2.0 unx     3580 b- defN 20-Feb-02 00:00 ipynao/nao_robot.py
 -rw-r--r--  2.0 unx      173 b- defN 20-Feb-02 00:00 ipynao/labextension/install.json
 -rw-r--r--  2.0 unx     3157 b- defN 20-Feb-02 00:00 ipynao/labextension/package.json
--rw-r--r--  2.0 unx    45191 b- defN 20-Feb-02 00:00 ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js
--rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js.LICENSE.txt
--rw-r--r--  2.0 unx    12586 b- defN 20-Feb-02 00:00 ipynao/labextension/static/367.85a5246f5a9e7b7a8ee5.js
+-rw-r--r--  2.0 unx    43529 b- defN 20-Feb-02 00:00 ipynao/labextension/static/14.0fa00990c242d51d6008.js
+-rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao/labextension/static/14.0fa00990c242d51d6008.js.LICENSE.txt
+-rw-r--r--  2.0 unx    13093 b- defN 20-Feb-02 00:00 ipynao/labextension/static/367.b645d81d431e42710263.js
 -rw-r--r--  2.0 unx      912 b- defN 20-Feb-02 00:00 ipynao/labextension/static/480.d3a408009df0988c3390.js
 -rw-r--r--  2.0 unx      518 b- defN 20-Feb-02 00:00 ipynao/labextension/static/568.54258d511e530803c07b.js
--rw-r--r--  2.0 unx     6608 b- defN 20-Feb-02 00:00 ipynao/labextension/static/remoteEntry.0f89463f87cb2ebf3619.js
+-rw-r--r--  2.0 unx     6608 b- defN 20-Feb-02 00:00 ipynao/labextension/static/remoteEntry.b415cdfc968a0f208fcf.js
 -rw-r--r--  2.0 unx      118 b- defN 20-Feb-02 00:00 ipynao/labextension/static/style.js
 -rw-r--r--  2.0 unx     4118 b- defN 20-Feb-02 00:00 ipynao/labextension/static/third-party-licenses.json
 -rw-r--r--  2.0 unx      402 b- defN 20-Feb-02 00:00 ipynao/nbextension/extension.js
--rw-r--r--  2.0 unx    59183 b- defN 20-Feb-02 00:00 ipynao/nbextension/index.js
+-rw-r--r--  2.0 unx    58028 b- defN 20-Feb-02 00:00 ipynao/nbextension/index.js
 -rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao/nbextension/index.js.LICENSE.txt
--rw-r--r--  2.0 unx   235634 b- defN 20-Feb-02 00:00 ipynao/nbextension/index.js.map
+-rw-r--r--  2.0 unx   232772 b- defN 20-Feb-02 00:00 ipynao/nbextension/index.js.map
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 ipynao/tests/__init__.py
 -rw-r--r--  2.0 unx     1412 b- defN 20-Feb-02 00:00 ipynao/tests/conftest.py
--rw-r--r--  2.0 unx      285 b- defN 20-Feb-02 00:00 ipynao/tests/test_example.py
+-rw-r--r--  2.0 unx      290 b- defN 20-Feb-02 00:00 ipynao/tests/test_example.py
 -rw-r--r--  2.0 unx      460 b- defN 20-Feb-02 00:00 ipynao/tests/test_nbextension_path.py
--rw-r--r--  2.0 unx      173 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/install.json
--rw-r--r--  2.0 unx     3157 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/package.json
--rw-r--r--  2.0 unx    45191 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js
--rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js.LICENSE.txt
--rw-r--r--  2.0 unx    12586 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/367.85a5246f5a9e7b7a8ee5.js
--rw-r--r--  2.0 unx      912 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js
--rw-r--r--  2.0 unx      518 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js
--rw-r--r--  2.0 unx     6608 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.0f89463f87cb2ebf3619.js
--rw-r--r--  2.0 unx      118 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/style.js
--rw-r--r--  2.0 unx     4118 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json
--rw-r--r--  2.0 unx      402 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/extension.js
--rw-r--r--  2.0 unx    59183 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js
--rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.LICENSE.txt
--rw-r--r--  2.0 unx   235634 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.map
--rw-r--r--  2.0 unx       60 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/etc/jupyter/nbconfig/notebook.d/ipynao.json
--rw-r--r--  2.0 unx      173 b- defN 20-Feb-02 00:00 ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/install.json
-?rw-r--r--  2.0 unx     5467 b- defN 20-Feb-02 00:00 ipynao-0.1.3.dist-info/METADATA
-?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 ipynao-0.1.3.dist-info/WHEEL
-?rw-r--r--  2.0 unx     1499 b- defN 20-Feb-02 00:00 ipynao-0.1.3.dist-info/licenses/LICENSE.txt
-?rw-r--r--  2.0 unx     4552 b- defN 20-Feb-02 00:00 ipynao-0.1.3.dist-info/RECORD
-42 files, 757028 bytes uncompressed, 221492 bytes compressed:  70.7%
+-rw-r--r--  2.0 unx      173 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/install.json
+-rw-r--r--  2.0 unx     3157 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/package.json
+-rw-r--r--  2.0 unx    43529 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js
+-rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js.LICENSE.txt
+-rw-r--r--  2.0 unx    13093 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/367.b645d81d431e42710263.js
+-rw-r--r--  2.0 unx      912 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js
+-rw-r--r--  2.0 unx      518 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js
+-rw-r--r--  2.0 unx     6608 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.b415cdfc968a0f208fcf.js
+-rw-r--r--  2.0 unx      118 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/style.js
+-rw-r--r--  2.0 unx     4118 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json
+-rw-r--r--  2.0 unx      402 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/extension.js
+-rw-r--r--  2.0 unx    58028 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js
+-rw-r--r--  2.0 unx      206 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.LICENSE.txt
+-rw-r--r--  2.0 unx   232772 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.map
+-rw-r--r--  2.0 unx       60 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/etc/jupyter/nbconfig/notebook.d/ipynao.json
+-rw-r--r--  2.0 unx      173 b- defN 20-Feb-02 00:00 ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/install.json
+?rw-r--r--  2.0 unx     5467 b- defN 20-Feb-02 00:00 ipynao-0.2.0.dist-info/METADATA
+?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 ipynao-0.2.0.dist-info/WHEEL
+?rw-r--r--  2.0 unx     1499 b- defN 20-Feb-02 00:00 ipynao-0.2.0.dist-info/licenses/LICENSE.txt
+?rw-r--r--  2.0 unx     4552 b- defN 20-Feb-02 00:00 ipynao-0.2.0.dist-info/RECORD
+42 files, 747526 bytes uncompressed, 219794 bytes compressed:  70.6%
```

## zipnote {}

```diff
@@ -12,30 +12,30 @@
 
 Filename: ipynao/labextension/install.json
 Comment: 
 
 Filename: ipynao/labextension/package.json
 Comment: 
 
-Filename: ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js
+Filename: ipynao/labextension/static/14.0fa00990c242d51d6008.js
 Comment: 
 
-Filename: ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js.LICENSE.txt
+Filename: ipynao/labextension/static/14.0fa00990c242d51d6008.js.LICENSE.txt
 Comment: 
 
-Filename: ipynao/labextension/static/367.85a5246f5a9e7b7a8ee5.js
+Filename: ipynao/labextension/static/367.b645d81d431e42710263.js
 Comment: 
 
 Filename: ipynao/labextension/static/480.d3a408009df0988c3390.js
 Comment: 
 
 Filename: ipynao/labextension/static/568.54258d511e530803c07b.js
 Comment: 
 
-Filename: ipynao/labextension/static/remoteEntry.0f89463f87cb2ebf3619.js
+Filename: ipynao/labextension/static/remoteEntry.b415cdfc968a0f208fcf.js
 Comment: 
 
 Filename: ipynao/labextension/static/style.js
 Comment: 
 
 Filename: ipynao/labextension/static/third-party-licenses.json
 Comment: 
@@ -60,68 +60,68 @@
 
 Filename: ipynao/tests/test_example.py
 Comment: 
 
 Filename: ipynao/tests/test_nbextension_path.py
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/install.json
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/install.json
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/package.json
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/package.json
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js.LICENSE.txt
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js.LICENSE.txt
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/367.85a5246f5a9e7b7a8ee5.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/367.b645d81d431e42710263.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.0f89463f87cb2ebf3619.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.b415cdfc968a0f208fcf.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/style.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/style.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/extension.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/extension.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js
+Filename: ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.LICENSE.txt
+Filename: ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.LICENSE.txt
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.map
+Filename: ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.map
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/etc/jupyter/nbconfig/notebook.d/ipynao.json
+Filename: ipynao-0.2.0.data/data/etc/jupyter/nbconfig/notebook.d/ipynao.json
 Comment: 
 
-Filename: ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/install.json
+Filename: ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/install.json
 Comment: 
 
-Filename: ipynao-0.1.3.dist-info/METADATA
+Filename: ipynao-0.2.0.dist-info/METADATA
 Comment: 
 
-Filename: ipynao-0.1.3.dist-info/WHEEL
+Filename: ipynao-0.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: ipynao-0.1.3.dist-info/licenses/LICENSE.txt
+Filename: ipynao-0.2.0.dist-info/licenses/LICENSE.txt
 Comment: 
 
-Filename: ipynao-0.1.3.dist-info/RECORD
+Filename: ipynao-0.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ipynao/_frontend.py

```diff
@@ -5,8 +5,8 @@
 # Distributed under the terms of the Modified BSD License.
 
 """
 Information about the frontend package of the widgets.
 """
 
 module_name = "ipynao"
-module_version = "^0.1.3"
+module_version = "^0.2.0"
```

## ipynao/nao_robot.py

```diff
@@ -5,91 +5,117 @@
 # Distributed under the terms of the Modified BSD License.
 
 """
 TODO: Add module docstring
 """
 
 from ipywidgets import DOMWidget
-from traitlets import Unicode, Bool
+from traitlets import Unicode, Integer
 from ._frontend import module_name, module_version
-
+from time import sleep
 import asyncio
 
 
+
 class NaoRobotService():
     name = None
     widget = None
+    output = None
 
     def __init__(self, widget, service_name):
         self.name = service_name
         self.widget = widget
 
+    
     def create_service_msg(self, method_name, *args, **kwargs):
         data = {}
         data["command"] = "callService"
         data["service"] = str(self.name)
         data["method"]  = str(method_name)
         # convert tuple to list to avoid empty arg values
         data["args"]    = list(args)
         data["kwargs"]  = kwargs
 
         self.widget.send(data)
 
+    # TODO: combine msg creating into separate function
+    async def async_create_service_msg(self, method_name, *args, **kwargs):
+        data = {}
+        data["command"] = "callService"
+        data["service"] = str(self.name)
+        data["method"]  = str(method_name)
+        # convert tuple to list to avoid empty arg values
+        data["args"]    = list(args)
+        data["kwargs"]  = kwargs
+
+        self.widget.send(data)
+
+        try:
+            await self.widget.wait_for_change('counter')
+        except Exception as e:
+            return e
+        return self.widget.response
+        
+
     def __getattr__(self, method_name):
-        # TODO: some very basic input validation (maybe)
-        return lambda *x, **y: self.create_service_msg(method_name, *x, **y)
+        # TODO: add error for when service is not ready
+        if (method_name[:6] == "async_"):
+            return lambda *x, **y: self.async_create_service_msg(method_name[6:], *x, **y)
+        else:
+            return lambda *x, **y: self.create_service_msg(method_name, *x, **y)
 
 
 class NaoRobotWidget(DOMWidget):
     """TODO: Add docstring here
     """
     _model_name = Unicode('NaoRobotModel').tag(sync=True)
     _model_module = Unicode(module_name).tag(sync=True)
     _model_module_version = Unicode(module_version).tag(sync=True)
     _view_name = Unicode('NaoRobotView').tag(sync=True)
     _view_module = Unicode(module_name).tag(sync=True)
     _view_module_version = Unicode(module_version).tag(sync=True)
 
-    value = Unicode('Hello World').tag(sync=True)
     connected = Unicode("Disconnected").tag(sync=True)
     status = Unicode("Not busy").tag(sync=True)
-    synco = Unicode("test message").tag(sync=True)
+    counter = Integer(0).tag(sync=True)
+    response = None
+
 
     def __init__(self, **kwargs):
         super().__init__(**kwargs)
         self.on_msg(self._handle_frontend_msg)
 
+
     def _handle_frontend_msg(self, model, msg, buffer):
-        print("Received frontend msg: ")
-        print(msg)
-        # TODO:
+        print("Received frontend msg: ", msg)
+        self.response = msg
+
 
     def wait_for_change(widget, value_name):
         future = asyncio.Future()
+        widget.response = None
 
         def get_value_change(change):
             widget.unobserve(get_value_change, names=value_name)
-            future.set_result(change['new'])
-
+            if (widget.response != None):
+                future.set_result(widget.response)
+            else:
+                future.set_result(change)    
+        
         widget.observe(get_value_change, names=value_name)
-        return future
-
+        return future    
 
-    async def go_sleep(self, tSeconds=2):
-        data = {}
-        data["command"] = str("goSleep")
-        data["tSeconds"] = tSeconds
-        self.send(data)
-
-        return self.wait_for_change("synco")
-    
 
     def connect(self, ip_address="nao.local", port="80"):      
         data = {}
         data["command"] = str("connect")
         data["ipAddress"] = str(ip_address)
         data["port"] = str(port)
         self.send(data)
 
 
     def service(self, service_name):
+        data = {}
+        data["command"] = str("createService")
+        data["service"] = str(service_name)
+        self.send(data)
         return NaoRobotService(self, service_name)
```

## ipynao/labextension/package.json

### Pretty-printed

 * *Similarity: 0.9599609375%*

 * *Differences: {"'dependencies'": "{'nao-socket.io': '1.0.5'}",*

 * * "'jupyterlab'": "{'_build': {'load': 'static/remoteEntry.b415cdfc968a0f208fcf.js'}}",*

 * * "'version'": "'0.2.0'"}*

```diff
@@ -4,15 +4,15 @@
         "name": "Isabel Paredes"
     },
     "bugs": {
         "url": "https://github.com/QuantStack/ipynao/issues"
     },
     "dependencies": {
         "@jupyter-widgets/base": "^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6",
-        "nao-socket.io": "1.0.4"
+        "nao-socket.io": "1.0.5"
     },
     "description": "A widget library for controlling Nao",
     "devDependencies": {
         "@babel/core": "^7.5.0",
         "@babel/preset-env": "^7.5.0",
         "@jupyter-widgets/base-manager": "^1.0.2",
         "@jupyterlab/builder": "^3.0.0",
@@ -47,15 +47,15 @@
         "dist/*.js",
         "css/*.css"
     ],
     "homepage": "https://github.com/QuantStack/ipynao",
     "jupyterlab": {
         "_build": {
             "extension": "./extension",
-            "load": "static/remoteEntry.0f89463f87cb2ebf3619.js"
+            "load": "static/remoteEntry.b415cdfc968a0f208fcf.js"
         },
         "extension": "lib/plugin",
         "outputDir": "ipynao/labextension/",
         "sharedPackages": {
             "@jupyter-widgets/base": {
                 "bundled": false,
                 "singleton": true
@@ -93,9 +93,9 @@
         "test": "jest",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.1.3"
+    "version": "0.2.0"
 }
```

## ipynao/labextension/static/third-party-licenses.json

### Pretty-printed

 * *Similarity: 0.9791666666666667%*

 * *Differences: {"'packages'": "{1: {'versionInfo': '1.0.5'}}"}*

```diff
@@ -6,15 +6,15 @@
             "name": "css-loader",
             "versionInfo": "3.6.0"
         },
         {
             "extractedText": "BSD 3-Clause License\n\nCopyright (c) 2023, Isabel Paredes\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\n   list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\n   this list of conditions and the following disclaimer in the documentation\n   and/or other materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its\n   contributors may be used to endorse or promote products derived from\n   this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n",
             "licenseId": "BSD-3-Clause",
             "name": "nao-socket.io",
-            "versionInfo": "1.0.4"
+            "versionInfo": "1.0.5"
         },
         {
             "extractedText": "Copyright JS Foundation and other contributors\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
             "licenseId": "MIT",
             "name": "style-loader",
             "versionInfo": "1.3.0"
         }
```

## ipynao/nbextension/index.js

### js-beautify {}

```diff
@@ -1,12 +1,12 @@
 /*! For license information please see index.js.LICENSE.txt */
 define(["@jupyter-widgets/base"], (__WEBPACK_EXTERNAL_MODULE__146__ => (() => {
     var __webpack_modules__ = {
             889: (e, t, n) => {
-                (t = n(352)(!1)).push([e.id, ".custom-widget {\n  background-color: lightseagreen;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
+                (t = n(352)(!1)).push([e.id, ".custom-widget {\n  color: var(--jp-widgets-color) !important;\n  font-family: monospace;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
             },
             352: e => {
                 "use strict";
                 e.exports = function(e) {
                     var t = [];
                     return t.toString = function() {
                         return this.map((function(t) {
@@ -48,24 +48,23 @@
             731: (module, exports) => {
                 var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, io = module.exports;
                 (function() {
                     var self = this;
                     if (function(e, t) {
                             var n = e;
                             n.version = "0.9.17", n.protocol = 1, n.transports = [], n.j = [], n.sockets = {}, n.connect = function(e, o) {
-                                console.log("DBG Emile io connect");
                                 var i, s, r = n.util.parseUri(e);
                                 r.protocol = "http", t && t.location && (r.protocol = r.protocol || t.location.protocol.slice(0, -1), r.host = r.host || (t.document ? t.document.domain : t.location.hostname), r.port = r.port || t.location.port), i = n.util.uniqueUri(r);
                                 var a = {
                                     host: r.host,
                                     secure: "https" == r.protocol,
                                     port: r.port || ("https" == r.protocol ? 443 : 80),
                                     query: r.query || ""
                                 };
-                                return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (s = new n.Socket(a)), !a["force new connection"] && s && (n.sockets[i] = s), s = s || n.sockets[i], console.log("DBG Emile io connecting to", i, "options:", a), s.of(r.path.length > 1 ? r.path : "")
+                                return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (s = new n.Socket(a)), !a["force new connection"] && s && (n.sockets[i] = s), (s = s || n.sockets[i]).of(r.path.length > 1 ? r.path : "")
                             }
                         }(io, self), function(e, t) {
                             var n = e.util = {},
                                 o = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
                                 i = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
                             n.parseUri = function(e) {
                                 for (var t = o.exec(e || ""), n = {}, s = 14; s--;) n[i[s]] = t[s] || "";
@@ -163,15 +162,15 @@
                             }, n.prototype.listeners = function(e) {
                                 return this.$events || (this.$events = {}), this.$events[e] || (this.$events[e] = []), t.util.isArray(this.$events[e]) || (this.$events[e] = [this.$events[e]]), this.$events[e]
                             }, n.prototype.emit = function(e) {
                                 if (!this.$events) return !1;
                                 var n = this.$events[e];
                                 if (!n) return !1;
                                 var o = Array.prototype.slice.call(arguments, 1);
-                                if (console.log("DBG Emile EventEmitter.emit:", e, o), "function" == typeof n) n.apply(this, o);
+                                if ("function" == typeof n) n.apply(this, o);
                                 else {
                                     if (!t.util.isArray(n)) return !1;
                                     for (var i = n.slice(), s = 0, r = i.length; s < r; s++) i[s].apply(this, o)
                                 }
                                 return !0
                             }
                         }(io, io), function(exports, nativeJSON) {
@@ -362,35 +361,35 @@
                                 return this
                             }, n.prototype.onPacket = function(e) {
                                 return this.socket.setHeartbeatTimeout(), "heartbeat" == e.type ? this.onHeartbeat() : ("connect" == e.type && "" == e.endpoint && this.onConnect(), "error" == e.type && "reconnect" == e.advice && (this.isOpen = !1), this.socket.onPacket(e), this)
                             }, n.prototype.setCloseTimeout = function() {
                                 if (!this.closeTimeout) {
                                     var e = this;
                                     this.closeTimeout = setTimeout((function() {
-                                        console.log("DBG Emile io transport timeout -> disconnect"), e.onDisconnect()
+                                        e.onDisconnect()
                                     }), this.socket.closeTimeout)
                                 }
                             }, n.prototype.onDisconnect = function() {
                                 return this.isOpen && this.close(), this.clearTimeouts(), this.socket.onDisconnect(), this
                             }, n.prototype.onConnect = function() {
                                 return this.socket.onConnect(), this
                             }, n.prototype.clearCloseTimeout = function() {
                                 this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null)
                             }, n.prototype.clearTimeouts = function() {
                                 this.clearCloseTimeout(), this.reopenTimeout && clearTimeout(this.reopenTimeout)
                             }, n.prototype.packet = function(e) {
                                 this.send(t.parser.encodePacket(e))
                             }, n.prototype.onHeartbeat = function(e) {
-                                console.log("DBG Emile transport: onHeartbeat"), this.packet({
+                                this.packet({
                                     type: "heartbeat"
                                 })
                             }, n.prototype.onOpen = function() {
                                 this.isOpen = !0, this.clearCloseTimeout(), this.socket.onOpen()
                             }, n.prototype.onClose = function() {
-                                console.log("DBG Emile io transport onClose"), this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
+                                this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
                             }, n.prototype.prepareUrl = function() {
                                 var e = this.socket.options;
                                 return this.scheme() + "://" + e.host + ":" + e.port + "/" + e.resource + "/" + t.protocol + "/" + this.name + "/" + this.sessid
                             }, n.prototype.ready = function(e, t) {
                                 t.call(this)
                             }
                         }(io, io), function(e, t, n) {
@@ -430,50 +429,50 @@
                                 var e;
                                 for (var t in this.emit.apply(this, arguments), this.namespaces) this.namespaces.hasOwnProperty(t) && (e = this.of(t)).$emit.apply(e, arguments)
                             }, o.prototype.handshake = function(e) {
                                 var n = this,
                                     o = this.options;
 
                                 function s(t) {
-                                    t instanceof Error ? (n.connecting = !1, console.log("DBG Emile onError from handshake:"), console.log(t), n.onError(t.message)) : e.apply(null, t.split(":"))
+                                    t instanceof Error ? (n.connecting = !1, n.onError(t.message)) : e.apply(null, t.split(":"))
                                 }
                                 var r = ["http" + (o.secure ? "s" : "") + ":/", o.host + ":" + o.port, o.resource, t.protocol, t.util.query(this.options.query, "t=" + +new Date)].join("/");
                                 if (this.isXDomain() && !t.util.ua.hasCORS) {
                                     var a = document.getElementsByTagName("script")[0],
                                         c = document.createElement("script");
                                     c.src = r + "&jsonp=" + t.j.length, a.parentNode.insertBefore(c, a), t.j.push((function(e) {
                                         s(e), c.parentNode.removeChild(c)
                                     }))
                                 } else {
                                     var l = t.util.request();
                                     l.open("GET", r, !0), this.isXDomain() && (l.withCredentials = !0), l.onreadystatechange = function() {
-                                        4 == l.readyState && (l.onreadystatechange = i, 200 == l.status ? s(l.responseText) : 403 == l.status ? (console.log("DBG Emile onError from xhr:"), console.log(l.status, "text", l.responseText), n.onError(l.responseText)) : (n.connecting = !1, console.log("DBG Emile onError from xhr but not 403"), console.log(l.status, "text", l.responseText), !n.reconnecting && n.onError(l.responseText)))
+                                        4 == l.readyState && (l.onreadystatechange = i, 200 == l.status ? s(l.responseText) : 403 == l.status ? n.onError(l.responseText) : (n.connecting = !1, !n.reconnecting && n.onError(l.responseText)))
                                     }, l.send(null)
                                 }
                             }, o.prototype.getTransport = function(e) {
                                 for (var n, o = e || this.transports, i = 0; n = o[i]; i++)
-                                    if (console.log("DBG Emile trying transport: ", n), t.Transport[n] && t.Transport[n].check(this) && (!this.isXDomain() || t.Transport[n].xdomainCheck(this))) return console.log("DBG Emile keeping transport: ", n), new t.Transport[n](this, this.sessionid);
+                                    if (t.Transport[n] && t.Transport[n].check(this) && (!this.isXDomain() || t.Transport[n].xdomainCheck(this))) return new t.Transport[n](this, this.sessionid);
                                 return null
                             }, o.prototype.connect = function(e) {
-                                if (console.log("DBG Emile io socket connect"), this.connecting) return this;
+                                if (this.connecting) return this;
                                 var n = this;
                                 return n.connecting = !0, this.handshake((function(o, i, s, r) {
                                     n.sessionid = o, n.closeTimeout = 1e3 * s, n.heartbeatTimeout = 1e3 * i, n.transports || (n.transports = n.origTransports = r ? t.util.intersect(r.split(","), n.options.transports) : n.options.transports), n.setHeartbeatTimeout(),
                                         function e(t) {
-                                            if (console.log("DBG Emile io socket connecting to transport"), n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(t), !n.transport) return n.publish("connect_failed");
-                                            console.log("DBG Emile io socket connecting to transport (2)"), n.transport.ready(n, (function() {
-                                                console.log("DBG Emile io transport is ready"), n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
-                                                    if (!n.connected && (console.log("DBG Emile io socket timeout...."), n.connecting = !1, n.options["try multiple transports"])) {
+                                            if (n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(t), !n.transport) return n.publish("connect_failed");
+                                            n.transport.ready(n, (function() {
+                                                n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
+                                                    if (!n.connected && (n.connecting = !1, n.options["try multiple transports"])) {
                                                         for (var t = n.transports; t.length > 0 && t.splice(0, 1)[0] != n.transport.name;);
                                                         t.length ? e(t) : n.publish("connect_failed")
                                                     }
                                                 }), n.options["connect timeout"]))
                                             }))
                                         }(n.transports), n.once("connect", (function() {
-                                            console.log("DBG Emile io socket something connected"), clearTimeout(n.connectTimeoutTimer), e && "function" == typeof e && e()
+                                            clearTimeout(n.connectTimeoutTimer), e && "function" == typeof e && e()
                                         }))
                                 })), this
                             }, o.prototype.setHeartbeatTimeout = function() {
                                 if (clearTimeout(this.heartbeatTimeoutTimer), !this.transport || this.transport.heartbeats()) {
                                     var e = this;
                                     this.heartbeatTimeoutTimer = setTimeout((function() {
                                         e.transport.onClose()
@@ -484,34 +483,33 @@
                             }, o.prototype.setBuffer = function(e) {
                                 this.doBuffer = e, !e && this.connected && this.buffer.length && (this.options.manualFlush || this.flushBuffer())
                             }, o.prototype.flushBuffer = function() {
                                 this.transport.payload(this.buffer), this.buffer = []
                             }, o.prototype.disconnect = function() {
                                 return (this.connected || this.connecting) && (this.open && this.of("").packet({
                                     type: "disconnect"
-                                }), console.log("DBG Emile io socket disconnect -> booting"), this.onDisconnect("booted")), this
+                                }), this.onDisconnect("booted")), this
                             }, o.prototype.disconnectSync = function() {
                                 var e = t.util.request(),
                                     n = ["http" + (this.options.secure ? "s" : "") + ":/", this.options.host + ":" + this.options.port, this.options.resource, t.protocol, "", this.sessionid].join("/") + "/?disconnect=1";
-                                e.open("GET", n, !1), e.send(null), console.log("DBG Emile io socket disconnectSync -> booting"), this.onDisconnect("booted")
+                                e.open("GET", n, !1), e.send(null), this.onDisconnect("booted")
                             }, o.prototype.isXDomain = function() {
                                 var e = n.location.port || ("https:" == n.location.protocol ? 443 : 80);
                                 return this.options.host !== n.location.hostname || this.options.port != e
                             }, o.prototype.onConnect = function() {
-                                console.log("DBG Emile io socket onConnect"), this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
+                                this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
                             }, o.prototype.onOpen = function() {
                                 this.open = !0
                             }, o.prototype.onClose = function() {
                                 this.open = !1, clearTimeout(this.heartbeatTimeoutTimer)
                             }, o.prototype.onPacket = function(e) {
                                 this.of(e.endpoint).onPacket(e)
                             }, o.prototype.onError = function(e) {
-                                console.log("DBG Emile io socket onError", e), e && e.advice && "reconnect" === e.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", e && e.reason ? e.reason : e)
+                                e && e.advice && "reconnect" === e.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", e && e.reason ? e.reason : e)
                             }, o.prototype.onDisconnect = function(e) {
-                                console.log("DBG Emile io socket onDisconnect", e);
                                 var t = this.connected,
                                     n = this.connecting;
                                 this.connected = !1, this.connecting = !1, this.open = !1, (t || n) && (this.transport.close(), this.transport.clearTimeouts(), t && (this.publish("disconnect", e), "booted" != e && this.options.reconnect && !this.reconnecting && this.reconnect()))
                             }, o.prototype.reconnect = function() {
                                 this.reconnecting = !0, this.reconnectionAttempts = 0, this.reconnectionDelay = this.options["reconnection delay"];
                                 var e = this,
                                     t = this.options["max reconnection attempts"],
@@ -554,15 +552,15 @@
                             }, n.prototype.emit = function(e) {
                                 var t = Array.prototype.slice.call(arguments, 1),
                                     n = t[t.length - 1],
                                     o = {
                                         type: "event",
                                         name: e
                                     };
-                                return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, t = t.slice(0, t.length - 1)), o.args = t, console.log("DBG Emile SocketNamespace.emit:", o), this.packet(o)
+                                return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, t = t.slice(0, t.length - 1)), o.args = t, this.packet(o)
                             }, n.prototype.disconnect = function() {
                                 return "" === this.name ? this.socket.disconnect() : (this.packet({
                                     type: "disconnect"
                                 }), this.$emit("disconnect")), this
                             }, n.prototype.onPacket = function(e) {
                                 var n = this;
 
@@ -574,15 +572,15 @@
                                     })
                                 }
                                 switch (e.type) {
                                     case "connect":
                                         this.$emit("connect");
                                         break;
                                     case "disconnect":
-                                        "" === this.name ? (console.log("DBG Emile io socket onPacket disconnect, reason=", e.reason), this.socket.onDisconnect(e.reason || "booted")) : this.$emit("disconnect", e.reason);
+                                        "" === this.name ? this.socket.onDisconnect(e.reason || "booted") : this.$emit("disconnect", e.reason);
                                         break;
                                     case "message":
                                     case "json":
                                         var i = ["message", e.data];
                                         "data" == e.ack ? i.push(o) : e.ack && this.packet({
                                             type: "ack",
                                             ackId: e.id
@@ -591,15 +589,15 @@
                                     case "event":
                                         i = [e.name].concat(e.args), "data" == e.ack && i.push(o), this.$emit.apply(this, i);
                                         break;
                                     case "ack":
                                         this.acks[e.ackId] && (this.acks[e.ackId].apply(this, e.args), delete this.acks[e.ackId]);
                                         break;
                                     case "error":
-                                        e.advice ? (console.log("DBG Emile onError from packet:"), console.log(e), this.socket.onError(e)) : "unauthorized" == e.reason ? this.$emit("connect_failed", e.reason) : this.$emit("error", e.reason)
+                                        e.advice ? this.socket.onError(e) : "unauthorized" == e.reason ? this.$emit("connect_failed", e.reason) : this.$emit("error", e.reason)
                                 }
                             }, o.prototype.send = function() {
                                 this.namespace.flags[this.name] = !0, this.namespace.send.apply(this.namespace, arguments)
                             }, o.prototype.emit = function() {
                                 this.namespace.flags[this.name] = !0, this.namespace.emit.apply(this.namespace, arguments)
                             }
                         }(io, io), function(e, t, n) {
@@ -612,37 +610,37 @@
                                 return e || (e = n.MozWebSocket || n.WebSocket), this.websocket = new e(this.prepareUrl() + o), this.websocket.onopen = function() {
                                     i.onOpen(), i.socket.setBuffer(!1)
                                 }, this.websocket.onmessage = function(e) {
                                     i.onData(e.data)
                                 }, this.websocket.onclose = function() {
                                     i.onClose(), i.socket.setBuffer(!0)
                                 }, this.websocket.onerror = function(e) {
-                                    console.log("DBG Emile onerror from websocket WS", e), i.onError(e)
+                                    i.onError(e)
                                 }, this
                             }, t.util.ua.iDevice ? o.prototype.send = function(e) {
                                 var t = this;
                                 return setTimeout((function() {
                                     t.websocket.send(e)
                                 }), 0), this
                             } : o.prototype.send = function(e) {
                                 return this.websocket.send(e), this
                             }, o.prototype.payload = function(e) {
                                 for (var t = 0, n = e.length; t < n; t++) this.packet(e[t]);
                                 return this
                             }, o.prototype.close = function() {
                                 return this.websocket.close(), this
                             }, o.prototype.onError = function(e) {
-                                console.log("DBG Emile onerror from websocket WS.onError, forwarding", e), this.socket.onError(e)
+                                this.socket.onError(e)
                             }, o.prototype.scheme = function() {
                                 return this.socket.options.secure ? "wss" : "ws"
                             }, o.check = function() {
                                 return "WebSocket" in n && !("__addTask" in WebSocket) || "MozWebSocket" in n
                             }, o.xdomainCheck = function() {
                                 return !0
-                            }, console.log("DBG Emile: skipping transport websocket.")
+                            }
                         }(io.Transport, io, self), function(e, t) {
                             function n() {
                                 t.Transport.websocket.apply(this, arguments)
                             }
                             e.flashsocket = n, t.util.inherit(n, t.Transport.websocket), n.prototype.name = "flashsocket", n.prototype.open = function() {
                                 var e = this,
                                     n = arguments;
@@ -667,15 +665,15 @@
                                 var s = this;
                                 if (document.body) return i();
                                 t.util.load(i)
                             }, n.check = function() {
                                 return !("undefined" == typeof WebSocket || !("__initialize" in WebSocket) || !swfobject) && swfobject.getFlashPlayerVersion().major >= 10
                             }, n.xdomainCheck = function() {
                                 return !0
-                            }, console.log("DBG Emile: skipping transport flashsocket (come on we're in 2023).")
+                            }
                         }(io.Transport, io), "undefined" != typeof window) var swfobject = function() {
                         var e, t, n, o, i, s, r = "undefined",
                             a = "object",
                             c = "Shockwave Flash",
                             l = "application/x-shockwave-flash",
                             u = "SWFObjectExprInst",
                             p = "onreadystatechange",
@@ -690,28 +688,28 @@
                                     t.setAttribute("type", l);
                                     var n = e.appendChild(t);
                                     if (n) {
                                         var o = 0;
                                         ! function() {
                                             if (typeof n.GetVariable != r) {
                                                 var i = n.GetVariable("$version");
-                                                i && (i = i.split(" ")[1].split(","), E.pv = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
+                                                i && (i = i.split(" ")[1].split(","), S.pv = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
                                             } else if (o < 10) return o++, void setTimeout(arguments.callee, 10);
-                                            e.removeChild(t), n = null, C()
+                                            e.removeChild(t), n = null, x()
                                         }()
-                                    } else C()
-                                }() : C()
+                                    } else x()
+                                }() : x()
                             }],
                             v = [],
                             b = [],
-                            g = [],
-                            _ = !1,
+                            _ = [],
+                            g = !1,
                             k = !1,
                             w = !0,
-                            E = function() {
+                            S = function() {
                                 var e = typeof d.getElementById != r && typeof d.getElementsByTagName != r && typeof d.createElement != r,
                                     t = f.userAgent.toLowerCase(),
                                     n = f.platform.toLowerCase(),
                                     o = /win/.test(n || t),
                                     i = /mac/.test(n || t),
                                     s = !!/webkit/.test(t) && parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")),
                                     u = !1,
@@ -728,65 +726,65 @@
                                     wk: s,
                                     ie: u,
                                     win: o,
                                     mac: i
                                 }
                             }();
 
-                        function S() {
-                            if (!_) {
+                        function T() {
+                            if (!g) {
                                 try {
                                     var e = d.getElementsByTagName("body")[0].appendChild(L("span"));
                                     e.parentNode.removeChild(e)
                                 } catch (e) {
                                     return
                                 }
-                                _ = !0;
+                                g = !0;
                                 for (var t = y.length, n = 0; n < t; n++) y[n]()
                             }
                         }
 
-                        function T(e) {
-                            _ ? e() : y[y.length] = e
+                        function E(e) {
+                            g ? e() : y[y.length] = e
                         }
 
-                        function x(e) {
+                        function C(e) {
                             if (typeof h.addEventListener != r) h.addEventListener("load", e, !1);
                             else if (typeof d.addEventListener != r) d.addEventListener("load", e, !1);
                             else if (typeof h.attachEvent != r) ! function(e, t, n) {
-                                e.attachEvent(t, n), g[g.length] = [e, t, n]
+                                e.attachEvent(t, n), _[_.length] = [e, t, n]
                             }(h, "onload", e);
                             else if ("function" == typeof h.onload) {
                                 var t = h.onload;
                                 h.onload = function() {
                                     t(), e()
                                 }
                             } else h.onload = e
                         }
 
-                        function C() {
+                        function x() {
                             var e = v.length;
                             if (e > 0)
                                 for (var t = 0; t < e; t++) {
                                     var n = v[t].id,
                                         o = v[t].callbackFn,
                                         i = {
                                             success: !1,
                                             id: n
                                         };
-                                    if (E.pv[0] > 0) {
+                                    if (S.pv[0] > 0) {
                                         var s = R(n);
                                         if (s)
-                                            if (!M(v[t].swfVersion) || E.wk && E.wk < 312)
+                                            if (!P(v[t].swfVersion) || S.wk && S.wk < 312)
                                                 if (v[t].expressInstall && j()) {
                                                     var a = {};
                                                     a.data = v[t].expressInstall, a.width = s.getAttribute("width") || "0", a.height = s.getAttribute("height") || "0", s.getAttribute("class") && (a.styleclass = s.getAttribute("class")), s.getAttribute("align") && (a.align = s.getAttribute("align"));
                                                     for (var c = {}, l = s.getElementsByTagName("param"), u = l.length, p = 0; p < u; p++) "movie" != l[p].getAttribute("name").toLowerCase() && (c[l[p].getAttribute("name")] = l[p].getAttribute("value"));
-                                                    D(a, c, n, o)
-                                                } else N(s), o && o(i);
+                                                    N(a, c, n, o)
+                                                } else A(s), o && o(i);
                                         else q(n, !0), o && (i.success = !0, i.ref = O(n), o(i))
                                     } else if (q(n, !0), o) {
                                         var h = O(n);
                                         h && typeof h.SetVariable != r && (i.success = !0, i.ref = h), o(i)
                                     }
                                 }
                         }
@@ -799,88 +797,88 @@
                                 else {
                                     var o = n.getElementsByTagName(a)[0];
                                     o && (t = o)
                                 } return t
                         }
 
                         function j() {
-                            return !k && M("6.0.65") && (E.win || E.mac) && !(E.wk && E.wk < 312)
+                            return !k && P("6.0.65") && (S.win || S.mac) && !(S.wk && S.wk < 312)
                         }
 
-                        function D(i, s, a, c) {
+                        function N(i, s, a, c) {
                             k = !0, n = c || null, o = {
                                 success: !1,
                                 id: a
                             };
                             var l = R(a);
                             if (l) {
-                                "OBJECT" == l.nodeName ? (e = A(l), t = null) : (e = l, t = a), i.id = u, (typeof i.width == r || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == r || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), d.title = d.title.slice(0, 47) + " - Flash Player Installation";
-                                var p = E.ie && E.win ? ["Active"].concat("").join("X") : "PlugIn",
+                                "OBJECT" == l.nodeName ? (e = W(l), t = null) : (e = l, t = a), i.id = u, (typeof i.width == r || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == r || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), d.title = d.title.slice(0, 47) + " - Flash Player Installation";
+                                var p = S.ie && S.win ? ["Active"].concat("").join("X") : "PlugIn",
                                     f = "MMredirectURL=" + h.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + p + "&MMdoctitle=" + d.title;
-                                if (typeof s.flashvars != r ? s.flashvars += "&" + f : s.flashvars = f, E.ie && E.win && 4 != l.readyState) {
+                                if (typeof s.flashvars != r ? s.flashvars += "&" + f : s.flashvars = f, S.ie && S.win && 4 != l.readyState) {
                                     var m = L("div");
                                     a += "SWFObjectNew", m.setAttribute("id", a), l.parentNode.insertBefore(m, l), l.style.display = "none",
                                         function() {
                                             4 == l.readyState ? l.parentNode.removeChild(l) : setTimeout(arguments.callee, 10)
                                         }()
                                 }
-                                W(i, s, a)
+                                D(i, s, a)
                             }
                         }
 
-                        function N(e) {
-                            if (E.ie && E.win && 4 != e.readyState) {
+                        function A(e) {
+                            if (S.ie && S.win && 4 != e.readyState) {
                                 var t = L("div");
-                                e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(A(e), t), e.style.display = "none",
+                                e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(W(e), t), e.style.display = "none",
                                     function() {
                                         4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
                                     }()
-                            } else e.parentNode.replaceChild(A(e), e)
+                            } else e.parentNode.replaceChild(W(e), e)
                         }
 
-                        function A(e) {
+                        function W(e) {
                             var t = L("div");
-                            if (E.win && E.ie) t.innerHTML = e.innerHTML;
+                            if (S.win && S.ie) t.innerHTML = e.innerHTML;
                             else {
                                 var n = e.getElementsByTagName(a)[0];
                                 if (n) {
                                     var o = n.childNodes;
                                     if (o)
                                         for (var i = o.length, s = 0; s < i; s++) 1 == o[s].nodeType && "PARAM" == o[s].nodeName || 8 == o[s].nodeType || t.appendChild(o[s].cloneNode(!0))
                                 }
                             }
                             return t
                         }
 
-                        function W(e, t, n) {
+                        function D(e, t, n) {
                             var o, i = R(n);
-                            if (E.wk && E.wk < 312) return o;
+                            if (S.wk && S.wk < 312) return o;
                             if (i)
-                                if (typeof e.id == r && (e.id = n), E.ie && E.win) {
+                                if (typeof e.id == r && (e.id = n), S.ie && S.win) {
                                     var s = "";
                                     for (var c in e) e[c] != Object.prototype[c] && ("data" == c.toLowerCase() ? t.movie = e[c] : "styleclass" == c.toLowerCase() ? s += ' class="' + e[c] + '"' : "classid" != c.toLowerCase() && (s += " " + c + '="' + e[c] + '"'));
                                     var u = "";
                                     for (var p in t) t[p] != Object.prototype[p] && (u += '<param name="' + p + '" value="' + t[p] + '" />');
                                     i.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + s + ">" + u + "</object>", b[b.length] = e.id, o = R(e.id)
                                 } else {
                                     var h = L(a);
                                     for (var d in h.setAttribute("type", l), e) e[d] != Object.prototype[d] && ("styleclass" == d.toLowerCase() ? h.setAttribute("class", e[d]) : "classid" != d.toLowerCase() && h.setAttribute(d, e[d]));
-                                    for (var f in t) t[f] != Object.prototype[f] && "movie" != f.toLowerCase() && B(h, f, t[f]);
+                                    for (var f in t) t[f] != Object.prototype[f] && "movie" != f.toLowerCase() && I(h, f, t[f]);
                                     i.parentNode.replaceChild(h, i), o = h
                                 } return o
                         }
 
-                        function B(e, t, n) {
+                        function I(e, t, n) {
                             var o = L("param");
                             o.setAttribute("name", t), o.setAttribute("value", n), e.appendChild(o)
                         }
 
-                        function I(e) {
+                        function M(e) {
                             var t = R(e);
-                            t && "OBJECT" == t.nodeName && (E.ie && E.win ? (t.style.display = "none", function() {
+                            t && "OBJECT" == t.nodeName && (S.ie && S.win ? (t.style.display = "none", function() {
                                 4 == t.readyState ? function(e) {
                                     var t = R(e);
                                     if (t) {
                                         for (var n in t) "function" == typeof t[n] && (t[n] = null);
                                         t.parentNode.removeChild(t)
                                     }
                                 }(e) : setTimeout(arguments.callee, 10)
@@ -895,141 +893,141 @@
                             return t
                         }
 
                         function L(e) {
                             return d.createElement(e)
                         }
 
-                        function M(e) {
-                            var t = E.pv,
+                        function P(e) {
+                            var t = S.pv,
                                 n = e.split(".");
                             return n[0] = parseInt(n[0], 10), n[1] = parseInt(n[1], 10) || 0, n[2] = parseInt(n[2], 10) || 0, t[0] > n[0] || t[0] == n[0] && t[1] > n[1] || t[0] == n[0] && t[1] == n[1] && t[2] >= n[2]
                         }
 
-                        function P(e, t, n, o) {
-                            if (!E.ie || !E.mac) {
+                        function B(e, t, n, o) {
+                            if (!S.ie || !S.mac) {
                                 var c = d.getElementsByTagName("head")[0];
                                 if (c) {
                                     var l = n && "string" == typeof n ? n : "screen";
                                     if (o && (i = null, s = null), !i || s != l) {
                                         var u = L("style");
-                                        u.setAttribute("type", "text/css"), u.setAttribute("media", l), i = c.appendChild(u), E.ie && E.win && typeof d.styleSheets != r && d.styleSheets.length > 0 && (i = d.styleSheets[d.styleSheets.length - 1]), s = l
+                                        u.setAttribute("type", "text/css"), u.setAttribute("media", l), i = c.appendChild(u), S.ie && S.win && typeof d.styleSheets != r && d.styleSheets.length > 0 && (i = d.styleSheets[d.styleSheets.length - 1]), s = l
                                     }
-                                    E.ie && E.win ? i && typeof i.addRule == a && i.addRule(e, t) : i && typeof d.createTextNode != r && i.appendChild(d.createTextNode(e + " {" + t + "}"))
+                                    S.ie && S.win ? i && typeof i.addRule == a && i.addRule(e, t) : i && typeof d.createTextNode != r && i.appendChild(d.createTextNode(e + " {" + t + "}"))
                                 }
                             }
                         }
 
                         function q(e, t) {
                             if (w) {
                                 var n = t ? "visible" : "hidden";
-                                _ && R(e) ? R(e).style.visibility = n : P("#" + e, "visibility:" + n)
+                                g && R(e) ? R(e).style.visibility = n : B("#" + e, "visibility:" + n)
                             }
                         }
 
-                        function F(e) {
+                        function $(e) {
                             return null != /[\\\"<>\.;]/.exec(e) && typeof encodeURIComponent != r ? encodeURIComponent(e) : e
                         }
-                        return E.w3 && ((typeof d.readyState != r && "complete" == d.readyState || typeof d.readyState == r && (d.getElementsByTagName("body")[0] || d.body)) && S(), _ || (typeof d.addEventListener != r && d.addEventListener("DOMContentLoaded", S, !1), E.ie && E.win && (d.attachEvent(p, (function() {
-                            "complete" == d.readyState && (d.detachEvent(p, arguments.callee), S())
+                        return S.w3 && ((typeof d.readyState != r && "complete" == d.readyState || typeof d.readyState == r && (d.getElementsByTagName("body")[0] || d.body)) && T(), g || (typeof d.addEventListener != r && d.addEventListener("DOMContentLoaded", T, !1), S.ie && S.win && (d.attachEvent(p, (function() {
+                            "complete" == d.readyState && (d.detachEvent(p, arguments.callee), T())
                         })), h == top && function() {
-                            if (!_) {
+                            if (!g) {
                                 try {
                                     d.documentElement.doScroll("left")
                                 } catch (e) {
                                     return void setTimeout(arguments.callee, 0)
                                 }
-                                S()
+                                T()
                             }
-                        }()), E.wk && function() {
-                            _ || (/loaded|complete/.test(d.readyState) ? S() : setTimeout(arguments.callee, 0))
-                        }(), x(S))), E.ie && E.win && window.attachEvent("onunload", (function() {
-                            for (var e = g.length, t = 0; t < e; t++) g[t][0].detachEvent(g[t][1], g[t][2]);
-                            for (var n = b.length, o = 0; o < n; o++) I(b[o]);
-                            for (var i in E) E[i] = null;
-                            for (var s in E = null, swfobject) swfobject[s] = null;
+                        }()), S.wk && function() {
+                            g || (/loaded|complete/.test(d.readyState) ? T() : setTimeout(arguments.callee, 0))
+                        }(), C(T))), S.ie && S.win && window.attachEvent("onunload", (function() {
+                            for (var e = _.length, t = 0; t < e; t++) _[t][0].detachEvent(_[t][1], _[t][2]);
+                            for (var n = b.length, o = 0; o < n; o++) M(b[o]);
+                            for (var i in S) S[i] = null;
+                            for (var s in S = null, swfobject) swfobject[s] = null;
                             swfobject = null
                         })), {
                             registerObject: function(e, t, n, o) {
-                                if (E.w3 && e && t) {
+                                if (S.w3 && e && t) {
                                     var i = {};
                                     i.id = e, i.swfVersion = t, i.expressInstall = n, i.callbackFn = o, v[v.length] = i, q(e, !1)
                                 } else o && o({
                                     success: !1,
                                     id: e
                                 })
                             },
                             getObjectById: function(e) {
-                                if (E.w3) return O(e)
+                                if (S.w3) return O(e)
                             },
                             embedSWF: function(e, t, n, o, i, s, c, l, u, p) {
                                 var h = {
                                     success: !1,
                                     id: t
                                 };
-                                E.w3 && !(E.wk && E.wk < 312) && e && t && n && o && i ? (q(t, !1), T((function() {
+                                S.w3 && !(S.wk && S.wk < 312) && e && t && n && o && i ? (q(t, !1), E((function() {
                                     n += "", o += "";
                                     var d = {};
                                     if (u && typeof u === a)
                                         for (var f in u) d[f] = u[f];
                                     d.data = e, d.width = n, d.height = o;
                                     var m = {};
                                     if (l && typeof l === a)
                                         for (var y in l) m[y] = l[y];
                                     if (c && typeof c === a)
                                         for (var v in c) typeof m.flashvars != r ? m.flashvars += "&" + v + "=" + c[v] : m.flashvars = v + "=" + c[v];
-                                    if (M(i)) {
-                                        var b = W(d, m, t);
+                                    if (P(i)) {
+                                        var b = D(d, m, t);
                                         d.id == t && q(t, !0), h.success = !0, h.ref = b
                                     } else {
-                                        if (s && j()) return d.data = s, void D(d, m, t, p);
+                                        if (s && j()) return d.data = s, void N(d, m, t, p);
                                         q(t, !0)
                                     }
                                     p && p(h)
                                 }))) : p && p(h)
                             },
                             switchOffAutoHideShow: function() {
                                 w = !1
                             },
-                            ua: E,
+                            ua: S,
                             getFlashPlayerVersion: function() {
                                 return {
-                                    major: E.pv[0],
-                                    minor: E.pv[1],
-                                    release: E.pv[2]
+                                    major: S.pv[0],
+                                    minor: S.pv[1],
+                                    release: S.pv[2]
                                 }
                             },
-                            hasFlashPlayerVersion: M,
+                            hasFlashPlayerVersion: P,
                             createSWF: function(e, t, n) {
-                                return E.w3 ? W(e, t, n) : void 0
+                                return S.w3 ? D(e, t, n) : void 0
                             },
                             showExpressInstall: function(e, t, n, o) {
-                                E.w3 && j() && D(e, t, n, o)
+                                S.w3 && j() && N(e, t, n, o)
                             },
                             removeSWF: function(e) {
-                                E.w3 && I(e)
+                                S.w3 && M(e)
                             },
                             createCSS: function(e, t, n, o) {
-                                E.w3 && P(e, t, n, o)
+                                S.w3 && B(e, t, n, o)
                             },
-                            addDomLoadEvent: T,
-                            addLoadEvent: x,
+                            addDomLoadEvent: E,
+                            addLoadEvent: C,
                             getQueryParamValue: function(e) {
                                 var t = d.location.search || d.location.hash;
                                 if (t) {
-                                    if (/\?/.test(t) && (t = t.split("?")[1]), null == e) return F(t);
+                                    if (/\?/.test(t) && (t = t.split("?")[1]), null == e) return $(t);
                                     for (var n = t.split("&"), o = 0; o < n.length; o++)
-                                        if (n[o].substring(0, n[o].indexOf("=")) == e) return F(n[o].substring(n[o].indexOf("=") + 1))
+                                        if (n[o].substring(0, n[o].indexOf("=")) == e) return $(n[o].substring(n[o].indexOf("=") + 1))
                                 }
                                 return ""
                             },
                             expressInstallCallback: function() {
                                 if (k) {
                                     var i = R(u);
-                                    i && e && (i.parentNode.replaceChild(e, i), t && (q(t, !0), E.ie && E.win && (e.style.display = "block")), n && n(o)), k = !1
+                                    i && e && (i.parentNode.replaceChild(e, i), t && (q(t, !0), S.ie && S.win && (e.style.display = "block")), n && n(o)), k = !1
                                 }
                             }
                         }
                     }();
                     ! function() {
                         if ("undefined" != typeof window && !window.WebSocket) {
                             var e = window.console;
@@ -1515,106 +1513,103 @@
                     }
                 };
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }), t.QiSession = void 0;
                 const i = o(n(537));
                 t.QiSession = class {
-                    constructor(e = "nao.local", t = "80") {
-                        this.connected = !1, console.log("DBG Emile qim about to connect w/17"), window.oioi = i.default;
-                        let n = i.default.connect("nao:nao@" + e + ":" + t, {
-                                resource: "libs/qimessaging/2/socket.io",
-                                "force new connection": !0
-                            }),
-                            o = new Array,
-                            s = new Array,
-                            r = 0;
-
-                        function a(e, t, i) {
-                            return function() {
-                                let s = ++r,
-                                    a = Array.prototype.slice.call(arguments, 0),
-                                    c = new Promise((function(e, t) {
-                                        o[s] = {
-                                            resolve: e,
-                                            reject: t
-                                        }
-                                    }));
-                                return "connect" == a[0] && (o[s].__cbi = i), n.emit("call", {
-                                    idm: s,
-                                    params: {
-                                        obj: e,
-                                        member: t,
-                                        args: a
-                                    }
-                                }), c
+                    constructor(e = "nao.local", t = "80", n, o) {
+                        this.connected = n, this.disconnected = o, this._socket = i.default.connect("nao:nao@" + e + ":" + t, {
+                            resource: "libs/qimessaging/2/socket.io",
+                            "force new connection": !0
+                        }), this._dfd = [], this._sigs = [], this._idm = 0, this._socket.on("reply", (e => {
+                            this.onReply(e)
+                        })), this._socket.on("error", (e => {
+                            this.onError(e)
+                        })), this._socket.on("signal", (e => {
+                            this.onSignal(e)
+                        })), this._socket.on("disconnect", this.onDisconnect), this._socket.on("connect", this.onConnect), this.service = this.createMetaCall("ServiceDirectory", "service", "data")
+                    }
+                    isConnected() {
+                        return void 0 !== this._socket && this._socket.socket.connected
+                    }
+                    onReply(e) {
+                        const t = e.idm;
+                        if (void 0 !== e.result && void 0 !== e.result.metaobject) {
+                            const n = {
+                                    __MetaObject: e.result.metaobject
+                                },
+                                o = e.result.pyobject;
+                            this._sigs[o] = [];
+                            const i = n.__MetaObject.methods;
+                            for (const e in i) {
+                                const t = i[e].name;
+                                n[t] = this.createMetaCall(o, t, "data")
+                            }
+                            const s = n.__MetaObject.signals;
+                            for (const e in s) {
+                                const t = s[e].name;
+                                n[t] = this.createMetaSignal(o, t, !1)
+                            }
+                            const r = n.__MetaObject.properties;
+                            for (const e in r) {
+                                const t = r[e].name;
+                                n[t] = this.createMetaSignal(o, t, !0)
+                            }
+                            this._dfd[t].resolve(n)
+                        } else {
+                            if (void 0 !== this._dfd[t].__cbi) {
+                                const n = this._dfd[t].__cbi;
+                                this._sigs[n.obj][n.signal][e.result] = n.cb
                             }
+                            this._dfd[t].resolve(e.result)
                         }
-
-                        function c(e, t, n) {
-                            let o = {};
-                            return s[e][t] = new Array, o.connect = function(n) {
-                                return a(e, t, {
+                        delete this._dfd[t]
+                    }
+                    onError(e) {
+                        void 0 !== e.idm && (this._dfd[e.idm].reject(e.result), delete this._dfd[e.idm])
+                    }
+                    onSignal(e) {
+                        const t = e.result,
+                            n = this._sigs[t.obj][t.signal][t.link];
+                        void 0 !== n && n.apply(this, t.data)
+                    }
+                    onConnect() {
+                        this.connected && this.connected(this)
+                    }
+                    onDisconnect(e) {
+                        for (const e in this._dfd) this._dfd[e].reject("Call " + e + " canceled: disconnected"), delete this._dfd[e];
+                        this.disconnected && this.disconnected()
+                    }
+                    createMetaCall(e, t, n) {
+                        return (...o) => {
+                            ++this._idm;
+                            const i = new Promise(((e, t) => {
+                                this._dfd[this._idm] = {
+                                    resolve: e,
+                                    reject: t
+                                }
+                            }));
+                            return "connect" === o[0] && (this.isConnected = this._socket.socket.connected, this._dfd[this._idm].__cbi = n), this._socket.emit("call", {
+                                idm: this._idm,
+                                params: {
                                     obj: e,
-                                    signal: t,
-                                    cb: n
-                                })("connect")
-                            }, o.disconnect = function(n) {
-                                return delete s[e][t][n], a(e, t, "data")("disconnect", n)
-                            }, n ? (o.setValue = function() {
-                                let n = Array.prototype.slice.call(arguments, 0);
-                                return a(e, t, "data").apply(this, ["setValue"].concat(n))
-                            }, o.value = function() {
-                                return a(e, t, "data")("value")
-                            }, o) : o
-                        }
-                        n.on("reply", (function(e) {
-                            let t = e.idm;
-                            if (null != e.result && null != e.result.metaobject) {
-                                let n = {
-                                        __MetaObject: e.result.metaobject
-                                    },
-                                    i = e.result.pyobject;
-                                s[i] = new Array;
-                                let r = n.__MetaObject.methods;
-                                for (let e in r) {
-                                    let t = r[e].name;
-                                    n[t] = a(i, t, "data")
-                                }
-                                let l = n.__MetaObject.signals;
-                                for (let e in l) {
-                                    let t = l[e].name;
-                                    n[t] = c(i, t, !1)
-                                }
-                                let u = n.__MetaObject.properties;
-                                for (let e in u) {
-                                    let t = u[e].name;
-                                    n[t] = c(i, t, !0)
-                                }
-                                o[t].resolve(n)
-                            } else {
-                                if (null != o[t].__cbi) {
-                                    let n = o[t].__cbi;
-                                    s[n.obj][n.signal][e.result] = n.cb
-                                }
-                                o[t].resolve(e.result)
-                            }
-                            delete o[t]
-                        })), n.on("error", (function(e) {
-                            null != e.idm && (o[e.idm].reject(e.result), delete o[e.idm])
-                        })), n.on("signal", (function(e) {
-                            let t = e.result,
-                                n = s[t.obj][t.signal][t.link];
-                            null != n && n.apply(this, t.data)
-                        })), n.on("disconnect", (function(e) {
-                            for (let e in o) o[e].reject("Call " + e + " canceled: disconnected"), delete o[e];
-                            this.disconnected && console.log("DBG Isabel disconnected")
-                        })), this.service = a("ServiceDirectory", "service", "data"), n.on("connect", (function() {
-                            this.connected && console.log("DBG Isabel already connected")
-                        }))
+                                    member: t,
+                                    args: o
+                                }
+                            }), i
+                        }
+                    }
+                    createMetaSignal(e, t, n) {
+                        const o = {};
+                        return this._sigs[e][t] = [], o.connect = n => this.createMetaCall(e, t, {
+                            obj: e,
+                            signal: t,
+                            cb: n
+                        })("connect"), o.disconnect = n => (delete this._sigs[e][t][n], this.createMetaCall(e, t, "data")("disconnect", n)), n ? (o.setValue = (...n) => this.createMetaCall(e, t, "data").apply(this, ["setValue"].concat(n)), o.value = () => this.createMetaCall(e, t, "data")("value"), o) : o
                     }
                 }
             },
             412: (e, t, n) => {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
@@ -1656,100 +1651,109 @@
                 }), t.NaoRobotView = t.NaoRobotModel = void 0;
                 const i = n(146),
                     s = n(412);
                 n(204);
                 const r = n(996);
                 class a extends i.DOMWidgetModel {
                     constructor() {
-                        super(...arguments), this.connected = "Disconnected", this.status = "Not busy"
+                        super(...arguments), this.connected = "Disconnected", this.status = "Not busy", this._services = {}
                     }
                     defaults() {
                         return Object.assign(Object.assign({}, super.defaults()), {
                             _model_name: a.model_name,
                             _model_module: a.model_module,
                             _model_module_version: a.model_module_version,
                             _view_name: a.view_name,
                             _view_module: a.view_module,
                             _view_module_version: a.view_module_version,
-                            value: "Hello World",
-                            synco: "something silly",
                             connected: "Disconnected",
-                            status: "Not busy"
+                            status: "Not busy",
+                            counter: 0
                         })
                     }
                     initialize(e, t) {
                         super.initialize(e, t), this.on("msg:custom", this.onCommand)
                     }
                     changeStatus(e) {
                         this.status = e, this.set("status", e), this.save_changes()
                     }
+                    validateIPaddress(e) {
+                        return "nao.local" === e || new RegExp("^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(.(?!$)|$)){4}$").test(e)
+                    }
                     connect(e, t) {
                         return o(this, void 0, void 0, (function*() {
-                            console.log("REMOVE the command was to connect"), this.changeStatus("Establishing connection"), this.qiSession = new r.QiSession(e, t), this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Not busy")
+                            const n = e => new Promise((t => setTimeout(t, e)));
+                            if (this.changeStatus("Establishing connection"), !this.validateIPaddress(e)) return this.changeStatus("Invalid IP address"), void console.warn("IP Address ", e, " is not valid");
+                            this.qiSession = new r.QiSession(e, t);
+                            for (let e = 0; e < 100; e++)
+                                if (yield n(100), this.qiSession.isConnected()) {
+                                    this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Available"), console.log("Connection successful after ", e / 10, " seconds.");
+                                    break
+                                } this.qiSession.isConnected() || (console.error("Connection to ", e, " could not be established."), this.changeStatus("Unavailable"))
                         }))
                     }
                     disconnect() {
                         console.log("REMOVE disconnecting"), this.connected = "Disconnected", this.changeStatus("Unavailable")
                     }
-                    Testing() {
-                        return o(this, void 0, void 0, (function*() {
-                            this.qiSession = new r.QiSession;
-                            const e = yield this.qiSession.service("ALTextToSpeech");
-                            let t = this.send(e);
-                            console.log("A thing: ", t), console.log("JS sent something")
-                        }))
-                    }
-                    goSleep(e) {
+                    createService(e) {
                         return o(this, void 0, void 0, (function*() {
-                            var t;
-                            console.log("IN THE SLEEPING SESH"), yield(t = 1e3 * e, new Promise((e => setTimeout(e, t)))), console.log("WAKING UP"), this.set("synco", "something else"), this.save_changes(), this.send({
-                                data: "purple"
-                            }), console.log("SETTED THE VALUE")
+                            this.changeStatus("Creating service " + e);
+                            const t = this.qiSession.service(e),
+                                n = yield t.then((e => e)).catch((e => (this.changeStatus(e), e)));
+                            "object" == typeof n && (this._services[e] = n, this.changeStatus(e + " available"))
                         }))
                     }
                     callService(e, t, n, i) {
                         return o(this, void 0, void 0, (function*() {
-                            const o = yield this.qiSession.service(e);
-                            this.changeStatus("Running method" + t), yield o[t](...n), this.changeStatus("Task completed")
+                            if (void 0 === this._services[e][t]) return void this.changeStatus(t + " does not exist for " + e);
+                            this.changeStatus("Running method " + t);
+                            const o = this._services[e][t](...n);
+                            yield o.then((e => {
+                                this.changeStatus("Task completed"), void 0 !== e && this.send(e)
+                            })).catch((e => {
+                                this.changeStatus(e), this.send(e)
+                            })), this.set("counter", this.get("counter") + 1), this.save_changes()
                         }))
                     }
                     onCommand(e, t) {
                         return o(this, void 0, void 0, (function*() {
-                            switch (console.log("REMOVE onCommand", e), e.command) {
+                            switch (e.command) {
                                 case "connect":
                                     yield this.connect(e.ipAddress, e.port);
                                     break;
                                 case "disconnect":
                                     this.disconnect();
                                     break;
+                                case "createService":
+                                    this.createService(e.service);
+                                    break;
                                 case "callService":
-                                    console.log("RECEIVING COMMAND FOR SERVICE"), yield this.callService(e.service, e.method, e.args, e.kwargs)
+                                    yield this.callService(e.service, e.method, e.args, e.kwargs)
                             }
-                            console.log("End of OnCommand")
                         }))
                     }
                 }
                 t.NaoRobotModel = a, a.serializers = Object.assign({}, i.DOMWidgetModel.serializers), a.model_name = "NaoRobotModel", a.model_module = s.MODULE_NAME, a.model_module_version = s.MODULE_VERSION, a.view_name = "NaoRobotView", a.view_module = s.MODULE_NAME, a.view_module_version = s.MODULE_VERSION;
                 class c extends i.DOMWidgetView {
                     render() {
-                        this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.synco = document.createElement("div"), this.synco.textContent = "it should be here", this.el.appendChild(this.synco), console.log("RENDERING"), console.log(this.model.get("connected"), " CONNECTED"), console.log(this.model.get("synco"), " SYNCO"), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this), this.model.on("change:synco", this.value_changed, this)
+                        this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this)
                     }
                     value_changed() {
-                        console.log("THE VALUE CHANGED"), this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status"), this.synco.textContent = this.model.get("synco")
+                        this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status")
                     }
                 }
                 t.NaoRobotView = c
             },
             146: e => {
                 "use strict";
                 e.exports = __WEBPACK_EXTERNAL_MODULE__146__
             },
             147: e => {
                 "use strict";
-                e.exports = JSON.parse('{"name":"ipynao","version":"0.1.3","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.4"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
+                e.exports = JSON.parse('{"name":"ipynao","version":"0.2.0","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.5"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
             }
         },
         __webpack_module_cache__ = {};
 
     function __webpack_require__(e) {
         var t = __webpack_module_cache__[e];
         if (void 0 !== t) return t.exports;
```

## ipynao/nbextension/index.js.map

### Pretty-printed

 * *Similarity: 0.8864073931459375%*

 * *Differences: {"'mappings'": "';kHAEAA,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACC,EAAOC,GAAI,sHAAuH,KAEhJD,EAAOH,QAAUA,wBCEjBG,EAAOH,QAAU,SAAUK,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAsDV,SAAgCD,EAAML,GACpC,IAoBiBO,EAEbC,EACAC,EAvBAH,EAAUD,EAAK,IAAM,GAErBK,EAAaL,EAAK,GAEtB,IAAKK,EACH,OAAOJ,EAGT,GAAIN,GAAgC,mBAATW,KAAqB,CAC9C,IAAIC,GAWWL,EAXeG,EAa5BF,EAASG,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUT,MACzDE,EAAO,+DAA+DQ,OAAOT,GAC1E,OAAOS,OAAOR,EAAM,QAdrBS,EAAaR,EAAWS,QAAQf,KAAI,SAAUgB,GAChD,MA […]*

```diff
@@ -1,10 +1,10 @@
 {
     "file": "index.js",
-    "mappings": "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",
+    "mappings": "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",
     "names": [
         "exports",
         "___CSS_LOADER_API_IMPORT___",
         "push",
         "module",
         "id",
         "useSourceMap",
@@ -45,16 +45,14 @@
         "protocol",
         "transports",
         "j",
         "sockets",
         "connect",
         "host",
         "details",
-        "console",
-        "log",
         "uuri",
         "socket",
         "uri",
         "util",
         "parseUri",
         "location",
         "slice",
@@ -457,14 +455,16 @@
         "addDomLoadEvent",
         "addLoadEvent",
         "getQueryParamValue",
         "search",
         "hash",
         "substring",
         "expressInstallCallback",
+        "console",
+        "log",
         "error",
         "protocols",
         "proxyHost",
         "proxyPort",
         "headers",
         "__id",
         "__nextId",
@@ -611,95 +611,108 @@
         "lastIdentifiers",
         "newList",
         "newLastIdentifiers",
         "_index",
         "__webpack_public_path__",
         "constructor",
         "ipAddress",
+        "disconnected",
         "_socket",
         "_dfd",
         "_sigs",
         "_idm",
+        "onReply",
+        "onSignal",
+        "service",
         "createMetaCall",
-        "member",
+        "isConnected",
         "idm",
-        "promise",
-        "Promise",
-        "resolve",
-        "reject",
-        "__cbi",
-        "createMetaSignal",
-        "signal",
-        "isProperty",
-        "cb",
-        "setValue",
+        "replyObject",
         "__MetaObject",
-        "pyobj",
+        "pyIndex",
         "methods",
         "methodName",
         "signals",
         "signalName",
+        "createMetaSignal",
         "properties",
         "propertyName",
+        "resolve",
+        "__cbi",
         "cbi",
-        "res",
+        "reject",
         "callback",
-        "disconnected",
-        "service",
+        "_data",
+        "member",
+        "serviceArgs",
+        "promise",
+        "Promise",
+        "signal",
+        "isProperty",
+        "signalObject",
+        "cb",
+        "setValue",
+        "valueArgs",
         "MODULE_VERSION",
         "MODULE_NAME",
         "NaoRobotModel",
         "DOMWidgetModel",
+        "_services",
         "defaults",
         "super",
         "_model_name",
         "model_name",
         "_model_module",
         "model_module",
         "_model_module_version",
         "model_module_version",
         "_view_name",
         "view_name",
         "_view_module",
         "view_module",
         "_view_module_version",
         "view_module_version",
-        "synco",
+        "counter",
         "initialize",
         "onCommand",
         "changeStatus",
         "statusMessage",
         "set",
         "save_changes",
+        "validateIPaddress",
+        "RegExp",
+        "sleep",
+        "ms",
+        "warn",
         "qiSession",
         "QiSession",
-        "Testing",
-        "tts",
-        "aThing",
-        "goSleep",
-        "tSeconds",
-        "ms",
-        "callService",
+        "createService",
         "serviceName",
-        "kwargs",
+        "servicePromise",
         "naoService",
+        "then",
+        "resolution",
+        "catch",
+        "rejection",
+        "callService",
+        "_kwargs",
         "commandData",
         "buffers",
         "serializers",
         "NaoRobotView",
         "DOMWidgetView",
         "render",
         "el",
         "classList",
         "add",
         "txt_connected",
         "textContent",
         "txt_status",
-        "model",
         "value_changed",
+        "model",
         "__WEBPACK_EXTERNAL_MODULE__146__",
         "__webpack_module_cache__",
         "__webpack_require__",
         "moduleId",
         "cachedModule",
         "__webpack_modules__",
         "nc",
@@ -720,25 +733,25 @@
         "webpack://ipynao/./src/widget.ts",
         "webpack://ipynao/external amd \"@jupyter-widgets/base\"",
         "webpack://ipynao/webpack/bootstrap",
         "webpack://ipynao/webpack/runtime/nonce",
         "webpack://ipynao/webpack/startup"
     ],
     "sourcesContent": [
-        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
+        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  color: var(--jp-widgets-color) !important;\\n  font-family: monospace;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "\n/*!\n * socket.io-node\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n * MIT Licensed\n */\n\nmodule.exports = require('./lib/socket.io');\n",
-        "/*! Socket.IO.js build:0.9.17, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */\n// export var io = {};\n// var io = {};\nvar io = ('undefined' === typeof module ? {} : module.exports);\n\n(function () {\n    var self = this;\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * IO namespace.\n         *\n         * @namespace\n         */\n        var io = exports;\n        /**\n         * Socket.IO version\n         *\n         * @api public\n         */\n        io.version = '0.9.17';\n        /**\n         * Protocol implemented.\n         *\n         * @api public\n         */\n        io.protocol = 1;\n        /**\n         * Available transports, these will be populated with the available transports\n         *\n         * @api public\n         */\n        io.transports = [];\n        /**\n         * Keep track of jsonp callbacks.\n         *\n         * @api private\n         */\n        io.j = [];\n        /**\n         * Keep track of our io.Sockets\n         *\n         * @api private\n         */\n        io.sockets = {};\n        /**\n         * Manages connections to hosts.\n         *\n         * @param {String} uri\n         * @Param {Boolean} force creation of new socket (defaults to false)\n         * @api public\n         */\n        io.connect = function (host, details) {\n            console.log(\"DBG Emile io connect\");\n            var uri = io.util.parseUri(host), uuri, socket;\n            // Force http (not secure) connection\n            uri.protocol = 'http';\n            if (global && global.location) {\n                uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);\n                uri.host = uri.host || (global.document\n                    ? global.document.domain : global.location.hostname);\n                uri.port = uri.port || global.location.port;\n            }\n            uuri = io.util.uniqueUri(uri);\n            var options = {\n                host: uri.host,\n                secure: 'https' == uri.protocol,\n                port: uri.port || ('https' == uri.protocol ? 443 : 80),\n                query: uri.query || ''\n            };\n            io.util.merge(options, details);\n            if (options['force new connection'] || !io.sockets[uuri]) {\n                socket = new io.Socket(options);\n            }\n            if (!options['force new connection'] && socket) {\n                io.sockets[uuri] = socket;\n            }\n            socket = socket || io.sockets[uuri];\n            console.log(\"DBG Emile io connecting to\", uuri, \"options:\", options);\n            // if path is different from '' or /\n            return socket.of(uri.path.length > 1 ? uri.path : '');\n        };\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * Utilities namespace.\n         *\n         * @namespace\n         */\n        var util = exports.util = {};\n        /**\n         * Parses an URI\n         *\n         * @author Steven Levithan <stevenlevithan.com> (MIT license)\n         * @api public\n         */\n        var re = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n        var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',\n            'host', 'port', 'relative', 'path', 'directory', 'file', 'query',\n            'anchor'];\n        util.parseUri = function (str) {\n            var m = re.exec(str || ''), uri = {}, i = 14;\n            while (i--) {\n                uri[parts[i]] = m[i] || '';\n            }\n            return uri;\n        };\n        /**\n         * Produces a unique url that identifies a Socket.IO connection.\n         *\n         * @param {Object} uri\n         * @api public\n         */\n        util.uniqueUri = function (uri) {\n            var protocol = uri.protocol, host = uri.host, port = uri.port;\n            if ('document' in global) {\n                host = host || document.domain;\n                port = port || (protocol == 'https'\n                    && document.location.protocol !== 'https:' ? 443 : document.location.port);\n            }\n            else {\n                host = host || 'localhost';\n                if (!port && protocol == 'https') {\n                    port = 443;\n                }\n            }\n            return (protocol || 'http') + '://' + host + ':' + (port || 80);\n        };\n        /**\n         * Mergest 2 query strings in to once unique query string\n         *\n         * @param {String} base\n         * @param {String} addition\n         * @api public\n         */\n        util.query = function (base, addition) {\n            var query = util.chunkQuery(base || ''), components = [];\n            util.merge(query, util.chunkQuery(addition || ''));\n            for (var part in query) {\n                if (query.hasOwnProperty(part)) {\n                    components.push(part + '=' + query[part]);\n                }\n            }\n            return components.length ? '?' + components.join('&') : '';\n        };\n        /**\n         * Transforms a querystring in to an object\n         *\n         * @param {String} qs\n         * @api public\n         */\n        util.chunkQuery = function (qs) {\n            var query = {}, params = qs.split('&'), i = 0, l = params.length, kv;\n            for (; i < l; ++i) {\n                kv = params[i].split('=');\n                if (kv[0]) {\n                    query[kv[0]] = kv[1];\n                }\n            }\n            return query;\n        };\n        /**\n         * Executes the given function when the page is loaded.\n         *\n         *     io.util.load(function () { console.log('page loaded'); });\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        var pageLoaded = false;\n        util.load = function (fn) {\n            if ('document' in global && document.readyState === 'complete' || pageLoaded) {\n                return fn();\n            }\n            util.on(global, 'load', fn, false);\n        };\n        /**\n         * Adds an event.\n         *\n         * @api private\n         */\n        util.on = function (element, event, fn, capture) {\n            if (element.attachEvent) {\n                element.attachEvent('on' + event, fn);\n            }\n            else if (element.addEventListener) {\n                element.addEventListener(event, fn, capture);\n            }\n        };\n        /**\n         * Generates the correct `XMLHttpRequest` for regular and cross domain requests.\n         *\n         * @param {Boolean} [xdomain] Create a request that can be used cross domain.\n         * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.\n         * @api private\n         */\n        util.request = function (xdomain) {\n            if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {\n                return new XDomainRequest();\n            }\n            if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {\n                return new XMLHttpRequest();\n            }\n            if (!xdomain) {\n                try {\n                    return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');\n                }\n                catch (e) { }\n            }\n            return null;\n        };\n        /**\n         * XHR based transport constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        /**\n         * Change the internal pageLoaded value.\n         */\n        if ('undefined' != typeof window) {\n            util.load(function () {\n                pageLoaded = true;\n            });\n        }\n        /**\n         * Defers a function to ensure a spinner is not displayed by the browser\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        util.defer = function (fn) {\n            if (!util.ua.webkit || 'undefined' != typeof importScripts) {\n                return fn();\n            }\n            util.load(function () {\n                setTimeout(fn, 100);\n            });\n        };\n        /**\n         * Merges two objects.\n         *\n         * @api public\n         */\n        util.merge = function merge(target, additional, deep, lastseen) {\n            var seen = lastseen || [], depth = typeof deep == 'undefined' ? 2 : deep, prop;\n            for (prop in additional) {\n                if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {\n                    if (typeof target[prop] !== 'object' || !depth) {\n                        target[prop] = additional[prop];\n                        seen.push(additional[prop]);\n                    }\n                    else {\n                        util.merge(target[prop], additional[prop], depth - 1, seen);\n                    }\n                }\n            }\n            return target;\n        };\n        /**\n         * Merges prototypes from objects\n         *\n         * @api public\n         */\n        util.mixin = function (ctor, ctor2) {\n            util.merge(ctor.prototype, ctor2.prototype);\n        };\n        /**\n         * Shortcut for prototypical and static inheritance.\n         *\n         * @api private\n         */\n        util.inherit = function (ctor, ctor2) {\n            function f() { }\n            ;\n            f.prototype = ctor2.prototype;\n            ctor.prototype = new f;\n        };\n        /**\n         * Checks if the given object is an Array.\n         *\n         *     io.util.isArray([]); // true\n         *     io.util.isArray({}); // false\n         *\n         * @param Object obj\n         * @api public\n         */\n        util.isArray = Array.isArray || function (obj) {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        };\n        /**\n         * Intersects values of two arrays into a third\n         *\n         * @api public\n         */\n        util.intersect = function (arr, arr2) {\n            var ret = [], longest = arr.length > arr2.length ? arr : arr2, shortest = arr.length > arr2.length ? arr2 : arr;\n            for (var i = 0, l = shortest.length; i < l; i++) {\n                if (~util.indexOf(longest, shortest[i]))\n                    ret.push(shortest[i]);\n            }\n            return ret;\n        };\n        /**\n         * Array indexOf compatibility.\n         *\n         * @see bit.ly/a5Dxa2\n         * @api public\n         */\n        util.indexOf = function (arr, o, i) {\n            for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0; i < j && arr[i] !== o; i++) { }\n            return j <= i ? -1 : i;\n        };\n        /**\n         * Converts enumerables to array.\n         *\n         * @api public\n         */\n        util.toArray = function (enu) {\n            var arr = [];\n            for (var i = 0, l = enu.length; i < l; i++)\n                arr.push(enu[i]);\n            return arr;\n        };\n        /**\n         * UA / engines detection namespace.\n         *\n         * @namespace\n         */\n        util.ua = {};\n        /**\n         * Whether the UA supports CORS for XHR.\n         *\n         * @api public\n         */\n        util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {\n            try {\n                var a = new XMLHttpRequest();\n            }\n            catch (e) {\n                return false;\n            }\n            return a.withCredentials != undefined;\n        })();\n        /**\n         * Detect webkit.\n         *\n         * @api public\n         */\n        util.ua.webkit = 'undefined' != typeof navigator\n            && /webkit/i.test(navigator.userAgent);\n        /**\n        * Detect iPad/iPhone/iPod.\n        *\n        * @api public\n        */\n        util.ua.iDevice = 'undefined' != typeof navigator\n            && /iPad|iPhone|iPod/i.test(navigator.userAgent);\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.EventEmitter = EventEmitter;\n        /**\n         * Event emitter constructor.\n         *\n         * @api public.\n         */\n        function EventEmitter() { }\n        ;\n        /**\n         * Adds a listener\n         *\n         * @api public\n         */\n        EventEmitter.prototype.on = function (name, fn) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = fn;\n            }\n            else if (io.util.isArray(this.$events[name])) {\n                this.$events[name].push(fn);\n            }\n            else {\n                this.$events[name] = [this.$events[name], fn];\n            }\n            return this;\n        };\n        EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n        /**\n         * Adds a volatile listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.once = function (name, fn) {\n            var self = this;\n            function on() {\n                self.removeListener(name, on);\n                fn.apply(this, arguments);\n            }\n            ;\n            on.listener = fn;\n            this.on(name, on);\n            return this;\n        };\n        /**\n         * Removes a listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeListener = function (name, fn) {\n            if (this.$events && this.$events[name]) {\n                var list = this.$events[name];\n                if (io.util.isArray(list)) {\n                    var pos = -1;\n                    for (var i = 0, l = list.length; i < l; i++) {\n                        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n                            pos = i;\n                            break;\n                        }\n                    }\n                    if (pos < 0) {\n                        return this;\n                    }\n                    list.splice(pos, 1);\n                    if (!list.length) {\n                        delete this.$events[name];\n                    }\n                }\n                else if (list === fn || (list.listener && list.listener === fn)) {\n                    delete this.$events[name];\n                }\n            }\n            return this;\n        };\n        /**\n         * Removes all listeners for an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeAllListeners = function (name) {\n            if (name === undefined) {\n                this.$events = {};\n                return this;\n            }\n            if (this.$events && this.$events[name]) {\n                this.$events[name] = null;\n            }\n            return this;\n        };\n        /**\n         * Gets all listeners for a certain event.\n         *\n         * @api publci\n         */\n        EventEmitter.prototype.listeners = function (name) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = [];\n            }\n            if (!io.util.isArray(this.$events[name])) {\n                this.$events[name] = [this.$events[name]];\n            }\n            return this.$events[name];\n        };\n        /**\n         * Emits an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.emit = function (name) {\n            if (!this.$events) {\n                return false;\n            }\n            var handler = this.$events[name];\n            if (!handler) {\n                return false;\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            console.log(\"DBG Emile EventEmitter.emit:\", name, args);\n            if ('function' == typeof handler) {\n                handler.apply(this, args);\n            }\n            else if (io.util.isArray(handler)) {\n                var listeners = handler.slice();\n                for (var i = 0, l = listeners.length; i < l; i++) {\n                    listeners[i].apply(this, args);\n                }\n            }\n            else {\n                return false;\n            }\n            return true;\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    /**\n     * Based on JSON2 (http://www.JSON.org/js.html).\n     */\n    (function (exports, nativeJSON) {\n        \"use strict\";\n        // use native JSON if it's available\n        if (nativeJSON && nativeJSON.parse) {\n            return exports.JSON = {\n                parse: nativeJSON.parse,\n                stringify: nativeJSON.stringify\n            };\n        }\n        var JSON = exports.JSON = {};\n        function f(n) {\n            // Format integers to have at least two digits.\n            return n < 10 ? '0' + n : n;\n        }\n        function date(d, key) {\n            return isFinite(d.valueOf()) ?\n                d.getUTCFullYear() + '-' +\n                    f(d.getUTCMonth() + 1) + '-' +\n                    f(d.getUTCDate()) + 'T' +\n                    f(d.getUTCHours()) + ':' +\n                    f(d.getUTCMinutes()) + ':' +\n                    f(d.getUTCSeconds()) + 'Z' : null;\n        }\n        ;\n        var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, gap, indent, meta = {\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"': '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        }, rep;\n        function quote(string) {\n            // If the string contains no control characters, no quote characters, and no\n            // backslash characters, then we can safely slap some quotes around it.\n            // Otherwise we must also replace the offending characters with safe escape\n            // sequences.\n            escapable.lastIndex = 0;\n            return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n                var c = meta[a];\n                return typeof c === 'string' ? c :\n                    '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + '\"' : '\"' + string + '\"';\n        }\n        function str(key, holder) {\n            // Produce a string from holder[key].\n            var i, // The loop counter.\n            k, // The member key.\n            v, // The member value.\n            length, mind = gap, partial, value = holder[key];\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value instanceof Date) {\n                value = date(key);\n            }\n            // If we were called with a replacer function, then call the replacer to\n            // obtain a replacement value.\n            if (typeof rep === 'function') {\n                value = rep.call(holder, key, value);\n            }\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n                    return String(value);\n                // If the type is 'object', we might be dealing with an object or an array or\n                // null.\n                case 'object':\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n                    // Is the value an array?\n                    if (Object.prototype.toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' : gap ?\n                            '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                            '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n                    // If the replacer is an array, use it to select the members to be stringified.\n                    if (rep && typeof rep === 'object') {\n                        length = rep.length;\n                        for (i = 0; i < length; i += 1) {\n                            if (typeof rep[i] === 'string') {\n                                k = rep[i];\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        // Otherwise, iterate through all of the keys in the object.\n                        for (k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' : gap ?\n                        '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n                        '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        }\n        // If the JSON object does not yet have a stringify method, give it one.\n        JSON.stringify = function (value, replacer, space) {\n            // The stringify method takes a value and an optional replacer, and an optional\n            // space parameter, and returns a JSON text. The replacer can be a function\n            // that can replace values, or an array of strings that will select the keys.\n            // A default replacer method can be provided. Use of the space parameter can\n            // produce text that is more easily readable.\n            var i;\n            gap = '';\n            indent = '';\n            // If the space parameter is a number, make an indent string containing that\n            // many spaces.\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n                // If the space parameter is a string, it will be used as the indent string.\n            }\n            else if (typeof space === 'string') {\n                indent = space;\n            }\n            // If there is a replacer, it must be a function or an array.\n            // Otherwise, throw an error.\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                (typeof replacer !== 'object' ||\n                    typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n            // Make a fake root object containing our value under the key of ''.\n            // Return the result of stringifying the value.\n            return str('', { '': value });\n        };\n        // If the JSON object does not yet have a parse method, give it one.\n        JSON.parse = function (text, reviver) {\n            // The parse method takes a text and an optional reviver function, and returns\n            // a JavaScript value if the text is a valid JSON text.\n            var j;\n            function walk(holder, key) {\n                // The walk method is used to recursively walk the resulting structure so\n                // that modifications can be made.\n                var k, v, value = holder[key];\n                if (value && typeof value === 'object') {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            }\n                            else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n            // Parsing happens in four stages. In the first stage, we replace certain\n            // Unicode characters with escape sequences. JavaScript handles many characters\n            // incorrectly, either silently deleting them, or treating them as line endings.\n            text = String(text);\n            cx.lastIndex = 0;\n            if (cx.test(text)) {\n                text = text.replace(cx, function (a) {\n                    return '\\\\u' +\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n            // In the second stage, we run the text against regular expressions that look\n            // for non-JSON patterns. We are especially concerned with '()' and 'new'\n            // because they can cause invocation, and '=' because it can cause mutation.\n            // But just to be safe, we want to reject all unexpected forms.\n            // We split the second stage into 4 regexp operations in order to work around\n            // crippling inefficiencies in IE's and Safari's regexp engines. First we\n            // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n            // replace all simple value tokens with ']' characters. Third, we delete all\n            // open brackets that follow a colon or comma or that begin the text. Finally,\n            // we look to see that the remaining characters are only whitespace or ']' or\n            // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n            if (/^[\\],:{}\\s]*$/\n                .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n                // In the third stage we use the eval function to compile the text into a\n                // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n                // in JavaScript: it can begin a block or an object literal. We wrap the text\n                // in parens to eliminate the ambiguity.\n                j = eval('(' + text + ')');\n                // In the optional fourth stage, we recursively walk the new structure, passing\n                // each name/value pair to a reviver function for possible transformation.\n                return typeof reviver === 'function' ?\n                    walk({ '': j }, '') : j;\n            }\n            // If the text is not JSON parseable, then a SyntaxError is thrown.\n            throw new SyntaxError('JSON.parse');\n        };\n    })(io, typeof JSON !== 'undefined' ? JSON : undefined);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Parser namespace.\n         *\n         * @namespace\n         */\n        var parser = exports.parser = {};\n        /**\n         * Packet types.\n         */\n        var packets = parser.packets = [\n            'disconnect',\n            'connect',\n            'heartbeat',\n            'message',\n            'json',\n            'event',\n            'ack',\n            'error',\n            'noop'\n        ];\n        /**\n         * Errors reasons.\n         */\n        var reasons = parser.reasons = [\n            'transport not supported',\n            'client not handshaken',\n            'unauthorized'\n        ];\n        /**\n         * Errors advice.\n         */\n        var advice = parser.advice = [\n            'reconnect'\n        ];\n        /**\n         * Shortcuts.\n         */\n        var JSON = io.JSON, indexOf = io.util.indexOf;\n        /**\n         * Encodes a packet.\n         *\n         * @api private\n         */\n        parser.encodePacket = function (packet) {\n            var type = indexOf(packets, packet.type), id = packet.id || '', endpoint = packet.endpoint || '', ack = packet.ack, data = null;\n            switch (packet.type) {\n                case 'error':\n                    var reason = packet.reason ? indexOf(reasons, packet.reason) : '', adv = packet.advice ? indexOf(advice, packet.advice) : '';\n                    if (reason !== '' || adv !== '')\n                        data = reason + (adv !== '' ? ('+' + adv) : '');\n                    break;\n                case 'message':\n                    if (packet.data !== '')\n                        data = packet.data;\n                    break;\n                case 'event':\n                    var ev = { name: packet.name };\n                    if (packet.args && packet.args.length) {\n                        ev.args = packet.args;\n                    }\n                    data = JSON.stringify(ev);\n                    break;\n                case 'json':\n                    data = JSON.stringify(packet.data);\n                    break;\n                case 'connect':\n                    if (packet.qs)\n                        data = packet.qs;\n                    break;\n                case 'ack':\n                    data = packet.ackId\n                        + (packet.args && packet.args.length\n                            ? '+' + JSON.stringify(packet.args) : '');\n                    break;\n            }\n            // construct packet with required fragments\n            var encoded = [\n                type,\n                id + (ack == 'data' ? '+' : ''),\n                endpoint\n            ];\n            // data fragment is optional\n            if (data !== null && data !== undefined)\n                encoded.push(data);\n            return encoded.join(':');\n        };\n        /**\n         * Encodes multiple messages (payload).\n         *\n         * @param {Array} messages\n         * @api private\n         */\n        parser.encodePayload = function (packets) {\n            var decoded = '';\n            if (packets.length == 1)\n                return packets[0];\n            for (var i = 0, l = packets.length; i < l; i++) {\n                var packet = packets[i];\n                decoded += '\\ufffd' + packet.length + '\\ufffd' + packets[i];\n            }\n            return decoded;\n        };\n        /**\n         * Decodes a packet\n         *\n         * @api private\n         */\n        var regexp = /([^:]+):([0-9]+)?(\\+)?:([^:]+)?:?([\\s\\S]*)?/;\n        parser.decodePacket = function (data) {\n            var pieces = data.match(regexp);\n            if (!pieces)\n                return {};\n            var id = pieces[2] || '', data = pieces[5] || '', packet = {\n                type: packets[pieces[1]],\n                endpoint: pieces[4] || ''\n            };\n            // whether we need to acknowledge the packet\n            if (id) {\n                packet.id = id;\n                if (pieces[3])\n                    packet.ack = 'data';\n                else\n                    packet.ack = true;\n            }\n            // handle different packet types\n            switch (packet.type) {\n                case 'error':\n                    var pieces = data.split('+');\n                    packet.reason = reasons[pieces[0]] || '';\n                    packet.advice = advice[pieces[1]] || '';\n                    break;\n                case 'message':\n                    packet.data = data || '';\n                    break;\n                case 'event':\n                    try {\n                        var opts = JSON.parse(data);\n                        packet.name = opts.name;\n                        packet.args = opts.args;\n                    }\n                    catch (e) { }\n                    packet.args = packet.args || [];\n                    break;\n                case 'json':\n                    try {\n                        packet.data = JSON.parse(data);\n                    }\n                    catch (e) { }\n                    break;\n                case 'connect':\n                    packet.qs = data || '';\n                    break;\n                case 'ack':\n                    var pieces = data.match(/^([0-9]+)(\\+)?(.*)/);\n                    if (pieces) {\n                        packet.ackId = pieces[1];\n                        packet.args = [];\n                        if (pieces[3]) {\n                            try {\n                                packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];\n                            }\n                            catch (e) { }\n                        }\n                    }\n                    break;\n                case 'disconnect':\n                case 'heartbeat':\n                    break;\n            }\n            ;\n            return packet;\n        };\n        /**\n         * Decodes data payload. Detects multiple messages\n         *\n         * @return {Array} messages\n         * @api public\n         */\n        parser.decodePayload = function (data) {\n            // IE doesn't like data[i] for unicode chars, charAt works fine\n            if (data.charAt(0) == '\\ufffd') {\n                var ret = [];\n                for (var i = 1, length = ''; i < data.length; i++) {\n                    if (data.charAt(i) == '\\ufffd') {\n                        ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));\n                        i += Number(length) + 1;\n                        length = '';\n                    }\n                    else {\n                        length += data.charAt(i);\n                    }\n                }\n                return ret;\n            }\n            else {\n                return [parser.decodePacket(data)];\n            }\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.Transport = Transport;\n        /**\n         * This is the transport template for all supported transport methods.\n         *\n         * @constructor\n         * @api public\n         */\n        function Transport(socket, sessid) {\n            this.socket = socket;\n            this.sessid = sessid;\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Transport, io.EventEmitter);\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        Transport.prototype.heartbeats = function () {\n            return true;\n        };\n        /**\n         * Handles the response from the server. When a new response is received\n         * it will automatically update the timeout, decode the message and\n         * forwards the response to the onMessage function for further processing.\n         *\n         * @param {String} data Response from the server.\n         * @api private\n         */\n        Transport.prototype.onData = function (data) {\n            this.clearCloseTimeout();\n            // If the connection in currently open (or in a reopening state) reset the close\n            // timeout since we have just received data. This check is necessary so\n            // that we don't reset the timeout on an explicitly disconnected connection.\n            if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {\n                this.setCloseTimeout();\n            }\n            if (data !== '') {\n                // todo: we should only do decodePayload for xhr transports\n                var msgs = io.parser.decodePayload(data);\n                if (msgs && msgs.length) {\n                    for (var i = 0, l = msgs.length; i < l; i++) {\n                        this.onPacket(msgs[i]);\n                    }\n                }\n            }\n            return this;\n        };\n        /**\n         * Handles packets.\n         *\n         * @api private\n         */\n        Transport.prototype.onPacket = function (packet) {\n            this.socket.setHeartbeatTimeout();\n            if (packet.type == 'heartbeat') {\n                return this.onHeartbeat();\n            }\n            if (packet.type == 'connect' && packet.endpoint == '') {\n                this.onConnect();\n            }\n            if (packet.type == 'error' && packet.advice == 'reconnect') {\n                this.isOpen = false;\n            }\n            this.socket.onPacket(packet);\n            return this;\n        };\n        /**\n         * Sets close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.setCloseTimeout = function () {\n            if (!this.closeTimeout) {\n                var self = this;\n                this.closeTimeout = setTimeout(function () {\n                    console.log(\"DBG Emile io transport timeout -> disconnect\");\n                    self.onDisconnect();\n                }, this.socket.closeTimeout);\n            }\n        };\n        /**\n         * Called when transport disconnects.\n         *\n         * @api private\n         */\n        Transport.prototype.onDisconnect = function () {\n            if (this.isOpen)\n                this.close();\n            this.clearTimeouts();\n            this.socket.onDisconnect();\n            return this;\n        };\n        /**\n         * Called when transport connects\n         *\n         * @api private\n         */\n        Transport.prototype.onConnect = function () {\n            this.socket.onConnect();\n            return this;\n        };\n        /**\n         * Clears close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.clearCloseTimeout = function () {\n            if (this.closeTimeout) {\n                clearTimeout(this.closeTimeout);\n                this.closeTimeout = null;\n            }\n        };\n        /**\n         * Clear timeouts\n         *\n         * @api private\n         */\n        Transport.prototype.clearTimeouts = function () {\n            this.clearCloseTimeout();\n            if (this.reopenTimeout) {\n                clearTimeout(this.reopenTimeout);\n            }\n        };\n        /**\n         * Sends a packet\n         *\n         * @param {Object} packet object.\n         * @api private\n         */\n        Transport.prototype.packet = function (packet) {\n            this.send(io.parser.encodePacket(packet));\n        };\n        /**\n         * Send the received heartbeat message back to server. So the server\n         * knows we are still connected.\n         *\n         * @param {String} heartbeat Heartbeat response from the server.\n         * @api private\n         */\n        Transport.prototype.onHeartbeat = function (heartbeat) {\n            console.log(\"DBG Emile transport: onHeartbeat\");\n            this.packet({ type: 'heartbeat' });\n        };\n        /**\n         * Called when the transport opens.\n         *\n         * @api private\n         */\n        Transport.prototype.onOpen = function () {\n            this.isOpen = true;\n            this.clearCloseTimeout();\n            this.socket.onOpen();\n        };\n        /**\n         * Notifies the base when the connection with the Socket.IO server\n         * has been disconnected.\n         *\n         * @api private\n         */\n        Transport.prototype.onClose = function () {\n            var self = this;\n            console.log(\"DBG Emile io transport onClose\");\n            /* FIXME: reopen delay causing a infinit loop\n            this.reopenTimeout = setTimeout(function () {\n              self.open();\n            }, this.socket.options['reopen delay']);*/\n            this.isOpen = false;\n            this.socket.onClose();\n            this.onDisconnect();\n        };\n        /**\n         * Generates a connection url based on the Socket.IO URL Protocol.\n         * See <https://github.com/learnboost/socket.io-node/> for more details.\n         *\n         * @returns {String} Connection url\n         * @api private\n         */\n        Transport.prototype.prepareUrl = function () {\n            var options = this.socket.options;\n            return this.scheme() + '://'\n                + options.host + ':' + options.port + '/'\n                + options.resource + '/' + io.protocol\n                + '/' + this.name + '/' + this.sessid;\n        };\n        /**\n         * Checks if the transport is ready to start a connection.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Transport.prototype.ready = function (socket, fn) {\n            fn.call(this);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.Socket = Socket;\n        /**\n         * Create a new `Socket.IO client` which can establish a persistent\n         * connection with a Socket.IO enabled server.\n         *\n         * @api public\n         */\n        function Socket(options) {\n            this.options = {\n                port: 80,\n                secure: false,\n                document: 'document' in global ? document : false,\n                resource: 'socket.io',\n                transports: io.transports,\n                'connect timeout': 10000,\n                'try multiple transports': true,\n                'reconnect': true,\n                'reconnection delay': 500,\n                'reconnection limit': Infinity,\n                'reopen delay': 3000,\n                'max reconnection attempts': 10,\n                'sync disconnect on unload': false,\n                'auto connect': true,\n                'flash policy port': 10843,\n                'manualFlush': false\n            };\n            io.util.merge(this.options, options);\n            this.connected = false;\n            this.open = false;\n            this.connecting = false;\n            this.reconnecting = false;\n            this.namespaces = {};\n            this.buffer = [];\n            this.doBuffer = false;\n            if (this.options['sync disconnect on unload'] &&\n                (!this.isXDomain() || io.util.ua.hasCORS)) {\n                var self = this;\n                io.util.on(global, 'beforeunload', function () {\n                    self.disconnectSync();\n                }, false);\n            }\n            if (this.options['auto connect']) {\n                this.connect();\n            }\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Socket, io.EventEmitter);\n        /**\n         * Returns a namespace listener/emitter for this socket\n         *\n         * @api public\n         */\n        Socket.prototype.of = function (name) {\n            if (!this.namespaces[name]) {\n                this.namespaces[name] = new io.SocketNamespace(this, name);\n                if (name !== '') {\n                    this.namespaces[name].packet({ type: 'connect' });\n                }\n            }\n            return this.namespaces[name];\n        };\n        /**\n         * Emits the given event to the Socket and all namespaces\n         *\n         * @api private\n         */\n        Socket.prototype.publish = function () {\n            this.emit.apply(this, arguments);\n            var nsp;\n            for (var i in this.namespaces) {\n                if (this.namespaces.hasOwnProperty(i)) {\n                    nsp = this.of(i);\n                    nsp.$emit.apply(nsp, arguments);\n                }\n            }\n        };\n        /**\n         * Performs the handshake\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        Socket.prototype.handshake = function (fn) {\n            var self = this, options = this.options;\n            function complete(data) {\n                if (data instanceof Error) {\n                    self.connecting = false;\n                    console.log(\"DBG Emile onError from handshake:\");\n                    console.log(data);\n                    self.onError(data.message);\n                }\n                else {\n                    fn.apply(null, data.split(':'));\n                }\n            }\n            ;\n            var url = [\n                'http' + (options.secure ? 's' : '') + ':/',\n                options.host + ':' + options.port,\n                options.resource,\n                io.protocol,\n                io.util.query(this.options.query, 't=' + +new Date)\n            ].join('/');\n            if (this.isXDomain() && !io.util.ua.hasCORS) {\n                var insertAt = document.getElementsByTagName('script')[0], script = document.createElement('script');\n                script.src = url + '&jsonp=' + io.j.length;\n                insertAt.parentNode.insertBefore(script, insertAt);\n                io.j.push(function (data) {\n                    complete(data);\n                    script.parentNode.removeChild(script);\n                });\n            }\n            else {\n                var xhr = io.util.request();\n                xhr.open('GET', url, true);\n                if (this.isXDomain()) {\n                    xhr.withCredentials = true;\n                }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        xhr.onreadystatechange = empty;\n                        if (xhr.status == 200) {\n                            complete(xhr.responseText);\n                        }\n                        else if (xhr.status == 403) {\n                            console.log(\"DBG Emile onError from xhr:\");\n                            console.log(xhr.status, \"text\", xhr.responseText);\n                            self.onError(xhr.responseText);\n                        }\n                        else {\n                            self.connecting = false;\n                            console.log(\"DBG Emile onError from xhr but not 403\");\n                            console.log(xhr.status, \"text\", xhr.responseText);\n                            !self.reconnecting && self.onError(xhr.responseText);\n                        }\n                    }\n                };\n                xhr.send(null);\n            }\n        };\n        /**\n         * Find an available transport based on the options supplied in the constructor.\n         *\n         * @api private\n         */\n        Socket.prototype.getTransport = function (override) {\n            var transports = override || this.transports, match;\n            for (var i = 0, transport; transport = transports[i]; i++) {\n                console.log(\"DBG Emile trying transport: \", transport);\n                if (io.Transport[transport]\n                    && io.Transport[transport].check(this)\n                    && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {\n                    console.log(\"DBG Emile keeping transport: \", transport);\n                    return new io.Transport[transport](this, this.sessionid);\n                }\n            }\n            return null;\n        };\n        /**\n         * Connects to the server.\n         *\n         * @param {Function} [fn] Callback.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.connect = function (fn) {\n            console.log(\"DBG Emile io socket connect\");\n            if (this.connecting) {\n                return this;\n            }\n            var self = this;\n            self.connecting = true;\n            this.handshake(function (sid, heartbeat, close, transports) {\n                self.sessionid = sid;\n                self.closeTimeout = close * 1000;\n                self.heartbeatTimeout = heartbeat * 1000;\n                if (!self.transports)\n                    self.transports = self.origTransports = (transports ? io.util.intersect(transports.split(','), self.options.transports) : self.options.transports);\n                self.setHeartbeatTimeout();\n                function connect(transports) {\n                    console.log(\"DBG Emile io socket connecting to transport\");\n                    if (self.transport)\n                        self.transport.clearTimeouts();\n                    self.transport = self.getTransport(transports);\n                    if (!self.transport)\n                        return self.publish('connect_failed');\n                    console.log(\"DBG Emile io socket connecting to transport (2)\");\n                    // once the transport is ready\n                    self.transport.ready(self, function () {\n                        console.log(\"DBG Emile io transport is ready\");\n                        self.connecting = true;\n                        self.publish('connecting', self.transport.name);\n                        self.transport.open();\n                        if (self.options['connect timeout']) {\n                            self.connectTimeoutTimer = setTimeout(function () {\n                                if (!self.connected) {\n                                    console.log(\"DBG Emile io socket timeout....\");\n                                    self.connecting = false;\n                                    if (self.options['try multiple transports']) {\n                                        var remaining = self.transports;\n                                        while (remaining.length > 0 && remaining.splice(0, 1)[0] !=\n                                            self.transport.name) { }\n                                        if (remaining.length) {\n                                            connect(remaining);\n                                        }\n                                        else {\n                                            self.publish('connect_failed');\n                                        }\n                                    }\n                                }\n                            }, self.options['connect timeout']);\n                        }\n                    });\n                }\n                connect(self.transports);\n                self.once('connect', function () {\n                    console.log(\"DBG Emile io socket something connected\");\n                    clearTimeout(self.connectTimeoutTimer);\n                    fn && typeof fn == 'function' && fn();\n                });\n            });\n            return this;\n        };\n        /**\n         * Clears and sets a new heartbeat timeout using the value given by the\n         * server during the handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.setHeartbeatTimeout = function () {\n            clearTimeout(this.heartbeatTimeoutTimer);\n            if (this.transport && !this.transport.heartbeats())\n                return;\n            var self = this;\n            this.heartbeatTimeoutTimer = setTimeout(function () {\n                self.transport.onClose();\n            }, this.heartbeatTimeout);\n        };\n        /**\n         * Sends a message.\n         *\n         * @param {Object} data packet.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.packet = function (data) {\n            if (this.connected && !this.doBuffer) {\n                this.transport.packet(data);\n            }\n            else {\n                this.buffer.push(data);\n            }\n            return this;\n        };\n        /**\n         * Sets buffer state\n         *\n         * @api private\n         */\n        Socket.prototype.setBuffer = function (v) {\n            this.doBuffer = v;\n            if (!v && this.connected && this.buffer.length) {\n                if (!this.options['manualFlush']) {\n                    this.flushBuffer();\n                }\n            }\n        };\n        /**\n         * Flushes the buffer data over the wire.\n         * To be invoked manually when 'manualFlush' is set to true.\n         *\n         * @api public\n         */\n        Socket.prototype.flushBuffer = function () {\n            this.transport.payload(this.buffer);\n            this.buffer = [];\n        };\n        /**\n         * Disconnect the established connect.\n         *\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.disconnect = function () {\n            if (this.connected || this.connecting) {\n                if (this.open) {\n                    this.of('').packet({ type: 'disconnect' });\n                }\n                console.log(\"DBG Emile io socket disconnect -> booting\");\n                // handle disconnection immediately\n                this.onDisconnect('booted');\n            }\n            return this;\n        };\n        /**\n         * Disconnects the socket with a sync XHR.\n         *\n         * @api private\n         */\n        Socket.prototype.disconnectSync = function () {\n            // ensure disconnection\n            var xhr = io.util.request();\n            var uri = [\n                'http' + (this.options.secure ? 's' : '') + ':/',\n                this.options.host + ':' + this.options.port,\n                this.options.resource,\n                io.protocol,\n                '',\n                this.sessionid\n            ].join('/') + '/?disconnect=1';\n            xhr.open('GET', uri, false);\n            xhr.send(null);\n            // handle disconnection immediately\n            console.log(\"DBG Emile io socket disconnectSync -> booting\");\n            this.onDisconnect('booted');\n        };\n        /**\n         * Check if we need to use cross domain enabled transports. Cross domain would\n         * be a different port or different domain name.\n         *\n         * @returns {Boolean}\n         * @api private\n         */\n        Socket.prototype.isXDomain = function () {\n            var port = global.location.port ||\n                ('https:' == global.location.protocol ? 443 : 80);\n            return this.options.host !== global.location.hostname\n                || this.options.port != port;\n        };\n        /**\n         * Called upon handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.onConnect = function () {\n            console.log(\"DBG Emile io socket onConnect\");\n            if (!this.connected) {\n                this.connected = true;\n                this.connecting = false;\n                if (!this.doBuffer) {\n                    // make sure to flush the buffer\n                    this.setBuffer(false);\n                }\n                this.emit('connect');\n            }\n        };\n        /**\n         * Called when the transport opens\n         *\n         * @api private\n         */\n        Socket.prototype.onOpen = function () {\n            this.open = true;\n        };\n        /**\n         * Called when the transport closes.\n         *\n         * @api private\n         */\n        Socket.prototype.onClose = function () {\n            this.open = false;\n            clearTimeout(this.heartbeatTimeoutTimer);\n        };\n        /**\n         * Called when the transport first opens a connection\n         *\n         * @param text\n         */\n        Socket.prototype.onPacket = function (packet) {\n            this.of(packet.endpoint).onPacket(packet);\n        };\n        /**\n         * Handles an error.\n         *\n         * @api private\n         */\n        Socket.prototype.onError = function (err) {\n            console.log(\"DBG Emile io socket onError\", err);\n            if (err && err.advice) {\n                if (err.advice === 'reconnect' && (this.connected || this.connecting)) {\n                    this.disconnect();\n                    if (this.options.reconnect) {\n                        this.reconnect();\n                    }\n                }\n            }\n            this.publish('error', err && err.reason ? err.reason : err);\n        };\n        /**\n         * Called when the transport disconnects.\n         *\n         * @api private\n         */\n        Socket.prototype.onDisconnect = function (reason) {\n            console.log(\"DBG Emile io socket onDisconnect\", reason);\n            var wasConnected = this.connected, wasConnecting = this.connecting;\n            this.connected = false;\n            this.connecting = false;\n            this.open = false;\n            if (wasConnected || wasConnecting) {\n                this.transport.close();\n                this.transport.clearTimeouts();\n                if (wasConnected) {\n                    this.publish('disconnect', reason);\n                    if ('booted' != reason && this.options.reconnect && !this.reconnecting) {\n                        this.reconnect();\n                    }\n                }\n            }\n        };\n        /**\n         * Called upon reconnection.\n         *\n         * @api private\n         */\n        Socket.prototype.reconnect = function () {\n            this.reconnecting = true;\n            this.reconnectionAttempts = 0;\n            this.reconnectionDelay = this.options['reconnection delay'];\n            var self = this, maxAttempts = this.options['max reconnection attempts'], tryMultiple = this.options['try multiple transports'], limit = this.options['reconnection limit'];\n            function reset() {\n                if (self.connected) {\n                    for (var i in self.namespaces) {\n                        if (self.namespaces.hasOwnProperty(i) && '' !== i) {\n                            self.namespaces[i].packet({ type: 'connect' });\n                        }\n                    }\n                    self.publish('reconnect', self.transport.name, self.reconnectionAttempts);\n                }\n                clearTimeout(self.reconnectionTimer);\n                self.removeListener('connect_failed', maybeReconnect);\n                self.removeListener('connect', maybeReconnect);\n                self.reconnecting = false;\n                delete self.reconnectionAttempts;\n                delete self.reconnectionDelay;\n                delete self.reconnectionTimer;\n                delete self.redoTransports;\n                self.options['try multiple transports'] = tryMultiple;\n            }\n            ;\n            function maybeReconnect() {\n                if (!self.reconnecting) {\n                    return;\n                }\n                if (self.connected) {\n                    return reset();\n                }\n                ;\n                if (self.connecting && self.reconnecting) {\n                    return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);\n                }\n                if (self.reconnectionAttempts++ >= maxAttempts) {\n                    if (!self.redoTransports) {\n                        self.on('connect_failed', maybeReconnect);\n                        self.options['try multiple transports'] = true;\n                        self.transports = self.origTransports;\n                        self.transport = self.getTransport();\n                        self.redoTransports = true;\n                        self.connect();\n                    }\n                    else {\n                        self.publish('reconnect_failed');\n                        reset();\n                    }\n                }\n                else {\n                    if (self.reconnectionDelay < limit) {\n                        self.reconnectionDelay *= 2; // exponential back off\n                    }\n                    self.connect();\n                    self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);\n                    self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);\n                }\n            }\n            ;\n            this.options['try multiple transports'] = false;\n            this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);\n            this.on('connect', maybeReconnect);\n        };\n    })(io, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.SocketNamespace = SocketNamespace;\n        /**\n         * Socket namespace constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        function SocketNamespace(socket, name) {\n            this.socket = socket;\n            this.name = name || '';\n            this.flags = {};\n            this.json = new Flag(this, 'json');\n            this.ackPackets = 0;\n            this.acks = {};\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(SocketNamespace, io.EventEmitter);\n        /**\n         * Copies emit since we override it\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\n        /**\n         * Creates a new namespace, by proxying the request to the socket. This\n         * allows us to use the synax as we do on the server.\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.of = function () {\n            return this.socket.of.apply(this.socket, arguments);\n        };\n        /**\n         * Sends a packet.\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.packet = function (packet) {\n            packet.endpoint = this.name;\n            this.socket.packet(packet);\n            this.flags = {};\n            return this;\n        };\n        /**\n         * Sends a message\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.send = function (data, fn) {\n            var packet = {\n                type: this.flags.json ? 'json' : 'message',\n                data: data\n            };\n            if ('function' == typeof fn) {\n                packet.id = ++this.ackPackets;\n                packet.ack = true;\n                this.acks[packet.id] = fn;\n            }\n            return this.packet(packet);\n        };\n        /**\n         * Emits an event\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.emit = function (name) {\n            var args = Array.prototype.slice.call(arguments, 1), lastArg = args[args.length - 1], packet = {\n                type: 'event',\n                name: name\n            };\n            if ('function' == typeof lastArg) {\n                packet.id = ++this.ackPackets;\n                packet.ack = 'data';\n                this.acks[packet.id] = lastArg;\n                args = args.slice(0, args.length - 1);\n            }\n            packet.args = args;\n            console.log(\"DBG Emile SocketNamespace.emit:\", packet);\n            return this.packet(packet);\n        };\n        /**\n         * Disconnects the namespace\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.disconnect = function () {\n            if (this.name === '') {\n                this.socket.disconnect();\n            }\n            else {\n                this.packet({ type: 'disconnect' });\n                this.$emit('disconnect');\n            }\n            return this;\n        };\n        /**\n         * Handles a packet\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.onPacket = function (packet) {\n            var self = this;\n            function ack() {\n                self.packet({\n                    type: 'ack',\n                    args: io.util.toArray(arguments),\n                    ackId: packet.id\n                });\n            }\n            ;\n            switch (packet.type) {\n                case 'connect':\n                    this.$emit('connect');\n                    break;\n                case 'disconnect':\n                    if (this.name === '') {\n                        console.log(\"DBG Emile io socket onPacket disconnect, reason=\", packet.reason);\n                        this.socket.onDisconnect(packet.reason || 'booted');\n                    }\n                    else {\n                        this.$emit('disconnect', packet.reason);\n                    }\n                    break;\n                case 'message':\n                case 'json':\n                    var params = ['message', packet.data];\n                    if (packet.ack == 'data') {\n                        params.push(ack);\n                    }\n                    else if (packet.ack) {\n                        this.packet({ type: 'ack', ackId: packet.id });\n                    }\n                    this.$emit.apply(this, params);\n                    break;\n                case 'event':\n                    var params = [packet.name].concat(packet.args);\n                    if (packet.ack == 'data')\n                        params.push(ack);\n                    this.$emit.apply(this, params);\n                    break;\n                case 'ack':\n                    if (this.acks[packet.ackId]) {\n                        this.acks[packet.ackId].apply(this, packet.args);\n                        delete this.acks[packet.ackId];\n                    }\n                    break;\n                case 'error':\n                    if (packet.advice) {\n                        console.log(\"DBG Emile onError from packet:\");\n                        console.log(packet);\n                        this.socket.onError(packet);\n                    }\n                    else {\n                        if (packet.reason == 'unauthorized') {\n                            this.$emit('connect_failed', packet.reason);\n                        }\n                        else {\n                            this.$emit('error', packet.reason);\n                        }\n                    }\n                    break;\n            }\n        };\n        /**\n         * Flag interface.\n         *\n         * @api private\n         */\n        function Flag(nsp, name) {\n            this.namespace = nsp;\n            this.name = name;\n        }\n        ;\n        /**\n         * Send a message\n         *\n         * @api public\n         */\n        Flag.prototype.send = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.send.apply(this.namespace, arguments);\n        };\n        /**\n         * Emit an event\n         *\n         * @api public\n         */\n        Flag.prototype.emit = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.emit.apply(this.namespace, arguments);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.websocket = WS;\n        /**\n         * The WebSocket transport uses the HTML5 WebSocket API to establish an\n         * persistent connection with the Socket.IO server. This transport will also\n         * be inherited by the FlashSocket fallback as it provides a API compatible\n         * polyfill for the WebSockets.\n         *\n         * @constructor\n         * @extends {io.Transport}\n         * @api public\n         */\n        function WS(socket) {\n            io.Transport.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(WS, io.Transport);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        WS.prototype.name = 'websocket';\n        /**\n         * Initializes a new `WebSocket` connection with the Socket.IO server. We attach\n         * all the appropriate listeners to handle the responses from the server.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.open = function () {\n            var query = io.util.query(this.socket.options.query), self = this, Socket;\n            if (!Socket) {\n                Socket = global.MozWebSocket || global.WebSocket;\n            }\n            this.websocket = new Socket(this.prepareUrl() + query);\n            this.websocket.onopen = function () {\n                self.onOpen();\n                self.socket.setBuffer(false);\n            };\n            this.websocket.onmessage = function (ev) {\n                self.onData(ev.data);\n            };\n            this.websocket.onclose = function () {\n                self.onClose();\n                self.socket.setBuffer(true);\n            };\n            this.websocket.onerror = function (e) {\n                console.log(\"DBG Emile onerror from websocket WS\", e);\n                self.onError(e);\n            };\n            return this;\n        };\n        /**\n         * Send a message to the Socket.IO server. The message will automatically be\n         * encoded in the correct message format.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        // Do to a bug in the current IDevices browser, we need to wrap the send in a\n        // setTimeout, when they resume from sleeping the browser will crash if\n        // we don't allow the browser time to detect the socket has been closed\n        if (io.util.ua.iDevice) {\n            WS.prototype.send = function (data) {\n                var self = this;\n                setTimeout(function () {\n                    self.websocket.send(data);\n                }, 0);\n                return this;\n            };\n        }\n        else {\n            WS.prototype.send = function (data) {\n                this.websocket.send(data);\n                return this;\n            };\n        }\n        /**\n         * Payload\n         *\n         * @api private\n         */\n        WS.prototype.payload = function (arr) {\n            for (var i = 0, l = arr.length; i < l; i++) {\n                this.packet(arr[i]);\n            }\n            return this;\n        };\n        /**\n         * Disconnect the established `WebSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.close = function () {\n            this.websocket.close();\n            return this;\n        };\n        /**\n         * Handle the errors that `WebSocket` might be giving when we\n         * are attempting to connect or send messages.\n         *\n         * @param {Error} e The error.\n         * @api private\n         */\n        WS.prototype.onError = function (e) {\n            console.log(\"DBG Emile onerror from websocket WS.onError, forwarding\", e);\n            this.socket.onError(e);\n        };\n        /**\n         * Returns the appropriate scheme for the URI generation.\n         *\n         * @api private\n         */\n        WS.prototype.scheme = function () {\n            return this.socket.options.secure ? 'wss' : 'ws';\n        };\n        /**\n         * Checks if the browser has support for native `WebSockets` and that\n         * it's not the polyfill created for the FlashSocket transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        WS.check = function () {\n            return ('WebSocket' in global && !('__addTask' in WebSocket))\n                || 'MozWebSocket' in global;\n        };\n        /**\n         * Check if the `WebSocket` transport support cross domain communications.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        WS.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('websocket');\n        console.log(\"DBG Emile: skipping transport websocket.\");\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.flashsocket = Flashsocket;\n        /**\n         * The FlashSocket transport. This is a API wrapper for the HTML5 WebSocket\n         * specification. It uses a .swf file to communicate with the server. If you want\n         * to serve the .swf file from a other server than where the Socket.IO script is\n         * coming from you need to use the insecure version of the .swf. More information\n         * about this can be found on the github page.\n         *\n         * @constructor\n         * @extends {io.Transport.websocket}\n         * @api public\n         */\n        function Flashsocket() {\n            io.Transport.websocket.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(Flashsocket, io.Transport.websocket);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        Flashsocket.prototype.name = 'flashsocket';\n        /**\n         * Disconnect the established `FlashSocket` connection. This is done by adding a\n         * new task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.open = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.open.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Sends a message to the Socket.IO server. This is done by adding a new\n         * task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.send = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.send.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Disconnects the established `FlashSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.close = function () {\n            WebSocket.__tasks.length = 0;\n            io.Transport.websocket.prototype.close.call(this);\n            return this;\n        };\n        /**\n         * The WebSocket fall back needs to append the flash container to the body\n         * element, so we need to make sure we have access to it. Or defer the call\n         * until we are sure there is a body element.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Flashsocket.prototype.ready = function (socket, fn) {\n            function init() {\n                var options = socket.options, port = options['flash policy port'], path = [\n                    'http' + (options.secure ? 's' : '') + ':/',\n                    options.host + ':' + options.port,\n                    options.resource,\n                    'static/flashsocket',\n                    'WebSocketMain' + (socket.isXDomain() ? 'Insecure' : '') + '.swf'\n                ];\n                // Only start downloading the swf file when the checked that this browser\n                // actually supports it\n                if (!Flashsocket.loaded) {\n                    if (typeof WEB_SOCKET_SWF_LOCATION === 'undefined') {\n                        // Set the correct file based on the XDomain settings\n                        WEB_SOCKET_SWF_LOCATION = path.join('/');\n                    }\n                    if (port !== 843) {\n                        WebSocket.loadFlashPolicyFile('xmlsocket://' + options.host + ':' + port);\n                    }\n                    WebSocket.__initialize();\n                    Flashsocket.loaded = true;\n                }\n                fn.call(self);\n            }\n            var self = this;\n            if (document.body)\n                return init();\n            io.util.load(init);\n        };\n        /**\n         * Check if the FlashSocket transport is supported as it requires that the Adobe\n         * Flash Player plug-in version `10.0.0` or greater is installed. And also check if\n         * the polyfill is correctly loaded.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.check = function () {\n            if (typeof WebSocket == 'undefined'\n                || !('__initialize' in WebSocket) || !swfobject)\n                return false;\n            return swfobject.getFlashPlayerVersion().major >= 10;\n        };\n        /**\n         * Check if the FlashSocket transport can be used as cross domain / cross origin\n         * transport. Because we can't see which type (secure or insecure) of .swf is used\n         * we will just return true.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Disable AUTO_INITIALIZATION\n         */\n        if (typeof window != 'undefined') {\n            // NB: this in \"window\" scope, but doing so actually breaks it.\n            //WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = true;\n        }\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('flashsocket');\n        console.log(\"DBG Emile: skipping transport flashsocket (come on we're in 2023).\");\n    })(io.Transport, io);\n    /*\tSWFObject v2.2 <http://code.google.com/p/swfobject/>\n        is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>\n    */\n    if ('undefined' != typeof window) {\n        var swfobject = function () { var D = \"undefined\", r = \"object\", S = \"Shockwave Flash\", W = \"ShockwaveFlash.ShockwaveFlash\", q = \"application/x-shockwave-flash\", R = \"SWFObjectExprInst\", x = \"onreadystatechange\", O = window, j = document, t = navigator, T = false, U = [h], o = [], N = [], I = [], l, Q, E, B, J = false, a = false, n, G, m = true, M = function () { var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D, ah = t.userAgent.toLowerCase(), Y = t.platform.toLowerCase(), ae = Y ? /win/.test(Y) : /win/.test(ah), ac = Y ? /mac/.test(Y) : /mac/.test(ah), af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/, \"$1\")) : false, X = !+\"\\v1\", ag = [0, 0, 0], ab = null; if (typeof t.plugins != D && typeof t.plugins[S] == r) {\n            ab = t.plugins[S].description;\n            if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {\n                T = true;\n                X = false;\n                ab = ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/, \"$1\");\n                ag[0] = parseInt(ab.replace(/^(.*)\\..*$/, \"$1\"), 10);\n                ag[1] = parseInt(ab.replace(/^.*\\.(.*)\\s.*$/, \"$1\"), 10);\n                ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, \"$1\"), 10) : 0;\n            }\n        }\n        else {\n            if (typeof O[(['Active'].concat('Object').join('X'))] != D) {\n                try {\n                    var ad = new window[(['Active'].concat('Object').join('X'))](W);\n                    if (ad) {\n                        ab = ad.GetVariable(\"$version\");\n                        if (ab) {\n                            X = true;\n                            ab = ab.split(\" \")[1].split(\",\");\n                            ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                        }\n                    }\n                }\n                catch (Z) { }\n            }\n        } return { w3: aa, pv: ag, wk: af, ie: X, win: ae, mac: ac }; }(), k = function () { if (!M.w3) {\n            return;\n        } if ((typeof j.readyState != D && j.readyState == \"complete\") || (typeof j.readyState == D && (j.getElementsByTagName(\"body\")[0] || j.body))) {\n            f();\n        } if (!J) {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"DOMContentLoaded\", f, false);\n            }\n            if (M.ie && M.win) {\n                j.attachEvent(x, function () { if (j.readyState == \"complete\") {\n                    j.detachEvent(x, arguments.callee);\n                    f();\n                } });\n                if (O == top) {\n                    (function () { if (J) {\n                        return;\n                    } try {\n                        j.documentElement.doScroll(\"left\");\n                    }\n                    catch (X) {\n                        setTimeout(arguments.callee, 0);\n                        return;\n                    } f(); })();\n                }\n            }\n            if (M.wk) {\n                (function () { if (J) {\n                    return;\n                } if (!/loaded|complete/.test(j.readyState)) {\n                    setTimeout(arguments.callee, 0);\n                    return;\n                } f(); })();\n            }\n            s(f);\n        } }(); function f() { if (J) {\n            return;\n        } try {\n            var Z = j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));\n            Z.parentNode.removeChild(Z);\n        }\n        catch (aa) {\n            return;\n        } J = true; var X = U.length; for (var Y = 0; Y < X; Y++) {\n            U[Y]();\n        } } function K(X) { if (J) {\n            X();\n        }\n        else {\n            U[U.length] = X;\n        } } function s(Y) { if (typeof O.addEventListener != D) {\n            O.addEventListener(\"load\", Y, false);\n        }\n        else {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"load\", Y, false);\n            }\n            else {\n                if (typeof O.attachEvent != D) {\n                    i(O, \"onload\", Y);\n                }\n                else {\n                    if (typeof O.onload == \"function\") {\n                        var X = O.onload;\n                        O.onload = function () { X(); Y(); };\n                    }\n                    else {\n                        O.onload = Y;\n                    }\n                }\n            }\n        } } function h() { if (T) {\n            V();\n        }\n        else {\n            H();\n        } } function V() { var X = j.getElementsByTagName(\"body\")[0]; var aa = C(r); aa.setAttribute(\"type\", q); var Z = X.appendChild(aa); if (Z) {\n            var Y = 0;\n            (function () { if (typeof Z.GetVariable != D) {\n                var ab = Z.GetVariable(\"$version\");\n                if (ab) {\n                    ab = ab.split(\" \")[1].split(\",\");\n                    M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                }\n            }\n            else {\n                if (Y < 10) {\n                    Y++;\n                    setTimeout(arguments.callee, 10);\n                    return;\n                }\n            } X.removeChild(aa); Z = null; H(); })();\n        }\n        else {\n            H();\n        } } function H() { var ag = o.length; if (ag > 0) {\n            for (var af = 0; af < ag; af++) {\n                var Y = o[af].id;\n                var ab = o[af].callbackFn;\n                var aa = { success: false, id: Y };\n                if (M.pv[0] > 0) {\n                    var ae = c(Y);\n                    if (ae) {\n                        if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {\n                            w(Y, true);\n                            if (ab) {\n                                aa.success = true;\n                                aa.ref = z(Y);\n                                ab(aa);\n                            }\n                        }\n                        else {\n                            if (o[af].expressInstall && A()) {\n                                var ai = {};\n                                ai.data = o[af].expressInstall;\n                                ai.width = ae.getAttribute(\"width\") || \"0\";\n                                ai.height = ae.getAttribute(\"height\") || \"0\";\n                                if (ae.getAttribute(\"class\")) {\n                                    ai.styleclass = ae.getAttribute(\"class\");\n                                }\n                                if (ae.getAttribute(\"align\")) {\n                                    ai.align = ae.getAttribute(\"align\");\n                                }\n                                var ah = {};\n                                var X = ae.getElementsByTagName(\"param\");\n                                var ac = X.length;\n                                for (var ad = 0; ad < ac; ad++) {\n                                    if (X[ad].getAttribute(\"name\").toLowerCase() != \"movie\") {\n                                        ah[X[ad].getAttribute(\"name\")] = X[ad].getAttribute(\"value\");\n                                    }\n                                }\n                                P(ai, ah, Y, ab);\n                            }\n                            else {\n                                p(ae);\n                                if (ab) {\n                                    ab(aa);\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    w(Y, true);\n                    if (ab) {\n                        var Z = z(Y);\n                        if (Z && typeof Z.SetVariable != D) {\n                            aa.success = true;\n                            aa.ref = Z;\n                        }\n                        ab(aa);\n                    }\n                }\n            }\n        } } function z(aa) { var X = null; var Y = c(aa); if (Y && Y.nodeName == \"OBJECT\") {\n            if (typeof Y.SetVariable != D) {\n                X = Y;\n            }\n            else {\n                var Z = Y.getElementsByTagName(r)[0];\n                if (Z) {\n                    X = Z;\n                }\n            }\n        } return X; } function A() { return !a && F(\"6.0.65\") && (M.win || M.mac) && !(M.wk && M.wk < 312); } function P(aa, ab, X, Z) { a = true; E = Z || null; B = { success: false, id: X }; var ae = c(X); if (ae) {\n            if (ae.nodeName == \"OBJECT\") {\n                l = g(ae);\n                Q = null;\n            }\n            else {\n                l = ae;\n                Q = X;\n            }\n            aa.id = R;\n            if (typeof aa.width == D || (!/%$/.test(aa.width) && parseInt(aa.width, 10) < 310)) {\n                aa.width = \"310\";\n            }\n            if (typeof aa.height == D || (!/%$/.test(aa.height) && parseInt(aa.height, 10) < 137)) {\n                aa.height = \"137\";\n            }\n            j.title = j.title.slice(0, 47) + \" - Flash Player Installation\";\n            var ad = M.ie && M.win ? (['Active'].concat('').join('X')) : \"PlugIn\", ac = \"MMredirectURL=\" + O.location.toString().replace(/&/g, \"%26\") + \"&MMplayerType=\" + ad + \"&MMdoctitle=\" + j.title;\n            if (typeof ab.flashvars != D) {\n                ab.flashvars += \"&\" + ac;\n            }\n            else {\n                ab.flashvars = ac;\n            }\n            if (M.ie && M.win && ae.readyState != 4) {\n                var Y = C(\"div\");\n                X += \"SWFObjectNew\";\n                Y.setAttribute(\"id\", X);\n                ae.parentNode.insertBefore(Y, ae);\n                ae.style.display = \"none\";\n                (function () { if (ae.readyState == 4) {\n                    ae.parentNode.removeChild(ae);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            u(aa, ab, X);\n        } } function p(Y) { if (M.ie && M.win && Y.readyState != 4) {\n            var X = C(\"div\");\n            Y.parentNode.insertBefore(X, Y);\n            X.parentNode.replaceChild(g(Y), X);\n            Y.style.display = \"none\";\n            (function () { if (Y.readyState == 4) {\n                Y.parentNode.removeChild(Y);\n            }\n            else {\n                setTimeout(arguments.callee, 10);\n            } })();\n        }\n        else {\n            Y.parentNode.replaceChild(g(Y), Y);\n        } } function g(ab) { var aa = C(\"div\"); if (M.win && M.ie) {\n            aa.innerHTML = ab.innerHTML;\n        }\n        else {\n            var Y = ab.getElementsByTagName(r)[0];\n            if (Y) {\n                var ad = Y.childNodes;\n                if (ad) {\n                    var X = ad.length;\n                    for (var Z = 0; Z < X; Z++) {\n                        if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == \"PARAM\") && !(ad[Z].nodeType == 8)) {\n                            aa.appendChild(ad[Z].cloneNode(true));\n                        }\n                    }\n                }\n            }\n        } return aa; } function u(ai, ag, Y) { var X, aa = c(Y); if (M.wk && M.wk < 312) {\n            return X;\n        } if (aa) {\n            if (typeof ai.id == D) {\n                ai.id = Y;\n            }\n            if (M.ie && M.win) {\n                var ah = \"\";\n                for (var ae in ai) {\n                    if (ai[ae] != Object.prototype[ae]) {\n                        if (ae.toLowerCase() == \"data\") {\n                            ag.movie = ai[ae];\n                        }\n                        else {\n                            if (ae.toLowerCase() == \"styleclass\") {\n                                ah += ' class=\"' + ai[ae] + '\"';\n                            }\n                            else {\n                                if (ae.toLowerCase() != \"classid\") {\n                                    ah += \" \" + ae + '=\"' + ai[ae] + '\"';\n                                }\n                            }\n                        }\n                    }\n                }\n                var af = \"\";\n                for (var ad in ag) {\n                    if (ag[ad] != Object.prototype[ad]) {\n                        af += '<param name=\"' + ad + '\" value=\"' + ag[ad] + '\" />';\n                    }\n                }\n                aa.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"' + ah + \">\" + af + \"</object>\";\n                N[N.length] = ai.id;\n                X = c(ai.id);\n            }\n            else {\n                var Z = C(r);\n                Z.setAttribute(\"type\", q);\n                for (var ac in ai) {\n                    if (ai[ac] != Object.prototype[ac]) {\n                        if (ac.toLowerCase() == \"styleclass\") {\n                            Z.setAttribute(\"class\", ai[ac]);\n                        }\n                        else {\n                            if (ac.toLowerCase() != \"classid\") {\n                                Z.setAttribute(ac, ai[ac]);\n                            }\n                        }\n                    }\n                }\n                for (var ab in ag) {\n                    if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != \"movie\") {\n                        e(Z, ab, ag[ab]);\n                    }\n                }\n                aa.parentNode.replaceChild(Z, aa);\n                X = Z;\n            }\n        } return X; } function e(Z, X, Y) { var aa = C(\"param\"); aa.setAttribute(\"name\", X); aa.setAttribute(\"value\", Y); Z.appendChild(aa); } function y(Y) { var X = c(Y); if (X && X.nodeName == \"OBJECT\") {\n            if (M.ie && M.win) {\n                X.style.display = \"none\";\n                (function () { if (X.readyState == 4) {\n                    b(Y);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            else {\n                X.parentNode.removeChild(X);\n            }\n        } } function b(Z) { var Y = c(Z); if (Y) {\n            for (var X in Y) {\n                if (typeof Y[X] == \"function\") {\n                    Y[X] = null;\n                }\n            }\n            Y.parentNode.removeChild(Y);\n        } } function c(Z) { var X = null; try {\n            X = j.getElementById(Z);\n        }\n        catch (Y) { } return X; } function C(X) { return j.createElement(X); } function i(Z, X, Y) { Z.attachEvent(X, Y); I[I.length] = [Z, X, Y]; } function F(Z) { var Y = M.pv, X = Z.split(\".\"); X[0] = parseInt(X[0], 10); X[1] = parseInt(X[1], 10) || 0; X[2] = parseInt(X[2], 10) || 0; return (Y[0] > X[0] || (Y[0] == X[0] && Y[1] > X[1]) || (Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2])) ? true : false; } function v(ac, Y, ad, ab) { if (M.ie && M.mac) {\n            return;\n        } var aa = j.getElementsByTagName(\"head\")[0]; if (!aa) {\n            return;\n        } var X = (ad && typeof ad == \"string\") ? ad : \"screen\"; if (ab) {\n            n = null;\n            G = null;\n        } if (!n || G != X) {\n            var Z = C(\"style\");\n            Z.setAttribute(\"type\", \"text/css\");\n            Z.setAttribute(\"media\", X);\n            n = aa.appendChild(Z);\n            if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {\n                n = j.styleSheets[j.styleSheets.length - 1];\n            }\n            G = X;\n        } if (M.ie && M.win) {\n            if (n && typeof n.addRule == r) {\n                n.addRule(ac, Y);\n            }\n        }\n        else {\n            if (n && typeof j.createTextNode != D) {\n                n.appendChild(j.createTextNode(ac + \" {\" + Y + \"}\"));\n            }\n        } } function w(Z, X) { if (!m) {\n            return;\n        } var Y = X ? \"visible\" : \"hidden\"; if (J && c(Z)) {\n            c(Z).style.visibility = Y;\n        }\n        else {\n            v(\"#\" + Z, \"visibility:\" + Y);\n        } } function L(Y) { var Z = /[\\\\\\\"<>\\.;]/; var X = Z.exec(Y) != null; return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y; } var d = function () { if (M.ie && M.win) {\n            window.attachEvent(\"onunload\", function () { var ac = I.length; for (var ab = 0; ab < ac; ab++) {\n                I[ab][0].detachEvent(I[ab][1], I[ab][2]);\n            } var Z = N.length; for (var aa = 0; aa < Z; aa++) {\n                y(N[aa]);\n            } for (var Y in M) {\n                M[Y] = null;\n            } M = null; for (var X in swfobject) {\n                swfobject[X] = null;\n            } swfobject = null; });\n        } }(); return { registerObject: function (ab, X, aa, Z) { if (M.w3 && ab && X) {\n                var Y = {};\n                Y.id = ab;\n                Y.swfVersion = X;\n                Y.expressInstall = aa;\n                Y.callbackFn = Z;\n                o[o.length] = Y;\n                w(ab, false);\n            }\n            else {\n                if (Z) {\n                    Z({ success: false, id: ab });\n                }\n            } }, getObjectById: function (X) { if (M.w3) {\n                return z(X);\n            } }, embedSWF: function (ab, ah, ae, ag, Y, aa, Z, ad, af, ac) { var X = { success: false, id: ah }; if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {\n                w(ah, false);\n                K(function () { ae += \"\"; ag += \"\"; var aj = {}; if (af && typeof af === r) {\n                    for (var al in af) {\n                        aj[al] = af[al];\n                    }\n                } aj.data = ab; aj.width = ae; aj.height = ag; var am = {}; if (ad && typeof ad === r) {\n                    for (var ak in ad) {\n                        am[ak] = ad[ak];\n                    }\n                } if (Z && typeof Z === r) {\n                    for (var ai in Z) {\n                        if (typeof am.flashvars != D) {\n                            am.flashvars += \"&\" + ai + \"=\" + Z[ai];\n                        }\n                        else {\n                            am.flashvars = ai + \"=\" + Z[ai];\n                        }\n                    }\n                } if (F(Y)) {\n                    var an = u(aj, am, ah);\n                    if (aj.id == ah) {\n                        w(ah, true);\n                    }\n                    X.success = true;\n                    X.ref = an;\n                }\n                else {\n                    if (aa && A()) {\n                        aj.data = aa;\n                        P(aj, am, ah, ac);\n                        return;\n                    }\n                    else {\n                        w(ah, true);\n                    }\n                } if (ac) {\n                    ac(X);\n                } });\n            }\n            else {\n                if (ac) {\n                    ac(X);\n                }\n            } }, switchOffAutoHideShow: function () { m = false; }, ua: M, getFlashPlayerVersion: function () { return { major: M.pv[0], minor: M.pv[1], release: M.pv[2] }; }, hasFlashPlayerVersion: F, createSWF: function (Z, Y, X) { if (M.w3) {\n                return u(Z, Y, X);\n            }\n            else {\n                return undefined;\n            } }, showExpressInstall: function (Z, aa, X, Y) { if (M.w3 && A()) {\n                P(Z, aa, X, Y);\n            } }, removeSWF: function (X) { if (M.w3) {\n                y(X);\n            } }, createCSS: function (aa, Z, Y, X) { if (M.w3) {\n                v(aa, Z, Y, X);\n            } }, addDomLoadEvent: K, addLoadEvent: s, getQueryParamValue: function (aa) { var Z = j.location.search || j.location.hash; if (Z) {\n                if (/\\?/.test(Z)) {\n                    Z = Z.split(\"?\")[1];\n                }\n                if (aa == null) {\n                    return L(Z);\n                }\n                var Y = Z.split(\"&\");\n                for (var X = 0; X < Y.length; X++) {\n                    if (Y[X].substring(0, Y[X].indexOf(\"=\")) == aa) {\n                        return L(Y[X].substring((Y[X].indexOf(\"=\") + 1)));\n                    }\n                }\n            } return \"\"; }, expressInstallCallback: function () { if (a) {\n                var X = c(R);\n                if (X && l) {\n                    X.parentNode.replaceChild(l, X);\n                    if (Q) {\n                        w(Q, true);\n                        if (M.ie && M.win) {\n                            l.style.display = \"block\";\n                        }\n                    }\n                    if (E) {\n                        E(B);\n                    }\n                }\n                a = false;\n            } } }; }();\n    }\n    // Copyright: Hiroshi Ichikawa <http://gimite.net/en/>\n    // License: New BSD License\n    // Reference: http://dev.w3.org/html5/websockets/\n    // Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol\n    (function () {\n        if ('undefined' == typeof window || window.WebSocket)\n            return;\n        var console = window.console;\n        if (!console || !console.log || !console.error) {\n            console = { log: function () { }, error: function () { } };\n        }\n        if (!swfobject.hasFlashPlayerVersion(\"10.0.0\")) {\n            console.error(\"Flash Player >= 10.0.0 is required.\");\n            return;\n        }\n        if (location.protocol == \"file:\") {\n            console.error(\"WARNING: web-socket-js doesn't work in file:///... URL \" +\n                \"unless you set Flash Security Settings properly. \" +\n                \"Open the page via Web server i.e. http://...\");\n        }\n        /**\n         * This class represents a faux web socket.\n         * @param {string} url\n         * @param {array or string} protocols\n         * @param {string} proxyHost\n         * @param {int} proxyPort\n         * @param {string} headers\n         */\n        WebSocket = function (url, protocols, proxyHost, proxyPort, headers) {\n            var self = this;\n            self.__id = WebSocket.__nextId++;\n            WebSocket.__instances[self.__id] = self;\n            self.readyState = WebSocket.CONNECTING;\n            self.bufferedAmount = 0;\n            self.__events = {};\n            if (!protocols) {\n                protocols = [];\n            }\n            else if (typeof protocols == \"string\") {\n                protocols = [protocols];\n            }\n            // Uses setTimeout() to make sure __createFlash() runs after the caller sets ws.onopen etc.\n            // Otherwise, when onopen fires immediately, onopen is called before it is set.\n            setTimeout(function () {\n                WebSocket.__addTask(function () {\n                    WebSocket.__flash.create(self.__id, url, protocols, proxyHost || null, proxyPort || 0, headers || null);\n                });\n            }, 0);\n        };\n        /**\n         * Send data to the web socket.\n         * @param {string} data  The data to send to the socket.\n         * @return {boolean}  True for success, false for failure.\n         */\n        WebSocket.prototype.send = function (data) {\n            if (this.readyState == WebSocket.CONNECTING) {\n                throw \"INVALID_STATE_ERR: Web Socket connection has not been established\";\n            }\n            // We use encodeURIComponent() here, because FABridge doesn't work if\n            // the argument includes some characters. We don't use escape() here\n            // because of this:\n            // https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_Functions\n            // But it looks decodeURIComponent(encodeURIComponent(s)) doesn't\n            // preserve all Unicode characters either e.g. \"\\uffff\" in Firefox.\n            // Note by wtritch: Hopefully this will not be necessary using ExternalInterface.  Will require\n            // additional testing.\n            var result = WebSocket.__flash.send(this.__id, encodeURIComponent(data));\n            if (result < 0) { // success\n                return true;\n            }\n            else {\n                this.bufferedAmount += result;\n                return false;\n            }\n        };\n        /**\n         * Close this web socket gracefully.\n         */\n        WebSocket.prototype.close = function () {\n            if (this.readyState == WebSocket.CLOSED || this.readyState == WebSocket.CLOSING) {\n                return;\n            }\n            this.readyState = WebSocket.CLOSING;\n            WebSocket.__flash.close(this.__id);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.addEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events)) {\n                this.__events[type] = [];\n            }\n            this.__events[type].push(listener);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.removeEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events))\n                return;\n            var events = this.__events[type];\n            for (var i = events.length - 1; i >= 0; --i) {\n                if (events[i] === listener) {\n                    events.splice(i, 1);\n                    break;\n                }\n            }\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {Event} event\n         * @return void\n         */\n        WebSocket.prototype.dispatchEvent = function (event) {\n            var events = this.__events[event.type] || [];\n            for (var i = 0; i < events.length; ++i) {\n                events[i](event);\n            }\n            var handler = this[\"on\" + event.type];\n            if (handler)\n                handler(event);\n        };\n        /**\n         * Handles an event from Flash.\n         * @param {Object} flashEvent\n         */\n        WebSocket.prototype.__handleEvent = function (flashEvent) {\n            if (\"readyState\" in flashEvent) {\n                this.readyState = flashEvent.readyState;\n            }\n            if (\"protocol\" in flashEvent) {\n                this.protocol = flashEvent.protocol;\n            }\n            var jsEvent;\n            if (flashEvent.type == \"open\" || flashEvent.type == \"error\") {\n                jsEvent = this.__createSimpleEvent(flashEvent.type);\n            }\n            else if (flashEvent.type == \"close\") {\n                // TODO implement jsEvent.wasClean\n                jsEvent = this.__createSimpleEvent(\"close\");\n            }\n            else if (flashEvent.type == \"message\") {\n                var data = decodeURIComponent(flashEvent.message);\n                jsEvent = this.__createMessageEvent(\"message\", data);\n            }\n            else {\n                throw \"unknown event type: \" + flashEvent.type;\n            }\n            this.dispatchEvent(jsEvent);\n        };\n        WebSocket.prototype.__createSimpleEvent = function (type) {\n            if (document.createEvent && window.Event) {\n                var event = document.createEvent(\"Event\");\n                event.initEvent(type, false, false);\n                return event;\n            }\n            else {\n                return { type: type, bubbles: false, cancelable: false };\n            }\n        };\n        WebSocket.prototype.__createMessageEvent = function (type, data) {\n            if (document.createEvent && window.MessageEvent && !window.opera) {\n                var event = document.createEvent(\"MessageEvent\");\n                event.initMessageEvent(\"message\", false, false, data, null, null, window, null);\n                return event;\n            }\n            else {\n                // IE and Opera, the latter one truncates the data parameter after any 0x00 bytes.\n                return { type: type, data: data, bubbles: false, cancelable: false };\n            }\n        };\n        /**\n         * Define the WebSocket readyState enumeration.\n         */\n        WebSocket.CONNECTING = 0;\n        WebSocket.OPEN = 1;\n        WebSocket.CLOSING = 2;\n        WebSocket.CLOSED = 3;\n        WebSocket.__flash = null;\n        WebSocket.__instances = {};\n        WebSocket.__tasks = [];\n        WebSocket.__nextId = 0;\n        /**\n         * Load a new flash security policy file.\n         * @param {string} url\n         */\n        WebSocket.loadFlashPolicyFile = function (url) {\n            WebSocket.__addTask(function () {\n                WebSocket.__flash.loadManualPolicyFile(url);\n            });\n        };\n        /**\n         * Loads WebSocketMain.swf and creates WebSocketMain object in Flash.\n         */\n        WebSocket.__initialize = function () {\n            if (WebSocket.__flash)\n                return;\n            if (WebSocket.__swfLocation) {\n                // For backword compatibility.\n                window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation;\n            }\n            if (!window.WEB_SOCKET_SWF_LOCATION) {\n                console.error(\"[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf\");\n                return;\n            }\n            var container = document.createElement(\"div\");\n            container.id = \"webSocketContainer\";\n            // Hides Flash box. We cannot use display: none or visibility: hidden because it prevents\n            // Flash from loading at least in IE. So we move it out of the screen at (-100, -100).\n            // But this even doesn't work with Flash Lite (e.g. in Droid Incredible). So with Flash\n            // Lite, we put it at (0, 0). This shows 1x1 box visible at left-top corner but this is\n            // the best we can do as far as we know now.\n            container.style.position = \"absolute\";\n            if (WebSocket.__isFlashLite()) {\n                container.style.left = \"0px\";\n                container.style.top = \"0px\";\n            }\n            else {\n                container.style.left = \"-100px\";\n                container.style.top = \"-100px\";\n            }\n            var holder = document.createElement(\"div\");\n            holder.id = \"webSocketFlash\";\n            container.appendChild(holder);\n            document.body.appendChild(container);\n            // See this article for hasPriority:\n            // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\n            swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION, \"webSocketFlash\", \"1\" /* width */, \"1\" /* height */, \"10.0.0\" /* SWF version */, null, null, { hasPriority: true, swliveconnect: true, allowScriptAccess: \"always\" }, null, function (e) {\n                if (!e.success) {\n                    console.error(\"[WebSocket] swfobject.embedSWF failed\");\n                }\n            });\n        };\n        /**\n         * Called by Flash to notify JS that it's fully loaded and ready\n         * for communication.\n         */\n        WebSocket.__onFlashInitialized = function () {\n            // We need to set a timeout here to avoid round-trip calls\n            // to flash during the initialization process.\n            setTimeout(function () {\n                WebSocket.__flash = document.getElementById(\"webSocketFlash\");\n                WebSocket.__flash.setCallerUrl(location.href);\n                WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);\n                for (var i = 0; i < WebSocket.__tasks.length; ++i) {\n                    WebSocket.__tasks[i]();\n                }\n                WebSocket.__tasks = [];\n            }, 0);\n        };\n        /**\n         * Called by Flash to notify WebSockets events are fired.\n         */\n        WebSocket.__onFlashEvent = function () {\n            setTimeout(function () {\n                try {\n                    // Gets events using receiveEvents() instead of getting it from event object\n                    // of Flash event. This is to make sure to keep message order.\n                    // It seems sometimes Flash events don't arrive in the same order as they are sent.\n                    var events = WebSocket.__flash.receiveEvents();\n                    for (var i = 0; i < events.length; ++i) {\n                        WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i]);\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }, 0);\n            return true;\n        };\n        // Called by Flash.\n        WebSocket.__log = function (message) {\n            console.log(decodeURIComponent(message));\n        };\n        // Called by Flash.\n        WebSocket.__error = function (message) {\n            console.error(decodeURIComponent(message));\n        };\n        WebSocket.__addTask = function (task) {\n            if (WebSocket.__flash) {\n                task();\n            }\n            else {\n                WebSocket.__tasks.push(task);\n            }\n        };\n        /**\n         * Test if the browser is running flash lite.\n         * @return {boolean} True if flash lite is running, false otherwise.\n         */\n        WebSocket.__isFlashLite = function () {\n            if (!window.navigator || !window.navigator.mimeTypes) {\n                return false;\n            }\n            var mimeType = window.navigator.mimeTypes[\"application/x-shockwave-flash\"];\n            if (!mimeType || !mimeType.enabledPlugin || !mimeType.enabledPlugin.filename) {\n                return false;\n            }\n            return mimeType.enabledPlugin.filename.match(/flashlite/i) ? true : false;\n        };\n        if (!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION) {\n            if (window.addEventListener) {\n                window.addEventListener(\"load\", function () {\n                    WebSocket.__initialize();\n                }, false);\n            }\n            else {\n                window.attachEvent(\"onload\", function () {\n                    WebSocket.__initialize();\n                });\n            }\n        }\n    })();\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         *\n         * @api public\n         */\n        exports.XHR = XHR;\n        /**\n         * XHR constructor\n         *\n         * @costructor\n         * @api public\n         */\n        function XHR(socket) {\n            if (!socket)\n                return;\n            io.Transport.apply(this, arguments);\n            this.sendBuffer = [];\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(XHR, io.Transport);\n        /**\n         * Establish a connection\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.open = function () {\n            this.socket.setBuffer(false);\n            this.onOpen();\n            this.get();\n            // we need to make sure the request succeeds since we have no indication\n            // whether the request opened or not until it succeeded.\n            this.setCloseTimeout();\n            return this;\n        };\n        /**\n         * Check if we need to send data to the Socket.IO server, if we have data in our\n         * buffer we encode it and forward it to the `post` method.\n         *\n         * @api private\n         */\n        XHR.prototype.payload = function (payload) {\n            var msgs = [];\n            for (var i = 0, l = payload.length; i < l; i++) {\n                msgs.push(io.parser.encodePacket(payload[i]));\n            }\n            this.send(io.parser.encodePayload(msgs));\n        };\n        /**\n         * Send data to the Socket.IO server.\n         *\n         * @param data The message\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.send = function (data) {\n            this.post(data);\n            return this;\n        };\n        /**\n         * Posts a encoded message to the Socket.IO server.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHR.prototype.post = function (data) {\n            var self = this;\n            this.socket.setBuffer(true);\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    self.posting = false;\n                    if (this.status == 200) {\n                        self.socket.setBuffer(false);\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            function onload() {\n                this.onload = empty;\n                self.socket.setBuffer(false);\n            }\n            ;\n            this.sendXHR = this.request('POST');\n            if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {\n                this.sendXHR.onload = this.sendXHR.onerror = onload;\n            }\n            else {\n                this.sendXHR.onreadystatechange = stateChange;\n            }\n            this.sendXHR.send(data);\n        };\n        /**\n         * Disconnects the established `XHR` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.close = function () {\n            this.onClose();\n            return this;\n        };\n        /**\n         * Generates a configured XHR request\n         *\n         * @param {String} url The url that needs to be requested.\n         * @param {String} method The method the request should use.\n         * @returns {XMLHttpRequest}\n         * @api private\n         */\n        XHR.prototype.request = function (method) {\n            var req = io.util.request(this.socket.isXDomain()), query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            req.open(method || 'GET', this.prepareUrl() + query, true);\n            if (method == 'POST') {\n                try {\n                    if (req.setRequestHeader) {\n                        req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n                    }\n                    else {\n                        // XDomainRequest\n                        req.contentType = 'text/plain';\n                    }\n                }\n                catch (e) { }\n            }\n            return req;\n        };\n        /**\n         * Returns the scheme to use for the transport URLs.\n         *\n         * @api private\n         */\n        XHR.prototype.scheme = function () {\n            return this.socket.options.secure ? 'https' : 'http';\n        };\n        /**\n         * Check if the XHR transports are supported\n         *\n         * @param {Boolean} xdomain Check if we support cross domain requests.\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.check = function (socket, xdomain) {\n            try {\n                var request = io.util.request(xdomain), usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest), socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'), isXProtocol = (global.location && socketProtocol != global.location.protocol);\n                if (request && !(usesXDomReq && isXProtocol)) {\n                    return true;\n                }\n            }\n            catch (e) { }\n            return false;\n        };\n        /**\n         * Check if the XHR transport supports cross domain requests.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.xdomainCheck = function (socket) {\n            return XHR.check(socket, true);\n        };\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.htmlfile = HTMLFile;\n        /**\n         * The HTMLFile transport creates a `forever iframe` based transport\n         * for Internet Explorer. Regular forever iframe implementations will\n         * continuously trigger the browsers buzy indicators. If the forever iframe\n         * is created inside a `htmlfile` these indicators will not be trigged.\n         *\n         * @constructor\n         * @extends {io.Transport.XHR}\n         * @api public\n         */\n        function HTMLFile(socket) {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(HTMLFile, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        HTMLFile.prototype.name = 'htmlfile';\n        /**\n         * Creates a new Ac...eX `htmlfile` with a forever loading iframe\n         * that can be used to listen to messages. Inside the generated\n         * `htmlfile` a reference will be made to the HTMLFile transport.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.get = function () {\n            this.doc = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n            this.doc.open();\n            this.doc.write('<html></html>');\n            this.doc.close();\n            this.doc.parentWindow.s = this;\n            var iframeC = this.doc.createElement('div');\n            iframeC.className = 'socketio';\n            this.doc.body.appendChild(iframeC);\n            this.iframe = this.doc.createElement('iframe');\n            iframeC.appendChild(this.iframe);\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            this.iframe.src = this.prepareUrl() + query;\n            io.util.on(window, 'unload', function () {\n                self.destroy();\n            });\n        };\n        /**\n         * The Socket.IO server will write script tags inside the forever\n         * iframe, this function will be used as callback for the incoming\n         * information.\n         *\n         * @param {String} data The message\n         * @param {document} doc Reference to the context\n         * @api private\n         */\n        HTMLFile.prototype._ = function (data, doc) {\n            // unescape all forward slashes. see GH-1251\n            data = data.replace(/\\\\\\//g, '/');\n            this.onData(data);\n            try {\n                var script = doc.getElementsByTagName('script')[0];\n                script.parentNode.removeChild(script);\n            }\n            catch (e) { }\n        };\n        /**\n         * Destroy the established connection, iframe and `htmlfile`.\n         * And calls the `CollectGarbage` function of Internet Explorer\n         * to release the memory.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.destroy = function () {\n            if (this.iframe) {\n                try {\n                    this.iframe.src = 'about:blank';\n                }\n                catch (e) { }\n                this.doc = null;\n                this.iframe.parentNode.removeChild(this.iframe);\n                this.iframe = null;\n                CollectGarbage();\n            }\n        };\n        /**\n         * Disconnects the established connection.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        HTMLFile.prototype.close = function () {\n            this.destroy();\n            return io.Transport.XHR.prototype.close.call(this);\n        };\n        /**\n         * Checks if the browser supports this transport. The browser\n         * must have an `Ac...eXObject` implementation.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        HTMLFile.check = function (socket) {\n            if (typeof window != \"undefined\" && (['Active'].concat('Object').join('X')) in window) {\n                try {\n                    var a = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n                    return a && io.Transport.XHR.check(socket);\n                }\n                catch (e) { }\n            }\n            return false;\n        };\n        /**\n         * Check if cross domain requests are supported.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        HTMLFile.xdomainCheck = function () {\n            // we can probably do handling for sub-domains, we should\n            // test that it's cross domain but a subdomain here\n            return false;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('htmlfile');\n    })(io.Transport, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports['xhr-polling'] = XHRPolling;\n        /**\n         * The XHR-polling transport uses long polling XHR requests to create a\n         * \"persistent\" connection with the server.\n         *\n         * @constructor\n         * @api public\n         */\n        function XHRPolling() {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(XHRPolling, io.Transport.XHR);\n        /**\n         * Merge the properties from XHR transport\n         */\n        io.util.merge(XHRPolling, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        XHRPolling.prototype.name = 'xhr-polling';\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        XHRPolling.prototype.heartbeats = function () {\n            return false;\n        };\n        /**\n         * Establish a connection, for iPhone and Android this will be done once the page\n         * is loaded.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        XHRPolling.prototype.open = function () {\n            var self = this;\n            io.Transport.XHR.prototype.open.call(self);\n            return false;\n        };\n        /**\n         * Starts a XHR request to wait for incoming messages.\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHRPolling.prototype.get = function () {\n            if (!this.isOpen)\n                return;\n            var self = this;\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    if (this.status == 200) {\n                        self.onData(this.responseText);\n                        self.get();\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            ;\n            function onload() {\n                this.onload = empty;\n                this.onerror = empty;\n                self.retryCounter = 1;\n                self.onData(this.responseText);\n                self.get();\n            }\n            ;\n            function onerror() {\n                self.retryCounter++;\n                if (!self.retryCounter || self.retryCounter > 3) {\n                    self.onClose();\n                }\n                else {\n                    self.get();\n                }\n            }\n            ;\n            this.xhr = this.request();\n            if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {\n                this.xhr.onload = onload;\n                this.xhr.onerror = onerror;\n            }\n            else {\n                this.xhr.onreadystatechange = stateChange;\n            }\n            this.xhr.send(null);\n        };\n        /**\n         * Handle the unclean close behavior.\n         *\n         * @api private\n         */\n        XHRPolling.prototype.onClose = function () {\n            io.Transport.XHR.prototype.onClose.call(this);\n            if (this.xhr) {\n                this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;\n                try {\n                    this.xhr.abort();\n                }\n                catch (e) { }\n                this.xhr = null;\n            }\n        };\n        /**\n         * Webkit based browsers show a infinit spinner when you start a XHR request\n         * before the browsers onload event is called so we need to defer opening of\n         * the transport until the onload event is called. Wrapping the cb in our\n         * defer method solve this.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        XHRPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            io.util.defer(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('xhr-polling');\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * There is a way to hide the loading indicator in Firefox. If you create and\n         * remove a iframe it will stop showing the current loading indicator.\n         * Unfortunately we can't feature detect that and UA sniffing is evil.\n         *\n         * @api private\n         */\n        var indicator = global.document && \"MozAppearance\" in\n            global.document.documentElement.style;\n        /**\n         * Expose constructor.\n         */\n        exports['jsonp-polling'] = JSONPPolling;\n        /**\n         * The JSONP transport creates an persistent connection by dynamically\n         * inserting a script tag in the page. This script tag will receive the\n         * information of the Socket.IO server. When new information is received\n         * it creates a new script tag for the new data stream.\n         *\n         * @constructor\n         * @extends {io.Transport.xhr-polling}\n         * @api public\n         */\n        function JSONPPolling(socket) {\n            io.Transport['xhr-polling'].apply(this, arguments);\n            this.index = io.j.length;\n            var self = this;\n            io.j.push(function (msg) {\n                self._(msg);\n            });\n        }\n        ;\n        /**\n         * Inherits from XHR polling transport.\n         */\n        io.util.inherit(JSONPPolling, io.Transport['xhr-polling']);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        JSONPPolling.prototype.name = 'jsonp-polling';\n        /**\n         * Posts a encoded message to the Socket.IO server using an iframe.\n         * The iframe is used because script tags can create POST based requests.\n         * The iframe is positioned outside of the view so the user does not\n         * notice it's existence.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        JSONPPolling.prototype.post = function (data) {\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (!this.form) {\n                var form = document.createElement('form'), area = document.createElement('textarea'), id = this.iframeId = 'socketio_iframe_' + this.index, iframe;\n                form.className = 'socketio';\n                form.style.position = 'absolute';\n                form.style.top = '0px';\n                form.style.left = '0px';\n                form.style.display = 'none';\n                form.target = id;\n                form.method = 'POST';\n                form.setAttribute('accept-charset', 'utf-8');\n                area.name = 'd';\n                form.appendChild(area);\n                document.body.appendChild(form);\n                this.form = form;\n                this.area = area;\n            }\n            this.form.action = this.prepareUrl() + query;\n            function complete() {\n                initIframe();\n                self.socket.setBuffer(false);\n            }\n            ;\n            function initIframe() {\n                if (self.iframe) {\n                    self.form.removeChild(self.iframe);\n                }\n                try {\n                    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n                    iframe = document.createElement('<iframe name=\"' + self.iframeId + '\">');\n                }\n                catch (e) {\n                    iframe = document.createElement('iframe');\n                    iframe.name = self.iframeId;\n                }\n                iframe.id = self.iframeId;\n                self.form.appendChild(iframe);\n                self.iframe = iframe;\n            }\n            ;\n            initIframe();\n            // we temporarily stringify until we figure out how to prevent\n            // browsers from turning `\\n` into `\\r\\n` in form inputs\n            this.area.value = io.JSON.stringify(data);\n            try {\n                this.form.submit();\n            }\n            catch (e) { }\n            if (this.iframe.attachEvent) {\n                iframe.onreadystatechange = function () {\n                    if (self.iframe.readyState == 'complete') {\n                        complete();\n                    }\n                };\n            }\n            else {\n                this.iframe.onload = complete;\n            }\n            this.socket.setBuffer(true);\n        };\n        /**\n         * Creates a new JSONP poll that can be used to listen\n         * for messages from the Socket.IO server.\n         *\n         * @api private\n         */\n        JSONPPolling.prototype.get = function () {\n            var self = this, script = document.createElement('script'), query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (this.script) {\n                this.script.parentNode.removeChild(this.script);\n                this.script = null;\n            }\n            script.async = true;\n            script.src = this.prepareUrl() + query;\n            script.onerror = function () {\n                self.onClose();\n            };\n            var insertAt = document.getElementsByTagName('script')[0];\n            insertAt.parentNode.insertBefore(script, insertAt);\n            this.script = script;\n            if (indicator) {\n                setTimeout(function () {\n                    var iframe = document.createElement('iframe');\n                    document.body.appendChild(iframe);\n                    document.body.removeChild(iframe);\n                }, 100);\n            }\n        };\n        /**\n         * Callback function for the incoming message stream from the Socket.IO server.\n         *\n         * @param {String} data The message\n         * @api private\n         */\n        JSONPPolling.prototype._ = function (msg) {\n            this.onData(msg);\n            if (this.isOpen) {\n                this.get();\n            }\n            return this;\n        };\n        /**\n         * The indicator hack only works after onload\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        JSONPPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            if (!indicator)\n                return fn.call(this);\n            io.util.load(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Checks if browser supports this transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        JSONPPolling.check = function () {\n            return 'document' in global;\n        };\n        /**\n         * Check if cross domain requests are supported\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        JSONPPolling.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('jsonp-polling');\n    })(io.Transport, io, self);\n    if (typeof define === \"function\" && define.amd) {\n        define([], function () { return io; });\n    }\n})();\n\n",
+        "/*! Socket.IO.js build:0.9.17, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */\n// export var io = {};\n// var io = {};\nvar io = ('undefined' === typeof module ? {} : module.exports);\n\n(function () {\n    var self = this;\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * IO namespace.\n         *\n         * @namespace\n         */\n        var io = exports;\n        /**\n         * Socket.IO version\n         *\n         * @api public\n         */\n        io.version = '0.9.17';\n        /**\n         * Protocol implemented.\n         *\n         * @api public\n         */\n        io.protocol = 1;\n        /**\n         * Available transports, these will be populated with the available transports\n         *\n         * @api public\n         */\n        io.transports = [];\n        /**\n         * Keep track of jsonp callbacks.\n         *\n         * @api private\n         */\n        io.j = [];\n        /**\n         * Keep track of our io.Sockets\n         *\n         * @api private\n         */\n        io.sockets = {};\n        /**\n         * Manages connections to hosts.\n         *\n         * @param {String} uri\n         * @Param {Boolean} force creation of new socket (defaults to false)\n         * @api public\n         */\n        io.connect = function (host, details) {\n            var uri = io.util.parseUri(host), uuri, socket;\n            // Force http (not secure) connection\n            uri.protocol = 'http';\n            if (global && global.location) {\n                uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);\n                uri.host = uri.host || (global.document\n                    ? global.document.domain : global.location.hostname);\n                uri.port = uri.port || global.location.port;\n            }\n            uuri = io.util.uniqueUri(uri);\n            var options = {\n                host: uri.host,\n                secure: 'https' == uri.protocol,\n                port: uri.port || ('https' == uri.protocol ? 443 : 80),\n                query: uri.query || ''\n            };\n            io.util.merge(options, details);\n            if (options['force new connection'] || !io.sockets[uuri]) {\n                socket = new io.Socket(options);\n            }\n            if (!options['force new connection'] && socket) {\n                io.sockets[uuri] = socket;\n            }\n            socket = socket || io.sockets[uuri];\n            // if path is different from '' or /\n            return socket.of(uri.path.length > 1 ? uri.path : '');\n        };\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * Utilities namespace.\n         *\n         * @namespace\n         */\n        var util = exports.util = {};\n        /**\n         * Parses an URI\n         *\n         * @author Steven Levithan <stevenlevithan.com> (MIT license)\n         * @api public\n         */\n        var re = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n        var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',\n            'host', 'port', 'relative', 'path', 'directory', 'file', 'query',\n            'anchor'];\n        util.parseUri = function (str) {\n            var m = re.exec(str || ''), uri = {}, i = 14;\n            while (i--) {\n                uri[parts[i]] = m[i] || '';\n            }\n            return uri;\n        };\n        /**\n         * Produces a unique url that identifies a Socket.IO connection.\n         *\n         * @param {Object} uri\n         * @api public\n         */\n        util.uniqueUri = function (uri) {\n            var protocol = uri.protocol, host = uri.host, port = uri.port;\n            if ('document' in global) {\n                host = host || document.domain;\n                port = port || (protocol == 'https'\n                    && document.location.protocol !== 'https:' ? 443 : document.location.port);\n            }\n            else {\n                host = host || 'localhost';\n                if (!port && protocol == 'https') {\n                    port = 443;\n                }\n            }\n            return (protocol || 'http') + '://' + host + ':' + (port || 80);\n        };\n        /**\n         * Mergest 2 query strings in to once unique query string\n         *\n         * @param {String} base\n         * @param {String} addition\n         * @api public\n         */\n        util.query = function (base, addition) {\n            var query = util.chunkQuery(base || ''), components = [];\n            util.merge(query, util.chunkQuery(addition || ''));\n            for (var part in query) {\n                if (query.hasOwnProperty(part)) {\n                    components.push(part + '=' + query[part]);\n                }\n            }\n            return components.length ? '?' + components.join('&') : '';\n        };\n        /**\n         * Transforms a querystring in to an object\n         *\n         * @param {String} qs\n         * @api public\n         */\n        util.chunkQuery = function (qs) {\n            var query = {}, params = qs.split('&'), i = 0, l = params.length, kv;\n            for (; i < l; ++i) {\n                kv = params[i].split('=');\n                if (kv[0]) {\n                    query[kv[0]] = kv[1];\n                }\n            }\n            return query;\n        };\n        /**\n         * Executes the given function when the page is loaded.\n         *\n         *     io.util.load(function () { console.log('page loaded'); });\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        var pageLoaded = false;\n        util.load = function (fn) {\n            if ('document' in global && document.readyState === 'complete' || pageLoaded) {\n                return fn();\n            }\n            util.on(global, 'load', fn, false);\n        };\n        /**\n         * Adds an event.\n         *\n         * @api private\n         */\n        util.on = function (element, event, fn, capture) {\n            if (element.attachEvent) {\n                element.attachEvent('on' + event, fn);\n            }\n            else if (element.addEventListener) {\n                element.addEventListener(event, fn, capture);\n            }\n        };\n        /**\n         * Generates the correct `XMLHttpRequest` for regular and cross domain requests.\n         *\n         * @param {Boolean} [xdomain] Create a request that can be used cross domain.\n         * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.\n         * @api private\n         */\n        util.request = function (xdomain) {\n            if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {\n                return new XDomainRequest();\n            }\n            if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {\n                return new XMLHttpRequest();\n            }\n            if (!xdomain) {\n                try {\n                    return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');\n                }\n                catch (e) { }\n            }\n            return null;\n        };\n        /**\n         * XHR based transport constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        /**\n         * Change the internal pageLoaded value.\n         */\n        if ('undefined' != typeof window) {\n            util.load(function () {\n                pageLoaded = true;\n            });\n        }\n        /**\n         * Defers a function to ensure a spinner is not displayed by the browser\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        util.defer = function (fn) {\n            if (!util.ua.webkit || 'undefined' != typeof importScripts) {\n                return fn();\n            }\n            util.load(function () {\n                setTimeout(fn, 100);\n            });\n        };\n        /**\n         * Merges two objects.\n         *\n         * @api public\n         */\n        util.merge = function merge(target, additional, deep, lastseen) {\n            var seen = lastseen || [], depth = typeof deep == 'undefined' ? 2 : deep, prop;\n            for (prop in additional) {\n                if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {\n                    if (typeof target[prop] !== 'object' || !depth) {\n                        target[prop] = additional[prop];\n                        seen.push(additional[prop]);\n                    }\n                    else {\n                        util.merge(target[prop], additional[prop], depth - 1, seen);\n                    }\n                }\n            }\n            return target;\n        };\n        /**\n         * Merges prototypes from objects\n         *\n         * @api public\n         */\n        util.mixin = function (ctor, ctor2) {\n            util.merge(ctor.prototype, ctor2.prototype);\n        };\n        /**\n         * Shortcut for prototypical and static inheritance.\n         *\n         * @api private\n         */\n        util.inherit = function (ctor, ctor2) {\n            function f() { }\n            ;\n            f.prototype = ctor2.prototype;\n            ctor.prototype = new f;\n        };\n        /**\n         * Checks if the given object is an Array.\n         *\n         *     io.util.isArray([]); // true\n         *     io.util.isArray({}); // false\n         *\n         * @param Object obj\n         * @api public\n         */\n        util.isArray = Array.isArray || function (obj) {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        };\n        /**\n         * Intersects values of two arrays into a third\n         *\n         * @api public\n         */\n        util.intersect = function (arr, arr2) {\n            var ret = [], longest = arr.length > arr2.length ? arr : arr2, shortest = arr.length > arr2.length ? arr2 : arr;\n            for (var i = 0, l = shortest.length; i < l; i++) {\n                if (~util.indexOf(longest, shortest[i]))\n                    ret.push(shortest[i]);\n            }\n            return ret;\n        };\n        /**\n         * Array indexOf compatibility.\n         *\n         * @see bit.ly/a5Dxa2\n         * @api public\n         */\n        util.indexOf = function (arr, o, i) {\n            for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0; i < j && arr[i] !== o; i++) { }\n            return j <= i ? -1 : i;\n        };\n        /**\n         * Converts enumerables to array.\n         *\n         * @api public\n         */\n        util.toArray = function (enu) {\n            var arr = [];\n            for (var i = 0, l = enu.length; i < l; i++)\n                arr.push(enu[i]);\n            return arr;\n        };\n        /**\n         * UA / engines detection namespace.\n         *\n         * @namespace\n         */\n        util.ua = {};\n        /**\n         * Whether the UA supports CORS for XHR.\n         *\n         * @api public\n         */\n        util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {\n            try {\n                var a = new XMLHttpRequest();\n            }\n            catch (e) {\n                return false;\n            }\n            return a.withCredentials != undefined;\n        })();\n        /**\n         * Detect webkit.\n         *\n         * @api public\n         */\n        util.ua.webkit = 'undefined' != typeof navigator\n            && /webkit/i.test(navigator.userAgent);\n        /**\n        * Detect iPad/iPhone/iPod.\n        *\n        * @api public\n        */\n        util.ua.iDevice = 'undefined' != typeof navigator\n            && /iPad|iPhone|iPod/i.test(navigator.userAgent);\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.EventEmitter = EventEmitter;\n        /**\n         * Event emitter constructor.\n         *\n         * @api public.\n         */\n        function EventEmitter() { }\n        ;\n        /**\n         * Adds a listener\n         *\n         * @api public\n         */\n        EventEmitter.prototype.on = function (name, fn) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = fn;\n            }\n            else if (io.util.isArray(this.$events[name])) {\n                this.$events[name].push(fn);\n            }\n            else {\n                this.$events[name] = [this.$events[name], fn];\n            }\n            return this;\n        };\n        EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n        /**\n         * Adds a volatile listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.once = function (name, fn) {\n            var self = this;\n            function on() {\n                self.removeListener(name, on);\n                fn.apply(this, arguments);\n            }\n            ;\n            on.listener = fn;\n            this.on(name, on);\n            return this;\n        };\n        /**\n         * Removes a listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeListener = function (name, fn) {\n            if (this.$events && this.$events[name]) {\n                var list = this.$events[name];\n                if (io.util.isArray(list)) {\n                    var pos = -1;\n                    for (var i = 0, l = list.length; i < l; i++) {\n                        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n                            pos = i;\n                            break;\n                        }\n                    }\n                    if (pos < 0) {\n                        return this;\n                    }\n                    list.splice(pos, 1);\n                    if (!list.length) {\n                        delete this.$events[name];\n                    }\n                }\n                else if (list === fn || (list.listener && list.listener === fn)) {\n                    delete this.$events[name];\n                }\n            }\n            return this;\n        };\n        /**\n         * Removes all listeners for an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeAllListeners = function (name) {\n            if (name === undefined) {\n                this.$events = {};\n                return this;\n            }\n            if (this.$events && this.$events[name]) {\n                this.$events[name] = null;\n            }\n            return this;\n        };\n        /**\n         * Gets all listeners for a certain event.\n         *\n         * @api publci\n         */\n        EventEmitter.prototype.listeners = function (name) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = [];\n            }\n            if (!io.util.isArray(this.$events[name])) {\n                this.$events[name] = [this.$events[name]];\n            }\n            return this.$events[name];\n        };\n        /**\n         * Emits an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.emit = function (name) {\n            if (!this.$events) {\n                return false;\n            }\n            var handler = this.$events[name];\n            if (!handler) {\n                return false;\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if ('function' == typeof handler) {\n                handler.apply(this, args);\n            }\n            else if (io.util.isArray(handler)) {\n                var listeners = handler.slice();\n                for (var i = 0, l = listeners.length; i < l; i++) {\n                    listeners[i].apply(this, args);\n                }\n            }\n            else {\n                return false;\n            }\n            return true;\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    /**\n     * Based on JSON2 (http://www.JSON.org/js.html).\n     */\n    (function (exports, nativeJSON) {\n        \"use strict\";\n        // use native JSON if it's available\n        if (nativeJSON && nativeJSON.parse) {\n            return exports.JSON = {\n                parse: nativeJSON.parse,\n                stringify: nativeJSON.stringify\n            };\n        }\n        var JSON = exports.JSON = {};\n        function f(n) {\n            // Format integers to have at least two digits.\n            return n < 10 ? '0' + n : n;\n        }\n        function date(d, key) {\n            return isFinite(d.valueOf()) ?\n                d.getUTCFullYear() + '-' +\n                    f(d.getUTCMonth() + 1) + '-' +\n                    f(d.getUTCDate()) + 'T' +\n                    f(d.getUTCHours()) + ':' +\n                    f(d.getUTCMinutes()) + ':' +\n                    f(d.getUTCSeconds()) + 'Z' : null;\n        }\n        ;\n        var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, gap, indent, meta = {\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"': '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        }, rep;\n        function quote(string) {\n            // If the string contains no control characters, no quote characters, and no\n            // backslash characters, then we can safely slap some quotes around it.\n            // Otherwise we must also replace the offending characters with safe escape\n            // sequences.\n            escapable.lastIndex = 0;\n            return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n                var c = meta[a];\n                return typeof c === 'string' ? c :\n                    '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + '\"' : '\"' + string + '\"';\n        }\n        function str(key, holder) {\n            // Produce a string from holder[key].\n            var i, // The loop counter.\n            k, // The member key.\n            v, // The member value.\n            length, mind = gap, partial, value = holder[key];\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value instanceof Date) {\n                value = date(key);\n            }\n            // If we were called with a replacer function, then call the replacer to\n            // obtain a replacement value.\n            if (typeof rep === 'function') {\n                value = rep.call(holder, key, value);\n            }\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n                    return String(value);\n                // If the type is 'object', we might be dealing with an object or an array or\n                // null.\n                case 'object':\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n                    // Is the value an array?\n                    if (Object.prototype.toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' : gap ?\n                            '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                            '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n                    // If the replacer is an array, use it to select the members to be stringified.\n                    if (rep && typeof rep === 'object') {\n                        length = rep.length;\n                        for (i = 0; i < length; i += 1) {\n                            if (typeof rep[i] === 'string') {\n                                k = rep[i];\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        // Otherwise, iterate through all of the keys in the object.\n                        for (k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' : gap ?\n                        '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n                        '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        }\n        // If the JSON object does not yet have a stringify method, give it one.\n        JSON.stringify = function (value, replacer, space) {\n            // The stringify method takes a value and an optional replacer, and an optional\n            // space parameter, and returns a JSON text. The replacer can be a function\n            // that can replace values, or an array of strings that will select the keys.\n            // A default replacer method can be provided. Use of the space parameter can\n            // produce text that is more easily readable.\n            var i;\n            gap = '';\n            indent = '';\n            // If the space parameter is a number, make an indent string containing that\n            // many spaces.\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n                // If the space parameter is a string, it will be used as the indent string.\n            }\n            else if (typeof space === 'string') {\n                indent = space;\n            }\n            // If there is a replacer, it must be a function or an array.\n            // Otherwise, throw an error.\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                (typeof replacer !== 'object' ||\n                    typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n            // Make a fake root object containing our value under the key of ''.\n            // Return the result of stringifying the value.\n            return str('', { '': value });\n        };\n        // If the JSON object does not yet have a parse method, give it one.\n        JSON.parse = function (text, reviver) {\n            // The parse method takes a text and an optional reviver function, and returns\n            // a JavaScript value if the text is a valid JSON text.\n            var j;\n            function walk(holder, key) {\n                // The walk method is used to recursively walk the resulting structure so\n                // that modifications can be made.\n                var k, v, value = holder[key];\n                if (value && typeof value === 'object') {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            }\n                            else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n            // Parsing happens in four stages. In the first stage, we replace certain\n            // Unicode characters with escape sequences. JavaScript handles many characters\n            // incorrectly, either silently deleting them, or treating them as line endings.\n            text = String(text);\n            cx.lastIndex = 0;\n            if (cx.test(text)) {\n                text = text.replace(cx, function (a) {\n                    return '\\\\u' +\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n            // In the second stage, we run the text against regular expressions that look\n            // for non-JSON patterns. We are especially concerned with '()' and 'new'\n            // because they can cause invocation, and '=' because it can cause mutation.\n            // But just to be safe, we want to reject all unexpected forms.\n            // We split the second stage into 4 regexp operations in order to work around\n            // crippling inefficiencies in IE's and Safari's regexp engines. First we\n            // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n            // replace all simple value tokens with ']' characters. Third, we delete all\n            // open brackets that follow a colon or comma or that begin the text. Finally,\n            // we look to see that the remaining characters are only whitespace or ']' or\n            // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n            if (/^[\\],:{}\\s]*$/\n                .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n                // In the third stage we use the eval function to compile the text into a\n                // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n                // in JavaScript: it can begin a block or an object literal. We wrap the text\n                // in parens to eliminate the ambiguity.\n                j = eval('(' + text + ')');\n                // In the optional fourth stage, we recursively walk the new structure, passing\n                // each name/value pair to a reviver function for possible transformation.\n                return typeof reviver === 'function' ?\n                    walk({ '': j }, '') : j;\n            }\n            // If the text is not JSON parseable, then a SyntaxError is thrown.\n            throw new SyntaxError('JSON.parse');\n        };\n    })(io, typeof JSON !== 'undefined' ? JSON : undefined);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Parser namespace.\n         *\n         * @namespace\n         */\n        var parser = exports.parser = {};\n        /**\n         * Packet types.\n         */\n        var packets = parser.packets = [\n            'disconnect',\n            'connect',\n            'heartbeat',\n            'message',\n            'json',\n            'event',\n            'ack',\n            'error',\n            'noop'\n        ];\n        /**\n         * Errors reasons.\n         */\n        var reasons = parser.reasons = [\n            'transport not supported',\n            'client not handshaken',\n            'unauthorized'\n        ];\n        /**\n         * Errors advice.\n         */\n        var advice = parser.advice = [\n            'reconnect'\n        ];\n        /**\n         * Shortcuts.\n         */\n        var JSON = io.JSON, indexOf = io.util.indexOf;\n        /**\n         * Encodes a packet.\n         *\n         * @api private\n         */\n        parser.encodePacket = function (packet) {\n            var type = indexOf(packets, packet.type), id = packet.id || '', endpoint = packet.endpoint || '', ack = packet.ack, data = null;\n            switch (packet.type) {\n                case 'error':\n                    var reason = packet.reason ? indexOf(reasons, packet.reason) : '', adv = packet.advice ? indexOf(advice, packet.advice) : '';\n                    if (reason !== '' || adv !== '')\n                        data = reason + (adv !== '' ? ('+' + adv) : '');\n                    break;\n                case 'message':\n                    if (packet.data !== '')\n                        data = packet.data;\n                    break;\n                case 'event':\n                    var ev = { name: packet.name };\n                    if (packet.args && packet.args.length) {\n                        ev.args = packet.args;\n                    }\n                    data = JSON.stringify(ev);\n                    break;\n                case 'json':\n                    data = JSON.stringify(packet.data);\n                    break;\n                case 'connect':\n                    if (packet.qs)\n                        data = packet.qs;\n                    break;\n                case 'ack':\n                    data = packet.ackId\n                        + (packet.args && packet.args.length\n                            ? '+' + JSON.stringify(packet.args) : '');\n                    break;\n            }\n            // construct packet with required fragments\n            var encoded = [\n                type,\n                id + (ack == 'data' ? '+' : ''),\n                endpoint\n            ];\n            // data fragment is optional\n            if (data !== null && data !== undefined)\n                encoded.push(data);\n            return encoded.join(':');\n        };\n        /**\n         * Encodes multiple messages (payload).\n         *\n         * @param {Array} messages\n         * @api private\n         */\n        parser.encodePayload = function (packets) {\n            var decoded = '';\n            if (packets.length == 1)\n                return packets[0];\n            for (var i = 0, l = packets.length; i < l; i++) {\n                var packet = packets[i];\n                decoded += '\\ufffd' + packet.length + '\\ufffd' + packets[i];\n            }\n            return decoded;\n        };\n        /**\n         * Decodes a packet\n         *\n         * @api private\n         */\n        var regexp = /([^:]+):([0-9]+)?(\\+)?:([^:]+)?:?([\\s\\S]*)?/;\n        parser.decodePacket = function (data) {\n            var pieces = data.match(regexp);\n            if (!pieces)\n                return {};\n            var id = pieces[2] || '', data = pieces[5] || '', packet = {\n                type: packets[pieces[1]],\n                endpoint: pieces[4] || ''\n            };\n            // whether we need to acknowledge the packet\n            if (id) {\n                packet.id = id;\n                if (pieces[3])\n                    packet.ack = 'data';\n                else\n                    packet.ack = true;\n            }\n            // handle different packet types\n            switch (packet.type) {\n                case 'error':\n                    var pieces = data.split('+');\n                    packet.reason = reasons[pieces[0]] || '';\n                    packet.advice = advice[pieces[1]] || '';\n                    break;\n                case 'message':\n                    packet.data = data || '';\n                    break;\n                case 'event':\n                    try {\n                        var opts = JSON.parse(data);\n                        packet.name = opts.name;\n                        packet.args = opts.args;\n                    }\n                    catch (e) { }\n                    packet.args = packet.args || [];\n                    break;\n                case 'json':\n                    try {\n                        packet.data = JSON.parse(data);\n                    }\n                    catch (e) { }\n                    break;\n                case 'connect':\n                    packet.qs = data || '';\n                    break;\n                case 'ack':\n                    var pieces = data.match(/^([0-9]+)(\\+)?(.*)/);\n                    if (pieces) {\n                        packet.ackId = pieces[1];\n                        packet.args = [];\n                        if (pieces[3]) {\n                            try {\n                                packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];\n                            }\n                            catch (e) { }\n                        }\n                    }\n                    break;\n                case 'disconnect':\n                case 'heartbeat':\n                    break;\n            }\n            ;\n            return packet;\n        };\n        /**\n         * Decodes data payload. Detects multiple messages\n         *\n         * @return {Array} messages\n         * @api public\n         */\n        parser.decodePayload = function (data) {\n            // IE doesn't like data[i] for unicode chars, charAt works fine\n            if (data.charAt(0) == '\\ufffd') {\n                var ret = [];\n                for (var i = 1, length = ''; i < data.length; i++) {\n                    if (data.charAt(i) == '\\ufffd') {\n                        ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));\n                        i += Number(length) + 1;\n                        length = '';\n                    }\n                    else {\n                        length += data.charAt(i);\n                    }\n                }\n                return ret;\n            }\n            else {\n                return [parser.decodePacket(data)];\n            }\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.Transport = Transport;\n        /**\n         * This is the transport template for all supported transport methods.\n         *\n         * @constructor\n         * @api public\n         */\n        function Transport(socket, sessid) {\n            this.socket = socket;\n            this.sessid = sessid;\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Transport, io.EventEmitter);\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        Transport.prototype.heartbeats = function () {\n            return true;\n        };\n        /**\n         * Handles the response from the server. When a new response is received\n         * it will automatically update the timeout, decode the message and\n         * forwards the response to the onMessage function for further processing.\n         *\n         * @param {String} data Response from the server.\n         * @api private\n         */\n        Transport.prototype.onData = function (data) {\n            this.clearCloseTimeout();\n            // If the connection in currently open (or in a reopening state) reset the close\n            // timeout since we have just received data. This check is necessary so\n            // that we don't reset the timeout on an explicitly disconnected connection.\n            if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {\n                this.setCloseTimeout();\n            }\n            if (data !== '') {\n                // todo: we should only do decodePayload for xhr transports\n                var msgs = io.parser.decodePayload(data);\n                if (msgs && msgs.length) {\n                    for (var i = 0, l = msgs.length; i < l; i++) {\n                        this.onPacket(msgs[i]);\n                    }\n                }\n            }\n            return this;\n        };\n        /**\n         * Handles packets.\n         *\n         * @api private\n         */\n        Transport.prototype.onPacket = function (packet) {\n            this.socket.setHeartbeatTimeout();\n            if (packet.type == 'heartbeat') {\n                return this.onHeartbeat();\n            }\n            if (packet.type == 'connect' && packet.endpoint == '') {\n                this.onConnect();\n            }\n            if (packet.type == 'error' && packet.advice == 'reconnect') {\n                this.isOpen = false;\n            }\n            this.socket.onPacket(packet);\n            return this;\n        };\n        /**\n         * Sets close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.setCloseTimeout = function () {\n            if (!this.closeTimeout) {\n                var self = this;\n                this.closeTimeout = setTimeout(function () {\n                    self.onDisconnect();\n                }, this.socket.closeTimeout);\n            }\n        };\n        /**\n         * Called when transport disconnects.\n         *\n         * @api private\n         */\n        Transport.prototype.onDisconnect = function () {\n            if (this.isOpen)\n                this.close();\n            this.clearTimeouts();\n            this.socket.onDisconnect();\n            return this;\n        };\n        /**\n         * Called when transport connects\n         *\n         * @api private\n         */\n        Transport.prototype.onConnect = function () {\n            this.socket.onConnect();\n            return this;\n        };\n        /**\n         * Clears close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.clearCloseTimeout = function () {\n            if (this.closeTimeout) {\n                clearTimeout(this.closeTimeout);\n                this.closeTimeout = null;\n            }\n        };\n        /**\n         * Clear timeouts\n         *\n         * @api private\n         */\n        Transport.prototype.clearTimeouts = function () {\n            this.clearCloseTimeout();\n            if (this.reopenTimeout) {\n                clearTimeout(this.reopenTimeout);\n            }\n        };\n        /**\n         * Sends a packet\n         *\n         * @param {Object} packet object.\n         * @api private\n         */\n        Transport.prototype.packet = function (packet) {\n            this.send(io.parser.encodePacket(packet));\n        };\n        /**\n         * Send the received heartbeat message back to server. So the server\n         * knows we are still connected.\n         *\n         * @param {String} heartbeat Heartbeat response from the server.\n         * @api private\n         */\n        Transport.prototype.onHeartbeat = function (heartbeat) {\n            this.packet({ type: 'heartbeat' });\n        };\n        /**\n         * Called when the transport opens.\n         *\n         * @api private\n         */\n        Transport.prototype.onOpen = function () {\n            this.isOpen = true;\n            this.clearCloseTimeout();\n            this.socket.onOpen();\n        };\n        /**\n         * Notifies the base when the connection with the Socket.IO server\n         * has been disconnected.\n         *\n         * @api private\n         */\n        Transport.prototype.onClose = function () {\n            var self = this;\n            /* FIXME: reopen delay causing an infinity loop\n            this.reopenTimeout = setTimeout(function () {\n              self.open();\n            }, this.socket.options['reopen delay']);*/\n            this.isOpen = false;\n            this.socket.onClose();\n            this.onDisconnect();\n        };\n        /**\n         * Generates a connection url based on the Socket.IO URL Protocol.\n         * See <https://github.com/learnboost/socket.io-node/> for more details.\n         *\n         * @returns {String} Connection url\n         * @api private\n         */\n        Transport.prototype.prepareUrl = function () {\n            var options = this.socket.options;\n            return this.scheme() + '://'\n                + options.host + ':' + options.port + '/'\n                + options.resource + '/' + io.protocol\n                + '/' + this.name + '/' + this.sessid;\n        };\n        /**\n         * Checks if the transport is ready to start a connection.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Transport.prototype.ready = function (socket, fn) {\n            fn.call(this);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.Socket = Socket;\n        /**\n         * Create a new `Socket.IO client` which can establish a persistent\n         * connection with a Socket.IO enabled server.\n         *\n         * @api public\n         */\n        function Socket(options) {\n            this.options = {\n                port: 80,\n                secure: false,\n                document: 'document' in global ? document : false,\n                resource: 'socket.io',\n                transports: io.transports,\n                'connect timeout': 10000,\n                'try multiple transports': true,\n                'reconnect': true,\n                'reconnection delay': 500,\n                'reconnection limit': Infinity,\n                'reopen delay': 3000,\n                'max reconnection attempts': 10,\n                'sync disconnect on unload': false,\n                'auto connect': true,\n                'flash policy port': 10843,\n                'manualFlush': false\n            };\n            io.util.merge(this.options, options);\n            this.connected = false;\n            this.open = false;\n            this.connecting = false;\n            this.reconnecting = false;\n            this.namespaces = {};\n            this.buffer = [];\n            this.doBuffer = false;\n            if (this.options['sync disconnect on unload'] &&\n                (!this.isXDomain() || io.util.ua.hasCORS)) {\n                var self = this;\n                io.util.on(global, 'beforeunload', function () {\n                    self.disconnectSync();\n                }, false);\n            }\n            if (this.options['auto connect']) {\n                this.connect();\n            }\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Socket, io.EventEmitter);\n        /**\n         * Returns a namespace listener/emitter for this socket\n         *\n         * @api public\n         */\n        Socket.prototype.of = function (name) {\n            if (!this.namespaces[name]) {\n                this.namespaces[name] = new io.SocketNamespace(this, name);\n                if (name !== '') {\n                    this.namespaces[name].packet({ type: 'connect' });\n                }\n            }\n            return this.namespaces[name];\n        };\n        /**\n         * Emits the given event to the Socket and all namespaces\n         *\n         * @api private\n         */\n        Socket.prototype.publish = function () {\n            this.emit.apply(this, arguments);\n            var nsp;\n            for (var i in this.namespaces) {\n                if (this.namespaces.hasOwnProperty(i)) {\n                    nsp = this.of(i);\n                    nsp.$emit.apply(nsp, arguments);\n                }\n            }\n        };\n        /**\n         * Performs the handshake\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        Socket.prototype.handshake = function (fn) {\n            var self = this, options = this.options;\n            function complete(data) {\n                if (data instanceof Error) {\n                    self.connecting = false;\n                    self.onError(data.message);\n                }\n                else {\n                    fn.apply(null, data.split(':'));\n                }\n            }\n            ;\n            var url = [\n                'http' + (options.secure ? 's' : '') + ':/',\n                options.host + ':' + options.port,\n                options.resource,\n                io.protocol,\n                io.util.query(this.options.query, 't=' + +new Date)\n            ].join('/');\n            if (this.isXDomain() && !io.util.ua.hasCORS) {\n                var insertAt = document.getElementsByTagName('script')[0], script = document.createElement('script');\n                script.src = url + '&jsonp=' + io.j.length;\n                insertAt.parentNode.insertBefore(script, insertAt);\n                io.j.push(function (data) {\n                    complete(data);\n                    script.parentNode.removeChild(script);\n                });\n            }\n            else {\n                var xhr = io.util.request();\n                xhr.open('GET', url, true);\n                if (this.isXDomain()) {\n                    xhr.withCredentials = true;\n                }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        xhr.onreadystatechange = empty;\n                        if (xhr.status == 200) {\n                            complete(xhr.responseText);\n                        }\n                        else if (xhr.status == 403) {\n                            self.onError(xhr.responseText);\n                        }\n                        else {\n                            self.connecting = false;\n                            !self.reconnecting && self.onError(xhr.responseText);\n                        }\n                    }\n                };\n                xhr.send(null);\n            }\n        };\n        /**\n         * Find an available transport based on the options supplied in the constructor.\n         *\n         * @api private\n         */\n        Socket.prototype.getTransport = function (override) {\n            var transports = override || this.transports, match;\n            for (var i = 0, transport; transport = transports[i]; i++) {\n                if (io.Transport[transport]\n                    && io.Transport[transport].check(this)\n                    && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {\n                    return new io.Transport[transport](this, this.sessionid);\n                }\n            }\n            return null;\n        };\n        /**\n         * Connects to the server.\n         *\n         * @param {Function} [fn] Callback.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.connect = function (fn) {\n            if (this.connecting) {\n                return this;\n            }\n            var self = this;\n            self.connecting = true;\n            this.handshake(function (sid, heartbeat, close, transports) {\n                self.sessionid = sid;\n                self.closeTimeout = close * 1000;\n                self.heartbeatTimeout = heartbeat * 1000;\n                if (!self.transports)\n                    self.transports = self.origTransports = (transports ? io.util.intersect(transports.split(','), self.options.transports) : self.options.transports);\n                self.setHeartbeatTimeout();\n                function connect(transports) {\n                    if (self.transport)\n                        self.transport.clearTimeouts();\n                    self.transport = self.getTransport(transports);\n                    if (!self.transport)\n                        return self.publish('connect_failed');\n                    // once the transport is ready\n                    self.transport.ready(self, function () {\n                        self.connecting = true;\n                        self.publish('connecting', self.transport.name);\n                        self.transport.open();\n                        if (self.options['connect timeout']) {\n                            self.connectTimeoutTimer = setTimeout(function () {\n                                if (!self.connected) {\n                                    self.connecting = false;\n                                    if (self.options['try multiple transports']) {\n                                        var remaining = self.transports;\n                                        while (remaining.length > 0 && remaining.splice(0, 1)[0] !=\n                                            self.transport.name) { }\n                                        if (remaining.length) {\n                                            connect(remaining);\n                                        }\n                                        else {\n                                            self.publish('connect_failed');\n                                        }\n                                    }\n                                }\n                            }, self.options['connect timeout']);\n                        }\n                    });\n                }\n                connect(self.transports);\n                self.once('connect', function () {\n                    clearTimeout(self.connectTimeoutTimer);\n                    fn && typeof fn == 'function' && fn();\n                });\n            });\n            return this;\n        };\n        /**\n         * Clears and sets a new heartbeat timeout using the value given by the\n         * server during the handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.setHeartbeatTimeout = function () {\n            clearTimeout(this.heartbeatTimeoutTimer);\n            if (this.transport && !this.transport.heartbeats())\n                return;\n            var self = this;\n            this.heartbeatTimeoutTimer = setTimeout(function () {\n                self.transport.onClose();\n            }, this.heartbeatTimeout);\n        };\n        /**\n         * Sends a message.\n         *\n         * @param {Object} data packet.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.packet = function (data) {\n            if (this.connected && !this.doBuffer) {\n                this.transport.packet(data);\n            }\n            else {\n                this.buffer.push(data);\n            }\n            return this;\n        };\n        /**\n         * Sets buffer state\n         *\n         * @api private\n         */\n        Socket.prototype.setBuffer = function (v) {\n            this.doBuffer = v;\n            if (!v && this.connected && this.buffer.length) {\n                if (!this.options['manualFlush']) {\n                    this.flushBuffer();\n                }\n            }\n        };\n        /**\n         * Flushes the buffer data over the wire.\n         * To be invoked manually when 'manualFlush' is set to true.\n         *\n         * @api public\n         */\n        Socket.prototype.flushBuffer = function () {\n            this.transport.payload(this.buffer);\n            this.buffer = [];\n        };\n        /**\n         * Disconnect the established connect.\n         *\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.disconnect = function () {\n            if (this.connected || this.connecting) {\n                if (this.open) {\n                    this.of('').packet({ type: 'disconnect' });\n                }\n                // handle disconnection immediately\n                this.onDisconnect('booted');\n            }\n            return this;\n        };\n        /**\n         * Disconnects the socket with a sync XHR.\n         *\n         * @api private\n         */\n        Socket.prototype.disconnectSync = function () {\n            // ensure disconnection\n            var xhr = io.util.request();\n            var uri = [\n                'http' + (this.options.secure ? 's' : '') + ':/',\n                this.options.host + ':' + this.options.port,\n                this.options.resource,\n                io.protocol,\n                '',\n                this.sessionid\n            ].join('/') + '/?disconnect=1';\n            xhr.open('GET', uri, false);\n            xhr.send(null);\n            // handle disconnection immediately\n            this.onDisconnect('booted');\n        };\n        /**\n         * Check if we need to use cross domain enabled transports. Cross domain would\n         * be a different port or different domain name.\n         *\n         * @returns {Boolean}\n         * @api private\n         */\n        Socket.prototype.isXDomain = function () {\n            var port = global.location.port ||\n                ('https:' == global.location.protocol ? 443 : 80);\n            return this.options.host !== global.location.hostname\n                || this.options.port != port;\n        };\n        /**\n         * Called upon handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.onConnect = function () {\n            if (!this.connected) {\n                this.connected = true;\n                this.connecting = false;\n                if (!this.doBuffer) {\n                    // make sure to flush the buffer\n                    this.setBuffer(false);\n                }\n                this.emit('connect');\n            }\n        };\n        /**\n         * Called when the transport opens\n         *\n         * @api private\n         */\n        Socket.prototype.onOpen = function () {\n            this.open = true;\n        };\n        /**\n         * Called when the transport closes.\n         *\n         * @api private\n         */\n        Socket.prototype.onClose = function () {\n            this.open = false;\n            clearTimeout(this.heartbeatTimeoutTimer);\n        };\n        /**\n         * Called when the transport first opens a connection\n         *\n         * @param text\n         */\n        Socket.prototype.onPacket = function (packet) {\n            this.of(packet.endpoint).onPacket(packet);\n        };\n        /**\n         * Handles an error.\n         *\n         * @api private\n         */\n        Socket.prototype.onError = function (err) {\n            if (err && err.advice) {\n                if (err.advice === 'reconnect' && (this.connected || this.connecting)) {\n                    this.disconnect();\n                    if (this.options.reconnect) {\n                        this.reconnect();\n                    }\n                }\n            }\n            this.publish('error', err && err.reason ? err.reason : err);\n        };\n        /**\n         * Called when the transport disconnects.\n         *\n         * @api private\n         */\n        Socket.prototype.onDisconnect = function (reason) {\n            var wasConnected = this.connected, wasConnecting = this.connecting;\n            this.connected = false;\n            this.connecting = false;\n            this.open = false;\n            if (wasConnected || wasConnecting) {\n                this.transport.close();\n                this.transport.clearTimeouts();\n                if (wasConnected) {\n                    this.publish('disconnect', reason);\n                    if ('booted' != reason && this.options.reconnect && !this.reconnecting) {\n                        this.reconnect();\n                    }\n                }\n            }\n        };\n        /**\n         * Called upon reconnection.\n         *\n         * @api private\n         */\n        Socket.prototype.reconnect = function () {\n            this.reconnecting = true;\n            this.reconnectionAttempts = 0;\n            this.reconnectionDelay = this.options['reconnection delay'];\n            var self = this, maxAttempts = this.options['max reconnection attempts'], tryMultiple = this.options['try multiple transports'], limit = this.options['reconnection limit'];\n            function reset() {\n                if (self.connected) {\n                    for (var i in self.namespaces) {\n                        if (self.namespaces.hasOwnProperty(i) && '' !== i) {\n                            self.namespaces[i].packet({ type: 'connect' });\n                        }\n                    }\n                    self.publish('reconnect', self.transport.name, self.reconnectionAttempts);\n                }\n                clearTimeout(self.reconnectionTimer);\n                self.removeListener('connect_failed', maybeReconnect);\n                self.removeListener('connect', maybeReconnect);\n                self.reconnecting = false;\n                delete self.reconnectionAttempts;\n                delete self.reconnectionDelay;\n                delete self.reconnectionTimer;\n                delete self.redoTransports;\n                self.options['try multiple transports'] = tryMultiple;\n            }\n            ;\n            function maybeReconnect() {\n                if (!self.reconnecting) {\n                    return;\n                }\n                if (self.connected) {\n                    return reset();\n                }\n                ;\n                if (self.connecting && self.reconnecting) {\n                    return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);\n                }\n                if (self.reconnectionAttempts++ >= maxAttempts) {\n                    if (!self.redoTransports) {\n                        self.on('connect_failed', maybeReconnect);\n                        self.options['try multiple transports'] = true;\n                        self.transports = self.origTransports;\n                        self.transport = self.getTransport();\n                        self.redoTransports = true;\n                        self.connect();\n                    }\n                    else {\n                        self.publish('reconnect_failed');\n                        reset();\n                    }\n                }\n                else {\n                    if (self.reconnectionDelay < limit) {\n                        self.reconnectionDelay *= 2; // exponential back off\n                    }\n                    self.connect();\n                    self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);\n                    self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);\n                }\n            }\n            ;\n            this.options['try multiple transports'] = false;\n            this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);\n            this.on('connect', maybeReconnect);\n        };\n    })(io, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.SocketNamespace = SocketNamespace;\n        /**\n         * Socket namespace constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        function SocketNamespace(socket, name) {\n            this.socket = socket;\n            this.name = name || '';\n            this.flags = {};\n            this.json = new Flag(this, 'json');\n            this.ackPackets = 0;\n            this.acks = {};\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(SocketNamespace, io.EventEmitter);\n        /**\n         * Copies emit since we override it\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\n        /**\n         * Creates a new namespace, by proxying the request to the socket. This\n         * allows us to use the synax as we do on the server.\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.of = function () {\n            return this.socket.of.apply(this.socket, arguments);\n        };\n        /**\n         * Sends a packet.\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.packet = function (packet) {\n            packet.endpoint = this.name;\n            this.socket.packet(packet);\n            this.flags = {};\n            return this;\n        };\n        /**\n         * Sends a message\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.send = function (data, fn) {\n            var packet = {\n                type: this.flags.json ? 'json' : 'message',\n                data: data\n            };\n            if ('function' == typeof fn) {\n                packet.id = ++this.ackPackets;\n                packet.ack = true;\n                this.acks[packet.id] = fn;\n            }\n            return this.packet(packet);\n        };\n        /**\n         * Emits an event\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.emit = function (name) {\n            var args = Array.prototype.slice.call(arguments, 1), lastArg = args[args.length - 1], packet = {\n                type: 'event',\n                name: name\n            };\n            if ('function' == typeof lastArg) {\n                packet.id = ++this.ackPackets;\n                packet.ack = 'data';\n                this.acks[packet.id] = lastArg;\n                args = args.slice(0, args.length - 1);\n            }\n            packet.args = args;\n            return this.packet(packet);\n        };\n        /**\n         * Disconnects the namespace\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.disconnect = function () {\n            if (this.name === '') {\n                this.socket.disconnect();\n            }\n            else {\n                this.packet({ type: 'disconnect' });\n                this.$emit('disconnect');\n            }\n            return this;\n        };\n        /**\n         * Handles a packet\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.onPacket = function (packet) {\n            var self = this;\n            function ack() {\n                self.packet({\n                    type: 'ack',\n                    args: io.util.toArray(arguments),\n                    ackId: packet.id\n                });\n            }\n            ;\n            switch (packet.type) {\n                case 'connect':\n                    this.$emit('connect');\n                    break;\n                case 'disconnect':\n                    if (this.name === '') {\n                        this.socket.onDisconnect(packet.reason || 'booted');\n                    }\n                    else {\n                        this.$emit('disconnect', packet.reason);\n                    }\n                    break;\n                case 'message':\n                case 'json':\n                    var params = ['message', packet.data];\n                    if (packet.ack == 'data') {\n                        params.push(ack);\n                    }\n                    else if (packet.ack) {\n                        this.packet({ type: 'ack', ackId: packet.id });\n                    }\n                    this.$emit.apply(this, params);\n                    break;\n                case 'event':\n                    var params = [packet.name].concat(packet.args);\n                    if (packet.ack == 'data')\n                        params.push(ack);\n                    this.$emit.apply(this, params);\n                    break;\n                case 'ack':\n                    if (this.acks[packet.ackId]) {\n                        this.acks[packet.ackId].apply(this, packet.args);\n                        delete this.acks[packet.ackId];\n                    }\n                    break;\n                case 'error':\n                    if (packet.advice) {\n                        this.socket.onError(packet);\n                    }\n                    else {\n                        if (packet.reason == 'unauthorized') {\n                            this.$emit('connect_failed', packet.reason);\n                        }\n                        else {\n                            this.$emit('error', packet.reason);\n                        }\n                    }\n                    break;\n            }\n        };\n        /**\n         * Flag interface.\n         *\n         * @api private\n         */\n        function Flag(nsp, name) {\n            this.namespace = nsp;\n            this.name = name;\n        }\n        ;\n        /**\n         * Send a message\n         *\n         * @api public\n         */\n        Flag.prototype.send = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.send.apply(this.namespace, arguments);\n        };\n        /**\n         * Emit an event\n         *\n         * @api public\n         */\n        Flag.prototype.emit = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.emit.apply(this.namespace, arguments);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.websocket = WS;\n        /**\n         * The WebSocket transport uses the HTML5 WebSocket API to establish an\n         * persistent connection with the Socket.IO server. This transport will also\n         * be inherited by the FlashSocket fallback as it provides a API compatible\n         * polyfill for the WebSockets.\n         *\n         * @constructor\n         * @extends {io.Transport}\n         * @api public\n         */\n        function WS(socket) {\n            io.Transport.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(WS, io.Transport);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        WS.prototype.name = 'websocket';\n        /**\n         * Initializes a new `WebSocket` connection with the Socket.IO server. We attach\n         * all the appropriate listeners to handle the responses from the server.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.open = function () {\n            var query = io.util.query(this.socket.options.query), self = this, Socket;\n            if (!Socket) {\n                Socket = global.MozWebSocket || global.WebSocket;\n            }\n            this.websocket = new Socket(this.prepareUrl() + query);\n            this.websocket.onopen = function () {\n                self.onOpen();\n                self.socket.setBuffer(false);\n            };\n            this.websocket.onmessage = function (ev) {\n                self.onData(ev.data);\n            };\n            this.websocket.onclose = function () {\n                self.onClose();\n                self.socket.setBuffer(true);\n            };\n            this.websocket.onerror = function (e) {\n                self.onError(e);\n            };\n            return this;\n        };\n        /**\n         * Send a message to the Socket.IO server. The message will automatically be\n         * encoded in the correct message format.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        // Do to a bug in the current IDevices browser, we need to wrap the send in a\n        // setTimeout, when they resume from sleeping the browser will crash if\n        // we don't allow the browser time to detect the socket has been closed\n        if (io.util.ua.iDevice) {\n            WS.prototype.send = function (data) {\n                var self = this;\n                setTimeout(function () {\n                    self.websocket.send(data);\n                }, 0);\n                return this;\n            };\n        }\n        else {\n            WS.prototype.send = function (data) {\n                this.websocket.send(data);\n                return this;\n            };\n        }\n        /**\n         * Payload\n         *\n         * @api private\n         */\n        WS.prototype.payload = function (arr) {\n            for (var i = 0, l = arr.length; i < l; i++) {\n                this.packet(arr[i]);\n            }\n            return this;\n        };\n        /**\n         * Disconnect the established `WebSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.close = function () {\n            this.websocket.close();\n            return this;\n        };\n        /**\n         * Handle the errors that `WebSocket` might be giving when we\n         * are attempting to connect or send messages.\n         *\n         * @param {Error} e The error.\n         * @api private\n         */\n        WS.prototype.onError = function (e) {\n            this.socket.onError(e);\n        };\n        /**\n         * Returns the appropriate scheme for the URI generation.\n         *\n         * @api private\n         */\n        WS.prototype.scheme = function () {\n            return this.socket.options.secure ? 'wss' : 'ws';\n        };\n        /**\n         * Checks if the browser has support for native `WebSockets` and that\n         * it's not the polyfill created for the FlashSocket transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        WS.check = function () {\n            return ('WebSocket' in global && !('__addTask' in WebSocket))\n                || 'MozWebSocket' in global;\n        };\n        /**\n         * Check if the `WebSocket` transport support cross domain communications.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        WS.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('websocket');\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.flashsocket = Flashsocket;\n        /**\n         * The FlashSocket transport. This is a API wrapper for the HTML5 WebSocket\n         * specification. It uses a .swf file to communicate with the server. If you want\n         * to serve the .swf file from a other server than where the Socket.IO script is\n         * coming from you need to use the insecure version of the .swf. More information\n         * about this can be found on the github page.\n         *\n         * @constructor\n         * @extends {io.Transport.websocket}\n         * @api public\n         */\n        function Flashsocket() {\n            io.Transport.websocket.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(Flashsocket, io.Transport.websocket);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        Flashsocket.prototype.name = 'flashsocket';\n        /**\n         * Disconnect the established `FlashSocket` connection. This is done by adding a\n         * new task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.open = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.open.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Sends a message to the Socket.IO server. This is done by adding a new\n         * task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.send = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.send.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Disconnects the established `FlashSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.close = function () {\n            WebSocket.__tasks.length = 0;\n            io.Transport.websocket.prototype.close.call(this);\n            return this;\n        };\n        /**\n         * The WebSocket fall back needs to append the flash container to the body\n         * element, so we need to make sure we have access to it. Or defer the call\n         * until we are sure there is a body element.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Flashsocket.prototype.ready = function (socket, fn) {\n            function init() {\n                var options = socket.options, port = options['flash policy port'], path = [\n                    'http' + (options.secure ? 's' : '') + ':/',\n                    options.host + ':' + options.port,\n                    options.resource,\n                    'static/flashsocket',\n                    'WebSocketMain' + (socket.isXDomain() ? 'Insecure' : '') + '.swf'\n                ];\n                // Only start downloading the swf file when the checked that this browser\n                // actually supports it\n                if (!Flashsocket.loaded) {\n                    if (typeof WEB_SOCKET_SWF_LOCATION === 'undefined') {\n                        // Set the correct file based on the XDomain settings\n                        WEB_SOCKET_SWF_LOCATION = path.join('/');\n                    }\n                    if (port !== 843) {\n                        WebSocket.loadFlashPolicyFile('xmlsocket://' + options.host + ':' + port);\n                    }\n                    WebSocket.__initialize();\n                    Flashsocket.loaded = true;\n                }\n                fn.call(self);\n            }\n            var self = this;\n            if (document.body)\n                return init();\n            io.util.load(init);\n        };\n        /**\n         * Check if the FlashSocket transport is supported as it requires that the Adobe\n         * Flash Player plug-in version `10.0.0` or greater is installed. And also check if\n         * the polyfill is correctly loaded.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.check = function () {\n            if (typeof WebSocket == 'undefined'\n                || !('__initialize' in WebSocket) || !swfobject)\n                return false;\n            return swfobject.getFlashPlayerVersion().major >= 10;\n        };\n        /**\n         * Check if the FlashSocket transport can be used as cross domain / cross origin\n         * transport. Because we can't see which type (secure or insecure) of .swf is used\n         * we will just return true.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Disable AUTO_INITIALIZATION\n         */\n        if (typeof window != 'undefined') {\n            // NB: this in \"window\" scope, but doing so actually breaks it.\n            //WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = true;\n        }\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('flashsocket');\n    })(io.Transport, io);\n    /*\tSWFObject v2.2 <http://code.google.com/p/swfobject/>\n        is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>\n    */\n    if ('undefined' != typeof window) {\n        var swfobject = function () { var D = \"undefined\", r = \"object\", S = \"Shockwave Flash\", W = \"ShockwaveFlash.ShockwaveFlash\", q = \"application/x-shockwave-flash\", R = \"SWFObjectExprInst\", x = \"onreadystatechange\", O = window, j = document, t = navigator, T = false, U = [h], o = [], N = [], I = [], l, Q, E, B, J = false, a = false, n, G, m = true, M = function () { var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D, ah = t.userAgent.toLowerCase(), Y = t.platform.toLowerCase(), ae = Y ? /win/.test(Y) : /win/.test(ah), ac = Y ? /mac/.test(Y) : /mac/.test(ah), af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/, \"$1\")) : false, X = !+\"\\v1\", ag = [0, 0, 0], ab = null; if (typeof t.plugins != D && typeof t.plugins[S] == r) {\n            ab = t.plugins[S].description;\n            if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {\n                T = true;\n                X = false;\n                ab = ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/, \"$1\");\n                ag[0] = parseInt(ab.replace(/^(.*)\\..*$/, \"$1\"), 10);\n                ag[1] = parseInt(ab.replace(/^.*\\.(.*)\\s.*$/, \"$1\"), 10);\n                ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, \"$1\"), 10) : 0;\n            }\n        }\n        else {\n            if (typeof O[(['Active'].concat('Object').join('X'))] != D) {\n                try {\n                    var ad = new window[(['Active'].concat('Object').join('X'))](W);\n                    if (ad) {\n                        ab = ad.GetVariable(\"$version\");\n                        if (ab) {\n                            X = true;\n                            ab = ab.split(\" \")[1].split(\",\");\n                            ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                        }\n                    }\n                }\n                catch (Z) { }\n            }\n        } return { w3: aa, pv: ag, wk: af, ie: X, win: ae, mac: ac }; }(), k = function () { if (!M.w3) {\n            return;\n        } if ((typeof j.readyState != D && j.readyState == \"complete\") || (typeof j.readyState == D && (j.getElementsByTagName(\"body\")[0] || j.body))) {\n            f();\n        } if (!J) {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"DOMContentLoaded\", f, false);\n            }\n            if (M.ie && M.win) {\n                j.attachEvent(x, function () { if (j.readyState == \"complete\") {\n                    j.detachEvent(x, arguments.callee);\n                    f();\n                } });\n                if (O == top) {\n                    (function () { if (J) {\n                        return;\n                    } try {\n                        j.documentElement.doScroll(\"left\");\n                    }\n                    catch (X) {\n                        setTimeout(arguments.callee, 0);\n                        return;\n                    } f(); })();\n                }\n            }\n            if (M.wk) {\n                (function () { if (J) {\n                    return;\n                } if (!/loaded|complete/.test(j.readyState)) {\n                    setTimeout(arguments.callee, 0);\n                    return;\n                } f(); })();\n            }\n            s(f);\n        } }(); function f() { if (J) {\n            return;\n        } try {\n            var Z = j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));\n            Z.parentNode.removeChild(Z);\n        }\n        catch (aa) {\n            return;\n        } J = true; var X = U.length; for (var Y = 0; Y < X; Y++) {\n            U[Y]();\n        } } function K(X) { if (J) {\n            X();\n        }\n        else {\n            U[U.length] = X;\n        } } function s(Y) { if (typeof O.addEventListener != D) {\n            O.addEventListener(\"load\", Y, false);\n        }\n        else {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"load\", Y, false);\n            }\n            else {\n                if (typeof O.attachEvent != D) {\n                    i(O, \"onload\", Y);\n                }\n                else {\n                    if (typeof O.onload == \"function\") {\n                        var X = O.onload;\n                        O.onload = function () { X(); Y(); };\n                    }\n                    else {\n                        O.onload = Y;\n                    }\n                }\n            }\n        } } function h() { if (T) {\n            V();\n        }\n        else {\n            H();\n        } } function V() { var X = j.getElementsByTagName(\"body\")[0]; var aa = C(r); aa.setAttribute(\"type\", q); var Z = X.appendChild(aa); if (Z) {\n            var Y = 0;\n            (function () { if (typeof Z.GetVariable != D) {\n                var ab = Z.GetVariable(\"$version\");\n                if (ab) {\n                    ab = ab.split(\" \")[1].split(\",\");\n                    M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                }\n            }\n            else {\n                if (Y < 10) {\n                    Y++;\n                    setTimeout(arguments.callee, 10);\n                    return;\n                }\n            } X.removeChild(aa); Z = null; H(); })();\n        }\n        else {\n            H();\n        } } function H() { var ag = o.length; if (ag > 0) {\n            for (var af = 0; af < ag; af++) {\n                var Y = o[af].id;\n                var ab = o[af].callbackFn;\n                var aa = { success: false, id: Y };\n                if (M.pv[0] > 0) {\n                    var ae = c(Y);\n                    if (ae) {\n                        if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {\n                            w(Y, true);\n                            if (ab) {\n                                aa.success = true;\n                                aa.ref = z(Y);\n                                ab(aa);\n                            }\n                        }\n                        else {\n                            if (o[af].expressInstall && A()) {\n                                var ai = {};\n                                ai.data = o[af].expressInstall;\n                                ai.width = ae.getAttribute(\"width\") || \"0\";\n                                ai.height = ae.getAttribute(\"height\") || \"0\";\n                                if (ae.getAttribute(\"class\")) {\n                                    ai.styleclass = ae.getAttribute(\"class\");\n                                }\n                                if (ae.getAttribute(\"align\")) {\n                                    ai.align = ae.getAttribute(\"align\");\n                                }\n                                var ah = {};\n                                var X = ae.getElementsByTagName(\"param\");\n                                var ac = X.length;\n                                for (var ad = 0; ad < ac; ad++) {\n                                    if (X[ad].getAttribute(\"name\").toLowerCase() != \"movie\") {\n                                        ah[X[ad].getAttribute(\"name\")] = X[ad].getAttribute(\"value\");\n                                    }\n                                }\n                                P(ai, ah, Y, ab);\n                            }\n                            else {\n                                p(ae);\n                                if (ab) {\n                                    ab(aa);\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    w(Y, true);\n                    if (ab) {\n                        var Z = z(Y);\n                        if (Z && typeof Z.SetVariable != D) {\n                            aa.success = true;\n                            aa.ref = Z;\n                        }\n                        ab(aa);\n                    }\n                }\n            }\n        } } function z(aa) { var X = null; var Y = c(aa); if (Y && Y.nodeName == \"OBJECT\") {\n            if (typeof Y.SetVariable != D) {\n                X = Y;\n            }\n            else {\n                var Z = Y.getElementsByTagName(r)[0];\n                if (Z) {\n                    X = Z;\n                }\n            }\n        } return X; } function A() { return !a && F(\"6.0.65\") && (M.win || M.mac) && !(M.wk && M.wk < 312); } function P(aa, ab, X, Z) { a = true; E = Z || null; B = { success: false, id: X }; var ae = c(X); if (ae) {\n            if (ae.nodeName == \"OBJECT\") {\n                l = g(ae);\n                Q = null;\n            }\n            else {\n                l = ae;\n                Q = X;\n            }\n            aa.id = R;\n            if (typeof aa.width == D || (!/%$/.test(aa.width) && parseInt(aa.width, 10) < 310)) {\n                aa.width = \"310\";\n            }\n            if (typeof aa.height == D || (!/%$/.test(aa.height) && parseInt(aa.height, 10) < 137)) {\n                aa.height = \"137\";\n            }\n            j.title = j.title.slice(0, 47) + \" - Flash Player Installation\";\n            var ad = M.ie && M.win ? (['Active'].concat('').join('X')) : \"PlugIn\", ac = \"MMredirectURL=\" + O.location.toString().replace(/&/g, \"%26\") + \"&MMplayerType=\" + ad + \"&MMdoctitle=\" + j.title;\n            if (typeof ab.flashvars != D) {\n                ab.flashvars += \"&\" + ac;\n            }\n            else {\n                ab.flashvars = ac;\n            }\n            if (M.ie && M.win && ae.readyState != 4) {\n                var Y = C(\"div\");\n                X += \"SWFObjectNew\";\n                Y.setAttribute(\"id\", X);\n                ae.parentNode.insertBefore(Y, ae);\n                ae.style.display = \"none\";\n                (function () { if (ae.readyState == 4) {\n                    ae.parentNode.removeChild(ae);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            u(aa, ab, X);\n        } } function p(Y) { if (M.ie && M.win && Y.readyState != 4) {\n            var X = C(\"div\");\n            Y.parentNode.insertBefore(X, Y);\n            X.parentNode.replaceChild(g(Y), X);\n            Y.style.display = \"none\";\n            (function () { if (Y.readyState == 4) {\n                Y.parentNode.removeChild(Y);\n            }\n            else {\n                setTimeout(arguments.callee, 10);\n            } })();\n        }\n        else {\n            Y.parentNode.replaceChild(g(Y), Y);\n        } } function g(ab) { var aa = C(\"div\"); if (M.win && M.ie) {\n            aa.innerHTML = ab.innerHTML;\n        }\n        else {\n            var Y = ab.getElementsByTagName(r)[0];\n            if (Y) {\n                var ad = Y.childNodes;\n                if (ad) {\n                    var X = ad.length;\n                    for (var Z = 0; Z < X; Z++) {\n                        if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == \"PARAM\") && !(ad[Z].nodeType == 8)) {\n                            aa.appendChild(ad[Z].cloneNode(true));\n                        }\n                    }\n                }\n            }\n        } return aa; } function u(ai, ag, Y) { var X, aa = c(Y); if (M.wk && M.wk < 312) {\n            return X;\n        } if (aa) {\n            if (typeof ai.id == D) {\n                ai.id = Y;\n            }\n            if (M.ie && M.win) {\n                var ah = \"\";\n                for (var ae in ai) {\n                    if (ai[ae] != Object.prototype[ae]) {\n                        if (ae.toLowerCase() == \"data\") {\n                            ag.movie = ai[ae];\n                        }\n                        else {\n                            if (ae.toLowerCase() == \"styleclass\") {\n                                ah += ' class=\"' + ai[ae] + '\"';\n                            }\n                            else {\n                                if (ae.toLowerCase() != \"classid\") {\n                                    ah += \" \" + ae + '=\"' + ai[ae] + '\"';\n                                }\n                            }\n                        }\n                    }\n                }\n                var af = \"\";\n                for (var ad in ag) {\n                    if (ag[ad] != Object.prototype[ad]) {\n                        af += '<param name=\"' + ad + '\" value=\"' + ag[ad] + '\" />';\n                    }\n                }\n                aa.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"' + ah + \">\" + af + \"</object>\";\n                N[N.length] = ai.id;\n                X = c(ai.id);\n            }\n            else {\n                var Z = C(r);\n                Z.setAttribute(\"type\", q);\n                for (var ac in ai) {\n                    if (ai[ac] != Object.prototype[ac]) {\n                        if (ac.toLowerCase() == \"styleclass\") {\n                            Z.setAttribute(\"class\", ai[ac]);\n                        }\n                        else {\n                            if (ac.toLowerCase() != \"classid\") {\n                                Z.setAttribute(ac, ai[ac]);\n                            }\n                        }\n                    }\n                }\n                for (var ab in ag) {\n                    if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != \"movie\") {\n                        e(Z, ab, ag[ab]);\n                    }\n                }\n                aa.parentNode.replaceChild(Z, aa);\n                X = Z;\n            }\n        } return X; } function e(Z, X, Y) { var aa = C(\"param\"); aa.setAttribute(\"name\", X); aa.setAttribute(\"value\", Y); Z.appendChild(aa); } function y(Y) { var X = c(Y); if (X && X.nodeName == \"OBJECT\") {\n            if (M.ie && M.win) {\n                X.style.display = \"none\";\n                (function () { if (X.readyState == 4) {\n                    b(Y);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            else {\n                X.parentNode.removeChild(X);\n            }\n        } } function b(Z) { var Y = c(Z); if (Y) {\n            for (var X in Y) {\n                if (typeof Y[X] == \"function\") {\n                    Y[X] = null;\n                }\n            }\n            Y.parentNode.removeChild(Y);\n        } } function c(Z) { var X = null; try {\n            X = j.getElementById(Z);\n        }\n        catch (Y) { } return X; } function C(X) { return j.createElement(X); } function i(Z, X, Y) { Z.attachEvent(X, Y); I[I.length] = [Z, X, Y]; } function F(Z) { var Y = M.pv, X = Z.split(\".\"); X[0] = parseInt(X[0], 10); X[1] = parseInt(X[1], 10) || 0; X[2] = parseInt(X[2], 10) || 0; return (Y[0] > X[0] || (Y[0] == X[0] && Y[1] > X[1]) || (Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2])) ? true : false; } function v(ac, Y, ad, ab) { if (M.ie && M.mac) {\n            return;\n        } var aa = j.getElementsByTagName(\"head\")[0]; if (!aa) {\n            return;\n        } var X = (ad && typeof ad == \"string\") ? ad : \"screen\"; if (ab) {\n            n = null;\n            G = null;\n        } if (!n || G != X) {\n            var Z = C(\"style\");\n            Z.setAttribute(\"type\", \"text/css\");\n            Z.setAttribute(\"media\", X);\n            n = aa.appendChild(Z);\n            if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {\n                n = j.styleSheets[j.styleSheets.length - 1];\n            }\n            G = X;\n        } if (M.ie && M.win) {\n            if (n && typeof n.addRule == r) {\n                n.addRule(ac, Y);\n            }\n        }\n        else {\n            if (n && typeof j.createTextNode != D) {\n                n.appendChild(j.createTextNode(ac + \" {\" + Y + \"}\"));\n            }\n        } } function w(Z, X) { if (!m) {\n            return;\n        } var Y = X ? \"visible\" : \"hidden\"; if (J && c(Z)) {\n            c(Z).style.visibility = Y;\n        }\n        else {\n            v(\"#\" + Z, \"visibility:\" + Y);\n        } } function L(Y) { var Z = /[\\\\\\\"<>\\.;]/; var X = Z.exec(Y) != null; return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y; } var d = function () { if (M.ie && M.win) {\n            window.attachEvent(\"onunload\", function () { var ac = I.length; for (var ab = 0; ab < ac; ab++) {\n                I[ab][0].detachEvent(I[ab][1], I[ab][2]);\n            } var Z = N.length; for (var aa = 0; aa < Z; aa++) {\n                y(N[aa]);\n            } for (var Y in M) {\n                M[Y] = null;\n            } M = null; for (var X in swfobject) {\n                swfobject[X] = null;\n            } swfobject = null; });\n        } }(); return { registerObject: function (ab, X, aa, Z) { if (M.w3 && ab && X) {\n                var Y = {};\n                Y.id = ab;\n                Y.swfVersion = X;\n                Y.expressInstall = aa;\n                Y.callbackFn = Z;\n                o[o.length] = Y;\n                w(ab, false);\n            }\n            else {\n                if (Z) {\n                    Z({ success: false, id: ab });\n                }\n            } }, getObjectById: function (X) { if (M.w3) {\n                return z(X);\n            } }, embedSWF: function (ab, ah, ae, ag, Y, aa, Z, ad, af, ac) { var X = { success: false, id: ah }; if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {\n                w(ah, false);\n                K(function () { ae += \"\"; ag += \"\"; var aj = {}; if (af && typeof af === r) {\n                    for (var al in af) {\n                        aj[al] = af[al];\n                    }\n                } aj.data = ab; aj.width = ae; aj.height = ag; var am = {}; if (ad && typeof ad === r) {\n                    for (var ak in ad) {\n                        am[ak] = ad[ak];\n                    }\n                } if (Z && typeof Z === r) {\n                    for (var ai in Z) {\n                        if (typeof am.flashvars != D) {\n                            am.flashvars += \"&\" + ai + \"=\" + Z[ai];\n                        }\n                        else {\n                            am.flashvars = ai + \"=\" + Z[ai];\n                        }\n                    }\n                } if (F(Y)) {\n                    var an = u(aj, am, ah);\n                    if (aj.id == ah) {\n                        w(ah, true);\n                    }\n                    X.success = true;\n                    X.ref = an;\n                }\n                else {\n                    if (aa && A()) {\n                        aj.data = aa;\n                        P(aj, am, ah, ac);\n                        return;\n                    }\n                    else {\n                        w(ah, true);\n                    }\n                } if (ac) {\n                    ac(X);\n                } });\n            }\n            else {\n                if (ac) {\n                    ac(X);\n                }\n            } }, switchOffAutoHideShow: function () { m = false; }, ua: M, getFlashPlayerVersion: function () { return { major: M.pv[0], minor: M.pv[1], release: M.pv[2] }; }, hasFlashPlayerVersion: F, createSWF: function (Z, Y, X) { if (M.w3) {\n                return u(Z, Y, X);\n            }\n            else {\n                return undefined;\n            } }, showExpressInstall: function (Z, aa, X, Y) { if (M.w3 && A()) {\n                P(Z, aa, X, Y);\n            } }, removeSWF: function (X) { if (M.w3) {\n                y(X);\n            } }, createCSS: function (aa, Z, Y, X) { if (M.w3) {\n                v(aa, Z, Y, X);\n            } }, addDomLoadEvent: K, addLoadEvent: s, getQueryParamValue: function (aa) { var Z = j.location.search || j.location.hash; if (Z) {\n                if (/\\?/.test(Z)) {\n                    Z = Z.split(\"?\")[1];\n                }\n                if (aa == null) {\n                    return L(Z);\n                }\n                var Y = Z.split(\"&\");\n                for (var X = 0; X < Y.length; X++) {\n                    if (Y[X].substring(0, Y[X].indexOf(\"=\")) == aa) {\n                        return L(Y[X].substring((Y[X].indexOf(\"=\") + 1)));\n                    }\n                }\n            } return \"\"; }, expressInstallCallback: function () { if (a) {\n                var X = c(R);\n                if (X && l) {\n                    X.parentNode.replaceChild(l, X);\n                    if (Q) {\n                        w(Q, true);\n                        if (M.ie && M.win) {\n                            l.style.display = \"block\";\n                        }\n                    }\n                    if (E) {\n                        E(B);\n                    }\n                }\n                a = false;\n            } } }; }();\n    }\n    // Copyright: Hiroshi Ichikawa <http://gimite.net/en/>\n    // License: New BSD License\n    // Reference: http://dev.w3.org/html5/websockets/\n    // Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol\n    (function () {\n        if ('undefined' == typeof window || window.WebSocket)\n            return;\n        var console = window.console;\n        if (!console || !console.log || !console.error) {\n            console = { log: function () { }, error: function () { } };\n        }\n        if (!swfobject.hasFlashPlayerVersion(\"10.0.0\")) {\n            console.error(\"Flash Player >= 10.0.0 is required.\");\n            return;\n        }\n        if (location.protocol == \"file:\") {\n            console.error(\"WARNING: web-socket-js doesn't work in file:///... URL \" +\n                \"unless you set Flash Security Settings properly. \" +\n                \"Open the page via Web server i.e. http://...\");\n        }\n        /**\n         * This class represents a faux web socket.\n         * @param {string} url\n         * @param {array or string} protocols\n         * @param {string} proxyHost\n         * @param {int} proxyPort\n         * @param {string} headers\n         */\n        WebSocket = function (url, protocols, proxyHost, proxyPort, headers) {\n            var self = this;\n            self.__id = WebSocket.__nextId++;\n            WebSocket.__instances[self.__id] = self;\n            self.readyState = WebSocket.CONNECTING;\n            self.bufferedAmount = 0;\n            self.__events = {};\n            if (!protocols) {\n                protocols = [];\n            }\n            else if (typeof protocols == \"string\") {\n                protocols = [protocols];\n            }\n            // Uses setTimeout() to make sure __createFlash() runs after the caller sets ws.onopen etc.\n            // Otherwise, when onopen fires immediately, onopen is called before it is set.\n            setTimeout(function () {\n                WebSocket.__addTask(function () {\n                    WebSocket.__flash.create(self.__id, url, protocols, proxyHost || null, proxyPort || 0, headers || null);\n                });\n            }, 0);\n        };\n        /**\n         * Send data to the web socket.\n         * @param {string} data  The data to send to the socket.\n         * @return {boolean}  True for success, false for failure.\n         */\n        WebSocket.prototype.send = function (data) {\n            if (this.readyState == WebSocket.CONNECTING) {\n                throw \"INVALID_STATE_ERR: Web Socket connection has not been established\";\n            }\n            // We use encodeURIComponent() here, because FABridge doesn't work if\n            // the argument includes some characters. We don't use escape() here\n            // because of this:\n            // https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_Functions\n            // But it looks decodeURIComponent(encodeURIComponent(s)) doesn't\n            // preserve all Unicode characters either e.g. \"\\uffff\" in Firefox.\n            // Note by wtritch: Hopefully this will not be necessary using ExternalInterface.  Will require\n            // additional testing.\n            var result = WebSocket.__flash.send(this.__id, encodeURIComponent(data));\n            if (result < 0) { // success\n                return true;\n            }\n            else {\n                this.bufferedAmount += result;\n                return false;\n            }\n        };\n        /**\n         * Close this web socket gracefully.\n         */\n        WebSocket.prototype.close = function () {\n            if (this.readyState == WebSocket.CLOSED || this.readyState == WebSocket.CLOSING) {\n                return;\n            }\n            this.readyState = WebSocket.CLOSING;\n            WebSocket.__flash.close(this.__id);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.addEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events)) {\n                this.__events[type] = [];\n            }\n            this.__events[type].push(listener);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.removeEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events))\n                return;\n            var events = this.__events[type];\n            for (var i = events.length - 1; i >= 0; --i) {\n                if (events[i] === listener) {\n                    events.splice(i, 1);\n                    break;\n                }\n            }\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {Event} event\n         * @return void\n         */\n        WebSocket.prototype.dispatchEvent = function (event) {\n            var events = this.__events[event.type] || [];\n            for (var i = 0; i < events.length; ++i) {\n                events[i](event);\n            }\n            var handler = this[\"on\" + event.type];\n            if (handler)\n                handler(event);\n        };\n        /**\n         * Handles an event from Flash.\n         * @param {Object} flashEvent\n         */\n        WebSocket.prototype.__handleEvent = function (flashEvent) {\n            if (\"readyState\" in flashEvent) {\n                this.readyState = flashEvent.readyState;\n            }\n            if (\"protocol\" in flashEvent) {\n                this.protocol = flashEvent.protocol;\n            }\n            var jsEvent;\n            if (flashEvent.type == \"open\" || flashEvent.type == \"error\") {\n                jsEvent = this.__createSimpleEvent(flashEvent.type);\n            }\n            else if (flashEvent.type == \"close\") {\n                // TODO implement jsEvent.wasClean\n                jsEvent = this.__createSimpleEvent(\"close\");\n            }\n            else if (flashEvent.type == \"message\") {\n                var data = decodeURIComponent(flashEvent.message);\n                jsEvent = this.__createMessageEvent(\"message\", data);\n            }\n            else {\n                throw \"unknown event type: \" + flashEvent.type;\n            }\n            this.dispatchEvent(jsEvent);\n        };\n        WebSocket.prototype.__createSimpleEvent = function (type) {\n            if (document.createEvent && window.Event) {\n                var event = document.createEvent(\"Event\");\n                event.initEvent(type, false, false);\n                return event;\n            }\n            else {\n                return { type: type, bubbles: false, cancelable: false };\n            }\n        };\n        WebSocket.prototype.__createMessageEvent = function (type, data) {\n            if (document.createEvent && window.MessageEvent && !window.opera) {\n                var event = document.createEvent(\"MessageEvent\");\n                event.initMessageEvent(\"message\", false, false, data, null, null, window, null);\n                return event;\n            }\n            else {\n                // IE and Opera, the latter one truncates the data parameter after any 0x00 bytes.\n                return { type: type, data: data, bubbles: false, cancelable: false };\n            }\n        };\n        /**\n         * Define the WebSocket readyState enumeration.\n         */\n        WebSocket.CONNECTING = 0;\n        WebSocket.OPEN = 1;\n        WebSocket.CLOSING = 2;\n        WebSocket.CLOSED = 3;\n        WebSocket.__flash = null;\n        WebSocket.__instances = {};\n        WebSocket.__tasks = [];\n        WebSocket.__nextId = 0;\n        /**\n         * Load a new flash security policy file.\n         * @param {string} url\n         */\n        WebSocket.loadFlashPolicyFile = function (url) {\n            WebSocket.__addTask(function () {\n                WebSocket.__flash.loadManualPolicyFile(url);\n            });\n        };\n        /**\n         * Loads WebSocketMain.swf and creates WebSocketMain object in Flash.\n         */\n        WebSocket.__initialize = function () {\n            if (WebSocket.__flash)\n                return;\n            if (WebSocket.__swfLocation) {\n                // For backword compatibility.\n                window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation;\n            }\n            if (!window.WEB_SOCKET_SWF_LOCATION) {\n                console.error(\"[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf\");\n                return;\n            }\n            var container = document.createElement(\"div\");\n            container.id = \"webSocketContainer\";\n            // Hides Flash box. We cannot use display: none or visibility: hidden because it prevents\n            // Flash from loading at least in IE. So we move it out of the screen at (-100, -100).\n            // But this even doesn't work with Flash Lite (e.g. in Droid Incredible). So with Flash\n            // Lite, we put it at (0, 0). This shows 1x1 box visible at left-top corner but this is\n            // the best we can do as far as we know now.\n            container.style.position = \"absolute\";\n            if (WebSocket.__isFlashLite()) {\n                container.style.left = \"0px\";\n                container.style.top = \"0px\";\n            }\n            else {\n                container.style.left = \"-100px\";\n                container.style.top = \"-100px\";\n            }\n            var holder = document.createElement(\"div\");\n            holder.id = \"webSocketFlash\";\n            container.appendChild(holder);\n            document.body.appendChild(container);\n            // See this article for hasPriority:\n            // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\n            swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION, \"webSocketFlash\", \"1\" /* width */, \"1\" /* height */, \"10.0.0\" /* SWF version */, null, null, { hasPriority: true, swliveconnect: true, allowScriptAccess: \"always\" }, null, function (e) {\n                if (!e.success) {\n                    console.error(\"[WebSocket] swfobject.embedSWF failed\");\n                }\n            });\n        };\n        /**\n         * Called by Flash to notify JS that it's fully loaded and ready\n         * for communication.\n         */\n        WebSocket.__onFlashInitialized = function () {\n            // We need to set a timeout here to avoid round-trip calls\n            // to flash during the initialization process.\n            setTimeout(function () {\n                WebSocket.__flash = document.getElementById(\"webSocketFlash\");\n                WebSocket.__flash.setCallerUrl(location.href);\n                WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);\n                for (var i = 0; i < WebSocket.__tasks.length; ++i) {\n                    WebSocket.__tasks[i]();\n                }\n                WebSocket.__tasks = [];\n            }, 0);\n        };\n        /**\n         * Called by Flash to notify WebSockets events are fired.\n         */\n        WebSocket.__onFlashEvent = function () {\n            setTimeout(function () {\n                try {\n                    // Gets events using receiveEvents() instead of getting it from event object\n                    // of Flash event. This is to make sure to keep message order.\n                    // It seems sometimes Flash events don't arrive in the same order as they are sent.\n                    var events = WebSocket.__flash.receiveEvents();\n                    for (var i = 0; i < events.length; ++i) {\n                        WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i]);\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }, 0);\n            return true;\n        };\n        // Called by Flash.\n        WebSocket.__log = function (message) {\n            console.log(decodeURIComponent(message));\n        };\n        // Called by Flash.\n        WebSocket.__error = function (message) {\n            console.error(decodeURIComponent(message));\n        };\n        WebSocket.__addTask = function (task) {\n            if (WebSocket.__flash) {\n                task();\n            }\n            else {\n                WebSocket.__tasks.push(task);\n            }\n        };\n        /**\n         * Test if the browser is running flash lite.\n         * @return {boolean} True if flash lite is running, false otherwise.\n         */\n        WebSocket.__isFlashLite = function () {\n            if (!window.navigator || !window.navigator.mimeTypes) {\n                return false;\n            }\n            var mimeType = window.navigator.mimeTypes[\"application/x-shockwave-flash\"];\n            if (!mimeType || !mimeType.enabledPlugin || !mimeType.enabledPlugin.filename) {\n                return false;\n            }\n            return mimeType.enabledPlugin.filename.match(/flashlite/i) ? true : false;\n        };\n        if (!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION) {\n            if (window.addEventListener) {\n                window.addEventListener(\"load\", function () {\n                    WebSocket.__initialize();\n                }, false);\n            }\n            else {\n                window.attachEvent(\"onload\", function () {\n                    WebSocket.__initialize();\n                });\n            }\n        }\n    })();\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         *\n         * @api public\n         */\n        exports.XHR = XHR;\n        /**\n         * XHR constructor\n         *\n         * @costructor\n         * @api public\n         */\n        function XHR(socket) {\n            if (!socket)\n                return;\n            io.Transport.apply(this, arguments);\n            this.sendBuffer = [];\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(XHR, io.Transport);\n        /**\n         * Establish a connection\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.open = function () {\n            this.socket.setBuffer(false);\n            this.onOpen();\n            this.get();\n            // we need to make sure the request succeeds since we have no indication\n            // whether the request opened or not until it succeeded.\n            this.setCloseTimeout();\n            return this;\n        };\n        /**\n         * Check if we need to send data to the Socket.IO server, if we have data in our\n         * buffer we encode it and forward it to the `post` method.\n         *\n         * @api private\n         */\n        XHR.prototype.payload = function (payload) {\n            var msgs = [];\n            for (var i = 0, l = payload.length; i < l; i++) {\n                msgs.push(io.parser.encodePacket(payload[i]));\n            }\n            this.send(io.parser.encodePayload(msgs));\n        };\n        /**\n         * Send data to the Socket.IO server.\n         *\n         * @param data The message\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.send = function (data) {\n            this.post(data);\n            return this;\n        };\n        /**\n         * Posts a encoded message to the Socket.IO server.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHR.prototype.post = function (data) {\n            var self = this;\n            this.socket.setBuffer(true);\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    self.posting = false;\n                    if (this.status == 200) {\n                        self.socket.setBuffer(false);\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            function onload() {\n                this.onload = empty;\n                self.socket.setBuffer(false);\n            }\n            ;\n            this.sendXHR = this.request('POST');\n            if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {\n                this.sendXHR.onload = this.sendXHR.onerror = onload;\n            }\n            else {\n                this.sendXHR.onreadystatechange = stateChange;\n            }\n            this.sendXHR.send(data);\n        };\n        /**\n         * Disconnects the established `XHR` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.close = function () {\n            this.onClose();\n            return this;\n        };\n        /**\n         * Generates a configured XHR request\n         *\n         * @param {String} url The url that needs to be requested.\n         * @param {String} method The method the request should use.\n         * @returns {XMLHttpRequest}\n         * @api private\n         */\n        XHR.prototype.request = function (method) {\n            var req = io.util.request(this.socket.isXDomain()), query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            req.open(method || 'GET', this.prepareUrl() + query, true);\n            if (method == 'POST') {\n                try {\n                    if (req.setRequestHeader) {\n                        req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n                    }\n                    else {\n                        // XDomainRequest\n                        req.contentType = 'text/plain';\n                    }\n                }\n                catch (e) { }\n            }\n            return req;\n        };\n        /**\n         * Returns the scheme to use for the transport URLs.\n         *\n         * @api private\n         */\n        XHR.prototype.scheme = function () {\n            return this.socket.options.secure ? 'https' : 'http';\n        };\n        /**\n         * Check if the XHR transports are supported\n         *\n         * @param {Boolean} xdomain Check if we support cross domain requests.\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.check = function (socket, xdomain) {\n            try {\n                var request = io.util.request(xdomain), usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest), socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'), isXProtocol = (global.location && socketProtocol != global.location.protocol);\n                if (request && !(usesXDomReq && isXProtocol)) {\n                    return true;\n                }\n            }\n            catch (e) { }\n            return false;\n        };\n        /**\n         * Check if the XHR transport supports cross domain requests.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.xdomainCheck = function (socket) {\n            return XHR.check(socket, true);\n        };\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.htmlfile = HTMLFile;\n        /**\n         * The HTMLFile transport creates a `forever iframe` based transport\n         * for Internet Explorer. Regular forever iframe implementations will\n         * continuously trigger the browsers buzy indicators. If the forever iframe\n         * is created inside a `htmlfile` these indicators will not be trigged.\n         *\n         * @constructor\n         * @extends {io.Transport.XHR}\n         * @api public\n         */\n        function HTMLFile(socket) {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(HTMLFile, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        HTMLFile.prototype.name = 'htmlfile';\n        /**\n         * Creates a new Ac...eX `htmlfile` with a forever loading iframe\n         * that can be used to listen to messages. Inside the generated\n         * `htmlfile` a reference will be made to the HTMLFile transport.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.get = function () {\n            this.doc = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n            this.doc.open();\n            this.doc.write('<html></html>');\n            this.doc.close();\n            this.doc.parentWindow.s = this;\n            var iframeC = this.doc.createElement('div');\n            iframeC.className = 'socketio';\n            this.doc.body.appendChild(iframeC);\n            this.iframe = this.doc.createElement('iframe');\n            iframeC.appendChild(this.iframe);\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            this.iframe.src = this.prepareUrl() + query;\n            io.util.on(window, 'unload', function () {\n                self.destroy();\n            });\n        };\n        /**\n         * The Socket.IO server will write script tags inside the forever\n         * iframe, this function will be used as callback for the incoming\n         * information.\n         *\n         * @param {String} data The message\n         * @param {document} doc Reference to the context\n         * @api private\n         */\n        HTMLFile.prototype._ = function (data, doc) {\n            // unescape all forward slashes. see GH-1251\n            data = data.replace(/\\\\\\//g, '/');\n            this.onData(data);\n            try {\n                var script = doc.getElementsByTagName('script')[0];\n                script.parentNode.removeChild(script);\n            }\n            catch (e) { }\n        };\n        /**\n         * Destroy the established connection, iframe and `htmlfile`.\n         * And calls the `CollectGarbage` function of Internet Explorer\n         * to release the memory.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.destroy = function () {\n            if (this.iframe) {\n                try {\n                    this.iframe.src = 'about:blank';\n                }\n                catch (e) { }\n                this.doc = null;\n                this.iframe.parentNode.removeChild(this.iframe);\n                this.iframe = null;\n                CollectGarbage();\n            }\n        };\n        /**\n         * Disconnects the established connection.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        HTMLFile.prototype.close = function () {\n            this.destroy();\n            return io.Transport.XHR.prototype.close.call(this);\n        };\n        /**\n         * Checks if the browser supports this transport. The browser\n         * must have an `Ac...eXObject` implementation.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        HTMLFile.check = function (socket) {\n            if (typeof window != \"undefined\" && (['Active'].concat('Object').join('X')) in window) {\n                try {\n                    var a = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n                    return a && io.Transport.XHR.check(socket);\n                }\n                catch (e) { }\n            }\n            return false;\n        };\n        /**\n         * Check if cross domain requests are supported.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        HTMLFile.xdomainCheck = function () {\n            // we can probably do handling for sub-domains, we should\n            // test that it's cross domain but a subdomain here\n            return false;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('htmlfile');\n    })(io.Transport, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports['xhr-polling'] = XHRPolling;\n        /**\n         * The XHR-polling transport uses long polling XHR requests to create a\n         * \"persistent\" connection with the server.\n         *\n         * @constructor\n         * @api public\n         */\n        function XHRPolling() {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(XHRPolling, io.Transport.XHR);\n        /**\n         * Merge the properties from XHR transport\n         */\n        io.util.merge(XHRPolling, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        XHRPolling.prototype.name = 'xhr-polling';\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        XHRPolling.prototype.heartbeats = function () {\n            return false;\n        };\n        /**\n         * Establish a connection, for iPhone and Android this will be done once the page\n         * is loaded.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        XHRPolling.prototype.open = function () {\n            var self = this;\n            io.Transport.XHR.prototype.open.call(self);\n            return false;\n        };\n        /**\n         * Starts a XHR request to wait for incoming messages.\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHRPolling.prototype.get = function () {\n            if (!this.isOpen)\n                return;\n            var self = this;\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    if (this.status == 200) {\n                        self.onData(this.responseText);\n                        self.get();\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            ;\n            function onload() {\n                this.onload = empty;\n                this.onerror = empty;\n                self.retryCounter = 1;\n                self.onData(this.responseText);\n                self.get();\n            }\n            ;\n            function onerror() {\n                self.retryCounter++;\n                if (!self.retryCounter || self.retryCounter > 3) {\n                    self.onClose();\n                }\n                else {\n                    self.get();\n                }\n            }\n            ;\n            this.xhr = this.request();\n            if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {\n                this.xhr.onload = onload;\n                this.xhr.onerror = onerror;\n            }\n            else {\n                this.xhr.onreadystatechange = stateChange;\n            }\n            this.xhr.send(null);\n        };\n        /**\n         * Handle the unclean close behavior.\n         *\n         * @api private\n         */\n        XHRPolling.prototype.onClose = function () {\n            io.Transport.XHR.prototype.onClose.call(this);\n            if (this.xhr) {\n                this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;\n                try {\n                    this.xhr.abort();\n                }\n                catch (e) { }\n                this.xhr = null;\n            }\n        };\n        /**\n         * Webkit based browsers show a infinit spinner when you start a XHR request\n         * before the browsers onload event is called so we need to defer opening of\n         * the transport until the onload event is called. Wrapping the cb in our\n         * defer method solve this.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        XHRPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            io.util.defer(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('xhr-polling');\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * There is a way to hide the loading indicator in Firefox. If you create and\n         * remove a iframe it will stop showing the current loading indicator.\n         * Unfortunately we can't feature detect that and UA sniffing is evil.\n         *\n         * @api private\n         */\n        var indicator = global.document && \"MozAppearance\" in\n            global.document.documentElement.style;\n        /**\n         * Expose constructor.\n         */\n        exports['jsonp-polling'] = JSONPPolling;\n        /**\n         * The JSONP transport creates an persistent connection by dynamically\n         * inserting a script tag in the page. This script tag will receive the\n         * information of the Socket.IO server. When new information is received\n         * it creates a new script tag for the new data stream.\n         *\n         * @constructor\n         * @extends {io.Transport.xhr-polling}\n         * @api public\n         */\n        function JSONPPolling(socket) {\n            io.Transport['xhr-polling'].apply(this, arguments);\n            this.index = io.j.length;\n            var self = this;\n            io.j.push(function (msg) {\n                self._(msg);\n            });\n        }\n        ;\n        /**\n         * Inherits from XHR polling transport.\n         */\n        io.util.inherit(JSONPPolling, io.Transport['xhr-polling']);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        JSONPPolling.prototype.name = 'jsonp-polling';\n        /**\n         * Posts a encoded message to the Socket.IO server using an iframe.\n         * The iframe is used because script tags can create POST based requests.\n         * The iframe is positioned outside of the view so the user does not\n         * notice it's existence.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        JSONPPolling.prototype.post = function (data) {\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (!this.form) {\n                var form = document.createElement('form'), area = document.createElement('textarea'), id = this.iframeId = 'socketio_iframe_' + this.index, iframe;\n                form.className = 'socketio';\n                form.style.position = 'absolute';\n                form.style.top = '0px';\n                form.style.left = '0px';\n                form.style.display = 'none';\n                form.target = id;\n                form.method = 'POST';\n                form.setAttribute('accept-charset', 'utf-8');\n                area.name = 'd';\n                form.appendChild(area);\n                document.body.appendChild(form);\n                this.form = form;\n                this.area = area;\n            }\n            this.form.action = this.prepareUrl() + query;\n            function complete() {\n                initIframe();\n                self.socket.setBuffer(false);\n            }\n            ;\n            function initIframe() {\n                if (self.iframe) {\n                    self.form.removeChild(self.iframe);\n                }\n                try {\n                    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n                    iframe = document.createElement('<iframe name=\"' + self.iframeId + '\">');\n                }\n                catch (e) {\n                    iframe = document.createElement('iframe');\n                    iframe.name = self.iframeId;\n                }\n                iframe.id = self.iframeId;\n                self.form.appendChild(iframe);\n                self.iframe = iframe;\n            }\n            ;\n            initIframe();\n            // we temporarily stringify until we figure out how to prevent\n            // browsers from turning `\\n` into `\\r\\n` in form inputs\n            this.area.value = io.JSON.stringify(data);\n            try {\n                this.form.submit();\n            }\n            catch (e) { }\n            if (this.iframe.attachEvent) {\n                iframe.onreadystatechange = function () {\n                    if (self.iframe.readyState == 'complete') {\n                        complete();\n                    }\n                };\n            }\n            else {\n                this.iframe.onload = complete;\n            }\n            this.socket.setBuffer(true);\n        };\n        /**\n         * Creates a new JSONP poll that can be used to listen\n         * for messages from the Socket.IO server.\n         *\n         * @api private\n         */\n        JSONPPolling.prototype.get = function () {\n            var self = this, script = document.createElement('script'), query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (this.script) {\n                this.script.parentNode.removeChild(this.script);\n                this.script = null;\n            }\n            script.async = true;\n            script.src = this.prepareUrl() + query;\n            script.onerror = function () {\n                self.onClose();\n            };\n            var insertAt = document.getElementsByTagName('script')[0];\n            insertAt.parentNode.insertBefore(script, insertAt);\n            this.script = script;\n            if (indicator) {\n                setTimeout(function () {\n                    var iframe = document.createElement('iframe');\n                    document.body.appendChild(iframe);\n                    document.body.removeChild(iframe);\n                }, 100);\n            }\n        };\n        /**\n         * Callback function for the incoming message stream from the Socket.IO server.\n         *\n         * @param {String} data The message\n         * @api private\n         */\n        JSONPPolling.prototype._ = function (msg) {\n            this.onData(msg);\n            if (this.isOpen) {\n                this.get();\n            }\n            return this;\n        };\n        /**\n         * The indicator hack only works after onload\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        JSONPPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            if (!indicator)\n                return fn.call(this);\n            io.util.load(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Checks if browser supports this transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        JSONPPolling.check = function () {\n            return 'document' in global;\n        };\n        /**\n         * Check if cross domain requests are supported\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        JSONPPolling.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('jsonp-polling');\n    })(io.Transport, io, self);\n    if (typeof define === \"function\" && define.amd) {\n        define([], function () { return io; });\n    }\n})();\n\n",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};",
         "// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n// Entry point for the notebook bundle containing custom model definitions.\n//\n// Setup notebook base URL\n//\n// Some static assets may be required by the custom widget javascript. The base\n// url for the notebook is not known at build time and is therefore computed\n// dynamically.\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n(window as any).__webpack_public_path__ =\n  document.querySelector('body')!.getAttribute('data-base-url') +\n  'nbextensions/ipynao';\n\nexport * from './index';\n",
-        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nexport * from './version';\nexport * from './widget';\nexport * from './qimessaging';",
-        "/*\n**  Copyright (C) Aldebaran Robotics\n**  See COPYING for the license\n**\n**  Author(s):\n**   - Laurent LEC    <llec@aldebaran-robotics.com>\n**\n*/\nimport io from \"nao-socket.io\";\n\nexport class QiSession {\n    connected: Boolean = false;\n    disconnected: any;\n    host: any;\n    service: any;\n\n    constructor(ipAddress: string = \"nao.local\", port: string = \"80\") {\n        console.log(\"DBG Emile qim about to connect w/17\");\n        // @ts-ignore\n        window[\"oioi\"] = io;\n        let _socket = io.connect(\n            \"nao:nao@\" + ipAddress + \":\" + port,\n            { resource: \"libs/qimessaging/2/socket.io\",\n            'force new connection': true });\n        // console.log(\"DBG Emile qim connecting..\");\n        let _dfd = new Array();\n        let _sigs = new Array();\n        let _idm = 0;\n\n        interface MetaObject {\n            __MetaObject?: any;\n        }\n\n        _socket.on('reply', function (data : any) {\n            // console.log(\"DBG Emile qim reply\"); REMOVE\n            let idm = data[\"idm\"];\n            if (data[\"result\"] != null && data[\"result\"][\"metaobject\"] != undefined) {\n                // let o = new Object();\n                let o : MetaObject = {\n                    __MetaObject: data[\"result\"][\"metaobject\"],\n                }\n\n                let pyobj = data[\"result\"][\"pyobject\"];\n                _sigs[pyobj] = new Array();\n                let methods = o.__MetaObject[\"methods\"];\n\n                for (let i in methods) {\n                    let methodName = methods[i][\"name\"];\n                    // @ts-ignore\n                    o[methodName] = createMetaCall(pyobj, methodName, \"data\");\n                }\n                let signals = o.__MetaObject[\"signals\"];\n                for (let i in signals) {\n                    let signalName = signals[i][\"name\"];\n                    // @ts-ignore\n                    o[signalName] = createMetaSignal(pyobj, signalName, false);\n                }\n                let properties = o.__MetaObject[\"properties\"];\n                for (let i in properties) {\n                    let propertyName = properties[i][\"name\"];\n                    // @ts-ignore\n                    o[propertyName] = createMetaSignal(pyobj, propertyName, true);\n                }\n                _dfd[idm].resolve(o);\n            }\n            else {\n                if (_dfd[idm].__cbi != undefined) {\n                    let cbi = _dfd[idm].__cbi;\n                    _sigs[cbi[\"obj\"]][cbi[\"signal\"]][data[\"result\"]] = cbi[\"cb\"];\n                }\n                _dfd[idm].resolve(data[\"result\"]);\n            }\n            delete _dfd[idm];\n        });\n        _socket.on('error', function (data : any) {\n            // console.log(\"DBG Emile qim error\"); REMOVE\n            if (data[\"idm\"] != undefined) {\n                _dfd[data[\"idm\"]].reject(data[\"result\"]);\n                delete _dfd[data[\"idm\"]];\n            }\n        });\n        _socket.on('signal', function (data : any) {\n            // console.log(\"DBG Emile qim signal\"); REMOVE\n            let res = data[\"result\"];\n            let callback = _sigs[res[\"obj\"]][res[\"signal\"]][res[\"link\"]];\n            if (callback != undefined) {\n                // @ts-ignore\n                callback.apply(this, res[\"data\"]);\n            }\n        });\n        _socket.on('disconnect', function (data : any) {\n            // console.log(\"DBG Emile qim disconnect\"); REMOVE\n            for (let idm in _dfd) {\n                _dfd[idm].reject(\"Call \" + idm + \" canceled: disconnected\");\n                delete _dfd[idm];\n            }\n            // @ts-ignore\n            if (this.disconnected) {\n                // disconnected();\n                console.log(\"DBG Isabel disconnected\");\n            }\n        });\n        function createMetaCall(obj : any, member : any, data : any) {\n            return function () {\n                let idm = ++_idm;\n                let args = Array.prototype.slice.call(arguments, 0);\n                let promise = new Promise(function (resolve, reject) {\n                    _dfd[idm] = { resolve: resolve, reject: reject };\n                });\n                if (args[0] == \"connect\") {\n                    _dfd[idm].__cbi = data;\n                }\n                _socket.emit('call', { idm: idm, params: { obj: obj, member: member, args: args } });\n                return promise;\n            };\n        }\n\n        interface sObject {\n            connect?: any;\n            disconnect?: any;\n            setValue?: any;\n            value?: any;\n\n        };\n        function createMetaSignal(obj : any, signal : any, isProperty : any) {\n            // let s = new Object();\n            let s : sObject = {};\n            _sigs[obj][signal] = new Array();\n            s.connect = function (cb : any) {\n                // @ts-ignore\n                return createMetaCall(obj, signal, { obj: obj, signal: signal, cb: cb })(\"connect\");\n            };\n\n            // @ts-ignore\n            s.disconnect = function (l) {\n                delete _sigs[obj][signal][l];\n                // @ts-ignore\n                return createMetaCall(obj, signal, \"data\")(\"disconnect\", l);\n            };\n            if (!isProperty) {\n                return s;\n            }\n            s.setValue = function () {\n                let args = Array.prototype.slice.call(arguments, 0);\n                // @ts-ignore\n                return createMetaCall(obj, signal, \"data\").apply(this, [\"setValue\"].concat(args));\n            };\n            s.value = function () {\n                // @ts-ignore\n                return createMetaCall(obj, signal, \"data\")(\"value\");\n            };\n            return s;\n        }\n\n        this.service = createMetaCall(\"ServiceDirectory\", \"service\", \"data\");\n        // let _self = this;\n        _socket.on('connect', function () {\n            // console.log(\"DBG Emile qim connect\"); REMOVE\n            // @ts-ignore\n            if (this.connected) {\n                // connected(_self);\n                console.log(\"DBG Isabel already connected\");\n\n            }\n        });\n        // console.log(\"DBG Emile qim done with init\"); REMOVE\n    }\n}\n",
+        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nexport * from './version';\nexport * from './widget';\nexport * from './qimessaging';\n",
+        "/*\n **  Copyright (C) Aldebaran Robotics\n **  See COPYING for the license\n **\n **  Author(s):\n **   - Laurent LEC    <llec@aldebaran-robotics.com>\n **\n */\nimport io from 'nao-socket.io';\n\ninterface replyType {\n  __MetaObject?: any;\n  [key: string]: any;\n}\n\ninterface signalType {\n  connect?: any;\n  disconnect?: any;\n  setValue?: any;\n  value?: any;\n}\n\nexport class QiSession {\n  connected: any;\n  disconnected: any;\n  host: any;\n  service: any;\n  _dfd: Array<any>;\n  _sigs: Array<any>;\n  _idm: number;\n  _socket: any;\n\n  constructor(\n    ipAddress = 'nao.local',\n    port = '80',\n    connected?: 'function',\n    disconnected?: 'function'\n  ) {\n    this.connected = connected;\n    this.disconnected = disconnected;\n\n    this._socket = io.connect('nao:nao@' + ipAddress + ':' + port, {\n      resource: 'libs/qimessaging/2/socket.io',\n      'force new connection': true,\n    });\n\n    this._dfd = [];\n    this._sigs = [];\n    this._idm = 0;\n\n    this._socket.on('reply', (data: any) => {\n      this.onReply(data);\n    });\n\n    this._socket.on('error', (data: any) => {\n      this.onError(data);\n    });\n\n    this._socket.on('signal', (data: any) => {\n      this.onSignal(data);\n    });\n\n    this._socket.on('disconnect', this.onDisconnect);\n\n    this._socket.on('connect', this.onConnect);\n\n    this.service = this.createMetaCall('ServiceDirectory', 'service', 'data');\n  }\n\n  isConnected() {\n    const connected: boolean =\n      this._socket !== undefined ? this._socket.socket.connected : false;\n    return connected;\n  }\n\n  onReply(data: any) {\n    const idm = data['idm'];\n    if (\n      data['result'] !== undefined &&\n      data['result']['metaobject'] !== undefined\n    ) {\n      const replyObject: replyType = {\n        __MetaObject: data['result']['metaobject'],\n      };\n\n      const pyIndex = data['result']['pyobject'];\n      this._sigs[pyIndex] = [];\n      const methods = replyObject.__MetaObject['methods'];\n\n      for (const i in methods) {\n        const methodName = methods[i]['name'];\n        replyObject[methodName] = this.createMetaCall(\n          pyIndex,\n          methodName,\n          'data'\n        );\n      }\n\n      const signals = replyObject.__MetaObject['signals'];\n      for (const i in signals) {\n        const signalName = signals[i]['name'];\n        replyObject[signalName] = this.createMetaSignal(\n          pyIndex,\n          signalName,\n          false\n        );\n      }\n\n      const properties = replyObject.__MetaObject['properties'];\n      for (const i in properties) {\n        const propertyName = properties[i]['name'];\n        replyObject[propertyName] = this.createMetaSignal(\n          pyIndex,\n          propertyName,\n          true\n        );\n      }\n\n      this._dfd[idm].resolve(replyObject);\n    } else {\n      if (this._dfd[idm].__cbi !== undefined) {\n        const cbi = this._dfd[idm].__cbi;\n        this._sigs[cbi['obj']][cbi['signal']][data['result']] = cbi['cb'];\n      }\n      this._dfd[idm].resolve(data['result']);\n    }\n    delete this._dfd[idm];\n  }\n\n  onError(data: any) {\n    if (data['idm'] !== undefined) {\n      this._dfd[data['idm']].reject(data['result']);\n      delete this._dfd[data['idm']];\n    }\n  }\n\n  onSignal(data: any) {\n    const result = data['result'];\n    const callback =\n      this._sigs[result['obj']][result['signal']][result['link']];\n    if (callback !== undefined) {\n      callback.apply(this, result['data']);\n    }\n  }\n\n  onConnect() {\n    if (this.connected) {\n      this.connected(this);\n    }\n  }\n\n  onDisconnect(_data: any) {\n    for (const idm in this._dfd) {\n      this._dfd[idm].reject('Call ' + idm + ' canceled: disconnected');\n      delete this._dfd[idm];\n    }\n\n    if (this.disconnected) {\n      this.disconnected();\n    }\n  }\n\n  createMetaCall(obj: any, member: any, data: any) {\n    return (...serviceArgs: any[]) => {\n      ++this._idm;\n\n      const promise = new Promise((resolve, reject) => {\n        this._dfd[this._idm] = { resolve: resolve, reject: reject };\n      });\n      if (serviceArgs[0] === 'connect') {\n        this.isConnected = this._socket.socket.connected;\n        this._dfd[this._idm].__cbi = data;\n      }\n      this._socket.emit('call', {\n        idm: this._idm,\n        params: { obj: obj, member: member, args: serviceArgs },\n      });\n      return promise;\n    };\n  }\n\n  createMetaSignal(obj: any, signal: any, isProperty: boolean) {\n    const signalObject: signalType = {};\n    this._sigs[obj][signal] = [];\n    signalObject.connect = (cb: any) => {\n      return this.createMetaCall(obj, signal, {\n        obj: obj,\n        signal: signal,\n        cb: cb,\n      })('connect');\n    };\n\n    signalObject.disconnect = (args: any) => {\n      delete this._sigs[obj][signal][args];\n      return this.createMetaCall(obj, signal, 'data')('disconnect', args);\n    };\n\n    if (!isProperty) {\n      return signalObject;\n    }\n\n    signalObject.setValue = (...valueArgs: any[]) => {\n      return this.createMetaCall(obj, signal, 'data').apply(\n        this,\n        ['setValue'].concat(valueArgs)\n      );\n    };\n\n    signalObject.value = () => {\n      return this.createMetaCall(obj, signal, 'data')('value');\n    };\n\n    return signalObject;\n  }\n}\n",
         "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexport const MODULE_VERSION = data.version;\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name;\n",
-        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  ISerializers,\n} from '@jupyter-widgets/base';\n\nimport { MODULE_NAME, MODULE_VERSION } from './version';\n\n// Import the CSS\nimport '../css/widget.css';\n\nimport { QiSession } from './qimessaging';\n\nexport class NaoRobotModel extends DOMWidgetModel {\n  qiSession: QiSession;\n  connected: string = \"Disconnected\";\n  status: string = \"Not busy\";\n  synco: string;\n\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: NaoRobotModel.model_name,\n      _model_module: NaoRobotModel.model_module,\n      _model_module_version: NaoRobotModel.model_module_version,\n      _view_name: NaoRobotModel.view_name,\n      _view_module: NaoRobotModel.view_module,\n      _view_module_version: NaoRobotModel.view_module_version,\n      value: 'Hello World',\n      synco: \"something silly\",\n      connected: \"Disconnected\",\n      status: \"Not busy\",\n    };\n  }\n\n  initialize(attributes: any, options: any): void {\n    super.initialize(attributes, options);\n  \n    this.on(\"msg:custom\", this.onCommand);\n  }\n\n  private changeStatus(statusMessage: string) {\n    this.status = statusMessage;\n    this.set(\"status\", statusMessage);\n    this.save_changes();\n  }\n\n  async connect(ipAddress: string, port: string) {\n    console.log(\"REMOVE the command was to connect\");\n    this.changeStatus(\"Establishing connection\");\n\n    this.qiSession = new QiSession(ipAddress, port);    \n    \n    this.connected = \"Connected\";\n    this.set(\"connected\", \"Connected\");\n    this.save_changes();\n\n    this.changeStatus(\"Not busy\");\n  }\n\n  disconnect() {\n    console.log(\"REMOVE disconnecting\");\n    // TODO: Make disconnect function\n    // delete this.qiSession;\n    this.connected = \"Disconnected\";\n    this.changeStatus(\"Unavailable\");\n  }\n\n  async Testing() {\n    this.qiSession = new QiSession();\n    const tts = await this.qiSession.service(\"ALTextToSpeech\");\n    // let msg : any = Object.getOwnPropertyNames(tts);\n    let aThing: any = this.send(tts);\n    console.log(\"A thing: \", aThing);\n    console.log(\"JS sent something\");\n  }\n\n  async goSleep(tSeconds : number) {\n    console.log(\"IN THE SLEEPING SESH\")\n    const sleep = (ms: number) => new Promise((r) => setTimeout(r, ms));\n\n    await sleep(tSeconds * 1000);\n\n    console.log(\"WAKING UP\");\n\n    this.set(\"synco\", \"something else\");\n    this.save_changes();\n\n    this.send({data: \"purple\"});\n    console.log(\"SETTED THE VALUE\");\n\n  }\n\n  private async callService(\n    serviceName: string,\n    methodName: string,\n    args: any,\n    kwargs: any\n  ) {\n    const naoService = await this.qiSession.service(serviceName);\n\n    this.changeStatus(\"Running method\" + methodName);\n    await naoService[methodName](...args);\n\n    this.changeStatus(\"Task completed\");\n  }\n\n  private async onCommand(commandData: any, buffers: any) {\n    console.log(\"REMOVE onCommand\", commandData);\n    const cmd = commandData[\"command\"];\n\n    switch (cmd) {\n      case \"connect\":\n        await this.connect(\n          commandData[\"ipAddress\"],\n          commandData[\"port\"]);\n        break;\n\n      case \"disconnect\":\n        this.disconnect();\n        break;\n\n      case \"callService\":\n        console.log(\"RECEIVING COMMAND FOR SERVICE\");\n        await this.callService(\n          commandData[\"service\"],\n          commandData[\"method\"],\n          commandData[\"args\"],\n          commandData[\"kwargs\"]\n        );\n        break;\n      \n    }\n\n    console.log(\"End of OnCommand\")\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n    // Add any extra serializers here\n  };\n\n  // var qiSession = // TODO:\n  static model_name = 'NaoRobotModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'NaoRobotView'; // Set to null if no view\n  static view_module = MODULE_NAME; // Set to null if no view\n  static view_module_version = MODULE_VERSION;\n}\n\nexport class NaoRobotView extends DOMWidgetView {\n  synco: HTMLDivElement;\n  txt_connected: HTMLDivElement;\n  txt_status: HTMLDivElement;\n\n  render() {\n    this.el.classList.add('custom-widget');\n\n    // Connection element\n    this.txt_connected = document.createElement('div');\n    this.txt_connected.textContent = \"Disconnected\";\n    this.el.appendChild(this.txt_connected);\n\n    // Status element\n    this.txt_status = document.createElement('div');\n    this.txt_status.textContent = \"Not busy\";\n    this.el.appendChild(this.txt_status);\n\n    // Testing element\n    this.synco = document.createElement('div');\n    this.synco.textContent = \"it should be here\";\n    this.el.appendChild(this.synco);\n\n    console.log(\"RENDERING\");\n    console.log(this.model.get(\"connected\"), \" CONNECTED\");\n    console.log(this.model.get(\"synco\"), \" SYNCO\");\n\n    this.value_changed();\n    this.model.on('change:connected', this.value_changed, this);\n    this.model.on('change:status', this.value_changed, this);\n    this.model.on('change:synco', this.value_changed, this);\n  }\n\n  value_changed() {\n    // this.el.textContent = this.model.get('value');\n    // this.synco = this.model.get('synco');\n    console.log(\"THE VALUE CHANGED\")\n    this.txt_connected.textContent = this.model.get(\"connected\");\n    this.txt_status.textContent = this.model.get(\"status\");\n    this.synco.textContent = this.model.get('synco');\n\n  }\n}\n",
+        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  ISerializers,\n} from '@jupyter-widgets/base';\n\nimport { MODULE_NAME, MODULE_VERSION } from './version';\n\n// Import the CSS\nimport '../css/widget.css';\n\nimport { QiSession } from './qimessaging';\n\ninterface serviceDict {\n  [key: string]: {\n    [key: string]: any;\n  };\n}\n\nexport class NaoRobotModel extends DOMWidgetModel {\n  qiSession: QiSession;\n  connected = 'Disconnected';\n  status = 'Not busy';\n  _services: serviceDict = {};\n\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: NaoRobotModel.model_name,\n      _model_module: NaoRobotModel.model_module,\n      _model_module_version: NaoRobotModel.model_module_version,\n      _view_name: NaoRobotModel.view_name,\n      _view_module: NaoRobotModel.view_module,\n      _view_module_version: NaoRobotModel.view_module_version,\n      connected: 'Disconnected',\n      status: 'Not busy',\n      counter: 0,\n    };\n  }\n\n  initialize(attributes: any, options: any): void {\n    super.initialize(attributes, options);\n    this.on('msg:custom', this.onCommand);\n  }\n\n  private changeStatus(statusMessage: string) {\n    this.status = statusMessage;\n    this.set('status', statusMessage);\n    this.save_changes();\n  }\n\n  private validateIPaddress(ipAddress: string) {\n    // TODO: validate port also\n    if (ipAddress === 'nao.local') {\n      return true;\n    } else {\n      const regexp = new RegExp(\n        '^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(.(?!$)|$)){4}$'\n      );\n      return regexp.test(ipAddress);\n    }\n  }\n\n  async connect(ipAddress: string, port: string) {\n    const sleep = (ms: number) => new Promise((r) => setTimeout(r, ms));\n\n    this.changeStatus('Establishing connection');\n\n    if (!this.validateIPaddress(ipAddress)) {\n      this.changeStatus('Invalid IP address');\n      console.warn('IP Address ', ipAddress, ' is not valid');\n      return;\n    }\n\n    this.qiSession = new QiSession(ipAddress, port);\n\n    // Timeout after ~10 seconds\n    for (let i = 0; i < 100; i++) {\n      await sleep(100);\n      if (this.qiSession.isConnected()) {\n        this.connected = 'Connected';\n        this.set('connected', 'Connected');\n        this.save_changes();\n        this.changeStatus('Available');\n        console.log('Connection successful after ', i / 10.0, ' seconds.');\n        break;\n      }\n    }\n\n    // Handle connection failure\n    if (!this.qiSession.isConnected()) {\n      console.error('Connection to ', ipAddress, ' could not be established.');\n      this.changeStatus('Unavailable');\n    }\n  }\n\n  disconnect() {\n    console.log('REMOVE disconnecting');\n    // TODO: Make disconnect function\n    // delete this.qiSession;\n    this.connected = 'Disconnected';\n    this.changeStatus('Unavailable');\n  }\n\n  private async createService(serviceName: string) {\n    this.changeStatus('Creating service ' + serviceName);\n    const servicePromise = this.qiSession.service(serviceName);\n\n    const naoService = await servicePromise\n      .then((resolution: any) => {\n        return resolution;\n      })\n      .catch((rejection: string) => {\n        this.changeStatus(rejection);\n        return rejection;\n      });\n\n    // Store service only when successfully created\n    if (typeof naoService === 'object') {\n      this._services[serviceName] = naoService;\n      this.changeStatus(serviceName + ' available');\n    }\n  }\n\n  private async callService(\n    serviceName: string,\n    methodName: string,\n    args: any,\n    _kwargs: any\n  ) {\n    if (this._services[serviceName][methodName] === undefined) {\n      this.changeStatus(methodName + ' does not exist for ' + serviceName);\n      return;\n    }\n\n    // let serviceResponse;\n    this.changeStatus('Running method ' + methodName);\n\n    const servicePromise = this._services[serviceName][methodName](...args);\n    await servicePromise\n      .then((resolution: any) => {\n        this.changeStatus('Task completed');\n        if (resolution !== undefined) {\n          this.send(resolution);\n        }\n      })\n      .catch((rejection: string) => {\n        this.changeStatus(rejection);\n        this.send(rejection);\n      });\n\n    this.set('counter', this.get('counter') + 1);\n    this.save_changes();\n  }\n\n  private async onCommand(commandData: any, buffers: any) {\n    const cmd = commandData['command'];\n\n    switch (cmd) {\n      case 'connect':\n        await this.connect(commandData['ipAddress'], commandData['port']);\n        break;\n\n      case 'disconnect':\n        this.disconnect();\n        break;\n\n      case 'createService':\n        this.createService(commandData['service']);\n        break;\n\n      case 'callService':\n        await this.callService(\n          commandData['service'],\n          commandData['method'],\n          commandData['args'],\n          commandData['kwargs']\n        );\n        break;\n    }\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n    // Add any extra serializers here\n  };\n\n  static model_name = 'NaoRobotModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'NaoRobotView'; // Set to null if no view\n  static view_module = MODULE_NAME; // Set to null if no view\n  static view_module_version = MODULE_VERSION;\n}\n\nexport class NaoRobotView extends DOMWidgetView {\n  txt_connected: HTMLDivElement;\n  txt_status: HTMLDivElement;\n\n  render() {\n    this.el.classList.add('custom-widget');\n\n    // Connection element\n    this.txt_connected = document.createElement('div');\n    this.txt_connected.textContent = 'Disconnected';\n    this.el.appendChild(this.txt_connected);\n\n    // Status element\n    this.txt_status = document.createElement('div');\n    this.txt_status.textContent = 'Not busy';\n    this.el.appendChild(this.txt_status);\n\n    this.value_changed();\n    this.model.on('change:connected', this.value_changed, this);\n    this.model.on('change:status', this.value_changed, this);\n  }\n\n  value_changed() {\n    this.txt_connected.textContent = this.model.get('connected');\n    this.txt_status.textContent = this.model.get('status');\n  }\n}\n",
         "module.exports = __WEBPACK_EXTERNAL_MODULE__146__;",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n",
         "__webpack_require__.nc = undefined;",
         "// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(112);\n"
     ],
     "version": 3
 }
```

## ipynao/tests/test_example.py

```diff
@@ -7,8 +7,8 @@
 import pytest
 
 from ..nao_robot import NaoRobotWidget
 
 
 def test_nao_robot_creation_blank():
     w = NaoRobotWidget()
-    assert w.value == 'Hello World'
+    assert w.connected == 'Disconnected'
```

## Comparing `ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js` & `ipynao/labextension/static/14.0fa00990c242d51d6008.js`

 * *Files 5% similar despite different names*

### js-beautify {}

```diff
@@ -1,30 +1,29 @@
-/*! For license information please see 14.fc6d1d9a1e570d86bdac.js.LICENSE.txt */
+/*! For license information please see 14.0fa00990c242d51d6008.js.LICENSE.txt */
 (self.webpackChunkipynao = self.webpackChunkipynao || []).push([
     [14], {
         14: (t, e, n) => {
             t.exports = n(998)
         },
         998: (module, exports) => {
             var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, io = module.exports;
             (function() {
                 var self = this;
                 if (function(t, e) {
                         var n = t;
                         n.version = "0.9.17", n.protocol = 1, n.transports = [], n.j = [], n.sockets = {}, n.connect = function(t, o) {
-                            console.log("DBG Emile io connect");
                             var i, r, s = n.util.parseUri(t);
                             s.protocol = "http", e && e.location && (s.protocol = s.protocol || e.location.protocol.slice(0, -1), s.host = s.host || (e.document ? e.document.domain : e.location.hostname), s.port = s.port || e.location.port), i = n.util.uniqueUri(s);
                             var a = {
                                 host: s.host,
                                 secure: "https" == s.protocol,
                                 port: s.port || ("https" == s.protocol ? 443 : 80),
                                 query: s.query || ""
                             };
-                            return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (r = new n.Socket(a)), !a["force new connection"] && r && (n.sockets[i] = r), r = r || n.sockets[i], console.log("DBG Emile io connecting to", i, "options:", a), r.of(s.path.length > 1 ? s.path : "")
+                            return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (r = new n.Socket(a)), !a["force new connection"] && r && (n.sockets[i] = r), (r = r || n.sockets[i]).of(s.path.length > 1 ? s.path : "")
                         }
                     }(io, self), function(t, e) {
                         var n = t.util = {},
                             o = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
                             i = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
                         n.parseUri = function(t) {
                             for (var e = o.exec(t || ""), n = {}, r = 14; r--;) n[i[r]] = e[r] || "";
@@ -122,15 +121,15 @@
                         }, n.prototype.listeners = function(t) {
                             return this.$events || (this.$events = {}), this.$events[t] || (this.$events[t] = []), e.util.isArray(this.$events[t]) || (this.$events[t] = [this.$events[t]]), this.$events[t]
                         }, n.prototype.emit = function(t) {
                             if (!this.$events) return !1;
                             var n = this.$events[t];
                             if (!n) return !1;
                             var o = Array.prototype.slice.call(arguments, 1);
-                            if (console.log("DBG Emile EventEmitter.emit:", t, o), "function" == typeof n) n.apply(this, o);
+                            if ("function" == typeof n) n.apply(this, o);
                             else {
                                 if (!e.util.isArray(n)) return !1;
                                 for (var i = n.slice(), r = 0, s = i.length; r < s; r++) i[r].apply(this, o)
                             }
                             return !0
                         }
                     }(io, io), function(exports, nativeJSON) {
@@ -225,41 +224,41 @@
                             s = e.JSON,
                             a = e.util.indexOf;
                         n.encodePacket = function(t) {
                             var e = a(o, t.type),
                                 n = t.id || "",
                                 c = t.endpoint || "",
                                 p = t.ack,
-                                l = null;
+                                u = null;
                             switch (t.type) {
                                 case "error":
-                                    var u = t.reason ? a(i, t.reason) : "",
+                                    var l = t.reason ? a(i, t.reason) : "",
                                         h = t.advice ? a(r, t.advice) : "";
-                                    "" === u && "" === h || (l = u + ("" !== h ? "+" + h : ""));
+                                    "" === l && "" === h || (u = l + ("" !== h ? "+" + h : ""));
                                     break;
                                 case "message":
-                                    "" !== t.data && (l = t.data);
+                                    "" !== t.data && (u = t.data);
                                     break;
                                 case "event":
                                     var f = {
                                         name: t.name
                                     };
-                                    t.args && t.args.length && (f.args = t.args), l = s.stringify(f);
+                                    t.args && t.args.length && (f.args = t.args), u = s.stringify(f);
                                     break;
                                 case "json":
-                                    l = s.stringify(t.data);
+                                    u = s.stringify(t.data);
                                     break;
                                 case "connect":
-                                    t.qs && (l = t.qs);
+                                    t.qs && (u = t.qs);
                                     break;
                                 case "ack":
-                                    l = t.ackId + (t.args && t.args.length ? "+" + s.stringify(t.args) : "")
+                                    u = t.ackId + (t.args && t.args.length ? "+" + s.stringify(t.args) : "")
                             }
                             var d = [e, n + ("data" == p ? "+" : ""), c];
-                            return null != l && d.push(l), d.join(":")
+                            return null != u && d.push(u), d.join(":")
                         }, n.encodePayload = function(t) {
                             var e = "";
                             if (1 == t.length) return t[0];
                             for (var n = 0, o = t.length; n < o; n++) e += "�" + t[n].length + "�" + t[n];
                             return e
                         };
                         var c = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
@@ -321,35 +320,35 @@
                             return this
                         }, n.prototype.onPacket = function(t) {
                             return this.socket.setHeartbeatTimeout(), "heartbeat" == t.type ? this.onHeartbeat() : ("connect" == t.type && "" == t.endpoint && this.onConnect(), "error" == t.type && "reconnect" == t.advice && (this.isOpen = !1), this.socket.onPacket(t), this)
                         }, n.prototype.setCloseTimeout = function() {
                             if (!this.closeTimeout) {
                                 var t = this;
                                 this.closeTimeout = setTimeout((function() {
-                                    console.log("DBG Emile io transport timeout -> disconnect"), t.onDisconnect()
+                                    t.onDisconnect()
                                 }), this.socket.closeTimeout)
                             }
                         }, n.prototype.onDisconnect = function() {
                             return this.isOpen && this.close(), this.clearTimeouts(), this.socket.onDisconnect(), this
                         }, n.prototype.onConnect = function() {
                             return this.socket.onConnect(), this
                         }, n.prototype.clearCloseTimeout = function() {
                             this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null)
                         }, n.prototype.clearTimeouts = function() {
                             this.clearCloseTimeout(), this.reopenTimeout && clearTimeout(this.reopenTimeout)
                         }, n.prototype.packet = function(t) {
                             this.send(e.parser.encodePacket(t))
                         }, n.prototype.onHeartbeat = function(t) {
-                            console.log("DBG Emile transport: onHeartbeat"), this.packet({
+                            this.packet({
                                 type: "heartbeat"
                             })
                         }, n.prototype.onOpen = function() {
                             this.isOpen = !0, this.clearCloseTimeout(), this.socket.onOpen()
                         }, n.prototype.onClose = function() {
-                            console.log("DBG Emile io transport onClose"), this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
+                            this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
                         }, n.prototype.prepareUrl = function() {
                             var t = this.socket.options;
                             return this.scheme() + "://" + t.host + ":" + t.port + "/" + t.resource + "/" + e.protocol + "/" + this.name + "/" + this.sessid
                         }, n.prototype.ready = function(t, e) {
                             e.call(this)
                         }
                     }(io, io), function(t, e, n) {
@@ -389,50 +388,50 @@
                             var t;
                             for (var e in this.emit.apply(this, arguments), this.namespaces) this.namespaces.hasOwnProperty(e) && (t = this.of(e)).$emit.apply(t, arguments)
                         }, o.prototype.handshake = function(t) {
                             var n = this,
                                 o = this.options;
 
                             function r(e) {
-                                e instanceof Error ? (n.connecting = !1, console.log("DBG Emile onError from handshake:"), console.log(e), n.onError(e.message)) : t.apply(null, e.split(":"))
+                                e instanceof Error ? (n.connecting = !1, n.onError(e.message)) : t.apply(null, e.split(":"))
                             }
                             var s = ["http" + (o.secure ? "s" : "") + ":/", o.host + ":" + o.port, o.resource, e.protocol, e.util.query(this.options.query, "t=" + +new Date)].join("/");
                             if (this.isXDomain() && !e.util.ua.hasCORS) {
                                 var a = document.getElementsByTagName("script")[0],
                                     c = document.createElement("script");
                                 c.src = s + "&jsonp=" + e.j.length, a.parentNode.insertBefore(c, a), e.j.push((function(t) {
                                     r(t), c.parentNode.removeChild(c)
                                 }))
                             } else {
                                 var p = e.util.request();
                                 p.open("GET", s, !0), this.isXDomain() && (p.withCredentials = !0), p.onreadystatechange = function() {
-                                    4 == p.readyState && (p.onreadystatechange = i, 200 == p.status ? r(p.responseText) : 403 == p.status ? (console.log("DBG Emile onError from xhr:"), console.log(p.status, "text", p.responseText), n.onError(p.responseText)) : (n.connecting = !1, console.log("DBG Emile onError from xhr but not 403"), console.log(p.status, "text", p.responseText), !n.reconnecting && n.onError(p.responseText)))
+                                    4 == p.readyState && (p.onreadystatechange = i, 200 == p.status ? r(p.responseText) : 403 == p.status ? n.onError(p.responseText) : (n.connecting = !1, !n.reconnecting && n.onError(p.responseText)))
                                 }, p.send(null)
                             }
                         }, o.prototype.getTransport = function(t) {
                             for (var n, o = t || this.transports, i = 0; n = o[i]; i++)
-                                if (console.log("DBG Emile trying transport: ", n), e.Transport[n] && e.Transport[n].check(this) && (!this.isXDomain() || e.Transport[n].xdomainCheck(this))) return console.log("DBG Emile keeping transport: ", n), new e.Transport[n](this, this.sessionid);
+                                if (e.Transport[n] && e.Transport[n].check(this) && (!this.isXDomain() || e.Transport[n].xdomainCheck(this))) return new e.Transport[n](this, this.sessionid);
                             return null
                         }, o.prototype.connect = function(t) {
-                            if (console.log("DBG Emile io socket connect"), this.connecting) return this;
+                            if (this.connecting) return this;
                             var n = this;
                             return n.connecting = !0, this.handshake((function(o, i, r, s) {
                                 n.sessionid = o, n.closeTimeout = 1e3 * r, n.heartbeatTimeout = 1e3 * i, n.transports || (n.transports = n.origTransports = s ? e.util.intersect(s.split(","), n.options.transports) : n.options.transports), n.setHeartbeatTimeout(),
                                     function t(e) {
-                                        if (console.log("DBG Emile io socket connecting to transport"), n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(e), !n.transport) return n.publish("connect_failed");
-                                        console.log("DBG Emile io socket connecting to transport (2)"), n.transport.ready(n, (function() {
-                                            console.log("DBG Emile io transport is ready"), n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
-                                                if (!n.connected && (console.log("DBG Emile io socket timeout...."), n.connecting = !1, n.options["try multiple transports"])) {
+                                        if (n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(e), !n.transport) return n.publish("connect_failed");
+                                        n.transport.ready(n, (function() {
+                                            n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
+                                                if (!n.connected && (n.connecting = !1, n.options["try multiple transports"])) {
                                                     for (var e = n.transports; e.length > 0 && e.splice(0, 1)[0] != n.transport.name;);
                                                     e.length ? t(e) : n.publish("connect_failed")
                                                 }
                                             }), n.options["connect timeout"]))
                                         }))
                                     }(n.transports), n.once("connect", (function() {
-                                        console.log("DBG Emile io socket something connected"), clearTimeout(n.connectTimeoutTimer), t && "function" == typeof t && t()
+                                        clearTimeout(n.connectTimeoutTimer), t && "function" == typeof t && t()
                                     }))
                             })), this
                         }, o.prototype.setHeartbeatTimeout = function() {
                             if (clearTimeout(this.heartbeatTimeoutTimer), !this.transport || this.transport.heartbeats()) {
                                 var t = this;
                                 this.heartbeatTimeoutTimer = setTimeout((function() {
                                     t.transport.onClose()
@@ -443,34 +442,33 @@
                         }, o.prototype.setBuffer = function(t) {
                             this.doBuffer = t, !t && this.connected && this.buffer.length && (this.options.manualFlush || this.flushBuffer())
                         }, o.prototype.flushBuffer = function() {
                             this.transport.payload(this.buffer), this.buffer = []
                         }, o.prototype.disconnect = function() {
                             return (this.connected || this.connecting) && (this.open && this.of("").packet({
                                 type: "disconnect"
-                            }), console.log("DBG Emile io socket disconnect -> booting"), this.onDisconnect("booted")), this
+                            }), this.onDisconnect("booted")), this
                         }, o.prototype.disconnectSync = function() {
                             var t = e.util.request(),
                                 n = ["http" + (this.options.secure ? "s" : "") + ":/", this.options.host + ":" + this.options.port, this.options.resource, e.protocol, "", this.sessionid].join("/") + "/?disconnect=1";
-                            t.open("GET", n, !1), t.send(null), console.log("DBG Emile io socket disconnectSync -> booting"), this.onDisconnect("booted")
+                            t.open("GET", n, !1), t.send(null), this.onDisconnect("booted")
                         }, o.prototype.isXDomain = function() {
                             var t = n.location.port || ("https:" == n.location.protocol ? 443 : 80);
                             return this.options.host !== n.location.hostname || this.options.port != t
                         }, o.prototype.onConnect = function() {
-                            console.log("DBG Emile io socket onConnect"), this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
+                            this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
                         }, o.prototype.onOpen = function() {
                             this.open = !0
                         }, o.prototype.onClose = function() {
                             this.open = !1, clearTimeout(this.heartbeatTimeoutTimer)
                         }, o.prototype.onPacket = function(t) {
                             this.of(t.endpoint).onPacket(t)
                         }, o.prototype.onError = function(t) {
-                            console.log("DBG Emile io socket onError", t), t && t.advice && "reconnect" === t.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", t && t.reason ? t.reason : t)
+                            t && t.advice && "reconnect" === t.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", t && t.reason ? t.reason : t)
                         }, o.prototype.onDisconnect = function(t) {
-                            console.log("DBG Emile io socket onDisconnect", t);
                             var e = this.connected,
                                 n = this.connecting;
                             this.connected = !1, this.connecting = !1, this.open = !1, (e || n) && (this.transport.close(), this.transport.clearTimeouts(), e && (this.publish("disconnect", t), "booted" != t && this.options.reconnect && !this.reconnecting && this.reconnect()))
                         }, o.prototype.reconnect = function() {
                             this.reconnecting = !0, this.reconnectionAttempts = 0, this.reconnectionDelay = this.options["reconnection delay"];
                             var t = this,
                                 e = this.options["max reconnection attempts"],
@@ -513,15 +511,15 @@
                         }, n.prototype.emit = function(t) {
                             var e = Array.prototype.slice.call(arguments, 1),
                                 n = e[e.length - 1],
                                 o = {
                                     type: "event",
                                     name: t
                                 };
-                            return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, e = e.slice(0, e.length - 1)), o.args = e, console.log("DBG Emile SocketNamespace.emit:", o), this.packet(o)
+                            return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, e = e.slice(0, e.length - 1)), o.args = e, this.packet(o)
                         }, n.prototype.disconnect = function() {
                             return "" === this.name ? this.socket.disconnect() : (this.packet({
                                 type: "disconnect"
                             }), this.$emit("disconnect")), this
                         }, n.prototype.onPacket = function(t) {
                             var n = this;
 
@@ -533,15 +531,15 @@
                                 })
                             }
                             switch (t.type) {
                                 case "connect":
                                     this.$emit("connect");
                                     break;
                                 case "disconnect":
-                                    "" === this.name ? (console.log("DBG Emile io socket onPacket disconnect, reason=", t.reason), this.socket.onDisconnect(t.reason || "booted")) : this.$emit("disconnect", t.reason);
+                                    "" === this.name ? this.socket.onDisconnect(t.reason || "booted") : this.$emit("disconnect", t.reason);
                                     break;
                                 case "message":
                                 case "json":
                                     var i = ["message", t.data];
                                     "data" == t.ack ? i.push(o) : t.ack && this.packet({
                                         type: "ack",
                                         ackId: t.id
@@ -550,15 +548,15 @@
                                 case "event":
                                     i = [t.name].concat(t.args), "data" == t.ack && i.push(o), this.$emit.apply(this, i);
                                     break;
                                 case "ack":
                                     this.acks[t.ackId] && (this.acks[t.ackId].apply(this, t.args), delete this.acks[t.ackId]);
                                     break;
                                 case "error":
-                                    t.advice ? (console.log("DBG Emile onError from packet:"), console.log(t), this.socket.onError(t)) : "unauthorized" == t.reason ? this.$emit("connect_failed", t.reason) : this.$emit("error", t.reason)
+                                    t.advice ? this.socket.onError(t) : "unauthorized" == t.reason ? this.$emit("connect_failed", t.reason) : this.$emit("error", t.reason)
                             }
                         }, o.prototype.send = function() {
                             this.namespace.flags[this.name] = !0, this.namespace.send.apply(this.namespace, arguments)
                         }, o.prototype.emit = function() {
                             this.namespace.flags[this.name] = !0, this.namespace.emit.apply(this.namespace, arguments)
                         }
                     }(io, io), function(t, e, n) {
@@ -571,37 +569,37 @@
                             return t || (t = n.MozWebSocket || n.WebSocket), this.websocket = new t(this.prepareUrl() + o), this.websocket.onopen = function() {
                                 i.onOpen(), i.socket.setBuffer(!1)
                             }, this.websocket.onmessage = function(t) {
                                 i.onData(t.data)
                             }, this.websocket.onclose = function() {
                                 i.onClose(), i.socket.setBuffer(!0)
                             }, this.websocket.onerror = function(t) {
-                                console.log("DBG Emile onerror from websocket WS", t), i.onError(t)
+                                i.onError(t)
                             }, this
                         }, e.util.ua.iDevice ? o.prototype.send = function(t) {
                             var e = this;
                             return setTimeout((function() {
                                 e.websocket.send(t)
                             }), 0), this
                         } : o.prototype.send = function(t) {
                             return this.websocket.send(t), this
                         }, o.prototype.payload = function(t) {
                             for (var e = 0, n = t.length; e < n; e++) this.packet(t[e]);
                             return this
                         }, o.prototype.close = function() {
                             return this.websocket.close(), this
                         }, o.prototype.onError = function(t) {
-                            console.log("DBG Emile onerror from websocket WS.onError, forwarding", t), this.socket.onError(t)
+                            this.socket.onError(t)
                         }, o.prototype.scheme = function() {
                             return this.socket.options.secure ? "wss" : "ws"
                         }, o.check = function() {
                             return "WebSocket" in n && !("__addTask" in WebSocket) || "MozWebSocket" in n
                         }, o.xdomainCheck = function() {
                             return !0
-                        }, console.log("DBG Emile: skipping transport websocket.")
+                        }
                     }(io.Transport, io, self), function(t, e) {
                         function n() {
                             e.Transport.websocket.apply(this, arguments)
                         }
                         t.flashsocket = n, e.util.inherit(n, e.Transport.websocket), n.prototype.name = "flashsocket", n.prototype.open = function() {
                             var t = this,
                                 n = arguments;
@@ -626,239 +624,239 @@
                             var r = this;
                             if (document.body) return i();
                             e.util.load(i)
                         }, n.check = function() {
                             return !("undefined" == typeof WebSocket || !("__initialize" in WebSocket) || !swfobject) && swfobject.getFlashPlayerVersion().major >= 10
                         }, n.xdomainCheck = function() {
                             return !0
-                        }, console.log("DBG Emile: skipping transport flashsocket (come on we're in 2023).")
+                        }
                     }(io.Transport, io), "undefined" != typeof window) var swfobject = function() {
                     var t, e, n, o, i, r, s = "undefined",
                         a = "object",
                         c = "Shockwave Flash",
                         p = "application/x-shockwave-flash",
-                        l = "SWFObjectExprInst",
-                        u = "onreadystatechange",
+                        u = "SWFObjectExprInst",
+                        l = "onreadystatechange",
                         h = window,
                         f = document,
                         d = navigator,
                         y = !1,
                         m = [function() {
                             y ? function() {
                                 var t = f.getElementsByTagName("body")[0],
-                                    e = R(a);
+                                    e = B(a);
                                 e.setAttribute("type", p);
                                 var n = t.appendChild(e);
                                 if (n) {
                                     var o = 0;
                                     ! function() {
                                         if (typeof n.GetVariable != s) {
                                             var i = n.GetVariable("$version");
                                             i && (i = i.split(" ")[1].split(","), S.pv = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
                                         } else if (o < 10) return o++, void setTimeout(arguments.callee, 10);
-                                        t.removeChild(e), n = null, W()
+                                        t.removeChild(e), n = null, O()
                                     }()
-                                } else W()
-                            }() : W()
+                                } else O()
+                            }() : O()
                         }],
                         v = [],
-                        g = [],
                         k = [],
+                        g = [],
                         b = !1,
                         w = !1,
                         _ = !0,
                         S = function() {
                             var t = typeof f.getElementById != s && typeof f.getElementsByTagName != s && typeof f.createElement != s,
                                 e = d.userAgent.toLowerCase(),
                                 n = d.platform.toLowerCase(),
                                 o = /win/.test(n || e),
                                 i = /mac/.test(n || e),
                                 r = !!/webkit/.test(e) && parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")),
-                                l = !1,
-                                u = [0, 0, 0],
+                                u = !1,
+                                l = [0, 0, 0],
                                 m = null;
-                            if (typeof d.plugins != s && typeof d.plugins[c] == a) !(m = d.plugins[c].description) || typeof d.mimeTypes != s && d.mimeTypes[p] && !d.mimeTypes[p].enabledPlugin || (y = !0, l = !1, m = m.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), u[0] = parseInt(m.replace(/^(.*)\..*$/, "$1"), 10), u[1] = parseInt(m.replace(/^.*\.(.*)\s.*$/, "$1"), 10), u[2] = /[a-zA-Z]/.test(m) ? parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
+                            if (typeof d.plugins != s && typeof d.plugins[c] == a) !(m = d.plugins[c].description) || typeof d.mimeTypes != s && d.mimeTypes[p] && !d.mimeTypes[p].enabledPlugin || (y = !0, u = !1, m = m.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), l[0] = parseInt(m.replace(/^(.*)\..*$/, "$1"), 10), l[1] = parseInt(m.replace(/^.*\.(.*)\s.*$/, "$1"), 10), l[2] = /[a-zA-Z]/.test(m) ? parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
                             else if (typeof h[["Active"].concat("Object").join("X")] != s) try {
                                 var v = new(window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");
-                                v && (m = v.GetVariable("$version")) && (l = !0, m = m.split(" ")[1].split(","), u = [parseInt(m[0], 10), parseInt(m[1], 10), parseInt(m[2], 10)])
+                                v && (m = v.GetVariable("$version")) && (u = !0, m = m.split(" ")[1].split(","), l = [parseInt(m[0], 10), parseInt(m[1], 10), parseInt(m[2], 10)])
                             } catch (t) {}
                             return {
                                 w3: t,
-                                pv: u,
+                                pv: l,
                                 wk: r,
-                                ie: l,
+                                ie: u,
                                 win: o,
                                 mac: i
                             }
                         }();
 
-                    function E() {
+                    function T() {
                         if (!b) {
                             try {
-                                var t = f.getElementsByTagName("body")[0].appendChild(R("span"));
+                                var t = f.getElementsByTagName("body")[0].appendChild(B("span"));
                                 t.parentNode.removeChild(t)
                             } catch (t) {
                                 return
                             }
                             b = !0;
                             for (var e = m.length, n = 0; n < e; n++) m[n]()
                         }
                     }
 
-                    function T(t) {
+                    function E(t) {
                         b ? t() : m[m.length] = t
                     }
 
                     function C(t) {
                         if (typeof h.addEventListener != s) h.addEventListener("load", t, !1);
                         else if (typeof f.addEventListener != s) f.addEventListener("load", t, !1);
                         else if (typeof h.attachEvent != s) ! function(t, e, n) {
-                            t.attachEvent(e, n), k[k.length] = [t, e, n]
+                            t.attachEvent(e, n), g[g.length] = [t, e, n]
                         }(h, "onload", t);
                         else if ("function" == typeof h.onload) {
                             var e = h.onload;
                             h.onload = function() {
                                 e(), t()
                             }
                         } else h.onload = t
                     }
 
-                    function W() {
+                    function O() {
                         var t = v.length;
                         if (t > 0)
                             for (var e = 0; e < t; e++) {
                                 var n = v[e].id,
                                     o = v[e].callbackFn,
                                     i = {
                                         success: !1,
                                         id: n
                                     };
                                 if (S.pv[0] > 0) {
-                                    var r = L(n);
+                                    var r = R(n);
                                     if (r)
                                         if (!P(v[e].swfVersion) || S.wk && S.wk < 312)
-                                            if (v[e].expressInstall && x()) {
+                                            if (v[e].expressInstall && A()) {
                                                 var a = {};
                                                 a.data = v[e].expressInstall, a.width = r.getAttribute("width") || "0", a.height = r.getAttribute("height") || "0", r.getAttribute("class") && (a.styleclass = r.getAttribute("class")), r.getAttribute("align") && (a.align = r.getAttribute("align"));
-                                                for (var c = {}, p = r.getElementsByTagName("param"), l = p.length, u = 0; u < l; u++) "movie" != p[u].getAttribute("name").toLowerCase() && (c[p[u].getAttribute("name")] = p[u].getAttribute("value"));
-                                                D(a, c, n, o)
-                                            } else A(r), o && o(i);
-                                    else $(n, !0), o && (i.success = !0, i.ref = O(n), o(i))
+                                                for (var c = {}, p = r.getElementsByTagName("param"), u = p.length, l = 0; l < u; l++) "movie" != p[l].getAttribute("name").toLowerCase() && (c[p[l].getAttribute("name")] = p[l].getAttribute("value"));
+                                                x(a, c, n, o)
+                                            } else N(r), o && o(i);
+                                    else $(n, !0), o && (i.success = !0, i.ref = W(n), o(i))
                                 } else if ($(n, !0), o) {
-                                    var h = O(n);
+                                    var h = W(n);
                                     h && typeof h.SetVariable != s && (i.success = !0, i.ref = h), o(i)
                                 }
                             }
                     }
 
-                    function O(t) {
+                    function W(t) {
                         var e = null,
-                            n = L(t);
+                            n = R(t);
                         if (n && "OBJECT" == n.nodeName)
                             if (typeof n.SetVariable != s) e = n;
                             else {
                                 var o = n.getElementsByTagName(a)[0];
                                 o && (e = o)
                             } return e
                     }
 
-                    function x() {
+                    function A() {
                         return !w && P("6.0.65") && (S.win || S.mac) && !(S.wk && S.wk < 312)
                     }
 
-                    function D(i, r, a, c) {
+                    function x(i, r, a, c) {
                         w = !0, n = c || null, o = {
                             success: !1,
                             id: a
                         };
-                        var p = L(a);
+                        var p = R(a);
                         if (p) {
-                            "OBJECT" == p.nodeName ? (t = N(p), e = null) : (t = p, e = a), i.id = l, (typeof i.width == s || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == s || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), f.title = f.title.slice(0, 47) + " - Flash Player Installation";
-                            var u = S.ie && S.win ? ["Active"].concat("").join("X") : "PlugIn",
-                                d = "MMredirectURL=" + h.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + u + "&MMdoctitle=" + f.title;
+                            "OBJECT" == p.nodeName ? (t = I(p), e = null) : (t = p, e = a), i.id = u, (typeof i.width == s || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == s || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), f.title = f.title.slice(0, 47) + " - Flash Player Installation";
+                            var l = S.ie && S.win ? ["Active"].concat("").join("X") : "PlugIn",
+                                d = "MMredirectURL=" + h.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + l + "&MMdoctitle=" + f.title;
                             if (typeof r.flashvars != s ? r.flashvars += "&" + d : r.flashvars = d, S.ie && S.win && 4 != p.readyState) {
-                                var y = R("div");
+                                var y = B("div");
                                 a += "SWFObjectNew", y.setAttribute("id", a), p.parentNode.insertBefore(y, p), p.style.display = "none",
                                     function() {
                                         4 == p.readyState ? p.parentNode.removeChild(p) : setTimeout(arguments.callee, 10)
                                     }()
                             }
-                            B(i, r, a)
+                            j(i, r, a)
                         }
                     }
 
-                    function A(t) {
+                    function N(t) {
                         if (S.ie && S.win && 4 != t.readyState) {
-                            var e = R("div");
-                            t.parentNode.insertBefore(e, t), e.parentNode.replaceChild(N(t), e), t.style.display = "none",
+                            var e = B("div");
+                            t.parentNode.insertBefore(e, t), e.parentNode.replaceChild(I(t), e), t.style.display = "none",
                                 function() {
                                     4 == t.readyState ? t.parentNode.removeChild(t) : setTimeout(arguments.callee, 10)
                                 }()
-                        } else t.parentNode.replaceChild(N(t), t)
+                        } else t.parentNode.replaceChild(I(t), t)
                     }
 
-                    function N(t) {
-                        var e = R("div");
+                    function I(t) {
+                        var e = B("div");
                         if (S.win && S.ie) e.innerHTML = t.innerHTML;
                         else {
                             var n = t.getElementsByTagName(a)[0];
                             if (n) {
                                 var o = n.childNodes;
                                 if (o)
                                     for (var i = o.length, r = 0; r < i; r++) 1 == o[r].nodeType && "PARAM" == o[r].nodeName || 8 == o[r].nodeType || e.appendChild(o[r].cloneNode(!0))
                             }
                         }
                         return e
                     }
 
-                    function B(t, e, n) {
-                        var o, i = L(n);
+                    function j(t, e, n) {
+                        var o, i = R(n);
                         if (S.wk && S.wk < 312) return o;
                         if (i)
                             if (typeof t.id == s && (t.id = n), S.ie && S.win) {
                                 var r = "";
                                 for (var c in t) t[c] != Object.prototype[c] && ("data" == c.toLowerCase() ? e.movie = t[c] : "styleclass" == c.toLowerCase() ? r += ' class="' + t[c] + '"' : "classid" != c.toLowerCase() && (r += " " + c + '="' + t[c] + '"'));
-                                var l = "";
-                                for (var u in e) e[u] != Object.prototype[u] && (l += '<param name="' + u + '" value="' + e[u] + '" />');
-                                i.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + r + ">" + l + "</object>", g[g.length] = t.id, o = L(t.id)
+                                var u = "";
+                                for (var l in e) e[l] != Object.prototype[l] && (u += '<param name="' + l + '" value="' + e[l] + '" />');
+                                i.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + r + ">" + u + "</object>", k[k.length] = t.id, o = R(t.id)
                             } else {
-                                var h = R(a);
+                                var h = B(a);
                                 for (var f in h.setAttribute("type", p), t) t[f] != Object.prototype[f] && ("styleclass" == f.toLowerCase() ? h.setAttribute("class", t[f]) : "classid" != f.toLowerCase() && h.setAttribute(f, t[f]));
-                                for (var d in e) e[d] != Object.prototype[d] && "movie" != d.toLowerCase() && I(h, d, e[d]);
+                                for (var d in e) e[d] != Object.prototype[d] && "movie" != d.toLowerCase() && D(h, d, e[d]);
                                 i.parentNode.replaceChild(h, i), o = h
                             } return o
                     }
 
-                    function I(t, e, n) {
-                        var o = R("param");
+                    function D(t, e, n) {
+                        var o = B("param");
                         o.setAttribute("name", e), o.setAttribute("value", n), t.appendChild(o)
                     }
 
-                    function j(t) {
-                        var e = L(t);
+                    function L(t) {
+                        var e = R(t);
                         e && "OBJECT" == e.nodeName && (S.ie && S.win ? (e.style.display = "none", function() {
                             4 == e.readyState ? function(t) {
-                                var e = L(t);
+                                var e = R(t);
                                 if (e) {
                                     for (var n in e) "function" == typeof e[n] && (e[n] = null);
                                     e.parentNode.removeChild(e)
                                 }
                             }(t) : setTimeout(arguments.callee, 10)
                         }()) : e.parentNode.removeChild(e))
                     }
 
-                    function L(t) {
+                    function R(t) {
                         var e = null;
                         try {
                             e = f.getElementById(t)
                         } catch (t) {}
                         return e
                     }
 
-                    function R(t) {
+                    function B(t) {
                         return f.createElement(t)
                     }
 
                     function P(t) {
                         var e = S.pv,
                             n = t.split(".");
                         return n[0] = parseInt(n[0], 10), n[1] = parseInt(n[1], 10) || 0, n[2] = parseInt(n[2], 10) || 0, e[0] > n[0] || e[0] == n[0] && e[1] > n[1] || e[0] == n[0] && e[1] == n[1] && e[2] >= n[2]
@@ -866,128 +864,128 @@
 
                     function F(t, e, n, o) {
                         if (!S.ie || !S.mac) {
                             var c = f.getElementsByTagName("head")[0];
                             if (c) {
                                 var p = n && "string" == typeof n ? n : "screen";
                                 if (o && (i = null, r = null), !i || r != p) {
-                                    var l = R("style");
-                                    l.setAttribute("type", "text/css"), l.setAttribute("media", p), i = c.appendChild(l), S.ie && S.win && typeof f.styleSheets != s && f.styleSheets.length > 0 && (i = f.styleSheets[f.styleSheets.length - 1]), r = p
+                                    var u = B("style");
+                                    u.setAttribute("type", "text/css"), u.setAttribute("media", p), i = c.appendChild(u), S.ie && S.win && typeof f.styleSheets != s && f.styleSheets.length > 0 && (i = f.styleSheets[f.styleSheets.length - 1]), r = p
                                 }
                                 S.ie && S.win ? i && typeof i.addRule == a && i.addRule(t, e) : i && typeof f.createTextNode != s && i.appendChild(f.createTextNode(t + " {" + e + "}"))
                             }
                         }
                     }
 
                     function $(t, e) {
                         if (_) {
                             var n = e ? "visible" : "hidden";
-                            b && L(t) ? L(t).style.visibility = n : F("#" + t, "visibility:" + n)
+                            b && R(t) ? R(t).style.visibility = n : F("#" + t, "visibility:" + n)
                         }
                     }
 
                     function q(t) {
                         return null != /[\\\"<>\.;]/.exec(t) && typeof encodeURIComponent != s ? encodeURIComponent(t) : t
                     }
-                    return S.w3 && ((typeof f.readyState != s && "complete" == f.readyState || typeof f.readyState == s && (f.getElementsByTagName("body")[0] || f.body)) && E(), b || (typeof f.addEventListener != s && f.addEventListener("DOMContentLoaded", E, !1), S.ie && S.win && (f.attachEvent(u, (function() {
-                        "complete" == f.readyState && (f.detachEvent(u, arguments.callee), E())
+                    return S.w3 && ((typeof f.readyState != s && "complete" == f.readyState || typeof f.readyState == s && (f.getElementsByTagName("body")[0] || f.body)) && T(), b || (typeof f.addEventListener != s && f.addEventListener("DOMContentLoaded", T, !1), S.ie && S.win && (f.attachEvent(l, (function() {
+                        "complete" == f.readyState && (f.detachEvent(l, arguments.callee), T())
                     })), h == top && function() {
                         if (!b) {
                             try {
                                 f.documentElement.doScroll("left")
                             } catch (t) {
                                 return void setTimeout(arguments.callee, 0)
                             }
-                            E()
+                            T()
                         }
                     }()), S.wk && function() {
-                        b || (/loaded|complete/.test(f.readyState) ? E() : setTimeout(arguments.callee, 0))
-                    }(), C(E))), S.ie && S.win && window.attachEvent("onunload", (function() {
-                        for (var t = k.length, e = 0; e < t; e++) k[e][0].detachEvent(k[e][1], k[e][2]);
-                        for (var n = g.length, o = 0; o < n; o++) j(g[o]);
+                        b || (/loaded|complete/.test(f.readyState) ? T() : setTimeout(arguments.callee, 0))
+                    }(), C(T))), S.ie && S.win && window.attachEvent("onunload", (function() {
+                        for (var t = g.length, e = 0; e < t; e++) g[e][0].detachEvent(g[e][1], g[e][2]);
+                        for (var n = k.length, o = 0; o < n; o++) L(k[o]);
                         for (var i in S) S[i] = null;
                         for (var r in S = null, swfobject) swfobject[r] = null;
                         swfobject = null
                     })), {
                         registerObject: function(t, e, n, o) {
                             if (S.w3 && t && e) {
                                 var i = {};
                                 i.id = t, i.swfVersion = e, i.expressInstall = n, i.callbackFn = o, v[v.length] = i, $(t, !1)
                             } else o && o({
                                 success: !1,
                                 id: t
                             })
                         },
                         getObjectById: function(t) {
-                            if (S.w3) return O(t)
+                            if (S.w3) return W(t)
                         },
-                        embedSWF: function(t, e, n, o, i, r, c, p, l, u) {
+                        embedSWF: function(t, e, n, o, i, r, c, p, u, l) {
                             var h = {
                                 success: !1,
                                 id: e
                             };
-                            S.w3 && !(S.wk && S.wk < 312) && t && e && n && o && i ? ($(e, !1), T((function() {
+                            S.w3 && !(S.wk && S.wk < 312) && t && e && n && o && i ? ($(e, !1), E((function() {
                                 n += "", o += "";
                                 var f = {};
-                                if (l && typeof l === a)
-                                    for (var d in l) f[d] = l[d];
+                                if (u && typeof u === a)
+                                    for (var d in u) f[d] = u[d];
                                 f.data = t, f.width = n, f.height = o;
                                 var y = {};
                                 if (p && typeof p === a)
                                     for (var m in p) y[m] = p[m];
                                 if (c && typeof c === a)
                                     for (var v in c) typeof y.flashvars != s ? y.flashvars += "&" + v + "=" + c[v] : y.flashvars = v + "=" + c[v];
                                 if (P(i)) {
-                                    var g = B(f, y, e);
-                                    f.id == e && $(e, !0), h.success = !0, h.ref = g
+                                    var k = j(f, y, e);
+                                    f.id == e && $(e, !0), h.success = !0, h.ref = k
                                 } else {
-                                    if (r && x()) return f.data = r, void D(f, y, e, u);
+                                    if (r && A()) return f.data = r, void x(f, y, e, l);
                                     $(e, !0)
                                 }
-                                u && u(h)
-                            }))) : u && u(h)
+                                l && l(h)
+                            }))) : l && l(h)
                         },
                         switchOffAutoHideShow: function() {
                             _ = !1
                         },
                         ua: S,
                         getFlashPlayerVersion: function() {
                             return {
                                 major: S.pv[0],
                                 minor: S.pv[1],
                                 release: S.pv[2]
                             }
                         },
                         hasFlashPlayerVersion: P,
                         createSWF: function(t, e, n) {
-                            return S.w3 ? B(t, e, n) : void 0
+                            return S.w3 ? j(t, e, n) : void 0
                         },
                         showExpressInstall: function(t, e, n, o) {
-                            S.w3 && x() && D(t, e, n, o)
+                            S.w3 && A() && x(t, e, n, o)
                         },
                         removeSWF: function(t) {
-                            S.w3 && j(t)
+                            S.w3 && L(t)
                         },
                         createCSS: function(t, e, n, o) {
                             S.w3 && F(t, e, n, o)
                         },
-                        addDomLoadEvent: T,
+                        addDomLoadEvent: E,
                         addLoadEvent: C,
                         getQueryParamValue: function(t) {
                             var e = f.location.search || f.location.hash;
                             if (e) {
                                 if (/\?/.test(e) && (e = e.split("?")[1]), null == t) return q(e);
                                 for (var n = e.split("&"), o = 0; o < n.length; o++)
                                     if (n[o].substring(0, n[o].indexOf("=")) == t) return q(n[o].substring(n[o].indexOf("=") + 1))
                             }
                             return ""
                         },
                         expressInstallCallback: function() {
                             if (w) {
-                                var i = L(l);
+                                var i = R(u);
                                 i && t && (i.parentNode.replaceChild(t, i), e && ($(e, !0), S.ie && S.win && (t.style.display = "block")), n && n(o)), w = !1
                             }
                         }
                     }
                 }();
                 ! function() {
                     if ("undefined" != typeof window && !window.WebSocket) {
```

## Comparing `ipynao/labextension/static/367.85a5246f5a9e7b7a8ee5.js` & `ipynao/labextension/static/367.b645d81d431e42710263.js`

 * *Files 12% similar despite different names*

### js-beautify {}

```diff
@@ -1,421 +1,427 @@
 (self.webpackChunkipynao = self.webpackChunkipynao || []).push([
     [367], {
         183: function(e, t, n) {
             "use strict";
-            var o = this && this.__importDefault || function(e) {
+            var i = this && this.__importDefault || function(e) {
                 return e && e.__esModule ? e : {
                     default: e
                 }
             };
             Object.defineProperty(t, "__esModule", {
                 value: !0
             }), t.QiSession = void 0;
-            const i = o(n(798));
+            const s = i(n(562));
             t.QiSession = class {
-                constructor(e = "nao.local", t = "80") {
-                    this.connected = !1, console.log("DBG Emile qim about to connect w/17"), window.oioi = i.default;
-                    let n = i.default.connect("nao:nao@" + e + ":" + t, {
-                            resource: "libs/qimessaging/2/socket.io",
-                            "force new connection": !0
-                        }),
-                        o = new Array,
-                        s = new Array,
-                        a = 0;
-
-                    function c(e, t, i) {
-                        return function() {
-                            let s = ++a,
-                                c = Array.prototype.slice.call(arguments, 0),
-                                l = new Promise((function(e, t) {
-                                    o[s] = {
-                                        resolve: e,
-                                        reject: t
-                                    }
-                                }));
-                            return "connect" == c[0] && (o[s].__cbi = i), n.emit("call", {
-                                idm: s,
-                                params: {
-                                    obj: e,
-                                    member: t,
-                                    args: c
-                                }
-                            }), l
+                constructor(e = "nao.local", t = "80", n, i) {
+                    this.connected = n, this.disconnected = i, this._socket = s.default.connect("nao:nao@" + e + ":" + t, {
+                        resource: "libs/qimessaging/2/socket.io",
+                        "force new connection": !0
+                    }), this._dfd = [], this._sigs = [], this._idm = 0, this._socket.on("reply", (e => {
+                        this.onReply(e)
+                    })), this._socket.on("error", (e => {
+                        this.onError(e)
+                    })), this._socket.on("signal", (e => {
+                        this.onSignal(e)
+                    })), this._socket.on("disconnect", this.onDisconnect), this._socket.on("connect", this.onConnect), this.service = this.createMetaCall("ServiceDirectory", "service", "data")
+                }
+                isConnected() {
+                    return void 0 !== this._socket && this._socket.socket.connected
+                }
+                onReply(e) {
+                    const t = e.idm;
+                    if (void 0 !== e.result && void 0 !== e.result.metaobject) {
+                        const n = {
+                                __MetaObject: e.result.metaobject
+                            },
+                            i = e.result.pyobject;
+                        this._sigs[i] = [];
+                        const s = n.__MetaObject.methods;
+                        for (const e in s) {
+                            const t = s[e].name;
+                            n[t] = this.createMetaCall(i, t, "data")
                         }
+                        const o = n.__MetaObject.signals;
+                        for (const e in o) {
+                            const t = o[e].name;
+                            n[t] = this.createMetaSignal(i, t, !1)
+                        }
+                        const a = n.__MetaObject.properties;
+                        for (const e in a) {
+                            const t = a[e].name;
+                            n[t] = this.createMetaSignal(i, t, !0)
+                        }
+                        this._dfd[t].resolve(n)
+                    } else {
+                        if (void 0 !== this._dfd[t].__cbi) {
+                            const n = this._dfd[t].__cbi;
+                            this._sigs[n.obj][n.signal][e.result] = n.cb
+                        }
+                        this._dfd[t].resolve(e.result)
                     }
-
-                    function l(e, t, n) {
-                        let o = {};
-                        return s[e][t] = new Array, o.connect = function(n) {
-                            return c(e, t, {
-                                obj: e,
-                                signal: t,
-                                cb: n
-                            })("connect")
-                        }, o.disconnect = function(n) {
-                            return delete s[e][t][n], c(e, t, "data")("disconnect", n)
-                        }, n ? (o.setValue = function() {
-                            let n = Array.prototype.slice.call(arguments, 0);
-                            return c(e, t, "data").apply(this, ["setValue"].concat(n))
-                        }, o.value = function() {
-                            return c(e, t, "data")("value")
-                        }, o) : o
-                    }
-                    n.on("reply", (function(e) {
-                        let t = e.idm;
-                        if (null != e.result && null != e.result.metaobject) {
-                            let n = {
-                                    __MetaObject: e.result.metaobject
-                                },
-                                i = e.result.pyobject;
-                            s[i] = new Array;
-                            let a = n.__MetaObject.methods;
-                            for (let e in a) {
-                                let t = a[e].name;
-                                n[t] = c(i, t, "data")
-                            }
-                            let r = n.__MetaObject.signals;
-                            for (let e in r) {
-                                let t = r[e].name;
-                                n[t] = l(i, t, !1)
-                            }
-                            let u = n.__MetaObject.properties;
-                            for (let e in u) {
-                                let t = u[e].name;
-                                n[t] = l(i, t, !0)
+                    delete this._dfd[t]
+                }
+                onError(e) {
+                    void 0 !== e.idm && (this._dfd[e.idm].reject(e.result), delete this._dfd[e.idm])
+                }
+                onSignal(e) {
+                    const t = e.result,
+                        n = this._sigs[t.obj][t.signal][t.link];
+                    void 0 !== n && n.apply(this, t.data)
+                }
+                onConnect() {
+                    this.connected && this.connected(this)
+                }
+                onDisconnect(e) {
+                    for (const e in this._dfd) this._dfd[e].reject("Call " + e + " canceled: disconnected"), delete this._dfd[e];
+                    this.disconnected && this.disconnected()
+                }
+                createMetaCall(e, t, n) {
+                    return (...i) => {
+                        ++this._idm;
+                        const s = new Promise(((e, t) => {
+                            this._dfd[this._idm] = {
+                                resolve: e,
+                                reject: t
                             }
-                            o[t].resolve(n)
-                        } else {
-                            if (null != o[t].__cbi) {
-                                let n = o[t].__cbi;
-                                s[n.obj][n.signal][e.result] = n.cb
+                        }));
+                        return "connect" === i[0] && (this.isConnected = this._socket.socket.connected, this._dfd[this._idm].__cbi = n), this._socket.emit("call", {
+                            idm: this._idm,
+                            params: {
+                                obj: e,
+                                member: t,
+                                args: i
                             }
-                            o[t].resolve(e.result)
-                        }
-                        delete o[t]
-                    })), n.on("error", (function(e) {
-                        null != e.idm && (o[e.idm].reject(e.result), delete o[e.idm])
-                    })), n.on("signal", (function(e) {
-                        let t = e.result,
-                            n = s[t.obj][t.signal][t.link];
-                        null != n && n.apply(this, t.data)
-                    })), n.on("disconnect", (function(e) {
-                        for (let e in o) o[e].reject("Call " + e + " canceled: disconnected"), delete o[e];
-                        this.disconnected && console.log("DBG Isabel disconnected")
-                    })), this.service = c("ServiceDirectory", "service", "data"), n.on("connect", (function() {
-                        this.connected && console.log("DBG Isabel already connected")
-                    }))
+                        }), s
+                    }
+                }
+                createMetaSignal(e, t, n) {
+                    const i = {};
+                    return this._sigs[e][t] = [], i.connect = n => this.createMetaCall(e, t, {
+                        obj: e,
+                        signal: t,
+                        cb: n
+                    })("connect"), i.disconnect = n => (delete this._sigs[e][t][n], this.createMetaCall(e, t, "data")("disconnect", n)), n ? (i.setValue = (...n) => this.createMetaCall(e, t, "data").apply(this, ["setValue"].concat(n)), i.value = () => this.createMetaCall(e, t, "data")("value"), i) : i
                 }
             }
         },
         657: (e, t, n) => {
             "use strict";
             Object.defineProperty(t, "__esModule", {
                 value: !0
             }), t.MODULE_NAME = t.MODULE_VERSION = void 0;
-            const o = n(147);
-            t.MODULE_VERSION = o.version, t.MODULE_NAME = o.name
+            const i = n(147);
+            t.MODULE_VERSION = i.version, t.MODULE_NAME = i.name
         },
         367: function(e, t, n) {
             "use strict";
-            var o = this && this.__awaiter || function(e, t, n, o) {
-                return new(n || (n = Promise))((function(i, s) {
+            var i = this && this.__awaiter || function(e, t, n, i) {
+                return new(n || (n = Promise))((function(s, o) {
                     function a(e) {
                         try {
-                            l(o.next(e))
+                            r(i.next(e))
                         } catch (e) {
-                            s(e)
+                            o(e)
                         }
                     }
 
                     function c(e) {
                         try {
-                            l(o.throw(e))
+                            r(i.throw(e))
                         } catch (e) {
-                            s(e)
+                            o(e)
                         }
                     }
 
-                    function l(e) {
+                    function r(e) {
                         var t;
-                        e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
+                        e.done ? s(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                             e(t)
                         }))).then(a, c)
                     }
-                    l((o = o.apply(e, t || [])).next())
+                    r((i = i.apply(e, t || [])).next())
                 }))
             };
             Object.defineProperty(t, "__esModule", {
                 value: !0
             }), t.NaoRobotView = t.NaoRobotModel = void 0;
-            const i = n(829),
-                s = n(657);
+            const s = n(829),
+                o = n(657);
             n(204);
             const a = n(183);
-            class c extends i.DOMWidgetModel {
+            class c extends s.DOMWidgetModel {
                 constructor() {
-                    super(...arguments), this.connected = "Disconnected", this.status = "Not busy"
+                    super(...arguments), this.connected = "Disconnected", this.status = "Not busy", this._services = {}
                 }
                 defaults() {
                     return Object.assign(Object.assign({}, super.defaults()), {
                         _model_name: c.model_name,
                         _model_module: c.model_module,
                         _model_module_version: c.model_module_version,
                         _view_name: c.view_name,
                         _view_module: c.view_module,
                         _view_module_version: c.view_module_version,
-                        value: "Hello World",
-                        synco: "something silly",
                         connected: "Disconnected",
-                        status: "Not busy"
+                        status: "Not busy",
+                        counter: 0
                     })
                 }
                 initialize(e, t) {
                     super.initialize(e, t), this.on("msg:custom", this.onCommand)
                 }
                 changeStatus(e) {
                     this.status = e, this.set("status", e), this.save_changes()
                 }
+                validateIPaddress(e) {
+                    return "nao.local" === e || new RegExp("^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(.(?!$)|$)){4}$").test(e)
+                }
                 connect(e, t) {
-                    return o(this, void 0, void 0, (function*() {
-                        console.log("REMOVE the command was to connect"), this.changeStatus("Establishing connection"), this.qiSession = new a.QiSession(e, t), this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Not busy")
+                    return i(this, void 0, void 0, (function*() {
+                        const n = e => new Promise((t => setTimeout(t, e)));
+                        if (this.changeStatus("Establishing connection"), !this.validateIPaddress(e)) return this.changeStatus("Invalid IP address"), void console.warn("IP Address ", e, " is not valid");
+                        this.qiSession = new a.QiSession(e, t);
+                        for (let e = 0; e < 100; e++)
+                            if (yield n(100), this.qiSession.isConnected()) {
+                                this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Available"), console.log("Connection successful after ", e / 10, " seconds.");
+                                break
+                            } this.qiSession.isConnected() || (console.error("Connection to ", e, " could not be established."), this.changeStatus("Unavailable"))
                     }))
                 }
                 disconnect() {
                     console.log("REMOVE disconnecting"), this.connected = "Disconnected", this.changeStatus("Unavailable")
                 }
-                Testing() {
-                    return o(this, void 0, void 0, (function*() {
-                        this.qiSession = new a.QiSession;
-                        const e = yield this.qiSession.service("ALTextToSpeech");
-                        let t = this.send(e);
-                        console.log("A thing: ", t), console.log("JS sent something")
+                createService(e) {
+                    return i(this, void 0, void 0, (function*() {
+                        this.changeStatus("Creating service " + e);
+                        const t = this.qiSession.service(e),
+                            n = yield t.then((e => e)).catch((e => (this.changeStatus(e), e)));
+                        "object" == typeof n && (this._services[e] = n, this.changeStatus(e + " available"))
                     }))
                 }
-                goSleep(e) {
-                    return o(this, void 0, void 0, (function*() {
-                        var t;
-                        console.log("IN THE SLEEPING SESH"), yield(t = 1e3 * e, new Promise((e => setTimeout(e, t)))), console.log("WAKING UP"), this.set("synco", "something else"), this.save_changes(), this.send({
-                            data: "purple"
-                        }), console.log("SETTED THE VALUE")
-                    }))
-                }
-                callService(e, t, n, i) {
-                    return o(this, void 0, void 0, (function*() {
-                        const o = yield this.qiSession.service(e);
-                        this.changeStatus("Running method" + t), yield o[t](...n), this.changeStatus("Task completed")
+                callService(e, t, n, s) {
+                    return i(this, void 0, void 0, (function*() {
+                        if (void 0 === this._services[e][t]) return void this.changeStatus(t + " does not exist for " + e);
+                        this.changeStatus("Running method " + t);
+                        const i = this._services[e][t](...n);
+                        yield i.then((e => {
+                            this.changeStatus("Task completed"), void 0 !== e && this.send(e)
+                        })).catch((e => {
+                            this.changeStatus(e), this.send(e)
+                        })), this.set("counter", this.get("counter") + 1), this.save_changes()
                     }))
                 }
                 onCommand(e, t) {
-                    return o(this, void 0, void 0, (function*() {
-                        switch (console.log("REMOVE onCommand", e), e.command) {
+                    return i(this, void 0, void 0, (function*() {
+                        switch (e.command) {
                             case "connect":
                                 yield this.connect(e.ipAddress, e.port);
                                 break;
                             case "disconnect":
                                 this.disconnect();
                                 break;
+                            case "createService":
+                                this.createService(e.service);
+                                break;
                             case "callService":
-                                console.log("RECEIVING COMMAND FOR SERVICE"), yield this.callService(e.service, e.method, e.args, e.kwargs)
+                                yield this.callService(e.service, e.method, e.args, e.kwargs)
                         }
-                        console.log("End of OnCommand")
                     }))
                 }
             }
-            t.NaoRobotModel = c, c.serializers = Object.assign({}, i.DOMWidgetModel.serializers), c.model_name = "NaoRobotModel", c.model_module = s.MODULE_NAME, c.model_module_version = s.MODULE_VERSION, c.view_name = "NaoRobotView", c.view_module = s.MODULE_NAME, c.view_module_version = s.MODULE_VERSION;
-            class l extends i.DOMWidgetView {
+            t.NaoRobotModel = c, c.serializers = Object.assign({}, s.DOMWidgetModel.serializers), c.model_name = "NaoRobotModel", c.model_module = o.MODULE_NAME, c.model_module_version = o.MODULE_VERSION, c.view_name = "NaoRobotView", c.view_module = o.MODULE_NAME, c.view_module_version = o.MODULE_VERSION;
+            class r extends s.DOMWidgetView {
                 render() {
-                    this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.synco = document.createElement("div"), this.synco.textContent = "it should be here", this.el.appendChild(this.synco), console.log("RENDERING"), console.log(this.model.get("connected"), " CONNECTED"), console.log(this.model.get("synco"), " SYNCO"), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this), this.model.on("change:synco", this.value_changed, this)
+                    this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this)
                 }
                 value_changed() {
-                    console.log("THE VALUE CHANGED"), this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status"), this.synco.textContent = this.model.get("synco")
+                    this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status")
                 }
             }
-            t.NaoRobotView = l
+            t.NaoRobotView = r
         },
         889: (e, t, n) => {
-            (t = n(645)(!1)).push([e.id, ".custom-widget {\n  background-color: lightseagreen;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
+            (t = n(645)(!1)).push([e.id, ".custom-widget {\n  color: var(--jp-widgets-color) !important;\n  font-family: monospace;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
         },
         645: e => {
             "use strict";
             e.exports = function(e) {
                 var t = [];
                 return t.toString = function() {
                     return this.map((function(t) {
                         var n = function(e, t) {
-                            var n, o, i, s = e[1] || "",
+                            var n, i, s, o = e[1] || "",
                                 a = e[3];
-                            if (!a) return s;
+                            if (!a) return o;
                             if (t && "function" == typeof btoa) {
-                                var c = (n = a, o = btoa(unescape(encodeURIComponent(JSON.stringify(n)))), i = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o), "/*# ".concat(i, " */")),
-                                    l = a.sources.map((function(e) {
+                                var c = (n = a, i = btoa(unescape(encodeURIComponent(JSON.stringify(n)))), s = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i), "/*# ".concat(s, " */")),
+                                    r = a.sources.map((function(e) {
                                         return "/*# sourceURL=".concat(a.sourceRoot || "").concat(e, " */")
                                     }));
-                                return [s].concat(l).concat([c]).join("\n")
+                                return [o].concat(r).concat([c]).join("\n")
                             }
-                            return [s].join("\n")
+                            return [o].join("\n")
                         }(t, e);
                         return t[2] ? "@media ".concat(t[2], " {").concat(n, "}") : n
                     })).join("")
-                }, t.i = function(e, n, o) {
+                }, t.i = function(e, n, i) {
                     "string" == typeof e && (e = [
                         [null, e, ""]
                     ]);
-                    var i = {};
-                    if (o)
-                        for (var s = 0; s < this.length; s++) {
-                            var a = this[s][0];
-                            null != a && (i[a] = !0)
+                    var s = {};
+                    if (i)
+                        for (var o = 0; o < this.length; o++) {
+                            var a = this[o][0];
+                            null != a && (s[a] = !0)
                         }
                     for (var c = 0; c < e.length; c++) {
-                        var l = [].concat(e[c]);
-                        o && i[l[0]] || (n && (l[2] ? l[2] = "".concat(n, " and ").concat(l[2]) : l[2] = n), t.push(l))
+                        var r = [].concat(e[c]);
+                        i && s[r[0]] || (n && (r[2] ? r[2] = "".concat(n, " and ").concat(r[2]) : r[2] = n), t.push(r))
                     }
                 }, t
             }
         },
         204: (e, t, n) => {
-            var o = n(379),
-                i = n(889);
-            "string" == typeof(i = i.__esModule ? i.default : i) && (i = [
-                [e.id, i, ""]
+            var i = n(379),
+                s = n(889);
+            "string" == typeof(s = s.__esModule ? s.default : s) && (s = [
+                [e.id, s, ""]
             ]);
-            o(i, {
+            i(s, {
                 insert: "head",
                 singleton: !1
-            }), e.exports = i.locals || {}
+            }), e.exports = s.locals || {}
         },
         379: (e, t, n) => {
             "use strict";
-            var o, i = function() {
+            var i, s = function() {
                     var e = {};
                     return function(t) {
                         if (void 0 === e[t]) {
                             var n = document.querySelector(t);
                             if (window.HTMLIFrameElement && n instanceof window.HTMLIFrameElement) try {
                                 n = n.contentDocument.head
                             } catch (e) {
                                 n = null
                             }
                             e[t] = n
                         }
                         return e[t]
                     }
                 }(),
-                s = [];
+                o = [];
 
             function a(e) {
-                for (var t = -1, n = 0; n < s.length; n++)
-                    if (s[n].identifier === e) {
+                for (var t = -1, n = 0; n < o.length; n++)
+                    if (o[n].identifier === e) {
                         t = n;
                         break
                     } return t
             }
 
             function c(e, t) {
-                for (var n = {}, o = [], i = 0; i < e.length; i++) {
-                    var c = e[i],
-                        l = t.base ? c[0] + t.base : c[0],
-                        r = n[l] || 0,
-                        u = "".concat(l, " ").concat(r);
-                    n[l] = r + 1;
-                    var d = a(u),
+                for (var n = {}, i = [], s = 0; s < e.length; s++) {
+                    var c = e[s],
+                        r = t.base ? c[0] + t.base : c[0],
+                        l = n[r] || 0,
+                        d = "".concat(r, " ").concat(l);
+                    n[r] = l + 1;
+                    var u = a(d),
                         h = {
                             css: c[1],
                             media: c[2],
                             sourceMap: c[3]
-                        }; - 1 !== d ? (s[d].references++, s[d].updater(h)) : s.push({
-                        identifier: u,
-                        updater: b(h, t),
+                        }; - 1 !== u ? (o[u].references++, o[u].updater(h)) : o.push({
+                        identifier: d,
+                        updater: v(h, t),
                         references: 1
-                    }), o.push(u)
+                    }), i.push(d)
                 }
-                return o
+                return i
             }
 
-            function l(e) {
+            function r(e) {
                 var t = document.createElement("style"),
-                    o = e.attributes || {};
-                if (void 0 === o.nonce) {
-                    var s = n.nc;
-                    s && (o.nonce = s)
+                    i = e.attributes || {};
+                if (void 0 === i.nonce) {
+                    var o = n.nc;
+                    o && (i.nonce = o)
                 }
-                if (Object.keys(o).forEach((function(e) {
-                        t.setAttribute(e, o[e])
+                if (Object.keys(i).forEach((function(e) {
+                        t.setAttribute(e, i[e])
                     })), "function" == typeof e.insert) e.insert(t);
                 else {
-                    var a = i(e.insert || "head");
+                    var a = s(e.insert || "head");
                     if (!a) throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
                     a.appendChild(t)
                 }
                 return t
             }
-            var r, u = (r = [], function(e, t) {
-                return r[e] = t, r.filter(Boolean).join("\n")
+            var l, d = (l = [], function(e, t) {
+                return l[e] = t, l.filter(Boolean).join("\n")
             });
 
-            function d(e, t, n, o) {
-                var i = n ? "" : o.media ? "@media ".concat(o.media, " {").concat(o.css, "}") : o.css;
-                if (e.styleSheet) e.styleSheet.cssText = u(t, i);
+            function u(e, t, n, i) {
+                var s = n ? "" : i.media ? "@media ".concat(i.media, " {").concat(i.css, "}") : i.css;
+                if (e.styleSheet) e.styleSheet.cssText = d(t, s);
                 else {
-                    var s = document.createTextNode(i),
+                    var o = document.createTextNode(s),
                         a = e.childNodes;
-                    a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(s, a[t]) : e.appendChild(s)
+                    a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(o, a[t]) : e.appendChild(o)
                 }
             }
 
             function h(e, t, n) {
-                var o = n.css,
-                    i = n.media,
-                    s = n.sourceMap;
-                if (i ? e.setAttribute("media", i) : e.removeAttribute("media"), s && "undefined" != typeof btoa && (o += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s)))), " */")), e.styleSheet) e.styleSheet.cssText = o;
+                var i = n.css,
+                    s = n.media,
+                    o = n.sourceMap;
+                if (s ? e.setAttribute("media", s) : e.removeAttribute("media"), o && "undefined" != typeof btoa && (i += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))), " */")), e.styleSheet) e.styleSheet.cssText = i;
                 else {
                     for (; e.firstChild;) e.removeChild(e.firstChild);
-                    e.appendChild(document.createTextNode(o))
+                    e.appendChild(document.createTextNode(i))
                 }
             }
             var p = null,
-                m = 0;
+                b = 0;
 
-            function b(e, t) {
-                var n, o, i;
+            function v(e, t) {
+                var n, i, s;
                 if (t.singleton) {
-                    var s = m++;
-                    n = p || (p = l(t)), o = d.bind(null, n, s, !1), i = d.bind(null, n, s, !0)
-                } else n = l(t), o = h.bind(null, n, t), i = function() {
+                    var o = b++;
+                    n = p || (p = r(t)), i = u.bind(null, n, o, !1), s = u.bind(null, n, o, !0)
+                } else n = r(t), i = h.bind(null, n, t), s = function() {
                     ! function(e) {
                         if (null === e.parentNode) return !1;
                         e.parentNode.removeChild(e)
                     }(n)
                 };
-                return o(e),
+                return i(e),
                     function(t) {
                         if (t) {
                             if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;
-                            o(e = t)
-                        } else i()
+                            i(e = t)
+                        } else s()
                     }
             }
             e.exports = function(e, t) {
-                (t = t || {}).singleton || "boolean" == typeof t.singleton || (t.singleton = (void 0 === o && (o = Boolean(window && document && document.all && !window.atob)), o));
+                (t = t || {}).singleton || "boolean" == typeof t.singleton || (t.singleton = (void 0 === i && (i = Boolean(window && document && document.all && !window.atob)), i));
                 var n = c(e = e || [], t);
                 return function(e) {
                     if (e = e || [], "[object Array]" === Object.prototype.toString.call(e)) {
-                        for (var o = 0; o < n.length; o++) {
-                            var i = a(n[o]);
-                            s[i].references--
-                        }
-                        for (var l = c(e, t), r = 0; r < n.length; r++) {
-                            var u = a(n[r]);
-                            0 === s[u].references && (s[u].updater(), s.splice(u, 1))
+                        for (var i = 0; i < n.length; i++) {
+                            var s = a(n[i]);
+                            o[s].references--
+                        }
+                        for (var r = c(e, t), l = 0; l < n.length; l++) {
+                            var d = a(n[l]);
+                            0 === o[d].references && (o[d].updater(), o.splice(d, 1))
                         }
-                        n = l
+                        n = r
                     }
                 }
             }
         },
         147: e => {
             "use strict";
-            e.exports = JSON.parse('{"name":"ipynao","version":"0.1.3","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.4"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
+            e.exports = JSON.parse('{"name":"ipynao","version":"0.2.0","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.5"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
         }
     }
 ]);
```

## Comparing `ipynao/labextension/static/remoteEntry.0f89463f87cb2ebf3619.js` & `ipynao/labextension/static/remoteEntry.b415cdfc968a0f208fcf.js`

 * *Files 4% similar despite different names*

### js-beautify {}

```diff
@@ -37,21 +37,21 @@
     }
     E.m = y, E.c = w, E.d = (e, r) => {
         for (var t in r) E.o(r, t) && !E.o(e, t) && Object.defineProperty(e, t, {
             enumerable: !0,
             get: r[t]
         })
     }, E.f = {}, E.e = e => Promise.all(Object.keys(E.f).reduce(((r, t) => (E.f[t](e, r), r)), [])), E.u = e => e + "." + {
-        14: "fc6d1d9a1e570d86bdac",
-        367: "85a5246f5a9e7b7a8ee5",
+        14: "0fa00990c242d51d6008",
+        367: "b645d81d431e42710263",
         480: "d3a408009df0988c3390",
         568: "54258d511e530803c07b"
     } [e] + ".js?v=" + {
-        14: "fc6d1d9a1e570d86bdac",
-        367: "85a5246f5a9e7b7a8ee5",
+        14: "0fa00990c242d51d6008",
+        367: "b645d81d431e42710263",
         480: "d3a408009df0988c3390",
         568: "54258d511e530803c07b"
     } [e], E.g = function() {
         if ("object" == typeof globalThis) return globalThis;
         try {
             return this || new Function("return this")()
         } catch (e) {
@@ -99,15 +99,15 @@
                         (!u || !u.loaded && (!n != !u.eager ? n : i > u.from)) && (o[r] = {
                             get: t,
                             from: i,
                             eager: !!n
                         })
                     },
                     f = [];
-                return "default" === t && (u("ipynao", "0.1.3", (() => Promise.all([E.e(367), E.e(568)]).then((() => () => E(568))))), u("nao-socket.io", "1.0.4", (() => E.e(14).then((() => () => E(14)))))), e[t] = f.length ? Promise.all(f).then((() => e[t] = 1)) : 1
+                return "default" === t && (u("ipynao", "0.2.0", (() => Promise.all([E.e(367), E.e(568)]).then((() => () => E(568))))), u("nao-socket.io", "1.0.5", (() => E.e(14).then((() => () => E(14)))))), e[t] = f.length ? Promise.all(f).then((() => e[t] = 1)) : 1
             }
         }
     })(), (() => {
         var e;
         E.g.importScripts && (e = E.g.location + "");
         var r = E.g.document;
         if (!e && r && (r.currentScript && (e = r.currentScript.src), !e)) {
@@ -207,24 +207,24 @@
     }, d = e => (e.loaded = 1, e.get()), h = (p = e => function(r, t, n, o) {
         var a = E.I(r);
         return a && a.then ? a.then(e.bind(e, r, E.S[r], t, n, o)) : e(r, E.S[r], t, n, o)
     })(((e, r, t, n) => (i(e, t), s(r, 0, t, n)))), v = p(((e, r, t, n, o) => {
         var a = r && E.o(r, t) && l(r, t, n);
         return a ? d(a) : o()
     })), b = {}, g = {
-        798: () => v("default", "nao-socket.io", [4, 1, 0, 4], (() => E.e(14).then((() => () => E(14))))),
+        562: () => v("default", "nao-socket.io", [4, 1, 0, 5], (() => E.e(14).then((() => () => E(14))))),
         829: () => h("default", "@jupyter-widgets/base", [, [1, 6],
             [1, 5],
             [1, 4],
             [1, 3],
             [1, 2],
             [1, 1, 1, 10], 1, 1, 1, 1, 1
         ])
     }, m = {
-        367: [798, 829]
+        367: [562, 829]
     }, E.f.consumes = (e, r) => {
         E.o(m, e) && m[e].forEach((e => {
             if (E.o(b, e)) return r.push(b[e]);
             var t = r => {
                     b[e] = 0, E.m[e] = t => {
                         delete E.c[e], t.exports = r()
                     }
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/package.json` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/package.json`

 * *Files 2% similar despite different names*

### Pretty-printed

 * *Similarity: 0.9599609375%*

 * *Differences: {"'dependencies'": "{'nao-socket.io': '1.0.5'}",*

 * * "'jupyterlab'": "{'_build': {'load': 'static/remoteEntry.b415cdfc968a0f208fcf.js'}}",*

 * * "'version'": "'0.2.0'"}*

```diff
@@ -4,15 +4,15 @@
         "name": "Isabel Paredes"
     },
     "bugs": {
         "url": "https://github.com/QuantStack/ipynao/issues"
     },
     "dependencies": {
         "@jupyter-widgets/base": "^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6",
-        "nao-socket.io": "1.0.4"
+        "nao-socket.io": "1.0.5"
     },
     "description": "A widget library for controlling Nao",
     "devDependencies": {
         "@babel/core": "^7.5.0",
         "@babel/preset-env": "^7.5.0",
         "@jupyter-widgets/base-manager": "^1.0.2",
         "@jupyterlab/builder": "^3.0.0",
@@ -47,15 +47,15 @@
         "dist/*.js",
         "css/*.css"
     ],
     "homepage": "https://github.com/QuantStack/ipynao",
     "jupyterlab": {
         "_build": {
             "extension": "./extension",
-            "load": "static/remoteEntry.0f89463f87cb2ebf3619.js"
+            "load": "static/remoteEntry.b415cdfc968a0f208fcf.js"
         },
         "extension": "lib/plugin",
         "outputDir": "ipynao/labextension/",
         "sharedPackages": {
             "@jupyter-widgets/base": {
                 "bundled": false,
                 "singleton": true
@@ -93,9 +93,9 @@
         "test": "jest",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.1.3"
+    "version": "0.2.0"
 }
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js`

 * *Files 5% similar despite different names*

### js-beautify {}

```diff
@@ -1,30 +1,29 @@
-/*! For license information please see 14.fc6d1d9a1e570d86bdac.js.LICENSE.txt */
+/*! For license information please see 14.0fa00990c242d51d6008.js.LICENSE.txt */
 (self.webpackChunkipynao = self.webpackChunkipynao || []).push([
     [14], {
         14: (t, e, n) => {
             t.exports = n(998)
         },
         998: (module, exports) => {
             var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, io = module.exports;
             (function() {
                 var self = this;
                 if (function(t, e) {
                         var n = t;
                         n.version = "0.9.17", n.protocol = 1, n.transports = [], n.j = [], n.sockets = {}, n.connect = function(t, o) {
-                            console.log("DBG Emile io connect");
                             var i, r, s = n.util.parseUri(t);
                             s.protocol = "http", e && e.location && (s.protocol = s.protocol || e.location.protocol.slice(0, -1), s.host = s.host || (e.document ? e.document.domain : e.location.hostname), s.port = s.port || e.location.port), i = n.util.uniqueUri(s);
                             var a = {
                                 host: s.host,
                                 secure: "https" == s.protocol,
                                 port: s.port || ("https" == s.protocol ? 443 : 80),
                                 query: s.query || ""
                             };
-                            return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (r = new n.Socket(a)), !a["force new connection"] && r && (n.sockets[i] = r), r = r || n.sockets[i], console.log("DBG Emile io connecting to", i, "options:", a), r.of(s.path.length > 1 ? s.path : "")
+                            return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (r = new n.Socket(a)), !a["force new connection"] && r && (n.sockets[i] = r), (r = r || n.sockets[i]).of(s.path.length > 1 ? s.path : "")
                         }
                     }(io, self), function(t, e) {
                         var n = t.util = {},
                             o = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
                             i = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
                         n.parseUri = function(t) {
                             for (var e = o.exec(t || ""), n = {}, r = 14; r--;) n[i[r]] = e[r] || "";
@@ -122,15 +121,15 @@
                         }, n.prototype.listeners = function(t) {
                             return this.$events || (this.$events = {}), this.$events[t] || (this.$events[t] = []), e.util.isArray(this.$events[t]) || (this.$events[t] = [this.$events[t]]), this.$events[t]
                         }, n.prototype.emit = function(t) {
                             if (!this.$events) return !1;
                             var n = this.$events[t];
                             if (!n) return !1;
                             var o = Array.prototype.slice.call(arguments, 1);
-                            if (console.log("DBG Emile EventEmitter.emit:", t, o), "function" == typeof n) n.apply(this, o);
+                            if ("function" == typeof n) n.apply(this, o);
                             else {
                                 if (!e.util.isArray(n)) return !1;
                                 for (var i = n.slice(), r = 0, s = i.length; r < s; r++) i[r].apply(this, o)
                             }
                             return !0
                         }
                     }(io, io), function(exports, nativeJSON) {
@@ -225,41 +224,41 @@
                             s = e.JSON,
                             a = e.util.indexOf;
                         n.encodePacket = function(t) {
                             var e = a(o, t.type),
                                 n = t.id || "",
                                 c = t.endpoint || "",
                                 p = t.ack,
-                                l = null;
+                                u = null;
                             switch (t.type) {
                                 case "error":
-                                    var u = t.reason ? a(i, t.reason) : "",
+                                    var l = t.reason ? a(i, t.reason) : "",
                                         h = t.advice ? a(r, t.advice) : "";
-                                    "" === u && "" === h || (l = u + ("" !== h ? "+" + h : ""));
+                                    "" === l && "" === h || (u = l + ("" !== h ? "+" + h : ""));
                                     break;
                                 case "message":
-                                    "" !== t.data && (l = t.data);
+                                    "" !== t.data && (u = t.data);
                                     break;
                                 case "event":
                                     var f = {
                                         name: t.name
                                     };
-                                    t.args && t.args.length && (f.args = t.args), l = s.stringify(f);
+                                    t.args && t.args.length && (f.args = t.args), u = s.stringify(f);
                                     break;
                                 case "json":
-                                    l = s.stringify(t.data);
+                                    u = s.stringify(t.data);
                                     break;
                                 case "connect":
-                                    t.qs && (l = t.qs);
+                                    t.qs && (u = t.qs);
                                     break;
                                 case "ack":
-                                    l = t.ackId + (t.args && t.args.length ? "+" + s.stringify(t.args) : "")
+                                    u = t.ackId + (t.args && t.args.length ? "+" + s.stringify(t.args) : "")
                             }
                             var d = [e, n + ("data" == p ? "+" : ""), c];
-                            return null != l && d.push(l), d.join(":")
+                            return null != u && d.push(u), d.join(":")
                         }, n.encodePayload = function(t) {
                             var e = "";
                             if (1 == t.length) return t[0];
                             for (var n = 0, o = t.length; n < o; n++) e += "�" + t[n].length + "�" + t[n];
                             return e
                         };
                         var c = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
@@ -321,35 +320,35 @@
                             return this
                         }, n.prototype.onPacket = function(t) {
                             return this.socket.setHeartbeatTimeout(), "heartbeat" == t.type ? this.onHeartbeat() : ("connect" == t.type && "" == t.endpoint && this.onConnect(), "error" == t.type && "reconnect" == t.advice && (this.isOpen = !1), this.socket.onPacket(t), this)
                         }, n.prototype.setCloseTimeout = function() {
                             if (!this.closeTimeout) {
                                 var t = this;
                                 this.closeTimeout = setTimeout((function() {
-                                    console.log("DBG Emile io transport timeout -> disconnect"), t.onDisconnect()
+                                    t.onDisconnect()
                                 }), this.socket.closeTimeout)
                             }
                         }, n.prototype.onDisconnect = function() {
                             return this.isOpen && this.close(), this.clearTimeouts(), this.socket.onDisconnect(), this
                         }, n.prototype.onConnect = function() {
                             return this.socket.onConnect(), this
                         }, n.prototype.clearCloseTimeout = function() {
                             this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null)
                         }, n.prototype.clearTimeouts = function() {
                             this.clearCloseTimeout(), this.reopenTimeout && clearTimeout(this.reopenTimeout)
                         }, n.prototype.packet = function(t) {
                             this.send(e.parser.encodePacket(t))
                         }, n.prototype.onHeartbeat = function(t) {
-                            console.log("DBG Emile transport: onHeartbeat"), this.packet({
+                            this.packet({
                                 type: "heartbeat"
                             })
                         }, n.prototype.onOpen = function() {
                             this.isOpen = !0, this.clearCloseTimeout(), this.socket.onOpen()
                         }, n.prototype.onClose = function() {
-                            console.log("DBG Emile io transport onClose"), this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
+                            this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
                         }, n.prototype.prepareUrl = function() {
                             var t = this.socket.options;
                             return this.scheme() + "://" + t.host + ":" + t.port + "/" + t.resource + "/" + e.protocol + "/" + this.name + "/" + this.sessid
                         }, n.prototype.ready = function(t, e) {
                             e.call(this)
                         }
                     }(io, io), function(t, e, n) {
@@ -389,50 +388,50 @@
                             var t;
                             for (var e in this.emit.apply(this, arguments), this.namespaces) this.namespaces.hasOwnProperty(e) && (t = this.of(e)).$emit.apply(t, arguments)
                         }, o.prototype.handshake = function(t) {
                             var n = this,
                                 o = this.options;
 
                             function r(e) {
-                                e instanceof Error ? (n.connecting = !1, console.log("DBG Emile onError from handshake:"), console.log(e), n.onError(e.message)) : t.apply(null, e.split(":"))
+                                e instanceof Error ? (n.connecting = !1, n.onError(e.message)) : t.apply(null, e.split(":"))
                             }
                             var s = ["http" + (o.secure ? "s" : "") + ":/", o.host + ":" + o.port, o.resource, e.protocol, e.util.query(this.options.query, "t=" + +new Date)].join("/");
                             if (this.isXDomain() && !e.util.ua.hasCORS) {
                                 var a = document.getElementsByTagName("script")[0],
                                     c = document.createElement("script");
                                 c.src = s + "&jsonp=" + e.j.length, a.parentNode.insertBefore(c, a), e.j.push((function(t) {
                                     r(t), c.parentNode.removeChild(c)
                                 }))
                             } else {
                                 var p = e.util.request();
                                 p.open("GET", s, !0), this.isXDomain() && (p.withCredentials = !0), p.onreadystatechange = function() {
-                                    4 == p.readyState && (p.onreadystatechange = i, 200 == p.status ? r(p.responseText) : 403 == p.status ? (console.log("DBG Emile onError from xhr:"), console.log(p.status, "text", p.responseText), n.onError(p.responseText)) : (n.connecting = !1, console.log("DBG Emile onError from xhr but not 403"), console.log(p.status, "text", p.responseText), !n.reconnecting && n.onError(p.responseText)))
+                                    4 == p.readyState && (p.onreadystatechange = i, 200 == p.status ? r(p.responseText) : 403 == p.status ? n.onError(p.responseText) : (n.connecting = !1, !n.reconnecting && n.onError(p.responseText)))
                                 }, p.send(null)
                             }
                         }, o.prototype.getTransport = function(t) {
                             for (var n, o = t || this.transports, i = 0; n = o[i]; i++)
-                                if (console.log("DBG Emile trying transport: ", n), e.Transport[n] && e.Transport[n].check(this) && (!this.isXDomain() || e.Transport[n].xdomainCheck(this))) return console.log("DBG Emile keeping transport: ", n), new e.Transport[n](this, this.sessionid);
+                                if (e.Transport[n] && e.Transport[n].check(this) && (!this.isXDomain() || e.Transport[n].xdomainCheck(this))) return new e.Transport[n](this, this.sessionid);
                             return null
                         }, o.prototype.connect = function(t) {
-                            if (console.log("DBG Emile io socket connect"), this.connecting) return this;
+                            if (this.connecting) return this;
                             var n = this;
                             return n.connecting = !0, this.handshake((function(o, i, r, s) {
                                 n.sessionid = o, n.closeTimeout = 1e3 * r, n.heartbeatTimeout = 1e3 * i, n.transports || (n.transports = n.origTransports = s ? e.util.intersect(s.split(","), n.options.transports) : n.options.transports), n.setHeartbeatTimeout(),
                                     function t(e) {
-                                        if (console.log("DBG Emile io socket connecting to transport"), n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(e), !n.transport) return n.publish("connect_failed");
-                                        console.log("DBG Emile io socket connecting to transport (2)"), n.transport.ready(n, (function() {
-                                            console.log("DBG Emile io transport is ready"), n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
-                                                if (!n.connected && (console.log("DBG Emile io socket timeout...."), n.connecting = !1, n.options["try multiple transports"])) {
+                                        if (n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(e), !n.transport) return n.publish("connect_failed");
+                                        n.transport.ready(n, (function() {
+                                            n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
+                                                if (!n.connected && (n.connecting = !1, n.options["try multiple transports"])) {
                                                     for (var e = n.transports; e.length > 0 && e.splice(0, 1)[0] != n.transport.name;);
                                                     e.length ? t(e) : n.publish("connect_failed")
                                                 }
                                             }), n.options["connect timeout"]))
                                         }))
                                     }(n.transports), n.once("connect", (function() {
-                                        console.log("DBG Emile io socket something connected"), clearTimeout(n.connectTimeoutTimer), t && "function" == typeof t && t()
+                                        clearTimeout(n.connectTimeoutTimer), t && "function" == typeof t && t()
                                     }))
                             })), this
                         }, o.prototype.setHeartbeatTimeout = function() {
                             if (clearTimeout(this.heartbeatTimeoutTimer), !this.transport || this.transport.heartbeats()) {
                                 var t = this;
                                 this.heartbeatTimeoutTimer = setTimeout((function() {
                                     t.transport.onClose()
@@ -443,34 +442,33 @@
                         }, o.prototype.setBuffer = function(t) {
                             this.doBuffer = t, !t && this.connected && this.buffer.length && (this.options.manualFlush || this.flushBuffer())
                         }, o.prototype.flushBuffer = function() {
                             this.transport.payload(this.buffer), this.buffer = []
                         }, o.prototype.disconnect = function() {
                             return (this.connected || this.connecting) && (this.open && this.of("").packet({
                                 type: "disconnect"
-                            }), console.log("DBG Emile io socket disconnect -> booting"), this.onDisconnect("booted")), this
+                            }), this.onDisconnect("booted")), this
                         }, o.prototype.disconnectSync = function() {
                             var t = e.util.request(),
                                 n = ["http" + (this.options.secure ? "s" : "") + ":/", this.options.host + ":" + this.options.port, this.options.resource, e.protocol, "", this.sessionid].join("/") + "/?disconnect=1";
-                            t.open("GET", n, !1), t.send(null), console.log("DBG Emile io socket disconnectSync -> booting"), this.onDisconnect("booted")
+                            t.open("GET", n, !1), t.send(null), this.onDisconnect("booted")
                         }, o.prototype.isXDomain = function() {
                             var t = n.location.port || ("https:" == n.location.protocol ? 443 : 80);
                             return this.options.host !== n.location.hostname || this.options.port != t
                         }, o.prototype.onConnect = function() {
-                            console.log("DBG Emile io socket onConnect"), this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
+                            this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
                         }, o.prototype.onOpen = function() {
                             this.open = !0
                         }, o.prototype.onClose = function() {
                             this.open = !1, clearTimeout(this.heartbeatTimeoutTimer)
                         }, o.prototype.onPacket = function(t) {
                             this.of(t.endpoint).onPacket(t)
                         }, o.prototype.onError = function(t) {
-                            console.log("DBG Emile io socket onError", t), t && t.advice && "reconnect" === t.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", t && t.reason ? t.reason : t)
+                            t && t.advice && "reconnect" === t.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", t && t.reason ? t.reason : t)
                         }, o.prototype.onDisconnect = function(t) {
-                            console.log("DBG Emile io socket onDisconnect", t);
                             var e = this.connected,
                                 n = this.connecting;
                             this.connected = !1, this.connecting = !1, this.open = !1, (e || n) && (this.transport.close(), this.transport.clearTimeouts(), e && (this.publish("disconnect", t), "booted" != t && this.options.reconnect && !this.reconnecting && this.reconnect()))
                         }, o.prototype.reconnect = function() {
                             this.reconnecting = !0, this.reconnectionAttempts = 0, this.reconnectionDelay = this.options["reconnection delay"];
                             var t = this,
                                 e = this.options["max reconnection attempts"],
@@ -513,15 +511,15 @@
                         }, n.prototype.emit = function(t) {
                             var e = Array.prototype.slice.call(arguments, 1),
                                 n = e[e.length - 1],
                                 o = {
                                     type: "event",
                                     name: t
                                 };
-                            return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, e = e.slice(0, e.length - 1)), o.args = e, console.log("DBG Emile SocketNamespace.emit:", o), this.packet(o)
+                            return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, e = e.slice(0, e.length - 1)), o.args = e, this.packet(o)
                         }, n.prototype.disconnect = function() {
                             return "" === this.name ? this.socket.disconnect() : (this.packet({
                                 type: "disconnect"
                             }), this.$emit("disconnect")), this
                         }, n.prototype.onPacket = function(t) {
                             var n = this;
 
@@ -533,15 +531,15 @@
                                 })
                             }
                             switch (t.type) {
                                 case "connect":
                                     this.$emit("connect");
                                     break;
                                 case "disconnect":
-                                    "" === this.name ? (console.log("DBG Emile io socket onPacket disconnect, reason=", t.reason), this.socket.onDisconnect(t.reason || "booted")) : this.$emit("disconnect", t.reason);
+                                    "" === this.name ? this.socket.onDisconnect(t.reason || "booted") : this.$emit("disconnect", t.reason);
                                     break;
                                 case "message":
                                 case "json":
                                     var i = ["message", t.data];
                                     "data" == t.ack ? i.push(o) : t.ack && this.packet({
                                         type: "ack",
                                         ackId: t.id
@@ -550,15 +548,15 @@
                                 case "event":
                                     i = [t.name].concat(t.args), "data" == t.ack && i.push(o), this.$emit.apply(this, i);
                                     break;
                                 case "ack":
                                     this.acks[t.ackId] && (this.acks[t.ackId].apply(this, t.args), delete this.acks[t.ackId]);
                                     break;
                                 case "error":
-                                    t.advice ? (console.log("DBG Emile onError from packet:"), console.log(t), this.socket.onError(t)) : "unauthorized" == t.reason ? this.$emit("connect_failed", t.reason) : this.$emit("error", t.reason)
+                                    t.advice ? this.socket.onError(t) : "unauthorized" == t.reason ? this.$emit("connect_failed", t.reason) : this.$emit("error", t.reason)
                             }
                         }, o.prototype.send = function() {
                             this.namespace.flags[this.name] = !0, this.namespace.send.apply(this.namespace, arguments)
                         }, o.prototype.emit = function() {
                             this.namespace.flags[this.name] = !0, this.namespace.emit.apply(this.namespace, arguments)
                         }
                     }(io, io), function(t, e, n) {
@@ -571,37 +569,37 @@
                             return t || (t = n.MozWebSocket || n.WebSocket), this.websocket = new t(this.prepareUrl() + o), this.websocket.onopen = function() {
                                 i.onOpen(), i.socket.setBuffer(!1)
                             }, this.websocket.onmessage = function(t) {
                                 i.onData(t.data)
                             }, this.websocket.onclose = function() {
                                 i.onClose(), i.socket.setBuffer(!0)
                             }, this.websocket.onerror = function(t) {
-                                console.log("DBG Emile onerror from websocket WS", t), i.onError(t)
+                                i.onError(t)
                             }, this
                         }, e.util.ua.iDevice ? o.prototype.send = function(t) {
                             var e = this;
                             return setTimeout((function() {
                                 e.websocket.send(t)
                             }), 0), this
                         } : o.prototype.send = function(t) {
                             return this.websocket.send(t), this
                         }, o.prototype.payload = function(t) {
                             for (var e = 0, n = t.length; e < n; e++) this.packet(t[e]);
                             return this
                         }, o.prototype.close = function() {
                             return this.websocket.close(), this
                         }, o.prototype.onError = function(t) {
-                            console.log("DBG Emile onerror from websocket WS.onError, forwarding", t), this.socket.onError(t)
+                            this.socket.onError(t)
                         }, o.prototype.scheme = function() {
                             return this.socket.options.secure ? "wss" : "ws"
                         }, o.check = function() {
                             return "WebSocket" in n && !("__addTask" in WebSocket) || "MozWebSocket" in n
                         }, o.xdomainCheck = function() {
                             return !0
-                        }, console.log("DBG Emile: skipping transport websocket.")
+                        }
                     }(io.Transport, io, self), function(t, e) {
                         function n() {
                             e.Transport.websocket.apply(this, arguments)
                         }
                         t.flashsocket = n, e.util.inherit(n, e.Transport.websocket), n.prototype.name = "flashsocket", n.prototype.open = function() {
                             var t = this,
                                 n = arguments;
@@ -626,239 +624,239 @@
                             var r = this;
                             if (document.body) return i();
                             e.util.load(i)
                         }, n.check = function() {
                             return !("undefined" == typeof WebSocket || !("__initialize" in WebSocket) || !swfobject) && swfobject.getFlashPlayerVersion().major >= 10
                         }, n.xdomainCheck = function() {
                             return !0
-                        }, console.log("DBG Emile: skipping transport flashsocket (come on we're in 2023).")
+                        }
                     }(io.Transport, io), "undefined" != typeof window) var swfobject = function() {
                     var t, e, n, o, i, r, s = "undefined",
                         a = "object",
                         c = "Shockwave Flash",
                         p = "application/x-shockwave-flash",
-                        l = "SWFObjectExprInst",
-                        u = "onreadystatechange",
+                        u = "SWFObjectExprInst",
+                        l = "onreadystatechange",
                         h = window,
                         f = document,
                         d = navigator,
                         y = !1,
                         m = [function() {
                             y ? function() {
                                 var t = f.getElementsByTagName("body")[0],
-                                    e = R(a);
+                                    e = B(a);
                                 e.setAttribute("type", p);
                                 var n = t.appendChild(e);
                                 if (n) {
                                     var o = 0;
                                     ! function() {
                                         if (typeof n.GetVariable != s) {
                                             var i = n.GetVariable("$version");
                                             i && (i = i.split(" ")[1].split(","), S.pv = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
                                         } else if (o < 10) return o++, void setTimeout(arguments.callee, 10);
-                                        t.removeChild(e), n = null, W()
+                                        t.removeChild(e), n = null, O()
                                     }()
-                                } else W()
-                            }() : W()
+                                } else O()
+                            }() : O()
                         }],
                         v = [],
-                        g = [],
                         k = [],
+                        g = [],
                         b = !1,
                         w = !1,
                         _ = !0,
                         S = function() {
                             var t = typeof f.getElementById != s && typeof f.getElementsByTagName != s && typeof f.createElement != s,
                                 e = d.userAgent.toLowerCase(),
                                 n = d.platform.toLowerCase(),
                                 o = /win/.test(n || e),
                                 i = /mac/.test(n || e),
                                 r = !!/webkit/.test(e) && parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")),
-                                l = !1,
-                                u = [0, 0, 0],
+                                u = !1,
+                                l = [0, 0, 0],
                                 m = null;
-                            if (typeof d.plugins != s && typeof d.plugins[c] == a) !(m = d.plugins[c].description) || typeof d.mimeTypes != s && d.mimeTypes[p] && !d.mimeTypes[p].enabledPlugin || (y = !0, l = !1, m = m.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), u[0] = parseInt(m.replace(/^(.*)\..*$/, "$1"), 10), u[1] = parseInt(m.replace(/^.*\.(.*)\s.*$/, "$1"), 10), u[2] = /[a-zA-Z]/.test(m) ? parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
+                            if (typeof d.plugins != s && typeof d.plugins[c] == a) !(m = d.plugins[c].description) || typeof d.mimeTypes != s && d.mimeTypes[p] && !d.mimeTypes[p].enabledPlugin || (y = !0, u = !1, m = m.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), l[0] = parseInt(m.replace(/^(.*)\..*$/, "$1"), 10), l[1] = parseInt(m.replace(/^.*\.(.*)\s.*$/, "$1"), 10), l[2] = /[a-zA-Z]/.test(m) ? parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
                             else if (typeof h[["Active"].concat("Object").join("X")] != s) try {
                                 var v = new(window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");
-                                v && (m = v.GetVariable("$version")) && (l = !0, m = m.split(" ")[1].split(","), u = [parseInt(m[0], 10), parseInt(m[1], 10), parseInt(m[2], 10)])
+                                v && (m = v.GetVariable("$version")) && (u = !0, m = m.split(" ")[1].split(","), l = [parseInt(m[0], 10), parseInt(m[1], 10), parseInt(m[2], 10)])
                             } catch (t) {}
                             return {
                                 w3: t,
-                                pv: u,
+                                pv: l,
                                 wk: r,
-                                ie: l,
+                                ie: u,
                                 win: o,
                                 mac: i
                             }
                         }();
 
-                    function E() {
+                    function T() {
                         if (!b) {
                             try {
-                                var t = f.getElementsByTagName("body")[0].appendChild(R("span"));
+                                var t = f.getElementsByTagName("body")[0].appendChild(B("span"));
                                 t.parentNode.removeChild(t)
                             } catch (t) {
                                 return
                             }
                             b = !0;
                             for (var e = m.length, n = 0; n < e; n++) m[n]()
                         }
                     }
 
-                    function T(t) {
+                    function E(t) {
                         b ? t() : m[m.length] = t
                     }
 
                     function C(t) {
                         if (typeof h.addEventListener != s) h.addEventListener("load", t, !1);
                         else if (typeof f.addEventListener != s) f.addEventListener("load", t, !1);
                         else if (typeof h.attachEvent != s) ! function(t, e, n) {
-                            t.attachEvent(e, n), k[k.length] = [t, e, n]
+                            t.attachEvent(e, n), g[g.length] = [t, e, n]
                         }(h, "onload", t);
                         else if ("function" == typeof h.onload) {
                             var e = h.onload;
                             h.onload = function() {
                                 e(), t()
                             }
                         } else h.onload = t
                     }
 
-                    function W() {
+                    function O() {
                         var t = v.length;
                         if (t > 0)
                             for (var e = 0; e < t; e++) {
                                 var n = v[e].id,
                                     o = v[e].callbackFn,
                                     i = {
                                         success: !1,
                                         id: n
                                     };
                                 if (S.pv[0] > 0) {
-                                    var r = L(n);
+                                    var r = R(n);
                                     if (r)
                                         if (!P(v[e].swfVersion) || S.wk && S.wk < 312)
-                                            if (v[e].expressInstall && x()) {
+                                            if (v[e].expressInstall && A()) {
                                                 var a = {};
                                                 a.data = v[e].expressInstall, a.width = r.getAttribute("width") || "0", a.height = r.getAttribute("height") || "0", r.getAttribute("class") && (a.styleclass = r.getAttribute("class")), r.getAttribute("align") && (a.align = r.getAttribute("align"));
-                                                for (var c = {}, p = r.getElementsByTagName("param"), l = p.length, u = 0; u < l; u++) "movie" != p[u].getAttribute("name").toLowerCase() && (c[p[u].getAttribute("name")] = p[u].getAttribute("value"));
-                                                D(a, c, n, o)
-                                            } else A(r), o && o(i);
-                                    else $(n, !0), o && (i.success = !0, i.ref = O(n), o(i))
+                                                for (var c = {}, p = r.getElementsByTagName("param"), u = p.length, l = 0; l < u; l++) "movie" != p[l].getAttribute("name").toLowerCase() && (c[p[l].getAttribute("name")] = p[l].getAttribute("value"));
+                                                x(a, c, n, o)
+                                            } else N(r), o && o(i);
+                                    else $(n, !0), o && (i.success = !0, i.ref = W(n), o(i))
                                 } else if ($(n, !0), o) {
-                                    var h = O(n);
+                                    var h = W(n);
                                     h && typeof h.SetVariable != s && (i.success = !0, i.ref = h), o(i)
                                 }
                             }
                     }
 
-                    function O(t) {
+                    function W(t) {
                         var e = null,
-                            n = L(t);
+                            n = R(t);
                         if (n && "OBJECT" == n.nodeName)
                             if (typeof n.SetVariable != s) e = n;
                             else {
                                 var o = n.getElementsByTagName(a)[0];
                                 o && (e = o)
                             } return e
                     }
 
-                    function x() {
+                    function A() {
                         return !w && P("6.0.65") && (S.win || S.mac) && !(S.wk && S.wk < 312)
                     }
 
-                    function D(i, r, a, c) {
+                    function x(i, r, a, c) {
                         w = !0, n = c || null, o = {
                             success: !1,
                             id: a
                         };
-                        var p = L(a);
+                        var p = R(a);
                         if (p) {
-                            "OBJECT" == p.nodeName ? (t = N(p), e = null) : (t = p, e = a), i.id = l, (typeof i.width == s || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == s || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), f.title = f.title.slice(0, 47) + " - Flash Player Installation";
-                            var u = S.ie && S.win ? ["Active"].concat("").join("X") : "PlugIn",
-                                d = "MMredirectURL=" + h.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + u + "&MMdoctitle=" + f.title;
+                            "OBJECT" == p.nodeName ? (t = I(p), e = null) : (t = p, e = a), i.id = u, (typeof i.width == s || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == s || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), f.title = f.title.slice(0, 47) + " - Flash Player Installation";
+                            var l = S.ie && S.win ? ["Active"].concat("").join("X") : "PlugIn",
+                                d = "MMredirectURL=" + h.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + l + "&MMdoctitle=" + f.title;
                             if (typeof r.flashvars != s ? r.flashvars += "&" + d : r.flashvars = d, S.ie && S.win && 4 != p.readyState) {
-                                var y = R("div");
+                                var y = B("div");
                                 a += "SWFObjectNew", y.setAttribute("id", a), p.parentNode.insertBefore(y, p), p.style.display = "none",
                                     function() {
                                         4 == p.readyState ? p.parentNode.removeChild(p) : setTimeout(arguments.callee, 10)
                                     }()
                             }
-                            B(i, r, a)
+                            j(i, r, a)
                         }
                     }
 
-                    function A(t) {
+                    function N(t) {
                         if (S.ie && S.win && 4 != t.readyState) {
-                            var e = R("div");
-                            t.parentNode.insertBefore(e, t), e.parentNode.replaceChild(N(t), e), t.style.display = "none",
+                            var e = B("div");
+                            t.parentNode.insertBefore(e, t), e.parentNode.replaceChild(I(t), e), t.style.display = "none",
                                 function() {
                                     4 == t.readyState ? t.parentNode.removeChild(t) : setTimeout(arguments.callee, 10)
                                 }()
-                        } else t.parentNode.replaceChild(N(t), t)
+                        } else t.parentNode.replaceChild(I(t), t)
                     }
 
-                    function N(t) {
-                        var e = R("div");
+                    function I(t) {
+                        var e = B("div");
                         if (S.win && S.ie) e.innerHTML = t.innerHTML;
                         else {
                             var n = t.getElementsByTagName(a)[0];
                             if (n) {
                                 var o = n.childNodes;
                                 if (o)
                                     for (var i = o.length, r = 0; r < i; r++) 1 == o[r].nodeType && "PARAM" == o[r].nodeName || 8 == o[r].nodeType || e.appendChild(o[r].cloneNode(!0))
                             }
                         }
                         return e
                     }
 
-                    function B(t, e, n) {
-                        var o, i = L(n);
+                    function j(t, e, n) {
+                        var o, i = R(n);
                         if (S.wk && S.wk < 312) return o;
                         if (i)
                             if (typeof t.id == s && (t.id = n), S.ie && S.win) {
                                 var r = "";
                                 for (var c in t) t[c] != Object.prototype[c] && ("data" == c.toLowerCase() ? e.movie = t[c] : "styleclass" == c.toLowerCase() ? r += ' class="' + t[c] + '"' : "classid" != c.toLowerCase() && (r += " " + c + '="' + t[c] + '"'));
-                                var l = "";
-                                for (var u in e) e[u] != Object.prototype[u] && (l += '<param name="' + u + '" value="' + e[u] + '" />');
-                                i.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + r + ">" + l + "</object>", g[g.length] = t.id, o = L(t.id)
+                                var u = "";
+                                for (var l in e) e[l] != Object.prototype[l] && (u += '<param name="' + l + '" value="' + e[l] + '" />');
+                                i.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + r + ">" + u + "</object>", k[k.length] = t.id, o = R(t.id)
                             } else {
-                                var h = R(a);
+                                var h = B(a);
                                 for (var f in h.setAttribute("type", p), t) t[f] != Object.prototype[f] && ("styleclass" == f.toLowerCase() ? h.setAttribute("class", t[f]) : "classid" != f.toLowerCase() && h.setAttribute(f, t[f]));
-                                for (var d in e) e[d] != Object.prototype[d] && "movie" != d.toLowerCase() && I(h, d, e[d]);
+                                for (var d in e) e[d] != Object.prototype[d] && "movie" != d.toLowerCase() && D(h, d, e[d]);
                                 i.parentNode.replaceChild(h, i), o = h
                             } return o
                     }
 
-                    function I(t, e, n) {
-                        var o = R("param");
+                    function D(t, e, n) {
+                        var o = B("param");
                         o.setAttribute("name", e), o.setAttribute("value", n), t.appendChild(o)
                     }
 
-                    function j(t) {
-                        var e = L(t);
+                    function L(t) {
+                        var e = R(t);
                         e && "OBJECT" == e.nodeName && (S.ie && S.win ? (e.style.display = "none", function() {
                             4 == e.readyState ? function(t) {
-                                var e = L(t);
+                                var e = R(t);
                                 if (e) {
                                     for (var n in e) "function" == typeof e[n] && (e[n] = null);
                                     e.parentNode.removeChild(e)
                                 }
                             }(t) : setTimeout(arguments.callee, 10)
                         }()) : e.parentNode.removeChild(e))
                     }
 
-                    function L(t) {
+                    function R(t) {
                         var e = null;
                         try {
                             e = f.getElementById(t)
                         } catch (t) {}
                         return e
                     }
 
-                    function R(t) {
+                    function B(t) {
                         return f.createElement(t)
                     }
 
                     function P(t) {
                         var e = S.pv,
                             n = t.split(".");
                         return n[0] = parseInt(n[0], 10), n[1] = parseInt(n[1], 10) || 0, n[2] = parseInt(n[2], 10) || 0, e[0] > n[0] || e[0] == n[0] && e[1] > n[1] || e[0] == n[0] && e[1] == n[1] && e[2] >= n[2]
@@ -866,128 +864,128 @@
 
                     function F(t, e, n, o) {
                         if (!S.ie || !S.mac) {
                             var c = f.getElementsByTagName("head")[0];
                             if (c) {
                                 var p = n && "string" == typeof n ? n : "screen";
                                 if (o && (i = null, r = null), !i || r != p) {
-                                    var l = R("style");
-                                    l.setAttribute("type", "text/css"), l.setAttribute("media", p), i = c.appendChild(l), S.ie && S.win && typeof f.styleSheets != s && f.styleSheets.length > 0 && (i = f.styleSheets[f.styleSheets.length - 1]), r = p
+                                    var u = B("style");
+                                    u.setAttribute("type", "text/css"), u.setAttribute("media", p), i = c.appendChild(u), S.ie && S.win && typeof f.styleSheets != s && f.styleSheets.length > 0 && (i = f.styleSheets[f.styleSheets.length - 1]), r = p
                                 }
                                 S.ie && S.win ? i && typeof i.addRule == a && i.addRule(t, e) : i && typeof f.createTextNode != s && i.appendChild(f.createTextNode(t + " {" + e + "}"))
                             }
                         }
                     }
 
                     function $(t, e) {
                         if (_) {
                             var n = e ? "visible" : "hidden";
-                            b && L(t) ? L(t).style.visibility = n : F("#" + t, "visibility:" + n)
+                            b && R(t) ? R(t).style.visibility = n : F("#" + t, "visibility:" + n)
                         }
                     }
 
                     function q(t) {
                         return null != /[\\\"<>\.;]/.exec(t) && typeof encodeURIComponent != s ? encodeURIComponent(t) : t
                     }
-                    return S.w3 && ((typeof f.readyState != s && "complete" == f.readyState || typeof f.readyState == s && (f.getElementsByTagName("body")[0] || f.body)) && E(), b || (typeof f.addEventListener != s && f.addEventListener("DOMContentLoaded", E, !1), S.ie && S.win && (f.attachEvent(u, (function() {
-                        "complete" == f.readyState && (f.detachEvent(u, arguments.callee), E())
+                    return S.w3 && ((typeof f.readyState != s && "complete" == f.readyState || typeof f.readyState == s && (f.getElementsByTagName("body")[0] || f.body)) && T(), b || (typeof f.addEventListener != s && f.addEventListener("DOMContentLoaded", T, !1), S.ie && S.win && (f.attachEvent(l, (function() {
+                        "complete" == f.readyState && (f.detachEvent(l, arguments.callee), T())
                     })), h == top && function() {
                         if (!b) {
                             try {
                                 f.documentElement.doScroll("left")
                             } catch (t) {
                                 return void setTimeout(arguments.callee, 0)
                             }
-                            E()
+                            T()
                         }
                     }()), S.wk && function() {
-                        b || (/loaded|complete/.test(f.readyState) ? E() : setTimeout(arguments.callee, 0))
-                    }(), C(E))), S.ie && S.win && window.attachEvent("onunload", (function() {
-                        for (var t = k.length, e = 0; e < t; e++) k[e][0].detachEvent(k[e][1], k[e][2]);
-                        for (var n = g.length, o = 0; o < n; o++) j(g[o]);
+                        b || (/loaded|complete/.test(f.readyState) ? T() : setTimeout(arguments.callee, 0))
+                    }(), C(T))), S.ie && S.win && window.attachEvent("onunload", (function() {
+                        for (var t = g.length, e = 0; e < t; e++) g[e][0].detachEvent(g[e][1], g[e][2]);
+                        for (var n = k.length, o = 0; o < n; o++) L(k[o]);
                         for (var i in S) S[i] = null;
                         for (var r in S = null, swfobject) swfobject[r] = null;
                         swfobject = null
                     })), {
                         registerObject: function(t, e, n, o) {
                             if (S.w3 && t && e) {
                                 var i = {};
                                 i.id = t, i.swfVersion = e, i.expressInstall = n, i.callbackFn = o, v[v.length] = i, $(t, !1)
                             } else o && o({
                                 success: !1,
                                 id: t
                             })
                         },
                         getObjectById: function(t) {
-                            if (S.w3) return O(t)
+                            if (S.w3) return W(t)
                         },
-                        embedSWF: function(t, e, n, o, i, r, c, p, l, u) {
+                        embedSWF: function(t, e, n, o, i, r, c, p, u, l) {
                             var h = {
                                 success: !1,
                                 id: e
                             };
-                            S.w3 && !(S.wk && S.wk < 312) && t && e && n && o && i ? ($(e, !1), T((function() {
+                            S.w3 && !(S.wk && S.wk < 312) && t && e && n && o && i ? ($(e, !1), E((function() {
                                 n += "", o += "";
                                 var f = {};
-                                if (l && typeof l === a)
-                                    for (var d in l) f[d] = l[d];
+                                if (u && typeof u === a)
+                                    for (var d in u) f[d] = u[d];
                                 f.data = t, f.width = n, f.height = o;
                                 var y = {};
                                 if (p && typeof p === a)
                                     for (var m in p) y[m] = p[m];
                                 if (c && typeof c === a)
                                     for (var v in c) typeof y.flashvars != s ? y.flashvars += "&" + v + "=" + c[v] : y.flashvars = v + "=" + c[v];
                                 if (P(i)) {
-                                    var g = B(f, y, e);
-                                    f.id == e && $(e, !0), h.success = !0, h.ref = g
+                                    var k = j(f, y, e);
+                                    f.id == e && $(e, !0), h.success = !0, h.ref = k
                                 } else {
-                                    if (r && x()) return f.data = r, void D(f, y, e, u);
+                                    if (r && A()) return f.data = r, void x(f, y, e, l);
                                     $(e, !0)
                                 }
-                                u && u(h)
-                            }))) : u && u(h)
+                                l && l(h)
+                            }))) : l && l(h)
                         },
                         switchOffAutoHideShow: function() {
                             _ = !1
                         },
                         ua: S,
                         getFlashPlayerVersion: function() {
                             return {
                                 major: S.pv[0],
                                 minor: S.pv[1],
                                 release: S.pv[2]
                             }
                         },
                         hasFlashPlayerVersion: P,
                         createSWF: function(t, e, n) {
-                            return S.w3 ? B(t, e, n) : void 0
+                            return S.w3 ? j(t, e, n) : void 0
                         },
                         showExpressInstall: function(t, e, n, o) {
-                            S.w3 && x() && D(t, e, n, o)
+                            S.w3 && A() && x(t, e, n, o)
                         },
                         removeSWF: function(t) {
-                            S.w3 && j(t)
+                            S.w3 && L(t)
                         },
                         createCSS: function(t, e, n, o) {
                             S.w3 && F(t, e, n, o)
                         },
-                        addDomLoadEvent: T,
+                        addDomLoadEvent: E,
                         addLoadEvent: C,
                         getQueryParamValue: function(t) {
                             var e = f.location.search || f.location.hash;
                             if (e) {
                                 if (/\?/.test(e) && (e = e.split("?")[1]), null == t) return q(e);
                                 for (var n = e.split("&"), o = 0; o < n.length; o++)
                                     if (n[o].substring(0, n[o].indexOf("=")) == t) return q(n[o].substring(n[o].indexOf("=") + 1))
                             }
                             return ""
                         },
                         expressInstallCallback: function() {
                             if (w) {
-                                var i = L(l);
+                                var i = R(u);
                                 i && t && (i.parentNode.replaceChild(t, i), e && ($(e, !0), S.ie && S.win && (t.style.display = "block")), n && n(o)), w = !1
                             }
                         }
                     }
                 }();
                 ! function() {
                     if ("undefined" != typeof window && !window.WebSocket) {
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/367.85a5246f5a9e7b7a8ee5.js` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/367.b645d81d431e42710263.js`

 * *Files 12% similar despite different names*

### js-beautify {}

```diff
@@ -1,421 +1,427 @@
 (self.webpackChunkipynao = self.webpackChunkipynao || []).push([
     [367], {
         183: function(e, t, n) {
             "use strict";
-            var o = this && this.__importDefault || function(e) {
+            var i = this && this.__importDefault || function(e) {
                 return e && e.__esModule ? e : {
                     default: e
                 }
             };
             Object.defineProperty(t, "__esModule", {
                 value: !0
             }), t.QiSession = void 0;
-            const i = o(n(798));
+            const s = i(n(562));
             t.QiSession = class {
-                constructor(e = "nao.local", t = "80") {
-                    this.connected = !1, console.log("DBG Emile qim about to connect w/17"), window.oioi = i.default;
-                    let n = i.default.connect("nao:nao@" + e + ":" + t, {
-                            resource: "libs/qimessaging/2/socket.io",
-                            "force new connection": !0
-                        }),
-                        o = new Array,
-                        s = new Array,
-                        a = 0;
-
-                    function c(e, t, i) {
-                        return function() {
-                            let s = ++a,
-                                c = Array.prototype.slice.call(arguments, 0),
-                                l = new Promise((function(e, t) {
-                                    o[s] = {
-                                        resolve: e,
-                                        reject: t
-                                    }
-                                }));
-                            return "connect" == c[0] && (o[s].__cbi = i), n.emit("call", {
-                                idm: s,
-                                params: {
-                                    obj: e,
-                                    member: t,
-                                    args: c
-                                }
-                            }), l
+                constructor(e = "nao.local", t = "80", n, i) {
+                    this.connected = n, this.disconnected = i, this._socket = s.default.connect("nao:nao@" + e + ":" + t, {
+                        resource: "libs/qimessaging/2/socket.io",
+                        "force new connection": !0
+                    }), this._dfd = [], this._sigs = [], this._idm = 0, this._socket.on("reply", (e => {
+                        this.onReply(e)
+                    })), this._socket.on("error", (e => {
+                        this.onError(e)
+                    })), this._socket.on("signal", (e => {
+                        this.onSignal(e)
+                    })), this._socket.on("disconnect", this.onDisconnect), this._socket.on("connect", this.onConnect), this.service = this.createMetaCall("ServiceDirectory", "service", "data")
+                }
+                isConnected() {
+                    return void 0 !== this._socket && this._socket.socket.connected
+                }
+                onReply(e) {
+                    const t = e.idm;
+                    if (void 0 !== e.result && void 0 !== e.result.metaobject) {
+                        const n = {
+                                __MetaObject: e.result.metaobject
+                            },
+                            i = e.result.pyobject;
+                        this._sigs[i] = [];
+                        const s = n.__MetaObject.methods;
+                        for (const e in s) {
+                            const t = s[e].name;
+                            n[t] = this.createMetaCall(i, t, "data")
                         }
+                        const o = n.__MetaObject.signals;
+                        for (const e in o) {
+                            const t = o[e].name;
+                            n[t] = this.createMetaSignal(i, t, !1)
+                        }
+                        const a = n.__MetaObject.properties;
+                        for (const e in a) {
+                            const t = a[e].name;
+                            n[t] = this.createMetaSignal(i, t, !0)
+                        }
+                        this._dfd[t].resolve(n)
+                    } else {
+                        if (void 0 !== this._dfd[t].__cbi) {
+                            const n = this._dfd[t].__cbi;
+                            this._sigs[n.obj][n.signal][e.result] = n.cb
+                        }
+                        this._dfd[t].resolve(e.result)
                     }
-
-                    function l(e, t, n) {
-                        let o = {};
-                        return s[e][t] = new Array, o.connect = function(n) {
-                            return c(e, t, {
-                                obj: e,
-                                signal: t,
-                                cb: n
-                            })("connect")
-                        }, o.disconnect = function(n) {
-                            return delete s[e][t][n], c(e, t, "data")("disconnect", n)
-                        }, n ? (o.setValue = function() {
-                            let n = Array.prototype.slice.call(arguments, 0);
-                            return c(e, t, "data").apply(this, ["setValue"].concat(n))
-                        }, o.value = function() {
-                            return c(e, t, "data")("value")
-                        }, o) : o
-                    }
-                    n.on("reply", (function(e) {
-                        let t = e.idm;
-                        if (null != e.result && null != e.result.metaobject) {
-                            let n = {
-                                    __MetaObject: e.result.metaobject
-                                },
-                                i = e.result.pyobject;
-                            s[i] = new Array;
-                            let a = n.__MetaObject.methods;
-                            for (let e in a) {
-                                let t = a[e].name;
-                                n[t] = c(i, t, "data")
-                            }
-                            let r = n.__MetaObject.signals;
-                            for (let e in r) {
-                                let t = r[e].name;
-                                n[t] = l(i, t, !1)
-                            }
-                            let u = n.__MetaObject.properties;
-                            for (let e in u) {
-                                let t = u[e].name;
-                                n[t] = l(i, t, !0)
+                    delete this._dfd[t]
+                }
+                onError(e) {
+                    void 0 !== e.idm && (this._dfd[e.idm].reject(e.result), delete this._dfd[e.idm])
+                }
+                onSignal(e) {
+                    const t = e.result,
+                        n = this._sigs[t.obj][t.signal][t.link];
+                    void 0 !== n && n.apply(this, t.data)
+                }
+                onConnect() {
+                    this.connected && this.connected(this)
+                }
+                onDisconnect(e) {
+                    for (const e in this._dfd) this._dfd[e].reject("Call " + e + " canceled: disconnected"), delete this._dfd[e];
+                    this.disconnected && this.disconnected()
+                }
+                createMetaCall(e, t, n) {
+                    return (...i) => {
+                        ++this._idm;
+                        const s = new Promise(((e, t) => {
+                            this._dfd[this._idm] = {
+                                resolve: e,
+                                reject: t
                             }
-                            o[t].resolve(n)
-                        } else {
-                            if (null != o[t].__cbi) {
-                                let n = o[t].__cbi;
-                                s[n.obj][n.signal][e.result] = n.cb
+                        }));
+                        return "connect" === i[0] && (this.isConnected = this._socket.socket.connected, this._dfd[this._idm].__cbi = n), this._socket.emit("call", {
+                            idm: this._idm,
+                            params: {
+                                obj: e,
+                                member: t,
+                                args: i
                             }
-                            o[t].resolve(e.result)
-                        }
-                        delete o[t]
-                    })), n.on("error", (function(e) {
-                        null != e.idm && (o[e.idm].reject(e.result), delete o[e.idm])
-                    })), n.on("signal", (function(e) {
-                        let t = e.result,
-                            n = s[t.obj][t.signal][t.link];
-                        null != n && n.apply(this, t.data)
-                    })), n.on("disconnect", (function(e) {
-                        for (let e in o) o[e].reject("Call " + e + " canceled: disconnected"), delete o[e];
-                        this.disconnected && console.log("DBG Isabel disconnected")
-                    })), this.service = c("ServiceDirectory", "service", "data"), n.on("connect", (function() {
-                        this.connected && console.log("DBG Isabel already connected")
-                    }))
+                        }), s
+                    }
+                }
+                createMetaSignal(e, t, n) {
+                    const i = {};
+                    return this._sigs[e][t] = [], i.connect = n => this.createMetaCall(e, t, {
+                        obj: e,
+                        signal: t,
+                        cb: n
+                    })("connect"), i.disconnect = n => (delete this._sigs[e][t][n], this.createMetaCall(e, t, "data")("disconnect", n)), n ? (i.setValue = (...n) => this.createMetaCall(e, t, "data").apply(this, ["setValue"].concat(n)), i.value = () => this.createMetaCall(e, t, "data")("value"), i) : i
                 }
             }
         },
         657: (e, t, n) => {
             "use strict";
             Object.defineProperty(t, "__esModule", {
                 value: !0
             }), t.MODULE_NAME = t.MODULE_VERSION = void 0;
-            const o = n(147);
-            t.MODULE_VERSION = o.version, t.MODULE_NAME = o.name
+            const i = n(147);
+            t.MODULE_VERSION = i.version, t.MODULE_NAME = i.name
         },
         367: function(e, t, n) {
             "use strict";
-            var o = this && this.__awaiter || function(e, t, n, o) {
-                return new(n || (n = Promise))((function(i, s) {
+            var i = this && this.__awaiter || function(e, t, n, i) {
+                return new(n || (n = Promise))((function(s, o) {
                     function a(e) {
                         try {
-                            l(o.next(e))
+                            r(i.next(e))
                         } catch (e) {
-                            s(e)
+                            o(e)
                         }
                     }
 
                     function c(e) {
                         try {
-                            l(o.throw(e))
+                            r(i.throw(e))
                         } catch (e) {
-                            s(e)
+                            o(e)
                         }
                     }
 
-                    function l(e) {
+                    function r(e) {
                         var t;
-                        e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
+                        e.done ? s(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                             e(t)
                         }))).then(a, c)
                     }
-                    l((o = o.apply(e, t || [])).next())
+                    r((i = i.apply(e, t || [])).next())
                 }))
             };
             Object.defineProperty(t, "__esModule", {
                 value: !0
             }), t.NaoRobotView = t.NaoRobotModel = void 0;
-            const i = n(829),
-                s = n(657);
+            const s = n(829),
+                o = n(657);
             n(204);
             const a = n(183);
-            class c extends i.DOMWidgetModel {
+            class c extends s.DOMWidgetModel {
                 constructor() {
-                    super(...arguments), this.connected = "Disconnected", this.status = "Not busy"
+                    super(...arguments), this.connected = "Disconnected", this.status = "Not busy", this._services = {}
                 }
                 defaults() {
                     return Object.assign(Object.assign({}, super.defaults()), {
                         _model_name: c.model_name,
                         _model_module: c.model_module,
                         _model_module_version: c.model_module_version,
                         _view_name: c.view_name,
                         _view_module: c.view_module,
                         _view_module_version: c.view_module_version,
-                        value: "Hello World",
-                        synco: "something silly",
                         connected: "Disconnected",
-                        status: "Not busy"
+                        status: "Not busy",
+                        counter: 0
                     })
                 }
                 initialize(e, t) {
                     super.initialize(e, t), this.on("msg:custom", this.onCommand)
                 }
                 changeStatus(e) {
                     this.status = e, this.set("status", e), this.save_changes()
                 }
+                validateIPaddress(e) {
+                    return "nao.local" === e || new RegExp("^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(.(?!$)|$)){4}$").test(e)
+                }
                 connect(e, t) {
-                    return o(this, void 0, void 0, (function*() {
-                        console.log("REMOVE the command was to connect"), this.changeStatus("Establishing connection"), this.qiSession = new a.QiSession(e, t), this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Not busy")
+                    return i(this, void 0, void 0, (function*() {
+                        const n = e => new Promise((t => setTimeout(t, e)));
+                        if (this.changeStatus("Establishing connection"), !this.validateIPaddress(e)) return this.changeStatus("Invalid IP address"), void console.warn("IP Address ", e, " is not valid");
+                        this.qiSession = new a.QiSession(e, t);
+                        for (let e = 0; e < 100; e++)
+                            if (yield n(100), this.qiSession.isConnected()) {
+                                this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Available"), console.log("Connection successful after ", e / 10, " seconds.");
+                                break
+                            } this.qiSession.isConnected() || (console.error("Connection to ", e, " could not be established."), this.changeStatus("Unavailable"))
                     }))
                 }
                 disconnect() {
                     console.log("REMOVE disconnecting"), this.connected = "Disconnected", this.changeStatus("Unavailable")
                 }
-                Testing() {
-                    return o(this, void 0, void 0, (function*() {
-                        this.qiSession = new a.QiSession;
-                        const e = yield this.qiSession.service("ALTextToSpeech");
-                        let t = this.send(e);
-                        console.log("A thing: ", t), console.log("JS sent something")
+                createService(e) {
+                    return i(this, void 0, void 0, (function*() {
+                        this.changeStatus("Creating service " + e);
+                        const t = this.qiSession.service(e),
+                            n = yield t.then((e => e)).catch((e => (this.changeStatus(e), e)));
+                        "object" == typeof n && (this._services[e] = n, this.changeStatus(e + " available"))
                     }))
                 }
-                goSleep(e) {
-                    return o(this, void 0, void 0, (function*() {
-                        var t;
-                        console.log("IN THE SLEEPING SESH"), yield(t = 1e3 * e, new Promise((e => setTimeout(e, t)))), console.log("WAKING UP"), this.set("synco", "something else"), this.save_changes(), this.send({
-                            data: "purple"
-                        }), console.log("SETTED THE VALUE")
-                    }))
-                }
-                callService(e, t, n, i) {
-                    return o(this, void 0, void 0, (function*() {
-                        const o = yield this.qiSession.service(e);
-                        this.changeStatus("Running method" + t), yield o[t](...n), this.changeStatus("Task completed")
+                callService(e, t, n, s) {
+                    return i(this, void 0, void 0, (function*() {
+                        if (void 0 === this._services[e][t]) return void this.changeStatus(t + " does not exist for " + e);
+                        this.changeStatus("Running method " + t);
+                        const i = this._services[e][t](...n);
+                        yield i.then((e => {
+                            this.changeStatus("Task completed"), void 0 !== e && this.send(e)
+                        })).catch((e => {
+                            this.changeStatus(e), this.send(e)
+                        })), this.set("counter", this.get("counter") + 1), this.save_changes()
                     }))
                 }
                 onCommand(e, t) {
-                    return o(this, void 0, void 0, (function*() {
-                        switch (console.log("REMOVE onCommand", e), e.command) {
+                    return i(this, void 0, void 0, (function*() {
+                        switch (e.command) {
                             case "connect":
                                 yield this.connect(e.ipAddress, e.port);
                                 break;
                             case "disconnect":
                                 this.disconnect();
                                 break;
+                            case "createService":
+                                this.createService(e.service);
+                                break;
                             case "callService":
-                                console.log("RECEIVING COMMAND FOR SERVICE"), yield this.callService(e.service, e.method, e.args, e.kwargs)
+                                yield this.callService(e.service, e.method, e.args, e.kwargs)
                         }
-                        console.log("End of OnCommand")
                     }))
                 }
             }
-            t.NaoRobotModel = c, c.serializers = Object.assign({}, i.DOMWidgetModel.serializers), c.model_name = "NaoRobotModel", c.model_module = s.MODULE_NAME, c.model_module_version = s.MODULE_VERSION, c.view_name = "NaoRobotView", c.view_module = s.MODULE_NAME, c.view_module_version = s.MODULE_VERSION;
-            class l extends i.DOMWidgetView {
+            t.NaoRobotModel = c, c.serializers = Object.assign({}, s.DOMWidgetModel.serializers), c.model_name = "NaoRobotModel", c.model_module = o.MODULE_NAME, c.model_module_version = o.MODULE_VERSION, c.view_name = "NaoRobotView", c.view_module = o.MODULE_NAME, c.view_module_version = o.MODULE_VERSION;
+            class r extends s.DOMWidgetView {
                 render() {
-                    this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.synco = document.createElement("div"), this.synco.textContent = "it should be here", this.el.appendChild(this.synco), console.log("RENDERING"), console.log(this.model.get("connected"), " CONNECTED"), console.log(this.model.get("synco"), " SYNCO"), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this), this.model.on("change:synco", this.value_changed, this)
+                    this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this)
                 }
                 value_changed() {
-                    console.log("THE VALUE CHANGED"), this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status"), this.synco.textContent = this.model.get("synco")
+                    this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status")
                 }
             }
-            t.NaoRobotView = l
+            t.NaoRobotView = r
         },
         889: (e, t, n) => {
-            (t = n(645)(!1)).push([e.id, ".custom-widget {\n  background-color: lightseagreen;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
+            (t = n(645)(!1)).push([e.id, ".custom-widget {\n  color: var(--jp-widgets-color) !important;\n  font-family: monospace;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
         },
         645: e => {
             "use strict";
             e.exports = function(e) {
                 var t = [];
                 return t.toString = function() {
                     return this.map((function(t) {
                         var n = function(e, t) {
-                            var n, o, i, s = e[1] || "",
+                            var n, i, s, o = e[1] || "",
                                 a = e[3];
-                            if (!a) return s;
+                            if (!a) return o;
                             if (t && "function" == typeof btoa) {
-                                var c = (n = a, o = btoa(unescape(encodeURIComponent(JSON.stringify(n)))), i = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o), "/*# ".concat(i, " */")),
-                                    l = a.sources.map((function(e) {
+                                var c = (n = a, i = btoa(unescape(encodeURIComponent(JSON.stringify(n)))), s = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i), "/*# ".concat(s, " */")),
+                                    r = a.sources.map((function(e) {
                                         return "/*# sourceURL=".concat(a.sourceRoot || "").concat(e, " */")
                                     }));
-                                return [s].concat(l).concat([c]).join("\n")
+                                return [o].concat(r).concat([c]).join("\n")
                             }
-                            return [s].join("\n")
+                            return [o].join("\n")
                         }(t, e);
                         return t[2] ? "@media ".concat(t[2], " {").concat(n, "}") : n
                     })).join("")
-                }, t.i = function(e, n, o) {
+                }, t.i = function(e, n, i) {
                     "string" == typeof e && (e = [
                         [null, e, ""]
                     ]);
-                    var i = {};
-                    if (o)
-                        for (var s = 0; s < this.length; s++) {
-                            var a = this[s][0];
-                            null != a && (i[a] = !0)
+                    var s = {};
+                    if (i)
+                        for (var o = 0; o < this.length; o++) {
+                            var a = this[o][0];
+                            null != a && (s[a] = !0)
                         }
                     for (var c = 0; c < e.length; c++) {
-                        var l = [].concat(e[c]);
-                        o && i[l[0]] || (n && (l[2] ? l[2] = "".concat(n, " and ").concat(l[2]) : l[2] = n), t.push(l))
+                        var r = [].concat(e[c]);
+                        i && s[r[0]] || (n && (r[2] ? r[2] = "".concat(n, " and ").concat(r[2]) : r[2] = n), t.push(r))
                     }
                 }, t
             }
         },
         204: (e, t, n) => {
-            var o = n(379),
-                i = n(889);
-            "string" == typeof(i = i.__esModule ? i.default : i) && (i = [
-                [e.id, i, ""]
+            var i = n(379),
+                s = n(889);
+            "string" == typeof(s = s.__esModule ? s.default : s) && (s = [
+                [e.id, s, ""]
             ]);
-            o(i, {
+            i(s, {
                 insert: "head",
                 singleton: !1
-            }), e.exports = i.locals || {}
+            }), e.exports = s.locals || {}
         },
         379: (e, t, n) => {
             "use strict";
-            var o, i = function() {
+            var i, s = function() {
                     var e = {};
                     return function(t) {
                         if (void 0 === e[t]) {
                             var n = document.querySelector(t);
                             if (window.HTMLIFrameElement && n instanceof window.HTMLIFrameElement) try {
                                 n = n.contentDocument.head
                             } catch (e) {
                                 n = null
                             }
                             e[t] = n
                         }
                         return e[t]
                     }
                 }(),
-                s = [];
+                o = [];
 
             function a(e) {
-                for (var t = -1, n = 0; n < s.length; n++)
-                    if (s[n].identifier === e) {
+                for (var t = -1, n = 0; n < o.length; n++)
+                    if (o[n].identifier === e) {
                         t = n;
                         break
                     } return t
             }
 
             function c(e, t) {
-                for (var n = {}, o = [], i = 0; i < e.length; i++) {
-                    var c = e[i],
-                        l = t.base ? c[0] + t.base : c[0],
-                        r = n[l] || 0,
-                        u = "".concat(l, " ").concat(r);
-                    n[l] = r + 1;
-                    var d = a(u),
+                for (var n = {}, i = [], s = 0; s < e.length; s++) {
+                    var c = e[s],
+                        r = t.base ? c[0] + t.base : c[0],
+                        l = n[r] || 0,
+                        d = "".concat(r, " ").concat(l);
+                    n[r] = l + 1;
+                    var u = a(d),
                         h = {
                             css: c[1],
                             media: c[2],
                             sourceMap: c[3]
-                        }; - 1 !== d ? (s[d].references++, s[d].updater(h)) : s.push({
-                        identifier: u,
-                        updater: b(h, t),
+                        }; - 1 !== u ? (o[u].references++, o[u].updater(h)) : o.push({
+                        identifier: d,
+                        updater: v(h, t),
                         references: 1
-                    }), o.push(u)
+                    }), i.push(d)
                 }
-                return o
+                return i
             }
 
-            function l(e) {
+            function r(e) {
                 var t = document.createElement("style"),
-                    o = e.attributes || {};
-                if (void 0 === o.nonce) {
-                    var s = n.nc;
-                    s && (o.nonce = s)
+                    i = e.attributes || {};
+                if (void 0 === i.nonce) {
+                    var o = n.nc;
+                    o && (i.nonce = o)
                 }
-                if (Object.keys(o).forEach((function(e) {
-                        t.setAttribute(e, o[e])
+                if (Object.keys(i).forEach((function(e) {
+                        t.setAttribute(e, i[e])
                     })), "function" == typeof e.insert) e.insert(t);
                 else {
-                    var a = i(e.insert || "head");
+                    var a = s(e.insert || "head");
                     if (!a) throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
                     a.appendChild(t)
                 }
                 return t
             }
-            var r, u = (r = [], function(e, t) {
-                return r[e] = t, r.filter(Boolean).join("\n")
+            var l, d = (l = [], function(e, t) {
+                return l[e] = t, l.filter(Boolean).join("\n")
             });
 
-            function d(e, t, n, o) {
-                var i = n ? "" : o.media ? "@media ".concat(o.media, " {").concat(o.css, "}") : o.css;
-                if (e.styleSheet) e.styleSheet.cssText = u(t, i);
+            function u(e, t, n, i) {
+                var s = n ? "" : i.media ? "@media ".concat(i.media, " {").concat(i.css, "}") : i.css;
+                if (e.styleSheet) e.styleSheet.cssText = d(t, s);
                 else {
-                    var s = document.createTextNode(i),
+                    var o = document.createTextNode(s),
                         a = e.childNodes;
-                    a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(s, a[t]) : e.appendChild(s)
+                    a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(o, a[t]) : e.appendChild(o)
                 }
             }
 
             function h(e, t, n) {
-                var o = n.css,
-                    i = n.media,
-                    s = n.sourceMap;
-                if (i ? e.setAttribute("media", i) : e.removeAttribute("media"), s && "undefined" != typeof btoa && (o += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s)))), " */")), e.styleSheet) e.styleSheet.cssText = o;
+                var i = n.css,
+                    s = n.media,
+                    o = n.sourceMap;
+                if (s ? e.setAttribute("media", s) : e.removeAttribute("media"), o && "undefined" != typeof btoa && (i += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))), " */")), e.styleSheet) e.styleSheet.cssText = i;
                 else {
                     for (; e.firstChild;) e.removeChild(e.firstChild);
-                    e.appendChild(document.createTextNode(o))
+                    e.appendChild(document.createTextNode(i))
                 }
             }
             var p = null,
-                m = 0;
+                b = 0;
 
-            function b(e, t) {
-                var n, o, i;
+            function v(e, t) {
+                var n, i, s;
                 if (t.singleton) {
-                    var s = m++;
-                    n = p || (p = l(t)), o = d.bind(null, n, s, !1), i = d.bind(null, n, s, !0)
-                } else n = l(t), o = h.bind(null, n, t), i = function() {
+                    var o = b++;
+                    n = p || (p = r(t)), i = u.bind(null, n, o, !1), s = u.bind(null, n, o, !0)
+                } else n = r(t), i = h.bind(null, n, t), s = function() {
                     ! function(e) {
                         if (null === e.parentNode) return !1;
                         e.parentNode.removeChild(e)
                     }(n)
                 };
-                return o(e),
+                return i(e),
                     function(t) {
                         if (t) {
                             if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;
-                            o(e = t)
-                        } else i()
+                            i(e = t)
+                        } else s()
                     }
             }
             e.exports = function(e, t) {
-                (t = t || {}).singleton || "boolean" == typeof t.singleton || (t.singleton = (void 0 === o && (o = Boolean(window && document && document.all && !window.atob)), o));
+                (t = t || {}).singleton || "boolean" == typeof t.singleton || (t.singleton = (void 0 === i && (i = Boolean(window && document && document.all && !window.atob)), i));
                 var n = c(e = e || [], t);
                 return function(e) {
                     if (e = e || [], "[object Array]" === Object.prototype.toString.call(e)) {
-                        for (var o = 0; o < n.length; o++) {
-                            var i = a(n[o]);
-                            s[i].references--
-                        }
-                        for (var l = c(e, t), r = 0; r < n.length; r++) {
-                            var u = a(n[r]);
-                            0 === s[u].references && (s[u].updater(), s.splice(u, 1))
+                        for (var i = 0; i < n.length; i++) {
+                            var s = a(n[i]);
+                            o[s].references--
+                        }
+                        for (var r = c(e, t), l = 0; l < n.length; l++) {
+                            var d = a(n[l]);
+                            0 === o[d].references && (o[d].updater(), o.splice(d, 1))
                         }
-                        n = l
+                        n = r
                     }
                 }
             }
         },
         147: e => {
             "use strict";
-            e.exports = JSON.parse('{"name":"ipynao","version":"0.1.3","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.4"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
+            e.exports = JSON.parse('{"name":"ipynao","version":"0.2.0","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.5"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
         }
     }
 ]);
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js`

 * *Files identical despite different names*

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js`

 * *Files identical despite different names*

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.0f89463f87cb2ebf3619.js` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.b415cdfc968a0f208fcf.js`

 * *Files 4% similar despite different names*

### js-beautify {}

```diff
@@ -37,21 +37,21 @@
     }
     E.m = y, E.c = w, E.d = (e, r) => {
         for (var t in r) E.o(r, t) && !E.o(e, t) && Object.defineProperty(e, t, {
             enumerable: !0,
             get: r[t]
         })
     }, E.f = {}, E.e = e => Promise.all(Object.keys(E.f).reduce(((r, t) => (E.f[t](e, r), r)), [])), E.u = e => e + "." + {
-        14: "fc6d1d9a1e570d86bdac",
-        367: "85a5246f5a9e7b7a8ee5",
+        14: "0fa00990c242d51d6008",
+        367: "b645d81d431e42710263",
         480: "d3a408009df0988c3390",
         568: "54258d511e530803c07b"
     } [e] + ".js?v=" + {
-        14: "fc6d1d9a1e570d86bdac",
-        367: "85a5246f5a9e7b7a8ee5",
+        14: "0fa00990c242d51d6008",
+        367: "b645d81d431e42710263",
         480: "d3a408009df0988c3390",
         568: "54258d511e530803c07b"
     } [e], E.g = function() {
         if ("object" == typeof globalThis) return globalThis;
         try {
             return this || new Function("return this")()
         } catch (e) {
@@ -99,15 +99,15 @@
                         (!u || !u.loaded && (!n != !u.eager ? n : i > u.from)) && (o[r] = {
                             get: t,
                             from: i,
                             eager: !!n
                         })
                     },
                     f = [];
-                return "default" === t && (u("ipynao", "0.1.3", (() => Promise.all([E.e(367), E.e(568)]).then((() => () => E(568))))), u("nao-socket.io", "1.0.4", (() => E.e(14).then((() => () => E(14)))))), e[t] = f.length ? Promise.all(f).then((() => e[t] = 1)) : 1
+                return "default" === t && (u("ipynao", "0.2.0", (() => Promise.all([E.e(367), E.e(568)]).then((() => () => E(568))))), u("nao-socket.io", "1.0.5", (() => E.e(14).then((() => () => E(14)))))), e[t] = f.length ? Promise.all(f).then((() => e[t] = 1)) : 1
             }
         }
     })(), (() => {
         var e;
         E.g.importScripts && (e = E.g.location + "");
         var r = E.g.document;
         if (!e && r && (r.currentScript && (e = r.currentScript.src), !e)) {
@@ -207,24 +207,24 @@
     }, d = e => (e.loaded = 1, e.get()), h = (p = e => function(r, t, n, o) {
         var a = E.I(r);
         return a && a.then ? a.then(e.bind(e, r, E.S[r], t, n, o)) : e(r, E.S[r], t, n, o)
     })(((e, r, t, n) => (i(e, t), s(r, 0, t, n)))), v = p(((e, r, t, n, o) => {
         var a = r && E.o(r, t) && l(r, t, n);
         return a ? d(a) : o()
     })), b = {}, g = {
-        798: () => v("default", "nao-socket.io", [4, 1, 0, 4], (() => E.e(14).then((() => () => E(14))))),
+        562: () => v("default", "nao-socket.io", [4, 1, 0, 5], (() => E.e(14).then((() => () => E(14))))),
         829: () => h("default", "@jupyter-widgets/base", [, [1, 6],
             [1, 5],
             [1, 4],
             [1, 3],
             [1, 2],
             [1, 1, 1, 10], 1, 1, 1, 1, 1
         ])
     }, m = {
-        367: [798, 829]
+        367: [562, 829]
     }, E.f.consumes = (e, r) => {
         E.o(m, e) && m[e].forEach((e => {
             if (E.o(b, e)) return r.push(b[e]);
             var t = r => {
                     b[e] = 0, E.m[e] = t => {
                         delete E.c[e], t.exports = r()
                     }
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json` & `ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json`

 * *Files 2% similar despite different names*

### Pretty-printed

 * *Similarity: 0.9791666666666667%*

 * *Differences: {"'packages'": "{1: {'versionInfo': '1.0.5'}}"}*

```diff
@@ -6,15 +6,15 @@
             "name": "css-loader",
             "versionInfo": "3.6.0"
         },
         {
             "extractedText": "BSD 3-Clause License\n\nCopyright (c) 2023, Isabel Paredes\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\n   list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\n   this list of conditions and the following disclaimer in the documentation\n   and/or other materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its\n   contributors may be used to endorse or promote products derived from\n   this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n",
             "licenseId": "BSD-3-Clause",
             "name": "nao-socket.io",
-            "versionInfo": "1.0.4"
+            "versionInfo": "1.0.5"
         },
         {
             "extractedText": "Copyright JS Foundation and other contributors\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
             "licenseId": "MIT",
             "name": "style-loader",
             "versionInfo": "1.3.0"
         }
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js` & `ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js`

 * *Files 8% similar despite different names*

### js-beautify {}

```diff
@@ -1,12 +1,12 @@
 /*! For license information please see index.js.LICENSE.txt */
 define(["@jupyter-widgets/base"], (__WEBPACK_EXTERNAL_MODULE__146__ => (() => {
     var __webpack_modules__ = {
             889: (e, t, n) => {
-                (t = n(352)(!1)).push([e.id, ".custom-widget {\n  background-color: lightseagreen;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
+                (t = n(352)(!1)).push([e.id, ".custom-widget {\n  color: var(--jp-widgets-color) !important;\n  font-family: monospace;\n  padding: 0px 2px;\n}\n", ""]), e.exports = t
             },
             352: e => {
                 "use strict";
                 e.exports = function(e) {
                     var t = [];
                     return t.toString = function() {
                         return this.map((function(t) {
@@ -48,24 +48,23 @@
             731: (module, exports) => {
                 var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__, io = module.exports;
                 (function() {
                     var self = this;
                     if (function(e, t) {
                             var n = e;
                             n.version = "0.9.17", n.protocol = 1, n.transports = [], n.j = [], n.sockets = {}, n.connect = function(e, o) {
-                                console.log("DBG Emile io connect");
                                 var i, s, r = n.util.parseUri(e);
                                 r.protocol = "http", t && t.location && (r.protocol = r.protocol || t.location.protocol.slice(0, -1), r.host = r.host || (t.document ? t.document.domain : t.location.hostname), r.port = r.port || t.location.port), i = n.util.uniqueUri(r);
                                 var a = {
                                     host: r.host,
                                     secure: "https" == r.protocol,
                                     port: r.port || ("https" == r.protocol ? 443 : 80),
                                     query: r.query || ""
                                 };
-                                return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (s = new n.Socket(a)), !a["force new connection"] && s && (n.sockets[i] = s), s = s || n.sockets[i], console.log("DBG Emile io connecting to", i, "options:", a), s.of(r.path.length > 1 ? r.path : "")
+                                return n.util.merge(a, o), !a["force new connection"] && n.sockets[i] || (s = new n.Socket(a)), !a["force new connection"] && s && (n.sockets[i] = s), (s = s || n.sockets[i]).of(r.path.length > 1 ? r.path : "")
                             }
                         }(io, self), function(e, t) {
                             var n = e.util = {},
                                 o = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
                                 i = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"];
                             n.parseUri = function(e) {
                                 for (var t = o.exec(e || ""), n = {}, s = 14; s--;) n[i[s]] = t[s] || "";
@@ -163,15 +162,15 @@
                             }, n.prototype.listeners = function(e) {
                                 return this.$events || (this.$events = {}), this.$events[e] || (this.$events[e] = []), t.util.isArray(this.$events[e]) || (this.$events[e] = [this.$events[e]]), this.$events[e]
                             }, n.prototype.emit = function(e) {
                                 if (!this.$events) return !1;
                                 var n = this.$events[e];
                                 if (!n) return !1;
                                 var o = Array.prototype.slice.call(arguments, 1);
-                                if (console.log("DBG Emile EventEmitter.emit:", e, o), "function" == typeof n) n.apply(this, o);
+                                if ("function" == typeof n) n.apply(this, o);
                                 else {
                                     if (!t.util.isArray(n)) return !1;
                                     for (var i = n.slice(), s = 0, r = i.length; s < r; s++) i[s].apply(this, o)
                                 }
                                 return !0
                             }
                         }(io, io), function(exports, nativeJSON) {
@@ -362,35 +361,35 @@
                                 return this
                             }, n.prototype.onPacket = function(e) {
                                 return this.socket.setHeartbeatTimeout(), "heartbeat" == e.type ? this.onHeartbeat() : ("connect" == e.type && "" == e.endpoint && this.onConnect(), "error" == e.type && "reconnect" == e.advice && (this.isOpen = !1), this.socket.onPacket(e), this)
                             }, n.prototype.setCloseTimeout = function() {
                                 if (!this.closeTimeout) {
                                     var e = this;
                                     this.closeTimeout = setTimeout((function() {
-                                        console.log("DBG Emile io transport timeout -> disconnect"), e.onDisconnect()
+                                        e.onDisconnect()
                                     }), this.socket.closeTimeout)
                                 }
                             }, n.prototype.onDisconnect = function() {
                                 return this.isOpen && this.close(), this.clearTimeouts(), this.socket.onDisconnect(), this
                             }, n.prototype.onConnect = function() {
                                 return this.socket.onConnect(), this
                             }, n.prototype.clearCloseTimeout = function() {
                                 this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null)
                             }, n.prototype.clearTimeouts = function() {
                                 this.clearCloseTimeout(), this.reopenTimeout && clearTimeout(this.reopenTimeout)
                             }, n.prototype.packet = function(e) {
                                 this.send(t.parser.encodePacket(e))
                             }, n.prototype.onHeartbeat = function(e) {
-                                console.log("DBG Emile transport: onHeartbeat"), this.packet({
+                                this.packet({
                                     type: "heartbeat"
                                 })
                             }, n.prototype.onOpen = function() {
                                 this.isOpen = !0, this.clearCloseTimeout(), this.socket.onOpen()
                             }, n.prototype.onClose = function() {
-                                console.log("DBG Emile io transport onClose"), this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
+                                this.isOpen = !1, this.socket.onClose(), this.onDisconnect()
                             }, n.prototype.prepareUrl = function() {
                                 var e = this.socket.options;
                                 return this.scheme() + "://" + e.host + ":" + e.port + "/" + e.resource + "/" + t.protocol + "/" + this.name + "/" + this.sessid
                             }, n.prototype.ready = function(e, t) {
                                 t.call(this)
                             }
                         }(io, io), function(e, t, n) {
@@ -430,50 +429,50 @@
                                 var e;
                                 for (var t in this.emit.apply(this, arguments), this.namespaces) this.namespaces.hasOwnProperty(t) && (e = this.of(t)).$emit.apply(e, arguments)
                             }, o.prototype.handshake = function(e) {
                                 var n = this,
                                     o = this.options;
 
                                 function s(t) {
-                                    t instanceof Error ? (n.connecting = !1, console.log("DBG Emile onError from handshake:"), console.log(t), n.onError(t.message)) : e.apply(null, t.split(":"))
+                                    t instanceof Error ? (n.connecting = !1, n.onError(t.message)) : e.apply(null, t.split(":"))
                                 }
                                 var r = ["http" + (o.secure ? "s" : "") + ":/", o.host + ":" + o.port, o.resource, t.protocol, t.util.query(this.options.query, "t=" + +new Date)].join("/");
                                 if (this.isXDomain() && !t.util.ua.hasCORS) {
                                     var a = document.getElementsByTagName("script")[0],
                                         c = document.createElement("script");
                                     c.src = r + "&jsonp=" + t.j.length, a.parentNode.insertBefore(c, a), t.j.push((function(e) {
                                         s(e), c.parentNode.removeChild(c)
                                     }))
                                 } else {
                                     var l = t.util.request();
                                     l.open("GET", r, !0), this.isXDomain() && (l.withCredentials = !0), l.onreadystatechange = function() {
-                                        4 == l.readyState && (l.onreadystatechange = i, 200 == l.status ? s(l.responseText) : 403 == l.status ? (console.log("DBG Emile onError from xhr:"), console.log(l.status, "text", l.responseText), n.onError(l.responseText)) : (n.connecting = !1, console.log("DBG Emile onError from xhr but not 403"), console.log(l.status, "text", l.responseText), !n.reconnecting && n.onError(l.responseText)))
+                                        4 == l.readyState && (l.onreadystatechange = i, 200 == l.status ? s(l.responseText) : 403 == l.status ? n.onError(l.responseText) : (n.connecting = !1, !n.reconnecting && n.onError(l.responseText)))
                                     }, l.send(null)
                                 }
                             }, o.prototype.getTransport = function(e) {
                                 for (var n, o = e || this.transports, i = 0; n = o[i]; i++)
-                                    if (console.log("DBG Emile trying transport: ", n), t.Transport[n] && t.Transport[n].check(this) && (!this.isXDomain() || t.Transport[n].xdomainCheck(this))) return console.log("DBG Emile keeping transport: ", n), new t.Transport[n](this, this.sessionid);
+                                    if (t.Transport[n] && t.Transport[n].check(this) && (!this.isXDomain() || t.Transport[n].xdomainCheck(this))) return new t.Transport[n](this, this.sessionid);
                                 return null
                             }, o.prototype.connect = function(e) {
-                                if (console.log("DBG Emile io socket connect"), this.connecting) return this;
+                                if (this.connecting) return this;
                                 var n = this;
                                 return n.connecting = !0, this.handshake((function(o, i, s, r) {
                                     n.sessionid = o, n.closeTimeout = 1e3 * s, n.heartbeatTimeout = 1e3 * i, n.transports || (n.transports = n.origTransports = r ? t.util.intersect(r.split(","), n.options.transports) : n.options.transports), n.setHeartbeatTimeout(),
                                         function e(t) {
-                                            if (console.log("DBG Emile io socket connecting to transport"), n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(t), !n.transport) return n.publish("connect_failed");
-                                            console.log("DBG Emile io socket connecting to transport (2)"), n.transport.ready(n, (function() {
-                                                console.log("DBG Emile io transport is ready"), n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
-                                                    if (!n.connected && (console.log("DBG Emile io socket timeout...."), n.connecting = !1, n.options["try multiple transports"])) {
+                                            if (n.transport && n.transport.clearTimeouts(), n.transport = n.getTransport(t), !n.transport) return n.publish("connect_failed");
+                                            n.transport.ready(n, (function() {
+                                                n.connecting = !0, n.publish("connecting", n.transport.name), n.transport.open(), n.options["connect timeout"] && (n.connectTimeoutTimer = setTimeout((function() {
+                                                    if (!n.connected && (n.connecting = !1, n.options["try multiple transports"])) {
                                                         for (var t = n.transports; t.length > 0 && t.splice(0, 1)[0] != n.transport.name;);
                                                         t.length ? e(t) : n.publish("connect_failed")
                                                     }
                                                 }), n.options["connect timeout"]))
                                             }))
                                         }(n.transports), n.once("connect", (function() {
-                                            console.log("DBG Emile io socket something connected"), clearTimeout(n.connectTimeoutTimer), e && "function" == typeof e && e()
+                                            clearTimeout(n.connectTimeoutTimer), e && "function" == typeof e && e()
                                         }))
                                 })), this
                             }, o.prototype.setHeartbeatTimeout = function() {
                                 if (clearTimeout(this.heartbeatTimeoutTimer), !this.transport || this.transport.heartbeats()) {
                                     var e = this;
                                     this.heartbeatTimeoutTimer = setTimeout((function() {
                                         e.transport.onClose()
@@ -484,34 +483,33 @@
                             }, o.prototype.setBuffer = function(e) {
                                 this.doBuffer = e, !e && this.connected && this.buffer.length && (this.options.manualFlush || this.flushBuffer())
                             }, o.prototype.flushBuffer = function() {
                                 this.transport.payload(this.buffer), this.buffer = []
                             }, o.prototype.disconnect = function() {
                                 return (this.connected || this.connecting) && (this.open && this.of("").packet({
                                     type: "disconnect"
-                                }), console.log("DBG Emile io socket disconnect -> booting"), this.onDisconnect("booted")), this
+                                }), this.onDisconnect("booted")), this
                             }, o.prototype.disconnectSync = function() {
                                 var e = t.util.request(),
                                     n = ["http" + (this.options.secure ? "s" : "") + ":/", this.options.host + ":" + this.options.port, this.options.resource, t.protocol, "", this.sessionid].join("/") + "/?disconnect=1";
-                                e.open("GET", n, !1), e.send(null), console.log("DBG Emile io socket disconnectSync -> booting"), this.onDisconnect("booted")
+                                e.open("GET", n, !1), e.send(null), this.onDisconnect("booted")
                             }, o.prototype.isXDomain = function() {
                                 var e = n.location.port || ("https:" == n.location.protocol ? 443 : 80);
                                 return this.options.host !== n.location.hostname || this.options.port != e
                             }, o.prototype.onConnect = function() {
-                                console.log("DBG Emile io socket onConnect"), this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
+                                this.connected || (this.connected = !0, this.connecting = !1, this.doBuffer || this.setBuffer(!1), this.emit("connect"))
                             }, o.prototype.onOpen = function() {
                                 this.open = !0
                             }, o.prototype.onClose = function() {
                                 this.open = !1, clearTimeout(this.heartbeatTimeoutTimer)
                             }, o.prototype.onPacket = function(e) {
                                 this.of(e.endpoint).onPacket(e)
                             }, o.prototype.onError = function(e) {
-                                console.log("DBG Emile io socket onError", e), e && e.advice && "reconnect" === e.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", e && e.reason ? e.reason : e)
+                                e && e.advice && "reconnect" === e.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect()), this.publish("error", e && e.reason ? e.reason : e)
                             }, o.prototype.onDisconnect = function(e) {
-                                console.log("DBG Emile io socket onDisconnect", e);
                                 var t = this.connected,
                                     n = this.connecting;
                                 this.connected = !1, this.connecting = !1, this.open = !1, (t || n) && (this.transport.close(), this.transport.clearTimeouts(), t && (this.publish("disconnect", e), "booted" != e && this.options.reconnect && !this.reconnecting && this.reconnect()))
                             }, o.prototype.reconnect = function() {
                                 this.reconnecting = !0, this.reconnectionAttempts = 0, this.reconnectionDelay = this.options["reconnection delay"];
                                 var e = this,
                                     t = this.options["max reconnection attempts"],
@@ -554,15 +552,15 @@
                             }, n.prototype.emit = function(e) {
                                 var t = Array.prototype.slice.call(arguments, 1),
                                     n = t[t.length - 1],
                                     o = {
                                         type: "event",
                                         name: e
                                     };
-                                return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, t = t.slice(0, t.length - 1)), o.args = t, console.log("DBG Emile SocketNamespace.emit:", o), this.packet(o)
+                                return "function" == typeof n && (o.id = ++this.ackPackets, o.ack = "data", this.acks[o.id] = n, t = t.slice(0, t.length - 1)), o.args = t, this.packet(o)
                             }, n.prototype.disconnect = function() {
                                 return "" === this.name ? this.socket.disconnect() : (this.packet({
                                     type: "disconnect"
                                 }), this.$emit("disconnect")), this
                             }, n.prototype.onPacket = function(e) {
                                 var n = this;
 
@@ -574,15 +572,15 @@
                                     })
                                 }
                                 switch (e.type) {
                                     case "connect":
                                         this.$emit("connect");
                                         break;
                                     case "disconnect":
-                                        "" === this.name ? (console.log("DBG Emile io socket onPacket disconnect, reason=", e.reason), this.socket.onDisconnect(e.reason || "booted")) : this.$emit("disconnect", e.reason);
+                                        "" === this.name ? this.socket.onDisconnect(e.reason || "booted") : this.$emit("disconnect", e.reason);
                                         break;
                                     case "message":
                                     case "json":
                                         var i = ["message", e.data];
                                         "data" == e.ack ? i.push(o) : e.ack && this.packet({
                                             type: "ack",
                                             ackId: e.id
@@ -591,15 +589,15 @@
                                     case "event":
                                         i = [e.name].concat(e.args), "data" == e.ack && i.push(o), this.$emit.apply(this, i);
                                         break;
                                     case "ack":
                                         this.acks[e.ackId] && (this.acks[e.ackId].apply(this, e.args), delete this.acks[e.ackId]);
                                         break;
                                     case "error":
-                                        e.advice ? (console.log("DBG Emile onError from packet:"), console.log(e), this.socket.onError(e)) : "unauthorized" == e.reason ? this.$emit("connect_failed", e.reason) : this.$emit("error", e.reason)
+                                        e.advice ? this.socket.onError(e) : "unauthorized" == e.reason ? this.$emit("connect_failed", e.reason) : this.$emit("error", e.reason)
                                 }
                             }, o.prototype.send = function() {
                                 this.namespace.flags[this.name] = !0, this.namespace.send.apply(this.namespace, arguments)
                             }, o.prototype.emit = function() {
                                 this.namespace.flags[this.name] = !0, this.namespace.emit.apply(this.namespace, arguments)
                             }
                         }(io, io), function(e, t, n) {
@@ -612,37 +610,37 @@
                                 return e || (e = n.MozWebSocket || n.WebSocket), this.websocket = new e(this.prepareUrl() + o), this.websocket.onopen = function() {
                                     i.onOpen(), i.socket.setBuffer(!1)
                                 }, this.websocket.onmessage = function(e) {
                                     i.onData(e.data)
                                 }, this.websocket.onclose = function() {
                                     i.onClose(), i.socket.setBuffer(!0)
                                 }, this.websocket.onerror = function(e) {
-                                    console.log("DBG Emile onerror from websocket WS", e), i.onError(e)
+                                    i.onError(e)
                                 }, this
                             }, t.util.ua.iDevice ? o.prototype.send = function(e) {
                                 var t = this;
                                 return setTimeout((function() {
                                     t.websocket.send(e)
                                 }), 0), this
                             } : o.prototype.send = function(e) {
                                 return this.websocket.send(e), this
                             }, o.prototype.payload = function(e) {
                                 for (var t = 0, n = e.length; t < n; t++) this.packet(e[t]);
                                 return this
                             }, o.prototype.close = function() {
                                 return this.websocket.close(), this
                             }, o.prototype.onError = function(e) {
-                                console.log("DBG Emile onerror from websocket WS.onError, forwarding", e), this.socket.onError(e)
+                                this.socket.onError(e)
                             }, o.prototype.scheme = function() {
                                 return this.socket.options.secure ? "wss" : "ws"
                             }, o.check = function() {
                                 return "WebSocket" in n && !("__addTask" in WebSocket) || "MozWebSocket" in n
                             }, o.xdomainCheck = function() {
                                 return !0
-                            }, console.log("DBG Emile: skipping transport websocket.")
+                            }
                         }(io.Transport, io, self), function(e, t) {
                             function n() {
                                 t.Transport.websocket.apply(this, arguments)
                             }
                             e.flashsocket = n, t.util.inherit(n, t.Transport.websocket), n.prototype.name = "flashsocket", n.prototype.open = function() {
                                 var e = this,
                                     n = arguments;
@@ -667,15 +665,15 @@
                                 var s = this;
                                 if (document.body) return i();
                                 t.util.load(i)
                             }, n.check = function() {
                                 return !("undefined" == typeof WebSocket || !("__initialize" in WebSocket) || !swfobject) && swfobject.getFlashPlayerVersion().major >= 10
                             }, n.xdomainCheck = function() {
                                 return !0
-                            }, console.log("DBG Emile: skipping transport flashsocket (come on we're in 2023).")
+                            }
                         }(io.Transport, io), "undefined" != typeof window) var swfobject = function() {
                         var e, t, n, o, i, s, r = "undefined",
                             a = "object",
                             c = "Shockwave Flash",
                             l = "application/x-shockwave-flash",
                             u = "SWFObjectExprInst",
                             p = "onreadystatechange",
@@ -690,28 +688,28 @@
                                     t.setAttribute("type", l);
                                     var n = e.appendChild(t);
                                     if (n) {
                                         var o = 0;
                                         ! function() {
                                             if (typeof n.GetVariable != r) {
                                                 var i = n.GetVariable("$version");
-                                                i && (i = i.split(" ")[1].split(","), E.pv = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
+                                                i && (i = i.split(" ")[1].split(","), S.pv = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
                                             } else if (o < 10) return o++, void setTimeout(arguments.callee, 10);
-                                            e.removeChild(t), n = null, C()
+                                            e.removeChild(t), n = null, x()
                                         }()
-                                    } else C()
-                                }() : C()
+                                    } else x()
+                                }() : x()
                             }],
                             v = [],
                             b = [],
-                            g = [],
-                            _ = !1,
+                            _ = [],
+                            g = !1,
                             k = !1,
                             w = !0,
-                            E = function() {
+                            S = function() {
                                 var e = typeof d.getElementById != r && typeof d.getElementsByTagName != r && typeof d.createElement != r,
                                     t = f.userAgent.toLowerCase(),
                                     n = f.platform.toLowerCase(),
                                     o = /win/.test(n || t),
                                     i = /mac/.test(n || t),
                                     s = !!/webkit/.test(t) && parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")),
                                     u = !1,
@@ -728,65 +726,65 @@
                                     wk: s,
                                     ie: u,
                                     win: o,
                                     mac: i
                                 }
                             }();
 
-                        function S() {
-                            if (!_) {
+                        function T() {
+                            if (!g) {
                                 try {
                                     var e = d.getElementsByTagName("body")[0].appendChild(L("span"));
                                     e.parentNode.removeChild(e)
                                 } catch (e) {
                                     return
                                 }
-                                _ = !0;
+                                g = !0;
                                 for (var t = y.length, n = 0; n < t; n++) y[n]()
                             }
                         }
 
-                        function T(e) {
-                            _ ? e() : y[y.length] = e
+                        function E(e) {
+                            g ? e() : y[y.length] = e
                         }
 
-                        function x(e) {
+                        function C(e) {
                             if (typeof h.addEventListener != r) h.addEventListener("load", e, !1);
                             else if (typeof d.addEventListener != r) d.addEventListener("load", e, !1);
                             else if (typeof h.attachEvent != r) ! function(e, t, n) {
-                                e.attachEvent(t, n), g[g.length] = [e, t, n]
+                                e.attachEvent(t, n), _[_.length] = [e, t, n]
                             }(h, "onload", e);
                             else if ("function" == typeof h.onload) {
                                 var t = h.onload;
                                 h.onload = function() {
                                     t(), e()
                                 }
                             } else h.onload = e
                         }
 
-                        function C() {
+                        function x() {
                             var e = v.length;
                             if (e > 0)
                                 for (var t = 0; t < e; t++) {
                                     var n = v[t].id,
                                         o = v[t].callbackFn,
                                         i = {
                                             success: !1,
                                             id: n
                                         };
-                                    if (E.pv[0] > 0) {
+                                    if (S.pv[0] > 0) {
                                         var s = R(n);
                                         if (s)
-                                            if (!M(v[t].swfVersion) || E.wk && E.wk < 312)
+                                            if (!P(v[t].swfVersion) || S.wk && S.wk < 312)
                                                 if (v[t].expressInstall && j()) {
                                                     var a = {};
                                                     a.data = v[t].expressInstall, a.width = s.getAttribute("width") || "0", a.height = s.getAttribute("height") || "0", s.getAttribute("class") && (a.styleclass = s.getAttribute("class")), s.getAttribute("align") && (a.align = s.getAttribute("align"));
                                                     for (var c = {}, l = s.getElementsByTagName("param"), u = l.length, p = 0; p < u; p++) "movie" != l[p].getAttribute("name").toLowerCase() && (c[l[p].getAttribute("name")] = l[p].getAttribute("value"));
-                                                    D(a, c, n, o)
-                                                } else N(s), o && o(i);
+                                                    N(a, c, n, o)
+                                                } else A(s), o && o(i);
                                         else q(n, !0), o && (i.success = !0, i.ref = O(n), o(i))
                                     } else if (q(n, !0), o) {
                                         var h = O(n);
                                         h && typeof h.SetVariable != r && (i.success = !0, i.ref = h), o(i)
                                     }
                                 }
                         }
@@ -799,88 +797,88 @@
                                 else {
                                     var o = n.getElementsByTagName(a)[0];
                                     o && (t = o)
                                 } return t
                         }
 
                         function j() {
-                            return !k && M("6.0.65") && (E.win || E.mac) && !(E.wk && E.wk < 312)
+                            return !k && P("6.0.65") && (S.win || S.mac) && !(S.wk && S.wk < 312)
                         }
 
-                        function D(i, s, a, c) {
+                        function N(i, s, a, c) {
                             k = !0, n = c || null, o = {
                                 success: !1,
                                 id: a
                             };
                             var l = R(a);
                             if (l) {
-                                "OBJECT" == l.nodeName ? (e = A(l), t = null) : (e = l, t = a), i.id = u, (typeof i.width == r || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == r || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), d.title = d.title.slice(0, 47) + " - Flash Player Installation";
-                                var p = E.ie && E.win ? ["Active"].concat("").join("X") : "PlugIn",
+                                "OBJECT" == l.nodeName ? (e = W(l), t = null) : (e = l, t = a), i.id = u, (typeof i.width == r || !/%$/.test(i.width) && parseInt(i.width, 10) < 310) && (i.width = "310"), (typeof i.height == r || !/%$/.test(i.height) && parseInt(i.height, 10) < 137) && (i.height = "137"), d.title = d.title.slice(0, 47) + " - Flash Player Installation";
+                                var p = S.ie && S.win ? ["Active"].concat("").join("X") : "PlugIn",
                                     f = "MMredirectURL=" + h.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + p + "&MMdoctitle=" + d.title;
-                                if (typeof s.flashvars != r ? s.flashvars += "&" + f : s.flashvars = f, E.ie && E.win && 4 != l.readyState) {
+                                if (typeof s.flashvars != r ? s.flashvars += "&" + f : s.flashvars = f, S.ie && S.win && 4 != l.readyState) {
                                     var m = L("div");
                                     a += "SWFObjectNew", m.setAttribute("id", a), l.parentNode.insertBefore(m, l), l.style.display = "none",
                                         function() {
                                             4 == l.readyState ? l.parentNode.removeChild(l) : setTimeout(arguments.callee, 10)
                                         }()
                                 }
-                                W(i, s, a)
+                                D(i, s, a)
                             }
                         }
 
-                        function N(e) {
-                            if (E.ie && E.win && 4 != e.readyState) {
+                        function A(e) {
+                            if (S.ie && S.win && 4 != e.readyState) {
                                 var t = L("div");
-                                e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(A(e), t), e.style.display = "none",
+                                e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(W(e), t), e.style.display = "none",
                                     function() {
                                         4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
                                     }()
-                            } else e.parentNode.replaceChild(A(e), e)
+                            } else e.parentNode.replaceChild(W(e), e)
                         }
 
-                        function A(e) {
+                        function W(e) {
                             var t = L("div");
-                            if (E.win && E.ie) t.innerHTML = e.innerHTML;
+                            if (S.win && S.ie) t.innerHTML = e.innerHTML;
                             else {
                                 var n = e.getElementsByTagName(a)[0];
                                 if (n) {
                                     var o = n.childNodes;
                                     if (o)
                                         for (var i = o.length, s = 0; s < i; s++) 1 == o[s].nodeType && "PARAM" == o[s].nodeName || 8 == o[s].nodeType || t.appendChild(o[s].cloneNode(!0))
                                 }
                             }
                             return t
                         }
 
-                        function W(e, t, n) {
+                        function D(e, t, n) {
                             var o, i = R(n);
-                            if (E.wk && E.wk < 312) return o;
+                            if (S.wk && S.wk < 312) return o;
                             if (i)
-                                if (typeof e.id == r && (e.id = n), E.ie && E.win) {
+                                if (typeof e.id == r && (e.id = n), S.ie && S.win) {
                                     var s = "";
                                     for (var c in e) e[c] != Object.prototype[c] && ("data" == c.toLowerCase() ? t.movie = e[c] : "styleclass" == c.toLowerCase() ? s += ' class="' + e[c] + '"' : "classid" != c.toLowerCase() && (s += " " + c + '="' + e[c] + '"'));
                                     var u = "";
                                     for (var p in t) t[p] != Object.prototype[p] && (u += '<param name="' + p + '" value="' + t[p] + '" />');
                                     i.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + s + ">" + u + "</object>", b[b.length] = e.id, o = R(e.id)
                                 } else {
                                     var h = L(a);
                                     for (var d in h.setAttribute("type", l), e) e[d] != Object.prototype[d] && ("styleclass" == d.toLowerCase() ? h.setAttribute("class", e[d]) : "classid" != d.toLowerCase() && h.setAttribute(d, e[d]));
-                                    for (var f in t) t[f] != Object.prototype[f] && "movie" != f.toLowerCase() && B(h, f, t[f]);
+                                    for (var f in t) t[f] != Object.prototype[f] && "movie" != f.toLowerCase() && I(h, f, t[f]);
                                     i.parentNode.replaceChild(h, i), o = h
                                 } return o
                         }
 
-                        function B(e, t, n) {
+                        function I(e, t, n) {
                             var o = L("param");
                             o.setAttribute("name", t), o.setAttribute("value", n), e.appendChild(o)
                         }
 
-                        function I(e) {
+                        function M(e) {
                             var t = R(e);
-                            t && "OBJECT" == t.nodeName && (E.ie && E.win ? (t.style.display = "none", function() {
+                            t && "OBJECT" == t.nodeName && (S.ie && S.win ? (t.style.display = "none", function() {
                                 4 == t.readyState ? function(e) {
                                     var t = R(e);
                                     if (t) {
                                         for (var n in t) "function" == typeof t[n] && (t[n] = null);
                                         t.parentNode.removeChild(t)
                                     }
                                 }(e) : setTimeout(arguments.callee, 10)
@@ -895,141 +893,141 @@
                             return t
                         }
 
                         function L(e) {
                             return d.createElement(e)
                         }
 
-                        function M(e) {
-                            var t = E.pv,
+                        function P(e) {
+                            var t = S.pv,
                                 n = e.split(".");
                             return n[0] = parseInt(n[0], 10), n[1] = parseInt(n[1], 10) || 0, n[2] = parseInt(n[2], 10) || 0, t[0] > n[0] || t[0] == n[0] && t[1] > n[1] || t[0] == n[0] && t[1] == n[1] && t[2] >= n[2]
                         }
 
-                        function P(e, t, n, o) {
-                            if (!E.ie || !E.mac) {
+                        function B(e, t, n, o) {
+                            if (!S.ie || !S.mac) {
                                 var c = d.getElementsByTagName("head")[0];
                                 if (c) {
                                     var l = n && "string" == typeof n ? n : "screen";
                                     if (o && (i = null, s = null), !i || s != l) {
                                         var u = L("style");
-                                        u.setAttribute("type", "text/css"), u.setAttribute("media", l), i = c.appendChild(u), E.ie && E.win && typeof d.styleSheets != r && d.styleSheets.length > 0 && (i = d.styleSheets[d.styleSheets.length - 1]), s = l
+                                        u.setAttribute("type", "text/css"), u.setAttribute("media", l), i = c.appendChild(u), S.ie && S.win && typeof d.styleSheets != r && d.styleSheets.length > 0 && (i = d.styleSheets[d.styleSheets.length - 1]), s = l
                                     }
-                                    E.ie && E.win ? i && typeof i.addRule == a && i.addRule(e, t) : i && typeof d.createTextNode != r && i.appendChild(d.createTextNode(e + " {" + t + "}"))
+                                    S.ie && S.win ? i && typeof i.addRule == a && i.addRule(e, t) : i && typeof d.createTextNode != r && i.appendChild(d.createTextNode(e + " {" + t + "}"))
                                 }
                             }
                         }
 
                         function q(e, t) {
                             if (w) {
                                 var n = t ? "visible" : "hidden";
-                                _ && R(e) ? R(e).style.visibility = n : P("#" + e, "visibility:" + n)
+                                g && R(e) ? R(e).style.visibility = n : B("#" + e, "visibility:" + n)
                             }
                         }
 
-                        function F(e) {
+                        function $(e) {
                             return null != /[\\\"<>\.;]/.exec(e) && typeof encodeURIComponent != r ? encodeURIComponent(e) : e
                         }
-                        return E.w3 && ((typeof d.readyState != r && "complete" == d.readyState || typeof d.readyState == r && (d.getElementsByTagName("body")[0] || d.body)) && S(), _ || (typeof d.addEventListener != r && d.addEventListener("DOMContentLoaded", S, !1), E.ie && E.win && (d.attachEvent(p, (function() {
-                            "complete" == d.readyState && (d.detachEvent(p, arguments.callee), S())
+                        return S.w3 && ((typeof d.readyState != r && "complete" == d.readyState || typeof d.readyState == r && (d.getElementsByTagName("body")[0] || d.body)) && T(), g || (typeof d.addEventListener != r && d.addEventListener("DOMContentLoaded", T, !1), S.ie && S.win && (d.attachEvent(p, (function() {
+                            "complete" == d.readyState && (d.detachEvent(p, arguments.callee), T())
                         })), h == top && function() {
-                            if (!_) {
+                            if (!g) {
                                 try {
                                     d.documentElement.doScroll("left")
                                 } catch (e) {
                                     return void setTimeout(arguments.callee, 0)
                                 }
-                                S()
+                                T()
                             }
-                        }()), E.wk && function() {
-                            _ || (/loaded|complete/.test(d.readyState) ? S() : setTimeout(arguments.callee, 0))
-                        }(), x(S))), E.ie && E.win && window.attachEvent("onunload", (function() {
-                            for (var e = g.length, t = 0; t < e; t++) g[t][0].detachEvent(g[t][1], g[t][2]);
-                            for (var n = b.length, o = 0; o < n; o++) I(b[o]);
-                            for (var i in E) E[i] = null;
-                            for (var s in E = null, swfobject) swfobject[s] = null;
+                        }()), S.wk && function() {
+                            g || (/loaded|complete/.test(d.readyState) ? T() : setTimeout(arguments.callee, 0))
+                        }(), C(T))), S.ie && S.win && window.attachEvent("onunload", (function() {
+                            for (var e = _.length, t = 0; t < e; t++) _[t][0].detachEvent(_[t][1], _[t][2]);
+                            for (var n = b.length, o = 0; o < n; o++) M(b[o]);
+                            for (var i in S) S[i] = null;
+                            for (var s in S = null, swfobject) swfobject[s] = null;
                             swfobject = null
                         })), {
                             registerObject: function(e, t, n, o) {
-                                if (E.w3 && e && t) {
+                                if (S.w3 && e && t) {
                                     var i = {};
                                     i.id = e, i.swfVersion = t, i.expressInstall = n, i.callbackFn = o, v[v.length] = i, q(e, !1)
                                 } else o && o({
                                     success: !1,
                                     id: e
                                 })
                             },
                             getObjectById: function(e) {
-                                if (E.w3) return O(e)
+                                if (S.w3) return O(e)
                             },
                             embedSWF: function(e, t, n, o, i, s, c, l, u, p) {
                                 var h = {
                                     success: !1,
                                     id: t
                                 };
-                                E.w3 && !(E.wk && E.wk < 312) && e && t && n && o && i ? (q(t, !1), T((function() {
+                                S.w3 && !(S.wk && S.wk < 312) && e && t && n && o && i ? (q(t, !1), E((function() {
                                     n += "", o += "";
                                     var d = {};
                                     if (u && typeof u === a)
                                         for (var f in u) d[f] = u[f];
                                     d.data = e, d.width = n, d.height = o;
                                     var m = {};
                                     if (l && typeof l === a)
                                         for (var y in l) m[y] = l[y];
                                     if (c && typeof c === a)
                                         for (var v in c) typeof m.flashvars != r ? m.flashvars += "&" + v + "=" + c[v] : m.flashvars = v + "=" + c[v];
-                                    if (M(i)) {
-                                        var b = W(d, m, t);
+                                    if (P(i)) {
+                                        var b = D(d, m, t);
                                         d.id == t && q(t, !0), h.success = !0, h.ref = b
                                     } else {
-                                        if (s && j()) return d.data = s, void D(d, m, t, p);
+                                        if (s && j()) return d.data = s, void N(d, m, t, p);
                                         q(t, !0)
                                     }
                                     p && p(h)
                                 }))) : p && p(h)
                             },
                             switchOffAutoHideShow: function() {
                                 w = !1
                             },
-                            ua: E,
+                            ua: S,
                             getFlashPlayerVersion: function() {
                                 return {
-                                    major: E.pv[0],
-                                    minor: E.pv[1],
-                                    release: E.pv[2]
+                                    major: S.pv[0],
+                                    minor: S.pv[1],
+                                    release: S.pv[2]
                                 }
                             },
-                            hasFlashPlayerVersion: M,
+                            hasFlashPlayerVersion: P,
                             createSWF: function(e, t, n) {
-                                return E.w3 ? W(e, t, n) : void 0
+                                return S.w3 ? D(e, t, n) : void 0
                             },
                             showExpressInstall: function(e, t, n, o) {
-                                E.w3 && j() && D(e, t, n, o)
+                                S.w3 && j() && N(e, t, n, o)
                             },
                             removeSWF: function(e) {
-                                E.w3 && I(e)
+                                S.w3 && M(e)
                             },
                             createCSS: function(e, t, n, o) {
-                                E.w3 && P(e, t, n, o)
+                                S.w3 && B(e, t, n, o)
                             },
-                            addDomLoadEvent: T,
-                            addLoadEvent: x,
+                            addDomLoadEvent: E,
+                            addLoadEvent: C,
                             getQueryParamValue: function(e) {
                                 var t = d.location.search || d.location.hash;
                                 if (t) {
-                                    if (/\?/.test(t) && (t = t.split("?")[1]), null == e) return F(t);
+                                    if (/\?/.test(t) && (t = t.split("?")[1]), null == e) return $(t);
                                     for (var n = t.split("&"), o = 0; o < n.length; o++)
-                                        if (n[o].substring(0, n[o].indexOf("=")) == e) return F(n[o].substring(n[o].indexOf("=") + 1))
+                                        if (n[o].substring(0, n[o].indexOf("=")) == e) return $(n[o].substring(n[o].indexOf("=") + 1))
                                 }
                                 return ""
                             },
                             expressInstallCallback: function() {
                                 if (k) {
                                     var i = R(u);
-                                    i && e && (i.parentNode.replaceChild(e, i), t && (q(t, !0), E.ie && E.win && (e.style.display = "block")), n && n(o)), k = !1
+                                    i && e && (i.parentNode.replaceChild(e, i), t && (q(t, !0), S.ie && S.win && (e.style.display = "block")), n && n(o)), k = !1
                                 }
                             }
                         }
                     }();
                     ! function() {
                         if ("undefined" != typeof window && !window.WebSocket) {
                             var e = window.console;
@@ -1515,106 +1513,103 @@
                     }
                 };
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }), t.QiSession = void 0;
                 const i = o(n(537));
                 t.QiSession = class {
-                    constructor(e = "nao.local", t = "80") {
-                        this.connected = !1, console.log("DBG Emile qim about to connect w/17"), window.oioi = i.default;
-                        let n = i.default.connect("nao:nao@" + e + ":" + t, {
-                                resource: "libs/qimessaging/2/socket.io",
-                                "force new connection": !0
-                            }),
-                            o = new Array,
-                            s = new Array,
-                            r = 0;
-
-                        function a(e, t, i) {
-                            return function() {
-                                let s = ++r,
-                                    a = Array.prototype.slice.call(arguments, 0),
-                                    c = new Promise((function(e, t) {
-                                        o[s] = {
-                                            resolve: e,
-                                            reject: t
-                                        }
-                                    }));
-                                return "connect" == a[0] && (o[s].__cbi = i), n.emit("call", {
-                                    idm: s,
-                                    params: {
-                                        obj: e,
-                                        member: t,
-                                        args: a
-                                    }
-                                }), c
+                    constructor(e = "nao.local", t = "80", n, o) {
+                        this.connected = n, this.disconnected = o, this._socket = i.default.connect("nao:nao@" + e + ":" + t, {
+                            resource: "libs/qimessaging/2/socket.io",
+                            "force new connection": !0
+                        }), this._dfd = [], this._sigs = [], this._idm = 0, this._socket.on("reply", (e => {
+                            this.onReply(e)
+                        })), this._socket.on("error", (e => {
+                            this.onError(e)
+                        })), this._socket.on("signal", (e => {
+                            this.onSignal(e)
+                        })), this._socket.on("disconnect", this.onDisconnect), this._socket.on("connect", this.onConnect), this.service = this.createMetaCall("ServiceDirectory", "service", "data")
+                    }
+                    isConnected() {
+                        return void 0 !== this._socket && this._socket.socket.connected
+                    }
+                    onReply(e) {
+                        const t = e.idm;
+                        if (void 0 !== e.result && void 0 !== e.result.metaobject) {
+                            const n = {
+                                    __MetaObject: e.result.metaobject
+                                },
+                                o = e.result.pyobject;
+                            this._sigs[o] = [];
+                            const i = n.__MetaObject.methods;
+                            for (const e in i) {
+                                const t = i[e].name;
+                                n[t] = this.createMetaCall(o, t, "data")
+                            }
+                            const s = n.__MetaObject.signals;
+                            for (const e in s) {
+                                const t = s[e].name;
+                                n[t] = this.createMetaSignal(o, t, !1)
+                            }
+                            const r = n.__MetaObject.properties;
+                            for (const e in r) {
+                                const t = r[e].name;
+                                n[t] = this.createMetaSignal(o, t, !0)
+                            }
+                            this._dfd[t].resolve(n)
+                        } else {
+                            if (void 0 !== this._dfd[t].__cbi) {
+                                const n = this._dfd[t].__cbi;
+                                this._sigs[n.obj][n.signal][e.result] = n.cb
                             }
+                            this._dfd[t].resolve(e.result)
                         }
-
-                        function c(e, t, n) {
-                            let o = {};
-                            return s[e][t] = new Array, o.connect = function(n) {
-                                return a(e, t, {
+                        delete this._dfd[t]
+                    }
+                    onError(e) {
+                        void 0 !== e.idm && (this._dfd[e.idm].reject(e.result), delete this._dfd[e.idm])
+                    }
+                    onSignal(e) {
+                        const t = e.result,
+                            n = this._sigs[t.obj][t.signal][t.link];
+                        void 0 !== n && n.apply(this, t.data)
+                    }
+                    onConnect() {
+                        this.connected && this.connected(this)
+                    }
+                    onDisconnect(e) {
+                        for (const e in this._dfd) this._dfd[e].reject("Call " + e + " canceled: disconnected"), delete this._dfd[e];
+                        this.disconnected && this.disconnected()
+                    }
+                    createMetaCall(e, t, n) {
+                        return (...o) => {
+                            ++this._idm;
+                            const i = new Promise(((e, t) => {
+                                this._dfd[this._idm] = {
+                                    resolve: e,
+                                    reject: t
+                                }
+                            }));
+                            return "connect" === o[0] && (this.isConnected = this._socket.socket.connected, this._dfd[this._idm].__cbi = n), this._socket.emit("call", {
+                                idm: this._idm,
+                                params: {
                                     obj: e,
-                                    signal: t,
-                                    cb: n
-                                })("connect")
-                            }, o.disconnect = function(n) {
-                                return delete s[e][t][n], a(e, t, "data")("disconnect", n)
-                            }, n ? (o.setValue = function() {
-                                let n = Array.prototype.slice.call(arguments, 0);
-                                return a(e, t, "data").apply(this, ["setValue"].concat(n))
-                            }, o.value = function() {
-                                return a(e, t, "data")("value")
-                            }, o) : o
-                        }
-                        n.on("reply", (function(e) {
-                            let t = e.idm;
-                            if (null != e.result && null != e.result.metaobject) {
-                                let n = {
-                                        __MetaObject: e.result.metaobject
-                                    },
-                                    i = e.result.pyobject;
-                                s[i] = new Array;
-                                let r = n.__MetaObject.methods;
-                                for (let e in r) {
-                                    let t = r[e].name;
-                                    n[t] = a(i, t, "data")
-                                }
-                                let l = n.__MetaObject.signals;
-                                for (let e in l) {
-                                    let t = l[e].name;
-                                    n[t] = c(i, t, !1)
-                                }
-                                let u = n.__MetaObject.properties;
-                                for (let e in u) {
-                                    let t = u[e].name;
-                                    n[t] = c(i, t, !0)
-                                }
-                                o[t].resolve(n)
-                            } else {
-                                if (null != o[t].__cbi) {
-                                    let n = o[t].__cbi;
-                                    s[n.obj][n.signal][e.result] = n.cb
-                                }
-                                o[t].resolve(e.result)
-                            }
-                            delete o[t]
-                        })), n.on("error", (function(e) {
-                            null != e.idm && (o[e.idm].reject(e.result), delete o[e.idm])
-                        })), n.on("signal", (function(e) {
-                            let t = e.result,
-                                n = s[t.obj][t.signal][t.link];
-                            null != n && n.apply(this, t.data)
-                        })), n.on("disconnect", (function(e) {
-                            for (let e in o) o[e].reject("Call " + e + " canceled: disconnected"), delete o[e];
-                            this.disconnected && console.log("DBG Isabel disconnected")
-                        })), this.service = a("ServiceDirectory", "service", "data"), n.on("connect", (function() {
-                            this.connected && console.log("DBG Isabel already connected")
-                        }))
+                                    member: t,
+                                    args: o
+                                }
+                            }), i
+                        }
+                    }
+                    createMetaSignal(e, t, n) {
+                        const o = {};
+                        return this._sigs[e][t] = [], o.connect = n => this.createMetaCall(e, t, {
+                            obj: e,
+                            signal: t,
+                            cb: n
+                        })("connect"), o.disconnect = n => (delete this._sigs[e][t][n], this.createMetaCall(e, t, "data")("disconnect", n)), n ? (o.setValue = (...n) => this.createMetaCall(e, t, "data").apply(this, ["setValue"].concat(n)), o.value = () => this.createMetaCall(e, t, "data")("value"), o) : o
                     }
                 }
             },
             412: (e, t, n) => {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
@@ -1656,100 +1651,109 @@
                 }), t.NaoRobotView = t.NaoRobotModel = void 0;
                 const i = n(146),
                     s = n(412);
                 n(204);
                 const r = n(996);
                 class a extends i.DOMWidgetModel {
                     constructor() {
-                        super(...arguments), this.connected = "Disconnected", this.status = "Not busy"
+                        super(...arguments), this.connected = "Disconnected", this.status = "Not busy", this._services = {}
                     }
                     defaults() {
                         return Object.assign(Object.assign({}, super.defaults()), {
                             _model_name: a.model_name,
                             _model_module: a.model_module,
                             _model_module_version: a.model_module_version,
                             _view_name: a.view_name,
                             _view_module: a.view_module,
                             _view_module_version: a.view_module_version,
-                            value: "Hello World",
-                            synco: "something silly",
                             connected: "Disconnected",
-                            status: "Not busy"
+                            status: "Not busy",
+                            counter: 0
                         })
                     }
                     initialize(e, t) {
                         super.initialize(e, t), this.on("msg:custom", this.onCommand)
                     }
                     changeStatus(e) {
                         this.status = e, this.set("status", e), this.save_changes()
                     }
+                    validateIPaddress(e) {
+                        return "nao.local" === e || new RegExp("^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(.(?!$)|$)){4}$").test(e)
+                    }
                     connect(e, t) {
                         return o(this, void 0, void 0, (function*() {
-                            console.log("REMOVE the command was to connect"), this.changeStatus("Establishing connection"), this.qiSession = new r.QiSession(e, t), this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Not busy")
+                            const n = e => new Promise((t => setTimeout(t, e)));
+                            if (this.changeStatus("Establishing connection"), !this.validateIPaddress(e)) return this.changeStatus("Invalid IP address"), void console.warn("IP Address ", e, " is not valid");
+                            this.qiSession = new r.QiSession(e, t);
+                            for (let e = 0; e < 100; e++)
+                                if (yield n(100), this.qiSession.isConnected()) {
+                                    this.connected = "Connected", this.set("connected", "Connected"), this.save_changes(), this.changeStatus("Available"), console.log("Connection successful after ", e / 10, " seconds.");
+                                    break
+                                } this.qiSession.isConnected() || (console.error("Connection to ", e, " could not be established."), this.changeStatus("Unavailable"))
                         }))
                     }
                     disconnect() {
                         console.log("REMOVE disconnecting"), this.connected = "Disconnected", this.changeStatus("Unavailable")
                     }
-                    Testing() {
-                        return o(this, void 0, void 0, (function*() {
-                            this.qiSession = new r.QiSession;
-                            const e = yield this.qiSession.service("ALTextToSpeech");
-                            let t = this.send(e);
-                            console.log("A thing: ", t), console.log("JS sent something")
-                        }))
-                    }
-                    goSleep(e) {
+                    createService(e) {
                         return o(this, void 0, void 0, (function*() {
-                            var t;
-                            console.log("IN THE SLEEPING SESH"), yield(t = 1e3 * e, new Promise((e => setTimeout(e, t)))), console.log("WAKING UP"), this.set("synco", "something else"), this.save_changes(), this.send({
-                                data: "purple"
-                            }), console.log("SETTED THE VALUE")
+                            this.changeStatus("Creating service " + e);
+                            const t = this.qiSession.service(e),
+                                n = yield t.then((e => e)).catch((e => (this.changeStatus(e), e)));
+                            "object" == typeof n && (this._services[e] = n, this.changeStatus(e + " available"))
                         }))
                     }
                     callService(e, t, n, i) {
                         return o(this, void 0, void 0, (function*() {
-                            const o = yield this.qiSession.service(e);
-                            this.changeStatus("Running method" + t), yield o[t](...n), this.changeStatus("Task completed")
+                            if (void 0 === this._services[e][t]) return void this.changeStatus(t + " does not exist for " + e);
+                            this.changeStatus("Running method " + t);
+                            const o = this._services[e][t](...n);
+                            yield o.then((e => {
+                                this.changeStatus("Task completed"), void 0 !== e && this.send(e)
+                            })).catch((e => {
+                                this.changeStatus(e), this.send(e)
+                            })), this.set("counter", this.get("counter") + 1), this.save_changes()
                         }))
                     }
                     onCommand(e, t) {
                         return o(this, void 0, void 0, (function*() {
-                            switch (console.log("REMOVE onCommand", e), e.command) {
+                            switch (e.command) {
                                 case "connect":
                                     yield this.connect(e.ipAddress, e.port);
                                     break;
                                 case "disconnect":
                                     this.disconnect();
                                     break;
+                                case "createService":
+                                    this.createService(e.service);
+                                    break;
                                 case "callService":
-                                    console.log("RECEIVING COMMAND FOR SERVICE"), yield this.callService(e.service, e.method, e.args, e.kwargs)
+                                    yield this.callService(e.service, e.method, e.args, e.kwargs)
                             }
-                            console.log("End of OnCommand")
                         }))
                     }
                 }
                 t.NaoRobotModel = a, a.serializers = Object.assign({}, i.DOMWidgetModel.serializers), a.model_name = "NaoRobotModel", a.model_module = s.MODULE_NAME, a.model_module_version = s.MODULE_VERSION, a.view_name = "NaoRobotView", a.view_module = s.MODULE_NAME, a.view_module_version = s.MODULE_VERSION;
                 class c extends i.DOMWidgetView {
                     render() {
-                        this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.synco = document.createElement("div"), this.synco.textContent = "it should be here", this.el.appendChild(this.synco), console.log("RENDERING"), console.log(this.model.get("connected"), " CONNECTED"), console.log(this.model.get("synco"), " SYNCO"), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this), this.model.on("change:synco", this.value_changed, this)
+                        this.el.classList.add("custom-widget"), this.txt_connected = document.createElement("div"), this.txt_connected.textContent = "Disconnected", this.el.appendChild(this.txt_connected), this.txt_status = document.createElement("div"), this.txt_status.textContent = "Not busy", this.el.appendChild(this.txt_status), this.value_changed(), this.model.on("change:connected", this.value_changed, this), this.model.on("change:status", this.value_changed, this)
                     }
                     value_changed() {
-                        console.log("THE VALUE CHANGED"), this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status"), this.synco.textContent = this.model.get("synco")
+                        this.txt_connected.textContent = this.model.get("connected"), this.txt_status.textContent = this.model.get("status")
                     }
                 }
                 t.NaoRobotView = c
             },
             146: e => {
                 "use strict";
                 e.exports = __WEBPACK_EXTERNAL_MODULE__146__
             },
             147: e => {
                 "use strict";
-                e.exports = JSON.parse('{"name":"ipynao","version":"0.1.3","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.4"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
+                e.exports = JSON.parse('{"name":"ipynao","version":"0.2.0","description":"A widget library for controlling Nao","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/QuantStack/ipynao","bugs":{"url":"https://github.com/QuantStack/ipynao/issues"},"license":"BSD-3-Clause","author":{"name":"Isabel Paredes","email":"isabel.paredes@quantstack.net"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/ihuicatl/ipynao"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipynao/labextension","clean:nbextension":"rimraf ipynao/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6","nao-socket.io":"1.0.5"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipynao/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
             }
         },
         __webpack_module_cache__ = {};
 
     function __webpack_require__(e) {
         var t = __webpack_module_cache__[e];
         if (void 0 !== t) return t.exports;
```

## Comparing `ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.map` & `ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.map`

 * *Files 2% similar despite different names*

### Pretty-printed

 * *Similarity: 0.8864073931459375%*

 * *Differences: {"'mappings'": "';kHAEAA,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACC,EAAOC,GAAI,sHAAuH,KAEhJD,EAAOH,QAAUA,wBCEjBG,EAAOH,QAAU,SAAUK,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAsDV,SAAgCD,EAAML,GACpC,IAoBiBO,EAEbC,EACAC,EAvBAH,EAAUD,EAAK,IAAM,GAErBK,EAAaL,EAAK,GAEtB,IAAKK,EACH,OAAOJ,EAGT,GAAIN,GAAgC,mBAATW,KAAqB,CAC9C,IAAIC,GAWWL,EAXeG,EAa5BF,EAASG,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUT,MACzDE,EAAO,+DAA+DQ,OAAOT,GAC1E,OAAOS,OAAOR,EAAM,QAdrBS,EAAaR,EAAWS,QAAQf,KAAI,SAAUgB,GAChD,MA […]*

```diff
@@ -1,10 +1,10 @@
 {
     "file": "index.js",
-    "mappings": "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",
+    "mappings": "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",
     "names": [
         "exports",
         "___CSS_LOADER_API_IMPORT___",
         "push",
         "module",
         "id",
         "useSourceMap",
@@ -45,16 +45,14 @@
         "protocol",
         "transports",
         "j",
         "sockets",
         "connect",
         "host",
         "details",
-        "console",
-        "log",
         "uuri",
         "socket",
         "uri",
         "util",
         "parseUri",
         "location",
         "slice",
@@ -457,14 +455,16 @@
         "addDomLoadEvent",
         "addLoadEvent",
         "getQueryParamValue",
         "search",
         "hash",
         "substring",
         "expressInstallCallback",
+        "console",
+        "log",
         "error",
         "protocols",
         "proxyHost",
         "proxyPort",
         "headers",
         "__id",
         "__nextId",
@@ -611,95 +611,108 @@
         "lastIdentifiers",
         "newList",
         "newLastIdentifiers",
         "_index",
         "__webpack_public_path__",
         "constructor",
         "ipAddress",
+        "disconnected",
         "_socket",
         "_dfd",
         "_sigs",
         "_idm",
+        "onReply",
+        "onSignal",
+        "service",
         "createMetaCall",
-        "member",
+        "isConnected",
         "idm",
-        "promise",
-        "Promise",
-        "resolve",
-        "reject",
-        "__cbi",
-        "createMetaSignal",
-        "signal",
-        "isProperty",
-        "cb",
-        "setValue",
+        "replyObject",
         "__MetaObject",
-        "pyobj",
+        "pyIndex",
         "methods",
         "methodName",
         "signals",
         "signalName",
+        "createMetaSignal",
         "properties",
         "propertyName",
+        "resolve",
+        "__cbi",
         "cbi",
-        "res",
+        "reject",
         "callback",
-        "disconnected",
-        "service",
+        "_data",
+        "member",
+        "serviceArgs",
+        "promise",
+        "Promise",
+        "signal",
+        "isProperty",
+        "signalObject",
+        "cb",
+        "setValue",
+        "valueArgs",
         "MODULE_VERSION",
         "MODULE_NAME",
         "NaoRobotModel",
         "DOMWidgetModel",
+        "_services",
         "defaults",
         "super",
         "_model_name",
         "model_name",
         "_model_module",
         "model_module",
         "_model_module_version",
         "model_module_version",
         "_view_name",
         "view_name",
         "_view_module",
         "view_module",
         "_view_module_version",
         "view_module_version",
-        "synco",
+        "counter",
         "initialize",
         "onCommand",
         "changeStatus",
         "statusMessage",
         "set",
         "save_changes",
+        "validateIPaddress",
+        "RegExp",
+        "sleep",
+        "ms",
+        "warn",
         "qiSession",
         "QiSession",
-        "Testing",
-        "tts",
-        "aThing",
-        "goSleep",
-        "tSeconds",
-        "ms",
-        "callService",
+        "createService",
         "serviceName",
-        "kwargs",
+        "servicePromise",
         "naoService",
+        "then",
+        "resolution",
+        "catch",
+        "rejection",
+        "callService",
+        "_kwargs",
         "commandData",
         "buffers",
         "serializers",
         "NaoRobotView",
         "DOMWidgetView",
         "render",
         "el",
         "classList",
         "add",
         "txt_connected",
         "textContent",
         "txt_status",
-        "model",
         "value_changed",
+        "model",
         "__WEBPACK_EXTERNAL_MODULE__146__",
         "__webpack_module_cache__",
         "__webpack_require__",
         "moduleId",
         "cachedModule",
         "__webpack_modules__",
         "nc",
@@ -720,25 +733,25 @@
         "webpack://ipynao/./src/widget.ts",
         "webpack://ipynao/external amd \"@jupyter-widgets/base\"",
         "webpack://ipynao/webpack/bootstrap",
         "webpack://ipynao/webpack/runtime/nonce",
         "webpack://ipynao/webpack/startup"
     ],
     "sourcesContent": [
-        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
+        "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  color: var(--jp-widgets-color) !important;\\n  font-family: monospace;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "\n/*!\n * socket.io-node\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n * MIT Licensed\n */\n\nmodule.exports = require('./lib/socket.io');\n",
-        "/*! Socket.IO.js build:0.9.17, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */\n// export var io = {};\n// var io = {};\nvar io = ('undefined' === typeof module ? {} : module.exports);\n\n(function () {\n    var self = this;\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * IO namespace.\n         *\n         * @namespace\n         */\n        var io = exports;\n        /**\n         * Socket.IO version\n         *\n         * @api public\n         */\n        io.version = '0.9.17';\n        /**\n         * Protocol implemented.\n         *\n         * @api public\n         */\n        io.protocol = 1;\n        /**\n         * Available transports, these will be populated with the available transports\n         *\n         * @api public\n         */\n        io.transports = [];\n        /**\n         * Keep track of jsonp callbacks.\n         *\n         * @api private\n         */\n        io.j = [];\n        /**\n         * Keep track of our io.Sockets\n         *\n         * @api private\n         */\n        io.sockets = {};\n        /**\n         * Manages connections to hosts.\n         *\n         * @param {String} uri\n         * @Param {Boolean} force creation of new socket (defaults to false)\n         * @api public\n         */\n        io.connect = function (host, details) {\n            console.log(\"DBG Emile io connect\");\n            var uri = io.util.parseUri(host), uuri, socket;\n            // Force http (not secure) connection\n            uri.protocol = 'http';\n            if (global && global.location) {\n                uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);\n                uri.host = uri.host || (global.document\n                    ? global.document.domain : global.location.hostname);\n                uri.port = uri.port || global.location.port;\n            }\n            uuri = io.util.uniqueUri(uri);\n            var options = {\n                host: uri.host,\n                secure: 'https' == uri.protocol,\n                port: uri.port || ('https' == uri.protocol ? 443 : 80),\n                query: uri.query || ''\n            };\n            io.util.merge(options, details);\n            if (options['force new connection'] || !io.sockets[uuri]) {\n                socket = new io.Socket(options);\n            }\n            if (!options['force new connection'] && socket) {\n                io.sockets[uuri] = socket;\n            }\n            socket = socket || io.sockets[uuri];\n            console.log(\"DBG Emile io connecting to\", uuri, \"options:\", options);\n            // if path is different from '' or /\n            return socket.of(uri.path.length > 1 ? uri.path : '');\n        };\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * Utilities namespace.\n         *\n         * @namespace\n         */\n        var util = exports.util = {};\n        /**\n         * Parses an URI\n         *\n         * @author Steven Levithan <stevenlevithan.com> (MIT license)\n         * @api public\n         */\n        var re = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n        var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',\n            'host', 'port', 'relative', 'path', 'directory', 'file', 'query',\n            'anchor'];\n        util.parseUri = function (str) {\n            var m = re.exec(str || ''), uri = {}, i = 14;\n            while (i--) {\n                uri[parts[i]] = m[i] || '';\n            }\n            return uri;\n        };\n        /**\n         * Produces a unique url that identifies a Socket.IO connection.\n         *\n         * @param {Object} uri\n         * @api public\n         */\n        util.uniqueUri = function (uri) {\n            var protocol = uri.protocol, host = uri.host, port = uri.port;\n            if ('document' in global) {\n                host = host || document.domain;\n                port = port || (protocol == 'https'\n                    && document.location.protocol !== 'https:' ? 443 : document.location.port);\n            }\n            else {\n                host = host || 'localhost';\n                if (!port && protocol == 'https') {\n                    port = 443;\n                }\n            }\n            return (protocol || 'http') + '://' + host + ':' + (port || 80);\n        };\n        /**\n         * Mergest 2 query strings in to once unique query string\n         *\n         * @param {String} base\n         * @param {String} addition\n         * @api public\n         */\n        util.query = function (base, addition) {\n            var query = util.chunkQuery(base || ''), components = [];\n            util.merge(query, util.chunkQuery(addition || ''));\n            for (var part in query) {\n                if (query.hasOwnProperty(part)) {\n                    components.push(part + '=' + query[part]);\n                }\n            }\n            return components.length ? '?' + components.join('&') : '';\n        };\n        /**\n         * Transforms a querystring in to an object\n         *\n         * @param {String} qs\n         * @api public\n         */\n        util.chunkQuery = function (qs) {\n            var query = {}, params = qs.split('&'), i = 0, l = params.length, kv;\n            for (; i < l; ++i) {\n                kv = params[i].split('=');\n                if (kv[0]) {\n                    query[kv[0]] = kv[1];\n                }\n            }\n            return query;\n        };\n        /**\n         * Executes the given function when the page is loaded.\n         *\n         *     io.util.load(function () { console.log('page loaded'); });\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        var pageLoaded = false;\n        util.load = function (fn) {\n            if ('document' in global && document.readyState === 'complete' || pageLoaded) {\n                return fn();\n            }\n            util.on(global, 'load', fn, false);\n        };\n        /**\n         * Adds an event.\n         *\n         * @api private\n         */\n        util.on = function (element, event, fn, capture) {\n            if (element.attachEvent) {\n                element.attachEvent('on' + event, fn);\n            }\n            else if (element.addEventListener) {\n                element.addEventListener(event, fn, capture);\n            }\n        };\n        /**\n         * Generates the correct `XMLHttpRequest` for regular and cross domain requests.\n         *\n         * @param {Boolean} [xdomain] Create a request that can be used cross domain.\n         * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.\n         * @api private\n         */\n        util.request = function (xdomain) {\n            if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {\n                return new XDomainRequest();\n            }\n            if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {\n                return new XMLHttpRequest();\n            }\n            if (!xdomain) {\n                try {\n                    return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');\n                }\n                catch (e) { }\n            }\n            return null;\n        };\n        /**\n         * XHR based transport constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        /**\n         * Change the internal pageLoaded value.\n         */\n        if ('undefined' != typeof window) {\n            util.load(function () {\n                pageLoaded = true;\n            });\n        }\n        /**\n         * Defers a function to ensure a spinner is not displayed by the browser\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        util.defer = function (fn) {\n            if (!util.ua.webkit || 'undefined' != typeof importScripts) {\n                return fn();\n            }\n            util.load(function () {\n                setTimeout(fn, 100);\n            });\n        };\n        /**\n         * Merges two objects.\n         *\n         * @api public\n         */\n        util.merge = function merge(target, additional, deep, lastseen) {\n            var seen = lastseen || [], depth = typeof deep == 'undefined' ? 2 : deep, prop;\n            for (prop in additional) {\n                if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {\n                    if (typeof target[prop] !== 'object' || !depth) {\n                        target[prop] = additional[prop];\n                        seen.push(additional[prop]);\n                    }\n                    else {\n                        util.merge(target[prop], additional[prop], depth - 1, seen);\n                    }\n                }\n            }\n            return target;\n        };\n        /**\n         * Merges prototypes from objects\n         *\n         * @api public\n         */\n        util.mixin = function (ctor, ctor2) {\n            util.merge(ctor.prototype, ctor2.prototype);\n        };\n        /**\n         * Shortcut for prototypical and static inheritance.\n         *\n         * @api private\n         */\n        util.inherit = function (ctor, ctor2) {\n            function f() { }\n            ;\n            f.prototype = ctor2.prototype;\n            ctor.prototype = new f;\n        };\n        /**\n         * Checks if the given object is an Array.\n         *\n         *     io.util.isArray([]); // true\n         *     io.util.isArray({}); // false\n         *\n         * @param Object obj\n         * @api public\n         */\n        util.isArray = Array.isArray || function (obj) {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        };\n        /**\n         * Intersects values of two arrays into a third\n         *\n         * @api public\n         */\n        util.intersect = function (arr, arr2) {\n            var ret = [], longest = arr.length > arr2.length ? arr : arr2, shortest = arr.length > arr2.length ? arr2 : arr;\n            for (var i = 0, l = shortest.length; i < l; i++) {\n                if (~util.indexOf(longest, shortest[i]))\n                    ret.push(shortest[i]);\n            }\n            return ret;\n        };\n        /**\n         * Array indexOf compatibility.\n         *\n         * @see bit.ly/a5Dxa2\n         * @api public\n         */\n        util.indexOf = function (arr, o, i) {\n            for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0; i < j && arr[i] !== o; i++) { }\n            return j <= i ? -1 : i;\n        };\n        /**\n         * Converts enumerables to array.\n         *\n         * @api public\n         */\n        util.toArray = function (enu) {\n            var arr = [];\n            for (var i = 0, l = enu.length; i < l; i++)\n                arr.push(enu[i]);\n            return arr;\n        };\n        /**\n         * UA / engines detection namespace.\n         *\n         * @namespace\n         */\n        util.ua = {};\n        /**\n         * Whether the UA supports CORS for XHR.\n         *\n         * @api public\n         */\n        util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {\n            try {\n                var a = new XMLHttpRequest();\n            }\n            catch (e) {\n                return false;\n            }\n            return a.withCredentials != undefined;\n        })();\n        /**\n         * Detect webkit.\n         *\n         * @api public\n         */\n        util.ua.webkit = 'undefined' != typeof navigator\n            && /webkit/i.test(navigator.userAgent);\n        /**\n        * Detect iPad/iPhone/iPod.\n        *\n        * @api public\n        */\n        util.ua.iDevice = 'undefined' != typeof navigator\n            && /iPad|iPhone|iPod/i.test(navigator.userAgent);\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.EventEmitter = EventEmitter;\n        /**\n         * Event emitter constructor.\n         *\n         * @api public.\n         */\n        function EventEmitter() { }\n        ;\n        /**\n         * Adds a listener\n         *\n         * @api public\n         */\n        EventEmitter.prototype.on = function (name, fn) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = fn;\n            }\n            else if (io.util.isArray(this.$events[name])) {\n                this.$events[name].push(fn);\n            }\n            else {\n                this.$events[name] = [this.$events[name], fn];\n            }\n            return this;\n        };\n        EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n        /**\n         * Adds a volatile listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.once = function (name, fn) {\n            var self = this;\n            function on() {\n                self.removeListener(name, on);\n                fn.apply(this, arguments);\n            }\n            ;\n            on.listener = fn;\n            this.on(name, on);\n            return this;\n        };\n        /**\n         * Removes a listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeListener = function (name, fn) {\n            if (this.$events && this.$events[name]) {\n                var list = this.$events[name];\n                if (io.util.isArray(list)) {\n                    var pos = -1;\n                    for (var i = 0, l = list.length; i < l; i++) {\n                        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n                            pos = i;\n                            break;\n                        }\n                    }\n                    if (pos < 0) {\n                        return this;\n                    }\n                    list.splice(pos, 1);\n                    if (!list.length) {\n                        delete this.$events[name];\n                    }\n                }\n                else if (list === fn || (list.listener && list.listener === fn)) {\n                    delete this.$events[name];\n                }\n            }\n            return this;\n        };\n        /**\n         * Removes all listeners for an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeAllListeners = function (name) {\n            if (name === undefined) {\n                this.$events = {};\n                return this;\n            }\n            if (this.$events && this.$events[name]) {\n                this.$events[name] = null;\n            }\n            return this;\n        };\n        /**\n         * Gets all listeners for a certain event.\n         *\n         * @api publci\n         */\n        EventEmitter.prototype.listeners = function (name) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = [];\n            }\n            if (!io.util.isArray(this.$events[name])) {\n                this.$events[name] = [this.$events[name]];\n            }\n            return this.$events[name];\n        };\n        /**\n         * Emits an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.emit = function (name) {\n            if (!this.$events) {\n                return false;\n            }\n            var handler = this.$events[name];\n            if (!handler) {\n                return false;\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            console.log(\"DBG Emile EventEmitter.emit:\", name, args);\n            if ('function' == typeof handler) {\n                handler.apply(this, args);\n            }\n            else if (io.util.isArray(handler)) {\n                var listeners = handler.slice();\n                for (var i = 0, l = listeners.length; i < l; i++) {\n                    listeners[i].apply(this, args);\n                }\n            }\n            else {\n                return false;\n            }\n            return true;\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    /**\n     * Based on JSON2 (http://www.JSON.org/js.html).\n     */\n    (function (exports, nativeJSON) {\n        \"use strict\";\n        // use native JSON if it's available\n        if (nativeJSON && nativeJSON.parse) {\n            return exports.JSON = {\n                parse: nativeJSON.parse,\n                stringify: nativeJSON.stringify\n            };\n        }\n        var JSON = exports.JSON = {};\n        function f(n) {\n            // Format integers to have at least two digits.\n            return n < 10 ? '0' + n : n;\n        }\n        function date(d, key) {\n            return isFinite(d.valueOf()) ?\n                d.getUTCFullYear() + '-' +\n                    f(d.getUTCMonth() + 1) + '-' +\n                    f(d.getUTCDate()) + 'T' +\n                    f(d.getUTCHours()) + ':' +\n                    f(d.getUTCMinutes()) + ':' +\n                    f(d.getUTCSeconds()) + 'Z' : null;\n        }\n        ;\n        var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, gap, indent, meta = {\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"': '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        }, rep;\n        function quote(string) {\n            // If the string contains no control characters, no quote characters, and no\n            // backslash characters, then we can safely slap some quotes around it.\n            // Otherwise we must also replace the offending characters with safe escape\n            // sequences.\n            escapable.lastIndex = 0;\n            return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n                var c = meta[a];\n                return typeof c === 'string' ? c :\n                    '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + '\"' : '\"' + string + '\"';\n        }\n        function str(key, holder) {\n            // Produce a string from holder[key].\n            var i, // The loop counter.\n            k, // The member key.\n            v, // The member value.\n            length, mind = gap, partial, value = holder[key];\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value instanceof Date) {\n                value = date(key);\n            }\n            // If we were called with a replacer function, then call the replacer to\n            // obtain a replacement value.\n            if (typeof rep === 'function') {\n                value = rep.call(holder, key, value);\n            }\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n                    return String(value);\n                // If the type is 'object', we might be dealing with an object or an array or\n                // null.\n                case 'object':\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n                    // Is the value an array?\n                    if (Object.prototype.toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' : gap ?\n                            '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                            '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n                    // If the replacer is an array, use it to select the members to be stringified.\n                    if (rep && typeof rep === 'object') {\n                        length = rep.length;\n                        for (i = 0; i < length; i += 1) {\n                            if (typeof rep[i] === 'string') {\n                                k = rep[i];\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        // Otherwise, iterate through all of the keys in the object.\n                        for (k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' : gap ?\n                        '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n                        '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        }\n        // If the JSON object does not yet have a stringify method, give it one.\n        JSON.stringify = function (value, replacer, space) {\n            // The stringify method takes a value and an optional replacer, and an optional\n            // space parameter, and returns a JSON text. The replacer can be a function\n            // that can replace values, or an array of strings that will select the keys.\n            // A default replacer method can be provided. Use of the space parameter can\n            // produce text that is more easily readable.\n            var i;\n            gap = '';\n            indent = '';\n            // If the space parameter is a number, make an indent string containing that\n            // many spaces.\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n                // If the space parameter is a string, it will be used as the indent string.\n            }\n            else if (typeof space === 'string') {\n                indent = space;\n            }\n            // If there is a replacer, it must be a function or an array.\n            // Otherwise, throw an error.\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                (typeof replacer !== 'object' ||\n                    typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n            // Make a fake root object containing our value under the key of ''.\n            // Return the result of stringifying the value.\n            return str('', { '': value });\n        };\n        // If the JSON object does not yet have a parse method, give it one.\n        JSON.parse = function (text, reviver) {\n            // The parse method takes a text and an optional reviver function, and returns\n            // a JavaScript value if the text is a valid JSON text.\n            var j;\n            function walk(holder, key) {\n                // The walk method is used to recursively walk the resulting structure so\n                // that modifications can be made.\n                var k, v, value = holder[key];\n                if (value && typeof value === 'object') {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            }\n                            else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n            // Parsing happens in four stages. In the first stage, we replace certain\n            // Unicode characters with escape sequences. JavaScript handles many characters\n            // incorrectly, either silently deleting them, or treating them as line endings.\n            text = String(text);\n            cx.lastIndex = 0;\n            if (cx.test(text)) {\n                text = text.replace(cx, function (a) {\n                    return '\\\\u' +\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n            // In the second stage, we run the text against regular expressions that look\n            // for non-JSON patterns. We are especially concerned with '()' and 'new'\n            // because they can cause invocation, and '=' because it can cause mutation.\n            // But just to be safe, we want to reject all unexpected forms.\n            // We split the second stage into 4 regexp operations in order to work around\n            // crippling inefficiencies in IE's and Safari's regexp engines. First we\n            // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n            // replace all simple value tokens with ']' characters. Third, we delete all\n            // open brackets that follow a colon or comma or that begin the text. Finally,\n            // we look to see that the remaining characters are only whitespace or ']' or\n            // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n            if (/^[\\],:{}\\s]*$/\n                .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n                // In the third stage we use the eval function to compile the text into a\n                // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n                // in JavaScript: it can begin a block or an object literal. We wrap the text\n                // in parens to eliminate the ambiguity.\n                j = eval('(' + text + ')');\n                // In the optional fourth stage, we recursively walk the new structure, passing\n                // each name/value pair to a reviver function for possible transformation.\n                return typeof reviver === 'function' ?\n                    walk({ '': j }, '') : j;\n            }\n            // If the text is not JSON parseable, then a SyntaxError is thrown.\n            throw new SyntaxError('JSON.parse');\n        };\n    })(io, typeof JSON !== 'undefined' ? JSON : undefined);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Parser namespace.\n         *\n         * @namespace\n         */\n        var parser = exports.parser = {};\n        /**\n         * Packet types.\n         */\n        var packets = parser.packets = [\n            'disconnect',\n            'connect',\n            'heartbeat',\n            'message',\n            'json',\n            'event',\n            'ack',\n            'error',\n            'noop'\n        ];\n        /**\n         * Errors reasons.\n         */\n        var reasons = parser.reasons = [\n            'transport not supported',\n            'client not handshaken',\n            'unauthorized'\n        ];\n        /**\n         * Errors advice.\n         */\n        var advice = parser.advice = [\n            'reconnect'\n        ];\n        /**\n         * Shortcuts.\n         */\n        var JSON = io.JSON, indexOf = io.util.indexOf;\n        /**\n         * Encodes a packet.\n         *\n         * @api private\n         */\n        parser.encodePacket = function (packet) {\n            var type = indexOf(packets, packet.type), id = packet.id || '', endpoint = packet.endpoint || '', ack = packet.ack, data = null;\n            switch (packet.type) {\n                case 'error':\n                    var reason = packet.reason ? indexOf(reasons, packet.reason) : '', adv = packet.advice ? indexOf(advice, packet.advice) : '';\n                    if (reason !== '' || adv !== '')\n                        data = reason + (adv !== '' ? ('+' + adv) : '');\n                    break;\n                case 'message':\n                    if (packet.data !== '')\n                        data = packet.data;\n                    break;\n                case 'event':\n                    var ev = { name: packet.name };\n                    if (packet.args && packet.args.length) {\n                        ev.args = packet.args;\n                    }\n                    data = JSON.stringify(ev);\n                    break;\n                case 'json':\n                    data = JSON.stringify(packet.data);\n                    break;\n                case 'connect':\n                    if (packet.qs)\n                        data = packet.qs;\n                    break;\n                case 'ack':\n                    data = packet.ackId\n                        + (packet.args && packet.args.length\n                            ? '+' + JSON.stringify(packet.args) : '');\n                    break;\n            }\n            // construct packet with required fragments\n            var encoded = [\n                type,\n                id + (ack == 'data' ? '+' : ''),\n                endpoint\n            ];\n            // data fragment is optional\n            if (data !== null && data !== undefined)\n                encoded.push(data);\n            return encoded.join(':');\n        };\n        /**\n         * Encodes multiple messages (payload).\n         *\n         * @param {Array} messages\n         * @api private\n         */\n        parser.encodePayload = function (packets) {\n            var decoded = '';\n            if (packets.length == 1)\n                return packets[0];\n            for (var i = 0, l = packets.length; i < l; i++) {\n                var packet = packets[i];\n                decoded += '\\ufffd' + packet.length + '\\ufffd' + packets[i];\n            }\n            return decoded;\n        };\n        /**\n         * Decodes a packet\n         *\n         * @api private\n         */\n        var regexp = /([^:]+):([0-9]+)?(\\+)?:([^:]+)?:?([\\s\\S]*)?/;\n        parser.decodePacket = function (data) {\n            var pieces = data.match(regexp);\n            if (!pieces)\n                return {};\n            var id = pieces[2] || '', data = pieces[5] || '', packet = {\n                type: packets[pieces[1]],\n                endpoint: pieces[4] || ''\n            };\n            // whether we need to acknowledge the packet\n            if (id) {\n                packet.id = id;\n                if (pieces[3])\n                    packet.ack = 'data';\n                else\n                    packet.ack = true;\n            }\n            // handle different packet types\n            switch (packet.type) {\n                case 'error':\n                    var pieces = data.split('+');\n                    packet.reason = reasons[pieces[0]] || '';\n                    packet.advice = advice[pieces[1]] || '';\n                    break;\n                case 'message':\n                    packet.data = data || '';\n                    break;\n                case 'event':\n                    try {\n                        var opts = JSON.parse(data);\n                        packet.name = opts.name;\n                        packet.args = opts.args;\n                    }\n                    catch (e) { }\n                    packet.args = packet.args || [];\n                    break;\n                case 'json':\n                    try {\n                        packet.data = JSON.parse(data);\n                    }\n                    catch (e) { }\n                    break;\n                case 'connect':\n                    packet.qs = data || '';\n                    break;\n                case 'ack':\n                    var pieces = data.match(/^([0-9]+)(\\+)?(.*)/);\n                    if (pieces) {\n                        packet.ackId = pieces[1];\n                        packet.args = [];\n                        if (pieces[3]) {\n                            try {\n                                packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];\n                            }\n                            catch (e) { }\n                        }\n                    }\n                    break;\n                case 'disconnect':\n                case 'heartbeat':\n                    break;\n            }\n            ;\n            return packet;\n        };\n        /**\n         * Decodes data payload. Detects multiple messages\n         *\n         * @return {Array} messages\n         * @api public\n         */\n        parser.decodePayload = function (data) {\n            // IE doesn't like data[i] for unicode chars, charAt works fine\n            if (data.charAt(0) == '\\ufffd') {\n                var ret = [];\n                for (var i = 1, length = ''; i < data.length; i++) {\n                    if (data.charAt(i) == '\\ufffd') {\n                        ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));\n                        i += Number(length) + 1;\n                        length = '';\n                    }\n                    else {\n                        length += data.charAt(i);\n                    }\n                }\n                return ret;\n            }\n            else {\n                return [parser.decodePacket(data)];\n            }\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.Transport = Transport;\n        /**\n         * This is the transport template for all supported transport methods.\n         *\n         * @constructor\n         * @api public\n         */\n        function Transport(socket, sessid) {\n            this.socket = socket;\n            this.sessid = sessid;\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Transport, io.EventEmitter);\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        Transport.prototype.heartbeats = function () {\n            return true;\n        };\n        /**\n         * Handles the response from the server. When a new response is received\n         * it will automatically update the timeout, decode the message and\n         * forwards the response to the onMessage function for further processing.\n         *\n         * @param {String} data Response from the server.\n         * @api private\n         */\n        Transport.prototype.onData = function (data) {\n            this.clearCloseTimeout();\n            // If the connection in currently open (or in a reopening state) reset the close\n            // timeout since we have just received data. This check is necessary so\n            // that we don't reset the timeout on an explicitly disconnected connection.\n            if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {\n                this.setCloseTimeout();\n            }\n            if (data !== '') {\n                // todo: we should only do decodePayload for xhr transports\n                var msgs = io.parser.decodePayload(data);\n                if (msgs && msgs.length) {\n                    for (var i = 0, l = msgs.length; i < l; i++) {\n                        this.onPacket(msgs[i]);\n                    }\n                }\n            }\n            return this;\n        };\n        /**\n         * Handles packets.\n         *\n         * @api private\n         */\n        Transport.prototype.onPacket = function (packet) {\n            this.socket.setHeartbeatTimeout();\n            if (packet.type == 'heartbeat') {\n                return this.onHeartbeat();\n            }\n            if (packet.type == 'connect' && packet.endpoint == '') {\n                this.onConnect();\n            }\n            if (packet.type == 'error' && packet.advice == 'reconnect') {\n                this.isOpen = false;\n            }\n            this.socket.onPacket(packet);\n            return this;\n        };\n        /**\n         * Sets close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.setCloseTimeout = function () {\n            if (!this.closeTimeout) {\n                var self = this;\n                this.closeTimeout = setTimeout(function () {\n                    console.log(\"DBG Emile io transport timeout -> disconnect\");\n                    self.onDisconnect();\n                }, this.socket.closeTimeout);\n            }\n        };\n        /**\n         * Called when transport disconnects.\n         *\n         * @api private\n         */\n        Transport.prototype.onDisconnect = function () {\n            if (this.isOpen)\n                this.close();\n            this.clearTimeouts();\n            this.socket.onDisconnect();\n            return this;\n        };\n        /**\n         * Called when transport connects\n         *\n         * @api private\n         */\n        Transport.prototype.onConnect = function () {\n            this.socket.onConnect();\n            return this;\n        };\n        /**\n         * Clears close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.clearCloseTimeout = function () {\n            if (this.closeTimeout) {\n                clearTimeout(this.closeTimeout);\n                this.closeTimeout = null;\n            }\n        };\n        /**\n         * Clear timeouts\n         *\n         * @api private\n         */\n        Transport.prototype.clearTimeouts = function () {\n            this.clearCloseTimeout();\n            if (this.reopenTimeout) {\n                clearTimeout(this.reopenTimeout);\n            }\n        };\n        /**\n         * Sends a packet\n         *\n         * @param {Object} packet object.\n         * @api private\n         */\n        Transport.prototype.packet = function (packet) {\n            this.send(io.parser.encodePacket(packet));\n        };\n        /**\n         * Send the received heartbeat message back to server. So the server\n         * knows we are still connected.\n         *\n         * @param {String} heartbeat Heartbeat response from the server.\n         * @api private\n         */\n        Transport.prototype.onHeartbeat = function (heartbeat) {\n            console.log(\"DBG Emile transport: onHeartbeat\");\n            this.packet({ type: 'heartbeat' });\n        };\n        /**\n         * Called when the transport opens.\n         *\n         * @api private\n         */\n        Transport.prototype.onOpen = function () {\n            this.isOpen = true;\n            this.clearCloseTimeout();\n            this.socket.onOpen();\n        };\n        /**\n         * Notifies the base when the connection with the Socket.IO server\n         * has been disconnected.\n         *\n         * @api private\n         */\n        Transport.prototype.onClose = function () {\n            var self = this;\n            console.log(\"DBG Emile io transport onClose\");\n            /* FIXME: reopen delay causing a infinit loop\n            this.reopenTimeout = setTimeout(function () {\n              self.open();\n            }, this.socket.options['reopen delay']);*/\n            this.isOpen = false;\n            this.socket.onClose();\n            this.onDisconnect();\n        };\n        /**\n         * Generates a connection url based on the Socket.IO URL Protocol.\n         * See <https://github.com/learnboost/socket.io-node/> for more details.\n         *\n         * @returns {String} Connection url\n         * @api private\n         */\n        Transport.prototype.prepareUrl = function () {\n            var options = this.socket.options;\n            return this.scheme() + '://'\n                + options.host + ':' + options.port + '/'\n                + options.resource + '/' + io.protocol\n                + '/' + this.name + '/' + this.sessid;\n        };\n        /**\n         * Checks if the transport is ready to start a connection.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Transport.prototype.ready = function (socket, fn) {\n            fn.call(this);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.Socket = Socket;\n        /**\n         * Create a new `Socket.IO client` which can establish a persistent\n         * connection with a Socket.IO enabled server.\n         *\n         * @api public\n         */\n        function Socket(options) {\n            this.options = {\n                port: 80,\n                secure: false,\n                document: 'document' in global ? document : false,\n                resource: 'socket.io',\n                transports: io.transports,\n                'connect timeout': 10000,\n                'try multiple transports': true,\n                'reconnect': true,\n                'reconnection delay': 500,\n                'reconnection limit': Infinity,\n                'reopen delay': 3000,\n                'max reconnection attempts': 10,\n                'sync disconnect on unload': false,\n                'auto connect': true,\n                'flash policy port': 10843,\n                'manualFlush': false\n            };\n            io.util.merge(this.options, options);\n            this.connected = false;\n            this.open = false;\n            this.connecting = false;\n            this.reconnecting = false;\n            this.namespaces = {};\n            this.buffer = [];\n            this.doBuffer = false;\n            if (this.options['sync disconnect on unload'] &&\n                (!this.isXDomain() || io.util.ua.hasCORS)) {\n                var self = this;\n                io.util.on(global, 'beforeunload', function () {\n                    self.disconnectSync();\n                }, false);\n            }\n            if (this.options['auto connect']) {\n                this.connect();\n            }\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Socket, io.EventEmitter);\n        /**\n         * Returns a namespace listener/emitter for this socket\n         *\n         * @api public\n         */\n        Socket.prototype.of = function (name) {\n            if (!this.namespaces[name]) {\n                this.namespaces[name] = new io.SocketNamespace(this, name);\n                if (name !== '') {\n                    this.namespaces[name].packet({ type: 'connect' });\n                }\n            }\n            return this.namespaces[name];\n        };\n        /**\n         * Emits the given event to the Socket and all namespaces\n         *\n         * @api private\n         */\n        Socket.prototype.publish = function () {\n            this.emit.apply(this, arguments);\n            var nsp;\n            for (var i in this.namespaces) {\n                if (this.namespaces.hasOwnProperty(i)) {\n                    nsp = this.of(i);\n                    nsp.$emit.apply(nsp, arguments);\n                }\n            }\n        };\n        /**\n         * Performs the handshake\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        Socket.prototype.handshake = function (fn) {\n            var self = this, options = this.options;\n            function complete(data) {\n                if (data instanceof Error) {\n                    self.connecting = false;\n                    console.log(\"DBG Emile onError from handshake:\");\n                    console.log(data);\n                    self.onError(data.message);\n                }\n                else {\n                    fn.apply(null, data.split(':'));\n                }\n            }\n            ;\n            var url = [\n                'http' + (options.secure ? 's' : '') + ':/',\n                options.host + ':' + options.port,\n                options.resource,\n                io.protocol,\n                io.util.query(this.options.query, 't=' + +new Date)\n            ].join('/');\n            if (this.isXDomain() && !io.util.ua.hasCORS) {\n                var insertAt = document.getElementsByTagName('script')[0], script = document.createElement('script');\n                script.src = url + '&jsonp=' + io.j.length;\n                insertAt.parentNode.insertBefore(script, insertAt);\n                io.j.push(function (data) {\n                    complete(data);\n                    script.parentNode.removeChild(script);\n                });\n            }\n            else {\n                var xhr = io.util.request();\n                xhr.open('GET', url, true);\n                if (this.isXDomain()) {\n                    xhr.withCredentials = true;\n                }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        xhr.onreadystatechange = empty;\n                        if (xhr.status == 200) {\n                            complete(xhr.responseText);\n                        }\n                        else if (xhr.status == 403) {\n                            console.log(\"DBG Emile onError from xhr:\");\n                            console.log(xhr.status, \"text\", xhr.responseText);\n                            self.onError(xhr.responseText);\n                        }\n                        else {\n                            self.connecting = false;\n                            console.log(\"DBG Emile onError from xhr but not 403\");\n                            console.log(xhr.status, \"text\", xhr.responseText);\n                            !self.reconnecting && self.onError(xhr.responseText);\n                        }\n                    }\n                };\n                xhr.send(null);\n            }\n        };\n        /**\n         * Find an available transport based on the options supplied in the constructor.\n         *\n         * @api private\n         */\n        Socket.prototype.getTransport = function (override) {\n            var transports = override || this.transports, match;\n            for (var i = 0, transport; transport = transports[i]; i++) {\n                console.log(\"DBG Emile trying transport: \", transport);\n                if (io.Transport[transport]\n                    && io.Transport[transport].check(this)\n                    && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {\n                    console.log(\"DBG Emile keeping transport: \", transport);\n                    return new io.Transport[transport](this, this.sessionid);\n                }\n            }\n            return null;\n        };\n        /**\n         * Connects to the server.\n         *\n         * @param {Function} [fn] Callback.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.connect = function (fn) {\n            console.log(\"DBG Emile io socket connect\");\n            if (this.connecting) {\n                return this;\n            }\n            var self = this;\n            self.connecting = true;\n            this.handshake(function (sid, heartbeat, close, transports) {\n                self.sessionid = sid;\n                self.closeTimeout = close * 1000;\n                self.heartbeatTimeout = heartbeat * 1000;\n                if (!self.transports)\n                    self.transports = self.origTransports = (transports ? io.util.intersect(transports.split(','), self.options.transports) : self.options.transports);\n                self.setHeartbeatTimeout();\n                function connect(transports) {\n                    console.log(\"DBG Emile io socket connecting to transport\");\n                    if (self.transport)\n                        self.transport.clearTimeouts();\n                    self.transport = self.getTransport(transports);\n                    if (!self.transport)\n                        return self.publish('connect_failed');\n                    console.log(\"DBG Emile io socket connecting to transport (2)\");\n                    // once the transport is ready\n                    self.transport.ready(self, function () {\n                        console.log(\"DBG Emile io transport is ready\");\n                        self.connecting = true;\n                        self.publish('connecting', self.transport.name);\n                        self.transport.open();\n                        if (self.options['connect timeout']) {\n                            self.connectTimeoutTimer = setTimeout(function () {\n                                if (!self.connected) {\n                                    console.log(\"DBG Emile io socket timeout....\");\n                                    self.connecting = false;\n                                    if (self.options['try multiple transports']) {\n                                        var remaining = self.transports;\n                                        while (remaining.length > 0 && remaining.splice(0, 1)[0] !=\n                                            self.transport.name) { }\n                                        if (remaining.length) {\n                                            connect(remaining);\n                                        }\n                                        else {\n                                            self.publish('connect_failed');\n                                        }\n                                    }\n                                }\n                            }, self.options['connect timeout']);\n                        }\n                    });\n                }\n                connect(self.transports);\n                self.once('connect', function () {\n                    console.log(\"DBG Emile io socket something connected\");\n                    clearTimeout(self.connectTimeoutTimer);\n                    fn && typeof fn == 'function' && fn();\n                });\n            });\n            return this;\n        };\n        /**\n         * Clears and sets a new heartbeat timeout using the value given by the\n         * server during the handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.setHeartbeatTimeout = function () {\n            clearTimeout(this.heartbeatTimeoutTimer);\n            if (this.transport && !this.transport.heartbeats())\n                return;\n            var self = this;\n            this.heartbeatTimeoutTimer = setTimeout(function () {\n                self.transport.onClose();\n            }, this.heartbeatTimeout);\n        };\n        /**\n         * Sends a message.\n         *\n         * @param {Object} data packet.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.packet = function (data) {\n            if (this.connected && !this.doBuffer) {\n                this.transport.packet(data);\n            }\n            else {\n                this.buffer.push(data);\n            }\n            return this;\n        };\n        /**\n         * Sets buffer state\n         *\n         * @api private\n         */\n        Socket.prototype.setBuffer = function (v) {\n            this.doBuffer = v;\n            if (!v && this.connected && this.buffer.length) {\n                if (!this.options['manualFlush']) {\n                    this.flushBuffer();\n                }\n            }\n        };\n        /**\n         * Flushes the buffer data over the wire.\n         * To be invoked manually when 'manualFlush' is set to true.\n         *\n         * @api public\n         */\n        Socket.prototype.flushBuffer = function () {\n            this.transport.payload(this.buffer);\n            this.buffer = [];\n        };\n        /**\n         * Disconnect the established connect.\n         *\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.disconnect = function () {\n            if (this.connected || this.connecting) {\n                if (this.open) {\n                    this.of('').packet({ type: 'disconnect' });\n                }\n                console.log(\"DBG Emile io socket disconnect -> booting\");\n                // handle disconnection immediately\n                this.onDisconnect('booted');\n            }\n            return this;\n        };\n        /**\n         * Disconnects the socket with a sync XHR.\n         *\n         * @api private\n         */\n        Socket.prototype.disconnectSync = function () {\n            // ensure disconnection\n            var xhr = io.util.request();\n            var uri = [\n                'http' + (this.options.secure ? 's' : '') + ':/',\n                this.options.host + ':' + this.options.port,\n                this.options.resource,\n                io.protocol,\n                '',\n                this.sessionid\n            ].join('/') + '/?disconnect=1';\n            xhr.open('GET', uri, false);\n            xhr.send(null);\n            // handle disconnection immediately\n            console.log(\"DBG Emile io socket disconnectSync -> booting\");\n            this.onDisconnect('booted');\n        };\n        /**\n         * Check if we need to use cross domain enabled transports. Cross domain would\n         * be a different port or different domain name.\n         *\n         * @returns {Boolean}\n         * @api private\n         */\n        Socket.prototype.isXDomain = function () {\n            var port = global.location.port ||\n                ('https:' == global.location.protocol ? 443 : 80);\n            return this.options.host !== global.location.hostname\n                || this.options.port != port;\n        };\n        /**\n         * Called upon handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.onConnect = function () {\n            console.log(\"DBG Emile io socket onConnect\");\n            if (!this.connected) {\n                this.connected = true;\n                this.connecting = false;\n                if (!this.doBuffer) {\n                    // make sure to flush the buffer\n                    this.setBuffer(false);\n                }\n                this.emit('connect');\n            }\n        };\n        /**\n         * Called when the transport opens\n         *\n         * @api private\n         */\n        Socket.prototype.onOpen = function () {\n            this.open = true;\n        };\n        /**\n         * Called when the transport closes.\n         *\n         * @api private\n         */\n        Socket.prototype.onClose = function () {\n            this.open = false;\n            clearTimeout(this.heartbeatTimeoutTimer);\n        };\n        /**\n         * Called when the transport first opens a connection\n         *\n         * @param text\n         */\n        Socket.prototype.onPacket = function (packet) {\n            this.of(packet.endpoint).onPacket(packet);\n        };\n        /**\n         * Handles an error.\n         *\n         * @api private\n         */\n        Socket.prototype.onError = function (err) {\n            console.log(\"DBG Emile io socket onError\", err);\n            if (err && err.advice) {\n                if (err.advice === 'reconnect' && (this.connected || this.connecting)) {\n                    this.disconnect();\n                    if (this.options.reconnect) {\n                        this.reconnect();\n                    }\n                }\n            }\n            this.publish('error', err && err.reason ? err.reason : err);\n        };\n        /**\n         * Called when the transport disconnects.\n         *\n         * @api private\n         */\n        Socket.prototype.onDisconnect = function (reason) {\n            console.log(\"DBG Emile io socket onDisconnect\", reason);\n            var wasConnected = this.connected, wasConnecting = this.connecting;\n            this.connected = false;\n            this.connecting = false;\n            this.open = false;\n            if (wasConnected || wasConnecting) {\n                this.transport.close();\n                this.transport.clearTimeouts();\n                if (wasConnected) {\n                    this.publish('disconnect', reason);\n                    if ('booted' != reason && this.options.reconnect && !this.reconnecting) {\n                        this.reconnect();\n                    }\n                }\n            }\n        };\n        /**\n         * Called upon reconnection.\n         *\n         * @api private\n         */\n        Socket.prototype.reconnect = function () {\n            this.reconnecting = true;\n            this.reconnectionAttempts = 0;\n            this.reconnectionDelay = this.options['reconnection delay'];\n            var self = this, maxAttempts = this.options['max reconnection attempts'], tryMultiple = this.options['try multiple transports'], limit = this.options['reconnection limit'];\n            function reset() {\n                if (self.connected) {\n                    for (var i in self.namespaces) {\n                        if (self.namespaces.hasOwnProperty(i) && '' !== i) {\n                            self.namespaces[i].packet({ type: 'connect' });\n                        }\n                    }\n                    self.publish('reconnect', self.transport.name, self.reconnectionAttempts);\n                }\n                clearTimeout(self.reconnectionTimer);\n                self.removeListener('connect_failed', maybeReconnect);\n                self.removeListener('connect', maybeReconnect);\n                self.reconnecting = false;\n                delete self.reconnectionAttempts;\n                delete self.reconnectionDelay;\n                delete self.reconnectionTimer;\n                delete self.redoTransports;\n                self.options['try multiple transports'] = tryMultiple;\n            }\n            ;\n            function maybeReconnect() {\n                if (!self.reconnecting) {\n                    return;\n                }\n                if (self.connected) {\n                    return reset();\n                }\n                ;\n                if (self.connecting && self.reconnecting) {\n                    return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);\n                }\n                if (self.reconnectionAttempts++ >= maxAttempts) {\n                    if (!self.redoTransports) {\n                        self.on('connect_failed', maybeReconnect);\n                        self.options['try multiple transports'] = true;\n                        self.transports = self.origTransports;\n                        self.transport = self.getTransport();\n                        self.redoTransports = true;\n                        self.connect();\n                    }\n                    else {\n                        self.publish('reconnect_failed');\n                        reset();\n                    }\n                }\n                else {\n                    if (self.reconnectionDelay < limit) {\n                        self.reconnectionDelay *= 2; // exponential back off\n                    }\n                    self.connect();\n                    self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);\n                    self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);\n                }\n            }\n            ;\n            this.options['try multiple transports'] = false;\n            this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);\n            this.on('connect', maybeReconnect);\n        };\n    })(io, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.SocketNamespace = SocketNamespace;\n        /**\n         * Socket namespace constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        function SocketNamespace(socket, name) {\n            this.socket = socket;\n            this.name = name || '';\n            this.flags = {};\n            this.json = new Flag(this, 'json');\n            this.ackPackets = 0;\n            this.acks = {};\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(SocketNamespace, io.EventEmitter);\n        /**\n         * Copies emit since we override it\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\n        /**\n         * Creates a new namespace, by proxying the request to the socket. This\n         * allows us to use the synax as we do on the server.\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.of = function () {\n            return this.socket.of.apply(this.socket, arguments);\n        };\n        /**\n         * Sends a packet.\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.packet = function (packet) {\n            packet.endpoint = this.name;\n            this.socket.packet(packet);\n            this.flags = {};\n            return this;\n        };\n        /**\n         * Sends a message\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.send = function (data, fn) {\n            var packet = {\n                type: this.flags.json ? 'json' : 'message',\n                data: data\n            };\n            if ('function' == typeof fn) {\n                packet.id = ++this.ackPackets;\n                packet.ack = true;\n                this.acks[packet.id] = fn;\n            }\n            return this.packet(packet);\n        };\n        /**\n         * Emits an event\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.emit = function (name) {\n            var args = Array.prototype.slice.call(arguments, 1), lastArg = args[args.length - 1], packet = {\n                type: 'event',\n                name: name\n            };\n            if ('function' == typeof lastArg) {\n                packet.id = ++this.ackPackets;\n                packet.ack = 'data';\n                this.acks[packet.id] = lastArg;\n                args = args.slice(0, args.length - 1);\n            }\n            packet.args = args;\n            console.log(\"DBG Emile SocketNamespace.emit:\", packet);\n            return this.packet(packet);\n        };\n        /**\n         * Disconnects the namespace\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.disconnect = function () {\n            if (this.name === '') {\n                this.socket.disconnect();\n            }\n            else {\n                this.packet({ type: 'disconnect' });\n                this.$emit('disconnect');\n            }\n            return this;\n        };\n        /**\n         * Handles a packet\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.onPacket = function (packet) {\n            var self = this;\n            function ack() {\n                self.packet({\n                    type: 'ack',\n                    args: io.util.toArray(arguments),\n                    ackId: packet.id\n                });\n            }\n            ;\n            switch (packet.type) {\n                case 'connect':\n                    this.$emit('connect');\n                    break;\n                case 'disconnect':\n                    if (this.name === '') {\n                        console.log(\"DBG Emile io socket onPacket disconnect, reason=\", packet.reason);\n                        this.socket.onDisconnect(packet.reason || 'booted');\n                    }\n                    else {\n                        this.$emit('disconnect', packet.reason);\n                    }\n                    break;\n                case 'message':\n                case 'json':\n                    var params = ['message', packet.data];\n                    if (packet.ack == 'data') {\n                        params.push(ack);\n                    }\n                    else if (packet.ack) {\n                        this.packet({ type: 'ack', ackId: packet.id });\n                    }\n                    this.$emit.apply(this, params);\n                    break;\n                case 'event':\n                    var params = [packet.name].concat(packet.args);\n                    if (packet.ack == 'data')\n                        params.push(ack);\n                    this.$emit.apply(this, params);\n                    break;\n                case 'ack':\n                    if (this.acks[packet.ackId]) {\n                        this.acks[packet.ackId].apply(this, packet.args);\n                        delete this.acks[packet.ackId];\n                    }\n                    break;\n                case 'error':\n                    if (packet.advice) {\n                        console.log(\"DBG Emile onError from packet:\");\n                        console.log(packet);\n                        this.socket.onError(packet);\n                    }\n                    else {\n                        if (packet.reason == 'unauthorized') {\n                            this.$emit('connect_failed', packet.reason);\n                        }\n                        else {\n                            this.$emit('error', packet.reason);\n                        }\n                    }\n                    break;\n            }\n        };\n        /**\n         * Flag interface.\n         *\n         * @api private\n         */\n        function Flag(nsp, name) {\n            this.namespace = nsp;\n            this.name = name;\n        }\n        ;\n        /**\n         * Send a message\n         *\n         * @api public\n         */\n        Flag.prototype.send = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.send.apply(this.namespace, arguments);\n        };\n        /**\n         * Emit an event\n         *\n         * @api public\n         */\n        Flag.prototype.emit = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.emit.apply(this.namespace, arguments);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.websocket = WS;\n        /**\n         * The WebSocket transport uses the HTML5 WebSocket API to establish an\n         * persistent connection with the Socket.IO server. This transport will also\n         * be inherited by the FlashSocket fallback as it provides a API compatible\n         * polyfill for the WebSockets.\n         *\n         * @constructor\n         * @extends {io.Transport}\n         * @api public\n         */\n        function WS(socket) {\n            io.Transport.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(WS, io.Transport);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        WS.prototype.name = 'websocket';\n        /**\n         * Initializes a new `WebSocket` connection with the Socket.IO server. We attach\n         * all the appropriate listeners to handle the responses from the server.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.open = function () {\n            var query = io.util.query(this.socket.options.query), self = this, Socket;\n            if (!Socket) {\n                Socket = global.MozWebSocket || global.WebSocket;\n            }\n            this.websocket = new Socket(this.prepareUrl() + query);\n            this.websocket.onopen = function () {\n                self.onOpen();\n                self.socket.setBuffer(false);\n            };\n            this.websocket.onmessage = function (ev) {\n                self.onData(ev.data);\n            };\n            this.websocket.onclose = function () {\n                self.onClose();\n                self.socket.setBuffer(true);\n            };\n            this.websocket.onerror = function (e) {\n                console.log(\"DBG Emile onerror from websocket WS\", e);\n                self.onError(e);\n            };\n            return this;\n        };\n        /**\n         * Send a message to the Socket.IO server. The message will automatically be\n         * encoded in the correct message format.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        // Do to a bug in the current IDevices browser, we need to wrap the send in a\n        // setTimeout, when they resume from sleeping the browser will crash if\n        // we don't allow the browser time to detect the socket has been closed\n        if (io.util.ua.iDevice) {\n            WS.prototype.send = function (data) {\n                var self = this;\n                setTimeout(function () {\n                    self.websocket.send(data);\n                }, 0);\n                return this;\n            };\n        }\n        else {\n            WS.prototype.send = function (data) {\n                this.websocket.send(data);\n                return this;\n            };\n        }\n        /**\n         * Payload\n         *\n         * @api private\n         */\n        WS.prototype.payload = function (arr) {\n            for (var i = 0, l = arr.length; i < l; i++) {\n                this.packet(arr[i]);\n            }\n            return this;\n        };\n        /**\n         * Disconnect the established `WebSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.close = function () {\n            this.websocket.close();\n            return this;\n        };\n        /**\n         * Handle the errors that `WebSocket` might be giving when we\n         * are attempting to connect or send messages.\n         *\n         * @param {Error} e The error.\n         * @api private\n         */\n        WS.prototype.onError = function (e) {\n            console.log(\"DBG Emile onerror from websocket WS.onError, forwarding\", e);\n            this.socket.onError(e);\n        };\n        /**\n         * Returns the appropriate scheme for the URI generation.\n         *\n         * @api private\n         */\n        WS.prototype.scheme = function () {\n            return this.socket.options.secure ? 'wss' : 'ws';\n        };\n        /**\n         * Checks if the browser has support for native `WebSockets` and that\n         * it's not the polyfill created for the FlashSocket transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        WS.check = function () {\n            return ('WebSocket' in global && !('__addTask' in WebSocket))\n                || 'MozWebSocket' in global;\n        };\n        /**\n         * Check if the `WebSocket` transport support cross domain communications.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        WS.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('websocket');\n        console.log(\"DBG Emile: skipping transport websocket.\");\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.flashsocket = Flashsocket;\n        /**\n         * The FlashSocket transport. This is a API wrapper for the HTML5 WebSocket\n         * specification. It uses a .swf file to communicate with the server. If you want\n         * to serve the .swf file from a other server than where the Socket.IO script is\n         * coming from you need to use the insecure version of the .swf. More information\n         * about this can be found on the github page.\n         *\n         * @constructor\n         * @extends {io.Transport.websocket}\n         * @api public\n         */\n        function Flashsocket() {\n            io.Transport.websocket.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(Flashsocket, io.Transport.websocket);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        Flashsocket.prototype.name = 'flashsocket';\n        /**\n         * Disconnect the established `FlashSocket` connection. This is done by adding a\n         * new task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.open = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.open.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Sends a message to the Socket.IO server. This is done by adding a new\n         * task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.send = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.send.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Disconnects the established `FlashSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.close = function () {\n            WebSocket.__tasks.length = 0;\n            io.Transport.websocket.prototype.close.call(this);\n            return this;\n        };\n        /**\n         * The WebSocket fall back needs to append the flash container to the body\n         * element, so we need to make sure we have access to it. Or defer the call\n         * until we are sure there is a body element.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Flashsocket.prototype.ready = function (socket, fn) {\n            function init() {\n                var options = socket.options, port = options['flash policy port'], path = [\n                    'http' + (options.secure ? 's' : '') + ':/',\n                    options.host + ':' + options.port,\n                    options.resource,\n                    'static/flashsocket',\n                    'WebSocketMain' + (socket.isXDomain() ? 'Insecure' : '') + '.swf'\n                ];\n                // Only start downloading the swf file when the checked that this browser\n                // actually supports it\n                if (!Flashsocket.loaded) {\n                    if (typeof WEB_SOCKET_SWF_LOCATION === 'undefined') {\n                        // Set the correct file based on the XDomain settings\n                        WEB_SOCKET_SWF_LOCATION = path.join('/');\n                    }\n                    if (port !== 843) {\n                        WebSocket.loadFlashPolicyFile('xmlsocket://' + options.host + ':' + port);\n                    }\n                    WebSocket.__initialize();\n                    Flashsocket.loaded = true;\n                }\n                fn.call(self);\n            }\n            var self = this;\n            if (document.body)\n                return init();\n            io.util.load(init);\n        };\n        /**\n         * Check if the FlashSocket transport is supported as it requires that the Adobe\n         * Flash Player plug-in version `10.0.0` or greater is installed. And also check if\n         * the polyfill is correctly loaded.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.check = function () {\n            if (typeof WebSocket == 'undefined'\n                || !('__initialize' in WebSocket) || !swfobject)\n                return false;\n            return swfobject.getFlashPlayerVersion().major >= 10;\n        };\n        /**\n         * Check if the FlashSocket transport can be used as cross domain / cross origin\n         * transport. Because we can't see which type (secure or insecure) of .swf is used\n         * we will just return true.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Disable AUTO_INITIALIZATION\n         */\n        if (typeof window != 'undefined') {\n            // NB: this in \"window\" scope, but doing so actually breaks it.\n            //WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = true;\n        }\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('flashsocket');\n        console.log(\"DBG Emile: skipping transport flashsocket (come on we're in 2023).\");\n    })(io.Transport, io);\n    /*\tSWFObject v2.2 <http://code.google.com/p/swfobject/>\n        is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>\n    */\n    if ('undefined' != typeof window) {\n        var swfobject = function () { var D = \"undefined\", r = \"object\", S = \"Shockwave Flash\", W = \"ShockwaveFlash.ShockwaveFlash\", q = \"application/x-shockwave-flash\", R = \"SWFObjectExprInst\", x = \"onreadystatechange\", O = window, j = document, t = navigator, T = false, U = [h], o = [], N = [], I = [], l, Q, E, B, J = false, a = false, n, G, m = true, M = function () { var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D, ah = t.userAgent.toLowerCase(), Y = t.platform.toLowerCase(), ae = Y ? /win/.test(Y) : /win/.test(ah), ac = Y ? /mac/.test(Y) : /mac/.test(ah), af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/, \"$1\")) : false, X = !+\"\\v1\", ag = [0, 0, 0], ab = null; if (typeof t.plugins != D && typeof t.plugins[S] == r) {\n            ab = t.plugins[S].description;\n            if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {\n                T = true;\n                X = false;\n                ab = ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/, \"$1\");\n                ag[0] = parseInt(ab.replace(/^(.*)\\..*$/, \"$1\"), 10);\n                ag[1] = parseInt(ab.replace(/^.*\\.(.*)\\s.*$/, \"$1\"), 10);\n                ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, \"$1\"), 10) : 0;\n            }\n        }\n        else {\n            if (typeof O[(['Active'].concat('Object').join('X'))] != D) {\n                try {\n                    var ad = new window[(['Active'].concat('Object').join('X'))](W);\n                    if (ad) {\n                        ab = ad.GetVariable(\"$version\");\n                        if (ab) {\n                            X = true;\n                            ab = ab.split(\" \")[1].split(\",\");\n                            ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                        }\n                    }\n                }\n                catch (Z) { }\n            }\n        } return { w3: aa, pv: ag, wk: af, ie: X, win: ae, mac: ac }; }(), k = function () { if (!M.w3) {\n            return;\n        } if ((typeof j.readyState != D && j.readyState == \"complete\") || (typeof j.readyState == D && (j.getElementsByTagName(\"body\")[0] || j.body))) {\n            f();\n        } if (!J) {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"DOMContentLoaded\", f, false);\n            }\n            if (M.ie && M.win) {\n                j.attachEvent(x, function () { if (j.readyState == \"complete\") {\n                    j.detachEvent(x, arguments.callee);\n                    f();\n                } });\n                if (O == top) {\n                    (function () { if (J) {\n                        return;\n                    } try {\n                        j.documentElement.doScroll(\"left\");\n                    }\n                    catch (X) {\n                        setTimeout(arguments.callee, 0);\n                        return;\n                    } f(); })();\n                }\n            }\n            if (M.wk) {\n                (function () { if (J) {\n                    return;\n                } if (!/loaded|complete/.test(j.readyState)) {\n                    setTimeout(arguments.callee, 0);\n                    return;\n                } f(); })();\n            }\n            s(f);\n        } }(); function f() { if (J) {\n            return;\n        } try {\n            var Z = j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));\n            Z.parentNode.removeChild(Z);\n        }\n        catch (aa) {\n            return;\n        } J = true; var X = U.length; for (var Y = 0; Y < X; Y++) {\n            U[Y]();\n        } } function K(X) { if (J) {\n            X();\n        }\n        else {\n            U[U.length] = X;\n        } } function s(Y) { if (typeof O.addEventListener != D) {\n            O.addEventListener(\"load\", Y, false);\n        }\n        else {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"load\", Y, false);\n            }\n            else {\n                if (typeof O.attachEvent != D) {\n                    i(O, \"onload\", Y);\n                }\n                else {\n                    if (typeof O.onload == \"function\") {\n                        var X = O.onload;\n                        O.onload = function () { X(); Y(); };\n                    }\n                    else {\n                        O.onload = Y;\n                    }\n                }\n            }\n        } } function h() { if (T) {\n            V();\n        }\n        else {\n            H();\n        } } function V() { var X = j.getElementsByTagName(\"body\")[0]; var aa = C(r); aa.setAttribute(\"type\", q); var Z = X.appendChild(aa); if (Z) {\n            var Y = 0;\n            (function () { if (typeof Z.GetVariable != D) {\n                var ab = Z.GetVariable(\"$version\");\n                if (ab) {\n                    ab = ab.split(\" \")[1].split(\",\");\n                    M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                }\n            }\n            else {\n                if (Y < 10) {\n                    Y++;\n                    setTimeout(arguments.callee, 10);\n                    return;\n                }\n            } X.removeChild(aa); Z = null; H(); })();\n        }\n        else {\n            H();\n        } } function H() { var ag = o.length; if (ag > 0) {\n            for (var af = 0; af < ag; af++) {\n                var Y = o[af].id;\n                var ab = o[af].callbackFn;\n                var aa = { success: false, id: Y };\n                if (M.pv[0] > 0) {\n                    var ae = c(Y);\n                    if (ae) {\n                        if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {\n                            w(Y, true);\n                            if (ab) {\n                                aa.success = true;\n                                aa.ref = z(Y);\n                                ab(aa);\n                            }\n                        }\n                        else {\n                            if (o[af].expressInstall && A()) {\n                                var ai = {};\n                                ai.data = o[af].expressInstall;\n                                ai.width = ae.getAttribute(\"width\") || \"0\";\n                                ai.height = ae.getAttribute(\"height\") || \"0\";\n                                if (ae.getAttribute(\"class\")) {\n                                    ai.styleclass = ae.getAttribute(\"class\");\n                                }\n                                if (ae.getAttribute(\"align\")) {\n                                    ai.align = ae.getAttribute(\"align\");\n                                }\n                                var ah = {};\n                                var X = ae.getElementsByTagName(\"param\");\n                                var ac = X.length;\n                                for (var ad = 0; ad < ac; ad++) {\n                                    if (X[ad].getAttribute(\"name\").toLowerCase() != \"movie\") {\n                                        ah[X[ad].getAttribute(\"name\")] = X[ad].getAttribute(\"value\");\n                                    }\n                                }\n                                P(ai, ah, Y, ab);\n                            }\n                            else {\n                                p(ae);\n                                if (ab) {\n                                    ab(aa);\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    w(Y, true);\n                    if (ab) {\n                        var Z = z(Y);\n                        if (Z && typeof Z.SetVariable != D) {\n                            aa.success = true;\n                            aa.ref = Z;\n                        }\n                        ab(aa);\n                    }\n                }\n            }\n        } } function z(aa) { var X = null; var Y = c(aa); if (Y && Y.nodeName == \"OBJECT\") {\n            if (typeof Y.SetVariable != D) {\n                X = Y;\n            }\n            else {\n                var Z = Y.getElementsByTagName(r)[0];\n                if (Z) {\n                    X = Z;\n                }\n            }\n        } return X; } function A() { return !a && F(\"6.0.65\") && (M.win || M.mac) && !(M.wk && M.wk < 312); } function P(aa, ab, X, Z) { a = true; E = Z || null; B = { success: false, id: X }; var ae = c(X); if (ae) {\n            if (ae.nodeName == \"OBJECT\") {\n                l = g(ae);\n                Q = null;\n            }\n            else {\n                l = ae;\n                Q = X;\n            }\n            aa.id = R;\n            if (typeof aa.width == D || (!/%$/.test(aa.width) && parseInt(aa.width, 10) < 310)) {\n                aa.width = \"310\";\n            }\n            if (typeof aa.height == D || (!/%$/.test(aa.height) && parseInt(aa.height, 10) < 137)) {\n                aa.height = \"137\";\n            }\n            j.title = j.title.slice(0, 47) + \" - Flash Player Installation\";\n            var ad = M.ie && M.win ? (['Active'].concat('').join('X')) : \"PlugIn\", ac = \"MMredirectURL=\" + O.location.toString().replace(/&/g, \"%26\") + \"&MMplayerType=\" + ad + \"&MMdoctitle=\" + j.title;\n            if (typeof ab.flashvars != D) {\n                ab.flashvars += \"&\" + ac;\n            }\n            else {\n                ab.flashvars = ac;\n            }\n            if (M.ie && M.win && ae.readyState != 4) {\n                var Y = C(\"div\");\n                X += \"SWFObjectNew\";\n                Y.setAttribute(\"id\", X);\n                ae.parentNode.insertBefore(Y, ae);\n                ae.style.display = \"none\";\n                (function () { if (ae.readyState == 4) {\n                    ae.parentNode.removeChild(ae);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            u(aa, ab, X);\n        } } function p(Y) { if (M.ie && M.win && Y.readyState != 4) {\n            var X = C(\"div\");\n            Y.parentNode.insertBefore(X, Y);\n            X.parentNode.replaceChild(g(Y), X);\n            Y.style.display = \"none\";\n            (function () { if (Y.readyState == 4) {\n                Y.parentNode.removeChild(Y);\n            }\n            else {\n                setTimeout(arguments.callee, 10);\n            } })();\n        }\n        else {\n            Y.parentNode.replaceChild(g(Y), Y);\n        } } function g(ab) { var aa = C(\"div\"); if (M.win && M.ie) {\n            aa.innerHTML = ab.innerHTML;\n        }\n        else {\n            var Y = ab.getElementsByTagName(r)[0];\n            if (Y) {\n                var ad = Y.childNodes;\n                if (ad) {\n                    var X = ad.length;\n                    for (var Z = 0; Z < X; Z++) {\n                        if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == \"PARAM\") && !(ad[Z].nodeType == 8)) {\n                            aa.appendChild(ad[Z].cloneNode(true));\n                        }\n                    }\n                }\n            }\n        } return aa; } function u(ai, ag, Y) { var X, aa = c(Y); if (M.wk && M.wk < 312) {\n            return X;\n        } if (aa) {\n            if (typeof ai.id == D) {\n                ai.id = Y;\n            }\n            if (M.ie && M.win) {\n                var ah = \"\";\n                for (var ae in ai) {\n                    if (ai[ae] != Object.prototype[ae]) {\n                        if (ae.toLowerCase() == \"data\") {\n                            ag.movie = ai[ae];\n                        }\n                        else {\n                            if (ae.toLowerCase() == \"styleclass\") {\n                                ah += ' class=\"' + ai[ae] + '\"';\n                            }\n                            else {\n                                if (ae.toLowerCase() != \"classid\") {\n                                    ah += \" \" + ae + '=\"' + ai[ae] + '\"';\n                                }\n                            }\n                        }\n                    }\n                }\n                var af = \"\";\n                for (var ad in ag) {\n                    if (ag[ad] != Object.prototype[ad]) {\n                        af += '<param name=\"' + ad + '\" value=\"' + ag[ad] + '\" />';\n                    }\n                }\n                aa.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"' + ah + \">\" + af + \"</object>\";\n                N[N.length] = ai.id;\n                X = c(ai.id);\n            }\n            else {\n                var Z = C(r);\n                Z.setAttribute(\"type\", q);\n                for (var ac in ai) {\n                    if (ai[ac] != Object.prototype[ac]) {\n                        if (ac.toLowerCase() == \"styleclass\") {\n                            Z.setAttribute(\"class\", ai[ac]);\n                        }\n                        else {\n                            if (ac.toLowerCase() != \"classid\") {\n                                Z.setAttribute(ac, ai[ac]);\n                            }\n                        }\n                    }\n                }\n                for (var ab in ag) {\n                    if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != \"movie\") {\n                        e(Z, ab, ag[ab]);\n                    }\n                }\n                aa.parentNode.replaceChild(Z, aa);\n                X = Z;\n            }\n        } return X; } function e(Z, X, Y) { var aa = C(\"param\"); aa.setAttribute(\"name\", X); aa.setAttribute(\"value\", Y); Z.appendChild(aa); } function y(Y) { var X = c(Y); if (X && X.nodeName == \"OBJECT\") {\n            if (M.ie && M.win) {\n                X.style.display = \"none\";\n                (function () { if (X.readyState == 4) {\n                    b(Y);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            else {\n                X.parentNode.removeChild(X);\n            }\n        } } function b(Z) { var Y = c(Z); if (Y) {\n            for (var X in Y) {\n                if (typeof Y[X] == \"function\") {\n                    Y[X] = null;\n                }\n            }\n            Y.parentNode.removeChild(Y);\n        } } function c(Z) { var X = null; try {\n            X = j.getElementById(Z);\n        }\n        catch (Y) { } return X; } function C(X) { return j.createElement(X); } function i(Z, X, Y) { Z.attachEvent(X, Y); I[I.length] = [Z, X, Y]; } function F(Z) { var Y = M.pv, X = Z.split(\".\"); X[0] = parseInt(X[0], 10); X[1] = parseInt(X[1], 10) || 0; X[2] = parseInt(X[2], 10) || 0; return (Y[0] > X[0] || (Y[0] == X[0] && Y[1] > X[1]) || (Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2])) ? true : false; } function v(ac, Y, ad, ab) { if (M.ie && M.mac) {\n            return;\n        } var aa = j.getElementsByTagName(\"head\")[0]; if (!aa) {\n            return;\n        } var X = (ad && typeof ad == \"string\") ? ad : \"screen\"; if (ab) {\n            n = null;\n            G = null;\n        } if (!n || G != X) {\n            var Z = C(\"style\");\n            Z.setAttribute(\"type\", \"text/css\");\n            Z.setAttribute(\"media\", X);\n            n = aa.appendChild(Z);\n            if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {\n                n = j.styleSheets[j.styleSheets.length - 1];\n            }\n            G = X;\n        } if (M.ie && M.win) {\n            if (n && typeof n.addRule == r) {\n                n.addRule(ac, Y);\n            }\n        }\n        else {\n            if (n && typeof j.createTextNode != D) {\n                n.appendChild(j.createTextNode(ac + \" {\" + Y + \"}\"));\n            }\n        } } function w(Z, X) { if (!m) {\n            return;\n        } var Y = X ? \"visible\" : \"hidden\"; if (J && c(Z)) {\n            c(Z).style.visibility = Y;\n        }\n        else {\n            v(\"#\" + Z, \"visibility:\" + Y);\n        } } function L(Y) { var Z = /[\\\\\\\"<>\\.;]/; var X = Z.exec(Y) != null; return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y; } var d = function () { if (M.ie && M.win) {\n            window.attachEvent(\"onunload\", function () { var ac = I.length; for (var ab = 0; ab < ac; ab++) {\n                I[ab][0].detachEvent(I[ab][1], I[ab][2]);\n            } var Z = N.length; for (var aa = 0; aa < Z; aa++) {\n                y(N[aa]);\n            } for (var Y in M) {\n                M[Y] = null;\n            } M = null; for (var X in swfobject) {\n                swfobject[X] = null;\n            } swfobject = null; });\n        } }(); return { registerObject: function (ab, X, aa, Z) { if (M.w3 && ab && X) {\n                var Y = {};\n                Y.id = ab;\n                Y.swfVersion = X;\n                Y.expressInstall = aa;\n                Y.callbackFn = Z;\n                o[o.length] = Y;\n                w(ab, false);\n            }\n            else {\n                if (Z) {\n                    Z({ success: false, id: ab });\n                }\n            } }, getObjectById: function (X) { if (M.w3) {\n                return z(X);\n            } }, embedSWF: function (ab, ah, ae, ag, Y, aa, Z, ad, af, ac) { var X = { success: false, id: ah }; if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {\n                w(ah, false);\n                K(function () { ae += \"\"; ag += \"\"; var aj = {}; if (af && typeof af === r) {\n                    for (var al in af) {\n                        aj[al] = af[al];\n                    }\n                } aj.data = ab; aj.width = ae; aj.height = ag; var am = {}; if (ad && typeof ad === r) {\n                    for (var ak in ad) {\n                        am[ak] = ad[ak];\n                    }\n                } if (Z && typeof Z === r) {\n                    for (var ai in Z) {\n                        if (typeof am.flashvars != D) {\n                            am.flashvars += \"&\" + ai + \"=\" + Z[ai];\n                        }\n                        else {\n                            am.flashvars = ai + \"=\" + Z[ai];\n                        }\n                    }\n                } if (F(Y)) {\n                    var an = u(aj, am, ah);\n                    if (aj.id == ah) {\n                        w(ah, true);\n                    }\n                    X.success = true;\n                    X.ref = an;\n                }\n                else {\n                    if (aa && A()) {\n                        aj.data = aa;\n                        P(aj, am, ah, ac);\n                        return;\n                    }\n                    else {\n                        w(ah, true);\n                    }\n                } if (ac) {\n                    ac(X);\n                } });\n            }\n            else {\n                if (ac) {\n                    ac(X);\n                }\n            } }, switchOffAutoHideShow: function () { m = false; }, ua: M, getFlashPlayerVersion: function () { return { major: M.pv[0], minor: M.pv[1], release: M.pv[2] }; }, hasFlashPlayerVersion: F, createSWF: function (Z, Y, X) { if (M.w3) {\n                return u(Z, Y, X);\n            }\n            else {\n                return undefined;\n            } }, showExpressInstall: function (Z, aa, X, Y) { if (M.w3 && A()) {\n                P(Z, aa, X, Y);\n            } }, removeSWF: function (X) { if (M.w3) {\n                y(X);\n            } }, createCSS: function (aa, Z, Y, X) { if (M.w3) {\n                v(aa, Z, Y, X);\n            } }, addDomLoadEvent: K, addLoadEvent: s, getQueryParamValue: function (aa) { var Z = j.location.search || j.location.hash; if (Z) {\n                if (/\\?/.test(Z)) {\n                    Z = Z.split(\"?\")[1];\n                }\n                if (aa == null) {\n                    return L(Z);\n                }\n                var Y = Z.split(\"&\");\n                for (var X = 0; X < Y.length; X++) {\n                    if (Y[X].substring(0, Y[X].indexOf(\"=\")) == aa) {\n                        return L(Y[X].substring((Y[X].indexOf(\"=\") + 1)));\n                    }\n                }\n            } return \"\"; }, expressInstallCallback: function () { if (a) {\n                var X = c(R);\n                if (X && l) {\n                    X.parentNode.replaceChild(l, X);\n                    if (Q) {\n                        w(Q, true);\n                        if (M.ie && M.win) {\n                            l.style.display = \"block\";\n                        }\n                    }\n                    if (E) {\n                        E(B);\n                    }\n                }\n                a = false;\n            } } }; }();\n    }\n    // Copyright: Hiroshi Ichikawa <http://gimite.net/en/>\n    // License: New BSD License\n    // Reference: http://dev.w3.org/html5/websockets/\n    // Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol\n    (function () {\n        if ('undefined' == typeof window || window.WebSocket)\n            return;\n        var console = window.console;\n        if (!console || !console.log || !console.error) {\n            console = { log: function () { }, error: function () { } };\n        }\n        if (!swfobject.hasFlashPlayerVersion(\"10.0.0\")) {\n            console.error(\"Flash Player >= 10.0.0 is required.\");\n            return;\n        }\n        if (location.protocol == \"file:\") {\n            console.error(\"WARNING: web-socket-js doesn't work in file:///... URL \" +\n                \"unless you set Flash Security Settings properly. \" +\n                \"Open the page via Web server i.e. http://...\");\n        }\n        /**\n         * This class represents a faux web socket.\n         * @param {string} url\n         * @param {array or string} protocols\n         * @param {string} proxyHost\n         * @param {int} proxyPort\n         * @param {string} headers\n         */\n        WebSocket = function (url, protocols, proxyHost, proxyPort, headers) {\n            var self = this;\n            self.__id = WebSocket.__nextId++;\n            WebSocket.__instances[self.__id] = self;\n            self.readyState = WebSocket.CONNECTING;\n            self.bufferedAmount = 0;\n            self.__events = {};\n            if (!protocols) {\n                protocols = [];\n            }\n            else if (typeof protocols == \"string\") {\n                protocols = [protocols];\n            }\n            // Uses setTimeout() to make sure __createFlash() runs after the caller sets ws.onopen etc.\n            // Otherwise, when onopen fires immediately, onopen is called before it is set.\n            setTimeout(function () {\n                WebSocket.__addTask(function () {\n                    WebSocket.__flash.create(self.__id, url, protocols, proxyHost || null, proxyPort || 0, headers || null);\n                });\n            }, 0);\n        };\n        /**\n         * Send data to the web socket.\n         * @param {string} data  The data to send to the socket.\n         * @return {boolean}  True for success, false for failure.\n         */\n        WebSocket.prototype.send = function (data) {\n            if (this.readyState == WebSocket.CONNECTING) {\n                throw \"INVALID_STATE_ERR: Web Socket connection has not been established\";\n            }\n            // We use encodeURIComponent() here, because FABridge doesn't work if\n            // the argument includes some characters. We don't use escape() here\n            // because of this:\n            // https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_Functions\n            // But it looks decodeURIComponent(encodeURIComponent(s)) doesn't\n            // preserve all Unicode characters either e.g. \"\\uffff\" in Firefox.\n            // Note by wtritch: Hopefully this will not be necessary using ExternalInterface.  Will require\n            // additional testing.\n            var result = WebSocket.__flash.send(this.__id, encodeURIComponent(data));\n            if (result < 0) { // success\n                return true;\n            }\n            else {\n                this.bufferedAmount += result;\n                return false;\n            }\n        };\n        /**\n         * Close this web socket gracefully.\n         */\n        WebSocket.prototype.close = function () {\n            if (this.readyState == WebSocket.CLOSED || this.readyState == WebSocket.CLOSING) {\n                return;\n            }\n            this.readyState = WebSocket.CLOSING;\n            WebSocket.__flash.close(this.__id);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.addEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events)) {\n                this.__events[type] = [];\n            }\n            this.__events[type].push(listener);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.removeEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events))\n                return;\n            var events = this.__events[type];\n            for (var i = events.length - 1; i >= 0; --i) {\n                if (events[i] === listener) {\n                    events.splice(i, 1);\n                    break;\n                }\n            }\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {Event} event\n         * @return void\n         */\n        WebSocket.prototype.dispatchEvent = function (event) {\n            var events = this.__events[event.type] || [];\n            for (var i = 0; i < events.length; ++i) {\n                events[i](event);\n            }\n            var handler = this[\"on\" + event.type];\n            if (handler)\n                handler(event);\n        };\n        /**\n         * Handles an event from Flash.\n         * @param {Object} flashEvent\n         */\n        WebSocket.prototype.__handleEvent = function (flashEvent) {\n            if (\"readyState\" in flashEvent) {\n                this.readyState = flashEvent.readyState;\n            }\n            if (\"protocol\" in flashEvent) {\n                this.protocol = flashEvent.protocol;\n            }\n            var jsEvent;\n            if (flashEvent.type == \"open\" || flashEvent.type == \"error\") {\n                jsEvent = this.__createSimpleEvent(flashEvent.type);\n            }\n            else if (flashEvent.type == \"close\") {\n                // TODO implement jsEvent.wasClean\n                jsEvent = this.__createSimpleEvent(\"close\");\n            }\n            else if (flashEvent.type == \"message\") {\n                var data = decodeURIComponent(flashEvent.message);\n                jsEvent = this.__createMessageEvent(\"message\", data);\n            }\n            else {\n                throw \"unknown event type: \" + flashEvent.type;\n            }\n            this.dispatchEvent(jsEvent);\n        };\n        WebSocket.prototype.__createSimpleEvent = function (type) {\n            if (document.createEvent && window.Event) {\n                var event = document.createEvent(\"Event\");\n                event.initEvent(type, false, false);\n                return event;\n            }\n            else {\n                return { type: type, bubbles: false, cancelable: false };\n            }\n        };\n        WebSocket.prototype.__createMessageEvent = function (type, data) {\n            if (document.createEvent && window.MessageEvent && !window.opera) {\n                var event = document.createEvent(\"MessageEvent\");\n                event.initMessageEvent(\"message\", false, false, data, null, null, window, null);\n                return event;\n            }\n            else {\n                // IE and Opera, the latter one truncates the data parameter after any 0x00 bytes.\n                return { type: type, data: data, bubbles: false, cancelable: false };\n            }\n        };\n        /**\n         * Define the WebSocket readyState enumeration.\n         */\n        WebSocket.CONNECTING = 0;\n        WebSocket.OPEN = 1;\n        WebSocket.CLOSING = 2;\n        WebSocket.CLOSED = 3;\n        WebSocket.__flash = null;\n        WebSocket.__instances = {};\n        WebSocket.__tasks = [];\n        WebSocket.__nextId = 0;\n        /**\n         * Load a new flash security policy file.\n         * @param {string} url\n         */\n        WebSocket.loadFlashPolicyFile = function (url) {\n            WebSocket.__addTask(function () {\n                WebSocket.__flash.loadManualPolicyFile(url);\n            });\n        };\n        /**\n         * Loads WebSocketMain.swf and creates WebSocketMain object in Flash.\n         */\n        WebSocket.__initialize = function () {\n            if (WebSocket.__flash)\n                return;\n            if (WebSocket.__swfLocation) {\n                // For backword compatibility.\n                window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation;\n            }\n            if (!window.WEB_SOCKET_SWF_LOCATION) {\n                console.error(\"[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf\");\n                return;\n            }\n            var container = document.createElement(\"div\");\n            container.id = \"webSocketContainer\";\n            // Hides Flash box. We cannot use display: none or visibility: hidden because it prevents\n            // Flash from loading at least in IE. So we move it out of the screen at (-100, -100).\n            // But this even doesn't work with Flash Lite (e.g. in Droid Incredible). So with Flash\n            // Lite, we put it at (0, 0). This shows 1x1 box visible at left-top corner but this is\n            // the best we can do as far as we know now.\n            container.style.position = \"absolute\";\n            if (WebSocket.__isFlashLite()) {\n                container.style.left = \"0px\";\n                container.style.top = \"0px\";\n            }\n            else {\n                container.style.left = \"-100px\";\n                container.style.top = \"-100px\";\n            }\n            var holder = document.createElement(\"div\");\n            holder.id = \"webSocketFlash\";\n            container.appendChild(holder);\n            document.body.appendChild(container);\n            // See this article for hasPriority:\n            // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\n            swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION, \"webSocketFlash\", \"1\" /* width */, \"1\" /* height */, \"10.0.0\" /* SWF version */, null, null, { hasPriority: true, swliveconnect: true, allowScriptAccess: \"always\" }, null, function (e) {\n                if (!e.success) {\n                    console.error(\"[WebSocket] swfobject.embedSWF failed\");\n                }\n            });\n        };\n        /**\n         * Called by Flash to notify JS that it's fully loaded and ready\n         * for communication.\n         */\n        WebSocket.__onFlashInitialized = function () {\n            // We need to set a timeout here to avoid round-trip calls\n            // to flash during the initialization process.\n            setTimeout(function () {\n                WebSocket.__flash = document.getElementById(\"webSocketFlash\");\n                WebSocket.__flash.setCallerUrl(location.href);\n                WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);\n                for (var i = 0; i < WebSocket.__tasks.length; ++i) {\n                    WebSocket.__tasks[i]();\n                }\n                WebSocket.__tasks = [];\n            }, 0);\n        };\n        /**\n         * Called by Flash to notify WebSockets events are fired.\n         */\n        WebSocket.__onFlashEvent = function () {\n            setTimeout(function () {\n                try {\n                    // Gets events using receiveEvents() instead of getting it from event object\n                    // of Flash event. This is to make sure to keep message order.\n                    // It seems sometimes Flash events don't arrive in the same order as they are sent.\n                    var events = WebSocket.__flash.receiveEvents();\n                    for (var i = 0; i < events.length; ++i) {\n                        WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i]);\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }, 0);\n            return true;\n        };\n        // Called by Flash.\n        WebSocket.__log = function (message) {\n            console.log(decodeURIComponent(message));\n        };\n        // Called by Flash.\n        WebSocket.__error = function (message) {\n            console.error(decodeURIComponent(message));\n        };\n        WebSocket.__addTask = function (task) {\n            if (WebSocket.__flash) {\n                task();\n            }\n            else {\n                WebSocket.__tasks.push(task);\n            }\n        };\n        /**\n         * Test if the browser is running flash lite.\n         * @return {boolean} True if flash lite is running, false otherwise.\n         */\n        WebSocket.__isFlashLite = function () {\n            if (!window.navigator || !window.navigator.mimeTypes) {\n                return false;\n            }\n            var mimeType = window.navigator.mimeTypes[\"application/x-shockwave-flash\"];\n            if (!mimeType || !mimeType.enabledPlugin || !mimeType.enabledPlugin.filename) {\n                return false;\n            }\n            return mimeType.enabledPlugin.filename.match(/flashlite/i) ? true : false;\n        };\n        if (!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION) {\n            if (window.addEventListener) {\n                window.addEventListener(\"load\", function () {\n                    WebSocket.__initialize();\n                }, false);\n            }\n            else {\n                window.attachEvent(\"onload\", function () {\n                    WebSocket.__initialize();\n                });\n            }\n        }\n    })();\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         *\n         * @api public\n         */\n        exports.XHR = XHR;\n        /**\n         * XHR constructor\n         *\n         * @costructor\n         * @api public\n         */\n        function XHR(socket) {\n            if (!socket)\n                return;\n            io.Transport.apply(this, arguments);\n            this.sendBuffer = [];\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(XHR, io.Transport);\n        /**\n         * Establish a connection\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.open = function () {\n            this.socket.setBuffer(false);\n            this.onOpen();\n            this.get();\n            // we need to make sure the request succeeds since we have no indication\n            // whether the request opened or not until it succeeded.\n            this.setCloseTimeout();\n            return this;\n        };\n        /**\n         * Check if we need to send data to the Socket.IO server, if we have data in our\n         * buffer we encode it and forward it to the `post` method.\n         *\n         * @api private\n         */\n        XHR.prototype.payload = function (payload) {\n            var msgs = [];\n            for (var i = 0, l = payload.length; i < l; i++) {\n                msgs.push(io.parser.encodePacket(payload[i]));\n            }\n            this.send(io.parser.encodePayload(msgs));\n        };\n        /**\n         * Send data to the Socket.IO server.\n         *\n         * @param data The message\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.send = function (data) {\n            this.post(data);\n            return this;\n        };\n        /**\n         * Posts a encoded message to the Socket.IO server.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHR.prototype.post = function (data) {\n            var self = this;\n            this.socket.setBuffer(true);\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    self.posting = false;\n                    if (this.status == 200) {\n                        self.socket.setBuffer(false);\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            function onload() {\n                this.onload = empty;\n                self.socket.setBuffer(false);\n            }\n            ;\n            this.sendXHR = this.request('POST');\n            if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {\n                this.sendXHR.onload = this.sendXHR.onerror = onload;\n            }\n            else {\n                this.sendXHR.onreadystatechange = stateChange;\n            }\n            this.sendXHR.send(data);\n        };\n        /**\n         * Disconnects the established `XHR` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.close = function () {\n            this.onClose();\n            return this;\n        };\n        /**\n         * Generates a configured XHR request\n         *\n         * @param {String} url The url that needs to be requested.\n         * @param {String} method The method the request should use.\n         * @returns {XMLHttpRequest}\n         * @api private\n         */\n        XHR.prototype.request = function (method) {\n            var req = io.util.request(this.socket.isXDomain()), query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            req.open(method || 'GET', this.prepareUrl() + query, true);\n            if (method == 'POST') {\n                try {\n                    if (req.setRequestHeader) {\n                        req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n                    }\n                    else {\n                        // XDomainRequest\n                        req.contentType = 'text/plain';\n                    }\n                }\n                catch (e) { }\n            }\n            return req;\n        };\n        /**\n         * Returns the scheme to use for the transport URLs.\n         *\n         * @api private\n         */\n        XHR.prototype.scheme = function () {\n            return this.socket.options.secure ? 'https' : 'http';\n        };\n        /**\n         * Check if the XHR transports are supported\n         *\n         * @param {Boolean} xdomain Check if we support cross domain requests.\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.check = function (socket, xdomain) {\n            try {\n                var request = io.util.request(xdomain), usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest), socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'), isXProtocol = (global.location && socketProtocol != global.location.protocol);\n                if (request && !(usesXDomReq && isXProtocol)) {\n                    return true;\n                }\n            }\n            catch (e) { }\n            return false;\n        };\n        /**\n         * Check if the XHR transport supports cross domain requests.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.xdomainCheck = function (socket) {\n            return XHR.check(socket, true);\n        };\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.htmlfile = HTMLFile;\n        /**\n         * The HTMLFile transport creates a `forever iframe` based transport\n         * for Internet Explorer. Regular forever iframe implementations will\n         * continuously trigger the browsers buzy indicators. If the forever iframe\n         * is created inside a `htmlfile` these indicators will not be trigged.\n         *\n         * @constructor\n         * @extends {io.Transport.XHR}\n         * @api public\n         */\n        function HTMLFile(socket) {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(HTMLFile, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        HTMLFile.prototype.name = 'htmlfile';\n        /**\n         * Creates a new Ac...eX `htmlfile` with a forever loading iframe\n         * that can be used to listen to messages. Inside the generated\n         * `htmlfile` a reference will be made to the HTMLFile transport.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.get = function () {\n            this.doc = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n            this.doc.open();\n            this.doc.write('<html></html>');\n            this.doc.close();\n            this.doc.parentWindow.s = this;\n            var iframeC = this.doc.createElement('div');\n            iframeC.className = 'socketio';\n            this.doc.body.appendChild(iframeC);\n            this.iframe = this.doc.createElement('iframe');\n            iframeC.appendChild(this.iframe);\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            this.iframe.src = this.prepareUrl() + query;\n            io.util.on(window, 'unload', function () {\n                self.destroy();\n            });\n        };\n        /**\n         * The Socket.IO server will write script tags inside the forever\n         * iframe, this function will be used as callback for the incoming\n         * information.\n         *\n         * @param {String} data The message\n         * @param {document} doc Reference to the context\n         * @api private\n         */\n        HTMLFile.prototype._ = function (data, doc) {\n            // unescape all forward slashes. see GH-1251\n            data = data.replace(/\\\\\\//g, '/');\n            this.onData(data);\n            try {\n                var script = doc.getElementsByTagName('script')[0];\n                script.parentNode.removeChild(script);\n            }\n            catch (e) { }\n        };\n        /**\n         * Destroy the established connection, iframe and `htmlfile`.\n         * And calls the `CollectGarbage` function of Internet Explorer\n         * to release the memory.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.destroy = function () {\n            if (this.iframe) {\n                try {\n                    this.iframe.src = 'about:blank';\n                }\n                catch (e) { }\n                this.doc = null;\n                this.iframe.parentNode.removeChild(this.iframe);\n                this.iframe = null;\n                CollectGarbage();\n            }\n        };\n        /**\n         * Disconnects the established connection.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        HTMLFile.prototype.close = function () {\n            this.destroy();\n            return io.Transport.XHR.prototype.close.call(this);\n        };\n        /**\n         * Checks if the browser supports this transport. The browser\n         * must have an `Ac...eXObject` implementation.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        HTMLFile.check = function (socket) {\n            if (typeof window != \"undefined\" && (['Active'].concat('Object').join('X')) in window) {\n                try {\n                    var a = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n                    return a && io.Transport.XHR.check(socket);\n                }\n                catch (e) { }\n            }\n            return false;\n        };\n        /**\n         * Check if cross domain requests are supported.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        HTMLFile.xdomainCheck = function () {\n            // we can probably do handling for sub-domains, we should\n            // test that it's cross domain but a subdomain here\n            return false;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('htmlfile');\n    })(io.Transport, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports['xhr-polling'] = XHRPolling;\n        /**\n         * The XHR-polling transport uses long polling XHR requests to create a\n         * \"persistent\" connection with the server.\n         *\n         * @constructor\n         * @api public\n         */\n        function XHRPolling() {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(XHRPolling, io.Transport.XHR);\n        /**\n         * Merge the properties from XHR transport\n         */\n        io.util.merge(XHRPolling, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        XHRPolling.prototype.name = 'xhr-polling';\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        XHRPolling.prototype.heartbeats = function () {\n            return false;\n        };\n        /**\n         * Establish a connection, for iPhone and Android this will be done once the page\n         * is loaded.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        XHRPolling.prototype.open = function () {\n            var self = this;\n            io.Transport.XHR.prototype.open.call(self);\n            return false;\n        };\n        /**\n         * Starts a XHR request to wait for incoming messages.\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHRPolling.prototype.get = function () {\n            if (!this.isOpen)\n                return;\n            var self = this;\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    if (this.status == 200) {\n                        self.onData(this.responseText);\n                        self.get();\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            ;\n            function onload() {\n                this.onload = empty;\n                this.onerror = empty;\n                self.retryCounter = 1;\n                self.onData(this.responseText);\n                self.get();\n            }\n            ;\n            function onerror() {\n                self.retryCounter++;\n                if (!self.retryCounter || self.retryCounter > 3) {\n                    self.onClose();\n                }\n                else {\n                    self.get();\n                }\n            }\n            ;\n            this.xhr = this.request();\n            if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {\n                this.xhr.onload = onload;\n                this.xhr.onerror = onerror;\n            }\n            else {\n                this.xhr.onreadystatechange = stateChange;\n            }\n            this.xhr.send(null);\n        };\n        /**\n         * Handle the unclean close behavior.\n         *\n         * @api private\n         */\n        XHRPolling.prototype.onClose = function () {\n            io.Transport.XHR.prototype.onClose.call(this);\n            if (this.xhr) {\n                this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;\n                try {\n                    this.xhr.abort();\n                }\n                catch (e) { }\n                this.xhr = null;\n            }\n        };\n        /**\n         * Webkit based browsers show a infinit spinner when you start a XHR request\n         * before the browsers onload event is called so we need to defer opening of\n         * the transport until the onload event is called. Wrapping the cb in our\n         * defer method solve this.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        XHRPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            io.util.defer(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('xhr-polling');\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * There is a way to hide the loading indicator in Firefox. If you create and\n         * remove a iframe it will stop showing the current loading indicator.\n         * Unfortunately we can't feature detect that and UA sniffing is evil.\n         *\n         * @api private\n         */\n        var indicator = global.document && \"MozAppearance\" in\n            global.document.documentElement.style;\n        /**\n         * Expose constructor.\n         */\n        exports['jsonp-polling'] = JSONPPolling;\n        /**\n         * The JSONP transport creates an persistent connection by dynamically\n         * inserting a script tag in the page. This script tag will receive the\n         * information of the Socket.IO server. When new information is received\n         * it creates a new script tag for the new data stream.\n         *\n         * @constructor\n         * @extends {io.Transport.xhr-polling}\n         * @api public\n         */\n        function JSONPPolling(socket) {\n            io.Transport['xhr-polling'].apply(this, arguments);\n            this.index = io.j.length;\n            var self = this;\n            io.j.push(function (msg) {\n                self._(msg);\n            });\n        }\n        ;\n        /**\n         * Inherits from XHR polling transport.\n         */\n        io.util.inherit(JSONPPolling, io.Transport['xhr-polling']);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        JSONPPolling.prototype.name = 'jsonp-polling';\n        /**\n         * Posts a encoded message to the Socket.IO server using an iframe.\n         * The iframe is used because script tags can create POST based requests.\n         * The iframe is positioned outside of the view so the user does not\n         * notice it's existence.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        JSONPPolling.prototype.post = function (data) {\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (!this.form) {\n                var form = document.createElement('form'), area = document.createElement('textarea'), id = this.iframeId = 'socketio_iframe_' + this.index, iframe;\n                form.className = 'socketio';\n                form.style.position = 'absolute';\n                form.style.top = '0px';\n                form.style.left = '0px';\n                form.style.display = 'none';\n                form.target = id;\n                form.method = 'POST';\n                form.setAttribute('accept-charset', 'utf-8');\n                area.name = 'd';\n                form.appendChild(area);\n                document.body.appendChild(form);\n                this.form = form;\n                this.area = area;\n            }\n            this.form.action = this.prepareUrl() + query;\n            function complete() {\n                initIframe();\n                self.socket.setBuffer(false);\n            }\n            ;\n            function initIframe() {\n                if (self.iframe) {\n                    self.form.removeChild(self.iframe);\n                }\n                try {\n                    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n                    iframe = document.createElement('<iframe name=\"' + self.iframeId + '\">');\n                }\n                catch (e) {\n                    iframe = document.createElement('iframe');\n                    iframe.name = self.iframeId;\n                }\n                iframe.id = self.iframeId;\n                self.form.appendChild(iframe);\n                self.iframe = iframe;\n            }\n            ;\n            initIframe();\n            // we temporarily stringify until we figure out how to prevent\n            // browsers from turning `\\n` into `\\r\\n` in form inputs\n            this.area.value = io.JSON.stringify(data);\n            try {\n                this.form.submit();\n            }\n            catch (e) { }\n            if (this.iframe.attachEvent) {\n                iframe.onreadystatechange = function () {\n                    if (self.iframe.readyState == 'complete') {\n                        complete();\n                    }\n                };\n            }\n            else {\n                this.iframe.onload = complete;\n            }\n            this.socket.setBuffer(true);\n        };\n        /**\n         * Creates a new JSONP poll that can be used to listen\n         * for messages from the Socket.IO server.\n         *\n         * @api private\n         */\n        JSONPPolling.prototype.get = function () {\n            var self = this, script = document.createElement('script'), query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (this.script) {\n                this.script.parentNode.removeChild(this.script);\n                this.script = null;\n            }\n            script.async = true;\n            script.src = this.prepareUrl() + query;\n            script.onerror = function () {\n                self.onClose();\n            };\n            var insertAt = document.getElementsByTagName('script')[0];\n            insertAt.parentNode.insertBefore(script, insertAt);\n            this.script = script;\n            if (indicator) {\n                setTimeout(function () {\n                    var iframe = document.createElement('iframe');\n                    document.body.appendChild(iframe);\n                    document.body.removeChild(iframe);\n                }, 100);\n            }\n        };\n        /**\n         * Callback function for the incoming message stream from the Socket.IO server.\n         *\n         * @param {String} data The message\n         * @api private\n         */\n        JSONPPolling.prototype._ = function (msg) {\n            this.onData(msg);\n            if (this.isOpen) {\n                this.get();\n            }\n            return this;\n        };\n        /**\n         * The indicator hack only works after onload\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        JSONPPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            if (!indicator)\n                return fn.call(this);\n            io.util.load(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Checks if browser supports this transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        JSONPPolling.check = function () {\n            return 'document' in global;\n        };\n        /**\n         * Check if cross domain requests are supported\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        JSONPPolling.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('jsonp-polling');\n    })(io.Transport, io, self);\n    if (typeof define === \"function\" && define.amd) {\n        define([], function () { return io; });\n    }\n})();\n\n",
+        "/*! Socket.IO.js build:0.9.17, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */\n// export var io = {};\n// var io = {};\nvar io = ('undefined' === typeof module ? {} : module.exports);\n\n(function () {\n    var self = this;\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * IO namespace.\n         *\n         * @namespace\n         */\n        var io = exports;\n        /**\n         * Socket.IO version\n         *\n         * @api public\n         */\n        io.version = '0.9.17';\n        /**\n         * Protocol implemented.\n         *\n         * @api public\n         */\n        io.protocol = 1;\n        /**\n         * Available transports, these will be populated with the available transports\n         *\n         * @api public\n         */\n        io.transports = [];\n        /**\n         * Keep track of jsonp callbacks.\n         *\n         * @api private\n         */\n        io.j = [];\n        /**\n         * Keep track of our io.Sockets\n         *\n         * @api private\n         */\n        io.sockets = {};\n        /**\n         * Manages connections to hosts.\n         *\n         * @param {String} uri\n         * @Param {Boolean} force creation of new socket (defaults to false)\n         * @api public\n         */\n        io.connect = function (host, details) {\n            var uri = io.util.parseUri(host), uuri, socket;\n            // Force http (not secure) connection\n            uri.protocol = 'http';\n            if (global && global.location) {\n                uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);\n                uri.host = uri.host || (global.document\n                    ? global.document.domain : global.location.hostname);\n                uri.port = uri.port || global.location.port;\n            }\n            uuri = io.util.uniqueUri(uri);\n            var options = {\n                host: uri.host,\n                secure: 'https' == uri.protocol,\n                port: uri.port || ('https' == uri.protocol ? 443 : 80),\n                query: uri.query || ''\n            };\n            io.util.merge(options, details);\n            if (options['force new connection'] || !io.sockets[uuri]) {\n                socket = new io.Socket(options);\n            }\n            if (!options['force new connection'] && socket) {\n                io.sockets[uuri] = socket;\n            }\n            socket = socket || io.sockets[uuri];\n            // if path is different from '' or /\n            return socket.of(uri.path.length > 1 ? uri.path : '');\n        };\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, global) {\n        /**\n         * Utilities namespace.\n         *\n         * @namespace\n         */\n        var util = exports.util = {};\n        /**\n         * Parses an URI\n         *\n         * @author Steven Levithan <stevenlevithan.com> (MIT license)\n         * @api public\n         */\n        var re = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n        var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',\n            'host', 'port', 'relative', 'path', 'directory', 'file', 'query',\n            'anchor'];\n        util.parseUri = function (str) {\n            var m = re.exec(str || ''), uri = {}, i = 14;\n            while (i--) {\n                uri[parts[i]] = m[i] || '';\n            }\n            return uri;\n        };\n        /**\n         * Produces a unique url that identifies a Socket.IO connection.\n         *\n         * @param {Object} uri\n         * @api public\n         */\n        util.uniqueUri = function (uri) {\n            var protocol = uri.protocol, host = uri.host, port = uri.port;\n            if ('document' in global) {\n                host = host || document.domain;\n                port = port || (protocol == 'https'\n                    && document.location.protocol !== 'https:' ? 443 : document.location.port);\n            }\n            else {\n                host = host || 'localhost';\n                if (!port && protocol == 'https') {\n                    port = 443;\n                }\n            }\n            return (protocol || 'http') + '://' + host + ':' + (port || 80);\n        };\n        /**\n         * Mergest 2 query strings in to once unique query string\n         *\n         * @param {String} base\n         * @param {String} addition\n         * @api public\n         */\n        util.query = function (base, addition) {\n            var query = util.chunkQuery(base || ''), components = [];\n            util.merge(query, util.chunkQuery(addition || ''));\n            for (var part in query) {\n                if (query.hasOwnProperty(part)) {\n                    components.push(part + '=' + query[part]);\n                }\n            }\n            return components.length ? '?' + components.join('&') : '';\n        };\n        /**\n         * Transforms a querystring in to an object\n         *\n         * @param {String} qs\n         * @api public\n         */\n        util.chunkQuery = function (qs) {\n            var query = {}, params = qs.split('&'), i = 0, l = params.length, kv;\n            for (; i < l; ++i) {\n                kv = params[i].split('=');\n                if (kv[0]) {\n                    query[kv[0]] = kv[1];\n                }\n            }\n            return query;\n        };\n        /**\n         * Executes the given function when the page is loaded.\n         *\n         *     io.util.load(function () { console.log('page loaded'); });\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        var pageLoaded = false;\n        util.load = function (fn) {\n            if ('document' in global && document.readyState === 'complete' || pageLoaded) {\n                return fn();\n            }\n            util.on(global, 'load', fn, false);\n        };\n        /**\n         * Adds an event.\n         *\n         * @api private\n         */\n        util.on = function (element, event, fn, capture) {\n            if (element.attachEvent) {\n                element.attachEvent('on' + event, fn);\n            }\n            else if (element.addEventListener) {\n                element.addEventListener(event, fn, capture);\n            }\n        };\n        /**\n         * Generates the correct `XMLHttpRequest` for regular and cross domain requests.\n         *\n         * @param {Boolean} [xdomain] Create a request that can be used cross domain.\n         * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.\n         * @api private\n         */\n        util.request = function (xdomain) {\n            if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {\n                return new XDomainRequest();\n            }\n            if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {\n                return new XMLHttpRequest();\n            }\n            if (!xdomain) {\n                try {\n                    return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');\n                }\n                catch (e) { }\n            }\n            return null;\n        };\n        /**\n         * XHR based transport constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        /**\n         * Change the internal pageLoaded value.\n         */\n        if ('undefined' != typeof window) {\n            util.load(function () {\n                pageLoaded = true;\n            });\n        }\n        /**\n         * Defers a function to ensure a spinner is not displayed by the browser\n         *\n         * @param {Function} fn\n         * @api public\n         */\n        util.defer = function (fn) {\n            if (!util.ua.webkit || 'undefined' != typeof importScripts) {\n                return fn();\n            }\n            util.load(function () {\n                setTimeout(fn, 100);\n            });\n        };\n        /**\n         * Merges two objects.\n         *\n         * @api public\n         */\n        util.merge = function merge(target, additional, deep, lastseen) {\n            var seen = lastseen || [], depth = typeof deep == 'undefined' ? 2 : deep, prop;\n            for (prop in additional) {\n                if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {\n                    if (typeof target[prop] !== 'object' || !depth) {\n                        target[prop] = additional[prop];\n                        seen.push(additional[prop]);\n                    }\n                    else {\n                        util.merge(target[prop], additional[prop], depth - 1, seen);\n                    }\n                }\n            }\n            return target;\n        };\n        /**\n         * Merges prototypes from objects\n         *\n         * @api public\n         */\n        util.mixin = function (ctor, ctor2) {\n            util.merge(ctor.prototype, ctor2.prototype);\n        };\n        /**\n         * Shortcut for prototypical and static inheritance.\n         *\n         * @api private\n         */\n        util.inherit = function (ctor, ctor2) {\n            function f() { }\n            ;\n            f.prototype = ctor2.prototype;\n            ctor.prototype = new f;\n        };\n        /**\n         * Checks if the given object is an Array.\n         *\n         *     io.util.isArray([]); // true\n         *     io.util.isArray({}); // false\n         *\n         * @param Object obj\n         * @api public\n         */\n        util.isArray = Array.isArray || function (obj) {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        };\n        /**\n         * Intersects values of two arrays into a third\n         *\n         * @api public\n         */\n        util.intersect = function (arr, arr2) {\n            var ret = [], longest = arr.length > arr2.length ? arr : arr2, shortest = arr.length > arr2.length ? arr2 : arr;\n            for (var i = 0, l = shortest.length; i < l; i++) {\n                if (~util.indexOf(longest, shortest[i]))\n                    ret.push(shortest[i]);\n            }\n            return ret;\n        };\n        /**\n         * Array indexOf compatibility.\n         *\n         * @see bit.ly/a5Dxa2\n         * @api public\n         */\n        util.indexOf = function (arr, o, i) {\n            for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0; i < j && arr[i] !== o; i++) { }\n            return j <= i ? -1 : i;\n        };\n        /**\n         * Converts enumerables to array.\n         *\n         * @api public\n         */\n        util.toArray = function (enu) {\n            var arr = [];\n            for (var i = 0, l = enu.length; i < l; i++)\n                arr.push(enu[i]);\n            return arr;\n        };\n        /**\n         * UA / engines detection namespace.\n         *\n         * @namespace\n         */\n        util.ua = {};\n        /**\n         * Whether the UA supports CORS for XHR.\n         *\n         * @api public\n         */\n        util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {\n            try {\n                var a = new XMLHttpRequest();\n            }\n            catch (e) {\n                return false;\n            }\n            return a.withCredentials != undefined;\n        })();\n        /**\n         * Detect webkit.\n         *\n         * @api public\n         */\n        util.ua.webkit = 'undefined' != typeof navigator\n            && /webkit/i.test(navigator.userAgent);\n        /**\n        * Detect iPad/iPhone/iPod.\n        *\n        * @api public\n        */\n        util.ua.iDevice = 'undefined' != typeof navigator\n            && /iPad|iPhone|iPod/i.test(navigator.userAgent);\n    })(io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.EventEmitter = EventEmitter;\n        /**\n         * Event emitter constructor.\n         *\n         * @api public.\n         */\n        function EventEmitter() { }\n        ;\n        /**\n         * Adds a listener\n         *\n         * @api public\n         */\n        EventEmitter.prototype.on = function (name, fn) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = fn;\n            }\n            else if (io.util.isArray(this.$events[name])) {\n                this.$events[name].push(fn);\n            }\n            else {\n                this.$events[name] = [this.$events[name], fn];\n            }\n            return this;\n        };\n        EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n        /**\n         * Adds a volatile listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.once = function (name, fn) {\n            var self = this;\n            function on() {\n                self.removeListener(name, on);\n                fn.apply(this, arguments);\n            }\n            ;\n            on.listener = fn;\n            this.on(name, on);\n            return this;\n        };\n        /**\n         * Removes a listener.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeListener = function (name, fn) {\n            if (this.$events && this.$events[name]) {\n                var list = this.$events[name];\n                if (io.util.isArray(list)) {\n                    var pos = -1;\n                    for (var i = 0, l = list.length; i < l; i++) {\n                        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n                            pos = i;\n                            break;\n                        }\n                    }\n                    if (pos < 0) {\n                        return this;\n                    }\n                    list.splice(pos, 1);\n                    if (!list.length) {\n                        delete this.$events[name];\n                    }\n                }\n                else if (list === fn || (list.listener && list.listener === fn)) {\n                    delete this.$events[name];\n                }\n            }\n            return this;\n        };\n        /**\n         * Removes all listeners for an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.removeAllListeners = function (name) {\n            if (name === undefined) {\n                this.$events = {};\n                return this;\n            }\n            if (this.$events && this.$events[name]) {\n                this.$events[name] = null;\n            }\n            return this;\n        };\n        /**\n         * Gets all listeners for a certain event.\n         *\n         * @api publci\n         */\n        EventEmitter.prototype.listeners = function (name) {\n            if (!this.$events) {\n                this.$events = {};\n            }\n            if (!this.$events[name]) {\n                this.$events[name] = [];\n            }\n            if (!io.util.isArray(this.$events[name])) {\n                this.$events[name] = [this.$events[name]];\n            }\n            return this.$events[name];\n        };\n        /**\n         * Emits an event.\n         *\n         * @api public\n         */\n        EventEmitter.prototype.emit = function (name) {\n            if (!this.$events) {\n                return false;\n            }\n            var handler = this.$events[name];\n            if (!handler) {\n                return false;\n            }\n            var args = Array.prototype.slice.call(arguments, 1);\n            if ('function' == typeof handler) {\n                handler.apply(this, args);\n            }\n            else if (io.util.isArray(handler)) {\n                var listeners = handler.slice();\n                for (var i = 0, l = listeners.length; i < l; i++) {\n                    listeners[i].apply(this, args);\n                }\n            }\n            else {\n                return false;\n            }\n            return true;\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    /**\n     * Based on JSON2 (http://www.JSON.org/js.html).\n     */\n    (function (exports, nativeJSON) {\n        \"use strict\";\n        // use native JSON if it's available\n        if (nativeJSON && nativeJSON.parse) {\n            return exports.JSON = {\n                parse: nativeJSON.parse,\n                stringify: nativeJSON.stringify\n            };\n        }\n        var JSON = exports.JSON = {};\n        function f(n) {\n            // Format integers to have at least two digits.\n            return n < 10 ? '0' + n : n;\n        }\n        function date(d, key) {\n            return isFinite(d.valueOf()) ?\n                d.getUTCFullYear() + '-' +\n                    f(d.getUTCMonth() + 1) + '-' +\n                    f(d.getUTCDate()) + 'T' +\n                    f(d.getUTCHours()) + ':' +\n                    f(d.getUTCMinutes()) + ':' +\n                    f(d.getUTCSeconds()) + 'Z' : null;\n        }\n        ;\n        var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g, gap, indent, meta = {\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"': '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        }, rep;\n        function quote(string) {\n            // If the string contains no control characters, no quote characters, and no\n            // backslash characters, then we can safely slap some quotes around it.\n            // Otherwise we must also replace the offending characters with safe escape\n            // sequences.\n            escapable.lastIndex = 0;\n            return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n                var c = meta[a];\n                return typeof c === 'string' ? c :\n                    '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + '\"' : '\"' + string + '\"';\n        }\n        function str(key, holder) {\n            // Produce a string from holder[key].\n            var i, // The loop counter.\n            k, // The member key.\n            v, // The member value.\n            length, mind = gap, partial, value = holder[key];\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value instanceof Date) {\n                value = date(key);\n            }\n            // If we were called with a replacer function, then call the replacer to\n            // obtain a replacement value.\n            if (typeof rep === 'function') {\n                value = rep.call(holder, key, value);\n            }\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n                    return String(value);\n                // If the type is 'object', we might be dealing with an object or an array or\n                // null.\n                case 'object':\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n                    // Is the value an array?\n                    if (Object.prototype.toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' : gap ?\n                            '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                            '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n                    // If the replacer is an array, use it to select the members to be stringified.\n                    if (rep && typeof rep === 'object') {\n                        length = rep.length;\n                        for (i = 0; i < length; i += 1) {\n                            if (typeof rep[i] === 'string') {\n                                k = rep[i];\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        // Otherwise, iterate through all of the keys in the object.\n                        for (k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                v = str(k, value);\n                                if (v) {\n                                    partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                                }\n                            }\n                        }\n                    }\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' : gap ?\n                        '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n                        '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        }\n        // If the JSON object does not yet have a stringify method, give it one.\n        JSON.stringify = function (value, replacer, space) {\n            // The stringify method takes a value and an optional replacer, and an optional\n            // space parameter, and returns a JSON text. The replacer can be a function\n            // that can replace values, or an array of strings that will select the keys.\n            // A default replacer method can be provided. Use of the space parameter can\n            // produce text that is more easily readable.\n            var i;\n            gap = '';\n            indent = '';\n            // If the space parameter is a number, make an indent string containing that\n            // many spaces.\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n                // If the space parameter is a string, it will be used as the indent string.\n            }\n            else if (typeof space === 'string') {\n                indent = space;\n            }\n            // If there is a replacer, it must be a function or an array.\n            // Otherwise, throw an error.\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                (typeof replacer !== 'object' ||\n                    typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n            // Make a fake root object containing our value under the key of ''.\n            // Return the result of stringifying the value.\n            return str('', { '': value });\n        };\n        // If the JSON object does not yet have a parse method, give it one.\n        JSON.parse = function (text, reviver) {\n            // The parse method takes a text and an optional reviver function, and returns\n            // a JavaScript value if the text is a valid JSON text.\n            var j;\n            function walk(holder, key) {\n                // The walk method is used to recursively walk the resulting structure so\n                // that modifications can be made.\n                var k, v, value = holder[key];\n                if (value && typeof value === 'object') {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            }\n                            else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n            // Parsing happens in four stages. In the first stage, we replace certain\n            // Unicode characters with escape sequences. JavaScript handles many characters\n            // incorrectly, either silently deleting them, or treating them as line endings.\n            text = String(text);\n            cx.lastIndex = 0;\n            if (cx.test(text)) {\n                text = text.replace(cx, function (a) {\n                    return '\\\\u' +\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n            // In the second stage, we run the text against regular expressions that look\n            // for non-JSON patterns. We are especially concerned with '()' and 'new'\n            // because they can cause invocation, and '=' because it can cause mutation.\n            // But just to be safe, we want to reject all unexpected forms.\n            // We split the second stage into 4 regexp operations in order to work around\n            // crippling inefficiencies in IE's and Safari's regexp engines. First we\n            // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n            // replace all simple value tokens with ']' characters. Third, we delete all\n            // open brackets that follow a colon or comma or that begin the text. Finally,\n            // we look to see that the remaining characters are only whitespace or ']' or\n            // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n            if (/^[\\],:{}\\s]*$/\n                .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n                // In the third stage we use the eval function to compile the text into a\n                // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n                // in JavaScript: it can begin a block or an object literal. We wrap the text\n                // in parens to eliminate the ambiguity.\n                j = eval('(' + text + ')');\n                // In the optional fourth stage, we recursively walk the new structure, passing\n                // each name/value pair to a reviver function for possible transformation.\n                return typeof reviver === 'function' ?\n                    walk({ '': j }, '') : j;\n            }\n            // If the text is not JSON parseable, then a SyntaxError is thrown.\n            throw new SyntaxError('JSON.parse');\n        };\n    })(io, typeof JSON !== 'undefined' ? JSON : undefined);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Parser namespace.\n         *\n         * @namespace\n         */\n        var parser = exports.parser = {};\n        /**\n         * Packet types.\n         */\n        var packets = parser.packets = [\n            'disconnect',\n            'connect',\n            'heartbeat',\n            'message',\n            'json',\n            'event',\n            'ack',\n            'error',\n            'noop'\n        ];\n        /**\n         * Errors reasons.\n         */\n        var reasons = parser.reasons = [\n            'transport not supported',\n            'client not handshaken',\n            'unauthorized'\n        ];\n        /**\n         * Errors advice.\n         */\n        var advice = parser.advice = [\n            'reconnect'\n        ];\n        /**\n         * Shortcuts.\n         */\n        var JSON = io.JSON, indexOf = io.util.indexOf;\n        /**\n         * Encodes a packet.\n         *\n         * @api private\n         */\n        parser.encodePacket = function (packet) {\n            var type = indexOf(packets, packet.type), id = packet.id || '', endpoint = packet.endpoint || '', ack = packet.ack, data = null;\n            switch (packet.type) {\n                case 'error':\n                    var reason = packet.reason ? indexOf(reasons, packet.reason) : '', adv = packet.advice ? indexOf(advice, packet.advice) : '';\n                    if (reason !== '' || adv !== '')\n                        data = reason + (adv !== '' ? ('+' + adv) : '');\n                    break;\n                case 'message':\n                    if (packet.data !== '')\n                        data = packet.data;\n                    break;\n                case 'event':\n                    var ev = { name: packet.name };\n                    if (packet.args && packet.args.length) {\n                        ev.args = packet.args;\n                    }\n                    data = JSON.stringify(ev);\n                    break;\n                case 'json':\n                    data = JSON.stringify(packet.data);\n                    break;\n                case 'connect':\n                    if (packet.qs)\n                        data = packet.qs;\n                    break;\n                case 'ack':\n                    data = packet.ackId\n                        + (packet.args && packet.args.length\n                            ? '+' + JSON.stringify(packet.args) : '');\n                    break;\n            }\n            // construct packet with required fragments\n            var encoded = [\n                type,\n                id + (ack == 'data' ? '+' : ''),\n                endpoint\n            ];\n            // data fragment is optional\n            if (data !== null && data !== undefined)\n                encoded.push(data);\n            return encoded.join(':');\n        };\n        /**\n         * Encodes multiple messages (payload).\n         *\n         * @param {Array} messages\n         * @api private\n         */\n        parser.encodePayload = function (packets) {\n            var decoded = '';\n            if (packets.length == 1)\n                return packets[0];\n            for (var i = 0, l = packets.length; i < l; i++) {\n                var packet = packets[i];\n                decoded += '\\ufffd' + packet.length + '\\ufffd' + packets[i];\n            }\n            return decoded;\n        };\n        /**\n         * Decodes a packet\n         *\n         * @api private\n         */\n        var regexp = /([^:]+):([0-9]+)?(\\+)?:([^:]+)?:?([\\s\\S]*)?/;\n        parser.decodePacket = function (data) {\n            var pieces = data.match(regexp);\n            if (!pieces)\n                return {};\n            var id = pieces[2] || '', data = pieces[5] || '', packet = {\n                type: packets[pieces[1]],\n                endpoint: pieces[4] || ''\n            };\n            // whether we need to acknowledge the packet\n            if (id) {\n                packet.id = id;\n                if (pieces[3])\n                    packet.ack = 'data';\n                else\n                    packet.ack = true;\n            }\n            // handle different packet types\n            switch (packet.type) {\n                case 'error':\n                    var pieces = data.split('+');\n                    packet.reason = reasons[pieces[0]] || '';\n                    packet.advice = advice[pieces[1]] || '';\n                    break;\n                case 'message':\n                    packet.data = data || '';\n                    break;\n                case 'event':\n                    try {\n                        var opts = JSON.parse(data);\n                        packet.name = opts.name;\n                        packet.args = opts.args;\n                    }\n                    catch (e) { }\n                    packet.args = packet.args || [];\n                    break;\n                case 'json':\n                    try {\n                        packet.data = JSON.parse(data);\n                    }\n                    catch (e) { }\n                    break;\n                case 'connect':\n                    packet.qs = data || '';\n                    break;\n                case 'ack':\n                    var pieces = data.match(/^([0-9]+)(\\+)?(.*)/);\n                    if (pieces) {\n                        packet.ackId = pieces[1];\n                        packet.args = [];\n                        if (pieces[3]) {\n                            try {\n                                packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];\n                            }\n                            catch (e) { }\n                        }\n                    }\n                    break;\n                case 'disconnect':\n                case 'heartbeat':\n                    break;\n            }\n            ;\n            return packet;\n        };\n        /**\n         * Decodes data payload. Detects multiple messages\n         *\n         * @return {Array} messages\n         * @api public\n         */\n        parser.decodePayload = function (data) {\n            // IE doesn't like data[i] for unicode chars, charAt works fine\n            if (data.charAt(0) == '\\ufffd') {\n                var ret = [];\n                for (var i = 1, length = ''; i < data.length; i++) {\n                    if (data.charAt(i) == '\\ufffd') {\n                        ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));\n                        i += Number(length) + 1;\n                        length = '';\n                    }\n                    else {\n                        length += data.charAt(i);\n                    }\n                }\n                return ret;\n            }\n            else {\n                return [parser.decodePacket(data)];\n            }\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.Transport = Transport;\n        /**\n         * This is the transport template for all supported transport methods.\n         *\n         * @constructor\n         * @api public\n         */\n        function Transport(socket, sessid) {\n            this.socket = socket;\n            this.sessid = sessid;\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Transport, io.EventEmitter);\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        Transport.prototype.heartbeats = function () {\n            return true;\n        };\n        /**\n         * Handles the response from the server. When a new response is received\n         * it will automatically update the timeout, decode the message and\n         * forwards the response to the onMessage function for further processing.\n         *\n         * @param {String} data Response from the server.\n         * @api private\n         */\n        Transport.prototype.onData = function (data) {\n            this.clearCloseTimeout();\n            // If the connection in currently open (or in a reopening state) reset the close\n            // timeout since we have just received data. This check is necessary so\n            // that we don't reset the timeout on an explicitly disconnected connection.\n            if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {\n                this.setCloseTimeout();\n            }\n            if (data !== '') {\n                // todo: we should only do decodePayload for xhr transports\n                var msgs = io.parser.decodePayload(data);\n                if (msgs && msgs.length) {\n                    for (var i = 0, l = msgs.length; i < l; i++) {\n                        this.onPacket(msgs[i]);\n                    }\n                }\n            }\n            return this;\n        };\n        /**\n         * Handles packets.\n         *\n         * @api private\n         */\n        Transport.prototype.onPacket = function (packet) {\n            this.socket.setHeartbeatTimeout();\n            if (packet.type == 'heartbeat') {\n                return this.onHeartbeat();\n            }\n            if (packet.type == 'connect' && packet.endpoint == '') {\n                this.onConnect();\n            }\n            if (packet.type == 'error' && packet.advice == 'reconnect') {\n                this.isOpen = false;\n            }\n            this.socket.onPacket(packet);\n            return this;\n        };\n        /**\n         * Sets close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.setCloseTimeout = function () {\n            if (!this.closeTimeout) {\n                var self = this;\n                this.closeTimeout = setTimeout(function () {\n                    self.onDisconnect();\n                }, this.socket.closeTimeout);\n            }\n        };\n        /**\n         * Called when transport disconnects.\n         *\n         * @api private\n         */\n        Transport.prototype.onDisconnect = function () {\n            if (this.isOpen)\n                this.close();\n            this.clearTimeouts();\n            this.socket.onDisconnect();\n            return this;\n        };\n        /**\n         * Called when transport connects\n         *\n         * @api private\n         */\n        Transport.prototype.onConnect = function () {\n            this.socket.onConnect();\n            return this;\n        };\n        /**\n         * Clears close timeout\n         *\n         * @api private\n         */\n        Transport.prototype.clearCloseTimeout = function () {\n            if (this.closeTimeout) {\n                clearTimeout(this.closeTimeout);\n                this.closeTimeout = null;\n            }\n        };\n        /**\n         * Clear timeouts\n         *\n         * @api private\n         */\n        Transport.prototype.clearTimeouts = function () {\n            this.clearCloseTimeout();\n            if (this.reopenTimeout) {\n                clearTimeout(this.reopenTimeout);\n            }\n        };\n        /**\n         * Sends a packet\n         *\n         * @param {Object} packet object.\n         * @api private\n         */\n        Transport.prototype.packet = function (packet) {\n            this.send(io.parser.encodePacket(packet));\n        };\n        /**\n         * Send the received heartbeat message back to server. So the server\n         * knows we are still connected.\n         *\n         * @param {String} heartbeat Heartbeat response from the server.\n         * @api private\n         */\n        Transport.prototype.onHeartbeat = function (heartbeat) {\n            this.packet({ type: 'heartbeat' });\n        };\n        /**\n         * Called when the transport opens.\n         *\n         * @api private\n         */\n        Transport.prototype.onOpen = function () {\n            this.isOpen = true;\n            this.clearCloseTimeout();\n            this.socket.onOpen();\n        };\n        /**\n         * Notifies the base when the connection with the Socket.IO server\n         * has been disconnected.\n         *\n         * @api private\n         */\n        Transport.prototype.onClose = function () {\n            var self = this;\n            /* FIXME: reopen delay causing an infinity loop\n            this.reopenTimeout = setTimeout(function () {\n              self.open();\n            }, this.socket.options['reopen delay']);*/\n            this.isOpen = false;\n            this.socket.onClose();\n            this.onDisconnect();\n        };\n        /**\n         * Generates a connection url based on the Socket.IO URL Protocol.\n         * See <https://github.com/learnboost/socket.io-node/> for more details.\n         *\n         * @returns {String} Connection url\n         * @api private\n         */\n        Transport.prototype.prepareUrl = function () {\n            var options = this.socket.options;\n            return this.scheme() + '://'\n                + options.host + ':' + options.port + '/'\n                + options.resource + '/' + io.protocol\n                + '/' + this.name + '/' + this.sessid;\n        };\n        /**\n         * Checks if the transport is ready to start a connection.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Transport.prototype.ready = function (socket, fn) {\n            fn.call(this);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.Socket = Socket;\n        /**\n         * Create a new `Socket.IO client` which can establish a persistent\n         * connection with a Socket.IO enabled server.\n         *\n         * @api public\n         */\n        function Socket(options) {\n            this.options = {\n                port: 80,\n                secure: false,\n                document: 'document' in global ? document : false,\n                resource: 'socket.io',\n                transports: io.transports,\n                'connect timeout': 10000,\n                'try multiple transports': true,\n                'reconnect': true,\n                'reconnection delay': 500,\n                'reconnection limit': Infinity,\n                'reopen delay': 3000,\n                'max reconnection attempts': 10,\n                'sync disconnect on unload': false,\n                'auto connect': true,\n                'flash policy port': 10843,\n                'manualFlush': false\n            };\n            io.util.merge(this.options, options);\n            this.connected = false;\n            this.open = false;\n            this.connecting = false;\n            this.reconnecting = false;\n            this.namespaces = {};\n            this.buffer = [];\n            this.doBuffer = false;\n            if (this.options['sync disconnect on unload'] &&\n                (!this.isXDomain() || io.util.ua.hasCORS)) {\n                var self = this;\n                io.util.on(global, 'beforeunload', function () {\n                    self.disconnectSync();\n                }, false);\n            }\n            if (this.options['auto connect']) {\n                this.connect();\n            }\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(Socket, io.EventEmitter);\n        /**\n         * Returns a namespace listener/emitter for this socket\n         *\n         * @api public\n         */\n        Socket.prototype.of = function (name) {\n            if (!this.namespaces[name]) {\n                this.namespaces[name] = new io.SocketNamespace(this, name);\n                if (name !== '') {\n                    this.namespaces[name].packet({ type: 'connect' });\n                }\n            }\n            return this.namespaces[name];\n        };\n        /**\n         * Emits the given event to the Socket and all namespaces\n         *\n         * @api private\n         */\n        Socket.prototype.publish = function () {\n            this.emit.apply(this, arguments);\n            var nsp;\n            for (var i in this.namespaces) {\n                if (this.namespaces.hasOwnProperty(i)) {\n                    nsp = this.of(i);\n                    nsp.$emit.apply(nsp, arguments);\n                }\n            }\n        };\n        /**\n         * Performs the handshake\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        Socket.prototype.handshake = function (fn) {\n            var self = this, options = this.options;\n            function complete(data) {\n                if (data instanceof Error) {\n                    self.connecting = false;\n                    self.onError(data.message);\n                }\n                else {\n                    fn.apply(null, data.split(':'));\n                }\n            }\n            ;\n            var url = [\n                'http' + (options.secure ? 's' : '') + ':/',\n                options.host + ':' + options.port,\n                options.resource,\n                io.protocol,\n                io.util.query(this.options.query, 't=' + +new Date)\n            ].join('/');\n            if (this.isXDomain() && !io.util.ua.hasCORS) {\n                var insertAt = document.getElementsByTagName('script')[0], script = document.createElement('script');\n                script.src = url + '&jsonp=' + io.j.length;\n                insertAt.parentNode.insertBefore(script, insertAt);\n                io.j.push(function (data) {\n                    complete(data);\n                    script.parentNode.removeChild(script);\n                });\n            }\n            else {\n                var xhr = io.util.request();\n                xhr.open('GET', url, true);\n                if (this.isXDomain()) {\n                    xhr.withCredentials = true;\n                }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        xhr.onreadystatechange = empty;\n                        if (xhr.status == 200) {\n                            complete(xhr.responseText);\n                        }\n                        else if (xhr.status == 403) {\n                            self.onError(xhr.responseText);\n                        }\n                        else {\n                            self.connecting = false;\n                            !self.reconnecting && self.onError(xhr.responseText);\n                        }\n                    }\n                };\n                xhr.send(null);\n            }\n        };\n        /**\n         * Find an available transport based on the options supplied in the constructor.\n         *\n         * @api private\n         */\n        Socket.prototype.getTransport = function (override) {\n            var transports = override || this.transports, match;\n            for (var i = 0, transport; transport = transports[i]; i++) {\n                if (io.Transport[transport]\n                    && io.Transport[transport].check(this)\n                    && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {\n                    return new io.Transport[transport](this, this.sessionid);\n                }\n            }\n            return null;\n        };\n        /**\n         * Connects to the server.\n         *\n         * @param {Function} [fn] Callback.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.connect = function (fn) {\n            if (this.connecting) {\n                return this;\n            }\n            var self = this;\n            self.connecting = true;\n            this.handshake(function (sid, heartbeat, close, transports) {\n                self.sessionid = sid;\n                self.closeTimeout = close * 1000;\n                self.heartbeatTimeout = heartbeat * 1000;\n                if (!self.transports)\n                    self.transports = self.origTransports = (transports ? io.util.intersect(transports.split(','), self.options.transports) : self.options.transports);\n                self.setHeartbeatTimeout();\n                function connect(transports) {\n                    if (self.transport)\n                        self.transport.clearTimeouts();\n                    self.transport = self.getTransport(transports);\n                    if (!self.transport)\n                        return self.publish('connect_failed');\n                    // once the transport is ready\n                    self.transport.ready(self, function () {\n                        self.connecting = true;\n                        self.publish('connecting', self.transport.name);\n                        self.transport.open();\n                        if (self.options['connect timeout']) {\n                            self.connectTimeoutTimer = setTimeout(function () {\n                                if (!self.connected) {\n                                    self.connecting = false;\n                                    if (self.options['try multiple transports']) {\n                                        var remaining = self.transports;\n                                        while (remaining.length > 0 && remaining.splice(0, 1)[0] !=\n                                            self.transport.name) { }\n                                        if (remaining.length) {\n                                            connect(remaining);\n                                        }\n                                        else {\n                                            self.publish('connect_failed');\n                                        }\n                                    }\n                                }\n                            }, self.options['connect timeout']);\n                        }\n                    });\n                }\n                connect(self.transports);\n                self.once('connect', function () {\n                    clearTimeout(self.connectTimeoutTimer);\n                    fn && typeof fn == 'function' && fn();\n                });\n            });\n            return this;\n        };\n        /**\n         * Clears and sets a new heartbeat timeout using the value given by the\n         * server during the handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.setHeartbeatTimeout = function () {\n            clearTimeout(this.heartbeatTimeoutTimer);\n            if (this.transport && !this.transport.heartbeats())\n                return;\n            var self = this;\n            this.heartbeatTimeoutTimer = setTimeout(function () {\n                self.transport.onClose();\n            }, this.heartbeatTimeout);\n        };\n        /**\n         * Sends a message.\n         *\n         * @param {Object} data packet.\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.packet = function (data) {\n            if (this.connected && !this.doBuffer) {\n                this.transport.packet(data);\n            }\n            else {\n                this.buffer.push(data);\n            }\n            return this;\n        };\n        /**\n         * Sets buffer state\n         *\n         * @api private\n         */\n        Socket.prototype.setBuffer = function (v) {\n            this.doBuffer = v;\n            if (!v && this.connected && this.buffer.length) {\n                if (!this.options['manualFlush']) {\n                    this.flushBuffer();\n                }\n            }\n        };\n        /**\n         * Flushes the buffer data over the wire.\n         * To be invoked manually when 'manualFlush' is set to true.\n         *\n         * @api public\n         */\n        Socket.prototype.flushBuffer = function () {\n            this.transport.payload(this.buffer);\n            this.buffer = [];\n        };\n        /**\n         * Disconnect the established connect.\n         *\n         * @returns {io.Socket}\n         * @api public\n         */\n        Socket.prototype.disconnect = function () {\n            if (this.connected || this.connecting) {\n                if (this.open) {\n                    this.of('').packet({ type: 'disconnect' });\n                }\n                // handle disconnection immediately\n                this.onDisconnect('booted');\n            }\n            return this;\n        };\n        /**\n         * Disconnects the socket with a sync XHR.\n         *\n         * @api private\n         */\n        Socket.prototype.disconnectSync = function () {\n            // ensure disconnection\n            var xhr = io.util.request();\n            var uri = [\n                'http' + (this.options.secure ? 's' : '') + ':/',\n                this.options.host + ':' + this.options.port,\n                this.options.resource,\n                io.protocol,\n                '',\n                this.sessionid\n            ].join('/') + '/?disconnect=1';\n            xhr.open('GET', uri, false);\n            xhr.send(null);\n            // handle disconnection immediately\n            this.onDisconnect('booted');\n        };\n        /**\n         * Check if we need to use cross domain enabled transports. Cross domain would\n         * be a different port or different domain name.\n         *\n         * @returns {Boolean}\n         * @api private\n         */\n        Socket.prototype.isXDomain = function () {\n            var port = global.location.port ||\n                ('https:' == global.location.protocol ? 443 : 80);\n            return this.options.host !== global.location.hostname\n                || this.options.port != port;\n        };\n        /**\n         * Called upon handshake.\n         *\n         * @api private\n         */\n        Socket.prototype.onConnect = function () {\n            if (!this.connected) {\n                this.connected = true;\n                this.connecting = false;\n                if (!this.doBuffer) {\n                    // make sure to flush the buffer\n                    this.setBuffer(false);\n                }\n                this.emit('connect');\n            }\n        };\n        /**\n         * Called when the transport opens\n         *\n         * @api private\n         */\n        Socket.prototype.onOpen = function () {\n            this.open = true;\n        };\n        /**\n         * Called when the transport closes.\n         *\n         * @api private\n         */\n        Socket.prototype.onClose = function () {\n            this.open = false;\n            clearTimeout(this.heartbeatTimeoutTimer);\n        };\n        /**\n         * Called when the transport first opens a connection\n         *\n         * @param text\n         */\n        Socket.prototype.onPacket = function (packet) {\n            this.of(packet.endpoint).onPacket(packet);\n        };\n        /**\n         * Handles an error.\n         *\n         * @api private\n         */\n        Socket.prototype.onError = function (err) {\n            if (err && err.advice) {\n                if (err.advice === 'reconnect' && (this.connected || this.connecting)) {\n                    this.disconnect();\n                    if (this.options.reconnect) {\n                        this.reconnect();\n                    }\n                }\n            }\n            this.publish('error', err && err.reason ? err.reason : err);\n        };\n        /**\n         * Called when the transport disconnects.\n         *\n         * @api private\n         */\n        Socket.prototype.onDisconnect = function (reason) {\n            var wasConnected = this.connected, wasConnecting = this.connecting;\n            this.connected = false;\n            this.connecting = false;\n            this.open = false;\n            if (wasConnected || wasConnecting) {\n                this.transport.close();\n                this.transport.clearTimeouts();\n                if (wasConnected) {\n                    this.publish('disconnect', reason);\n                    if ('booted' != reason && this.options.reconnect && !this.reconnecting) {\n                        this.reconnect();\n                    }\n                }\n            }\n        };\n        /**\n         * Called upon reconnection.\n         *\n         * @api private\n         */\n        Socket.prototype.reconnect = function () {\n            this.reconnecting = true;\n            this.reconnectionAttempts = 0;\n            this.reconnectionDelay = this.options['reconnection delay'];\n            var self = this, maxAttempts = this.options['max reconnection attempts'], tryMultiple = this.options['try multiple transports'], limit = this.options['reconnection limit'];\n            function reset() {\n                if (self.connected) {\n                    for (var i in self.namespaces) {\n                        if (self.namespaces.hasOwnProperty(i) && '' !== i) {\n                            self.namespaces[i].packet({ type: 'connect' });\n                        }\n                    }\n                    self.publish('reconnect', self.transport.name, self.reconnectionAttempts);\n                }\n                clearTimeout(self.reconnectionTimer);\n                self.removeListener('connect_failed', maybeReconnect);\n                self.removeListener('connect', maybeReconnect);\n                self.reconnecting = false;\n                delete self.reconnectionAttempts;\n                delete self.reconnectionDelay;\n                delete self.reconnectionTimer;\n                delete self.redoTransports;\n                self.options['try multiple transports'] = tryMultiple;\n            }\n            ;\n            function maybeReconnect() {\n                if (!self.reconnecting) {\n                    return;\n                }\n                if (self.connected) {\n                    return reset();\n                }\n                ;\n                if (self.connecting && self.reconnecting) {\n                    return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);\n                }\n                if (self.reconnectionAttempts++ >= maxAttempts) {\n                    if (!self.redoTransports) {\n                        self.on('connect_failed', maybeReconnect);\n                        self.options['try multiple transports'] = true;\n                        self.transports = self.origTransports;\n                        self.transport = self.getTransport();\n                        self.redoTransports = true;\n                        self.connect();\n                    }\n                    else {\n                        self.publish('reconnect_failed');\n                        reset();\n                    }\n                }\n                else {\n                    if (self.reconnectionDelay < limit) {\n                        self.reconnectionDelay *= 2; // exponential back off\n                    }\n                    self.connect();\n                    self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);\n                    self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);\n                }\n            }\n            ;\n            this.options['try multiple transports'] = false;\n            this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);\n            this.on('connect', maybeReconnect);\n        };\n    })(io, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.SocketNamespace = SocketNamespace;\n        /**\n         * Socket namespace constructor.\n         *\n         * @constructor\n         * @api public\n         */\n        function SocketNamespace(socket, name) {\n            this.socket = socket;\n            this.name = name || '';\n            this.flags = {};\n            this.json = new Flag(this, 'json');\n            this.ackPackets = 0;\n            this.acks = {};\n        }\n        ;\n        /**\n         * Apply EventEmitter mixin.\n         */\n        io.util.mixin(SocketNamespace, io.EventEmitter);\n        /**\n         * Copies emit since we override it\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\n        /**\n         * Creates a new namespace, by proxying the request to the socket. This\n         * allows us to use the synax as we do on the server.\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.of = function () {\n            return this.socket.of.apply(this.socket, arguments);\n        };\n        /**\n         * Sends a packet.\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.packet = function (packet) {\n            packet.endpoint = this.name;\n            this.socket.packet(packet);\n            this.flags = {};\n            return this;\n        };\n        /**\n         * Sends a message\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.send = function (data, fn) {\n            var packet = {\n                type: this.flags.json ? 'json' : 'message',\n                data: data\n            };\n            if ('function' == typeof fn) {\n                packet.id = ++this.ackPackets;\n                packet.ack = true;\n                this.acks[packet.id] = fn;\n            }\n            return this.packet(packet);\n        };\n        /**\n         * Emits an event\n         *\n         * @api public\n         */\n        SocketNamespace.prototype.emit = function (name) {\n            var args = Array.prototype.slice.call(arguments, 1), lastArg = args[args.length - 1], packet = {\n                type: 'event',\n                name: name\n            };\n            if ('function' == typeof lastArg) {\n                packet.id = ++this.ackPackets;\n                packet.ack = 'data';\n                this.acks[packet.id] = lastArg;\n                args = args.slice(0, args.length - 1);\n            }\n            packet.args = args;\n            return this.packet(packet);\n        };\n        /**\n         * Disconnects the namespace\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.disconnect = function () {\n            if (this.name === '') {\n                this.socket.disconnect();\n            }\n            else {\n                this.packet({ type: 'disconnect' });\n                this.$emit('disconnect');\n            }\n            return this;\n        };\n        /**\n         * Handles a packet\n         *\n         * @api private\n         */\n        SocketNamespace.prototype.onPacket = function (packet) {\n            var self = this;\n            function ack() {\n                self.packet({\n                    type: 'ack',\n                    args: io.util.toArray(arguments),\n                    ackId: packet.id\n                });\n            }\n            ;\n            switch (packet.type) {\n                case 'connect':\n                    this.$emit('connect');\n                    break;\n                case 'disconnect':\n                    if (this.name === '') {\n                        this.socket.onDisconnect(packet.reason || 'booted');\n                    }\n                    else {\n                        this.$emit('disconnect', packet.reason);\n                    }\n                    break;\n                case 'message':\n                case 'json':\n                    var params = ['message', packet.data];\n                    if (packet.ack == 'data') {\n                        params.push(ack);\n                    }\n                    else if (packet.ack) {\n                        this.packet({ type: 'ack', ackId: packet.id });\n                    }\n                    this.$emit.apply(this, params);\n                    break;\n                case 'event':\n                    var params = [packet.name].concat(packet.args);\n                    if (packet.ack == 'data')\n                        params.push(ack);\n                    this.$emit.apply(this, params);\n                    break;\n                case 'ack':\n                    if (this.acks[packet.ackId]) {\n                        this.acks[packet.ackId].apply(this, packet.args);\n                        delete this.acks[packet.ackId];\n                    }\n                    break;\n                case 'error':\n                    if (packet.advice) {\n                        this.socket.onError(packet);\n                    }\n                    else {\n                        if (packet.reason == 'unauthorized') {\n                            this.$emit('connect_failed', packet.reason);\n                        }\n                        else {\n                            this.$emit('error', packet.reason);\n                        }\n                    }\n                    break;\n            }\n        };\n        /**\n         * Flag interface.\n         *\n         * @api private\n         */\n        function Flag(nsp, name) {\n            this.namespace = nsp;\n            this.name = name;\n        }\n        ;\n        /**\n         * Send a message\n         *\n         * @api public\n         */\n        Flag.prototype.send = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.send.apply(this.namespace, arguments);\n        };\n        /**\n         * Emit an event\n         *\n         * @api public\n         */\n        Flag.prototype.emit = function () {\n            this.namespace.flags[this.name] = true;\n            this.namespace.emit.apply(this.namespace, arguments);\n        };\n    })(io, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports.websocket = WS;\n        /**\n         * The WebSocket transport uses the HTML5 WebSocket API to establish an\n         * persistent connection with the Socket.IO server. This transport will also\n         * be inherited by the FlashSocket fallback as it provides a API compatible\n         * polyfill for the WebSockets.\n         *\n         * @constructor\n         * @extends {io.Transport}\n         * @api public\n         */\n        function WS(socket) {\n            io.Transport.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(WS, io.Transport);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        WS.prototype.name = 'websocket';\n        /**\n         * Initializes a new `WebSocket` connection with the Socket.IO server. We attach\n         * all the appropriate listeners to handle the responses from the server.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.open = function () {\n            var query = io.util.query(this.socket.options.query), self = this, Socket;\n            if (!Socket) {\n                Socket = global.MozWebSocket || global.WebSocket;\n            }\n            this.websocket = new Socket(this.prepareUrl() + query);\n            this.websocket.onopen = function () {\n                self.onOpen();\n                self.socket.setBuffer(false);\n            };\n            this.websocket.onmessage = function (ev) {\n                self.onData(ev.data);\n            };\n            this.websocket.onclose = function () {\n                self.onClose();\n                self.socket.setBuffer(true);\n            };\n            this.websocket.onerror = function (e) {\n                self.onError(e);\n            };\n            return this;\n        };\n        /**\n         * Send a message to the Socket.IO server. The message will automatically be\n         * encoded in the correct message format.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        // Do to a bug in the current IDevices browser, we need to wrap the send in a\n        // setTimeout, when they resume from sleeping the browser will crash if\n        // we don't allow the browser time to detect the socket has been closed\n        if (io.util.ua.iDevice) {\n            WS.prototype.send = function (data) {\n                var self = this;\n                setTimeout(function () {\n                    self.websocket.send(data);\n                }, 0);\n                return this;\n            };\n        }\n        else {\n            WS.prototype.send = function (data) {\n                this.websocket.send(data);\n                return this;\n            };\n        }\n        /**\n         * Payload\n         *\n         * @api private\n         */\n        WS.prototype.payload = function (arr) {\n            for (var i = 0, l = arr.length; i < l; i++) {\n                this.packet(arr[i]);\n            }\n            return this;\n        };\n        /**\n         * Disconnect the established `WebSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        WS.prototype.close = function () {\n            this.websocket.close();\n            return this;\n        };\n        /**\n         * Handle the errors that `WebSocket` might be giving when we\n         * are attempting to connect or send messages.\n         *\n         * @param {Error} e The error.\n         * @api private\n         */\n        WS.prototype.onError = function (e) {\n            this.socket.onError(e);\n        };\n        /**\n         * Returns the appropriate scheme for the URI generation.\n         *\n         * @api private\n         */\n        WS.prototype.scheme = function () {\n            return this.socket.options.secure ? 'wss' : 'ws';\n        };\n        /**\n         * Checks if the browser has support for native `WebSockets` and that\n         * it's not the polyfill created for the FlashSocket transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        WS.check = function () {\n            return ('WebSocket' in global && !('__addTask' in WebSocket))\n                || 'MozWebSocket' in global;\n        };\n        /**\n         * Check if the `WebSocket` transport support cross domain communications.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        WS.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('websocket');\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.flashsocket = Flashsocket;\n        /**\n         * The FlashSocket transport. This is a API wrapper for the HTML5 WebSocket\n         * specification. It uses a .swf file to communicate with the server. If you want\n         * to serve the .swf file from a other server than where the Socket.IO script is\n         * coming from you need to use the insecure version of the .swf. More information\n         * about this can be found on the github page.\n         *\n         * @constructor\n         * @extends {io.Transport.websocket}\n         * @api public\n         */\n        function Flashsocket() {\n            io.Transport.websocket.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(Flashsocket, io.Transport.websocket);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        Flashsocket.prototype.name = 'flashsocket';\n        /**\n         * Disconnect the established `FlashSocket` connection. This is done by adding a\n         * new task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.open = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.open.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Sends a message to the Socket.IO server. This is done by adding a new\n         * task to the FlashSocket. The rest will be handled off by the `WebSocket`\n         * transport.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.send = function () {\n            var self = this, args = arguments;\n            WebSocket.__addTask(function () {\n                io.Transport.websocket.prototype.send.apply(self, args);\n            });\n            return this;\n        };\n        /**\n         * Disconnects the established `FlashSocket` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        Flashsocket.prototype.close = function () {\n            WebSocket.__tasks.length = 0;\n            io.Transport.websocket.prototype.close.call(this);\n            return this;\n        };\n        /**\n         * The WebSocket fall back needs to append the flash container to the body\n         * element, so we need to make sure we have access to it. Or defer the call\n         * until we are sure there is a body element.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        Flashsocket.prototype.ready = function (socket, fn) {\n            function init() {\n                var options = socket.options, port = options['flash policy port'], path = [\n                    'http' + (options.secure ? 's' : '') + ':/',\n                    options.host + ':' + options.port,\n                    options.resource,\n                    'static/flashsocket',\n                    'WebSocketMain' + (socket.isXDomain() ? 'Insecure' : '') + '.swf'\n                ];\n                // Only start downloading the swf file when the checked that this browser\n                // actually supports it\n                if (!Flashsocket.loaded) {\n                    if (typeof WEB_SOCKET_SWF_LOCATION === 'undefined') {\n                        // Set the correct file based on the XDomain settings\n                        WEB_SOCKET_SWF_LOCATION = path.join('/');\n                    }\n                    if (port !== 843) {\n                        WebSocket.loadFlashPolicyFile('xmlsocket://' + options.host + ':' + port);\n                    }\n                    WebSocket.__initialize();\n                    Flashsocket.loaded = true;\n                }\n                fn.call(self);\n            }\n            var self = this;\n            if (document.body)\n                return init();\n            io.util.load(init);\n        };\n        /**\n         * Check if the FlashSocket transport is supported as it requires that the Adobe\n         * Flash Player plug-in version `10.0.0` or greater is installed. And also check if\n         * the polyfill is correctly loaded.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.check = function () {\n            if (typeof WebSocket == 'undefined'\n                || !('__initialize' in WebSocket) || !swfobject)\n                return false;\n            return swfobject.getFlashPlayerVersion().major >= 10;\n        };\n        /**\n         * Check if the FlashSocket transport can be used as cross domain / cross origin\n         * transport. Because we can't see which type (secure or insecure) of .swf is used\n         * we will just return true.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        Flashsocket.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Disable AUTO_INITIALIZATION\n         */\n        if (typeof window != 'undefined') {\n            // NB: this in \"window\" scope, but doing so actually breaks it.\n            //WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = true;\n        }\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        //io.transports.push('flashsocket');\n    })(io.Transport, io);\n    /*\tSWFObject v2.2 <http://code.google.com/p/swfobject/>\n        is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>\n    */\n    if ('undefined' != typeof window) {\n        var swfobject = function () { var D = \"undefined\", r = \"object\", S = \"Shockwave Flash\", W = \"ShockwaveFlash.ShockwaveFlash\", q = \"application/x-shockwave-flash\", R = \"SWFObjectExprInst\", x = \"onreadystatechange\", O = window, j = document, t = navigator, T = false, U = [h], o = [], N = [], I = [], l, Q, E, B, J = false, a = false, n, G, m = true, M = function () { var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D, ah = t.userAgent.toLowerCase(), Y = t.platform.toLowerCase(), ae = Y ? /win/.test(Y) : /win/.test(ah), ac = Y ? /mac/.test(Y) : /mac/.test(ah), af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/, \"$1\")) : false, X = !+\"\\v1\", ag = [0, 0, 0], ab = null; if (typeof t.plugins != D && typeof t.plugins[S] == r) {\n            ab = t.plugins[S].description;\n            if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {\n                T = true;\n                X = false;\n                ab = ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/, \"$1\");\n                ag[0] = parseInt(ab.replace(/^(.*)\\..*$/, \"$1\"), 10);\n                ag[1] = parseInt(ab.replace(/^.*\\.(.*)\\s.*$/, \"$1\"), 10);\n                ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, \"$1\"), 10) : 0;\n            }\n        }\n        else {\n            if (typeof O[(['Active'].concat('Object').join('X'))] != D) {\n                try {\n                    var ad = new window[(['Active'].concat('Object').join('X'))](W);\n                    if (ad) {\n                        ab = ad.GetVariable(\"$version\");\n                        if (ab) {\n                            X = true;\n                            ab = ab.split(\" \")[1].split(\",\");\n                            ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                        }\n                    }\n                }\n                catch (Z) { }\n            }\n        } return { w3: aa, pv: ag, wk: af, ie: X, win: ae, mac: ac }; }(), k = function () { if (!M.w3) {\n            return;\n        } if ((typeof j.readyState != D && j.readyState == \"complete\") || (typeof j.readyState == D && (j.getElementsByTagName(\"body\")[0] || j.body))) {\n            f();\n        } if (!J) {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"DOMContentLoaded\", f, false);\n            }\n            if (M.ie && M.win) {\n                j.attachEvent(x, function () { if (j.readyState == \"complete\") {\n                    j.detachEvent(x, arguments.callee);\n                    f();\n                } });\n                if (O == top) {\n                    (function () { if (J) {\n                        return;\n                    } try {\n                        j.documentElement.doScroll(\"left\");\n                    }\n                    catch (X) {\n                        setTimeout(arguments.callee, 0);\n                        return;\n                    } f(); })();\n                }\n            }\n            if (M.wk) {\n                (function () { if (J) {\n                    return;\n                } if (!/loaded|complete/.test(j.readyState)) {\n                    setTimeout(arguments.callee, 0);\n                    return;\n                } f(); })();\n            }\n            s(f);\n        } }(); function f() { if (J) {\n            return;\n        } try {\n            var Z = j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));\n            Z.parentNode.removeChild(Z);\n        }\n        catch (aa) {\n            return;\n        } J = true; var X = U.length; for (var Y = 0; Y < X; Y++) {\n            U[Y]();\n        } } function K(X) { if (J) {\n            X();\n        }\n        else {\n            U[U.length] = X;\n        } } function s(Y) { if (typeof O.addEventListener != D) {\n            O.addEventListener(\"load\", Y, false);\n        }\n        else {\n            if (typeof j.addEventListener != D) {\n                j.addEventListener(\"load\", Y, false);\n            }\n            else {\n                if (typeof O.attachEvent != D) {\n                    i(O, \"onload\", Y);\n                }\n                else {\n                    if (typeof O.onload == \"function\") {\n                        var X = O.onload;\n                        O.onload = function () { X(); Y(); };\n                    }\n                    else {\n                        O.onload = Y;\n                    }\n                }\n            }\n        } } function h() { if (T) {\n            V();\n        }\n        else {\n            H();\n        } } function V() { var X = j.getElementsByTagName(\"body\")[0]; var aa = C(r); aa.setAttribute(\"type\", q); var Z = X.appendChild(aa); if (Z) {\n            var Y = 0;\n            (function () { if (typeof Z.GetVariable != D) {\n                var ab = Z.GetVariable(\"$version\");\n                if (ab) {\n                    ab = ab.split(\" \")[1].split(\",\");\n                    M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)];\n                }\n            }\n            else {\n                if (Y < 10) {\n                    Y++;\n                    setTimeout(arguments.callee, 10);\n                    return;\n                }\n            } X.removeChild(aa); Z = null; H(); })();\n        }\n        else {\n            H();\n        } } function H() { var ag = o.length; if (ag > 0) {\n            for (var af = 0; af < ag; af++) {\n                var Y = o[af].id;\n                var ab = o[af].callbackFn;\n                var aa = { success: false, id: Y };\n                if (M.pv[0] > 0) {\n                    var ae = c(Y);\n                    if (ae) {\n                        if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {\n                            w(Y, true);\n                            if (ab) {\n                                aa.success = true;\n                                aa.ref = z(Y);\n                                ab(aa);\n                            }\n                        }\n                        else {\n                            if (o[af].expressInstall && A()) {\n                                var ai = {};\n                                ai.data = o[af].expressInstall;\n                                ai.width = ae.getAttribute(\"width\") || \"0\";\n                                ai.height = ae.getAttribute(\"height\") || \"0\";\n                                if (ae.getAttribute(\"class\")) {\n                                    ai.styleclass = ae.getAttribute(\"class\");\n                                }\n                                if (ae.getAttribute(\"align\")) {\n                                    ai.align = ae.getAttribute(\"align\");\n                                }\n                                var ah = {};\n                                var X = ae.getElementsByTagName(\"param\");\n                                var ac = X.length;\n                                for (var ad = 0; ad < ac; ad++) {\n                                    if (X[ad].getAttribute(\"name\").toLowerCase() != \"movie\") {\n                                        ah[X[ad].getAttribute(\"name\")] = X[ad].getAttribute(\"value\");\n                                    }\n                                }\n                                P(ai, ah, Y, ab);\n                            }\n                            else {\n                                p(ae);\n                                if (ab) {\n                                    ab(aa);\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    w(Y, true);\n                    if (ab) {\n                        var Z = z(Y);\n                        if (Z && typeof Z.SetVariable != D) {\n                            aa.success = true;\n                            aa.ref = Z;\n                        }\n                        ab(aa);\n                    }\n                }\n            }\n        } } function z(aa) { var X = null; var Y = c(aa); if (Y && Y.nodeName == \"OBJECT\") {\n            if (typeof Y.SetVariable != D) {\n                X = Y;\n            }\n            else {\n                var Z = Y.getElementsByTagName(r)[0];\n                if (Z) {\n                    X = Z;\n                }\n            }\n        } return X; } function A() { return !a && F(\"6.0.65\") && (M.win || M.mac) && !(M.wk && M.wk < 312); } function P(aa, ab, X, Z) { a = true; E = Z || null; B = { success: false, id: X }; var ae = c(X); if (ae) {\n            if (ae.nodeName == \"OBJECT\") {\n                l = g(ae);\n                Q = null;\n            }\n            else {\n                l = ae;\n                Q = X;\n            }\n            aa.id = R;\n            if (typeof aa.width == D || (!/%$/.test(aa.width) && parseInt(aa.width, 10) < 310)) {\n                aa.width = \"310\";\n            }\n            if (typeof aa.height == D || (!/%$/.test(aa.height) && parseInt(aa.height, 10) < 137)) {\n                aa.height = \"137\";\n            }\n            j.title = j.title.slice(0, 47) + \" - Flash Player Installation\";\n            var ad = M.ie && M.win ? (['Active'].concat('').join('X')) : \"PlugIn\", ac = \"MMredirectURL=\" + O.location.toString().replace(/&/g, \"%26\") + \"&MMplayerType=\" + ad + \"&MMdoctitle=\" + j.title;\n            if (typeof ab.flashvars != D) {\n                ab.flashvars += \"&\" + ac;\n            }\n            else {\n                ab.flashvars = ac;\n            }\n            if (M.ie && M.win && ae.readyState != 4) {\n                var Y = C(\"div\");\n                X += \"SWFObjectNew\";\n                Y.setAttribute(\"id\", X);\n                ae.parentNode.insertBefore(Y, ae);\n                ae.style.display = \"none\";\n                (function () { if (ae.readyState == 4) {\n                    ae.parentNode.removeChild(ae);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            u(aa, ab, X);\n        } } function p(Y) { if (M.ie && M.win && Y.readyState != 4) {\n            var X = C(\"div\");\n            Y.parentNode.insertBefore(X, Y);\n            X.parentNode.replaceChild(g(Y), X);\n            Y.style.display = \"none\";\n            (function () { if (Y.readyState == 4) {\n                Y.parentNode.removeChild(Y);\n            }\n            else {\n                setTimeout(arguments.callee, 10);\n            } })();\n        }\n        else {\n            Y.parentNode.replaceChild(g(Y), Y);\n        } } function g(ab) { var aa = C(\"div\"); if (M.win && M.ie) {\n            aa.innerHTML = ab.innerHTML;\n        }\n        else {\n            var Y = ab.getElementsByTagName(r)[0];\n            if (Y) {\n                var ad = Y.childNodes;\n                if (ad) {\n                    var X = ad.length;\n                    for (var Z = 0; Z < X; Z++) {\n                        if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == \"PARAM\") && !(ad[Z].nodeType == 8)) {\n                            aa.appendChild(ad[Z].cloneNode(true));\n                        }\n                    }\n                }\n            }\n        } return aa; } function u(ai, ag, Y) { var X, aa = c(Y); if (M.wk && M.wk < 312) {\n            return X;\n        } if (aa) {\n            if (typeof ai.id == D) {\n                ai.id = Y;\n            }\n            if (M.ie && M.win) {\n                var ah = \"\";\n                for (var ae in ai) {\n                    if (ai[ae] != Object.prototype[ae]) {\n                        if (ae.toLowerCase() == \"data\") {\n                            ag.movie = ai[ae];\n                        }\n                        else {\n                            if (ae.toLowerCase() == \"styleclass\") {\n                                ah += ' class=\"' + ai[ae] + '\"';\n                            }\n                            else {\n                                if (ae.toLowerCase() != \"classid\") {\n                                    ah += \" \" + ae + '=\"' + ai[ae] + '\"';\n                                }\n                            }\n                        }\n                    }\n                }\n                var af = \"\";\n                for (var ad in ag) {\n                    if (ag[ad] != Object.prototype[ad]) {\n                        af += '<param name=\"' + ad + '\" value=\"' + ag[ad] + '\" />';\n                    }\n                }\n                aa.outerHTML = '<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"' + ah + \">\" + af + \"</object>\";\n                N[N.length] = ai.id;\n                X = c(ai.id);\n            }\n            else {\n                var Z = C(r);\n                Z.setAttribute(\"type\", q);\n                for (var ac in ai) {\n                    if (ai[ac] != Object.prototype[ac]) {\n                        if (ac.toLowerCase() == \"styleclass\") {\n                            Z.setAttribute(\"class\", ai[ac]);\n                        }\n                        else {\n                            if (ac.toLowerCase() != \"classid\") {\n                                Z.setAttribute(ac, ai[ac]);\n                            }\n                        }\n                    }\n                }\n                for (var ab in ag) {\n                    if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != \"movie\") {\n                        e(Z, ab, ag[ab]);\n                    }\n                }\n                aa.parentNode.replaceChild(Z, aa);\n                X = Z;\n            }\n        } return X; } function e(Z, X, Y) { var aa = C(\"param\"); aa.setAttribute(\"name\", X); aa.setAttribute(\"value\", Y); Z.appendChild(aa); } function y(Y) { var X = c(Y); if (X && X.nodeName == \"OBJECT\") {\n            if (M.ie && M.win) {\n                X.style.display = \"none\";\n                (function () { if (X.readyState == 4) {\n                    b(Y);\n                }\n                else {\n                    setTimeout(arguments.callee, 10);\n                } })();\n            }\n            else {\n                X.parentNode.removeChild(X);\n            }\n        } } function b(Z) { var Y = c(Z); if (Y) {\n            for (var X in Y) {\n                if (typeof Y[X] == \"function\") {\n                    Y[X] = null;\n                }\n            }\n            Y.parentNode.removeChild(Y);\n        } } function c(Z) { var X = null; try {\n            X = j.getElementById(Z);\n        }\n        catch (Y) { } return X; } function C(X) { return j.createElement(X); } function i(Z, X, Y) { Z.attachEvent(X, Y); I[I.length] = [Z, X, Y]; } function F(Z) { var Y = M.pv, X = Z.split(\".\"); X[0] = parseInt(X[0], 10); X[1] = parseInt(X[1], 10) || 0; X[2] = parseInt(X[2], 10) || 0; return (Y[0] > X[0] || (Y[0] == X[0] && Y[1] > X[1]) || (Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2])) ? true : false; } function v(ac, Y, ad, ab) { if (M.ie && M.mac) {\n            return;\n        } var aa = j.getElementsByTagName(\"head\")[0]; if (!aa) {\n            return;\n        } var X = (ad && typeof ad == \"string\") ? ad : \"screen\"; if (ab) {\n            n = null;\n            G = null;\n        } if (!n || G != X) {\n            var Z = C(\"style\");\n            Z.setAttribute(\"type\", \"text/css\");\n            Z.setAttribute(\"media\", X);\n            n = aa.appendChild(Z);\n            if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {\n                n = j.styleSheets[j.styleSheets.length - 1];\n            }\n            G = X;\n        } if (M.ie && M.win) {\n            if (n && typeof n.addRule == r) {\n                n.addRule(ac, Y);\n            }\n        }\n        else {\n            if (n && typeof j.createTextNode != D) {\n                n.appendChild(j.createTextNode(ac + \" {\" + Y + \"}\"));\n            }\n        } } function w(Z, X) { if (!m) {\n            return;\n        } var Y = X ? \"visible\" : \"hidden\"; if (J && c(Z)) {\n            c(Z).style.visibility = Y;\n        }\n        else {\n            v(\"#\" + Z, \"visibility:\" + Y);\n        } } function L(Y) { var Z = /[\\\\\\\"<>\\.;]/; var X = Z.exec(Y) != null; return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y; } var d = function () { if (M.ie && M.win) {\n            window.attachEvent(\"onunload\", function () { var ac = I.length; for (var ab = 0; ab < ac; ab++) {\n                I[ab][0].detachEvent(I[ab][1], I[ab][2]);\n            } var Z = N.length; for (var aa = 0; aa < Z; aa++) {\n                y(N[aa]);\n            } for (var Y in M) {\n                M[Y] = null;\n            } M = null; for (var X in swfobject) {\n                swfobject[X] = null;\n            } swfobject = null; });\n        } }(); return { registerObject: function (ab, X, aa, Z) { if (M.w3 && ab && X) {\n                var Y = {};\n                Y.id = ab;\n                Y.swfVersion = X;\n                Y.expressInstall = aa;\n                Y.callbackFn = Z;\n                o[o.length] = Y;\n                w(ab, false);\n            }\n            else {\n                if (Z) {\n                    Z({ success: false, id: ab });\n                }\n            } }, getObjectById: function (X) { if (M.w3) {\n                return z(X);\n            } }, embedSWF: function (ab, ah, ae, ag, Y, aa, Z, ad, af, ac) { var X = { success: false, id: ah }; if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {\n                w(ah, false);\n                K(function () { ae += \"\"; ag += \"\"; var aj = {}; if (af && typeof af === r) {\n                    for (var al in af) {\n                        aj[al] = af[al];\n                    }\n                } aj.data = ab; aj.width = ae; aj.height = ag; var am = {}; if (ad && typeof ad === r) {\n                    for (var ak in ad) {\n                        am[ak] = ad[ak];\n                    }\n                } if (Z && typeof Z === r) {\n                    for (var ai in Z) {\n                        if (typeof am.flashvars != D) {\n                            am.flashvars += \"&\" + ai + \"=\" + Z[ai];\n                        }\n                        else {\n                            am.flashvars = ai + \"=\" + Z[ai];\n                        }\n                    }\n                } if (F(Y)) {\n                    var an = u(aj, am, ah);\n                    if (aj.id == ah) {\n                        w(ah, true);\n                    }\n                    X.success = true;\n                    X.ref = an;\n                }\n                else {\n                    if (aa && A()) {\n                        aj.data = aa;\n                        P(aj, am, ah, ac);\n                        return;\n                    }\n                    else {\n                        w(ah, true);\n                    }\n                } if (ac) {\n                    ac(X);\n                } });\n            }\n            else {\n                if (ac) {\n                    ac(X);\n                }\n            } }, switchOffAutoHideShow: function () { m = false; }, ua: M, getFlashPlayerVersion: function () { return { major: M.pv[0], minor: M.pv[1], release: M.pv[2] }; }, hasFlashPlayerVersion: F, createSWF: function (Z, Y, X) { if (M.w3) {\n                return u(Z, Y, X);\n            }\n            else {\n                return undefined;\n            } }, showExpressInstall: function (Z, aa, X, Y) { if (M.w3 && A()) {\n                P(Z, aa, X, Y);\n            } }, removeSWF: function (X) { if (M.w3) {\n                y(X);\n            } }, createCSS: function (aa, Z, Y, X) { if (M.w3) {\n                v(aa, Z, Y, X);\n            } }, addDomLoadEvent: K, addLoadEvent: s, getQueryParamValue: function (aa) { var Z = j.location.search || j.location.hash; if (Z) {\n                if (/\\?/.test(Z)) {\n                    Z = Z.split(\"?\")[1];\n                }\n                if (aa == null) {\n                    return L(Z);\n                }\n                var Y = Z.split(\"&\");\n                for (var X = 0; X < Y.length; X++) {\n                    if (Y[X].substring(0, Y[X].indexOf(\"=\")) == aa) {\n                        return L(Y[X].substring((Y[X].indexOf(\"=\") + 1)));\n                    }\n                }\n            } return \"\"; }, expressInstallCallback: function () { if (a) {\n                var X = c(R);\n                if (X && l) {\n                    X.parentNode.replaceChild(l, X);\n                    if (Q) {\n                        w(Q, true);\n                        if (M.ie && M.win) {\n                            l.style.display = \"block\";\n                        }\n                    }\n                    if (E) {\n                        E(B);\n                    }\n                }\n                a = false;\n            } } }; }();\n    }\n    // Copyright: Hiroshi Ichikawa <http://gimite.net/en/>\n    // License: New BSD License\n    // Reference: http://dev.w3.org/html5/websockets/\n    // Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol\n    (function () {\n        if ('undefined' == typeof window || window.WebSocket)\n            return;\n        var console = window.console;\n        if (!console || !console.log || !console.error) {\n            console = { log: function () { }, error: function () { } };\n        }\n        if (!swfobject.hasFlashPlayerVersion(\"10.0.0\")) {\n            console.error(\"Flash Player >= 10.0.0 is required.\");\n            return;\n        }\n        if (location.protocol == \"file:\") {\n            console.error(\"WARNING: web-socket-js doesn't work in file:///... URL \" +\n                \"unless you set Flash Security Settings properly. \" +\n                \"Open the page via Web server i.e. http://...\");\n        }\n        /**\n         * This class represents a faux web socket.\n         * @param {string} url\n         * @param {array or string} protocols\n         * @param {string} proxyHost\n         * @param {int} proxyPort\n         * @param {string} headers\n         */\n        WebSocket = function (url, protocols, proxyHost, proxyPort, headers) {\n            var self = this;\n            self.__id = WebSocket.__nextId++;\n            WebSocket.__instances[self.__id] = self;\n            self.readyState = WebSocket.CONNECTING;\n            self.bufferedAmount = 0;\n            self.__events = {};\n            if (!protocols) {\n                protocols = [];\n            }\n            else if (typeof protocols == \"string\") {\n                protocols = [protocols];\n            }\n            // Uses setTimeout() to make sure __createFlash() runs after the caller sets ws.onopen etc.\n            // Otherwise, when onopen fires immediately, onopen is called before it is set.\n            setTimeout(function () {\n                WebSocket.__addTask(function () {\n                    WebSocket.__flash.create(self.__id, url, protocols, proxyHost || null, proxyPort || 0, headers || null);\n                });\n            }, 0);\n        };\n        /**\n         * Send data to the web socket.\n         * @param {string} data  The data to send to the socket.\n         * @return {boolean}  True for success, false for failure.\n         */\n        WebSocket.prototype.send = function (data) {\n            if (this.readyState == WebSocket.CONNECTING) {\n                throw \"INVALID_STATE_ERR: Web Socket connection has not been established\";\n            }\n            // We use encodeURIComponent() here, because FABridge doesn't work if\n            // the argument includes some characters. We don't use escape() here\n            // because of this:\n            // https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_Functions\n            // But it looks decodeURIComponent(encodeURIComponent(s)) doesn't\n            // preserve all Unicode characters either e.g. \"\\uffff\" in Firefox.\n            // Note by wtritch: Hopefully this will not be necessary using ExternalInterface.  Will require\n            // additional testing.\n            var result = WebSocket.__flash.send(this.__id, encodeURIComponent(data));\n            if (result < 0) { // success\n                return true;\n            }\n            else {\n                this.bufferedAmount += result;\n                return false;\n            }\n        };\n        /**\n         * Close this web socket gracefully.\n         */\n        WebSocket.prototype.close = function () {\n            if (this.readyState == WebSocket.CLOSED || this.readyState == WebSocket.CLOSING) {\n                return;\n            }\n            this.readyState = WebSocket.CLOSING;\n            WebSocket.__flash.close(this.__id);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.addEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events)) {\n                this.__events[type] = [];\n            }\n            this.__events[type].push(listener);\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {string} type\n         * @param {function} listener\n         * @param {boolean} useCapture\n         * @return void\n         */\n        WebSocket.prototype.removeEventListener = function (type, listener, useCapture) {\n            if (!(type in this.__events))\n                return;\n            var events = this.__events[type];\n            for (var i = events.length - 1; i >= 0; --i) {\n                if (events[i] === listener) {\n                    events.splice(i, 1);\n                    break;\n                }\n            }\n        };\n        /**\n         * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\n         *\n         * @param {Event} event\n         * @return void\n         */\n        WebSocket.prototype.dispatchEvent = function (event) {\n            var events = this.__events[event.type] || [];\n            for (var i = 0; i < events.length; ++i) {\n                events[i](event);\n            }\n            var handler = this[\"on\" + event.type];\n            if (handler)\n                handler(event);\n        };\n        /**\n         * Handles an event from Flash.\n         * @param {Object} flashEvent\n         */\n        WebSocket.prototype.__handleEvent = function (flashEvent) {\n            if (\"readyState\" in flashEvent) {\n                this.readyState = flashEvent.readyState;\n            }\n            if (\"protocol\" in flashEvent) {\n                this.protocol = flashEvent.protocol;\n            }\n            var jsEvent;\n            if (flashEvent.type == \"open\" || flashEvent.type == \"error\") {\n                jsEvent = this.__createSimpleEvent(flashEvent.type);\n            }\n            else if (flashEvent.type == \"close\") {\n                // TODO implement jsEvent.wasClean\n                jsEvent = this.__createSimpleEvent(\"close\");\n            }\n            else if (flashEvent.type == \"message\") {\n                var data = decodeURIComponent(flashEvent.message);\n                jsEvent = this.__createMessageEvent(\"message\", data);\n            }\n            else {\n                throw \"unknown event type: \" + flashEvent.type;\n            }\n            this.dispatchEvent(jsEvent);\n        };\n        WebSocket.prototype.__createSimpleEvent = function (type) {\n            if (document.createEvent && window.Event) {\n                var event = document.createEvent(\"Event\");\n                event.initEvent(type, false, false);\n                return event;\n            }\n            else {\n                return { type: type, bubbles: false, cancelable: false };\n            }\n        };\n        WebSocket.prototype.__createMessageEvent = function (type, data) {\n            if (document.createEvent && window.MessageEvent && !window.opera) {\n                var event = document.createEvent(\"MessageEvent\");\n                event.initMessageEvent(\"message\", false, false, data, null, null, window, null);\n                return event;\n            }\n            else {\n                // IE and Opera, the latter one truncates the data parameter after any 0x00 bytes.\n                return { type: type, data: data, bubbles: false, cancelable: false };\n            }\n        };\n        /**\n         * Define the WebSocket readyState enumeration.\n         */\n        WebSocket.CONNECTING = 0;\n        WebSocket.OPEN = 1;\n        WebSocket.CLOSING = 2;\n        WebSocket.CLOSED = 3;\n        WebSocket.__flash = null;\n        WebSocket.__instances = {};\n        WebSocket.__tasks = [];\n        WebSocket.__nextId = 0;\n        /**\n         * Load a new flash security policy file.\n         * @param {string} url\n         */\n        WebSocket.loadFlashPolicyFile = function (url) {\n            WebSocket.__addTask(function () {\n                WebSocket.__flash.loadManualPolicyFile(url);\n            });\n        };\n        /**\n         * Loads WebSocketMain.swf and creates WebSocketMain object in Flash.\n         */\n        WebSocket.__initialize = function () {\n            if (WebSocket.__flash)\n                return;\n            if (WebSocket.__swfLocation) {\n                // For backword compatibility.\n                window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation;\n            }\n            if (!window.WEB_SOCKET_SWF_LOCATION) {\n                console.error(\"[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf\");\n                return;\n            }\n            var container = document.createElement(\"div\");\n            container.id = \"webSocketContainer\";\n            // Hides Flash box. We cannot use display: none or visibility: hidden because it prevents\n            // Flash from loading at least in IE. So we move it out of the screen at (-100, -100).\n            // But this even doesn't work with Flash Lite (e.g. in Droid Incredible). So with Flash\n            // Lite, we put it at (0, 0). This shows 1x1 box visible at left-top corner but this is\n            // the best we can do as far as we know now.\n            container.style.position = \"absolute\";\n            if (WebSocket.__isFlashLite()) {\n                container.style.left = \"0px\";\n                container.style.top = \"0px\";\n            }\n            else {\n                container.style.left = \"-100px\";\n                container.style.top = \"-100px\";\n            }\n            var holder = document.createElement(\"div\");\n            holder.id = \"webSocketFlash\";\n            container.appendChild(holder);\n            document.body.appendChild(container);\n            // See this article for hasPriority:\n            // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\n            swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION, \"webSocketFlash\", \"1\" /* width */, \"1\" /* height */, \"10.0.0\" /* SWF version */, null, null, { hasPriority: true, swliveconnect: true, allowScriptAccess: \"always\" }, null, function (e) {\n                if (!e.success) {\n                    console.error(\"[WebSocket] swfobject.embedSWF failed\");\n                }\n            });\n        };\n        /**\n         * Called by Flash to notify JS that it's fully loaded and ready\n         * for communication.\n         */\n        WebSocket.__onFlashInitialized = function () {\n            // We need to set a timeout here to avoid round-trip calls\n            // to flash during the initialization process.\n            setTimeout(function () {\n                WebSocket.__flash = document.getElementById(\"webSocketFlash\");\n                WebSocket.__flash.setCallerUrl(location.href);\n                WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);\n                for (var i = 0; i < WebSocket.__tasks.length; ++i) {\n                    WebSocket.__tasks[i]();\n                }\n                WebSocket.__tasks = [];\n            }, 0);\n        };\n        /**\n         * Called by Flash to notify WebSockets events are fired.\n         */\n        WebSocket.__onFlashEvent = function () {\n            setTimeout(function () {\n                try {\n                    // Gets events using receiveEvents() instead of getting it from event object\n                    // of Flash event. This is to make sure to keep message order.\n                    // It seems sometimes Flash events don't arrive in the same order as they are sent.\n                    var events = WebSocket.__flash.receiveEvents();\n                    for (var i = 0; i < events.length; ++i) {\n                        WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i]);\n                    }\n                }\n                catch (e) {\n                    console.error(e);\n                }\n            }, 0);\n            return true;\n        };\n        // Called by Flash.\n        WebSocket.__log = function (message) {\n            console.log(decodeURIComponent(message));\n        };\n        // Called by Flash.\n        WebSocket.__error = function (message) {\n            console.error(decodeURIComponent(message));\n        };\n        WebSocket.__addTask = function (task) {\n            if (WebSocket.__flash) {\n                task();\n            }\n            else {\n                WebSocket.__tasks.push(task);\n            }\n        };\n        /**\n         * Test if the browser is running flash lite.\n         * @return {boolean} True if flash lite is running, false otherwise.\n         */\n        WebSocket.__isFlashLite = function () {\n            if (!window.navigator || !window.navigator.mimeTypes) {\n                return false;\n            }\n            var mimeType = window.navigator.mimeTypes[\"application/x-shockwave-flash\"];\n            if (!mimeType || !mimeType.enabledPlugin || !mimeType.enabledPlugin.filename) {\n                return false;\n            }\n            return mimeType.enabledPlugin.filename.match(/flashlite/i) ? true : false;\n        };\n        if (!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION) {\n            if (window.addEventListener) {\n                window.addEventListener(\"load\", function () {\n                    WebSocket.__initialize();\n                }, false);\n            }\n            else {\n                window.attachEvent(\"onload\", function () {\n                    WebSocket.__initialize();\n                });\n            }\n        }\n    })();\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         *\n         * @api public\n         */\n        exports.XHR = XHR;\n        /**\n         * XHR constructor\n         *\n         * @costructor\n         * @api public\n         */\n        function XHR(socket) {\n            if (!socket)\n                return;\n            io.Transport.apply(this, arguments);\n            this.sendBuffer = [];\n        }\n        ;\n        /**\n         * Inherits from Transport.\n         */\n        io.util.inherit(XHR, io.Transport);\n        /**\n         * Establish a connection\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.open = function () {\n            this.socket.setBuffer(false);\n            this.onOpen();\n            this.get();\n            // we need to make sure the request succeeds since we have no indication\n            // whether the request opened or not until it succeeded.\n            this.setCloseTimeout();\n            return this;\n        };\n        /**\n         * Check if we need to send data to the Socket.IO server, if we have data in our\n         * buffer we encode it and forward it to the `post` method.\n         *\n         * @api private\n         */\n        XHR.prototype.payload = function (payload) {\n            var msgs = [];\n            for (var i = 0, l = payload.length; i < l; i++) {\n                msgs.push(io.parser.encodePacket(payload[i]));\n            }\n            this.send(io.parser.encodePayload(msgs));\n        };\n        /**\n         * Send data to the Socket.IO server.\n         *\n         * @param data The message\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.send = function (data) {\n            this.post(data);\n            return this;\n        };\n        /**\n         * Posts a encoded message to the Socket.IO server.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHR.prototype.post = function (data) {\n            var self = this;\n            this.socket.setBuffer(true);\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    self.posting = false;\n                    if (this.status == 200) {\n                        self.socket.setBuffer(false);\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            function onload() {\n                this.onload = empty;\n                self.socket.setBuffer(false);\n            }\n            ;\n            this.sendXHR = this.request('POST');\n            if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {\n                this.sendXHR.onload = this.sendXHR.onerror = onload;\n            }\n            else {\n                this.sendXHR.onreadystatechange = stateChange;\n            }\n            this.sendXHR.send(data);\n        };\n        /**\n         * Disconnects the established `XHR` connection.\n         *\n         * @returns {Transport}\n         * @api public\n         */\n        XHR.prototype.close = function () {\n            this.onClose();\n            return this;\n        };\n        /**\n         * Generates a configured XHR request\n         *\n         * @param {String} url The url that needs to be requested.\n         * @param {String} method The method the request should use.\n         * @returns {XMLHttpRequest}\n         * @api private\n         */\n        XHR.prototype.request = function (method) {\n            var req = io.util.request(this.socket.isXDomain()), query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            req.open(method || 'GET', this.prepareUrl() + query, true);\n            if (method == 'POST') {\n                try {\n                    if (req.setRequestHeader) {\n                        req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n                    }\n                    else {\n                        // XDomainRequest\n                        req.contentType = 'text/plain';\n                    }\n                }\n                catch (e) { }\n            }\n            return req;\n        };\n        /**\n         * Returns the scheme to use for the transport URLs.\n         *\n         * @api private\n         */\n        XHR.prototype.scheme = function () {\n            return this.socket.options.secure ? 'https' : 'http';\n        };\n        /**\n         * Check if the XHR transports are supported\n         *\n         * @param {Boolean} xdomain Check if we support cross domain requests.\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.check = function (socket, xdomain) {\n            try {\n                var request = io.util.request(xdomain), usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest), socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'), isXProtocol = (global.location && socketProtocol != global.location.protocol);\n                if (request && !(usesXDomReq && isXProtocol)) {\n                    return true;\n                }\n            }\n            catch (e) { }\n            return false;\n        };\n        /**\n         * Check if the XHR transport supports cross domain requests.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        XHR.xdomainCheck = function (socket) {\n            return XHR.check(socket, true);\n        };\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io) {\n        /**\n         * Expose constructor.\n         */\n        exports.htmlfile = HTMLFile;\n        /**\n         * The HTMLFile transport creates a `forever iframe` based transport\n         * for Internet Explorer. Regular forever iframe implementations will\n         * continuously trigger the browsers buzy indicators. If the forever iframe\n         * is created inside a `htmlfile` these indicators will not be trigged.\n         *\n         * @constructor\n         * @extends {io.Transport.XHR}\n         * @api public\n         */\n        function HTMLFile(socket) {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(HTMLFile, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        HTMLFile.prototype.name = 'htmlfile';\n        /**\n         * Creates a new Ac...eX `htmlfile` with a forever loading iframe\n         * that can be used to listen to messages. Inside the generated\n         * `htmlfile` a reference will be made to the HTMLFile transport.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.get = function () {\n            this.doc = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n            this.doc.open();\n            this.doc.write('<html></html>');\n            this.doc.close();\n            this.doc.parentWindow.s = this;\n            var iframeC = this.doc.createElement('div');\n            iframeC.className = 'socketio';\n            this.doc.body.appendChild(iframeC);\n            this.iframe = this.doc.createElement('iframe');\n            iframeC.appendChild(this.iframe);\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + +new Date);\n            this.iframe.src = this.prepareUrl() + query;\n            io.util.on(window, 'unload', function () {\n                self.destroy();\n            });\n        };\n        /**\n         * The Socket.IO server will write script tags inside the forever\n         * iframe, this function will be used as callback for the incoming\n         * information.\n         *\n         * @param {String} data The message\n         * @param {document} doc Reference to the context\n         * @api private\n         */\n        HTMLFile.prototype._ = function (data, doc) {\n            // unescape all forward slashes. see GH-1251\n            data = data.replace(/\\\\\\//g, '/');\n            this.onData(data);\n            try {\n                var script = doc.getElementsByTagName('script')[0];\n                script.parentNode.removeChild(script);\n            }\n            catch (e) { }\n        };\n        /**\n         * Destroy the established connection, iframe and `htmlfile`.\n         * And calls the `CollectGarbage` function of Internet Explorer\n         * to release the memory.\n         *\n         * @api private\n         */\n        HTMLFile.prototype.destroy = function () {\n            if (this.iframe) {\n                try {\n                    this.iframe.src = 'about:blank';\n                }\n                catch (e) { }\n                this.doc = null;\n                this.iframe.parentNode.removeChild(this.iframe);\n                this.iframe = null;\n                CollectGarbage();\n            }\n        };\n        /**\n         * Disconnects the established connection.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        HTMLFile.prototype.close = function () {\n            this.destroy();\n            return io.Transport.XHR.prototype.close.call(this);\n        };\n        /**\n         * Checks if the browser supports this transport. The browser\n         * must have an `Ac...eXObject` implementation.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        HTMLFile.check = function (socket) {\n            if (typeof window != \"undefined\" && (['Active'].concat('Object').join('X')) in window) {\n                try {\n                    var a = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\n                    return a && io.Transport.XHR.check(socket);\n                }\n                catch (e) { }\n            }\n            return false;\n        };\n        /**\n         * Check if cross domain requests are supported.\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        HTMLFile.xdomainCheck = function () {\n            // we can probably do handling for sub-domains, we should\n            // test that it's cross domain but a subdomain here\n            return false;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('htmlfile');\n    })(io.Transport, io);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * Expose constructor.\n         */\n        exports['xhr-polling'] = XHRPolling;\n        /**\n         * The XHR-polling transport uses long polling XHR requests to create a\n         * \"persistent\" connection with the server.\n         *\n         * @constructor\n         * @api public\n         */\n        function XHRPolling() {\n            io.Transport.XHR.apply(this, arguments);\n        }\n        ;\n        /**\n         * Inherits from XHR transport.\n         */\n        io.util.inherit(XHRPolling, io.Transport.XHR);\n        /**\n         * Merge the properties from XHR transport\n         */\n        io.util.merge(XHRPolling, io.Transport.XHR);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        XHRPolling.prototype.name = 'xhr-polling';\n        /**\n         * Indicates whether heartbeats is enabled for this transport\n         *\n         * @api private\n         */\n        XHRPolling.prototype.heartbeats = function () {\n            return false;\n        };\n        /**\n         * Establish a connection, for iPhone and Android this will be done once the page\n         * is loaded.\n         *\n         * @returns {Transport} Chaining.\n         * @api public\n         */\n        XHRPolling.prototype.open = function () {\n            var self = this;\n            io.Transport.XHR.prototype.open.call(self);\n            return false;\n        };\n        /**\n         * Starts a XHR request to wait for incoming messages.\n         *\n         * @api private\n         */\n        function empty() { }\n        ;\n        XHRPolling.prototype.get = function () {\n            if (!this.isOpen)\n                return;\n            var self = this;\n            function stateChange() {\n                if (this.readyState == 4) {\n                    this.onreadystatechange = empty;\n                    if (this.status == 200) {\n                        self.onData(this.responseText);\n                        self.get();\n                    }\n                    else {\n                        self.onClose();\n                    }\n                }\n            }\n            ;\n            function onload() {\n                this.onload = empty;\n                this.onerror = empty;\n                self.retryCounter = 1;\n                self.onData(this.responseText);\n                self.get();\n            }\n            ;\n            function onerror() {\n                self.retryCounter++;\n                if (!self.retryCounter || self.retryCounter > 3) {\n                    self.onClose();\n                }\n                else {\n                    self.get();\n                }\n            }\n            ;\n            this.xhr = this.request();\n            if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {\n                this.xhr.onload = onload;\n                this.xhr.onerror = onerror;\n            }\n            else {\n                this.xhr.onreadystatechange = stateChange;\n            }\n            this.xhr.send(null);\n        };\n        /**\n         * Handle the unclean close behavior.\n         *\n         * @api private\n         */\n        XHRPolling.prototype.onClose = function () {\n            io.Transport.XHR.prototype.onClose.call(this);\n            if (this.xhr) {\n                this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;\n                try {\n                    this.xhr.abort();\n                }\n                catch (e) { }\n                this.xhr = null;\n            }\n        };\n        /**\n         * Webkit based browsers show a infinit spinner when you start a XHR request\n         * before the browsers onload event is called so we need to defer opening of\n         * the transport until the onload event is called. Wrapping the cb in our\n         * defer method solve this.\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        XHRPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            io.util.defer(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('xhr-polling');\n    })(io.Transport, io, self);\n    /**\n     * socket.io\n     * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\n     * MIT Licensed\n     */\n    (function (exports, io, global) {\n        /**\n         * There is a way to hide the loading indicator in Firefox. If you create and\n         * remove a iframe it will stop showing the current loading indicator.\n         * Unfortunately we can't feature detect that and UA sniffing is evil.\n         *\n         * @api private\n         */\n        var indicator = global.document && \"MozAppearance\" in\n            global.document.documentElement.style;\n        /**\n         * Expose constructor.\n         */\n        exports['jsonp-polling'] = JSONPPolling;\n        /**\n         * The JSONP transport creates an persistent connection by dynamically\n         * inserting a script tag in the page. This script tag will receive the\n         * information of the Socket.IO server. When new information is received\n         * it creates a new script tag for the new data stream.\n         *\n         * @constructor\n         * @extends {io.Transport.xhr-polling}\n         * @api public\n         */\n        function JSONPPolling(socket) {\n            io.Transport['xhr-polling'].apply(this, arguments);\n            this.index = io.j.length;\n            var self = this;\n            io.j.push(function (msg) {\n                self._(msg);\n            });\n        }\n        ;\n        /**\n         * Inherits from XHR polling transport.\n         */\n        io.util.inherit(JSONPPolling, io.Transport['xhr-polling']);\n        /**\n         * Transport name\n         *\n         * @api public\n         */\n        JSONPPolling.prototype.name = 'jsonp-polling';\n        /**\n         * Posts a encoded message to the Socket.IO server using an iframe.\n         * The iframe is used because script tags can create POST based requests.\n         * The iframe is positioned outside of the view so the user does not\n         * notice it's existence.\n         *\n         * @param {String} data A encoded message.\n         * @api private\n         */\n        JSONPPolling.prototype.post = function (data) {\n            var self = this, query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (!this.form) {\n                var form = document.createElement('form'), area = document.createElement('textarea'), id = this.iframeId = 'socketio_iframe_' + this.index, iframe;\n                form.className = 'socketio';\n                form.style.position = 'absolute';\n                form.style.top = '0px';\n                form.style.left = '0px';\n                form.style.display = 'none';\n                form.target = id;\n                form.method = 'POST';\n                form.setAttribute('accept-charset', 'utf-8');\n                area.name = 'd';\n                form.appendChild(area);\n                document.body.appendChild(form);\n                this.form = form;\n                this.area = area;\n            }\n            this.form.action = this.prepareUrl() + query;\n            function complete() {\n                initIframe();\n                self.socket.setBuffer(false);\n            }\n            ;\n            function initIframe() {\n                if (self.iframe) {\n                    self.form.removeChild(self.iframe);\n                }\n                try {\n                    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n                    iframe = document.createElement('<iframe name=\"' + self.iframeId + '\">');\n                }\n                catch (e) {\n                    iframe = document.createElement('iframe');\n                    iframe.name = self.iframeId;\n                }\n                iframe.id = self.iframeId;\n                self.form.appendChild(iframe);\n                self.iframe = iframe;\n            }\n            ;\n            initIframe();\n            // we temporarily stringify until we figure out how to prevent\n            // browsers from turning `\\n` into `\\r\\n` in form inputs\n            this.area.value = io.JSON.stringify(data);\n            try {\n                this.form.submit();\n            }\n            catch (e) { }\n            if (this.iframe.attachEvent) {\n                iframe.onreadystatechange = function () {\n                    if (self.iframe.readyState == 'complete') {\n                        complete();\n                    }\n                };\n            }\n            else {\n                this.iframe.onload = complete;\n            }\n            this.socket.setBuffer(true);\n        };\n        /**\n         * Creates a new JSONP poll that can be used to listen\n         * for messages from the Socket.IO server.\n         *\n         * @api private\n         */\n        JSONPPolling.prototype.get = function () {\n            var self = this, script = document.createElement('script'), query = io.util.query(this.socket.options.query, 't=' + (+new Date) + '&i=' + this.index);\n            if (this.script) {\n                this.script.parentNode.removeChild(this.script);\n                this.script = null;\n            }\n            script.async = true;\n            script.src = this.prepareUrl() + query;\n            script.onerror = function () {\n                self.onClose();\n            };\n            var insertAt = document.getElementsByTagName('script')[0];\n            insertAt.parentNode.insertBefore(script, insertAt);\n            this.script = script;\n            if (indicator) {\n                setTimeout(function () {\n                    var iframe = document.createElement('iframe');\n                    document.body.appendChild(iframe);\n                    document.body.removeChild(iframe);\n                }, 100);\n            }\n        };\n        /**\n         * Callback function for the incoming message stream from the Socket.IO server.\n         *\n         * @param {String} data The message\n         * @api private\n         */\n        JSONPPolling.prototype._ = function (msg) {\n            this.onData(msg);\n            if (this.isOpen) {\n                this.get();\n            }\n            return this;\n        };\n        /**\n         * The indicator hack only works after onload\n         *\n         * @param {Socket} socket The socket instance that needs a transport\n         * @param {Function} fn The callback\n         * @api private\n         */\n        JSONPPolling.prototype.ready = function (socket, fn) {\n            var self = this;\n            if (!indicator)\n                return fn.call(this);\n            io.util.load(function () {\n                fn.call(self);\n            });\n        };\n        /**\n         * Checks if browser supports this transport.\n         *\n         * @return {Boolean}\n         * @api public\n         */\n        JSONPPolling.check = function () {\n            return 'document' in global;\n        };\n        /**\n         * Check if cross domain requests are supported\n         *\n         * @returns {Boolean}\n         * @api public\n         */\n        JSONPPolling.xdomainCheck = function () {\n            return true;\n        };\n        /**\n         * Add the transport to your public io.transports array.\n         *\n         * @api private\n         */\n        io.transports.push('jsonp-polling');\n    })(io.Transport, io, self);\n    if (typeof define === \"function\" && define.amd) {\n        define([], function () { return io; });\n    }\n})();\n\n",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};",
         "// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n// Entry point for the notebook bundle containing custom model definitions.\n//\n// Setup notebook base URL\n//\n// Some static assets may be required by the custom widget javascript. The base\n// url for the notebook is not known at build time and is therefore computed\n// dynamically.\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n(window as any).__webpack_public_path__ =\n  document.querySelector('body')!.getAttribute('data-base-url') +\n  'nbextensions/ipynao';\n\nexport * from './index';\n",
-        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nexport * from './version';\nexport * from './widget';\nexport * from './qimessaging';",
-        "/*\n**  Copyright (C) Aldebaran Robotics\n**  See COPYING for the license\n**\n**  Author(s):\n**   - Laurent LEC    <llec@aldebaran-robotics.com>\n**\n*/\nimport io from \"nao-socket.io\";\n\nexport class QiSession {\n    connected: Boolean = false;\n    disconnected: any;\n    host: any;\n    service: any;\n\n    constructor(ipAddress: string = \"nao.local\", port: string = \"80\") {\n        console.log(\"DBG Emile qim about to connect w/17\");\n        // @ts-ignore\n        window[\"oioi\"] = io;\n        let _socket = io.connect(\n            \"nao:nao@\" + ipAddress + \":\" + port,\n            { resource: \"libs/qimessaging/2/socket.io\",\n            'force new connection': true });\n        // console.log(\"DBG Emile qim connecting..\");\n        let _dfd = new Array();\n        let _sigs = new Array();\n        let _idm = 0;\n\n        interface MetaObject {\n            __MetaObject?: any;\n        }\n\n        _socket.on('reply', function (data : any) {\n            // console.log(\"DBG Emile qim reply\"); REMOVE\n            let idm = data[\"idm\"];\n            if (data[\"result\"] != null && data[\"result\"][\"metaobject\"] != undefined) {\n                // let o = new Object();\n                let o : MetaObject = {\n                    __MetaObject: data[\"result\"][\"metaobject\"],\n                }\n\n                let pyobj = data[\"result\"][\"pyobject\"];\n                _sigs[pyobj] = new Array();\n                let methods = o.__MetaObject[\"methods\"];\n\n                for (let i in methods) {\n                    let methodName = methods[i][\"name\"];\n                    // @ts-ignore\n                    o[methodName] = createMetaCall(pyobj, methodName, \"data\");\n                }\n                let signals = o.__MetaObject[\"signals\"];\n                for (let i in signals) {\n                    let signalName = signals[i][\"name\"];\n                    // @ts-ignore\n                    o[signalName] = createMetaSignal(pyobj, signalName, false);\n                }\n                let properties = o.__MetaObject[\"properties\"];\n                for (let i in properties) {\n                    let propertyName = properties[i][\"name\"];\n                    // @ts-ignore\n                    o[propertyName] = createMetaSignal(pyobj, propertyName, true);\n                }\n                _dfd[idm].resolve(o);\n            }\n            else {\n                if (_dfd[idm].__cbi != undefined) {\n                    let cbi = _dfd[idm].__cbi;\n                    _sigs[cbi[\"obj\"]][cbi[\"signal\"]][data[\"result\"]] = cbi[\"cb\"];\n                }\n                _dfd[idm].resolve(data[\"result\"]);\n            }\n            delete _dfd[idm];\n        });\n        _socket.on('error', function (data : any) {\n            // console.log(\"DBG Emile qim error\"); REMOVE\n            if (data[\"idm\"] != undefined) {\n                _dfd[data[\"idm\"]].reject(data[\"result\"]);\n                delete _dfd[data[\"idm\"]];\n            }\n        });\n        _socket.on('signal', function (data : any) {\n            // console.log(\"DBG Emile qim signal\"); REMOVE\n            let res = data[\"result\"];\n            let callback = _sigs[res[\"obj\"]][res[\"signal\"]][res[\"link\"]];\n            if (callback != undefined) {\n                // @ts-ignore\n                callback.apply(this, res[\"data\"]);\n            }\n        });\n        _socket.on('disconnect', function (data : any) {\n            // console.log(\"DBG Emile qim disconnect\"); REMOVE\n            for (let idm in _dfd) {\n                _dfd[idm].reject(\"Call \" + idm + \" canceled: disconnected\");\n                delete _dfd[idm];\n            }\n            // @ts-ignore\n            if (this.disconnected) {\n                // disconnected();\n                console.log(\"DBG Isabel disconnected\");\n            }\n        });\n        function createMetaCall(obj : any, member : any, data : any) {\n            return function () {\n                let idm = ++_idm;\n                let args = Array.prototype.slice.call(arguments, 0);\n                let promise = new Promise(function (resolve, reject) {\n                    _dfd[idm] = { resolve: resolve, reject: reject };\n                });\n                if (args[0] == \"connect\") {\n                    _dfd[idm].__cbi = data;\n                }\n                _socket.emit('call', { idm: idm, params: { obj: obj, member: member, args: args } });\n                return promise;\n            };\n        }\n\n        interface sObject {\n            connect?: any;\n            disconnect?: any;\n            setValue?: any;\n            value?: any;\n\n        };\n        function createMetaSignal(obj : any, signal : any, isProperty : any) {\n            // let s = new Object();\n            let s : sObject = {};\n            _sigs[obj][signal] = new Array();\n            s.connect = function (cb : any) {\n                // @ts-ignore\n                return createMetaCall(obj, signal, { obj: obj, signal: signal, cb: cb })(\"connect\");\n            };\n\n            // @ts-ignore\n            s.disconnect = function (l) {\n                delete _sigs[obj][signal][l];\n                // @ts-ignore\n                return createMetaCall(obj, signal, \"data\")(\"disconnect\", l);\n            };\n            if (!isProperty) {\n                return s;\n            }\n            s.setValue = function () {\n                let args = Array.prototype.slice.call(arguments, 0);\n                // @ts-ignore\n                return createMetaCall(obj, signal, \"data\").apply(this, [\"setValue\"].concat(args));\n            };\n            s.value = function () {\n                // @ts-ignore\n                return createMetaCall(obj, signal, \"data\")(\"value\");\n            };\n            return s;\n        }\n\n        this.service = createMetaCall(\"ServiceDirectory\", \"service\", \"data\");\n        // let _self = this;\n        _socket.on('connect', function () {\n            // console.log(\"DBG Emile qim connect\"); REMOVE\n            // @ts-ignore\n            if (this.connected) {\n                // connected(_self);\n                console.log(\"DBG Isabel already connected\");\n\n            }\n        });\n        // console.log(\"DBG Emile qim done with init\"); REMOVE\n    }\n}\n",
+        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nexport * from './version';\nexport * from './widget';\nexport * from './qimessaging';\n",
+        "/*\n **  Copyright (C) Aldebaran Robotics\n **  See COPYING for the license\n **\n **  Author(s):\n **   - Laurent LEC    <llec@aldebaran-robotics.com>\n **\n */\nimport io from 'nao-socket.io';\n\ninterface replyType {\n  __MetaObject?: any;\n  [key: string]: any;\n}\n\ninterface signalType {\n  connect?: any;\n  disconnect?: any;\n  setValue?: any;\n  value?: any;\n}\n\nexport class QiSession {\n  connected: any;\n  disconnected: any;\n  host: any;\n  service: any;\n  _dfd: Array<any>;\n  _sigs: Array<any>;\n  _idm: number;\n  _socket: any;\n\n  constructor(\n    ipAddress = 'nao.local',\n    port = '80',\n    connected?: 'function',\n    disconnected?: 'function'\n  ) {\n    this.connected = connected;\n    this.disconnected = disconnected;\n\n    this._socket = io.connect('nao:nao@' + ipAddress + ':' + port, {\n      resource: 'libs/qimessaging/2/socket.io',\n      'force new connection': true,\n    });\n\n    this._dfd = [];\n    this._sigs = [];\n    this._idm = 0;\n\n    this._socket.on('reply', (data: any) => {\n      this.onReply(data);\n    });\n\n    this._socket.on('error', (data: any) => {\n      this.onError(data);\n    });\n\n    this._socket.on('signal', (data: any) => {\n      this.onSignal(data);\n    });\n\n    this._socket.on('disconnect', this.onDisconnect);\n\n    this._socket.on('connect', this.onConnect);\n\n    this.service = this.createMetaCall('ServiceDirectory', 'service', 'data');\n  }\n\n  isConnected() {\n    const connected: boolean =\n      this._socket !== undefined ? this._socket.socket.connected : false;\n    return connected;\n  }\n\n  onReply(data: any) {\n    const idm = data['idm'];\n    if (\n      data['result'] !== undefined &&\n      data['result']['metaobject'] !== undefined\n    ) {\n      const replyObject: replyType = {\n        __MetaObject: data['result']['metaobject'],\n      };\n\n      const pyIndex = data['result']['pyobject'];\n      this._sigs[pyIndex] = [];\n      const methods = replyObject.__MetaObject['methods'];\n\n      for (const i in methods) {\n        const methodName = methods[i]['name'];\n        replyObject[methodName] = this.createMetaCall(\n          pyIndex,\n          methodName,\n          'data'\n        );\n      }\n\n      const signals = replyObject.__MetaObject['signals'];\n      for (const i in signals) {\n        const signalName = signals[i]['name'];\n        replyObject[signalName] = this.createMetaSignal(\n          pyIndex,\n          signalName,\n          false\n        );\n      }\n\n      const properties = replyObject.__MetaObject['properties'];\n      for (const i in properties) {\n        const propertyName = properties[i]['name'];\n        replyObject[propertyName] = this.createMetaSignal(\n          pyIndex,\n          propertyName,\n          true\n        );\n      }\n\n      this._dfd[idm].resolve(replyObject);\n    } else {\n      if (this._dfd[idm].__cbi !== undefined) {\n        const cbi = this._dfd[idm].__cbi;\n        this._sigs[cbi['obj']][cbi['signal']][data['result']] = cbi['cb'];\n      }\n      this._dfd[idm].resolve(data['result']);\n    }\n    delete this._dfd[idm];\n  }\n\n  onError(data: any) {\n    if (data['idm'] !== undefined) {\n      this._dfd[data['idm']].reject(data['result']);\n      delete this._dfd[data['idm']];\n    }\n  }\n\n  onSignal(data: any) {\n    const result = data['result'];\n    const callback =\n      this._sigs[result['obj']][result['signal']][result['link']];\n    if (callback !== undefined) {\n      callback.apply(this, result['data']);\n    }\n  }\n\n  onConnect() {\n    if (this.connected) {\n      this.connected(this);\n    }\n  }\n\n  onDisconnect(_data: any) {\n    for (const idm in this._dfd) {\n      this._dfd[idm].reject('Call ' + idm + ' canceled: disconnected');\n      delete this._dfd[idm];\n    }\n\n    if (this.disconnected) {\n      this.disconnected();\n    }\n  }\n\n  createMetaCall(obj: any, member: any, data: any) {\n    return (...serviceArgs: any[]) => {\n      ++this._idm;\n\n      const promise = new Promise((resolve, reject) => {\n        this._dfd[this._idm] = { resolve: resolve, reject: reject };\n      });\n      if (serviceArgs[0] === 'connect') {\n        this.isConnected = this._socket.socket.connected;\n        this._dfd[this._idm].__cbi = data;\n      }\n      this._socket.emit('call', {\n        idm: this._idm,\n        params: { obj: obj, member: member, args: serviceArgs },\n      });\n      return promise;\n    };\n  }\n\n  createMetaSignal(obj: any, signal: any, isProperty: boolean) {\n    const signalObject: signalType = {};\n    this._sigs[obj][signal] = [];\n    signalObject.connect = (cb: any) => {\n      return this.createMetaCall(obj, signal, {\n        obj: obj,\n        signal: signal,\n        cb: cb,\n      })('connect');\n    };\n\n    signalObject.disconnect = (args: any) => {\n      delete this._sigs[obj][signal][args];\n      return this.createMetaCall(obj, signal, 'data')('disconnect', args);\n    };\n\n    if (!isProperty) {\n      return signalObject;\n    }\n\n    signalObject.setValue = (...valueArgs: any[]) => {\n      return this.createMetaCall(obj, signal, 'data').apply(\n        this,\n        ['setValue'].concat(valueArgs)\n      );\n    };\n\n    signalObject.value = () => {\n      return this.createMetaCall(obj, signal, 'data')('value');\n    };\n\n    return signalObject;\n  }\n}\n",
         "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexport const MODULE_VERSION = data.version;\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name;\n",
-        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  ISerializers,\n} from '@jupyter-widgets/base';\n\nimport { MODULE_NAME, MODULE_VERSION } from './version';\n\n// Import the CSS\nimport '../css/widget.css';\n\nimport { QiSession } from './qimessaging';\n\nexport class NaoRobotModel extends DOMWidgetModel {\n  qiSession: QiSession;\n  connected: string = \"Disconnected\";\n  status: string = \"Not busy\";\n  synco: string;\n\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: NaoRobotModel.model_name,\n      _model_module: NaoRobotModel.model_module,\n      _model_module_version: NaoRobotModel.model_module_version,\n      _view_name: NaoRobotModel.view_name,\n      _view_module: NaoRobotModel.view_module,\n      _view_module_version: NaoRobotModel.view_module_version,\n      value: 'Hello World',\n      synco: \"something silly\",\n      connected: \"Disconnected\",\n      status: \"Not busy\",\n    };\n  }\n\n  initialize(attributes: any, options: any): void {\n    super.initialize(attributes, options);\n  \n    this.on(\"msg:custom\", this.onCommand);\n  }\n\n  private changeStatus(statusMessage: string) {\n    this.status = statusMessage;\n    this.set(\"status\", statusMessage);\n    this.save_changes();\n  }\n\n  async connect(ipAddress: string, port: string) {\n    console.log(\"REMOVE the command was to connect\");\n    this.changeStatus(\"Establishing connection\");\n\n    this.qiSession = new QiSession(ipAddress, port);    \n    \n    this.connected = \"Connected\";\n    this.set(\"connected\", \"Connected\");\n    this.save_changes();\n\n    this.changeStatus(\"Not busy\");\n  }\n\n  disconnect() {\n    console.log(\"REMOVE disconnecting\");\n    // TODO: Make disconnect function\n    // delete this.qiSession;\n    this.connected = \"Disconnected\";\n    this.changeStatus(\"Unavailable\");\n  }\n\n  async Testing() {\n    this.qiSession = new QiSession();\n    const tts = await this.qiSession.service(\"ALTextToSpeech\");\n    // let msg : any = Object.getOwnPropertyNames(tts);\n    let aThing: any = this.send(tts);\n    console.log(\"A thing: \", aThing);\n    console.log(\"JS sent something\");\n  }\n\n  async goSleep(tSeconds : number) {\n    console.log(\"IN THE SLEEPING SESH\")\n    const sleep = (ms: number) => new Promise((r) => setTimeout(r, ms));\n\n    await sleep(tSeconds * 1000);\n\n    console.log(\"WAKING UP\");\n\n    this.set(\"synco\", \"something else\");\n    this.save_changes();\n\n    this.send({data: \"purple\"});\n    console.log(\"SETTED THE VALUE\");\n\n  }\n\n  private async callService(\n    serviceName: string,\n    methodName: string,\n    args: any,\n    kwargs: any\n  ) {\n    const naoService = await this.qiSession.service(serviceName);\n\n    this.changeStatus(\"Running method\" + methodName);\n    await naoService[methodName](...args);\n\n    this.changeStatus(\"Task completed\");\n  }\n\n  private async onCommand(commandData: any, buffers: any) {\n    console.log(\"REMOVE onCommand\", commandData);\n    const cmd = commandData[\"command\"];\n\n    switch (cmd) {\n      case \"connect\":\n        await this.connect(\n          commandData[\"ipAddress\"],\n          commandData[\"port\"]);\n        break;\n\n      case \"disconnect\":\n        this.disconnect();\n        break;\n\n      case \"callService\":\n        console.log(\"RECEIVING COMMAND FOR SERVICE\");\n        await this.callService(\n          commandData[\"service\"],\n          commandData[\"method\"],\n          commandData[\"args\"],\n          commandData[\"kwargs\"]\n        );\n        break;\n      \n    }\n\n    console.log(\"End of OnCommand\")\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n    // Add any extra serializers here\n  };\n\n  // var qiSession = // TODO:\n  static model_name = 'NaoRobotModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'NaoRobotView'; // Set to null if no view\n  static view_module = MODULE_NAME; // Set to null if no view\n  static view_module_version = MODULE_VERSION;\n}\n\nexport class NaoRobotView extends DOMWidgetView {\n  synco: HTMLDivElement;\n  txt_connected: HTMLDivElement;\n  txt_status: HTMLDivElement;\n\n  render() {\n    this.el.classList.add('custom-widget');\n\n    // Connection element\n    this.txt_connected = document.createElement('div');\n    this.txt_connected.textContent = \"Disconnected\";\n    this.el.appendChild(this.txt_connected);\n\n    // Status element\n    this.txt_status = document.createElement('div');\n    this.txt_status.textContent = \"Not busy\";\n    this.el.appendChild(this.txt_status);\n\n    // Testing element\n    this.synco = document.createElement('div');\n    this.synco.textContent = \"it should be here\";\n    this.el.appendChild(this.synco);\n\n    console.log(\"RENDERING\");\n    console.log(this.model.get(\"connected\"), \" CONNECTED\");\n    console.log(this.model.get(\"synco\"), \" SYNCO\");\n\n    this.value_changed();\n    this.model.on('change:connected', this.value_changed, this);\n    this.model.on('change:status', this.value_changed, this);\n    this.model.on('change:synco', this.value_changed, this);\n  }\n\n  value_changed() {\n    // this.el.textContent = this.model.get('value');\n    // this.synco = this.model.get('synco');\n    console.log(\"THE VALUE CHANGED\")\n    this.txt_connected.textContent = this.model.get(\"connected\");\n    this.txt_status.textContent = this.model.get(\"status\");\n    this.synco.textContent = this.model.get('synco');\n\n  }\n}\n",
+        "// Copyright (c) Isabel Paredes\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  ISerializers,\n} from '@jupyter-widgets/base';\n\nimport { MODULE_NAME, MODULE_VERSION } from './version';\n\n// Import the CSS\nimport '../css/widget.css';\n\nimport { QiSession } from './qimessaging';\n\ninterface serviceDict {\n  [key: string]: {\n    [key: string]: any;\n  };\n}\n\nexport class NaoRobotModel extends DOMWidgetModel {\n  qiSession: QiSession;\n  connected = 'Disconnected';\n  status = 'Not busy';\n  _services: serviceDict = {};\n\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: NaoRobotModel.model_name,\n      _model_module: NaoRobotModel.model_module,\n      _model_module_version: NaoRobotModel.model_module_version,\n      _view_name: NaoRobotModel.view_name,\n      _view_module: NaoRobotModel.view_module,\n      _view_module_version: NaoRobotModel.view_module_version,\n      connected: 'Disconnected',\n      status: 'Not busy',\n      counter: 0,\n    };\n  }\n\n  initialize(attributes: any, options: any): void {\n    super.initialize(attributes, options);\n    this.on('msg:custom', this.onCommand);\n  }\n\n  private changeStatus(statusMessage: string) {\n    this.status = statusMessage;\n    this.set('status', statusMessage);\n    this.save_changes();\n  }\n\n  private validateIPaddress(ipAddress: string) {\n    // TODO: validate port also\n    if (ipAddress === 'nao.local') {\n      return true;\n    } else {\n      const regexp = new RegExp(\n        '^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(.(?!$)|$)){4}$'\n      );\n      return regexp.test(ipAddress);\n    }\n  }\n\n  async connect(ipAddress: string, port: string) {\n    const sleep = (ms: number) => new Promise((r) => setTimeout(r, ms));\n\n    this.changeStatus('Establishing connection');\n\n    if (!this.validateIPaddress(ipAddress)) {\n      this.changeStatus('Invalid IP address');\n      console.warn('IP Address ', ipAddress, ' is not valid');\n      return;\n    }\n\n    this.qiSession = new QiSession(ipAddress, port);\n\n    // Timeout after ~10 seconds\n    for (let i = 0; i < 100; i++) {\n      await sleep(100);\n      if (this.qiSession.isConnected()) {\n        this.connected = 'Connected';\n        this.set('connected', 'Connected');\n        this.save_changes();\n        this.changeStatus('Available');\n        console.log('Connection successful after ', i / 10.0, ' seconds.');\n        break;\n      }\n    }\n\n    // Handle connection failure\n    if (!this.qiSession.isConnected()) {\n      console.error('Connection to ', ipAddress, ' could not be established.');\n      this.changeStatus('Unavailable');\n    }\n  }\n\n  disconnect() {\n    console.log('REMOVE disconnecting');\n    // TODO: Make disconnect function\n    // delete this.qiSession;\n    this.connected = 'Disconnected';\n    this.changeStatus('Unavailable');\n  }\n\n  private async createService(serviceName: string) {\n    this.changeStatus('Creating service ' + serviceName);\n    const servicePromise = this.qiSession.service(serviceName);\n\n    const naoService = await servicePromise\n      .then((resolution: any) => {\n        return resolution;\n      })\n      .catch((rejection: string) => {\n        this.changeStatus(rejection);\n        return rejection;\n      });\n\n    // Store service only when successfully created\n    if (typeof naoService === 'object') {\n      this._services[serviceName] = naoService;\n      this.changeStatus(serviceName + ' available');\n    }\n  }\n\n  private async callService(\n    serviceName: string,\n    methodName: string,\n    args: any,\n    _kwargs: any\n  ) {\n    if (this._services[serviceName][methodName] === undefined) {\n      this.changeStatus(methodName + ' does not exist for ' + serviceName);\n      return;\n    }\n\n    // let serviceResponse;\n    this.changeStatus('Running method ' + methodName);\n\n    const servicePromise = this._services[serviceName][methodName](...args);\n    await servicePromise\n      .then((resolution: any) => {\n        this.changeStatus('Task completed');\n        if (resolution !== undefined) {\n          this.send(resolution);\n        }\n      })\n      .catch((rejection: string) => {\n        this.changeStatus(rejection);\n        this.send(rejection);\n      });\n\n    this.set('counter', this.get('counter') + 1);\n    this.save_changes();\n  }\n\n  private async onCommand(commandData: any, buffers: any) {\n    const cmd = commandData['command'];\n\n    switch (cmd) {\n      case 'connect':\n        await this.connect(commandData['ipAddress'], commandData['port']);\n        break;\n\n      case 'disconnect':\n        this.disconnect();\n        break;\n\n      case 'createService':\n        this.createService(commandData['service']);\n        break;\n\n      case 'callService':\n        await this.callService(\n          commandData['service'],\n          commandData['method'],\n          commandData['args'],\n          commandData['kwargs']\n        );\n        break;\n    }\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n    // Add any extra serializers here\n  };\n\n  static model_name = 'NaoRobotModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'NaoRobotView'; // Set to null if no view\n  static view_module = MODULE_NAME; // Set to null if no view\n  static view_module_version = MODULE_VERSION;\n}\n\nexport class NaoRobotView extends DOMWidgetView {\n  txt_connected: HTMLDivElement;\n  txt_status: HTMLDivElement;\n\n  render() {\n    this.el.classList.add('custom-widget');\n\n    // Connection element\n    this.txt_connected = document.createElement('div');\n    this.txt_connected.textContent = 'Disconnected';\n    this.el.appendChild(this.txt_connected);\n\n    // Status element\n    this.txt_status = document.createElement('div');\n    this.txt_status.textContent = 'Not busy';\n    this.el.appendChild(this.txt_status);\n\n    this.value_changed();\n    this.model.on('change:connected', this.value_changed, this);\n    this.model.on('change:status', this.value_changed, this);\n  }\n\n  value_changed() {\n    this.txt_connected.textContent = this.model.get('connected');\n    this.txt_status.textContent = this.model.get('status');\n  }\n}\n",
         "module.exports = __WEBPACK_EXTERNAL_MODULE__146__;",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n",
         "__webpack_require__.nc = undefined;",
         "// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(112);\n"
     ],
     "version": 3
 }
```

## Comparing `ipynao-0.1.3.dist-info/METADATA` & `ipynao-0.2.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ipynao
-Version: 0.1.3
+Version: 0.2.0
 Summary: A widget library for controlling Nao
 Project-URL: Homepage, https://github.com/QuantStack/ipynao
 Author-email: Isabel Paredes <isabel.paredes@quantstack.net>
 License: Copyright (c) 2023 Isabel Paredes
         All rights reserved.
         
         Redistribution and use in source and binary forms, with or without
```

## Comparing `ipynao-0.1.3.dist-info/licenses/LICENSE.txt` & `ipynao-0.2.0.dist-info/licenses/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `ipynao-0.1.3.dist-info/RECORD` & `ipynao-0.2.0.dist-info/RECORD`

 * *Files 24% similar despite different names*

```diff
@@ -1,42 +1,42 @@
 ipynao/__init__.py,sha256=agVZE8PFE7Yt6hh1EodpMHSVDon2nYN0lqqDGH5Ncss,1812
-ipynao/_frontend.py,sha256=PuZ_clodSS3jgMwhW5M7MUuxw_RH5K-AfEiYtIgNDfA,244
+ipynao/_frontend.py,sha256=_ZOVvX041_SAu2JduF89CnVWDou6KpEnC0w7KLECAu4,244
 ipynao/_version.py,sha256=kiq8QL8tPSZGzCHiSl_UL8uQO35QqX0wNdGbZ16nMhQ,210
-ipynao/nao_robot.py,sha256=GFaNyX2Ukl8ynwiW_ZMZ1xS-KF_VifF6SpXa2AjUrqY,2743
+ipynao/nao_robot.py,sha256=O1KaCkNcQY08ol3HgognVGov-6KtwaSEI9uUY-AZ8w0,3580
 ipynao/labextension/install.json,sha256=CIhanCgWFKHmxa7fhRn0k_tUOD9_-GCCEyN56tt76z0,173
-ipynao/labextension/package.json,sha256=c1z4Dn5XOt-O4kPM6kW880MSF1yeNfKKC3bw2vwmsv8,3157
-ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js,sha256=9hdjJCZ8A8MGt3Y0pfCbFqNl75EyWj60fAsNv8gCgyw,45191
-ipynao/labextension/static/14.fc6d1d9a1e570d86bdac.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
-ipynao/labextension/static/367.85a5246f5a9e7b7a8ee5.js,sha256=haUkb1qee3qO5Sg4R0uDT_O2JiKgAnacMmKrVdilRqI,12586
+ipynao/labextension/package.json,sha256=QSm1481ONcFaHUATixVSTqJYA3fs7tK5LPO0nsGHIKM,3157
+ipynao/labextension/static/14.0fa00990c242d51d6008.js,sha256=t3m6y4yEJPxaqA_mEoLGpr7c1MJWQkEPWbp870LNE84,43529
+ipynao/labextension/static/14.0fa00990c242d51d6008.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
+ipynao/labextension/static/367.b645d81d431e42710263.js,sha256=tkXYHUMeQnECYz9sCiv7R9pzdBxqEx9JuYrXPpccOl8,13093
 ipynao/labextension/static/480.d3a408009df0988c3390.js,sha256=06QIAJ3wmIwzkEvXKPrkmrpjjg3fWzRyq7WZ_uPbrhQ,912
 ipynao/labextension/static/568.54258d511e530803c07b.js,sha256=VCWNUR5TCAPAe6zcfg_EjhjGav1eK8ade1MvRiTwALc,518
-ipynao/labextension/static/remoteEntry.0f89463f87cb2ebf3619.js,sha256=D4lGP4fLLr82GRvhitD6Qghj1XFMHo0syMv6ovtQI5g,6608
+ipynao/labextension/static/remoteEntry.b415cdfc968a0f208fcf.js,sha256=tBXN_JaKDyCPz6IOtUWDXiUxrLGrPYsvQwLpKM4DXY4,6608
 ipynao/labextension/static/style.js,sha256=-CQt0ZTPaCTvrRiLcznxflAbfvIKlOVzjOos-muaXQ8,118
-ipynao/labextension/static/third-party-licenses.json,sha256=SRKPoD45z1QT7Jg-hcjq_xX6VFdNAsbSw_przYu2tTM,4118
+ipynao/labextension/static/third-party-licenses.json,sha256=nAA5zY9E8N-Fk8FSM0RzQPRugzkCEnqplz1sOznrSQc,4118
 ipynao/nbextension/extension.js,sha256=y13vsEf-bP6LfWCZIwsa5tQ3Hl_L9IySWzJMSwAp7ys,402
-ipynao/nbextension/index.js,sha256=JKtz7od0lLY586FeiEa3jYYA4dowTvH79bDz_gfffZ8,59183
+ipynao/nbextension/index.js,sha256=4nS1Q70scX3WbG3YNVzWPXR5aUGWpRM838LISWs3mms,58028
 ipynao/nbextension/index.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
-ipynao/nbextension/index.js.map,sha256=5nADpoCDOwyNdf2y1U-gd-xgh-HV9Izs3U0oY0xNvfw,235634
+ipynao/nbextension/index.js.map,sha256=14kE0o5Dqpo1uhlLZxXHROAjWBvdbwDmuPhlxdPkADo,232772
 ipynao/tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ipynao/tests/conftest.py,sha256=nVT-JotHdjdbXWu2jz5S8uhwQxzWAlP969mMGznTb-w,1412
-ipynao/tests/test_example.py,sha256=YdyD5zwYdy2D730dqF09W0W-JI5bLiTDJkbM_8Re9NA,285
+ipynao/tests/test_example.py,sha256=LQpvXfIwGnbs2JAC5FfplD1UJ5D9-OG27Kn2mP2Zae8,290
 ipynao/tests/test_nbextension_path.py,sha256=b2i1oPWkBJwf5hjOMZ26B8-V71_ITPpXXKdRFO_2Obg,460
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/install.json,sha256=CIhanCgWFKHmxa7fhRn0k_tUOD9_-GCCEyN56tt76z0,173
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/package.json,sha256=c1z4Dn5XOt-O4kPM6kW880MSF1yeNfKKC3bw2vwmsv8,3157
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js,sha256=9hdjJCZ8A8MGt3Y0pfCbFqNl75EyWj60fAsNv8gCgyw,45191
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/14.fc6d1d9a1e570d86bdac.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/367.85a5246f5a9e7b7a8ee5.js,sha256=haUkb1qee3qO5Sg4R0uDT_O2JiKgAnacMmKrVdilRqI,12586
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js,sha256=06QIAJ3wmIwzkEvXKPrkmrpjjg3fWzRyq7WZ_uPbrhQ,912
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js,sha256=VCWNUR5TCAPAe6zcfg_EjhjGav1eK8ade1MvRiTwALc,518
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.0f89463f87cb2ebf3619.js,sha256=D4lGP4fLLr82GRvhitD6Qghj1XFMHo0syMv6ovtQI5g,6608
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/style.js,sha256=-CQt0ZTPaCTvrRiLcznxflAbfvIKlOVzjOos-muaXQ8,118
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json,sha256=SRKPoD45z1QT7Jg-hcjq_xX6VFdNAsbSw_przYu2tTM,4118
-ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/extension.js,sha256=y13vsEf-bP6LfWCZIwsa5tQ3Hl_L9IySWzJMSwAp7ys,402
-ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js,sha256=JKtz7od0lLY586FeiEa3jYYA4dowTvH79bDz_gfffZ8,59183
-ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
-ipynao-0.1.3.data/data/share/jupyter/nbextensions/ipynao/index.js.map,sha256=5nADpoCDOwyNdf2y1U-gd-xgh-HV9Izs3U0oY0xNvfw,235634
-ipynao-0.1.3.data/data/etc/jupyter/nbconfig/notebook.d/ipynao.json,sha256=icr9B5DaQGgy9C1wxEISnjOvJoTNE6oLuxElD8mNEjI,60
-ipynao-0.1.3.data/data/share/jupyter/labextensions/ipynao/install.json,sha256=CIhanCgWFKHmxa7fhRn0k_tUOD9_-GCCEyN56tt76z0,173
-ipynao-0.1.3.dist-info/METADATA,sha256=jPdvuNd-nwN3M9AqVy7YIjDLJESX0fp3nCrpJgty9Ao,5467
-ipynao-0.1.3.dist-info/WHEEL,sha256=9QBuHhg6FNW7lppboF2vKVbCGTVzsFykgRQjjlajrhA,87
-ipynao-0.1.3.dist-info/licenses/LICENSE.txt,sha256=QYJweKpnkXHfI3dmfRxqSu2ziICPuasxkmYnDi25RIs,1499
-ipynao-0.1.3.dist-info/RECORD,,
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/install.json,sha256=CIhanCgWFKHmxa7fhRn0k_tUOD9_-GCCEyN56tt76z0,173
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/package.json,sha256=QSm1481ONcFaHUATixVSTqJYA3fs7tK5LPO0nsGHIKM,3157
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js,sha256=t3m6y4yEJPxaqA_mEoLGpr7c1MJWQkEPWbp870LNE84,43529
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/14.0fa00990c242d51d6008.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/367.b645d81d431e42710263.js,sha256=tkXYHUMeQnECYz9sCiv7R9pzdBxqEx9JuYrXPpccOl8,13093
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/480.d3a408009df0988c3390.js,sha256=06QIAJ3wmIwzkEvXKPrkmrpjjg3fWzRyq7WZ_uPbrhQ,912
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/568.54258d511e530803c07b.js,sha256=VCWNUR5TCAPAe6zcfg_EjhjGav1eK8ade1MvRiTwALc,518
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/remoteEntry.b415cdfc968a0f208fcf.js,sha256=tBXN_JaKDyCPz6IOtUWDXiUxrLGrPYsvQwLpKM4DXY4,6608
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/style.js,sha256=-CQt0ZTPaCTvrRiLcznxflAbfvIKlOVzjOos-muaXQ8,118
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/static/third-party-licenses.json,sha256=nAA5zY9E8N-Fk8FSM0RzQPRugzkCEnqplz1sOznrSQc,4118
+ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/extension.js,sha256=y13vsEf-bP6LfWCZIwsa5tQ3Hl_L9IySWzJMSwAp7ys,402
+ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js,sha256=4nS1Q70scX3WbG3YNVzWPXR5aUGWpRM838LISWs3mms,58028
+ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.LICENSE.txt,sha256=9Qlhf_pBZEIC9HB132po39eLDnrVEcNDIA3owdB3rwo,206
+ipynao-0.2.0.data/data/share/jupyter/nbextensions/ipynao/index.js.map,sha256=14kE0o5Dqpo1uhlLZxXHROAjWBvdbwDmuPhlxdPkADo,232772
+ipynao-0.2.0.data/data/etc/jupyter/nbconfig/notebook.d/ipynao.json,sha256=icr9B5DaQGgy9C1wxEISnjOvJoTNE6oLuxElD8mNEjI,60
+ipynao-0.2.0.data/data/share/jupyter/labextensions/ipynao/install.json,sha256=CIhanCgWFKHmxa7fhRn0k_tUOD9_-GCCEyN56tt76z0,173
+ipynao-0.2.0.dist-info/METADATA,sha256=q_ys4uPpauCNL5xZ6ahf_gRERmbW65KPom9ZlQ6D0tQ,5467
+ipynao-0.2.0.dist-info/WHEEL,sha256=9QBuHhg6FNW7lppboF2vKVbCGTVzsFykgRQjjlajrhA,87
+ipynao-0.2.0.dist-info/licenses/LICENSE.txt,sha256=QYJweKpnkXHfI3dmfRxqSu2ziICPuasxkmYnDi25RIs,1499
+ipynao-0.2.0.dist-info/RECORD,,
```

